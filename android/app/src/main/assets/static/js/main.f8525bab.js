/*! For license information please see main.f8525bab.js.LICENSE.txt */
(()=>{var e={350:(e,t,n)=>{const r=n(7969),i=r.getBCHDigit(1335);t.getEncodedBits=function(e,t){const n=e.bit<<3|t;let s=n<<10;for(;r.getBCHDigit(s)-i>=0;)s^=1335<<r.getBCHDigit(s)-i;return 21522^(n<<10|s)}},557:function(e,t,n){var r;"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof this||("undefined"!==typeof window?window:"undefined"!==typeof self?self:n.g),r=function(e){return function(){"use strict";var t={172:function(e,t){var n=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.CellHookData=t.HookData=void 0;var r=function(e,t,n){this.table=t,this.pageNumber=t.pageNumber,this.pageCount=this.pageNumber,this.settings=t.settings,this.cursor=n,this.doc=e.getDocument()};t.HookData=r;var i=function(e){function t(t,n,r,i,s,a){var o=e.call(this,t,n,a)||this;return o.cell=r,o.row=i,o.column=s,o.section=i.section,o}return n(t,e),t}(r);t.CellHookData=i},340:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=n(136),s=n(744),a=n(776),o=n(664),l=n(972);t.default=function(e){e.API.autoTable=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];1===t.length?e=t[0]:(console.error("Use of deprecated autoTable initiation"),(e=t[2]||{}).columns=t[0],e.body=t[1]);var r=(0,a.parseInput)(this,e),i=(0,l.createTable)(this,r);return(0,o.drawTable)(this,i),this},e.API.lastAutoTable=!1,e.API.previousAutoTable=!1,e.API.autoTable.previous=!1,e.API.autoTableText=function(e,t,n,r){(0,i.default)(e,t,n,r,this)},e.API.autoTableSetDefaults=function(e){return s.DocHandler.setDefaults(e,this),this},e.autoTableSetDefaults=function(e,t){s.DocHandler.setDefaults(e,t)},e.API.autoTableHtmlToJson=function(e,t){var n;if(void 0===t&&(t=!1),"undefined"===typeof window)return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new s.DocHandler(this),a=(0,r.parseHtml)(i,e,window,t,!1),o=a.head,l=a.body;return{columns:(null===(n=o[0])||void 0===n?void 0:n.map(function(e){return e.content}))||[],rows:l,data:l}},e.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var e=this.lastAutoTable;return e&&e.finalY?e.finalY:0},e.API.autoTableAddPageContent=function(t){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),e.API.autoTable.globalDefaults||(e.API.autoTable.globalDefaults={}),e.API.autoTable.globalDefaults.addPageContent=t,this},e.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}},136:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,i){r=r||{};var s=i.internal.scaleFactor,a=i.internal.getFontSize()/s,o=a*(i.getLineHeightFactor?i.getLineHeightFactor():1.15),l="",c=1;if("middle"!==r.valign&&"bottom"!==r.valign&&"center"!==r.halign&&"right"!==r.halign||(c=(l="string"===typeof e?e.split(/\r\n|\r|\n/g):e).length||1),n+=a*(2-1.15),"middle"===r.valign?n-=c/2*o:"bottom"===r.valign&&(n-=c*o),"center"===r.halign||"right"===r.halign){var u=a;if("center"===r.halign&&(u*=.5),l&&c>=1){for(var d=0;d<l.length;d++)i.text(l[d],t-i.getStringUnitWidth(l[d])*u,n),n+=o;return i}t-=i.getStringUnitWidth(e)*u}return"justify"===r.halign?i.text(e,t,n,{maxWidth:r.maxWidth||100,align:"justify"}):i.text(e,t,n),i}},420:function(e,t){function n(e,t){var n=e>0,r=t||0===t;return n&&r?"DF":n?"S":r?"F":null}function r(e,t){var n,r,i,s;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(3===e.length)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(2===e.length)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e=1===e.length?e[0]:t}return"object"===typeof e?("number"===typeof e.vertical&&(e.top=e.vertical,e.bottom=e.vertical),"number"===typeof e.horizontal&&(e.right=e.horizontal,e.left=e.horizontal),{left:null!==(n=e.left)&&void 0!==n?n:t,top:null!==(r=e.top)&&void 0!==r?r:t,right:null!==(i=e.right)&&void 0!==i?i:t,bottom:null!==(s=e.bottom)&&void 0!==s?s:t}):("number"!==typeof e&&(e=t),{top:e,right:e,bottom:e,left:e})}Object.defineProperty(t,"__esModule",{value:!0}),t.getPageAvailableWidth=t.parseSpacing=t.getFillStyle=t.addTableBorder=t.getStringWidth=void 0,t.getStringWidth=function(e,t,n){return n.applyStyles(t,!0),(Array.isArray(e)?e:[e]).map(function(e){return n.getTextWidth(e)}).reduce(function(e,t){return Math.max(e,t)},0)},t.addTableBorder=function(e,t,r,i){var s=t.settings.tableLineWidth,a=t.settings.tableLineColor;e.applyStyles({lineWidth:s,lineColor:a});var o=n(s,!1);o&&e.rect(r.x,r.y,t.getWidth(e.pageSize().width),i.y-r.y,o)},t.getFillStyle=n,t.parseSpacing=r,t.getPageAvailableWidth=function(e,t){var n=r(t.settings.margin,0);return e.pageSize().width-(n.left+n.right)}},796:function(e,t){var n=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.getTheme=t.defaultStyles=t.HtmlRowInput=void 0;var r=function(e){function t(t){var n=e.call(this)||this;return n._element=t,n}return n(t,e),t}(Array);t.HtmlRowInput=r,t.defaultStyles=function(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}},t.getTheme=function(e){return{striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}}[e]}},903:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.parseCss=void 0;var r=n(420);function i(e,t){var n=s(e,t);if(!n)return null;var r=n.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var i=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])];return 0===parseInt(r[4])||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function s(e,t){var n=t(e);return"rgba(0, 0, 0, 0)"===n||"transparent"===n||"initial"===n||"inherit"===n?null==e.parentElement?null:s(e.parentElement,t):n}t.parseCss=function(e,t,n,s,a){var o={},l=96/72,c=i(t,function(e){return a.getComputedStyle(e).backgroundColor});null!=c&&(o.fillColor=c);var u=i(t,function(e){return a.getComputedStyle(e).color});null!=u&&(o.textColor=u);var d=function(e,t){var n=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],i=96/(72/t),s=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,a=n.map(function(e){return parseInt(e||"0")/i}),o=(0,r.parseSpacing)(a,0);return s>o.top&&(o.top=s),s>o.bottom&&(o.bottom=s),o}(s,n);d&&(o.cellPadding=d);var h="borderTopColor",f=l*n,p=s.borderTopWidth;if(s.borderBottomWidth===p&&s.borderRightWidth===p&&s.borderLeftWidth===p){var m=(parseFloat(p)||0)/f;m&&(o.lineWidth=m)}else o.lineWidth={top:(parseFloat(s.borderTopWidth)||0)/f,right:(parseFloat(s.borderRightWidth)||0)/f,bottom:(parseFloat(s.borderBottomWidth)||0)/f,left:(parseFloat(s.borderLeftWidth)||0)/f},o.lineWidth.top||(o.lineWidth.right?h="borderRightColor":o.lineWidth.bottom?h="borderBottomColor":o.lineWidth.left&&(h="borderLeftColor"));var g=i(t,function(e){return a.getComputedStyle(e)[h]});null!=g&&(o.lineColor=g);var y=["left","right","center","justify"];-1!==y.indexOf(s.textAlign)&&(o.halign=s.textAlign),-1!==(y=["middle","bottom","top"]).indexOf(s.verticalAlign)&&(o.valign=s.verticalAlign);var v=parseInt(s.fontSize||"");isNaN(v)||(o.fontSize=v/l);var w=function(e){var t="";return("bold"===e.fontWeight||"bolder"===e.fontWeight||parseInt(e.fontWeight)>=700)&&(t="bold"),"italic"!==e.fontStyle&&"oblique"!==e.fontStyle||(t+="italic"),t}(s);w&&(o.fontStyle=w);var b=(s.fontFamily||"").toLowerCase();return-1!==e.indexOf(b)&&(o.font=b),o}},744:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DocHandler=void 0;var n={},r=function(){function e(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(e,t){void 0===t&&(t=null),t?t.__autoTableDocumentDefaults=e:n=e},e.unifyColor=function(e){return Array.isArray(e)?e:"number"===typeof e?[e,e,e]:"string"===typeof e?[e]:null},e.prototype.applyStyles=function(t,n){var r,i,s;void 0===n&&(n=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var a=this.jsPDFDocument.internal.getFont(),o=a.fontStyle,l=a.fontName;if(t.font&&(l=t.font),t.fontStyle){o=t.fontStyle;var c=this.getFontList()[l];c&&-1===c.indexOf(o)&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(c[0]),o=c[0])}if(this.jsPDFDocument.setFont(l,o),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!n){var u=e.unifyColor(t.fillColor);u&&(r=this.jsPDFDocument).setFillColor.apply(r,u),(u=e.unifyColor(t.textColor))&&(i=this.jsPDFDocument).setTextColor.apply(i,u),(u=e.unifyColor(t.lineColor))&&(s=this.jsPDFDocument).setDrawColor.apply(s,u),"number"===typeof t.lineWidth&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(e,t,n){return this.jsPDFDocument.splitTextToSize(e,t,n)},e.prototype.rect=function(e,t,n,r,i){return this.jsPDFDocument.rect(e,t,n,r,i)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return n||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return null==e.width&&(e={width:e.getWidth(),height:e.getHeight()}),e},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}();t.DocHandler=r},4:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.parseHtml=void 0;var r=n(903),i=n(796);function s(e,t,n,s,o,l){for(var c=new i.HtmlRowInput(s),u=0;u<s.cells.length;u++){var d=s.cells[u],h=n.getComputedStyle(d);if(o||"none"!==h.display){var f=void 0;l&&(f=(0,r.parseCss)(e,d,t,h,n)),c.push({rowSpan:d.rowSpan,colSpan:d.colSpan,styles:f,_element:d,content:a(d)})}}var p=n.getComputedStyle(s);if(c.length>0&&(o||"none"!==p.display))return c}function a(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(e){return e.trim()}).join("\n"),t.innerText||t.textContent||""}t.parseHtml=function(e,t,n,r,i){var a,o,l;void 0===r&&(r=!1),void 0===i&&(i=!1),l="string"===typeof t?n.document.querySelector(t):t;var c=Object.keys(e.getFontList()),u=e.scaleFactor(),d=[],h=[],f=[];if(!l)return console.error("Html table could not be found with input: ",t),{head:d,body:h,foot:f};for(var p=0;p<l.rows.length;p++){var m=l.rows[p],g=null===(o=null===(a=null===m||void 0===m?void 0:m.parentElement)||void 0===a?void 0:a.tagName)||void 0===o?void 0:o.toLowerCase(),y=s(c,u,n,m,r,i);y&&("thead"===g?d.push(y):"tfoot"===g?f.push(y):h.push(y))}return{head:d,body:h,foot:f}}},776:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.parseInput=void 0;var r=n(4),i=n(356),s=n(420),a=n(744),o=n(792);t.parseInput=function(e,t){var n=new a.DocHandler(e),l=n.getDocumentOptions(),c=n.getGlobalOptions();(0,o.default)(n,c,l,t);var u,d=(0,i.assign)({},c,l,t);"undefined"!==typeof window&&(u=window);var h=function(e,t,n){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},s=function(s){if("columnStyles"===s){var a=e[s],o=t[s],l=n[s];r.columnStyles=(0,i.assign)({},a,o,l)}else{var c=[e,t,n].map(function(e){return e[s]||{}});r[s]=(0,i.assign)({},c[0],c[1],c[2])}},a=0,o=Object.keys(r);a<o.length;a++)s(o[a]);return r}(c,l,t),f=function(e,t,n){for(var r={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},i=0,s=[e,t,n];i<s.length;i++){var a=s[i];a.didParseCell&&r.didParseCell.push(a.didParseCell),a.willDrawCell&&r.willDrawCell.push(a.willDrawCell),a.didDrawCell&&r.didDrawCell.push(a.didDrawCell),a.willDrawPage&&r.willDrawPage.push(a.willDrawPage),a.didDrawPage&&r.didDrawPage.push(a.didDrawPage)}return r}(c,l,t),p=function(e,t){var n,r,i,a,o,l,c,u,d,h,f,p,m,g,y=(0,s.parseSpacing)(t.margin,40/e.scaleFactor()),v=null!==(n=function(e,t){var n=e.getLastAutoTable(),r=e.scaleFactor(),i=e.pageNumber(),s=!1;return n&&n.startPageNumber&&(s=n.startPageNumber+n.pageNumber-1===i),"number"===typeof t?t:null!=t&&!1!==t||!s||null==(null===n||void 0===n?void 0:n.finalY)?null:n.finalY+20/r}(e,t.startY))&&void 0!==n?n:y.top;m=!0===t.showFoot?"everyPage":!1===t.showFoot?"never":null!==(r=t.showFoot)&&void 0!==r?r:"everyPage",g=!0===t.showHead?"everyPage":!1===t.showHead?"never":null!==(i=t.showHead)&&void 0!==i?i:"everyPage";var w=null!==(a=t.useCss)&&void 0!==a&&a,b=t.theme||(w?"plain":"striped"),x=!!t.horizontalPageBreak,S=null!==(o=t.horizontalPageBreakRepeat)&&void 0!==o?o:null;return{includeHiddenHtml:null!==(l=t.includeHiddenHtml)&&void 0!==l&&l,useCss:w,theme:b,startY:v,margin:y,pageBreak:null!==(c=t.pageBreak)&&void 0!==c?c:"auto",rowPageBreak:null!==(u=t.rowPageBreak)&&void 0!==u?u:"auto",tableWidth:null!==(d=t.tableWidth)&&void 0!==d?d:"auto",showHead:g,showFoot:m,tableLineWidth:null!==(h=t.tableLineWidth)&&void 0!==h?h:0,tableLineColor:null!==(f=t.tableLineColor)&&void 0!==f?f:200,horizontalPageBreak:x,horizontalPageBreakRepeat:S,horizontalPageBreakBehaviour:null!==(p=t.horizontalPageBreakBehaviour)&&void 0!==p?p:"afterAllRows"}}(n,d),m=function(e,t,n){var i=t.head||[],s=t.body||[],a=t.foot||[];if(t.html){var o=t.includeHiddenHtml;if(n){var l=(0,r.parseHtml)(e,t.html,n,o,t.useCss)||{};i=l.head||i,s=l.body||i,a=l.foot||i}else console.error("Cannot parse html in non browser environment")}var c=t.columns||function(e,t,n){var r=e[0]||t[0]||n[0]||[],i=[];return Object.keys(r).filter(function(e){return"_element"!==e}).forEach(function(e){var t,n=1;"object"!==typeof(t=Array.isArray(r)?r[parseInt(e)]:r[e])||Array.isArray(t)||(n=(null===t||void 0===t?void 0:t.colSpan)||1);for(var s=0;s<n;s++){var a={dataKey:Array.isArray(r)?i.length:e+(s>0?"_".concat(s):"")};i.push(a)}}),i}(i,s,a);return{columns:c,head:i,body:s,foot:a}}(n,d,u);return{id:t.tableId,content:m,hooks:f,styles:h,settings:p}}},792:function(e,t){function n(e){e.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),e.minCellHeight||(e.minCellHeight=e.rowHeight)):e.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),e.cellWidth||(e.cellWidth=e.columnWidth))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,i){for(var s=function(t){t&&"object"!==typeof t&&console.error("The options parameter should be of type object, is: "+typeof t),"undefined"!==typeof t.extendWidth&&(t.tableWidth=t.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),"undefined"!==typeof t.margins&&("undefined"===typeof t.margin&&(t.margin=t.margins),console.error("Use of deprecated option: margins, use margin instead.")),t.startY&&"number"!==typeof t.startY&&(console.error("Invalid value for startY option",t.startY),delete t.startY),!t.didDrawPage&&(t.afterPageContent||t.beforePageContent||t.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),t.didDrawPage=function(n){e.applyStyles(e.userStyles),t.beforePageContent&&t.beforePageContent(n),e.applyStyles(e.userStyles),t.afterPageContent&&t.afterPageContent(n),e.applyStyles(e.userStyles),t.afterPageAdd&&n.pageNumber>1&&n.afterPageAdd(n),e.applyStyles(e.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(e){t[e]&&console.error('The "'.concat(e,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(e){var n=e[0],r=e[1];t[r]&&(console.error("Use of deprecated option ".concat(r,". Use ").concat(n," instead")),t[n]=t[r])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(e){var n="string"===typeof e?e:e[0],r="string"===typeof e?e:e[1];"undefined"!==typeof t[n]&&("undefined"===typeof t.styles[r]&&(t.styles[r]=t[n]),console.error("Use of deprecated option: "+n+", use the style "+r+" instead."))});for(var r=0,i=["styles","bodyStyles","headStyles","footStyles"];r<i.length;r++)n(t[i[r]]||{});for(var s=t.columnStyles||{},a=0,o=Object.keys(s);a<o.length;a++)n(s[o[a]]||{})},a=0,o=[t,r,i];a<o.length;a++)s(o[a])}},260:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Column=t.Cell=t.Row=t.Table=void 0;var r=n(796),i=n(172),s=n(420),a=function(){function e(e,t){this.pageNumber=1,this.pageCount=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=t.columns,this.head=t.head,this.body=t.body,this.foot=t.foot}return e.prototype.getHeadHeight=function(e){return this.head.reduce(function(t,n){return t+n.getMaxCellHeight(e)},0)},e.prototype.getFootHeight=function(e){return this.foot.reduce(function(t,n){return t+n.getMaxCellHeight(e)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(e,t,n,r,s,a){for(var o=0,l=t;o<l.length;o++){var c=!1===(0,l[o])(new i.CellHookData(e,this,n,r,s,a));if(n.text=Array.isArray(n.text)?n.text:[n.text],c)return!1}return!0},e.prototype.callEndPageHooks=function(e,t){e.applyStyles(e.userStyles);for(var n=0,r=this.hooks.didDrawPage;n<r.length;n++)(0,r[n])(new i.HookData(e,this,t))},e.prototype.callWillDrawPageHooks=function(e,t){for(var n=0,r=this.hooks.willDrawPage;n<r.length;n++)(0,r[n])(new i.HookData(e,this,t))},e.prototype.getWidth=function(e){if("number"===typeof this.settings.tableWidth)return this.settings.tableWidth;if("wrap"===this.settings.tableWidth)return this.columns.reduce(function(e,t){return e+t.wrappedWidth},0);var t=this.settings.margin;return e-t.left-t.right},e}();t.Table=a;var o=function(){function e(e,t,n,i,s){void 0===s&&(s=!1),this.height=0,this.raw=e,e instanceof r.HtmlRowInput&&(this.raw=e._element,this.element=e._element),this.index=t,this.section=n,this.cells=i,this.spansMultiplePages=s}return e.prototype.getMaxCellHeight=function(e){var t=this;return e.reduce(function(e,n){var r;return Math.max(e,(null===(r=t.cells[n.index])||void 0===r?void 0:r.height)||0)},0)},e.prototype.hasRowSpan=function(e){var t=this;return e.filter(function(e){var n=t.cells[e.index];return!!n&&n.rowSpan>1}).length>0},e.prototype.canEntireRowFit=function(e,t){return this.getMaxCellHeight(t)<=e},e.prototype.getMinimumRowHeight=function(e,t){var n=this;return e.reduce(function(e,r){var i=n.cells[r.index];if(!i)return 0;var s=t.getLineHeight(i.styles.fontSize),a=i.padding("vertical")+s;return a>e?a:e},0)},e}();t.Row=o;var l=function(){function e(e,t,n){var r,i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=t,this.section=n,this.raw=e;var s=e;null==e||"object"!==typeof e||Array.isArray(e)?(this.rowSpan=1,this.colSpan=1):(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,s=null!==(i=null!==(r=e.content)&&void 0!==r?r:e.title)&&void 0!==i?i:e,e._element&&(this.raw=e._element));var a=null!=s?""+s:"";this.text=a.split(/\r\n|\r|\n/g)}return e.prototype.getTextPos=function(){var e,t;if("top"===this.styles.valign)e=this.y+this.padding("top");else if("bottom"===this.styles.valign)e=this.y+this.height-this.padding("bottom");else{var n=this.height-this.padding("vertical");e=this.y+n/2+this.padding("top")}if("right"===this.styles.halign)t=this.x+this.width-this.padding("right");else if("center"===this.styles.halign){var r=this.width-this.padding("horizontal");t=this.x+r/2+this.padding("left")}else t=this.x+this.padding("left");return{x:t,y:e}},e.prototype.getContentHeight=function(e,t){void 0===t&&(t=1.15);var n=(Array.isArray(this.text)?this.text.length:1)*(this.styles.fontSize/e*t)+this.padding("vertical");return Math.max(n,this.styles.minCellHeight)},e.prototype.padding=function(e){var t=(0,s.parseSpacing)(this.styles.cellPadding,0);return"vertical"===e?t.top+t.bottom:"horizontal"===e?t.left+t.right:t[e]},e}();t.Cell=l;var c=function(){function e(e,t,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=t,this.index=n}return e.prototype.getMaxCustomCellWidth=function(e){for(var t=0,n=0,r=e.allRows();n<r.length;n++){var i=r[n].cells[this.index];i&&"number"===typeof i.styles.cellWidth&&(t=Math.max(t,i.styles.cellWidth))}return t},e}();t.Column=c},356:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.assign=void 0,t.assign=function(e,t,n,r,i){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(e),a=1;a<arguments.length;a++){var o=arguments[a];if(null!=o)for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(s[l]=o[l])}return s}},972:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.createTable=void 0;var r=n(744),i=n(260),s=n(324),a=n(796),o=n(356);function l(e,t,n,r,s,a){var o={};return t.map(function(t,l){for(var c=0,d={},h=0,f=0,p=0,m=n;p<m.length;p++){var g=m[p];if(null==o[g.index]||0===o[g.index].left)if(0===f){var y=void 0,v={};"object"!==typeof(y=Array.isArray(t)?t[g.index-h-c]:t[g.dataKey])||Array.isArray(y)||(v=(null===y||void 0===y?void 0:y.styles)||{});var w=u(e,g,l,s,r,a,v),b=new i.Cell(y,w,e);d[g.dataKey]=b,d[g.index]=b,f=b.colSpan-1,o[g.index]={left:b.rowSpan-1,times:f}}else f--,h++;else o[g.index].left--,f=o[g.index].times,c++}return new i.Row(t,l,e,d)})}function c(e,t){var n={};return e.forEach(function(e){if(null!=e.raw){var r=function(e,t){if("head"===e){if("object"===typeof t)return t.header||t.title||null;if("string"===typeof t||"number"===typeof t)return t}else if("foot"===e&&"object"===typeof t)return t.footer;return null}(t,e.raw);null!=r&&(n[e.dataKey]=r)}}),Object.keys(n).length>0?n:null}function u(e,t,n,r,i,s,l){var c,u=(0,a.getTheme)(r);"head"===e?c=i.headStyles:"body"===e?c=i.bodyStyles:"foot"===e&&(c=i.footStyles);var d=(0,o.assign)({},u.table,u[e],i.styles,c),h=i.columnStyles[t.dataKey]||i.columnStyles[t.index]||{},f="body"===e?h:{},p="body"===e&&n%2===0?(0,o.assign)({},u.alternateRow,i.alternateRowStyles):{},m=(0,a.defaultStyles)(s),g=(0,o.assign)({},m,d,p,f);return(0,o.assign)(g,l)}t.createTable=function(e,t){var n=new r.DocHandler(e),a=function(e,t){var n,r=e.content,s=function(e){return e.map(function(e,t){var n,r,s;return s="object"===typeof e&&null!==(r=null!==(n=e.dataKey)&&void 0!==n?n:e.key)&&void 0!==r?r:t,new i.Column(s,e,t)})}(r.columns);(0===r.head.length&&(n=c(s,"head"))&&r.head.push(n),0===r.foot.length)&&((n=c(s,"foot"))&&r.foot.push(n));var a=e.settings.theme,o=e.styles;return{columns:s,head:l("head",r.head,s,o,a,t),body:l("body",r.body,s,o,a,t),foot:l("foot",r.foot,s,o,a,t)}}(t,n.scaleFactor()),o=new i.Table(t,a);return(0,s.calculateWidths)(n,o),n.applyStyles(n.userStyles),o}},664:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.addPage=t.drawTable=void 0;var r=n(420),i=n(260),s=n(744),a=n(356),o=n(136),l=n(224);function c(e,t,n,r){var i=t.settings;e.applyStyles(e.userStyles),"firstPage"!==i.showHead&&"everyPage"!==i.showHead||t.head.forEach(function(i){return p(e,t,i,n,r)})}function u(e,t,n,r,i,s){e.applyStyles(e.userStyles),s=null!==s&&void 0!==s?s:t.body.length;var a=Math.min(n+s,t.body.length),o=-1;return t.body.slice(n,a).forEach(function(s,a){var l=n+a===t.body.length-1,c=g(e,t,l,r);s.canEntireRowFit(c,i)&&(p(e,t,s,r,i),o=n+a)}),o}function d(e,t,n,r){var i=t.settings;e.applyStyles(e.userStyles),"lastPage"!==i.showFoot&&"everyPage"!==i.showFoot||t.foot.forEach(function(i){return p(e,t,i,n,r)})}function h(e,t,n){var r=n.getLineHeight(e.styles.fontSize),i=e.padding("vertical"),s=Math.floor((t-i)/r);return Math.max(0,s)}function f(e,t,n,r,s,o,l){var c=g(e,t,r,o);if(n.canEntireRowFit(c,l))p(e,t,n,o,l);else if(function(e,t,n,r){var i=e.pageSize().height,s=r.settings.margin,a=i-(s.top+s.bottom);"body"===t.section&&(a-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var o=t.getMinimumRowHeight(r.columns,e),l=o<n;if(o>a)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!l)return!1;var c=t.hasRowSpan(r.columns);return t.getMaxCellHeight(r.columns)>a?(c&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!c&&"avoid"!==r.settings.rowPageBreak}(e,n,c,t)){var u=function(e,t,n,r){var s={};e.spansMultiplePages=!0,e.height=0;for(var o=0,l=0,c=n.columns;l<c.length;l++){var u=c[l];if(w=e.cells[u.index]){Array.isArray(w.text)||(w.text=[w.text]);var d=new i.Cell(w.raw,w.styles,w.section);(d=(0,a.assign)(d,w)).text=[];var f=h(w,t,r);w.text.length>f&&(d.text=w.text.splice(f,w.text.length));var p=r.scaleFactor(),m=r.getLineHeightFactor();w.contentHeight=w.getContentHeight(p,m),w.contentHeight>=t&&(w.contentHeight=t,d.styles.minCellHeight-=t),w.contentHeight>e.height&&(e.height=w.contentHeight),d.contentHeight=d.getContentHeight(p,m),d.contentHeight>o&&(o=d.contentHeight),s[u.index]=d}}var g=new i.Row(e.raw,-1,e.section,s,!0);g.height=o;for(var y=0,v=n.columns;y<v.length;y++){var w;u=v[y],(d=g.cells[u.index])&&(d.height=g.height),(w=e.cells[u.index])&&(w.height=e.height)}return g}(n,c,t,e);p(e,t,n,o,l),y(e,t,s,o,l),f(e,t,u,r,s,o,l)}else y(e,t,s,o,l),f(e,t,n,r,s,o,l)}function p(e,t,n,r,i){r.x=t.settings.margin.left;for(var s=0,a=i;s<a.length;s++){var l=a[s],c=n.cells[l.index];if(c)if(e.applyStyles(c.styles),c.x=r.x,c.y=r.y,!1!==t.callCellHooks(e,t.hooks.willDrawCell,c,n,l,r)){m(e,c,r);var u=c.getTextPos();(0,o.default)(c.text,u.x,u.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,c,n,l,r),r.x+=l.width}else r.x+=l.width;else r.x+=l.width}r.y+=n.height}function m(e,t,n){var i=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),"number"===typeof i.lineWidth){var s=(0,r.getFillStyle)(i.lineWidth,i.fillColor);s&&e.rect(t.x,n.y,t.width,t.height,s)}else"object"===typeof i.lineWidth&&(i.fillColor&&e.rect(t.x,n.y,t.width,t.height,"F"),function(e,t,n,r){var i,s,a,o;function l(t,n,r,i,s){e.getDocument().setLineWidth(t),e.getDocument().line(n,r,i,s,"S")}r.top&&(i=n.x,s=n.y,a=n.x+t.width,o=n.y,r.right&&(a+=.5*r.right),r.left&&(i-=.5*r.left),l(r.top,i,s,a,o)),r.bottom&&(i=n.x,s=n.y+t.height,a=n.x+t.width,o=n.y+t.height,r.right&&(a+=.5*r.right),r.left&&(i-=.5*r.left),l(r.bottom,i,s,a,o)),r.left&&(i=n.x,s=n.y,a=n.x,o=n.y+t.height,r.top&&(s-=.5*r.top),r.bottom&&(o+=.5*r.bottom),l(r.left,i,s,a,o)),r.right&&(i=n.x+t.width,s=n.y,a=n.x+t.width,o=n.y+t.height,r.top&&(s-=.5*r.top),r.bottom&&(o+=.5*r.bottom),l(r.right,i,s,a,o))}(e,t,n,i.lineWidth))}function g(e,t,n,r){var i=t.settings.margin.bottom,s=t.settings.showFoot;return("everyPage"===s||"lastPage"===s&&n)&&(i+=t.getFootHeight(t.columns)),e.pageSize().height-r.y-i}function y(e,t,n,i,s,a){void 0===s&&(s=[]),void 0===a&&(a=!1),e.applyStyles(e.userStyles),"everyPage"!==t.settings.showFoot||a||t.foot.forEach(function(n){return p(e,t,n,i,s)}),t.callEndPageHooks(e,i);var o=t.settings.margin;(0,r.addTableBorder)(e,t,n,i),v(e),t.pageNumber++,t.pageCount++,i.x=o.left,i.y=o.top,n.y=o.top,t.callWillDrawPageHooks(e,i),"everyPage"===t.settings.showHead&&(t.head.forEach(function(n){return p(e,t,n,i,s)}),e.applyStyles(e.userStyles))}function v(e){var t=e.pageNumber();return e.setPage(t+1),e.pageNumber()===t&&(e.addPage(),!0)}t.drawTable=function(e,t){var n=t.settings,i=n.startY,o=n.margin,h={x:o.left,y:i},m=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),g=i+o.bottom+m;"avoid"===n.pageBreak&&(g+=t.body.reduce(function(e,t){return e+t.height},0));var w=new s.DocHandler(e);("always"===n.pageBreak||null!=n.startY&&g>w.pageSize().height)&&(v(w),h.y=o.top),t.callWillDrawPageHooks(w,h);var b=(0,a.assign)({},h);t.startPageNumber=w.pageNumber(),n.horizontalPageBreak?function(e,t,n,r){var i=(0,l.calculateAllColumnsCanFitInPage)(e,t),s=t.settings;if("afterAllRows"===s.horizontalPageBreakBehaviour)i.forEach(function(i,s){e.applyStyles(e.userStyles),s>0?y(e,t,n,r,i.columns,!0):c(e,t,r,i.columns),function(e,t,n,r,i){e.applyStyles(e.userStyles),t.body.forEach(function(s,a){var o=a===t.body.length-1;f(e,t,s,o,n,r,i)})}(e,t,n,r,i.columns),d(e,t,r,i.columns)});else for(var a=-1,o=i[0],h=function(){var s=a;if(o){e.applyStyles(e.userStyles);var l=o.columns;a>=0?y(e,t,n,r,l,!0):c(e,t,r,l),s=u(e,t,a+1,r,l),d(e,t,r,l)}var h=s-a;i.slice(1).forEach(function(i){e.applyStyles(e.userStyles),y(e,t,n,r,i.columns,!0),u(e,t,a+1,r,i.columns,h),d(e,t,r,i.columns)}),a=s};a<t.body.length-1;)h()}(w,t,b,h):(w.applyStyles(w.userStyles),"firstPage"!==n.showHead&&"everyPage"!==n.showHead||t.head.forEach(function(e){return p(w,t,e,h,t.columns)}),w.applyStyles(w.userStyles),t.body.forEach(function(e,n){var r=n===t.body.length-1;f(w,t,e,r,b,h,t.columns)}),w.applyStyles(w.userStyles),"lastPage"!==n.showFoot&&"everyPage"!==n.showFoot||t.foot.forEach(function(e){return p(w,t,e,h,t.columns)})),(0,r.addTableBorder)(w,t,b,h),t.callEndPageHooks(w,h),t.finalY=h.y,e.lastAutoTable=t,e.previousAutoTable=t,e.autoTable&&(e.autoTable.previous=t),w.applyStyles(w.userStyles)},t.addPage=y},224:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.calculateAllColumnsCanFitInPage=void 0;var r=n(420);function i(e,t,n){var i;void 0===n&&(n={});var s=(0,r.getPageAvailableWidth)(e,t),a=new Map,o=[],l=[],c=[];t.settings.horizontalPageBreakRepeat,Array.isArray(t.settings.horizontalPageBreakRepeat)?c=t.settings.horizontalPageBreakRepeat:"string"!==typeof t.settings.horizontalPageBreakRepeat&&"number"!==typeof t.settings.horizontalPageBreakRepeat||(c=[t.settings.horizontalPageBreakRepeat]),c.forEach(function(e){var n=t.columns.find(function(t){return t.dataKey===e||t.index===e});n&&!a.has(n.index)&&(a.set(n.index,!0),o.push(n.index),l.push(t.columns[n.index]),s-=n.wrappedWidth)});for(var u=!0,d=null!==(i=null===n||void 0===n?void 0:n.start)&&void 0!==i?i:0;d<t.columns.length;)if(a.has(d))d++;else{var h=t.columns[d].wrappedWidth;if(!(u||s>=h))break;u=!1,o.push(d),l.push(t.columns[d]),s-=h,d++}return{colIndexes:o,columns:l,lastIndex:d-1}}t.calculateAllColumnsCanFitInPage=function(e,t){for(var n=[],r=0;r<t.columns.length;r++){var s=i(e,t,{start:r});s.columns.length&&(n.push(s),r=s.lastIndex)}return n}},324:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ellipsize=t.resizeColumns=t.calculateWidths=void 0;var r=n(420);function i(e,t,n){for(var r=t,s=e.reduce(function(e,t){return e+t.wrappedWidth},0),a=0;a<e.length;a++){var o=e[a],l=r*(o.wrappedWidth/s),c=o.width+l,u=n(o),d=c<u?u:c;t-=d-o.width,o.width=d}if(t=Math.round(1e10*t)/1e10){var h=e.filter(function(e){return!(t<0)||e.width>n(e)});h.length&&(t=i(h,t,n))}return t}function s(e,t,n,i,s){return e.map(function(e){return function(e,t,n,i,s){var a=1e4*i.scaleFactor();if((t=Math.ceil(t*a)/a)>=(0,r.getStringWidth)(e,n,i))return e;for(;t<(0,r.getStringWidth)(e+s,n,i)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+s}(e,t,n,i,s)})}t.calculateWidths=function(e,t){!function(e,t){var n=e.scaleFactor(),i=t.settings.horizontalPageBreak,s=(0,r.getPageAvailableWidth)(e,t);t.allRows().forEach(function(a){for(var o=0,l=t.columns;o<l.length;o++){var c=l[o],u=a.cells[c.index];if(u){var d=t.hooks.didParseCell;t.callCellHooks(e,d,u,a,c,null);var h=u.padding("horizontal");u.contentWidth=(0,r.getStringWidth)(u.text,u.styles,e)+h;var f=(0,r.getStringWidth)(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,e);if(u.minReadableWidth=f+u.padding("horizontal"),"number"===typeof u.styles.cellWidth)u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if("wrap"===u.styles.cellWidth||!0===i)u.contentWidth>s?(u.minWidth=s,u.wrappedWidth=s):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var p=10/n;u.minWidth=u.styles.minCellWidth||p,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),t.allRows().forEach(function(e){for(var n=0,r=t.columns;n<r.length;n++){var i=r[n],s=e.cells[i.index];if(s&&1===s.colSpan)i.wrappedWidth=Math.max(i.wrappedWidth,s.wrappedWidth),i.minWidth=Math.max(i.minWidth,s.minWidth),i.minReadableWidth=Math.max(i.minReadableWidth,s.minReadableWidth);else{var a=t.styles.columnStyles[i.dataKey]||t.styles.columnStyles[i.index]||{},o=a.cellWidth||a.minCellWidth;o&&"number"===typeof o&&(i.minWidth=o,i.wrappedWidth=o)}s&&(s.colSpan>1&&!i.minWidth&&(i.minWidth=s.minWidth),s.colSpan>1&&!i.wrappedWidth&&(i.wrappedWidth=s.minWidth))}})}(e,t);var n=[],a=0;t.columns.forEach(function(e){var r=e.getMaxCustomCellWidth(t);r?e.width=r:(e.width=e.wrappedWidth,n.push(e)),a+=e.width});var o=t.getWidth(e.pageSize().width)-a;o&&(o=i(n,o,function(e){return Math.max(e.minReadableWidth,e.minWidth)})),o&&(o=i(n,o,function(e){return e.minWidth})),o=Math.abs(o),!t.settings.horizontalPageBreak&&o>.1/e.scaleFactor()&&(o=o<1?o:Math.round(o),console.warn("Of the table content, ".concat(o," units width could not fit page"))),function(e){for(var t=e.allRows(),n=0;n<t.length;n++)for(var r=t[n],i=null,s=0,a=0,o=0;o<e.columns.length;o++){var l=e.columns[o];if((a-=1)>1&&e.columns[o+1])s+=l.width,delete r.cells[l.index];else if(i){var c=i;delete r.cells[l.index],i=null,c.width=l.width+s}else{if(!(c=r.cells[l.index]))continue;if(a=c.colSpan,s=0,c.colSpan>1){i=c,s+=l.width;continue}c.width=l.width+s}}}(t),function(e,t){for(var n={count:0,height:0},r=0,i=e.allRows();r<i.length;r++){for(var a=i[r],o=0,l=e.columns;o<l.length;o++){var c=l[o],u=a.cells[c.index];if(u){t.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if("linebreak"===u.styles.overflow)u.text=t.splitTextToSize(u.text,d+1/t.scaleFactor(),{fontSize:u.styles.fontSize});else if("ellipsize"===u.styles.overflow)u.text=s(u.text,d,u.styles,t,"...");else if("hidden"===u.styles.overflow)u.text=s(u.text,d,u.styles,t,"");else if("function"===typeof u.styles.overflow){var h=u.styles.overflow(u.text,d);u.text="string"===typeof h?[h]:h}u.contentHeight=u.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var f=u.contentHeight/u.rowSpan;u.rowSpan>1&&n.count*n.height<f*u.rowSpan?n={height:f,count:u.rowSpan}:n&&n.count>0&&n.height>f&&(f=n.height),f>a.height&&(a.height=f)}}n.count--}}(t,e),function(e){for(var t={},n=1,r=e.allRows(),i=0;i<r.length;i++)for(var s=r[i],a=0,o=e.columns;a<o.length;a++){var l=o[a],c=t[l.index];if(n>1)n--,delete s.cells[l.index];else if(c)c.cell.height+=s.height,n=c.cell.colSpan,delete s.cells[l.index],c.left--,c.left<=1&&delete t[l.index];else{var u=s.cells[l.index];if(!u)continue;if(u.height=s.height,u.rowSpan>1){var d=r.length-i,h=u.rowSpan>d?d:u.rowSpan;t[l.index]={cell:u,left:h,row:s}}}}}(t)},t.resizeColumns=i,t.ellipsize=s},964:function(t){if("undefined"===typeof e){var n=new Error("Cannot find module 'undefined'");throw n.code="MODULE_NOT_FOUND",n}t.exports=e}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var s=n[e]={exports:{}};return t[e].call(s.exports,s,s.exports,r),s.exports}var i={};return function(){var e=i;Object.defineProperty(e,"__esModule",{value:!0}),e.Cell=e.Column=e.Row=e.Table=e.CellHookData=e.__drawTable=e.__createTable=e.applyPlugin=void 0;var t=r(340),n=r(776),s=r(664),a=r(972),o=r(260);Object.defineProperty(e,"Table",{enumerable:!0,get:function(){return o.Table}});var l=r(172);Object.defineProperty(e,"CellHookData",{enumerable:!0,get:function(){return l.CellHookData}});var c=r(260);function u(e){(0,t.default)(e)}Object.defineProperty(e,"Cell",{enumerable:!0,get:function(){return c.Cell}}),Object.defineProperty(e,"Column",{enumerable:!0,get:function(){return c.Column}}),Object.defineProperty(e,"Row",{enumerable:!0,get:function(){return c.Row}}),e.applyPlugin=u,e.__createTable=function(e,t){var r=(0,n.parseInput)(e,t);return(0,a.createTable)(e,r)},e.__drawTable=function(e,t){(0,s.drawTable)(e,t)};try{var d=r(964);d.jsPDF&&(d=d.jsPDF),u(d)}catch(h){}e.default=function(e,t){var r=(0,n.parseInput)(e,t),i=(0,a.createTable)(e,r);(0,s.drawTable)(e,i)}}(),i}()},e.exports=r(function(){try{return n(7762)}catch(e){}}())},579:(e,t,n)=>{"use strict";e.exports=n(2799)},816:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(2284);function i(e){var t=function(e,t){if("object"!=(0,r.A)(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=(0,r.A)(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==(0,r.A)(t)?t:t+""}},895:(e,t,n)=>{"use strict";var r=n(1847).default,i=n(2897).default;const s=["providerId"],a=["uid","auth","stsTokenManager"],o=["providerId","signInMethod"];var l=n(1098),c=n(8679),u=n(9887),d=n(5858);function h(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const f=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}},p=h,m=new c.ErrorFactory("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),g=new u.Logger("@firebase/auth");function y(e){if(g.logLevel<=u.LogLevel.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];g.error("Auth (".concat(l.SDK_VERSION,"): ").concat(e),...n)}}function v(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw A(e,...n)}function w(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return A(e,...n)}function b(e,t,n){const r=i(i({},p()),{},{[t]:n});return new c.ErrorFactory("auth","Firebase",r).create(t,{appName:e.name})}function x(e){return b(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function S(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&v(e,"argument-error"),b(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function A(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return m.create(e,...n)}function E(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw A(t,...r)}}function N(e){const t="INTERNAL ASSERTION FAILED: "+e;throw y(t),new Error(t)}function C(e,t){e||N(t)}function _(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function T(){return"http:"===I()||"https:"===I()}function I(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class k{constructor(e,t){this.shortDelay=e,this.longDelay=t,C(t>e,"Short delay should be less than long delay!"),this.isMobile=c.isMobileCordova()||c.isReactNative()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(T()||c.isBrowserExtension()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function P(e,t){C(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class R{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void N("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void N("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void N("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const D={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},O=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],L=new k(3e4,6e4);function M(e,t){return e.tenantId&&!t.tenantId?i(i({},t),{},{tenantId:e.tenantId}):t}async function F(e,t,n,r){return j(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let s={},a={};r&&("GET"===t?a=r:s={body:JSON.stringify(r)});const o=c.querystring(i({key:e.config.apiKey},a)).slice(1),l=await e._getAdditionalHeaders();l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode);const u=i({method:t,headers:l},s);return c.isCloudflareWorker()||(u.referrerPolicy="no-referrer"),e.emulatorConfig&&c.isCloudWorkstation(e.emulatorConfig.host)&&(u.credentials="include"),R.fetch()(await U(e,e.config.apiHost,n,o),u)})}async function j(e,t,n){e._canInitEmulator=!1;const r=i(i({},D),t);try{const t=new V(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw H(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw H(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw H(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw H(e,"user-disabled",s);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw b(e,o,a);v(e,o)}}catch(s){if(s instanceof c.FirebaseError)throw s;v(e,"network-request-failed",{message:String(s)})}}async function B(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await F(e,t,n,r,i);return"mfaPendingCredential"in s&&v(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function U(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r),s=e,a=s.config.emulator?P(e.config,i):"".concat(e.config.apiScheme,"://").concat(i);if(O.includes(n)&&(await s._persistenceManagerAvailable,"COOKIE"===s._getPersistenceType())){return s._getPersistence()._getFinalTarget(a).toString()}return a}function z(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class V{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(w(this.auth,"network-request-failed")),L.get())})}}function H(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=w(e,t,r);return i.customData._tokenResponse=n,i}function W(e){return void 0!==e&&void 0!==e.getResponse}function q(e){return void 0!==e&&void 0!==e.enterprise}class G{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return z(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function K(e,t){return F(e,"GET","/v2/recaptchaConfig",M(e,t))}async function Y(e,t){return F(e,"POST","/v1/accounts:lookup",t)}function X(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}async function Q(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=c.getModularInstance(e),r=await n.getIdToken(t),i=Z(r);E(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,a=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:X(J(i.auth_time)),issuedAtTime:X(J(i.iat)),expirationTime:X(J(i.exp)),signInProvider:a||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}function J(e){return 1e3*Number(e)}function Z(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return y("JWT malformed, contained fewer than 3 sections"),null;try{const e=c.base64Decode(n);return e?JSON.parse(e):(y("Failed to decode base64 JWT payload"),null)}catch(i){return y("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}function $(e){const t=Z(e);return E(t,"internal-error"),E("undefined"!==typeof t.exp,"internal-error"),E("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function ee(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof c.FirebaseError&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class te{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{var t;this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class ne{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=X(this.lastLoginAt),this.creationTime=X(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function re(e){var t;const n=e.auth,r=await e.getIdToken(),i=await ee(e,Y(n,{idToken:r}));E(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const a=null!==(t=s.providerUserInfo)&&void 0!==t&&t.length?se(s.providerUserInfo):[],o=(l=e.providerData,c=a,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&s.passwordHash)&&!(null!==o&&void 0!==o&&o.length),h=!!u&&d,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new ne(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,f)}async function ie(e){const t=c.getModularInstance(e);await re(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function se(e){return e.map(e=>{let{providerId:t}=e,n=r(e,s);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class ae{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){E(e.idToken,"internal-error"),E("undefined"!==typeof e.idToken,"internal-error"),E("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):$(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){E(0!==e.length,"internal-error");const t=$(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(E(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await j(e,{},async()=>{const n=c.querystring({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=await U(e,r,"/v1/token","key=".concat(i)),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const o={method:"POST",headers:a,body:n};return e.emulatorConfig&&c.isCloudWorkstation(e.emulatorConfig.host)&&(o.credentials="include"),R.fetch()(s,o)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new ae;return n&&(E("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(E("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(E("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ae,this.toJSON())}_performRefresh(){return N("not implemented")}}function oe(e,t){E("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class le{constructor(e){let{uid:t,auth:n,stsTokenManager:i}=e,s=r(e,a);this.providerId="firebase",this.proactiveRefresh=new te(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ne(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await ee(this,this.stsTokenManager.getToken(this.auth,e));return E(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Q(this,e)}reload(){return ie(this)}_assign(e){this!==e&&(E(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>i({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new le(i(i({},this),{},{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){E(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await re(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(l._isFirebaseServerApp(this.auth.app))return Promise.reject(x(this.auth));const e=await this.getIdToken();return await ee(this,async function(e,t){return F(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return i(i({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>i({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{},{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,a,o,l,c,u;const d=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,f=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,p=null!==(a=t.photoURL)&&void 0!==a?a:void 0,m=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(l=t._redirectEventId)&&void 0!==l?l:void 0,y=null!==(c=t.createdAt)&&void 0!==c?c:void 0,v=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:w,emailVerified:b,isAnonymous:x,providerData:S,stsTokenManager:A}=t;E(w&&A,e,"internal-error");const N=ae.fromJSON(this.name,A);E("string"===typeof w,e,"internal-error"),oe(d,e.name),oe(h,e.name),E("boolean"===typeof b,e,"internal-error"),E("boolean"===typeof x,e,"internal-error"),oe(f,e.name),oe(p,e.name),oe(m,e.name),oe(g,e.name),oe(y,e.name),oe(v,e.name);const C=new le({uid:w,auth:e,email:h,emailVerified:b,displayName:d,isAnonymous:x,photoURL:p,phoneNumber:f,tenantId:m,stsTokenManager:N,createdAt:y,lastLoginAt:v});return S&&Array.isArray(S)&&(C.providerData=S.map(e=>i({},e))),g&&(C._redirectEventId=g),C}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new ae;r.updateFromServerResponse(t);const i=new le({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await re(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];E(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?se(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length),a=new ae;a.updateFromIdToken(n);const o=new le({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new ne(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length)};return Object.assign(o,l),o}}const ce=new Map;function ue(e){C(e instanceof Function,"Expected a class definition");let t=ce.get(e);return t?(C(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ce.set(e,t),t)}class de{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}de.type="NONE";const he=de;function fe(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class pe{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=fe(this.userKey,r.apiKey,i),this.fullPersistenceKey=fe("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await Y(this.auth,{idToken:e}).catch(()=>{});return t?le._fromGetAccountInfoResponse(this.auth,t,e):null}return le._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new pe(ue(he),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||ue(he);const s=fe(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(s);if(t){let n;if("string"===typeof t){const r=await Y(e,{idToken:t}).catch(()=>{});if(!r)break;n=await le._fromGetAccountInfoResponse(e,r,t)}else n=le._fromJSON(e,t);c!==i&&(a=n),i=c;break}}catch(l){}const o=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&o.length?(i=o[0],a&&await i._set(s,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(t){}})),new pe(i,e,n)):new pe(i,e,n)}}function me(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(we(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ge(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(xe(t))return"Blackberry";if(Se(t))return"Webos";if(ye(t))return"Safari";if((t.includes("chrome/")||ve(t))&&!t.includes("edge/"))return"Chrome";if(be(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function ge(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.getUA();return/firefox\//i.test(e)}function ye(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.getUA()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ve(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.getUA();return/crios\//i.test(e)}function we(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.getUA();return/iemobile/i.test(e)}function be(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.getUA();return/android/i.test(e)}function xe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.getUA();return/blackberry/i.test(e)}function Se(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.getUA();return/webos/i.test(e)}function Ae(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.getUA();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Ee(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.getUA();return Ae(e)||be(e)||Se(e)||xe(e)||/windows phone/i.test(e)||we(e)}function Ne(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=me(c.getUA());break;case"Worker":t="".concat(me(c.getUA()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(l.SDK_VERSION,"/").concat(r)}class Ce{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(i){r(i)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class _e{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(n=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==n?n:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(i=o.containsUppercaseLetter)||void 0===i||i),o.isValid&&(o.isValid=null===(s=o.containsNumericCharacter)||void 0===s||s),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Te{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ke(this),this.idTokenSubscription=new ke(this),this.beforeStateQueue=new Ce(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=m,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ue(t)),this._initializationPromise=this.queue(async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await pe.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null!==(r=this._popupRedirectResolver)&&void 0!==r&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(s){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Y(this,{idToken:e}),n=await le._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(l._isFirebaseServerApp(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){var i,s;await this.getOrInitRedirectPersistenceManager();const t=null===(i=this.redirectUser)||void 0===i?void 0:i._redirectEventId,a=null===(s=n)||void 0===s?void 0:s._redirectEventId,o=await this.tryRedirectSignIn(e);t&&t!==a||null===o||void 0===o||!o.user||(n=o.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(a){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return E(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await re(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(l._isFirebaseServerApp(this.app))return Promise.reject(x(this));const t=e?c.getModularInstance(e):null;return t&&E(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&E(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return l._isFirebaseServerApp(this.app)?Promise.reject(x(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return l._isFirebaseServerApp(this.app)?Promise.reject(x(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ue(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return F(e,"GET","/v2/passwordPolicy",M(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new _e(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new c.ErrorFactory("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return F(e,"POST","/v2/accounts:revokeToken",M(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ue(e)||this._popupRedirectResolver;E(t,this,"argument-error"),this.redirectPersistenceManager=await pe.create(this,[ue(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(E(a,this,"internal-error"),a.then(()=>{s||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return E(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ne(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(l._isFirebaseServerApp(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return null!==t&&void 0!==t&&t.error&&function(e){if(g.logLevel<=u.LogLevel.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];g.warn("Auth (".concat(l.SDK_VERSION,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Ie(e){return c.getModularInstance(e)}class ke{constructor(e){this.auth=e,this.observer=null,this.addObserver=c.createSubscribe(e=>this.observer=e)}get next(){return E(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Pe={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Re(e){return Pe.loadJS(e)}function De(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}const Oe=1e12;class Le{constructor(e){this.auth=e,this.counter=Oe,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new je(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||Oe;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||Oe;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||Oe;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class Me{constructor(){this.enterprise=new Fe}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Fe{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class je{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;E(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout(()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(n){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(n){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Be="NO_RECAPTCHA";class Ue{constructor(e){this.type="recaptcha-enterprise",this.auth=Ie(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;q(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Be)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Me).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{K(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new G(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&q(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Pe.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Re(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function ze(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const a=new Ue(e);let o;if(s)o=Be;else try{o=await a.verify(n)}catch(c){o=await a.verify(n,!0)}const l=i({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in l){const e=l.phoneEnrollmentInfo.phoneNumber,t=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const e=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Ve(e,t,n,r,i){if("EMAIL_PASSWORD_PROVIDER"===i){var s;if(null!==(s=e._getRecaptchaConfig())&&void 0!==s&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await ze(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await ze(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}if("PHONE_PROVIDER"===i){var a;if(null!==(a=e._getRecaptchaConfig())&&void 0!==a&&a.isProviderEnabled("PHONE_PROVIDER")){const i=await ze(e,t,n);return r(e,i).catch(async i=>{var s;if("AUDIT"===(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))&&(i.code==="auth/".concat("missing-recaptcha-token")||i.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const i=await ze(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)})}{const i=await ze(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function He(e){const t=Ie(e),n=await K(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new G(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new Ue(t).verify()}}function We(e,t){const n=l._getProvider(e,"auth");if(n.isInitialized()){const e=n.getImmediate(),r=n.getOptions();if(c.deepEqual(r,null!==t&&void 0!==t?t:{}))return e;v(e,"already-initialized")}return n.initialize({options:t})}function qe(e,t,n){const r=Ie(e);E(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!(null===n||void 0===n||!n.disableWarnings),s=Ge(t),{host:a,port:o}=function(e){const t=Ge(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Ke(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Ke(t)}}}(t),l=null===o?"":":".concat(o),u={url:"".concat(s,"//").concat(a).concat(l,"/")},d=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return E(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void E(c.deepEqual(u,r.config.emulator)&&c.deepEqual(d,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,c.isCloudWorkstation(a)?(c.pingServer("".concat(s,"//").concat(a).concat(l)),c.updateEmulatorBanner("Auth",!0)):i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Ge(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ke(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Ye{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return N("not implemented")}_getIdTokenResponse(e){return N("not implemented")}_linkToIdToken(e,t){return N("not implemented")}_getReauthenticationResolver(e){return N("not implemented")}}async function Xe(e,t){return F(e,"POST","/v1/accounts:resetPassword",M(e,t))}async function Qe(e,t){return F(e,"POST","/v1/accounts:signUp",t)}async function Je(e,t){return B(e,"POST","/v1/accounts:signInWithPassword",M(e,t))}async function Ze(e,t){return F(e,"POST","/v1/accounts:sendOobCode",M(e,t))}async function $e(e,t){return Ze(e,t)}async function et(e,t){return Ze(e,t)}class tt extends Ye{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new tt(e,t,"password")}static _fromEmailAndCode(e,t){return new tt(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if(null!==t&&void 0!==t&&t.email&&null!==t&&void 0!==t&&t.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Ve(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Je,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return B(e,"POST","/v1/accounts:signInWithEmailLink",M(e,t))}(e,{email:this._email,oobCode:this._password});default:v(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Ve(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Qe,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return B(e,"POST","/v1/accounts:signInWithEmailLink",M(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:v(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function nt(e,t){return B(e,"POST","/v1/accounts:signInWithIdp",M(e,t))}class rt extends Ye{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new rt(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):v("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,s=r(t,o);if(!n||!i)return null;const a=new rt(n,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){return nt(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,nt(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,nt(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=c.querystring(t)}return e}}async function it(e,t){return F(e,"POST","/v1/accounts:sendVerificationCode",M(e,t))}const st={USER_NOT_FOUND:"user-not-found"};class at extends Ye{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new at({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new at({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return B(e,"POST","/v1/accounts:signInWithPhoneNumber",M(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await B(e,"POST","/v1/accounts:signInWithPhoneNumber",M(e,t));if(n.temporaryProof)throw H(e,"account-exists-with-different-credential",n);return n}(e,i({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return B(e,"POST","/v1/accounts:signInWithPhoneNumber",M(e,i(i({},t),{},{operation:"REAUTH"})),st)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new at({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class ot{constructor(e){var t,n,r,i,s,a;const o=c.querystringDecode(c.extractQuerystring(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,u=null!==(n=o.oobCode)&&void 0!==n?n:null,d=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);E(l&&u&&d,"argument-error"),this.apiKey=l,this.operation=d,this.code=u,this.continueUrl=null!==(i=o.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=o.lang)&&void 0!==s?s:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=c.querystringDecode(c.extractQuerystring(e)).link,n=t?c.querystringDecode(c.extractQuerystring(t)).deep_link_id:null,r=c.querystringDecode(c.extractQuerystring(e)).deep_link_id;return(r?c.querystringDecode(c.extractQuerystring(r)).link:null)||r||n||t||e}(e);try{return new ot(t)}catch(n){return null}}}class lt{constructor(){this.providerId=lt.PROVIDER_ID}static credential(e,t){return tt._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=ot.parseLink(t);return E(n,"argument-error"),tt._fromEmailAndCode(e,n.code,n.tenantId)}}lt.PROVIDER_ID="password",lt.EMAIL_PASSWORD_SIGN_IN_METHOD="password",lt.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class ct{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ut extends ct{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class dt extends ut{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return E("providerId"in t&&"signInMethod"in t,"argument-error"),rt._fromParams(t)}credential(e){return this._credential(i(i({},e),{},{nonce:e.rawNonce}))}_credential(e){return E(e.idToken||e.accessToken,"argument-error"),rt._fromParams(i(i({},e),{},{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return dt.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return dt.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:a,providerId:o}=t;if(!r&&!i&&!n&&!s)return null;if(!o)return null;try{return new dt(o)._credential({idToken:n,accessToken:r,nonce:a,pendingToken:s})}catch(l){return null}}}class ht extends ut{constructor(){super("facebook.com")}static credential(e){return rt._fromParams({providerId:ht.PROVIDER_ID,signInMethod:ht.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ht.credentialFromTaggedObject(e)}static credentialFromError(e){return ht.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return ht.credential(t.oauthAccessToken)}catch(n){return null}}}ht.FACEBOOK_SIGN_IN_METHOD="facebook.com",ht.PROVIDER_ID="facebook.com";class ft extends ut{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return rt._fromParams({providerId:ft.PROVIDER_ID,signInMethod:ft.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ft.credentialFromTaggedObject(e)}static credentialFromError(e){return ft.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return ft.credential(n,r)}catch(i){return null}}}ft.GOOGLE_SIGN_IN_METHOD="google.com",ft.PROVIDER_ID="google.com";class pt extends ut{constructor(){super("github.com")}static credential(e){return rt._fromParams({providerId:pt.PROVIDER_ID,signInMethod:pt.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pt.credentialFromTaggedObject(e)}static credentialFromError(e){return pt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return pt.credential(t.oauthAccessToken)}catch(n){return null}}}pt.GITHUB_SIGN_IN_METHOD="github.com",pt.PROVIDER_ID="github.com";class mt extends Ye{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return nt(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,nt(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,nt(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new mt(n,i):null}static _create(e,t){return new mt(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class gt extends ct{constructor(e){E(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return gt.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return gt.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=mt.fromJSON(e);return E(t,"argument-error"),t}static samlCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{pendingToken:n,providerId:r}=t;if(!n||!r)return null;try{return mt._create(r,n)}catch(i){return null}}}class yt extends ut{constructor(){super("twitter.com")}static credential(e,t){return rt._fromParams({providerId:yt.PROVIDER_ID,signInMethod:yt.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return yt.credentialFromTaggedObject(e)}static credentialFromError(e){return yt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return yt.credential(n,r)}catch(i){return null}}}async function vt(e,t){return B(e,"POST","/v1/accounts:signUp",M(e,t))}yt.TWITTER_SIGN_IN_METHOD="twitter.com",yt.PROVIDER_ID="twitter.com";class wt{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await le._fromIdTokenResponse(e,n,r),s=bt(n);return new wt({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=bt(n);return new wt({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function bt(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class xt extends c.FirebaseError{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,xt.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new xt(e,t,n,r)}}function St(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw xt._fromErrorAndOperation(e,n,t,r);throw n})}function At(e){return new Set(e.map(e=>{let{providerId:t}=e;return t}).filter(e=>!!e))}async function Et(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await ee(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return wt._forOperation(e,"link",r)}async function Nt(e,t,n){await re(t);const r=!1===e?"provider-already-linked":"no-such-provider";E(At(t.providerData).has(n)===e,t.auth,r)}async function Ct(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(l._isFirebaseServerApp(r.app))return Promise.reject(x(r));const i="reauthenticate";try{const s=await ee(e,St(r,i,t,e),n);E(s.idToken,r,"internal-error");const a=Z(s.idToken);E(a,r,"internal-error");const{sub:o}=a;return E(e.uid===o,r,"user-mismatch"),wt._forOperation(e,i,s)}catch(s){throw(null===s||void 0===s?void 0:s.code)==="auth/".concat("user-not-found")&&v(r,"user-mismatch"),s}}async function _t(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(l._isFirebaseServerApp(e.app))return Promise.reject(x(e));const r="signIn",i=await St(e,r,t),s=await wt._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function Tt(e,t){return _t(Ie(e),t)}async function It(e,t){const n=c.getModularInstance(e);return await Nt(!1,n,t.providerId),Et(n,t)}async function kt(e,t){return Ct(c.getModularInstance(e),t)}class Pt{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Rt._fromServerResponse(e,t):"totpInfo"in t?Dt._fromServerResponse(e,t):v(e,"internal-error")}}class Rt extends Pt{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Rt(t)}}class Dt extends Pt{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new Dt(t)}}function Ot(e,t,n){var r;E((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),E("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),E("undefined"===typeof n.linkDomain||n.linkDomain.length>0,e,"invalid-hosting-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.linkDomain=n.linkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(E(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(E(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function Lt(e){const t=Ie(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Mt(e,t){const n=c.getModularInstance(e),r=await Xe(n,{oobCode:t}),i=r.requestType;switch(E(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":E(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":E(r.mfaInfo,n,"internal-error");default:E(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=Pt._fromServerResponse(Ie(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function Ft(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await ee(e,async function(e,t){return F(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(s,!0)}class jt{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class Bt extends jt{constructor(e,t,n,r){super(e,t,n),this.username=r}}class Ut extends jt{constructor(e,t){super(e,"facebook.com",t)}}class zt extends Bt{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class Vt extends jt{constructor(e,t){super(e,"google.com",t)}}class Ht extends Bt{constructor(e,t,n){super(e,"twitter.com",t,n)}}function Wt(e,t,n,r){return c.getModularInstance(e).onIdTokenChanged(t,n,r)}function qt(e,t,n){return c.getModularInstance(e).beforeAuthStateChanged(t,n)}class Gt{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new Gt("enroll",e,t)}static _fromMfaPendingCredential(e){return new Gt("signin",e)}toJSON(){const e="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:{[e]:this.credential}}}static fromJSON(e){if(null!==e&&void 0!==e&&e.multiFactorSession){var t,n;if(null!==(t=e.multiFactorSession)&&void 0!==t&&t.pendingCredential)return Gt._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null!==(n=e.multiFactorSession)&&void 0!==n&&n.idToken)return Gt._fromIdtoken(e.multiFactorSession.idToken)}return null}}class Kt{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=Ie(e),r=t.customData._serverResponse,s=(r.mfaInfo||[]).map(e=>Pt._fromServerResponse(n,e));E(r.mfaPendingCredential,n,"internal-error");const a=Gt._fromMfaPendingCredential(r.mfaPendingCredential);return new Kt(a,s,async e=>{const s=await e._process(n,a);delete r.mfaInfo,delete r.mfaPendingCredential;const o=i(i({},r),{},{idToken:s.idToken,refreshToken:s.refreshToken});switch(t.operationType){case"signIn":const e=await wt._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return E(t.user,n,"internal-error"),wt._forOperation(t.user,t.operationType,o);default:v(n,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function Yt(e,t){return F(e,"POST","/v2/accounts/mfaEnrollment:start",M(e,t))}class Xt{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(t=>Pt._fromServerResponse(e.auth,t)))})}static _fromUser(e){return new Xt(e)}async getSession(){return Gt._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),i=await ee(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await ee(this.user,(r=this.user.auth,i={idToken:n,mfaEnrollmentId:t},F(r,"POST","/v2/accounts/mfaEnrollment:withdraw",M(r,i))));this.enrolledFactors=this.enrolledFactors.filter(e=>{let{uid:n}=e;return n!==t}),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(s){throw s}var r,i}}const Qt=new WeakMap;const Jt="__sak";class Zt{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Jt,"1"),this.storage.removeItem(Jt),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class $t extends Zt{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ee(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);c.isIE()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}$t.type="LOCAL";const en=$t;function tn(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp("".concat(r,"=([^;]+)"));return null!==(t=null===(n=document.cookie.match(i))||void 0===n?void 0:n[1])&&void 0!==t?t:null}function nn(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class rn{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=nn(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return tn(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=nn(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=nn(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=tn(n);const i=setInterval(()=>{const e=tn(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}rn.type="COOKIE";const sn=rn;class an extends Zt{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}an.type="SESSION";const on=an;class ln{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new ln(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(null===s||void 0===s||!s.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(s).map(async e=>e(t.origin,i)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function cn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}ln.receivers=[];class un{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((a,o)=>{const l=cn("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(c),clearTimeout(i),o(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function dn(){return window}function hn(){return"undefined"!==typeof dn().WorkerGlobalScope&&"function"===typeof dn().importScripts}const fn="firebaseLocalStorageDb",pn="firebaseLocalStorage",mn="fbase_key";class gn{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function yn(e,t){return e.transaction([pn],t?"readwrite":"readonly").objectStore(pn)}function vn(){const e=indexedDB.open(fn,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(pn,{keyPath:mn})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(pn)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(fn);return new gn(e).toPromise()}(),t(await vn()))})})}async function wn(e,t,n){const r=yn(e,!0).put({[mn]:t,value:n});return new gn(r).toPromise()}function bn(e,t){const n=yn(e,!0).delete(t);return new gn(n).toPromise()}class xn{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await vn()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hn()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ln._getInstance(hn()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){var e;if(null===(e=navigator)||void 0===e||!e.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new un(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&null!==(e=n[0])&&void 0!==e&&e.fulfilled&&null!==(t=n[0])&&void 0!==t&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=navigator)||void 0===e||null===(e=e.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await vn();return await wn(e,Jt,"1"),await bn(e,Jt),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>wn(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=yn(e,!1).get(t),r=await new gn(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>bn(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=yn(e,!1).getAll();return new gn(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}xn.type="LOCAL";const Sn=xn;function An(e,t){return F(e,"POST","/v2/accounts/mfaSignIn:start",M(e,t))}const En=De("rcb"),Nn=new k(3e4,6e4);class Cn{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(e=dn().grecaptcha)||void 0===e||!e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return E(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&W(dn().grecaptcha)?Promise.resolve(dn().grecaptcha):new Promise((n,r)=>{const i=dn().setTimeout(()=>{r(w(e,"network-request-failed"))},Nn.get());dn()[En]=()=>{dn().clearTimeout(i),delete dn()[En];const s=dn().grecaptcha;if(!s||!W(s))return void r(w(e,"internal-error"));const a=s.render;s.render=(e,t)=>{const n=a(e,t);return this.counter++,n},this.hostLanguage=t,n(s)};Re("".concat(Pe.recaptchaV2Script,"?").concat(c.querystring({onload:En,render:"explicit",hl:t}))).catch(()=>{clearTimeout(i),r(w(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!(null===(t=dn().grecaptcha)||void 0===t||!t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class _n{async load(e){return new Le(e)}clearedOneInstance(){}}const Tn="recaptcha",In={theme:"light",type:"image"};class kn{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=at._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function Pn(e,t,n){if(!e._getRecaptchaConfig())try{await He(e)}catch(i){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){E("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=Ve(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Be){E((null===n||void 0===n?void 0:n.type)===Tn,e,"argument-error");return Yt(e,await Rn(e,t,n))}return Yt(e,t)},"PHONE_PROVIDER");return(await s.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{var r;E("signin"===t.type,e,"internal-error");const s=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;E(s,e,"missing-multi-factor-info");const a={mfaPendingCredential:t.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},o=Ve(e,a,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Be){E((null===n||void 0===n?void 0:n.type)===Tn,e,"argument-error");return An(e,await Rn(e,t,n))}return An(e,t)},"PHONE_PROVIDER");return(await o.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=Ve(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===Be){E((null===n||void 0===n?void 0:n.type)===Tn,e,"argument-error");return it(e,await Rn(e,t,n))}return it(e,t)},"PHONE_PROVIDER");return(await r.catch(e=>Promise.reject(e))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function Rn(e,t,n){E(n.type===Tn,e,"argument-error");const r=await n.verify();E("string"===typeof r,e,"argument-error");const s=i({},t);if("phoneEnrollmentInfo"in s){const e=s.phoneEnrollmentInfo.phoneNumber,t=s.phoneEnrollmentInfo.captchaResponse,n=s.phoneEnrollmentInfo.clientType,i=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:i}}),s}if("phoneSignInInfo"in s){const e=s.phoneSignInInfo.captchaResponse,t=s.phoneSignInInfo.clientType,n=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),s}return Object.assign(s,{recaptchaToken:r}),s}class Dn{constructor(e){this.providerId=Dn.PROVIDER_ID,this.auth=Ie(e)}verifyPhoneNumber(e,t){return Pn(this.auth,e,c.getModularInstance(t))}static credential(e,t){return at._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Dn.credentialFromTaggedObject(t)}static credentialFromError(e){return Dn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?at._fromTokenResponse(n,r):null}}function On(e,t){return t?ue(t):(E(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Dn.PROVIDER_ID="phone",Dn.PHONE_SIGN_IN_METHOD="phone";class Ln extends Ye{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return nt(e,this._buildIdpRequest())}_linkToIdToken(e,t){return nt(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return nt(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Mn(e){return _t(e.auth,new Ln(e),e.bypassAuthState)}function Fn(e){const{auth:t,user:n}=e;return E(n,t,"internal-error"),Ct(n,new Ln(e),e.bypassAuthState)}async function jn(e){const{auth:t,user:n}=e;return E(n,t,"internal-error"),Et(n,new Ln(e),e.bypassAuthState)}class Bn{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:a}=e;if(s)return void this.reject(s);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Mn;case"linkViaPopup":case"linkViaRedirect":return jn;case"reauthViaPopup":case"reauthViaRedirect":return Fn;default:v(this.auth,"internal-error")}}resolve(e){C(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){C(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Un=new k(2e3,1e4);class zn extends Bn{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,zn.currentPopupAction&&zn.currentPopupAction.cancel(),zn.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return E(e,this.auth,"internal-error"),e}async onExecution(){C(1===this.filter.length,"Popup operations only handle one event");const e=cn();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(w(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(w(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,zn.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t;null!==(t=this.authWindow)&&void 0!==t&&null!==(t=t.window)&&void 0!==t&&t.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(w(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Un.get())};e()}}zn.currentPopupAction=null;const Vn=new Map;class Hn extends Bn{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Vn.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Kn(t),r=Gn(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}Vn.set(this.auth._key(),e)}return this.bypassAuthState||Vn.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function Wn(e,t){return Gn(e)._set(Kn(t),"true")}function qn(e,t){Vn.set(e._key(),t)}function Gn(e){return ue(e._redirectPersistence)}function Kn(e){return fe("pendingRedirect",e.config.apiKey,e.name)}async function Yn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(l._isFirebaseServerApp(e.app))return Promise.reject(x(e));const r=Ie(e),i=On(r,t),s=new Hn(r,i,n),a=await s.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}async function Xn(e){const t=cn("".concat(e.uid,":::"));return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class Qn{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Zn(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Zn(e)){var n;const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(w(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Jn(e))}saveEventToCache(e){this.cachedEventUids.add(Jn(e)),this.lastProcessedEventTime=Date.now()}}function Jn(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Zn(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}async function $n(e){return F(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const er=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tr=/^https?/;function nr(e){const t=_(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!tr.test(n))return!1;if(er.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const rr=new k(3e4,6e4);function ir(){const e=dn().___jsl;if(null!==e&&void 0!==e&&e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function sr(e){return new Promise((t,n)=>{var r,i;function s(){ir(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ir(),n(w(e,"network-request-failed"))},timeout:rr.get()})}if(null!==(r=dn().gapi)&&void 0!==r&&null!==(r=r.iframes)&&void 0!==r&&r.Iframe)t(gapi.iframes.getContext());else{if(null===(i=dn().gapi)||void 0===i||!i.load){const t=De("iframefcb");return dn()[t]=()=>{gapi.load?s():n(w(e,"network-request-failed"))},Re("".concat(Pe.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}s()}}).catch(e=>{throw ar=null,e})}let ar=null;const or=new k(5e3,15e3),lr={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cr=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ur(e){const t=e.config;E(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?P(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:l.SDK_VERSION},i=cr.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(c.querystring(r).slice(1))}async function dr(e){const t=await function(e){return ar=ar||sr(e),ar}(e),n=dn().gapi;return E(n,e,"internal-error"),t.open({where:document.body,url:ur(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:lr,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=w(e,"network-request-failed"),s=dn().setTimeout(()=>{r(i)},or.get());function a(){dn().clearTimeout(s),n(t)}t.ping(a).then(a,()=>{r(i)})}))}const hr={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class fr{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function pr(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const a=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=i(i({},hr),{},{width:r.toString(),height:s.toString(),top:a,left:o}),d=c.getUA().toLowerCase();n&&(l=ve(d)?"_blank":n),ge(d)&&(t=t||"http://localhost",u.scrollbars="yes");const h=Object.entries(u).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return Ae(arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.getUA())&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(d)&&"_self"!==l)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",l),new fr(null);const f=window.open(t||"",l,h);E(f,e,"popup-blocked");try{f.focus()}catch(p){}return new fr(f)}const mr="__/auth/handler",gr="emulator/auth/handler",yr=encodeURIComponent("fac");async function vr(e,t,n,r,i,s){E(e.config.authDomain,e,"auth-domain-config-required"),E(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:l.SDK_VERSION,eventId:i};if(t instanceof ct){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",c.isEmpty(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))a[e]=t}if(t instanceof ut){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const l of Object.keys(o))void 0===o[l]&&delete o[l];const u=await e._getAppCheckToken(),d=u?"#".concat(yr,"=").concat(encodeURIComponent(u)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(mr);return P(t,gr)}(e),"?").concat(c.querystring(o).slice(1)).concat(d)}const wr="webStorageSupport";const br=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=on,this._completeRedirectFn=Yn,this._overrideRedirectResult=qn}async _openPopup(e,t,n,r){var i;C(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return pr(e,await vr(e,t,n,_(),r),cn())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){dn().location.href=e}(await vr(e,t,n,_(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(C(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await dr(e),n=new Qn(e);return t.register("authEvent",t=>{E(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(wr,{type:wr},n=>{var r;const i=null===n||void 0===n||null===(r=n[0])||void 0===r?void 0:r[wr];void 0!==i&&t(!!i),v(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await $n(e);for(const r of t)try{if(nr(r))return}catch(n){}v(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ee()||ye()||Ae()}};class xr{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return N("unexpected MultiFactorSessionType")}}}class Sr extends xr{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Sr(e)}_finalizeEnroll(e,t,n){return function(e,t){return F(e,"POST","/v2/accounts/mfaEnrollment:finalize",M(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return F(e,"POST","/v2/accounts/mfaSignIn:finalize",M(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Ar{constructor(){}static assertion(e){return Sr._fromCredential(e)}}Ar.FACTOR_ID="phone";class Er{static assertionForEnrollment(e,t){return Nr._fromSecret(e,t)}static assertionForSignIn(e,t){return Nr._fromEnrollmentId(e,t)}static async generateSecret(e){var t;const n=e;E("undefined"!==typeof(null===(t=n.user)||void 0===t?void 0:t.auth),"internal-error");const r=await(i=n.user.auth,s={idToken:n.credential,totpEnrollmentInfo:{}},F(i,"POST","/v2/accounts/mfaEnrollment:start",M(i,s)));var i,s;return Cr._fromStartTotpMfaEnrollmentResponse(r,n.user.auth)}}Er.FACTOR_ID="totp";class Nr extends xr{constructor(e,t,n){super("totp"),this.otp=e,this.enrollmentId=t,this.secret=n}static _fromSecret(e,t){return new Nr(t,void 0,e)}static _fromEnrollmentId(e,t){return new Nr(t,e)}async _finalizeEnroll(e,t,n){return E("undefined"!==typeof this.secret,e,"argument-error"),function(e,t){return F(e,"POST","/v2/accounts/mfaEnrollment:finalize",M(e,t))}(e,{idToken:t,displayName:n,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,t){E(void 0!==this.enrollmentId&&void 0!==this.otp,e,"argument-error");const n={verificationCode:this.otp};return function(e,t){return F(e,"POST","/v2/accounts/mfaSignIn:finalize",M(e,t))}(e,{mfaPendingCredential:t,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:n})}}class Cr{constructor(e,t,n,r,i,s,a){this.sessionInfo=s,this.auth=a,this.secretKey=e,this.hashingAlgorithm=t,this.codeLength=n,this.codeIntervalSeconds=r,this.enrollmentCompletionDeadline=i}static _fromStartTotpMfaEnrollmentResponse(e,t){return new Cr(e.totpSessionInfo.sharedSecretKey,e.totpSessionInfo.hashingAlgorithm,e.totpSessionInfo.verificationCodeLength,e.totpSessionInfo.periodSec,new Date(e.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),e.totpSessionInfo.sessionInfo,t)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,t){let n=!1;if((_r(e)||_r(t))&&(n=!0),n){var r;if(_r(e))e=(null===(r=this.auth.currentUser)||void 0===r?void 0:r.email)||"unknownuser";_r(t)&&(t=this.auth.name)}return"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}function _r(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var Tr="@firebase/auth",Ir="1.11.1";class kr{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){E(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Pr=c.getExperimentalSetting("authIdTokenMaxAge")||300;let Rr=null;var Dr;Pe={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=w("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Dr="Browser",l._registerComponent(new d.Component("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;E(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:Dr,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ne(Dr)},c=new Te(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ue);null!==t&&void 0!==t&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),l._registerComponent(new d.Component("auth-internal",e=>(e=>new kr(e))(Ie(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),l.registerVersion(Tr,Ir,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Dr)),l.registerVersion(Tr,Ir,"cjs2020"),t.AUTH_ERROR_CODES_MAP_DO_NOT_USE_INTERNALLY={ADMIN_ONLY_OPERATION:"auth/admin-restricted-operation",ARGUMENT_ERROR:"auth/argument-error",APP_NOT_AUTHORIZED:"auth/app-not-authorized",APP_NOT_INSTALLED:"auth/app-not-installed",CAPTCHA_CHECK_FAILED:"auth/captcha-check-failed",CODE_EXPIRED:"auth/code-expired",CORDOVA_NOT_READY:"auth/cordova-not-ready",CORS_UNSUPPORTED:"auth/cors-unsupported",CREDENTIAL_ALREADY_IN_USE:"auth/credential-already-in-use",CREDENTIAL_MISMATCH:"auth/custom-token-mismatch",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"auth/requires-recent-login",DEPENDENT_SDK_INIT_BEFORE_AUTH:"auth/dependent-sdk-initialized-before-auth",DYNAMIC_LINK_NOT_ACTIVATED:"auth/dynamic-link-not-activated",EMAIL_CHANGE_NEEDS_VERIFICATION:"auth/email-change-needs-verification",EMAIL_EXISTS:"auth/email-already-in-use",EMULATOR_CONFIG_FAILED:"auth/emulator-config-failed",EXPIRED_OOB_CODE:"auth/expired-action-code",EXPIRED_POPUP_REQUEST:"auth/cancelled-popup-request",INTERNAL_ERROR:"auth/internal-error",INVALID_API_KEY:"auth/invalid-api-key",INVALID_APP_CREDENTIAL:"auth/invalid-app-credential",INVALID_APP_ID:"auth/invalid-app-id",INVALID_AUTH:"auth/invalid-user-token",INVALID_AUTH_EVENT:"auth/invalid-auth-event",INVALID_CERT_HASH:"auth/invalid-cert-hash",INVALID_CODE:"auth/invalid-verification-code",INVALID_CONTINUE_URI:"auth/invalid-continue-uri",INVALID_CORDOVA_CONFIGURATION:"auth/invalid-cordova-configuration",INVALID_CUSTOM_TOKEN:"auth/invalid-custom-token",INVALID_DYNAMIC_LINK_DOMAIN:"auth/invalid-dynamic-link-domain",INVALID_EMAIL:"auth/invalid-email",INVALID_EMULATOR_SCHEME:"auth/invalid-emulator-scheme",INVALID_IDP_RESPONSE:"auth/invalid-credential",INVALID_LOGIN_CREDENTIALS:"auth/invalid-credential",INVALID_MESSAGE_PAYLOAD:"auth/invalid-message-payload",INVALID_MFA_SESSION:"auth/invalid-multi-factor-session",INVALID_OAUTH_CLIENT_ID:"auth/invalid-oauth-client-id",INVALID_OAUTH_PROVIDER:"auth/invalid-oauth-provider",INVALID_OOB_CODE:"auth/invalid-action-code",INVALID_ORIGIN:"auth/unauthorized-domain",INVALID_PASSWORD:"auth/wrong-password",INVALID_PERSISTENCE:"auth/invalid-persistence-type",INVALID_PHONE_NUMBER:"auth/invalid-phone-number",INVALID_PROVIDER_ID:"auth/invalid-provider-id",INVALID_RECIPIENT_EMAIL:"auth/invalid-recipient-email",INVALID_SENDER:"auth/invalid-sender",INVALID_SESSION_INFO:"auth/invalid-verification-id",INVALID_TENANT_ID:"auth/invalid-tenant-id",MFA_INFO_NOT_FOUND:"auth/multi-factor-info-not-found",MFA_REQUIRED:"auth/multi-factor-auth-required",MISSING_ANDROID_PACKAGE_NAME:"auth/missing-android-pkg-name",MISSING_APP_CREDENTIAL:"auth/missing-app-credential",MISSING_AUTH_DOMAIN:"auth/auth-domain-config-required",MISSING_CODE:"auth/missing-verification-code",MISSING_CONTINUE_URI:"auth/missing-continue-uri",MISSING_IFRAME_START:"auth/missing-iframe-start",MISSING_IOS_BUNDLE_ID:"auth/missing-ios-bundle-id",MISSING_OR_INVALID_NONCE:"auth/missing-or-invalid-nonce",MISSING_MFA_INFO:"auth/missing-multi-factor-info",MISSING_MFA_SESSION:"auth/missing-multi-factor-session",MISSING_PHONE_NUMBER:"auth/missing-phone-number",MISSING_PASSWORD:"auth/missing-password",MISSING_SESSION_INFO:"auth/missing-verification-id",MODULE_DESTROYED:"auth/app-deleted",NEED_CONFIRMATION:"auth/account-exists-with-different-credential",NETWORK_REQUEST_FAILED:"auth/network-request-failed",NULL_USER:"auth/null-user",NO_AUTH_EVENT:"auth/no-auth-event",NO_SUCH_PROVIDER:"auth/no-such-provider",OPERATION_NOT_ALLOWED:"auth/operation-not-allowed",OPERATION_NOT_SUPPORTED:"auth/operation-not-supported-in-this-environment",POPUP_BLOCKED:"auth/popup-blocked",POPUP_CLOSED_BY_USER:"auth/popup-closed-by-user",PROVIDER_ALREADY_LINKED:"auth/provider-already-linked",QUOTA_EXCEEDED:"auth/quota-exceeded",REDIRECT_CANCELLED_BY_USER:"auth/redirect-cancelled-by-user",REDIRECT_OPERATION_PENDING:"auth/redirect-operation-pending",REJECTED_CREDENTIAL:"auth/rejected-credential",SECOND_FACTOR_ALREADY_ENROLLED:"auth/second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"auth/maximum-second-factor-count-exceeded",TENANT_ID_MISMATCH:"auth/tenant-id-mismatch",TIMEOUT:"auth/timeout",TOKEN_EXPIRED:"auth/user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"auth/too-many-requests",UNAUTHORIZED_DOMAIN:"auth/unauthorized-continue-uri",UNSUPPORTED_FIRST_FACTOR:"auth/unsupported-first-factor",UNSUPPORTED_PERSISTENCE:"auth/unsupported-persistence-type",UNSUPPORTED_TENANT_OPERATION:"auth/unsupported-tenant-operation",UNVERIFIED_EMAIL:"auth/unverified-email",USER_CANCELLED:"auth/user-cancelled",USER_DELETED:"auth/user-not-found",USER_DISABLED:"auth/user-disabled",USER_MISMATCH:"auth/user-mismatch",USER_SIGNED_OUT:"auth/user-signed-out",WEAK_PASSWORD:"auth/weak-password",WEB_STORAGE_UNSUPPORTED:"auth/web-storage-unsupported",ALREADY_INITIALIZED:"auth/already-initialized",RECAPTCHA_NOT_ENABLED:"auth/recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"auth/missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"auth/invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"auth/invalid-recaptcha-action",MISSING_CLIENT_TYPE:"auth/missing-client-type",MISSING_RECAPTCHA_VERSION:"auth/missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"auth/invalid-recaptcha-version",INVALID_REQ_TYPE:"auth/invalid-req-type",INVALID_HOSTING_LINK_DOMAIN:"auth/invalid-hosting-link-domain"},t.ActionCodeOperation={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"},t.ActionCodeURL=ot,t.AuthCredential=Ye,t.AuthEventManager=Qn,t.AuthImpl=Te,t.AuthPopup=fr,t.EmailAuthCredential=tt,t.EmailAuthProvider=lt,t.FacebookAuthProvider=ht,t.FactorId={PHONE:"phone",TOTP:"totp"},t.FetchProvider=R,t.GithubAuthProvider=pt,t.GoogleAuthProvider=ft,t.OAuthCredential=rt,t.OAuthProvider=dt,t.OperationType={LINK:"link",REAUTHENTICATE:"reauthenticate",SIGN_IN:"signIn"},t.PhoneAuthCredential=at,t.PhoneAuthProvider=Dn,t.PhoneMultiFactorGenerator=Ar,t.ProviderId={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},t.RecaptchaVerifier=class{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i({},In);this.parameters=n,this.type=Tn,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ie(e),this.isInvisible="invisible"===this.parameters.size,E("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof t?document.getElementById(t):t;E(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new _n:new Cn,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise(n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){E(!this.parameters.sitekey,this.auth,"argument-error"),E(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),E("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(e=>e(t)),"function"===typeof e)e(t);else if("string"===typeof e){const n=dn()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){E(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){E(T()&&!hn(),this.auth,"internal-error"),await function(){let e=null;return new Promise(t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()}).catch(t=>{throw e&&window.removeEventListener("load",e),t})}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await F(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);E(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return E(this.recaptcha,this.auth,"internal-error"),this.recaptcha}},t.SAMLAuthCredential=mt,t.SAMLAuthProvider=gt,t.SignInMethod={EMAIL_LINK:"emailLink",EMAIL_PASSWORD:"password",FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PHONE:"phone",TWITTER:"twitter.com"},t.TotpMultiFactorGenerator=Er,t.TotpSecret=Cr,t.TwitterAuthProvider=yt,t.UserImpl=le,t._assert=E,t._castAuth=Ie,t._clearRedirectOutcomes=function(){Vn.clear()},t._createError=w,t._fail=v,t._generateEventId=cn,t._getClientVersion=Ne,t._getInstance=ue,t._getProjectConfig=$n,t._getRedirectResult=Yn,t._getRedirectUrl=vr,t._isAndroid=be,t._isIOS=Ae,t._isIOS7Or8=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.getUA();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)},t._overrideRedirectResult=qn,t._persistenceKeyName=fe,t.applyActionCode=async function(e,t){await async function(e,t){return F(e,"POST","/v1/accounts:update",M(e,t))}(c.getModularInstance(e),{oobCode:t})},t.beforeAuthStateChanged=qt,t.browserCookiePersistence=sn,t.browserLocalPersistence=en,t.browserPopupRedirectResolver=br,t.browserSessionPersistence=on,t.checkActionCode=Mt,t.confirmPasswordReset=async function(e,t,n){await Xe(c.getModularInstance(e),{oobCode:t,newPassword:n}).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Lt(e),t})},t.connectAuthEmulator=qe,t.createUserWithEmailAndPassword=async function(e,t,n){if(l._isFirebaseServerApp(e.app))return Promise.reject(x(e));const r=Ie(e),i=Ve(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",vt,"EMAIL_PASSWORD_PROVIDER"),s=await i.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Lt(e),t}),a=await wt._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(a.user),a},t.debugAssert=C,t.debugErrorMap=f,t.deleteUser=async function(e){return c.getModularInstance(e).delete()},t.fetchSignInMethodsForEmail=async function(e,t){const n={identifier:t,continueUri:T()?_():"http://localhost"},{signinMethods:r}=await async function(e,t){return F(e,"POST","/v1/accounts:createAuthUri",M(e,t))}(c.getModularInstance(e),n);return r||[]},t.getAdditionalUserInfo=function(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){if(!e)return null;const{providerId:t}=e,n=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},r=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!t&&null!==e&&void 0!==e&&e.idToken){var i;const t=null===(i=Z(e.idToken))||void 0===i||null===(i=i.firebase)||void 0===i?void 0:i.sign_in_provider;if(t)return new jt(r,"anonymous"!==t&&"custom"!==t?t:null)}if(!t)return null;switch(t){case"facebook.com":return new Ut(r,n);case"github.com":return new zt(r,n);case"google.com":return new Vt(r,n);case"twitter.com":return new Ht(r,n,e.screenName||null);case"custom":case"anonymous":return new jt(r,null);default:return new jt(r,t,n)}}(n)},t.getAuth=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.getApp();const t=l._getProvider(e,"auth");if(t.isInitialized())return t.getImmediate();const n=We(e,{popupRedirectResolver:br,persistence:[Sn,en,on]}),r=c.getExperimentalSetting("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Pr)return;const r=null===t||void 0===t?void 0:t.token;Rr!==r&&(Rr=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});qt(n,t,()=>t(n.currentUser)),Wt(n,e=>t(e))}}var i;const s=c.getDefaultEmulatorHost("auth");return s&&qe(n,"http://".concat(s)),n},t.getIdToken=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return c.getModularInstance(e).getIdToken(t)},t.getIdTokenResult=Q,t.getMultiFactorResolver=function(e,t){var n;const r=c.getModularInstance(e),i=t;return E(t.customData.operationType,r,"argument-error"),E(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Kt._fromError(r,i)},t.getRedirectResult=async function(e,t){return await Ie(e)._initializationPromise,Yn(e,t,!1)},t.inMemoryPersistence=he,t.indexedDBLocalPersistence=Sn,t.initializeAuth=We,t.initializeRecaptchaConfig=function(e){return He(e)},t.isSignInWithEmailLink=function(e,t){const n=ot.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)},t.linkWithCredential=It,t.linkWithPhoneNumber=async function(e,t,n){const r=c.getModularInstance(e);await Nt(!1,r,"phone");const i=await Pn(r.auth,t,c.getModularInstance(n));return new kn(i,e=>It(r,e))},t.linkWithPopup=async function(e,t,n){const r=c.getModularInstance(e);S(r.auth,t,ct);const i=On(r.auth,n);return new zn(r.auth,"linkViaPopup",t,i,r).executeNotNull()},t.linkWithRedirect=function(e,t,n){return async function(e,t,n){const r=c.getModularInstance(e);S(r.auth,t,ct),await r.auth._initializationPromise;const i=On(r.auth,n);await Nt(!1,r,t.providerId),await Wn(i,r.auth);const s=await Xn(r);return i._openRedirect(r.auth,t,"linkViaRedirect",s)}(e,t,n)},t.multiFactor=function(e){const t=c.getModularInstance(e);return Qt.has(t)||Qt.set(t,Xt._fromUser(t)),Qt.get(t)},t.onAuthStateChanged=function(e,t,n,r){return c.getModularInstance(e).onAuthStateChanged(t,n,r)},t.onIdTokenChanged=Wt,t.parseActionCodeURL=function(e){return ot.parseLink(e)},t.prodErrorMap=p,t.reauthenticateWithCredential=kt,t.reauthenticateWithPhoneNumber=async function(e,t,n){const r=c.getModularInstance(e);if(l._isFirebaseServerApp(r.auth.app))return Promise.reject(x(r.auth));const i=await Pn(r.auth,t,c.getModularInstance(n));return new kn(i,e=>kt(r,e))},t.reauthenticateWithPopup=async function(e,t,n){const r=c.getModularInstance(e);if(l._isFirebaseServerApp(r.auth.app))return Promise.reject(w(r.auth,"operation-not-supported-in-this-environment"));S(r.auth,t,ct);const i=On(r.auth,n);return new zn(r.auth,"reauthViaPopup",t,i,r).executeNotNull()},t.reauthenticateWithRedirect=function(e,t,n){return async function(e,t,n){const r=c.getModularInstance(e);if(S(r.auth,t,ct),l._isFirebaseServerApp(r.auth.app))return Promise.reject(x(r.auth));await r.auth._initializationPromise;const i=On(r.auth,n);await Wn(i,r.auth);const s=await Xn(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",s)}(e,t,n)},t.reload=ie,t.revokeAccessToken=function(e,t){return Ie(e).revokeAccessToken(t)},t.sendEmailVerification=async function(e,t){const n=c.getModularInstance(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&Ot(n.auth,r,t);const{email:i}=await async function(e,t){return Ze(e,t)}(n.auth,r);i!==e.email&&await e.reload()},t.sendPasswordResetEmail=async function(e,t,n){const r=Ie(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&Ot(r,i,n),await Ve(r,i,"getOobCode",$e,"EMAIL_PASSWORD_PROVIDER")},t.sendSignInLinkToEmail=async function(e,t,n){const r=Ie(e),i={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};!function(e,t){E(t.handleCodeInApp,r,"argument-error"),t&&Ot(r,e,t)}(i,n),await Ve(r,i,"getOobCode",et,"EMAIL_PASSWORD_PROVIDER")},t.setPersistence=function(e,t){return c.getModularInstance(e).setPersistence(t)},t.signInAnonymously=async function(e){var t;if(l._isFirebaseServerApp(e.app))return Promise.reject(x(e));const n=Ie(e);if(await n._initializationPromise,null!==(t=n.currentUser)&&void 0!==t&&t.isAnonymous)return new wt({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await vt(n,{returnSecureToken:!0}),i=await wt._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i},t.signInWithCredential=Tt,t.signInWithCustomToken=async function(e,t){if(l._isFirebaseServerApp(e.app))return Promise.reject(x(e));const n=Ie(e),r=await async function(e,t){return B(e,"POST","/v1/accounts:signInWithCustomToken",M(e,t))}(n,{token:t,returnSecureToken:!0}),i=await wt._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i},t.signInWithEmailAndPassword=function(e,t,n){return l._isFirebaseServerApp(e.app)?Promise.reject(x(e)):Tt(c.getModularInstance(e),lt.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Lt(e),t})},t.signInWithEmailLink=async function(e,t,n){if(l._isFirebaseServerApp(e.app))return Promise.reject(x(e));const r=c.getModularInstance(e),i=lt.credentialWithLink(t,n||_());return E(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Tt(r,i)},t.signInWithPhoneNumber=async function(e,t,n){if(l._isFirebaseServerApp(e.app))return Promise.reject(x(e));const r=Ie(e),i=await Pn(r,t,c.getModularInstance(n));return new kn(i,e=>Tt(r,e))},t.signInWithPopup=async function(e,t,n){if(l._isFirebaseServerApp(e.app))return Promise.reject(w(e,"operation-not-supported-in-this-environment"));const r=Ie(e);S(e,t,ct);const i=On(r,n);return new zn(r,"signInViaPopup",t,i).executeNotNull()},t.signInWithRedirect=function(e,t,n){return async function(e,t,n){if(l._isFirebaseServerApp(e.app))return Promise.reject(x(e));const r=Ie(e);S(e,t,ct),await r._initializationPromise;const i=On(r,n);return await Wn(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)},t.signOut=function(e){return c.getModularInstance(e).signOut()},t.unlink=async function(e,t){const n=c.getModularInstance(e);await Nt(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return F(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=At(r||[]);return n.providerData=n.providerData.filter(e=>i.has(e.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n},t.updateCurrentUser=function(e,t){return c.getModularInstance(e).updateCurrentUser(t)},t.updateEmail=function(e,t){const n=c.getModularInstance(e);return l._isFirebaseServerApp(n.auth.app)?Promise.reject(x(n.auth)):Ft(n,t,null)},t.updatePassword=function(e,t){return Ft(c.getModularInstance(e),null,t)},t.updatePhoneNumber=async function(e,t){const n=c.getModularInstance(e);if(l._isFirebaseServerApp(n.auth.app))return Promise.reject(x(n.auth));await Et(n,t)},t.updateProfile=async function(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=c.getModularInstance(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},a=await ee(i,async function(e,t){return F(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=a.displayName||null,i.photoURL=a.photoUrl||null;const o=i.providerData.find(e=>{let{providerId:t}=e;return"password"===t});o&&(o.displayName=i.displayName,o.photoURL=i.photoURL),await i._updateTokensIfNecessary(a)},t.useDeviceLanguage=function(e){c.getModularInstance(e).useDeviceLanguage()},t.validatePassword=async function(e,t){return Ie(e).validatePassword(t)},t.verifyBeforeUpdateEmail=async function(e,t,n){const r=c.getModularInstance(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&Ot(r.auth,i,n);const{email:s}=await async function(e,t){return Ze(e,t)}(r.auth,i);s!==e.email&&await e.reload()},t.verifyPasswordResetCode=async function(e,t){const{data:n}=await Mt(c.getModularInstance(e),t);return n.email}},900:(e,t,n)=>{const r=n(7421);function i(e){this.mode=r.NUMERIC,this.data=e.toString()}i.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(e){let t,n,r;for(t=0;t+3<=this.data.length;t+=3)n=this.data.substr(t,3),r=parseInt(n,10),e.put(r,10);const i=this.data.length-t;i>0&&(n=this.data.substr(t),r=parseInt(n,10),e.put(r,3*i+1))},e.exports=i},1098:(e,t,n)=>{"use strict";var r=n(2897).default;Object.defineProperty(t,"__esModule",{value:!0});var i=n(5858),s=n(9887),a=n(8679),o=n(5180);class l{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const c="@firebase/app",u="0.14.5",d=new s.Logger("@firebase/app"),h="@firebase/app-compat",f="@firebase/analytics-compat",p="@firebase/analytics",m="@firebase/app-check-compat",g="@firebase/app-check",y="@firebase/auth",v="@firebase/auth-compat",w="@firebase/database",b="@firebase/data-connect",x="@firebase/database-compat",S="@firebase/functions",A="@firebase/functions-compat",E="@firebase/installations",N="@firebase/installations-compat",C="@firebase/messaging",_="@firebase/messaging-compat",T="@firebase/performance",I="@firebase/performance-compat",k="@firebase/remote-config",P="@firebase/remote-config-compat",R="@firebase/storage",D="@firebase/storage-compat",O="@firebase/firestore",L="@firebase/ai",M="@firebase/firestore-compat",F="firebase",j="[DEFAULT]",B={[c]:"fire-core",[h]:"fire-core-compat",[p]:"fire-analytics",[f]:"fire-analytics-compat",[g]:"fire-app-check",[m]:"fire-app-check-compat",[y]:"fire-auth",[v]:"fire-auth-compat",[w]:"fire-rtdb",[b]:"fire-data-connect",[x]:"fire-rtdb-compat",[S]:"fire-fn",[A]:"fire-fn-compat",[E]:"fire-iid",[N]:"fire-iid-compat",[C]:"fire-fcm",[_]:"fire-fcm-compat",[T]:"fire-perf",[I]:"fire-perf-compat",[k]:"fire-rc",[P]:"fire-rc-compat",[R]:"fire-gcs",[D]:"fire-gcs-compat",[O]:"fire-fst",[M]:"fire-fst-compat",[L]:"fire-vertex","fire-js":"fire-js",[F]:"fire-js-all"},U=new Map,z=new Map,V=new Map;function H(e,t){try{e.container.addComponent(t)}catch(n){d.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function W(e){const t=e.name;if(V.has(t))return d.debug("There were multiple attempts to register component ".concat(t,".")),!1;V.set(t,e);for(const n of U.values())H(n,e);for(const n of z.values())H(n,e);return!0}function q(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function G(e){return void 0!==e.options}function K(e){return!G(e)&&("authIdToken"in e||"appCheckToken"in e||"releaseOnDeref"in e||"automaticDataCollectionEnabled"in e)}const Y={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},X=new a.ErrorFactory("app","Firebase",Y);class Q{constructor(e,t,n){this._isDeleted=!1,this._options=r({},e),this._config=r({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new i.Component("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw X.create("app-deleted",{appName:this._name})}}function J(e,t){const n=a.base64Decode(e.split(".")[1]);if(null===n)return void console.error("FirebaseServerApp ".concat(t," is invalid: second part could not be parsed."));if(void 0===JSON.parse(n).exp)return void console.error("FirebaseServerApp ".concat(t," is invalid: expiration claim could not be parsed"));1e3*JSON.parse(n).exp-(new Date).getTime()<=0&&console.error("FirebaseServerApp ".concat(t," is invalid: the token has expired."))}class Z extends Q{constructor(e,t,n,i){const s=void 0===t.automaticDataCollectionEnabled||t.automaticDataCollectionEnabled,a={name:n,automaticDataCollectionEnabled:s};if(void 0!==e.apiKey)super(e,a,i);else{super(e.options,a,i)}this._serverConfig=r({automaticDataCollectionEnabled:s},t),this._serverConfig.authIdToken&&J(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&J(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,"undefined"!==typeof FinalizationRegistry&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,te(c,u,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,void 0!==e&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){ee(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw X.create("server-app-deleted")}}function $(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const s=r({name:j,automaticDataCollectionEnabled:!0},t),o=s.name;if("string"!==typeof o||!o)throw X.create("bad-app-name",{appName:String(o)});if(n||(n=a.getDefaultAppConfig()),!n)throw X.create("no-options");const l=U.get(o);if(l){if(a.deepEqual(n,l.options)&&a.deepEqual(s,l.config))return l;throw X.create("duplicate-app",{appName:o})}const c=new i.ComponentContainer(o);for(const r of V.values())c.addComponent(r);const u=new Q(n,s,c);return U.set(o,u),u}async function ee(e){let t=!1;const n=e.name;if(U.has(n))t=!0,U.delete(n);else if(z.has(n)){e.decRefCount()<=0&&(z.delete(n),t=!0)}t&&(await Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)}function te(e,t,n){var r;let s=null!==(r=B[e])&&void 0!==r?r:e;n&&(s+="-".concat(n));const a=s.match(/\s|\//),o=t.match(/\s|\//);if(a||o){const e=['Unable to register library "'.concat(s,'" with version "').concat(t,'":')];return a&&e.push('library name "'.concat(s,'" contains illegal characters (whitespace or "/")')),a&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void d.warn(e.join(" "))}W(new i.Component("".concat(s,"-version"),()=>({library:s,version:t}),"VERSION"))}const ne="firebase-heartbeat-store";let re=null;function ie(){return re||(re=o.openDB("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(ne)}catch(n){console.warn(n)}}}).catch(e=>{throw X.create("idb-open",{originalErrorMessage:e.message})})),re}async function se(e,t){try{const n=(await ie()).transaction(ne,"readwrite"),r=n.objectStore(ne);await r.put(t,ae(e)),await n.done}catch(n){if(n instanceof a.FirebaseError)d.warn(n.message);else{const e=X.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});d.warn(e.message)}}}function ae(e){return"".concat(e.name,"!").concat(e.options.appId)}class oe{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ce(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{var e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=le();var t;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){d.warn(n)}}async getHeartbeatsHeader(){try{var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=le(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),ue(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ue(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=a.base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return d.warn(t),""}}}function le(){return(new Date).toISOString().substring(0,10)}class ce{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!a.isIndexedDBAvailable()&&a.validateIndexedDBOpenable().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await ie()).transaction(ne),n=await t.objectStore(ne).get(ae(e));return await t.done,n}catch(t){if(t instanceof a.FirebaseError)d.warn(t.message);else{const e=X.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});d.warn(e.message)}}}(this.app);return null!==e&&void 0!==e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return se(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return se(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function ue(e){return a.base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:e})).length}var de;de="node",W(new i.Component("platform-logger",e=>new l(e),"PRIVATE")),W(new i.Component("heartbeat",e=>new oe(e),"PRIVATE")),te(c,u,de),te(c,u,"cjs2020"),te("fire-js",""),Object.defineProperty(t,"FirebaseError",{enumerable:!0,get:function(){return a.FirebaseError}}),t.SDK_VERSION="12.5.0",t._DEFAULT_ENTRY_NAME=j,t._addComponent=H,t._addOrOverwriteComponent=function(e,t){e.container.addOrOverwriteComponent(t)},t._apps=U,t._clearComponents=function(){V.clear()},t._components=V,t._getProvider=q,t._isFirebaseApp=G,t._isFirebaseServerApp=function(e){return null!==e&&void 0!==e&&void 0!==e.settings},t._isFirebaseServerAppSettings=K,t._registerComponent=W,t._removeServiceInstance=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:j;q(e,t).clearInstance(n)},t._serverApps=z,t.deleteApp=ee,t.getApp=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j;const t=U.get(e);if(!t&&e===j&&a.getDefaultAppConfig())return $();if(!t)throw X.create("no-app",{appName:e});return t},t.getApps=function(){return Array.from(U.values())},t.initializeApp=$,t.initializeServerApp=function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(a.isBrowser()&&!a.isWebWorker())throw X.create("invalid-server-app-environment");let s=n||{};if(e&&(G(e)?t=e.options:K(e)?s=e:t=e),void 0===s.automaticDataCollectionEnabled&&(s.automaticDataCollectionEnabled=!0),t||(t=a.getDefaultAppConfig()),!t)throw X.create("no-options");const o=r(r({},s),t);if(void 0!==o.releaseOnDeref&&delete o.releaseOnDeref,void 0!==s.releaseOnDeref&&"undefined"===typeof FinalizationRegistry)throw X.create("finalization-registry-not-supported",{});const l=""+(c=JSON.stringify(o),[...c].reduce((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0,0));var c;const u=z.get(l);if(u)return u.incRefCount(s.releaseOnDeref),u;const d=new i.ComponentContainer(l);for(const r of V.values())d.addComponent(r);const h=new Z(t,s,l,d);return z.set(l,h),h},t.onLog=function(e,t){if(null!==e&&"function"!==typeof e)throw X.create("invalid-log-argument");s.setUserLogHandler(e,t)},t.registerVersion=te,t.setLogLevel=function(e){s.setLogLevel(e)}},1150:(e,t,n)=>{"use strict";n.d(t,{KO:()=>$,MF:()=>Q,Sx:()=>Z,Wp:()=>J,j6:()=>q,om:()=>W,xZ:()=>G});var r=n(9379),i=n(9606),s=n(2965),a=n(1776),o=n(5180);class l{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const c="@firebase/app",u="0.14.5",d=new s.Vy("@firebase/app"),h="@firebase/app-compat",f="@firebase/analytics-compat",p="@firebase/analytics",m="@firebase/app-check-compat",g="@firebase/app-check",y="@firebase/auth",v="@firebase/auth-compat",w="@firebase/database",b="@firebase/data-connect",x="@firebase/database-compat",S="@firebase/functions",A="@firebase/functions-compat",E="@firebase/installations",N="@firebase/installations-compat",C="@firebase/messaging",_="@firebase/messaging-compat",T="@firebase/performance",I="@firebase/performance-compat",k="@firebase/remote-config",P="@firebase/remote-config-compat",R="@firebase/storage",D="@firebase/storage-compat",O="@firebase/firestore",L="@firebase/ai",M="@firebase/firestore-compat",F="firebase",j="[DEFAULT]",B={[c]:"fire-core",[h]:"fire-core-compat",[p]:"fire-analytics",[f]:"fire-analytics-compat",[g]:"fire-app-check",[m]:"fire-app-check-compat",[y]:"fire-auth",[v]:"fire-auth-compat",[w]:"fire-rtdb",[b]:"fire-data-connect",[x]:"fire-rtdb-compat",[S]:"fire-fn",[A]:"fire-fn-compat",[E]:"fire-iid",[N]:"fire-iid-compat",[C]:"fire-fcm",[_]:"fire-fcm-compat",[T]:"fire-perf",[I]:"fire-perf-compat",[k]:"fire-rc",[P]:"fire-rc-compat",[R]:"fire-gcs",[D]:"fire-gcs-compat",[O]:"fire-fst",[M]:"fire-fst-compat",[L]:"fire-vertex","fire-js":"fire-js",[F]:"fire-js-all"},U=new Map,z=new Map,V=new Map;function H(e,t){try{e.container.addComponent(t)}catch(n){d.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function W(e){const t=e.name;if(V.has(t))return d.debug("There were multiple attempts to register component ".concat(t,".")),!1;V.set(t,e);for(const n of U.values())H(n,e);for(const n of z.values())H(n,e);return!0}function q(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function G(e){return null!==e&&void 0!==e&&void 0!==e.settings}const K={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Y=new a.FA("app","Firebase",K);class X{constructor(e,t,n){this._isDeleted=!1,this._options=(0,r.A)({},e),this._config=(0,r.A)({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new i.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Y.create("app-deleted",{appName:this._name})}}const Q="12.5.0";function J(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const s=(0,r.A)({name:j,automaticDataCollectionEnabled:!0},t),o=s.name;if("string"!==typeof o||!o)throw Y.create("bad-app-name",{appName:String(o)});if(n||(n=(0,a.T9)()),!n)throw Y.create("no-options");const l=U.get(o);if(l){if((0,a.bD)(n,l.options)&&(0,a.bD)(s,l.config))return l;throw Y.create("duplicate-app",{appName:o})}const c=new i.h1(o);for(const r of V.values())c.addComponent(r);const u=new X(n,s,c);return U.set(o,u),u}function Z(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j;const t=U.get(e);if(!t&&e===j&&(0,a.T9)())return J();if(!t)throw Y.create("no-app",{appName:e});return t}function $(e,t,n){var r;let s=null!==(r=B[e])&&void 0!==r?r:e;n&&(s+="-".concat(n));const a=s.match(/\s|\//),o=t.match(/\s|\//);if(a||o){const e=['Unable to register library "'.concat(s,'" with version "').concat(t,'":')];return a&&e.push('library name "'.concat(s,'" contains illegal characters (whitespace or "/")')),a&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void d.warn(e.join(" "))}W(new i.uA("".concat(s,"-version"),()=>({library:s,version:t}),"VERSION"))}const ee="firebase-heartbeat-store";let te=null;function ne(){return te||(te=(0,o.openDB)("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(ee)}catch(n){console.warn(n)}}}).catch(e=>{throw Y.create("idb-open",{originalErrorMessage:e.message})})),te}async function re(e,t){try{const n=(await ne()).transaction(ee,"readwrite"),r=n.objectStore(ee);await r.put(t,ie(e)),await n.done}catch(n){if(n instanceof a.g)d.warn(n.message);else{const e=Y.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});d.warn(e.message)}}}function ie(e){return"".concat(e.name,"!").concat(e.options.appId)}class se{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new oe(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{var e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ae();var t;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){d.warn(n)}}async getHeartbeatsHeader(){try{var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=ae(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),le(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),le(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=(0,a.Uj)(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return d.warn(t),""}}}function ae(){return(new Date).toISOString().substring(0,10)}class oe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,a.zW)()&&(0,a.eX)().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await ne()).transaction(ee),n=await t.objectStore(ee).get(ie(e));return await t.done,n}catch(t){if(t instanceof a.g)d.warn(t.message);else{const e=Y.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});d.warn(e.message)}}}(this.app);return null!==e&&void 0!==e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return re(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return re(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function le(e){return(0,a.Uj)(JSON.stringify({version:2,heartbeats:e})).length}var ce;ce="",W(new i.uA("platform-logger",e=>new l(e),"PRIVATE")),W(new i.uA("heartbeat",e=>new se(e),"PRIVATE")),$(c,u,ce),$(c,u,"esm2020"),$("fire-js","")},1166:(e,t)=>{const n=new Uint8Array(512),r=new Uint8Array(256);!function(){let e=1;for(let t=0;t<255;t++)n[t]=e,r[e]=t,e<<=1,256&e&&(e^=285);for(let t=255;t<512;t++)n[t]=n[t-255]}(),t.log=function(e){if(e<1)throw new Error("log("+e+")");return r[e]},t.exp=function(e){return n[e]},t.mul=function(e,t){return 0===e||0===t?0:n[r[e]+r[t]]}},1312:(e,t,n)=>{const r=n(1166);t.mul=function(e,t){const n=new Uint8Array(e.length+t.length-1);for(let i=0;i<e.length;i++)for(let s=0;s<t.length;s++)n[i+s]^=r.mul(e[i],t[s]);return n},t.mod=function(e,t){let n=new Uint8Array(e);for(;n.length-t.length>=0;){const e=n[0];for(let s=0;s<t.length;s++)n[s]^=r.mul(t[s],e);let i=0;for(;i<n.length&&0===n[i];)i++;n=n.slice(i)}return n},t.generateECPolynomial=function(e){let n=new Uint8Array([1]);for(let i=0;i<e;i++)n=t.mul(n,new Uint8Array([1,r.exp(i)]));return n}},1776:(e,t,n)=>{"use strict";n.d(t,{cY:()=>m,FA:()=>O,g:()=>D,u:()=>l,Uj:()=>o,Fy:()=>v,tD:()=>V,bD:()=>F,hp:()=>z,T9:()=>f,Tj:()=>d,yU:()=>h,XA:()=>p,mS:()=>c,Ku:()=>q,ZQ:()=>S,sr:()=>C,zJ:()=>g,c1:()=>N,Im:()=>M,lT:()=>T,zW:()=>P,jZ:()=>A,lV:()=>_,nr:()=>I,Ov:()=>k,gE:()=>y,Am:()=>B,I9:()=>U,P1:()=>x,eX:()=>R});var r=n(9379);const i=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,a=s?e[i+1]:0,o=i+2<e.length,l=o?e[i+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,s||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(i(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const l=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==l)throw new a;const c=t<<2|s>>4;if(r.push(c),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==l){const e=o<<6&192|l;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class a extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const o=function(e){return function(e){const t=i(e);return s.encodeByteArray(t,!0)}(e).replace(/\./g,"")},l=function(e){try{return s.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function c(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const u=()=>{try{return c().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:"443",FAST_REFRESH:!0,REACT_APP_BACKEND_URL:"https://mobilegas.preview.emergentagent.com",REACT_APP_ENABLE_VISUAL_EDITS:"false"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&l(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},d=e=>{var t;return null===(t=u())||void 0===t||null===(t=t.emulatorHosts)||void 0===t?void 0:t[e]},h=e=>{const t=d(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},f=()=>{var e;return null===(e=u())||void 0===e?void 0:e.config},p=e=>{var t;return null===(t=u())||void 0===t?void 0:t["_".concat(e)]};class m{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function g(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function y(e){return(await fetch(e,{credentials:"include"})).ok}function v(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=(0,r.A)({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[o(JSON.stringify({alg:"none",type:"JWT"})),o(JSON.stringify(a)),""].join(".")}const w={};let b=!1;function x(e,t){if("undefined"===typeof window||"undefined"===typeof document||!g(window.location.host)||w[e]===t||w[e]||b)return;function n(e){return"__firebase__banner__".concat(e)}w[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(w))w[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{b=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function a(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),a=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),l=document.getElementById(o)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,o);const n=s();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,a,l,n),document.body.appendChild(t)}i?(a.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',a.innerText="Preview backend running in this workspace."),a.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a()}function S(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function A(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(S())}function E(){var e;const t=null===(e=u())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function N(){return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent}function C(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function _(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function T(){const e=S();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function I(){return!E()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function k(){return!E()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function P(){try{return"object"===typeof indexedDB}catch(e){return!1}}function R(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})}class D extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,D.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,O.prototype.create)}}class O{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(L,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new D(n,s,t)}}const L=/\{\$([^}]+)}/g;function M(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function F(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(j(n)&&j(s)){if(!F(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function j(e){return null!==e&&"object"===typeof e}function B(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function U(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function z(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function V(e,t){const n=new H(e,t);return n.subscribe.bind(n)}class H{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=W),void 0===r.error&&(r.error=W),void 0===r.complete&&(r.complete=W);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function W(){}function q(e){return e&&e._delegate?e._delegate:e}},1805:(e,t,n)=>{const r=n(6272),i=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],s=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];t.getBlocksCount=function(e,t){switch(t){case r.L:return i[4*(e-1)+0];case r.M:return i[4*(e-1)+1];case r.Q:return i[4*(e-1)+2];case r.H:return i[4*(e-1)+3];default:return}},t.getTotalCodewordsCount=function(e,t){switch(t){case r.L:return s[4*(e-1)+0];case r.M:return s[4*(e-1)+1];case r.Q:return s[4*(e-1)+2];case r.H:return s[4*(e-1)+3];default:return}}},1847:(e,t,n)=>{var r=n(4893);e.exports=function(e,t){if(null==e)return{};var n,i,s=r(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s},e.exports.__esModule=!0,e.exports.default=e.exports},2072:function(e,t,n){!function(e){"use strict";function t(e){return null===e||void 0===e}var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function s(e,t){var n=Object.setPrototypeOf;n?n(e,t):e.__proto__=t}function a(e,t){void 0===t&&(t=e.constructor);var n=Error.captureStackTrace;n&&n(e,t)}var o,l=function(e){function t(t){var n=this.constructor,r=e.call(this,t)||this;return Object.defineProperty(r,"name",{value:n.name,enumerable:!1}),s(r,n.prototype),a(r),r}return i(t,e),t}(Error);class c extends l{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;super(e),this.message=e}getKind(){return this.constructor.kind}}c.kind="Exception";class u extends c{}u.kind="ArgumentException";class d extends c{}d.kind="IllegalArgumentException";class h{constructor(e){if(this.binarizer=e,null===e)throw new d("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,t){return this.binarizer.getBlackRow(e,t)}getBlackMatrix(){return null!==this.matrix&&void 0!==this.matrix||(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,t,n,r){const i=this.binarizer.getLuminanceSource().crop(e,t,n,r);return new h(this.binarizer.createBinarizer(i))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new h(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new h(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch(e){return""}}}class f extends c{static getChecksumInstance(){return new f}}f.kind="ChecksumException";class p{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class m{static arraycopy(e,t,n,r,i){for(;i--;)n[r++]=e[t++]}static currentTimeMillis(){return Date.now()}}class g extends c{}g.kind="IndexOutOfBoundsException";class y extends g{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;super(t),this.index=e,this.message=t}}y.kind="ArrayIndexOutOfBoundsException";class v{static fill(e,t){for(let n=0,r=e.length;n<r;n++)e[n]=t}static fillWithin(e,t,n,r){v.rangeCheck(e.length,t,n);for(let i=t;i<n;i++)e[i]=r}static rangeCheck(e,t,n){if(t>n)throw new d("fromIndex("+t+") > toIndex("+n+")");if(t<0)throw new y(t);if(n>e)throw new y(n)}static asList(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t}static create(e,t,n){return Array.from({length:e}).map(e=>Array.from({length:t}).fill(n))}static createInt32Array(e,t,n){return Array.from({length:e}).map(e=>Int32Array.from({length:t}).fill(n))}static equals(e,t){if(!e)return!1;if(!t)return!1;if(!e.length)return!1;if(!t.length)return!1;if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}static hashCode(e){if(null===e)return 0;let t=1;for(const n of e)t=31*t+n;return t}static fillUint8Array(e,t){for(let n=0;n!==e.length;n++)e[n]=t}static copyOf(e,t){return e.slice(0,t)}static copyOfUint8Array(e,t){if(e.length<=t){const n=new Uint8Array(t);return n.set(e),n}return e.slice(0,t)}static copyOfRange(e,t,n){const r=n-t,i=new Int32Array(r);return m.arraycopy(e,t,i,0,r),i}static binarySearch(e,t,n){void 0===n&&(n=v.numberComparator);let r=0,i=e.length-1;for(;r<=i;){const s=i+r>>1,a=n(t,e[s]);if(a>0)r=s+1;else{if(!(a<0))return s;i=s-1}}return-r-1}static numberComparator(e,t){return e-t}}class w{static numberOfTrailingZeros(e){let t;if(0===e)return 32;let n=31;return t=e<<16,0!==t&&(n-=16,e=t),t=e<<8,0!==t&&(n-=8,e=t),t=e<<4,0!==t&&(n-=4,e=t),t=e<<2,0!==t&&(n-=2,e=t),n-(e<<1>>>31)}static numberOfLeadingZeros(e){if(0===e)return 32;let t=1;return e>>>16===0&&(t+=16,e<<=16),e>>>24===0&&(t+=8,e<<=8),e>>>28===0&&(t+=4,e<<=4),e>>>30===0&&(t+=2,e<<=2),t-=e>>>31,t}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=(e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135,e+=e>>>8,63&(e+=e>>>16)}static truncDivision(e,t){return Math.trunc(e/t)}static parseInt(e){return parseInt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0)}}w.MIN_VALUE_32_BITS=-2147483648,w.MAX_VALUE=Number.MAX_SAFE_INTEGER;class b{constructor(e,t){void 0===e?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,this.bits=void 0===t||null===t?b.makeArray(e):t)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>32*this.bits.length){const t=b.makeArray(e);m.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}}get(e){return 0!==(this.bits[Math.floor(e/32)]&1<<(31&e))}set(e){this.bits[Math.floor(e/32)]|=1<<(31&e)}flip(e){this.bits[Math.floor(e/32)]^=1<<(31&e)}getNextSet(e){const t=this.size;if(e>=t)return t;const n=this.bits;let r=Math.floor(e/32),i=n[r];i&=~((1<<(31&e))-1);const s=n.length;for(;0===i;){if(++r===s)return t;i=n[r]}const a=32*r+w.numberOfTrailingZeros(i);return a>t?t:a}getNextUnset(e){const t=this.size;if(e>=t)return t;const n=this.bits;let r=Math.floor(e/32),i=~n[r];i&=~((1<<(31&e))-1);const s=n.length;for(;0===i;){if(++r===s)return t;i=~n[r]}const a=32*r+w.numberOfTrailingZeros(i);return a>t?t:a}setBulk(e,t){this.bits[Math.floor(e/32)]=t}setRange(e,t){if(t<e||e<0||t>this.size)throw new d;if(t===e)return;t--;const n=Math.floor(e/32),r=Math.floor(t/32),i=this.bits;for(let s=n;s<=r;s++){const a=(2<<(s<r?31:31&t))-(1<<(s>n?0:31&e));i[s]|=a}}clear(){const e=this.bits.length,t=this.bits;for(let n=0;n<e;n++)t[n]=0}isRange(e,t,n){if(t<e||e<0||t>this.size)throw new d;if(t===e)return!0;t--;const r=Math.floor(e/32),i=Math.floor(t/32),s=this.bits;for(let a=r;a<=i;a++){const o=(2<<(a<i?31:31&t))-(1<<(a>r?0:31&e))&4294967295;if((s[a]&o)!==(n?o:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++}appendBits(e,t){if(t<0||t>32)throw new d("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(let n=t;n>0;n--)this.appendBit(1===(e>>n-1&1))}appendBitArray(e){const t=e.size;this.ensureCapacity(this.size+t);for(let n=0;n<t;n++)this.appendBit(e.get(n))}xor(e){if(this.size!==e.size)throw new d("Sizes don't match");const t=this.bits;for(let n=0,r=t.length;n<r;n++)t[n]^=e.bits[n]}toBytes(e,t,n,r){for(let i=0;i<r;i++){let r=0;for(let t=0;t<8;t++)this.get(e)&&(r|=1<<7-t),e++;t[n+i]=r}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),n=t+1,r=this.bits;for(let i=0;i<n;i++){let n=r[i];n=n>>1&1431655765|(1431655765&n)<<1,n=n>>2&858993459|(858993459&n)<<2,n=n>>4&252645135|(252645135&n)<<4,n=n>>8&16711935|(16711935&n)<<8,n=n>>16&65535|(65535&n)<<16,e[t-i]=n}if(this.size!==32*n){const t=32*n-this.size;let r=e[0]>>>t;for(let i=1;i<n;i++){const n=e[i];r|=n<<32-t,e[i-1]=r,r=n>>>t}e[n-1]=r}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof b))return!1;const t=e;return this.size===t.size&&v.equals(this.bits,t.bits)}hashCode(){return 31*this.size+v.hashCode(this.bits)}toString(){let e="";for(let t=0,n=this.size;t<n;t++)0===(7&t)&&(e+=" "),e+=this.get(t)?"X":".";return e}clone(){return new b(this.size,this.bits.slice())}}!function(e){e[e.OTHER=0]="OTHER",e[e.PURE_BARCODE=1]="PURE_BARCODE",e[e.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",e[e.TRY_HARDER=3]="TRY_HARDER",e[e.CHARACTER_SET=4]="CHARACTER_SET",e[e.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",e[e.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",e[e.ASSUME_GS1=7]="ASSUME_GS1",e[e.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",e[e.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",e[e.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"}(o||(o={}));var x,S=o;class A extends c{static getFormatInstance(){return new A}}A.kind="FormatException",function(e){e[e.Cp437=0]="Cp437",e[e.ISO8859_1=1]="ISO8859_1",e[e.ISO8859_2=2]="ISO8859_2",e[e.ISO8859_3=3]="ISO8859_3",e[e.ISO8859_4=4]="ISO8859_4",e[e.ISO8859_5=5]="ISO8859_5",e[e.ISO8859_6=6]="ISO8859_6",e[e.ISO8859_7=7]="ISO8859_7",e[e.ISO8859_8=8]="ISO8859_8",e[e.ISO8859_9=9]="ISO8859_9",e[e.ISO8859_10=10]="ISO8859_10",e[e.ISO8859_11=11]="ISO8859_11",e[e.ISO8859_13=12]="ISO8859_13",e[e.ISO8859_14=13]="ISO8859_14",e[e.ISO8859_15=14]="ISO8859_15",e[e.ISO8859_16=15]="ISO8859_16",e[e.SJIS=16]="SJIS",e[e.Cp1250=17]="Cp1250",e[e.Cp1251=18]="Cp1251",e[e.Cp1252=19]="Cp1252",e[e.Cp1256=20]="Cp1256",e[e.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",e[e.UTF8=22]="UTF8",e[e.ASCII=23]="ASCII",e[e.Big5=24]="Big5",e[e.GB18030=25]="GB18030",e[e.EUC_KR=26]="EUC_KR"}(x||(x={}));class E{constructor(e,t,n){this.valueIdentifier=e,this.name=n,this.values="number"===typeof t?Int32Array.from([t]):t;for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];this.otherEncodingNames=i,E.VALUE_IDENTIFIER_TO_ECI.set(e,this),E.NAME_TO_ECI.set(n,this);const a=this.values;for(let o=0,l=a.length;o!==l;o++){const e=a[o];E.VALUES_TO_ECI.set(e,this)}for(const o of i)E.NAME_TO_ECI.set(o,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new A("incorect value");const t=E.VALUES_TO_ECI.get(e);if(void 0===t)throw new A("incorect value");return t}static getCharacterSetECIByName(e){const t=E.NAME_TO_ECI.get(e);if(void 0===t)throw new A("incorect value");return t}equals(e){if(!(e instanceof E))return!1;const t=e;return this.getName()===t.getName()}}E.VALUE_IDENTIFIER_TO_ECI=new Map,E.VALUES_TO_ECI=new Map,E.NAME_TO_ECI=new Map,E.Cp437=new E(x.Cp437,Int32Array.from([0,2]),"Cp437"),E.ISO8859_1=new E(x.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),E.ISO8859_2=new E(x.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),E.ISO8859_3=new E(x.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),E.ISO8859_4=new E(x.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),E.ISO8859_5=new E(x.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),E.ISO8859_6=new E(x.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),E.ISO8859_7=new E(x.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),E.ISO8859_8=new E(x.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),E.ISO8859_9=new E(x.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),E.ISO8859_10=new E(x.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),E.ISO8859_11=new E(x.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),E.ISO8859_13=new E(x.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),E.ISO8859_14=new E(x.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),E.ISO8859_15=new E(x.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),E.ISO8859_16=new E(x.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),E.SJIS=new E(x.SJIS,20,"SJIS","Shift_JIS"),E.Cp1250=new E(x.Cp1250,21,"Cp1250","windows-1250"),E.Cp1251=new E(x.Cp1251,22,"Cp1251","windows-1251"),E.Cp1252=new E(x.Cp1252,23,"Cp1252","windows-1252"),E.Cp1256=new E(x.Cp1256,24,"Cp1256","windows-1256"),E.UnicodeBigUnmarked=new E(x.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),E.UTF8=new E(x.UTF8,26,"UTF8","UTF-8"),E.ASCII=new E(x.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),E.Big5=new E(x.Big5,28,"Big5"),E.GB18030=new E(x.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),E.EUC_KR=new E(x.EUC_KR,30,"EUC_KR","EUC-KR");class N extends c{}N.kind="UnsupportedOperationException";class C{static decode(e,t){const n=this.encodingName(t);return this.customDecoder?this.customDecoder(e,n):"undefined"===typeof TextDecoder||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)}static shouldDecodeOnFallback(e){return!C.isBrowser()&&"ISO-8859-1"===e}static encode(e,t){const n=this.encodingName(t);return this.customEncoder?this.customEncoder(e,n):"undefined"===typeof TextEncoder?this.encodeFallback(e):(new TextEncoder).encode(e)}static isBrowser(){return"undefined"!==typeof window&&"[object Window]"==={}.toString.call(window)}static encodingName(e){return"string"===typeof e?e:e.getName()}static encodingCharacterSet(e){return e instanceof E?e:E.getCharacterSetECIByName(e)}static decodeFallback(e,t){const n=this.encodingCharacterSet(t);if(C.isDecodeFallbackSupported(n)){let t="";for(let n=0,r=e.length;n<r;n++){let r=e[n].toString(16);r.length<2&&(r="0"+r),t+="%"+r}return decodeURIComponent(t)}if(n.equals(E.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new N("Encoding ".concat(this.encodingName(t)," not supported by fallback."))}static isDecodeFallbackSupported(e){return e.equals(E.UTF8)||e.equals(E.ISO8859_1)||e.equals(E.ASCII)}static encodeFallback(e){const t=btoa(unescape(encodeURIComponent(e))).split(""),n=[];for(let r=0;r<t.length;r++)n.push(t[r].charCodeAt(0));return new Uint8Array(n)}}class _{static castAsNonUtf8Char(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=t?t.getName():this.ISO88591;return C.decode(new Uint8Array([e]),n)}static guessEncoding(e,t){if(null!==t&&void 0!==t&&void 0!==t.get(S.CHARACTER_SET))return t.get(S.CHARACTER_SET).toString();const n=e.length;let r=!0,i=!0,s=!0,a=0,o=0,l=0,c=0,u=0,d=0,h=0,f=0,p=0,m=0,g=0;const y=e.length>3&&239===e[0]&&187===e[1]&&191===e[2];for(let v=0;v<n&&(r||i||s);v++){const t=255&e[v];s&&(a>0?0===(128&t)?s=!1:a--:0!==(128&t)&&(0===(64&t)?s=!1:(a++,0===(32&t)?o++:(a++,0===(16&t)?l++:(a++,0===(8&t)?c++:s=!1))))),r&&(t>127&&t<160?r=!1:t>159&&(t<192||215===t||247===t)&&g++),i&&(u>0?t<64||127===t||t>252?i=!1:u--:128===t||160===t||t>239?i=!1:t>160&&t<224?(d++,f=0,h++,h>p&&(p=h)):t>127?(u++,h=0,f++,f>m&&(m=f)):(h=0,f=0))}return s&&a>0&&(s=!1),i&&u>0&&(i=!1),s&&(y||o+l+c>0)?_.UTF8:i&&(_.ASSUME_SHIFT_JIS||p>=3||m>=3)?_.SHIFT_JIS:r&&i?2===p&&2===d||10*g>=n?_.SHIFT_JIS:_.ISO88591:r?_.ISO88591:i?_.SHIFT_JIS:s?_.UTF8:_.PLATFORM_DEFAULT_ENCODING}static format(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let i=-1;function s(e,t,r,s,a,o){if("%%"===e)return"%";if(void 0===n[++i])return;e=s?parseInt(s.substr(1)):void 0;let l,c=a?parseInt(a.substr(1)):void 0;switch(o){case"s":l=n[i];break;case"c":l=n[i][0];break;case"f":l=parseFloat(n[i]).toFixed(e);break;case"p":l=parseFloat(n[i]).toPrecision(e);break;case"e":l=parseFloat(n[i]).toExponential(e);break;case"x":l=parseInt(n[i]).toString(c||16);break;case"d":l=parseFloat(parseInt(n[i],c||10).toPrecision(e)).toFixed(0)}l="object"===typeof l?JSON.stringify(l):(+l).toString(c);let u=parseInt(r),d=r&&r[0]+""==="0"?"0":" ";for(;l.length<u;)l=void 0!==t?l+d:d+l;return l}let a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,s)}static getBytes(e,t){return C.encode(e,t)}static getCharCode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.charCodeAt(t)}static getCharAt(e){return String.fromCharCode(e)}}_.SHIFT_JIS=E.SJIS.getName(),_.GB2312="GB2312",_.ISO88591=E.ISO8859_1.getName(),_.EUC_JP="EUC_JP",_.UTF8=E.UTF8.getName(),_.PLATFORM_DEFAULT_ENCODING=_.UTF8,_.ASSUME_SHIFT_JIS=!1;class T{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return"string"===typeof e?this.value+=e.toString():this.encoding?this.value+=_.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,t,n){for(let r=t;t<t+n;r++)this.append(e[r]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)}substring(e,t){return this.value.substring(e,t)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+t.length)}}class I{constructor(e,t,n,r){if(this.width=e,this.height=t,this.rowSize=n,this.bits=r,void 0!==t&&null!==t||(t=e),this.height=t,e<1||t<1)throw new d("Both dimensions must be greater than 0");void 0!==n&&null!==n||(n=Math.floor((e+31)/32)),this.rowSize=n,void 0!==r&&null!==r||(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const t=e.length,n=e[0].length,r=new I(n,t);for(let i=0;i<t;i++){const t=e[i];for(let e=0;e<n;e++)t[e]&&r.set(e,i)}return r}static parseFromString(e,t,n){if(null===e)throw new d("stringRepresentation cannot be null");const r=new Array(e.length);let i=0,s=0,a=-1,o=0,l=0;for(;l<e.length;)if("\n"===e.charAt(l)||"\r"===e.charAt(l)){if(i>s){if(-1===a)a=i-s;else if(i-s!==a)throw new d("row lengths do not match");s=i,o++}l++}else if(e.substring(l,l+t.length)===t)l+=t.length,r[i]=!0,i++;else{if(e.substring(l,l+n.length)!==n)throw new d("illegal character encountered: "+e.substring(l));l+=n.length,r[i]=!1,i++}if(i>s){if(-1===a)a=i-s;else if(i-s!==a)throw new d("row lengths do not match");o++}const c=new I(a,o);for(let u=0;u<i;u++)r[u]&&c.set(Math.floor(u%a),Math.floor(u/a));return c}get(e,t){const n=t*this.rowSize+Math.floor(e/32);return 0!==(this.bits[n]>>>(31&e)&1)}set(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(31&e)&4294967295}unset(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(31&e)&4294967295)}flip(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(31&e)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new d("input matrix dimensions do not match");const t=new b(Math.floor(this.width/32)+1),n=this.rowSize,r=this.bits;for(let i=0,s=this.height;i<s;i++){const s=i*n,a=e.getRow(i,t).getBitArray();for(let e=0;e<n;e++)r[s+e]^=a[e]}}clear(){const e=this.bits,t=e.length;for(let n=0;n<t;n++)e[n]=0}setRegion(e,t,n,r){if(t<0||e<0)throw new d("Left and top must be nonnegative");if(r<1||n<1)throw new d("Height and width must be at least 1");const i=e+n,s=t+r;if(s>this.height||i>this.width)throw new d("The region must fit inside the matrix");const a=this.rowSize,o=this.bits;for(let l=t;l<s;l++){const t=l*a;for(let n=e;n<i;n++)o[t+Math.floor(n/32)]|=1<<(31&n)&4294967295}}getRow(e,t){null===t||void 0===t||t.getSize()<this.width?t=new b(this.width):t.clear();const n=this.rowSize,r=this.bits,i=e*n;for(let s=0;s<n;s++)t.setBulk(32*s,r[i+s]);return t}setRow(e,t){m.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),t=this.getHeight();let n=new b(e),r=new b(e);for(let i=0,s=Math.floor((t+1)/2);i<s;i++)n=this.getRow(i,n),r=this.getRow(t-1-i,r),n.reverse(),r.reverse(),this.setRow(i,r),this.setRow(t-1-i,n)}getEnclosingRectangle(){const e=this.width,t=this.height,n=this.rowSize,r=this.bits;let i=e,s=t,a=-1,o=-1;for(let l=0;l<t;l++)for(let e=0;e<n;e++){const t=r[l*n+e];if(0!==t){if(l<s&&(s=l),l>o&&(o=l),32*e<i){let n=0;for(;0===(t<<31-n&4294967295);)n++;32*e+n<i&&(i=32*e+n)}if(32*e+31>a){let n=31;for(;t>>>n===0;)n--;32*e+n>a&&(a=32*e+n)}}}return a<i||o<s?null:Int32Array.from([i,s,a-i+1,o-s+1])}getTopLeftOnBit(){const e=this.rowSize,t=this.bits;let n=0;for(;n<t.length&&0===t[n];)n++;if(n===t.length)return null;const r=n/e;let i=n%e*32;const s=t[n];let a=0;for(;0===(s<<31-a&4294967295);)a++;return i+=a,Int32Array.from([i,r])}getBottomRightOnBit(){const e=this.rowSize,t=this.bits;let n=t.length-1;for(;n>=0&&0===t[n];)n--;if(n<0)return null;const r=Math.floor(n/e);let i=32*Math.floor(n%e);const s=t[n];let a=31;for(;s>>>a===0;)a--;return i+=a,Int32Array.from([i,r])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof I))return!1;const t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&v.equals(this.bits,t.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+v.hashCode(this.bits),e}toString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"X ",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"  ",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\n";return this.buildToString(e,t,n)}buildToString(e,t,n){let r=new T;for(let i=0,s=this.height;i<s;i++){for(let n=0,s=this.width;n<s;n++)r.append(this.get(n,i)?e:t);r.append(n)}return r.toString()}clone(){return new I(this.width,this.height,this.rowSize,this.bits.slice())}}class k extends c{static getNotFoundInstance(){return new k}}k.kind="NotFoundException";class P extends p{constructor(e){super(e),this.luminances=P.EMPTY,this.buckets=new Int32Array(P.LUMINANCE_BUCKETS)}getBlackRow(e,t){const n=this.getLuminanceSource(),r=n.getWidth();void 0===t||null===t||t.getSize()<r?t=new b(r):t.clear(),this.initArrays(r);const i=n.getRow(e,this.luminances),s=this.buckets;for(let o=0;o<r;o++)s[(255&i[o])>>P.LUMINANCE_SHIFT]++;const a=P.estimateBlackPoint(s);if(r<3)for(let o=0;o<r;o++)(255&i[o])<a&&t.set(o);else{let e=255&i[0],n=255&i[1];for(let s=1;s<r-1;s++){const r=255&i[s+1];(4*n-e-r)/2<a&&t.set(s),e=n,n=r}}return t}getBlackMatrix(){const e=this.getLuminanceSource(),t=e.getWidth(),n=e.getHeight(),r=new I(t,n);this.initArrays(t);const i=this.buckets;for(let o=1;o<5;o++){const r=Math.floor(n*o/5),s=e.getRow(r,this.luminances),a=Math.floor(4*t/5);for(let e=Math.floor(t/5);e<a;e++)i[(255&s[e])>>P.LUMINANCE_SHIFT]++}const s=P.estimateBlackPoint(i),a=e.getMatrix();for(let o=0;o<n;o++){const e=o*t;for(let n=0;n<t;n++)(255&a[e+n])<s&&r.set(n,o)}return r}createBinarizer(e){return new P(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const t=this.buckets;for(let n=0;n<P.LUMINANCE_BUCKETS;n++)t[n]=0}static estimateBlackPoint(e){const t=e.length;let n=0,r=0,i=0;for(let c=0;c<t;c++)e[c]>i&&(r=c,i=e[c]),e[c]>n&&(n=e[c]);let s=0,a=0;for(let c=0;c<t;c++){const t=c-r,n=e[c]*t*t;n>a&&(s=c,a=n)}if(r>s){const e=r;r=s,s=e}if(s-r<=t/16)throw new k;let o=s-1,l=-1;for(let c=s-1;c>r;c--){const t=c-r,i=t*t*(s-c)*(n-e[c]);i>l&&(o=c,l=i)}return o<<P.LUMINANCE_SHIFT}}P.LUMINANCE_BITS=5,P.LUMINANCE_SHIFT=8-P.LUMINANCE_BITS,P.LUMINANCE_BUCKETS=1<<P.LUMINANCE_BITS,P.EMPTY=Uint8ClampedArray.from([0]);class R extends P{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(null!==this.matrix)return this.matrix;const e=this.getLuminanceSource(),t=e.getWidth(),n=e.getHeight();if(t>=R.MINIMUM_DIMENSION&&n>=R.MINIMUM_DIMENSION){const r=e.getMatrix();let i=t>>R.BLOCK_SIZE_POWER;0!==(t&R.BLOCK_SIZE_MASK)&&i++;let s=n>>R.BLOCK_SIZE_POWER;0!==(n&R.BLOCK_SIZE_MASK)&&s++;const a=R.calculateBlackPoints(r,i,s,t,n),o=new I(t,n);R.calculateThresholdForBlock(r,i,s,t,n,a,o),this.matrix=o}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new R(e)}static calculateThresholdForBlock(e,t,n,r,i,s,a){const o=i-R.BLOCK_SIZE,l=r-R.BLOCK_SIZE;for(let c=0;c<n;c++){let i=c<<R.BLOCK_SIZE_POWER;i>o&&(i=o);const u=R.cap(c,2,n-3);for(let n=0;n<t;n++){let o=n<<R.BLOCK_SIZE_POWER;o>l&&(o=l);const c=R.cap(n,2,t-3);let d=0;for(let e=-2;e<=2;e++){const t=s[u+e];d+=t[c-2]+t[c-1]+t[c]+t[c+1]+t[c+2]}const h=d/25;R.thresholdBlock(e,o,i,h,r,a)}}}static cap(e,t,n){return e<t?t:e>n?n:e}static thresholdBlock(e,t,n,r,i,s){for(let a=0,o=n*i+t;a<R.BLOCK_SIZE;a++,o+=i)for(let i=0;i<R.BLOCK_SIZE;i++)(255&e[o+i])<=r&&s.set(t+i,n+a)}static calculateBlackPoints(e,t,n,r,i){const s=i-R.BLOCK_SIZE,a=r-R.BLOCK_SIZE,o=new Array(n);for(let l=0;l<n;l++){o[l]=new Int32Array(t);let n=l<<R.BLOCK_SIZE_POWER;n>s&&(n=s);for(let i=0;i<t;i++){let t=i<<R.BLOCK_SIZE_POWER;t>a&&(t=a);let s=0,c=255,u=0;for(let i=0,a=n*r+t;i<R.BLOCK_SIZE;i++,a+=r){for(let t=0;t<R.BLOCK_SIZE;t++){const n=255&e[a+t];s+=n,n<c&&(c=n),n>u&&(u=n)}if(u-c>R.MIN_DYNAMIC_RANGE)for(i++,a+=r;i<R.BLOCK_SIZE;i++,a+=r)for(let t=0;t<R.BLOCK_SIZE;t++)s+=255&e[a+t]}let d=s>>2*R.BLOCK_SIZE_POWER;if(u-c<=R.MIN_DYNAMIC_RANGE&&(d=c/2,l>0&&i>0)){const e=(o[l-1][i]+2*o[l][i-1]+o[l-1][i-1])/4;c<e&&(d=e)}o[l][i]=d}}return o}}R.BLOCK_SIZE_POWER=3,R.BLOCK_SIZE=1<<R.BLOCK_SIZE_POWER,R.BLOCK_SIZE_MASK=R.BLOCK_SIZE-1,R.MINIMUM_DIMENSION=5*R.BLOCK_SIZE,R.MIN_DYNAMIC_RANGE=24;class D{constructor(e,t){this.width=e,this.height=t}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,t,n,r){throw new N("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new N("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new N("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let t=new T;for(let n=0;n<this.height;n++){const r=this.getRow(n,e);for(let e=0;e<this.width;e++){const n=255&r[e];let i;i=n<64?"#":n<128?"+":n<192?".":" ",t.append(i)}t.append("\n")}return t.toString()}}class O extends D{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,t){const n=this.delegate.getRow(e,t),r=this.getWidth();for(let i=0;i<r;i++)n[i]=255-(255&n[i]);return n}getMatrix(){const e=this.delegate.getMatrix(),t=this.getWidth()*this.getHeight(),n=new Uint8ClampedArray(t);for(let r=0;r<t;r++)n[r]=255-(255&e[r]);return n}isCropSupported(){return this.delegate.isCropSupported()}crop(e,t,n,r){return new O(this.delegate.crop(e,t,n,r))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new O(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new O(this.delegate.rotateCounterClockwise45())}}class L extends D{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=L.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const t=e.getContext("2d").getImageData(0,0,e.width,e.height);return L.toGrayscaleBuffer(t.data,e.width,e.height)}static toGrayscaleBuffer(e,t,n){const r=new Uint8ClampedArray(t*n);for(let i=0,s=0,a=e.length;i<a;i+=4,s++){let t;t=0===e[i+3]?255:306*e[i]+601*e[i+1]+117*e[i+2]+512>>10,r[s]=t}return r}getRow(e,t){if(e<0||e>=this.getHeight())throw new d("Requested row is outside the image: "+e);const n=this.getWidth(),r=e*n;return null===t?t=this.buffer.slice(r,r+n):(t.length<n&&(t=new Uint8ClampedArray(n)),t.set(this.buffer.slice(r,r+n))),t}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,t,n,r){return super.crop(e,t,n,r),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(null===this.tempCanvasElement){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const t=this.getTempCanvasElement(),n=t.getContext("2d"),r=e*L.DEGREE_TO_RADIANS,i=this.canvas.width,s=this.canvas.height,a=Math.ceil(Math.abs(Math.cos(r))*i+Math.abs(Math.sin(r))*s),o=Math.ceil(Math.abs(Math.sin(r))*i+Math.abs(Math.cos(r))*s);return t.width=a,t.height=o,n.translate(a/2,o/2),n.rotate(r),n.drawImage(this.canvas,i/-2,s/-2),this.buffer=L.makeBufferFromCanvasImageData(t),this}invert(){return new O(this)}}L.DEGREE_TO_RADIANS=Math.PI/180;class M{constructor(e,t,n){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=n||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var F,j=(globalThis||n.g||self||window?(globalThis||n.g||self||window||void 0).__awaiter:void 0)||function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,s){function a(e){try{l(r.next(e))}catch(t){s(t)}}function o(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){e.done?n(e.value):i(e.value).then(a,o)}l((r=r.apply(e,t||[])).next())})};class B{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2?arguments[2]:void 0;this.reader=e,this.timeBetweenScansMillis=t,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return"undefined"!==typeof navigator}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!(!this.isMediaDevicesSuported||!navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return j(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),t=[];for(const n of e){const e="video"===n.kind?"videoinput":n.kind;if("videoinput"!==e)continue;const r={deviceId:n.deviceId||n.id,label:n.label||"Video device ".concat(t.length+1),kind:e,groupId:n.groupId};t.push(r)}return t})}getVideoInputDevices(){return j(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(e=>new M(e.deviceId,e.label))})}findDeviceById(e){return j(this,void 0,void 0,function*(){const t=yield this.listVideoInputDevices();return t?t.find(t=>t.deviceId===e):null})}decodeFromInputVideoDevice(e,t){return j(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,t)})}decodeOnceFromVideoDevice(e,t){return j(this,void 0,void 0,function*(){let n;this.reset(),n=e?{deviceId:{exact:e}}:{facingMode:"environment"};const r={video:n};return yield this.decodeOnceFromConstraints(r,t)})}decodeOnceFromConstraints(e,t){return j(this,void 0,void 0,function*(){const n=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(n,t)})}decodeOnceFromStream(e,t){return j(this,void 0,void 0,function*(){this.reset();const n=yield this.attachStreamToVideo(e,t);return yield this.decodeOnce(n)})}decodeFromInputVideoDeviceContinuously(e,t,n){return j(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,t,n)})}decodeFromVideoDevice(e,t,n){return j(this,void 0,void 0,function*(){let r;r=e?{deviceId:{exact:e}}:{facingMode:"environment"};const i={video:r};return yield this.decodeFromConstraints(i,t,n)})}decodeFromConstraints(e,t,n){return j(this,void 0,void 0,function*(){const r=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(r,t,n)})}decodeFromStream(e,t,n){return j(this,void 0,void 0,function*(){this.reset();const r=yield this.attachStreamToVideo(e,t);return yield this.decodeContinuously(r,n)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,t){return j(this,void 0,void 0,function*(){const n=this.prepareVideoElement(t);return this.addVideoSource(n,e),this.videoElement=n,this.stream=e,yield this.playVideoOnLoadAsync(n),n})}playVideoOnLoadAsync(e){return new Promise((t,n)=>this.playVideoOnLoad(e,()=>t()))}playVideoOnLoad(e,t){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return j(this,void 0,void 0,function*(){if(this.isVideoPlaying(e))console.warn("Trying to play video that is already playing.");else try{yield e.play()}catch(t){console.warn("It was not possible to play the video.")}})}getMediaElement(e,t){const n=document.getElementById(e);if(!n)throw new u("element with id '".concat(e,"' not found"));if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new u("element with id '".concat(e,"' must be an ").concat(t," element"));return n}decodeFromImage(e,t){if(!e&&!t)throw new u("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)}decodeFromVideo(e,t){if(!e&&!t)throw new u("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,t,n){if(void 0===e&&void 0===t)throw new u("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,n):this.decodeFromVideoElementContinuously(e,n)}decodeFromImageElement(e){if(!e)throw new u("An image element must be provided.");this.reset();const t=this.prepareImageElement(e);let n;return this.imageElement=t,n=this.isImageLoaded(t)?this.decodeOnce(t,!1,!0):this._decodeOnLoadImage(t),n}decodeFromVideoElement(e){const t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)}decodeFromVideoElementContinuously(e,t){const n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,t)}_decodeFromVideoElementSetup(e){if(!e)throw new u("A video element must be provided.");this.reset();const t=this.prepareVideoElement(e);return this.videoElement=t,t}decodeFromImageUrl(e){if(!e)throw new u("An URL must be provided.");this.reset();const t=this.prepareImageElement();this.imageElement=t;const n=this._decodeOnLoadImage(t);return t.src=e,n}decodeFromVideoUrl(e){if(!e)throw new u("An URL must be provided.");this.reset();const t=this.prepareVideoElement(),n=this.decodeFromVideoElement(t);return t.src=e,n}decodeFromVideoUrlContinuously(e,t){if(!e)throw new u("An URL must be provided.");this.reset();const n=this.prepareVideoElement(),r=this.decodeFromVideoElementContinuously(n,t);return n.src=e,r}_decodeOnLoadImage(e){return new Promise((t,n)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(t,n),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return j(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,t){return j(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,t)})}isImageLoaded(e){return!!e.complete&&0!==e.naturalWidth}prepareImageElement(e){let t;return"undefined"===typeof e&&(t=document.createElement("img"),t.width=200,t.height=200),"string"===typeof e&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t}prepareVideoElement(e){let t;return e||"undefined"===typeof document||(t=document.createElement("video"),t.width=200,t.height=200),"string"===typeof e&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t}decodeOnce(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._stopAsyncDecode=!1;const r=(i,s)=>{if(this._stopAsyncDecode)return s(new k("Video stream has ended before any code could be detected.")),void(this._stopAsyncDecode=void 0);try{i(this.decode(e))}catch(a){if(t&&a instanceof k||(a instanceof f||a instanceof A)&&n)return setTimeout(r,this._timeBetweenDecodingAttempts,i,s);s(a)}};return new Promise((e,t)=>r(e,t))}decodeContinuously(e,t){this._stopContinuousDecode=!1;const n=()=>{if(this._stopContinuousDecode)this._stopContinuousDecode=void 0;else try{const r=this.decode(e);t(r,null),setTimeout(n,this.timeBetweenScansMillis)}catch(r){t(null,r),(r instanceof f||r instanceof A||r instanceof k)&&setTimeout(n,this._timeBetweenDecodingAttempts)}};n()}decode(e){const t=this.createBinaryBitmap(e);return this.decodeBitmap(t)}_isHTMLVideoElement(e){return 0!==e.videoWidth}drawFrameOnCanvas(e,t,n){t||(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n||(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}drawImageOnCanvas(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.captureCanvasContext;t||(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n||(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const t=this.getCaptureCanvas(e),n=new L(t),r=new R(n);return new h(r)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const t=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=t}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if("undefined"===typeof document)return this._destroyCaptureCanvas(),null;const t=document.createElement("canvas");let n,r;return"undefined"!==typeof e&&(e instanceof HTMLVideoElement?(n=e.videoWidth,r=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,r=e.naturalHeight||e.height)),t.style.width=n+"px",t.style.height=r+"px",t.width=n,t.height=r,t}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),!1===this._stopAsyncDecode&&this.stopAsyncDecode(),!1===this._stopContinuousDecode&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&("undefined"!==typeof this.videoEndedListener&&this.videoElement.removeEventListener("ended",this.videoEndedListener),"undefined"!==typeof this.videoPlayingEventListener&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),"undefined"!==typeof this.videoCanPlayListener&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(void 0!==this.imageLoadedListener&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,t){try{e.srcObject=t}catch(n){e.src=URL.createObjectURL(t)}}cleanVideoSource(e){try{e.srcObject=null}catch(t){e.src=""}this.videoElement.removeAttribute("src")}}class U{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null==t?0:8*t.length,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:m.currentTimeMillis();this.text=e,this.rawBytes=t,this.numBits=n,this.resultPoints=r,this.format=i,this.timestamp=s,this.text=e,this.rawBytes=t,this.numBits=void 0===n||null===n?null===t||void 0===t?0:8*t.length:n,this.resultPoints=r,this.format=i,this.resultMetadata=null,this.timestamp=void 0===s||null===s?m.currentTimeMillis():s}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,t){null===this.resultMetadata&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)}putAllMetadata(e){null!==e&&(null===this.resultMetadata?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){const t=this.resultPoints;if(null===t)this.resultPoints=e;else if(null!==e&&e.length>0){const n=new Array(t.length+e.length);m.arraycopy(t,0,n,0,t.length),m.arraycopy(e,0,n,t.length,e.length),this.resultPoints=n}}getTimestamp(){return this.timestamp}toString(){return this.text}}!function(e){e[e.AZTEC=0]="AZTEC",e[e.CODABAR=1]="CODABAR",e[e.CODE_39=2]="CODE_39",e[e.CODE_93=3]="CODE_93",e[e.CODE_128=4]="CODE_128",e[e.DATA_MATRIX=5]="DATA_MATRIX",e[e.EAN_8=6]="EAN_8",e[e.EAN_13=7]="EAN_13",e[e.ITF=8]="ITF",e[e.MAXICODE=9]="MAXICODE",e[e.PDF_417=10]="PDF_417",e[e.QR_CODE=11]="QR_CODE",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"}(F||(F={}));var z,V=F;!function(e){e[e.OTHER=0]="OTHER",e[e.ORIENTATION=1]="ORIENTATION",e[e.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",e[e.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",e[e.ISSUE_NUMBER=4]="ISSUE_NUMBER",e[e.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",e[e.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",e[e.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",e[e.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",e[e.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",e[e.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"}(z||(z={}));var H,W,q,G,K,Y,X=z;class Q{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1;this.rawBytes=e,this.text=t,this.byteSegments=n,this.ecLevel=r,this.structuredAppendSequenceNumber=i,this.structuredAppendParity=s,this.numBits=void 0===e||null===e?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class J{exp(e){return this.expTable[e]}log(e){if(0===e)throw new d;return this.logTable[e]}static addOrSubtract(e,t){return e^t}}class Z{constructor(e,t){if(0===t.length)throw new d;this.field=e;const n=t.length;if(n>1&&0===t[0]){let e=1;for(;e<n&&0===t[e];)e++;e===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-e),m.arraycopy(t,e,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(0===e)return this.getCoefficient(0);const t=this.coefficients;let n;if(1===e){n=0;for(let e=0,r=t.length;e!==r;e++){const r=t[e];n=J.addOrSubtract(n,r)}return n}n=t[0];const r=t.length,i=this.field;for(let s=1;s<r;s++)n=J.addOrSubtract(i.multiply(e,n),t[s]);return n}addOrSubtract(e){if(!this.field.equals(e.field))throw new d("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,n=e.coefficients;if(t.length>n.length){const e=t;t=n,n=e}let r=new Int32Array(n.length);const i=n.length-t.length;m.arraycopy(n,0,r,0,i);for(let s=i;s<n.length;s++)r[s]=J.addOrSubtract(t[s-i],n[s]);return new Z(this.field,r)}multiply(e){if(!this.field.equals(e.field))throw new d("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const t=this.coefficients,n=t.length,r=e.coefficients,i=r.length,s=new Int32Array(n+i-1),a=this.field;for(let o=0;o<n;o++){const e=t[o];for(let t=0;t<i;t++)s[o+t]=J.addOrSubtract(s[o+t],a.multiply(e,r[t]))}return new Z(a,s)}multiplyScalar(e){if(0===e)return this.field.getZero();if(1===e)return this;const t=this.coefficients.length,n=this.field,r=new Int32Array(t),i=this.coefficients;for(let s=0;s<t;s++)r[s]=n.multiply(i[s],e);return new Z(n,r)}multiplyByMonomial(e,t){if(e<0)throw new d;if(0===t)return this.field.getZero();const n=this.coefficients,r=n.length,i=new Int32Array(r+e),s=this.field;for(let a=0;a<r;a++)i[a]=s.multiply(n[a],t);return new Z(s,i)}divide(e){if(!this.field.equals(e.field))throw new d("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new d("Divide by 0");const t=this.field;let n=t.getZero(),r=this;const i=e.getCoefficient(e.getDegree()),s=t.inverse(i);for(;r.getDegree()>=e.getDegree()&&!r.isZero();){const i=r.getDegree()-e.getDegree(),a=t.multiply(r.getCoefficient(r.getDegree()),s),o=e.multiplyByMonomial(i,a),l=t.buildMonomial(i,a);n=n.addOrSubtract(l),r=r.addOrSubtract(o)}return[n,r]}toString(){let e="";for(let t=this.getDegree();t>=0;t--){let n=this.getCoefficient(t);if(0!==n){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),0===t||1!==n){const t=this.field.log(n);0===t?e+="1":1===t?e+="a":(e+="a^",e+=t)}0!==t&&(1===t?e+="x":(e+="x^",e+=t))}}return e}}class $ extends c{}$.kind="ArithmeticException";class ee extends J{constructor(e,t,n){super(),this.primitive=e,this.size=t,this.generatorBase=n;const r=new Int32Array(t);let i=1;for(let a=0;a<t;a++)r[a]=i,i*=2,i>=t&&(i^=e,i&=t-1);this.expTable=r;const s=new Int32Array(t);for(let a=0;a<t-1;a++)s[r[a]]=a;this.logTable=s,this.zero=new Z(this,Int32Array.from([0])),this.one=new Z(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new d;if(0===t)return this.zero;const n=new Int32Array(e+1);return n[0]=t,new Z(this,n)}inverse(e){if(0===e)throw new $;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+w.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}ee.AZTEC_DATA_12=new ee(4201,4096,1),ee.AZTEC_DATA_10=new ee(1033,1024,1),ee.AZTEC_DATA_6=new ee(67,64,1),ee.AZTEC_PARAM=new ee(19,16,1),ee.QR_CODE_FIELD_256=new ee(285,256,0),ee.DATA_MATRIX_FIELD_256=new ee(301,256,1),ee.AZTEC_DATA_8=ee.DATA_MATRIX_FIELD_256,ee.MAXICODE_FIELD_64=ee.AZTEC_DATA_6;class te extends c{}te.kind="ReedSolomonException";class ne extends c{}ne.kind="IllegalStateException";class re{constructor(e){this.field=e}decode(e,t){const n=this.field,r=new Z(n,e),i=new Int32Array(t);let s=!0;for(let h=0;h<t;h++){const e=r.evaluateAt(n.exp(h+n.getGeneratorBase()));i[i.length-1-h]=e,0!==e&&(s=!1)}if(s)return;const a=new Z(n,i),o=this.runEuclideanAlgorithm(n.buildMonomial(t,1),a,t),l=o[0],c=o[1],u=this.findErrorLocations(l),d=this.findErrorMagnitudes(c,u);for(let h=0;h<u.length;h++){const t=e.length-1-n.log(u[h]);if(t<0)throw new te("Bad error location");e[t]=ee.addOrSubtract(e[t],d[h])}}runEuclideanAlgorithm(e,t,n){if(e.getDegree()<t.getDegree()){const n=e;e=t,t=n}const r=this.field;let i=e,s=t,a=r.getZero(),o=r.getOne();for(;s.getDegree()>=(n/2|0);){let e=i,t=a;if(i=s,a=o,i.isZero())throw new te("r_{i-1} was zero");s=e;let n=r.getZero();const l=i.getCoefficient(i.getDegree()),c=r.inverse(l);for(;s.getDegree()>=i.getDegree()&&!s.isZero();){const e=s.getDegree()-i.getDegree(),t=r.multiply(s.getCoefficient(s.getDegree()),c);n=n.addOrSubtract(r.buildMonomial(e,t)),s=s.addOrSubtract(i.multiplyByMonomial(e,t))}if(o=n.multiply(a).addOrSubtract(t),s.getDegree()>=i.getDegree())throw new ne("Division algorithm failed to reduce polynomial?")}const l=o.getCoefficient(0);if(0===l)throw new te("sigmaTilde(0) was zero");const c=r.inverse(l);return[o.multiplyScalar(c),s.multiplyScalar(c)]}findErrorLocations(e){const t=e.getDegree();if(1===t)return Int32Array.from([e.getCoefficient(1)]);const n=new Int32Array(t);let r=0;const i=this.field;for(let s=1;s<i.getSize()&&r<t;s++)0===e.evaluateAt(s)&&(n[r]=i.inverse(s),r++);if(r!==t)throw new te("Error locator degree does not match number of roots");return n}findErrorMagnitudes(e,t){const n=t.length,r=new Int32Array(n),i=this.field;for(let s=0;s<n;s++){const a=i.inverse(t[s]);let o=1;for(let e=0;e<n;e++)if(s!==e){const n=i.multiply(t[e],a),r=0===(1&n)?1|n:-2&n;o=i.multiply(o,r)}r[s]=i.multiply(e.evaluateAt(a),i.inverse(o)),0!==i.getGeneratorBase()&&(r[s]=i.multiply(r[s],a))}return r}}!function(e){e[e.UPPER=0]="UPPER",e[e.LOWER=1]="LOWER",e[e.MIXED=2]="MIXED",e[e.DIGIT=3]="DIGIT",e[e.PUNCT=4]="PUNCT",e[e.BINARY=5]="BINARY"}(H||(H={}));class ie{decode(e){this.ddata=e;let t=e.getBits(),n=this.extractBits(t),r=this.correctBits(n),i=ie.convertBoolArrayToByteArray(r),s=ie.getEncodedData(r),a=new Q(i,s,null,null);return a.setNumBits(r.length),a}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let t=e.length,n=H.UPPER,r=H.UPPER,i="",s=0;for(;s<t;)if(r===H.BINARY){if(t-s<5)break;let a=ie.readCode(e,s,5);if(s+=5,0===a){if(t-s<11)break;a=ie.readCode(e,s,11)+31,s+=11}for(let n=0;n<a;n++){if(t-s<8){s=t;break}const n=ie.readCode(e,s,8);i+=_.castAsNonUtf8Char(n),s+=8}r=n}else{let a=r===H.DIGIT?4:5;if(t-s<a)break;let o=ie.readCode(e,s,a);s+=a;let l=ie.getCharacter(r,o);l.startsWith("CTRL_")?(n=r,r=ie.getTable(l.charAt(5)),"L"===l.charAt(6)&&(n=r)):(i+=l,r=n)}return i}static getTable(e){switch(e){case"L":return H.LOWER;case"P":return H.PUNCT;case"M":return H.MIXED;case"D":return H.DIGIT;case"B":return H.BINARY;default:return H.UPPER}}static getCharacter(e,t){switch(e){case H.UPPER:return ie.UPPER_TABLE[t];case H.LOWER:return ie.LOWER_TABLE[t];case H.MIXED:return ie.MIXED_TABLE[t];case H.PUNCT:return ie.PUNCT_TABLE[t];case H.DIGIT:return ie.DIGIT_TABLE[t];default:throw new ne("Bad table")}}correctBits(e){let t,n;this.ddata.getNbLayers()<=2?(n=6,t=ee.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,t=ee.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,t=ee.AZTEC_DATA_10):(n=12,t=ee.AZTEC_DATA_12);let r=this.ddata.getNbDatablocks(),i=e.length/n;if(i<r)throw new A;let s=e.length%n,a=new Int32Array(i);for(let h=0;h<i;h++,s+=n)a[h]=ie.readCode(e,s,n);try{new re(t).decode(a,i-r)}catch(d){throw new A(d)}let o=(1<<n)-1,l=0;for(let h=0;h<r;h++){let e=a[h];if(0===e||e===o)throw new A;1!==e&&e!==o-1||l++}let c=new Array(r*n-l),u=0;for(let h=0;h<r;h++){let e=a[h];if(1===e||e===o-1)c.fill(e>1,u,u+n-1),u+=n-1;else for(let t=n-1;t>=0;--t)c[u++]=0!==(e&1<<t)}return c}extractBits(e){let t=this.ddata.isCompact(),n=this.ddata.getNbLayers(),r=(t?11:14)+4*n,i=new Int32Array(r),s=new Array(this.totalBitsInLayer(n,t));if(t)for(let a=0;a<i.length;a++)i[a]=a;else{let e=r+1+2*w.truncDivision(w.truncDivision(r,2)-1,15),t=r/2,n=w.truncDivision(e,2);for(let r=0;r<t;r++){let e=r+w.truncDivision(r,15);i[t-r-1]=n-e-1,i[t+r]=n+e+1}}for(let a=0,o=0;a<n;a++){let l=4*(n-a)+(t?9:12),c=2*a,u=r-1-c;for(let t=0;t<l;t++){let n=2*t;for(let r=0;r<2;r++)s[o+n+r]=e.get(i[c+r],i[c+t]),s[o+2*l+n+r]=e.get(i[c+t],i[u-r]),s[o+4*l+n+r]=e.get(i[u-r],i[u-t]),s[o+6*l+n+r]=e.get(i[u-t],i[c+r])}o+=8*l}return s}static readCode(e,t,n){let r=0;for(let i=t;i<t+n;i++)r<<=1,e[i]&&(r|=1);return r}static readByte(e,t){let n=e.length-t;return n>=8?ie.readCode(e,t,8):ie.readCode(e,t,n)<<8-n}static convertBoolArrayToByteArray(e){let t=new Uint8Array((e.length+7)/8);for(let n=0;n<t.length;n++)t[n]=ie.readByte(e,8*n);return t}totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}ie.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],ie.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],ie.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","\t","\n","\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],ie.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],ie.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class se{constructor(){}static round(e){return NaN===e?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,t,n,r){const i=e-n,s=t-r;return Math.sqrt(i*i+s*s)}static sum(e){let t=0;for(let n=0,r=e.length;n!==r;n++)t+=e[n];return t}}class ae{static floatToIntBits(e){return e}}ae.MAX_VALUE=Number.MAX_SAFE_INTEGER;class oe{constructor(e,t){this.x=e,this.y=t}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof oe){const t=e;return this.x===t.x&&this.y===t.y}return!1}hashCode(){return 31*ae.floatToIntBits(this.x)+ae.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const t=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),r=this.distance(e[0],e[2]);let i,s,a;if(n>=t&&n>=r?(s=e[0],i=e[1],a=e[2]):r>=n&&r>=t?(s=e[1],i=e[0],a=e[2]):(s=e[2],i=e[0],a=e[1]),this.crossProductZ(i,s,a)<0){const e=i;i=a,a=e}e[0]=i,e[1]=s,e[2]=a}static distance(e,t){return se.distance(e.x,e.y,t.x,t.y)}static crossProductZ(e,t,n){const r=t.x,i=t.y;return(n.x-r)*(e.y-i)-(n.y-i)*(e.x-r)}}class le{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class ce extends le{constructor(e,t,n,r,i){super(e,t),this.compact=n,this.nbDatablocks=r,this.nbLayers=i}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class ue{constructor(e,t,n,r){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),void 0!==t&&null!==t||(t=ue.INIT_SIZE),void 0!==n&&null!==n||(n=e.getWidth()/2|0),void 0!==r&&null!==r||(r=e.getHeight()/2|0);const i=t/2|0;if(this.leftInit=n-i,this.rightInit=n+i,this.upInit=r-i,this.downInit=r+i,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new k}detect(){let e=this.leftInit,t=this.rightInit,n=this.upInit,r=this.downInit,i=!1,s=!0,a=!1,o=!1,l=!1,c=!1,u=!1;const d=this.width,h=this.height;for(;s;){s=!1;let f=!0;for(;(f||!o)&&t<d;)f=this.containsBlackPoint(n,r,t,!1),f?(t++,s=!0,o=!0):o||t++;if(t>=d){i=!0;break}let p=!0;for(;(p||!l)&&r<h;)p=this.containsBlackPoint(e,t,r,!0),p?(r++,s=!0,l=!0):l||r++;if(r>=h){i=!0;break}let m=!0;for(;(m||!c)&&e>=0;)m=this.containsBlackPoint(n,r,e,!1),m?(e--,s=!0,c=!0):c||e--;if(e<0){i=!0;break}let g=!0;for(;(g||!u)&&n>=0;)g=this.containsBlackPoint(e,t,n,!0),g?(n--,s=!0,u=!0):u||n--;if(n<0){i=!0;break}s&&(a=!0)}if(!i&&a){const i=t-e;let s=null;for(let t=1;null===s&&t<i;t++)s=this.getBlackPointOnSegment(e,r-t,e+t,r);if(null==s)throw new k;let a=null;for(let t=1;null===a&&t<i;t++)a=this.getBlackPointOnSegment(e,n+t,e+t,n);if(null==a)throw new k;let o=null;for(let e=1;null===o&&e<i;e++)o=this.getBlackPointOnSegment(t,n+e,t-e,n);if(null==o)throw new k;let l=null;for(let e=1;null===l&&e<i;e++)l=this.getBlackPointOnSegment(t,r-e,t-e,r);if(null==l)throw new k;return this.centerEdges(l,s,o,a)}throw new k}getBlackPointOnSegment(e,t,n,r){const i=se.round(se.distance(e,t,n,r)),s=(n-e)/i,a=(r-t)/i,o=this.image;for(let l=0;l<i;l++){const n=se.round(e+l*s),r=se.round(t+l*a);if(o.get(n,r))return new oe(n,r)}return null}centerEdges(e,t,n,r){const i=e.getX(),s=e.getY(),a=t.getX(),o=t.getY(),l=n.getX(),c=n.getY(),u=r.getX(),d=r.getY(),h=ue.CORR;return i<this.width/2?[new oe(u-h,d+h),new oe(a+h,o+h),new oe(l-h,c-h),new oe(i+h,s-h)]:[new oe(u+h,d+h),new oe(a+h,o-h),new oe(l-h,c+h),new oe(i-h,s-h)]}containsBlackPoint(e,t,n,r){const i=this.image;if(r){for(let s=e;s<=t;s++)if(i.get(s,n))return!0}else for(let s=e;s<=t;s++)if(i.get(n,s))return!0;return!1}}ue.INIT_SIZE=10,ue.CORR=1;class de{static checkAndNudgePoints(e,t){const n=e.getWidth(),r=e.getHeight();let i=!0;for(let s=0;s<t.length&&i;s+=2){const e=Math.floor(t[s]),a=Math.floor(t[s+1]);if(e<-1||e>n||a<-1||a>r)throw new k;i=!1,-1===e?(t[s]=0,i=!0):e===n&&(t[s]=n-1,i=!0),-1===a?(t[s+1]=0,i=!0):a===r&&(t[s+1]=r-1,i=!0)}i=!0;for(let s=t.length-2;s>=0&&i;s-=2){const e=Math.floor(t[s]),a=Math.floor(t[s+1]);if(e<-1||e>n||a<-1||a>r)throw new k;i=!1,-1===e?(t[s]=0,i=!0):e===n&&(t[s]=n-1,i=!0),-1===a?(t[s+1]=0,i=!0):a===r&&(t[s+1]=r-1,i=!0)}}}class he{constructor(e,t,n,r,i,s,a,o,l){this.a11=e,this.a21=t,this.a31=n,this.a12=r,this.a22=i,this.a32=s,this.a13=a,this.a23=o,this.a33=l}static quadrilateralToQuadrilateral(e,t,n,r,i,s,a,o,l,c,u,d,h,f,p,m){const g=he.quadrilateralToSquare(e,t,n,r,i,s,a,o);return he.squareToQuadrilateral(l,c,u,d,h,f,p,m).times(g)}transformPoints(e){const t=e.length,n=this.a11,r=this.a12,i=this.a13,s=this.a21,a=this.a22,o=this.a23,l=this.a31,c=this.a32,u=this.a33;for(let d=0;d<t;d+=2){const t=e[d],h=e[d+1],f=i*t+o*h+u;e[d]=(n*t+s*h+l)/f,e[d+1]=(r*t+a*h+c)/f}}transformPointsWithValues(e,t){const n=this.a11,r=this.a12,i=this.a13,s=this.a21,a=this.a22,o=this.a23,l=this.a31,c=this.a32,u=this.a33,d=e.length;for(let h=0;h<d;h++){const d=e[h],f=t[h],p=i*d+o*f+u;e[h]=(n*d+s*f+l)/p,t[h]=(r*d+a*f+c)/p}}static squareToQuadrilateral(e,t,n,r,i,s,a,o){const l=e-n+i-a,c=t-r+s-o;if(0===l&&0===c)return new he(n-e,i-n,e,r-t,s-r,t,0,0,1);{const u=n-i,d=a-i,h=r-s,f=o-s,p=u*f-d*h,m=(l*f-d*c)/p,g=(u*c-l*h)/p;return new he(n-e+m*n,a-e+g*a,e,r-t+m*r,o-t+g*o,t,m,g,1)}}static quadrilateralToSquare(e,t,n,r,i,s,a,o){return he.squareToQuadrilateral(e,t,n,r,i,s,a,o).buildAdjoint()}buildAdjoint(){return new he(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new he(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class fe extends de{sampleGrid(e,t,n,r,i,s,a,o,l,c,u,d,h,f,p,m,g,y,v){const w=he.quadrilateralToQuadrilateral(r,i,s,a,o,l,c,u,d,h,f,p,m,g,y,v);return this.sampleGridWithTransform(e,t,n,w)}sampleGridWithTransform(e,t,n,r){if(t<=0||n<=0)throw new k;const i=new I(t,n),s=new Float32Array(2*t);for(let o=0;o<n;o++){const t=s.length,n=o+.5;for(let e=0;e<t;e+=2)s[e]=e/2+.5,s[e+1]=n;r.transformPoints(s),de.checkAndNudgePoints(e,s);try{for(let n=0;n<t;n+=2)e.get(Math.floor(s[n]),Math.floor(s[n+1]))&&i.set(n/2,o)}catch(a){throw new k}}return i}}class pe{static setGridSampler(e){pe.gridSampler=e}static getInstance(){return pe.gridSampler}}pe.gridSampler=new fe;class me{constructor(e,t){this.x=e,this.y=t}toResultPoint(){return new oe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class ge{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let t=this.getMatrixCenter(),n=this.getBullsEyeCorners(t);if(e){let e=n[0];n[0]=n[2],n[2]=e}this.extractParameters(n);let r=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),i=this.getMatrixCornerPoints(n);return new ce(r,i,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new k;let t=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(n,t);let r=0;for(let s=0;s<4;s++){let e=n[(this.shift+s)%4];this.compact?(r<<=7,r+=e>>1&127):(r<<=10,r+=(e>>2&992)+(e>>1&31))}let i=this.getCorrectedParameterData(r,this.compact);this.compact?(this.nbLayers=1+(i>>6),this.nbDataBlocks=1+(63&i)):(this.nbLayers=1+(i>>11),this.nbDataBlocks=1+(2047&i))}getRotation(e,t){let n=0;e.forEach((e,r,i)=>{n=(e>>t-2<<1)+(1&e)+(n<<3)}),n=((1&n)<<11)+(n>>1);for(let r=0;r<4;r++)if(w.bitCount(n^this.EXPECTED_CORNER_BITS[r])<=2)return r;throw new k}getCorrectedParameterData(e,t){let n,r;t?(n=7,r=2):(n=10,r=4);let i=n-r,s=new Int32Array(n);for(let l=n-1;l>=0;--l)s[l]=15&e,e>>=4;try{new re(ee.AZTEC_PARAM).decode(s,i)}catch(o){throw new k}let a=0;for(let l=0;l<r;l++)a=(a<<4)+s[l];return a}getBullsEyeCorners(e){let t=e,n=e,r=e,i=e,s=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let e=this.getFirstDifferent(t,s,1,-1),a=this.getFirstDifferent(n,s,1,1),o=this.getFirstDifferent(r,s,-1,1),l=this.getFirstDifferent(i,s,-1,-1);if(this.nbCenterLayers>2){let n=this.distancePoint(l,e)*this.nbCenterLayers/(this.distancePoint(i,t)*(this.nbCenterLayers+2));if(n<.75||n>1.25||!this.isWhiteOrBlackRectangle(e,a,o,l))break}t=e,n=a,r=o,i=l,s=!s}if(5!==this.nbCenterLayers&&7!==this.nbCenterLayers)throw new k;this.compact=5===this.nbCenterLayers;let a=new oe(t.getX()+.5,t.getY()-.5),o=new oe(n.getX()+.5,n.getY()+.5),l=new oe(r.getX()-.5,r.getY()+.5),c=new oe(i.getX()-.5,i.getY()-.5);return this.expandSquare([a,o,l,c],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,t,n,r;try{let i=new ue(this.image).detect();e=i[0],t=i[1],n=i[2],r=i[3]}catch(a){let i=this.image.getWidth()/2,s=this.image.getHeight()/2;e=this.getFirstDifferent(new me(i+7,s-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new me(i+7,s+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new me(i-7,s+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new me(i-7,s-7),!1,-1,-1).toResultPoint()}let i=se.round((e.getX()+r.getX()+t.getX()+n.getX())/4),s=se.round((e.getY()+r.getY()+t.getY()+n.getY())/4);try{let a=new ue(this.image,15,i,s).detect();e=a[0],t=a[1],n=a[2],r=a[3]}catch(a){e=this.getFirstDifferent(new me(i+7,s-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new me(i+7,s+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new me(i-7,s+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new me(i-7,s-7),!1,-1,-1).toResultPoint()}return i=se.round((e.getX()+r.getX()+t.getX()+n.getX())/4),s=se.round((e.getY()+r.getY()+t.getY()+n.getY())/4),new me(i,s)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,t,n,r,i){let s=pe.getInstance(),a=this.getDimension(),o=a/2-this.nbCenterLayers,l=a/2+this.nbCenterLayers;return s.sampleGrid(e,a,a,o,o,l,o,l,l,o,l,t.getX(),t.getY(),n.getX(),n.getY(),r.getX(),r.getY(),i.getX(),i.getY())}sampleLine(e,t,n){let r=0,i=this.distanceResultPoint(e,t),s=i/n,a=e.getX(),o=e.getY(),l=s*(t.getX()-e.getX())/i,c=s*(t.getY()-e.getY())/i;for(let u=0;u<n;u++)this.image.get(se.round(a+u*l),se.round(o+u*c))&&(r|=1<<n-u-1);return r}isWhiteOrBlackRectangle(e,t,n,r){let i=3;e=new me(e.getX()-i,e.getY()+i),t=new me(t.getX()-i,t.getY()-i),n=new me(n.getX()+i,n.getY()-i),r=new me(r.getX()+i,r.getY()+i);let s=this.getColor(r,e);if(0===s)return!1;let a=this.getColor(e,t);return a===s&&(a=this.getColor(t,n),a===s&&(a=this.getColor(n,r),a===s))}getColor(e,t){let n=this.distancePoint(e,t),r=(t.getX()-e.getX())/n,i=(t.getY()-e.getY())/n,s=0,a=e.getX(),o=e.getY(),l=this.image.get(e.getX(),e.getY()),c=Math.ceil(n);for(let d=0;d<c;d++)a+=r,o+=i,this.image.get(se.round(a),se.round(o))!==l&&s++;let u=s/n;return u>.1&&u<.9?0:u<=.1===l?1:-1}getFirstDifferent(e,t,n,r){let i=e.getX()+n,s=e.getY()+r;for(;this.isValid(i,s)&&this.image.get(i,s)===t;)i+=n,s+=r;for(i-=n,s-=r;this.isValid(i,s)&&this.image.get(i,s)===t;)i+=n;for(i-=n;this.isValid(i,s)&&this.image.get(i,s)===t;)s+=r;return s-=r,new me(i,s)}expandSquare(e,t,n){let r=n/(2*t),i=e[0].getX()-e[2].getX(),s=e[0].getY()-e[2].getY(),a=(e[0].getX()+e[2].getX())/2,o=(e[0].getY()+e[2].getY())/2,l=new oe(a+r*i,o+r*s),c=new oe(a-r*i,o-r*s);return i=e[1].getX()-e[3].getX(),s=e[1].getY()-e[3].getY(),a=(e[1].getX()+e[3].getX())/2,o=(e[1].getY()+e[3].getY())/2,[l,new oe(a+r*i,o+r*s),c,new oe(a-r*i,o-r*s)]}isValid(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()}isValidPoint(e){let t=se.round(e.getX()),n=se.round(e.getY());return this.isValid(t,n)}distancePoint(e,t){return se.distance(e.getX(),e.getY(),t.getX(),t.getY())}distanceResultPoint(e,t){return se.distance(e.getX(),e.getY(),t.getX(),t.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(w.truncDivision(this.nbLayers-4,8)+1)+15}}class ye{decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=null,r=new ge(e.getBlackMatrix()),i=null,s=null;try{let e=r.detectMirror(!1);i=e.getPoints(),this.reportFoundResultPoints(t,i),s=(new ie).decode(e)}catch(c){n=c}if(null==s)try{let e=r.detectMirror(!0);i=e.getPoints(),this.reportFoundResultPoints(t,i),s=(new ie).decode(e)}catch(c){if(null!=n)throw n;throw c}let a=new U(s.getText(),s.getRawBytes(),s.getNumBits(),i,V.AZTEC,m.currentTimeMillis()),o=s.getByteSegments();null!=o&&a.putMetadata(X.BYTE_SEGMENTS,o);let l=s.getECLevel();return null!=l&&a.putMetadata(X.ERROR_CORRECTION_LEVEL,l),a}reportFoundResultPoints(e,t){if(null!=e){let n=e.get(S.NEED_RESULT_POINT_CALLBACK);null!=n&&t.forEach((e,t,r)=>{n.foundPossibleResultPoint(e)})}}reset(){}}class ve extends B{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;super(new ye,e)}}class we{decode(e,t){try{return this.doDecode(e,t)}catch(n){if(t&&!0===t.get(S.TRY_HARDER)&&e.isRotateSupported()){const n=e.rotateCounterClockwise(),r=this.doDecode(n,t),i=r.getResultMetadata();let s=270;null!==i&&!0===i.get(X.ORIENTATION)&&(s+=i.get(X.ORIENTATION)%360),r.putMetadata(X.ORIENTATION,s);const a=r.getResultPoints();if(null!==a){const e=n.getHeight();for(let t=0;t<a.length;t++)a[t]=new oe(e-a[t].getY()-1,a[t].getX())}return r}throw new k}}reset(){}doDecode(e,t){const n=e.getWidth(),r=e.getHeight();let i=new b(n);const s=t&&!0===t.get(S.TRY_HARDER),a=Math.max(1,r>>(s?8:5));let o;o=s?r:15;const l=Math.trunc(r/2);for(let d=0;d<o;d++){const s=Math.trunc((d+1)/2),o=l+a*(0===(1&d)?s:-s);if(o<0||o>=r)break;try{i=e.getBlackRow(o,i)}catch(c){continue}for(let e=0;e<2;e++){if(1===e&&(i.reverse(),t&&!0===t.get(S.NEED_RESULT_POINT_CALLBACK))){const e=new Map;t.forEach((t,n)=>e.set(n,t)),e.delete(S.NEED_RESULT_POINT_CALLBACK),t=e}try{const r=this.decodeRow(o,i,t);if(1===e){r.putMetadata(X.ORIENTATION,180);const e=r.getResultPoints();null!==e&&(e[0]=new oe(n-e[0].getX()-1,e[0].getY()),e[1]=new oe(n-e[1].getX()-1,e[1].getY()))}return r}catch(u){}}}throw new k}static recordPattern(e,t,n){const r=n.length;for(let l=0;l<r;l++)n[l]=0;const i=e.getSize();if(t>=i)throw new k;let s=!e.get(t),a=0,o=t;for(;o<i;){if(e.get(o)!==s)n[a]++;else{if(++a===r)break;n[a]=1,s=!s}o++}if(a!==r&&(a!==r-1||o!==i))throw new k}static recordPatternInReverse(e,t,n){let r=n.length,i=e.get(t);for(;t>0&&r>=0;)e.get(--t)!==i&&(r--,i=!i);if(r>=0)throw new k;we.recordPattern(e,t+1,n)}static patternMatchVariance(e,t,n){const r=e.length;let i=0,s=0;for(let l=0;l<r;l++)i+=e[l],s+=t[l];if(i<s)return Number.POSITIVE_INFINITY;const a=i/s;n*=a;let o=0;for(let l=0;l<r;l++){const r=e[l],i=t[l]*a,s=r>i?r-i:i-r;if(s>n)return Number.POSITIVE_INFINITY;o+=s}return o/i}}class be extends we{static findStartPattern(e){const t=e.getSize(),n=e.getNextSet(0);let r=0,i=Int32Array.from([0,0,0,0,0,0]),s=n,a=!1;const o=6;for(let l=n;l<t;l++)if(e.get(l)!==a)i[r]++;else{if(r===o-1){let t=be.MAX_AVG_VARIANCE,n=-1;for(let e=be.CODE_START_A;e<=be.CODE_START_C;e++){const r=we.patternMatchVariance(i,be.CODE_PATTERNS[e],be.MAX_INDIVIDUAL_VARIANCE);r<t&&(t=r,n=e)}if(n>=0&&e.isRange(Math.max(0,s-(l-s)/2),s,!1))return Int32Array.from([s,l,n]);s+=i[0]+i[1],i=i.slice(2,i.length-1),i[r-1]=0,i[r]=0,r--}else r++;i[r]=1,a=!a}throw new k}static decodeCode(e,t,n){we.recordPattern(e,n,t);let r=be.MAX_AVG_VARIANCE,i=-1;for(let s=0;s<be.CODE_PATTERNS.length;s++){const e=be.CODE_PATTERNS[s],n=this.patternMatchVariance(t,e,be.MAX_INDIVIDUAL_VARIANCE);n<r&&(r=n,i=s)}if(i>=0)return i;throw new k}decodeRow(e,t,n){const r=n&&!0===n.get(S.ASSUME_GS1),i=be.findStartPattern(t),s=i[2];let a=0;const o=new Uint8Array(20);let l;switch(o[a++]=s,s){case be.CODE_START_A:l=be.CODE_CODE_A;break;case be.CODE_START_B:l=be.CODE_CODE_B;break;case be.CODE_START_C:l=be.CODE_CODE_C;break;default:throw new A}let c=!1,u=!1,d="",h=i[0],p=i[1];const m=Int32Array.from([0,0,0,0,0,0]);let g=0,y=0,v=s,w=0,b=!0,x=!1,E=!1;for(;!c;){const e=u;switch(u=!1,g=y,y=be.decodeCode(t,m,p),o[a++]=y,y!==be.CODE_STOP&&(b=!0),y!==be.CODE_STOP&&(w++,v+=w*y),h=p,p+=m.reduce((e,t)=>e+t,0),y){case be.CODE_START_A:case be.CODE_START_B:case be.CODE_START_C:throw new A}switch(l){case be.CODE_CODE_A:if(y<64)d+=E===x?String.fromCharCode(" ".charCodeAt(0)+y):String.fromCharCode(" ".charCodeAt(0)+y+128),E=!1;else if(y<96)d+=E===x?String.fromCharCode(y-64):String.fromCharCode(y+64),E=!1;else switch(y!==be.CODE_STOP&&(b=!1),y){case be.CODE_FNC_1:r&&(0===d.length?d+="]C1":d+=String.fromCharCode(29));break;case be.CODE_FNC_2:case be.CODE_FNC_3:break;case be.CODE_FNC_4_A:!x&&E?(x=!0,E=!1):x&&E?(x=!1,E=!1):E=!0;break;case be.CODE_SHIFT:u=!0,l=be.CODE_CODE_B;break;case be.CODE_CODE_B:l=be.CODE_CODE_B;break;case be.CODE_CODE_C:l=be.CODE_CODE_C;break;case be.CODE_STOP:c=!0}break;case be.CODE_CODE_B:if(y<96)d+=E===x?String.fromCharCode(" ".charCodeAt(0)+y):String.fromCharCode(" ".charCodeAt(0)+y+128),E=!1;else switch(y!==be.CODE_STOP&&(b=!1),y){case be.CODE_FNC_1:r&&(0===d.length?d+="]C1":d+=String.fromCharCode(29));break;case be.CODE_FNC_2:case be.CODE_FNC_3:break;case be.CODE_FNC_4_B:!x&&E?(x=!0,E=!1):x&&E?(x=!1,E=!1):E=!0;break;case be.CODE_SHIFT:u=!0,l=be.CODE_CODE_A;break;case be.CODE_CODE_A:l=be.CODE_CODE_A;break;case be.CODE_CODE_C:l=be.CODE_CODE_C;break;case be.CODE_STOP:c=!0}break;case be.CODE_CODE_C:if(y<100)y<10&&(d+="0"),d+=y;else switch(y!==be.CODE_STOP&&(b=!1),y){case be.CODE_FNC_1:r&&(0===d.length?d+="]C1":d+=String.fromCharCode(29));break;case be.CODE_CODE_A:l=be.CODE_CODE_A;break;case be.CODE_CODE_B:l=be.CODE_CODE_B;break;case be.CODE_STOP:c=!0}}e&&(l=l===be.CODE_CODE_A?be.CODE_CODE_B:be.CODE_CODE_A)}const N=p-h;if(p=t.getNextUnset(p),!t.isRange(p,Math.min(t.getSize(),p+(p-h)/2),!1))throw new k;if(v-=w*g,v%103!==g)throw new f;const C=d.length;if(0===C)throw new k;C>0&&b&&(d=l===be.CODE_CODE_C?d.substring(0,C-2):d.substring(0,C-1));const _=(i[1]+i[0])/2,T=h+N/2,I=o.length,P=new Uint8Array(I);for(let f=0;f<I;f++)P[f]=o[f];const R=[new oe(_,e),new oe(T,e)];return new U(d,P,0,R,V.CODE_128,(new Date).getTime())}}be.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],be.MAX_AVG_VARIANCE=.25,be.MAX_INDIVIDUAL_VARIANCE=.7,be.CODE_SHIFT=98,be.CODE_CODE_C=99,be.CODE_CODE_B=100,be.CODE_CODE_A=101,be.CODE_FNC_1=102,be.CODE_FNC_2=97,be.CODE_FNC_3=96,be.CODE_FNC_4_A=101,be.CODE_FNC_4_B=100,be.CODE_START_A=103,be.CODE_START_B=104,be.CODE_START_C=105,be.CODE_STOP=106;class xe extends we{constructor(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super(),this.usingCheckDigit=e,this.extendedMode=t,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,t,n){let r=this.counters;r.fill(0),this.decodeRowResult="";let i,s,a=xe.findAsteriskPattern(t,r),o=t.getNextSet(a[1]),l=t.getSize();do{xe.recordPattern(t,o,r);let e=xe.toNarrowWidePattern(r);if(e<0)throw new k;i=xe.patternToChar(e),this.decodeRowResult+=i,s=o;for(let t of r)o+=t;o=t.getNextSet(o)}while("*"!==i);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let c,u=0;for(let f of r)u+=f;if(o!==l&&2*(o-s-u)<u)throw new k;if(this.usingCheckDigit){let e=this.decodeRowResult.length-1,t=0;for(let n=0;n<e;n++)t+=xe.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(n));if(this.decodeRowResult.charAt(e)!==xe.ALPHABET_STRING.charAt(t%43))throw new f;this.decodeRowResult=this.decodeRowResult.substring(0,e)}if(0===this.decodeRowResult.length)throw new k;c=this.extendedMode?xe.decodeExtended(this.decodeRowResult):this.decodeRowResult;let d=(a[1]+a[0])/2,h=s+u/2;return new U(c,null,0,[new oe(d,e),new oe(h,e)],V.CODE_39,(new Date).getTime())}static findAsteriskPattern(e,t){let n=e.getSize(),r=e.getNextSet(0),i=0,s=r,a=!1,o=t.length;for(let l=r;l<n;l++)if(e.get(l)!==a)t[i]++;else{if(i===o-1){if(this.toNarrowWidePattern(t)===xe.ASTERISK_ENCODING&&e.isRange(Math.max(0,s-Math.floor((l-s)/2)),s,!1))return[s,l];s+=t[0]+t[1],t.copyWithin(0,2,2+i-1),t[i-1]=0,t[i]=0,i--}else i++;t[i]=1,a=!a}throw new k}static toNarrowWidePattern(e){let t,n=e.length,r=0;do{let i=2147483647;for(let t of e)t<i&&t>r&&(i=t);r=i,t=0;let s=0,a=0;for(let o=0;o<n;o++){let i=e[o];i>r&&(a|=1<<n-1-o,t++,s+=i)}if(3===t){for(let i=0;i<n&&t>0;i++){let n=e[i];if(n>r&&(t--,2*n>=s))return-1}return a}}while(t>3);return-1}static patternToChar(e){for(let t=0;t<xe.CHARACTER_ENCODINGS.length;t++)if(xe.CHARACTER_ENCODINGS[t]===e)return xe.ALPHABET_STRING.charAt(t);if(e===xe.ASTERISK_ENCODING)return"*";throw new k}static decodeExtended(e){let t=e.length,n="";for(let r=0;r<t;r++){let t=e.charAt(r);if("+"===t||"$"===t||"%"===t||"/"===t){let i=e.charAt(r+1),s="\0";switch(t){case"+":if(!(i>="A"&&i<="Z"))throw new A;s=String.fromCharCode(i.charCodeAt(0)+32);break;case"$":if(!(i>="A"&&i<="Z"))throw new A;s=String.fromCharCode(i.charCodeAt(0)-64);break;case"%":if(i>="A"&&i<="E")s=String.fromCharCode(i.charCodeAt(0)-38);else if(i>="F"&&i<="J")s=String.fromCharCode(i.charCodeAt(0)-11);else if(i>="K"&&i<="O")s=String.fromCharCode(i.charCodeAt(0)+16);else if(i>="P"&&i<="T")s=String.fromCharCode(i.charCodeAt(0)+43);else if("U"===i)s="\0";else if("V"===i)s="@";else if("W"===i)s="`";else{if("X"!==i&&"Y"!==i&&"Z"!==i)throw new A;s="\x7f"}break;case"/":if(i>="A"&&i<="O")s=String.fromCharCode(i.charCodeAt(0)-32);else{if("Z"!==i)throw new A;s=":"}}n+=s,r++}else n+=t}return n}}xe.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",xe.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],xe.ASTERISK_ENCODING=148;class Se extends we{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,t,n){let r=this.decodeStart(t),i=this.decodeEnd(t),s=new T;Se.decodeMiddle(t,r[1],i[0],s);let a=s.toString(),o=null;null!=n&&(o=n.get(S.ALLOWED_LENGTHS)),null==o&&(o=Se.DEFAULT_ALLOWED_LENGTHS);let l=a.length,c=!1,u=0;for(let h of o){if(l===h){c=!0;break}h>u&&(u=h)}if(!c&&l>u&&(c=!0),!c)throw new A;const d=[new oe(r[1],e),new oe(i[0],e)];return new U(a,null,0,d,V.ITF,(new Date).getTime())}static decodeMiddle(e,t,n,r){let i=new Int32Array(10),s=new Int32Array(5),a=new Int32Array(5);for(i.fill(0),s.fill(0),a.fill(0);t<n;){we.recordPattern(e,t,i);for(let e=0;e<5;e++){let t=2*e;s[e]=i[t],a[e]=i[t+1]}let n=Se.decodeDigit(s);r.append(n.toString()),n=this.decodeDigit(a),r.append(n.toString()),i.forEach(function(e){t+=e})}}decodeStart(e){let t=Se.skipWhiteSpace(e),n=Se.findGuardPattern(e,t,Se.START_PATTERN);return this.narrowLineWidth=(n[1]-n[0])/4,this.validateQuietZone(e,n[0]),n}validateQuietZone(e,t){let n=10*this.narrowLineWidth;n=n<t?n:t;for(let r=t-1;n>0&&r>=0&&!e.get(r);r--)n--;if(0!==n)throw new k}static skipWhiteSpace(e){const t=e.getSize(),n=e.getNextSet(0);if(n===t)throw new k;return n}decodeEnd(e){e.reverse();try{let n,r=Se.skipWhiteSpace(e);try{n=Se.findGuardPattern(e,r,Se.END_PATTERN_REVERSED[0])}catch(t){t instanceof k&&(n=Se.findGuardPattern(e,r,Se.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,n[0]);let i=n[0];return n[0]=e.getSize()-n[1],n[1]=e.getSize()-i,n}finally{e.reverse()}}static findGuardPattern(e,t,n){let r=n.length,i=new Int32Array(r),s=e.getSize(),a=!1,o=0,l=t;i.fill(0);for(let c=t;c<s;c++)if(e.get(c)!==a)i[o]++;else{if(o===r-1){if(we.patternMatchVariance(i,n,Se.MAX_INDIVIDUAL_VARIANCE)<Se.MAX_AVG_VARIANCE)return[l,c];l+=i[0]+i[1],m.arraycopy(i,2,i,0,o-1),i[o-1]=0,i[o]=0,o--}else o++;i[o]=1,a=!a}throw new k}static decodeDigit(e){let t=Se.MAX_AVG_VARIANCE,n=-1,r=Se.PATTERNS.length;for(let i=0;i<r;i++){let r=Se.PATTERNS[i],s=we.patternMatchVariance(e,r,Se.MAX_INDIVIDUAL_VARIANCE);s<t?(t=s,n=i):s===t&&(n=-1)}if(n>=0)return n%10;throw new k}}Se.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Se.MAX_AVG_VARIANCE=.38,Se.MAX_INDIVIDUAL_VARIANCE=.5,Se.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Se.START_PATTERN=Int32Array.from([1,1,1,1]),Se.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Ae extends we{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let t,n=!1,r=0,i=Int32Array.from([0,0,0]);for(;!n;){i=Int32Array.from([0,0,0]),t=Ae.findGuardPattern(e,r,!1,this.START_END_PATTERN,i);let s=t[0];r=t[1];let a=s-(r-s);a>=0&&(n=e.isRange(a,s,!1))}return t}static checkChecksum(e){return Ae.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(0===t)return!1;let n=parseInt(e.charAt(t-1),10);return Ae.getStandardUPCEANChecksum(e.substring(0,t-1))===n}static getStandardUPCEANChecksum(e){let t=e.length,n=0;for(let r=t-1;r>=0;r-=2){let t=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new A;n+=t}n*=3;for(let r=t-2;r>=0;r-=2){let t=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new A;n+=t}return(1e3-n)%10}static decodeEnd(e,t){return Ae.findGuardPattern(e,t,!1,Ae.START_END_PATTERN,new Int32Array(Ae.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,t,n,r){return this.findGuardPattern(e,t,n,r,new Int32Array(r.length))}static findGuardPattern(e,t,n,r,i){let s=e.getSize(),a=0,o=t=n?e.getNextUnset(t):e.getNextSet(t),l=r.length,c=n;for(let u=t;u<s;u++)if(e.get(u)!==c)i[a]++;else{if(a===l-1){if(we.patternMatchVariance(i,r,Ae.MAX_INDIVIDUAL_VARIANCE)<Ae.MAX_AVG_VARIANCE)return Int32Array.from([o,u]);o+=i[0]+i[1];let e=i.slice(2,i.length-1);for(let t=0;t<a-1;t++)i[t]=e[t];i[a-1]=0,i[a]=0,a--}else a++;i[a]=1,c=!c}throw new k}static decodeDigit(e,t,n,r){this.recordPattern(e,n,t);let i=this.MAX_AVG_VARIANCE,s=-1,a=r.length;for(let o=0;o<a;o++){let e=r[o],n=we.patternMatchVariance(t,e,Ae.MAX_INDIVIDUAL_VARIANCE);n<i&&(i=n,s=o)}if(s>=0)return s;throw new k}}Ae.MAX_AVG_VARIANCE=.48,Ae.MAX_INDIVIDUAL_VARIANCE=.7,Ae.START_END_PATTERN=Int32Array.from([1,1,1]),Ae.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Ae.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ae.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Ee{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,n){let r=this.decodeRowStringBuffer,i=this.decodeMiddle(t,n,r),s=r.toString(),a=Ee.parseExtensionString(s),o=[new oe((n[0]+n[1])/2,e),new oe(i,e)],l=new U(s,null,0,o,V.UPC_EAN_EXTENSION,(new Date).getTime());return null!=a&&l.putAllMetadata(a),l}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),s=t[1],a=0;for(let l=0;l<5&&s<i;l++){let t=Ae.decodeDigit(e,r,s,Ae.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of r)s+=e;t>=10&&(a|=1<<4-l),4!==l&&(s=e.getNextSet(s),s=e.getNextUnset(s))}if(5!==n.length)throw new k;let o=this.determineCheckDigit(a);if(Ee.extensionChecksum(n.toString())!==o)throw new k;return s}static extensionChecksum(e){let t=e.length,n=0;for(let r=t-2;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);n*=3;for(let r=t-1;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);return n*=3,n%10}determineCheckDigit(e){for(let t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new k}static parseExtensionString(e){if(5!==e.length)return null;let t=Ee.parseExtension5String(e);return null==t?null:new Map([[X.SUGGESTED_PRICE,t]])}static parseExtension5String(e){let t;switch(e.charAt(0)){case"0":t="\xa3";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t=""}let n=parseInt(e.substring(1)),r=n%100;return t+(n/100).toString()+"."+(r<10?"0"+r:r.toString())}}class Ne{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,n){let r=this.decodeRowStringBuffer,i=this.decodeMiddle(t,n,r),s=r.toString(),a=Ne.parseExtensionString(s),o=[new oe((n[0]+n[1])/2,e),new oe(i,e)],l=new U(s,null,0,o,V.UPC_EAN_EXTENSION,(new Date).getTime());return null!=a&&l.putAllMetadata(a),l}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),s=t[1],a=0;for(let o=0;o<2&&s<i;o++){let t=Ae.decodeDigit(e,r,s,Ae.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of r)s+=e;t>=10&&(a|=1<<1-o),1!==o&&(s=e.getNextSet(s),s=e.getNextUnset(s))}if(2!==n.length)throw new k;if(parseInt(n.toString())%4!==a)throw new k;return s}static parseExtensionString(e){return 2!==e.length?null:new Map([[X.ISSUE_NUMBER,parseInt(e)]])}}class Ce{static decodeRow(e,t,n){let r=Ae.findGuardPattern(t,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return(new Ee).decodeRow(e,t,r)}catch(i){return(new Ne).decodeRow(e,t,r)}}}Ce.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class _e extends Ae{constructor(){super(),this.decodeRowStringBuffer="",_e.L_AND_G_PATTERNS=_e.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let t=_e.L_PATTERNS[e-10],n=new Int32Array(t.length);for(let e=0;e<t.length;e++)n[e]=t[t.length-e-1];_e.L_AND_G_PATTERNS[e]=n}}decodeRow(e,t,n){let r=_e.findStartGuardPattern(t),i=null==n?null:n.get(S.NEED_RESULT_POINT_CALLBACK);if(null!=i){const t=new oe((r[0]+r[1])/2,e);i.foundPossibleResultPoint(t)}let s=this.decodeMiddle(t,r,this.decodeRowStringBuffer),a=s.rowOffset,o=s.resultString;if(null!=i){const t=new oe(a,e);i.foundPossibleResultPoint(t)}let l=this.decodeEnd(t,a);if(null!=i){const t=new oe((l[0]+l[1])/2,e);i.foundPossibleResultPoint(t)}let c=l[1],u=c+(c-l[0]);if(u>=t.getSize()||!t.isRange(c,u,!1))throw new k;let d=o.toString();if(d.length<8)throw new A;if(!_e.checkChecksum(d))throw new f;let h=(r[1]+r[0])/2,p=(l[1]+l[0])/2,m=this.getBarcodeFormat(),g=[new oe(h,e),new oe(p,e)],y=new U(d,null,0,g,m,(new Date).getTime()),v=0;try{let n=Ce.decodeRow(e,t,l[1]);y.putMetadata(X.UPC_EAN_EXTENSION,n.getText()),y.putAllMetadata(n.getResultMetadata()),y.addResultPoints(n.getResultPoints()),v=n.getText().length}catch(b){}let w=null==n?null:n.get(S.ALLOWED_EAN_EXTENSIONS);if(null!=w){let e=!1;for(let t in w)if(v.toString()===t){e=!0;break}if(!e)throw new k}return y}decodeEnd(e,t){return _e.findGuardPattern(e,t,!1,_e.START_END_PATTERN,new Int32Array(_e.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return _e.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(0===t)return!1;let n=parseInt(e.charAt(t-1),10);return _e.getStandardUPCEANChecksum(e.substring(0,t-1))===n}static getStandardUPCEANChecksum(e){let t=e.length,n=0;for(let r=t-1;r>=0;r-=2){let t=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new A;n+=t}n*=3;for(let r=t-2;r>=0;r-=2){let t=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new A;n+=t}return(1e3-n)%10}}class Te extends _e{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),s=t[1],a=0;for(let o=0;o<6&&s<i;o++){let t=_e.decodeDigit(e,r,s,_e.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of r)s+=e;t>=10&&(a|=1<<5-o)}n=Te.determineFirstDigit(n,a),s=_e.findGuardPattern(e,s,!0,_e.MIDDLE_PATTERN,new Int32Array(_e.MIDDLE_PATTERN.length).fill(0))[1];for(let o=0;o<6&&s<i;o++){let t=_e.decodeDigit(e,r,s,_e.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t);for(let e of r)s+=e}return{rowOffset:s,resultString:n}}getBarcodeFormat(){return V.EAN_13}static determineFirstDigit(e,t){for(let n=0;n<10;n++)if(t===this.FIRST_DIGIT_ENCODINGS[n])return e=String.fromCharCode("0".charCodeAt(0)+n)+e;throw new k}}Te.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Ie extends _e{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,n){const r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),s=t[1];for(let a=0;a<4&&s<i;a++){let t=_e.decodeDigit(e,r,s,_e.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t);for(let e of r)s+=e}s=_e.findGuardPattern(e,s,!0,_e.MIDDLE_PATTERN,new Int32Array(_e.MIDDLE_PATTERN.length).fill(0))[1];for(let a=0;a<4&&s<i;a++){let t=_e.decodeDigit(e,r,s,_e.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t);for(let e of r)s+=e}return{rowOffset:s,resultString:n}}getBarcodeFormat(){return V.EAN_8}}class ke extends _e{constructor(){super(...arguments),this.ean13Reader=new Te}getBarcodeFormat(){return V.UPC_A}decode(e,t){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,t,n){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,t,n))}decodeMiddle(e,t,n){return this.ean13Reader.decodeMiddle(e,t,n)}maybeReturnResult(e){let t=e.getText();if("0"===t.charAt(0)){let n=new U(t.substring(1),null,null,e.getResultPoints(),V.UPC_A);return null!=e.getResultMetadata()&&n.putAllMetadata(e.getResultMetadata()),n}throw new k}reset(){this.ean13Reader.reset()}}class Pe extends _e{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,t,n){const r=this.decodeMiddleCounters.map(e=>e);r[0]=0,r[1]=0,r[2]=0,r[3]=0;const i=e.getSize();let s=t[1],a=0;for(let o=0;o<6&&s<i;o++){const t=Pe.decodeDigit(e,r,s,Pe.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of r)s+=e;t>=10&&(a|=1<<5-o)}return{rowOffset:s,resultString:Pe.determineNumSysAndCheckDigit(n,a)}}decodeEnd(e,t){return Pe.findGuardPatternWithoutCounters(e,t,!0,Pe.MIDDLE_END_PATTERN)}checkChecksum(e){return _e.checkChecksum(Pe.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,t){for(let n=0;n<=1;n++)for(let r=0;r<10;r++)if(t===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[n][r])return String.fromCharCode("0".charCodeAt(0)+n)+e+String.fromCharCode("0".charCodeAt(0)+r);throw k.getNotFoundInstance()}getBarcodeFormat(){return V.UPC_E}static convertUPCEtoUPCA(e){const t=e.slice(1,7).split("").map(e=>e.charCodeAt(0)),n=new T;n.append(e.charAt(0));let r=t[5];switch(r){case 0:case 1:case 2:n.appendChars(t,0,2),n.append(r),n.append("0000"),n.appendChars(t,2,3);break;case 3:n.appendChars(t,0,3),n.append("00000"),n.appendChars(t,3,2);break;case 4:n.appendChars(t,0,4),n.append("00000"),n.append(t[4]);break;default:n.appendChars(t,0,5),n.append("0000"),n.append(r)}return e.length>=8&&n.append(e.charAt(7)),n.toString()}}Pe.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Pe.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Re extends we{constructor(e){super();let n=null==e?null:e.get(S.POSSIBLE_FORMATS),r=[];t(n)?(r.push(new Te),r.push(new ke),r.push(new Ie),r.push(new Pe)):(n.indexOf(V.EAN_13)>-1&&r.push(new Te),n.indexOf(V.UPC_A)>-1&&r.push(new ke),n.indexOf(V.EAN_8)>-1&&r.push(new Ie),n.indexOf(V.UPC_E)>-1&&r.push(new Pe)),this.readers=r}decodeRow(e,t,n){for(let i of this.readers)try{const r=i.decodeRow(e,t,n),s=r.getBarcodeFormat()===V.EAN_13&&"0"===r.getText().charAt(0),a=null==n?null:n.get(S.POSSIBLE_FORMATS),o=null==a||a.includes(V.UPC_A);if(s&&o){const e=r.getRawBytes(),t=new U(r.getText().substring(1),e,e?e.length:null,r.getResultPoints(),V.UPC_A);return t.putAllMetadata(r.getResultMetadata()),t}return r}catch(r){}throw new k}reset(){for(let e of this.readers)e.reset()}}class De extends we{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,t){for(let n=0;n<t.length;n++)if(we.patternMatchVariance(e,t[n],De.MAX_INDIVIDUAL_VARIANCE)<De.MAX_AVG_VARIANCE)return n;throw new k}static count(e){return se.sum(new Int32Array(e))}static increment(e,t){let n=0,r=t[0];for(let i=1;i<e.length;i++)t[i]>r&&(r=t[i],n=i);e[n]++}static decrement(e,t){let n=0,r=t[0];for(let i=1;i<e.length;i++)t[i]<r&&(r=t[i],n=i);e[n]--}static isFinderPattern(e){let t=e[0]+e[1],n=t/(t+e[2]+e[3]);if(n>=De.MIN_FINDER_PATTERN_RATIO&&n<=De.MAX_FINDER_PATTERN_RATIO){let t=Number.MAX_SAFE_INTEGER,n=Number.MIN_SAFE_INTEGER;for(let r of e)r>n&&(n=r),r<t&&(t=r);return n<10*t}return!1}}De.MAX_AVG_VARIANCE=.2,De.MAX_INDIVIDUAL_VARIANCE=.45,De.MIN_FINDER_PATTERN_RATIO=9.5/12,De.MAX_FINDER_PATTERN_RATIO=12.5/14;class Oe{constructor(e,t){this.value=e,this.checksumPortion=t}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof Oe))return!1;const t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Le{constructor(e,t,n,r,i){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new oe(n,i)),this.resultPoints.push(new oe(r,i))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof Le))return!1;const t=e;return this.value===t.value}hashCode(){return this.value}}class Me{constructor(){}static getRSSvalue(e,t,n){let r=0;for(let o of e)r+=o;let i=0,s=0,a=e.length;for(let o=0;o<a-1;o++){let l;for(l=1,s|=1<<o;l<e[o];l++,s&=~(1<<o)){let e=Me.combins(r-l-1,a-o-2);if(n&&0===s&&r-l-(a-o-1)>=a-o-1&&(e-=Me.combins(r-l-(a-o),a-o-2)),a-o-1>1){let n=0;for(let e=r-l-(a-o-2);e>t;e--)n+=Me.combins(r-l-e-1,a-o-3);e-=n*(a-1-o)}else r-l>t&&e--;i+=e}r-=l}return i}static combins(e,t){let n,r;e-t>t?(r=t,n=e-t):(r=e-t,n=t);let i=1,s=1;for(let a=e;a>n;a--)i*=a,s<=r&&(i/=s,s++);for(;s<=r;)i/=s,s++;return i}}class Fe{static buildBitArray(e){let t=2*e.length-1;null==e[e.length-1].getRightChar()&&(t-=1);let n=new b(12*t),r=0,i=e[0].getRightChar().getValue();for(let s=11;s>=0;--s)0!=(i&1<<s)&&n.set(r),r++;for(let s=1;s<e.length;++s){let t=e[s],i=t.getLeftChar().getValue();for(let e=11;e>=0;--e)0!=(i&1<<e)&&n.set(r),r++;if(null!=t.getRightChar()){let e=t.getRightChar().getValue();for(let t=11;t>=0;--t)0!=(e&1<<t)&&n.set(r),r++}}return n}}class je{constructor(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Be{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class Ue extends Be{constructor(e,t){super(e),this.value=t}getValue(){return this.value}isFNC1(){return this.value===Ue.FNC1}}Ue.FNC1="$";class ze extends Be{constructor(e,t,n){super(e),n?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=t}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Ve extends Be{constructor(e,t,n){if(super(e),t<0||t>10||n<0||n>10)throw new A;this.firstDigit=t,this.secondDigit=n}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return 10*this.firstDigit+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Ve.FNC1}isSecondDigitFNC1(){return this.secondDigit===Ve.FNC1}isAnyFNC1(){return this.firstDigit===Ve.FNC1||this.secondDigit===Ve.FNC1}}Ve.FNC1=10;class He{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new k;let t=e.substring(0,2);for(let i of He.TWO_DIGIT_DATA_LENGTH)if(i[0]===t)return i[1]===He.VARIABLE_LENGTH?He.processVariableAI(2,i[2],e):He.processFixedAI(2,i[1],e);if(e.length<3)throw new k;let n=e.substring(0,3);for(let i of He.THREE_DIGIT_DATA_LENGTH)if(i[0]===n)return i[1]===He.VARIABLE_LENGTH?He.processVariableAI(3,i[2],e):He.processFixedAI(3,i[1],e);for(let i of He.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(i[0]===n)return i[1]===He.VARIABLE_LENGTH?He.processVariableAI(4,i[2],e):He.processFixedAI(4,i[1],e);if(e.length<4)throw new k;let r=e.substring(0,4);for(let i of He.FOUR_DIGIT_DATA_LENGTH)if(i[0]===r)return i[1]===He.VARIABLE_LENGTH?He.processVariableAI(4,i[2],e):He.processFixedAI(4,i[1],e);throw new k}static processFixedAI(e,t,n){if(n.length<e)throw new k;let r=n.substring(0,e);if(n.length<e+t)throw new k;let i=n.substring(e,e+t),s=n.substring(e+t),a="("+r+")"+i,o=He.parseFieldsInGeneralPurpose(s);return null==o?a:a+o}static processVariableAI(e,t,n){let r,i=n.substring(0,e);r=n.length<e+t?n.length:e+t;let s=n.substring(e,r),a=n.substring(r),o="("+i+")"+s,l=He.parseFieldsInGeneralPurpose(a);return null==l?o:o+l}}He.VARIABLE_LENGTH=[],He.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",He.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",He.VARIABLE_LENGTH,20],["22",He.VARIABLE_LENGTH,29],["30",He.VARIABLE_LENGTH,8],["37",He.VARIABLE_LENGTH,8],["90",He.VARIABLE_LENGTH,30],["91",He.VARIABLE_LENGTH,30],["92",He.VARIABLE_LENGTH,30],["93",He.VARIABLE_LENGTH,30],["94",He.VARIABLE_LENGTH,30],["95",He.VARIABLE_LENGTH,30],["96",He.VARIABLE_LENGTH,30],["97",He.VARIABLE_LENGTH,3],["98",He.VARIABLE_LENGTH,30],["99",He.VARIABLE_LENGTH,30]],He.THREE_DIGIT_DATA_LENGTH=[["240",He.VARIABLE_LENGTH,30],["241",He.VARIABLE_LENGTH,30],["242",He.VARIABLE_LENGTH,6],["250",He.VARIABLE_LENGTH,30],["251",He.VARIABLE_LENGTH,30],["253",He.VARIABLE_LENGTH,17],["254",He.VARIABLE_LENGTH,20],["400",He.VARIABLE_LENGTH,30],["401",He.VARIABLE_LENGTH,30],["402",17],["403",He.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",He.VARIABLE_LENGTH,20],["421",He.VARIABLE_LENGTH,15],["422",3],["423",He.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],He.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",He.VARIABLE_LENGTH,15],["391",He.VARIABLE_LENGTH,18],["392",He.VARIABLE_LENGTH,15],["393",He.VARIABLE_LENGTH,18],["703",He.VARIABLE_LENGTH,30]],He.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",He.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",He.VARIABLE_LENGTH,20],["8003",He.VARIABLE_LENGTH,30],["8004",He.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",He.VARIABLE_LENGTH,30],["8008",He.VARIABLE_LENGTH,12],["8018",18],["8020",He.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",He.VARIABLE_LENGTH,70],["8200",He.VARIABLE_LENGTH,70]];class We{constructor(e){this.buffer=new T,this.information=e}decodeAllCodes(e,t){let n=t,r=null;for(;;){let t=this.decodeGeneralPurposeField(n,r),i=He.parseFieldsInGeneralPurpose(t.getNewString());if(null!=i&&e.append(i),r=t.isRemaining()?""+t.getRemainingValue():null,n===t.getNewPosition())break;n=t.getNewPosition()}return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let t=this.extractNumericValueFromBitArray(e,4);return new Ve(this.information.getSize(),0===t?Ve.FNC1:t-1,Ve.FNC1)}let t=this.extractNumericValueFromBitArray(e,7);return new Ve(e+7,(t-8)/11,(t-8)%11)}extractNumericValueFromBitArray(e,t){return We.extractNumericValueFromBitArray(this.information,e,t)}static extractNumericValueFromBitArray(e,t,n){let r=0;for(let i=0;i<n;++i)e.get(t+i)&&(r|=1<<n-i-1);return r}decodeGeneralPurposeField(e,t){this.buffer.setLengthToZero(),null!=t&&this.buffer.append(t),this.current.setPosition(e);let n=this.parseBlocks();return null!=n&&n.isRemaining()?new ze(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new ze(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,t;do{let n=this.current.getPosition();if(this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished()),n===this.current.getPosition()&&!e)break}while(!e);return t.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let t;return t=e.isSecondDigitFNC1()?new ze(this.current.getPosition(),this.buffer.toString()):new ze(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new je(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let e=new ze(this.current.getPosition(),this.buffer.toString());return new je(!0,e)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new je(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let e=new ze(this.current.getPosition(),this.buffer.toString());return new je(!0,e)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new je(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let e=new ze(this.current.getPosition(),this.buffer.toString());return new je(!0,e)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new je(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,8);return r>=232&&r<253}decodeIsoIec646(e){let t=this.extractNumericValueFromBitArray(e,5);if(15===t)return new Ue(e+5,Ue.FNC1);if(t>=5&&t<15)return new Ue(e+5,"0"+(t-5));let n,r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new Ue(e+7,""+(r+1));if(r>=90&&r<116)return new Ue(e+7,""+(r+7));switch(this.extractNumericValueFromBitArray(e,8)){case 232:n="!";break;case 233:n='"';break;case 234:n="%";break;case 235:n="&";break;case 236:n="'";break;case 237:n="(";break;case 238:n=")";break;case 239:n="*";break;case 240:n="+";break;case 241:n=",";break;case 242:n="-";break;case 243:n=".";break;case 244:n="/";break;case 245:n=":";break;case 246:n=";";break;case 247:n="<";break;case 248:n="=";break;case 249:n=">";break;case 250:n="?";break;case 251:n="_";break;case 252:n=" ";break;default:throw new A}return new Ue(e+8,n)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63}decodeAlphanumeric(e){let t=this.extractNumericValueFromBitArray(e,5);if(15===t)return new Ue(e+5,Ue.FNC1);if(t>=5&&t<15)return new Ue(e+5,"0"+(t-5));let n,r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new Ue(e+6,""+(r+33));switch(r){case 58:n="*";break;case 59:n=",";break;case 60:n="-";break;case 61:n=".";break;case 62:n="/";break;default:throw new ne("Decoding invalid alphanumeric value: "+r)}return new Ue(e+6,n)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<5&&t+e<this.information.getSize();++t)if(2===t){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0}}class qe{constructor(e){this.information=e,this.generalDecoder=new We(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Ge extends qe{constructor(e){super(e)}encodeCompressedGtin(e,t){e.append("(01)");let n=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,t,n)}encodeCompressedGtinWithoutAI(e,t,n){for(let r=0;r<4;++r){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(t+10*r,10);n/100===0&&e.append("0"),n/10===0&&e.append("0"),e.append(n)}Ge.appendCheckDigit(e,n)}static appendCheckDigit(e,t){let n=0;for(let r=0;r<13;r++){let i=e.charAt(r+t).charCodeAt(0)-"0".charCodeAt(0);n+=0===(1&r)?3*i:i}n=10-n%10,10===n&&(n=0),e.append(n)}}Ge.GTIN_SIZE=40;class Ke extends Ge{constructor(e){super(e)}parseInformation(){let e=new T;e.append("(01)");let t=e.length(),n=this.getGeneralDecoder().extractNumericValueFromBitArray(Ke.HEADER_SIZE,4);return e.append(n),this.encodeCompressedGtinWithoutAI(e,Ke.HEADER_SIZE+4,t),this.getGeneralDecoder().decodeAllCodes(e,Ke.HEADER_SIZE+44)}}Ke.HEADER_SIZE=4;class Ye extends qe{constructor(e){super(e)}parseInformation(){let e=new T;return this.getGeneralDecoder().decodeAllCodes(e,Ye.HEADER_SIZE)}}Ye.HEADER_SIZE=5;class Xe extends Ge{constructor(e){super(e)}encodeCompressedWeight(e,t,n){let r=this.getGeneralDecoder().extractNumericValueFromBitArray(t,n);this.addWeightCode(e,r);let i=this.checkWeight(r),s=1e5;for(let a=0;a<5;++a)i/s===0&&e.append("0"),s/=10;e.append(i)}}class Qe extends Xe{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=Qe.HEADER_SIZE+Xe.GTIN_SIZE+Qe.WEIGHT_SIZE)throw new k;let e=new T;return this.encodeCompressedGtin(e,Qe.HEADER_SIZE),this.encodeCompressedWeight(e,Qe.HEADER_SIZE+Xe.GTIN_SIZE,Qe.WEIGHT_SIZE),e.toString()}}Qe.HEADER_SIZE=5,Qe.WEIGHT_SIZE=15;class Je extends Qe{constructor(e){super(e)}addWeightCode(e,t){e.append("(3103)")}checkWeight(e){return e}}class Ze extends Qe{constructor(e){super(e)}addWeightCode(e,t){t<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class $e extends Ge{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<$e.HEADER_SIZE+Ge.GTIN_SIZE)throw new k;let e=new T;this.encodeCompressedGtin(e,$e.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray($e.HEADER_SIZE+Ge.GTIN_SIZE,$e.LAST_DIGIT_SIZE);e.append("(392"),e.append(t),e.append(")");let n=this.getGeneralDecoder().decodeGeneralPurposeField($e.HEADER_SIZE+Ge.GTIN_SIZE+$e.LAST_DIGIT_SIZE,null);return e.append(n.getNewString()),e.toString()}}$e.HEADER_SIZE=8,$e.LAST_DIGIT_SIZE=2;class et extends Ge{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<et.HEADER_SIZE+Ge.GTIN_SIZE)throw new k;let e=new T;this.encodeCompressedGtin(e,et.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray(et.HEADER_SIZE+Ge.GTIN_SIZE,et.LAST_DIGIT_SIZE);e.append("(393"),e.append(t),e.append(")");let n=this.getGeneralDecoder().extractNumericValueFromBitArray(et.HEADER_SIZE+Ge.GTIN_SIZE+et.LAST_DIGIT_SIZE,et.FIRST_THREE_DIGITS_SIZE);n/100==0&&e.append("0"),n/10==0&&e.append("0"),e.append(n);let r=this.getGeneralDecoder().decodeGeneralPurposeField(et.HEADER_SIZE+Ge.GTIN_SIZE+et.LAST_DIGIT_SIZE+et.FIRST_THREE_DIGITS_SIZE,null);return e.append(r.getNewString()),e.toString()}}et.HEADER_SIZE=8,et.LAST_DIGIT_SIZE=2,et.FIRST_THREE_DIGITS_SIZE=10;class tt extends Xe{constructor(e,t,n){super(e),this.dateCode=n,this.firstAIdigits=t}parseInformation(){if(this.getInformation().getSize()!=tt.HEADER_SIZE+tt.GTIN_SIZE+tt.WEIGHT_SIZE+tt.DATE_SIZE)throw new k;let e=new T;return this.encodeCompressedGtin(e,tt.HEADER_SIZE),this.encodeCompressedWeight(e,tt.HEADER_SIZE+tt.GTIN_SIZE,tt.WEIGHT_SIZE),this.encodeCompressedDate(e,tt.HEADER_SIZE+tt.GTIN_SIZE+tt.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,t){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(t,tt.DATE_SIZE);if(38400==n)return;e.append("("),e.append(this.dateCode),e.append(")");let r=n%32;n/=32;let i=n%12+1;n/=12;let s=n;s/10==0&&e.append("0"),e.append(s),i/10==0&&e.append("0"),e.append(i),r/10==0&&e.append("0"),e.append(r)}addWeightCode(e,t){e.append("("),e.append(this.firstAIdigits),e.append(t/1e5),e.append(")")}checkWeight(e){return e%1e5}}function nt(e){try{if(e.get(1))return new Ke(e);if(!e.get(2))return new Ye(e);switch(We.extractNumericValueFromBitArray(e,1,4)){case 4:return new Je(e);case 5:return new Ze(e)}switch(We.extractNumericValueFromBitArray(e,1,5)){case 12:return new $e(e);case 13:return new et(e)}switch(We.extractNumericValueFromBitArray(e,1,7)){case 56:return new tt(e,"310","11");case 57:return new tt(e,"320","11");case 58:return new tt(e,"310","13");case 59:return new tt(e,"320","13");case 60:return new tt(e,"310","15");case 61:return new tt(e,"320","15");case 62:return new tt(e,"310","17");case 63:return new tt(e,"320","17")}}catch(t){throw console.log(t),new ne("unknown decoder: "+e)}}tt.HEADER_SIZE=8,tt.WEIGHT_SIZE=20,tt.DATE_SIZE=16;class rt{constructor(e,t,n,r){this.leftchar=e,this.rightchar=t,this.finderpattern=n,this.maybeLast=r}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return null==this.rightchar}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(null==this.finderpattern?"null":this.finderpattern.getValue())+" ]"}static equals(e,t){return e instanceof rt&&rt.equalsOrNull(e.leftchar,t.leftchar)&&rt.equalsOrNull(e.rightchar,t.rightchar)&&rt.equalsOrNull(e.finderpattern,t.finderpattern)}static equalsOrNull(e,t){return null===e?null===t:rt.equals(e,t)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class it{constructor(e,t,n){this.pairs=e,this.rowNumber=t,this.wasReversed=n}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,t){return e instanceof it&&this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed}checkEqualitity(e,t){if(!e||!t)return;let n;return e.forEach((e,r)=>{t.forEach(t=>{e.getLeftChar().getValue()===t.getLeftChar().getValue()&&e.getRightChar().getValue()===t.getRightChar().getValue()&&e.getFinderPatter().getValue()===t.getFinderPatter().getValue()&&(n=!0)})}),n}}class st extends De{constructor(e){super(...arguments),this.pairs=new Array(st.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=!0===e}decodeRow(e,t,n){this.pairs.length=0,this.startFromEven=!1;try{return st.constructResult(this.decodeRow2pairs(e,t))}catch(r){this.verbose&&console.log(r)}return this.pairs.length=0,this.startFromEven=!0,st.constructResult(this.decodeRow2pairs(e,t))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,t){let n,r=!1;for(;!r;)try{this.pairs.push(this.retrieveNextPair(t,this.pairs,e))}catch(i){if(i instanceof k){if(!this.pairs.length)throw new k;r=!0}}if(this.checkChecksum())return this.pairs;if(n=!!this.rows.length,this.storeRow(e,!1),n){let e=this.checkRowsBoolean(!1);if(null!=e)return e;if(e=this.checkRowsBoolean(!0),null!=e)return e}throw new k}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let t=null;try{t=this.checkRows(new Array,0)}catch(n){this.verbose&&console.log(n)}return e&&(this.rows=this.rows.reverse()),t}checkRows(e,t){for(let r=t;r<this.rows.length;r++){let t=this.rows[r];this.pairs.length=0;for(let n of e)this.pairs.push(n.getPairs());if(this.pairs.push(t.getPairs()),!st.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let i=new Array(e);i.push(t);try{return this.checkRows(i,r+1)}catch(n){this.verbose&&console.log(n)}}throw new k}static isValidSequence(e){for(let t of st.FINDER_PATTERN_SEQUENCES){if(e.length>t.length)continue;let n=!0;for(let r=0;r<e.length;r++)if(e[r].getFinderPattern().getValue()!=t[r]){n=!1;break}if(n)return!0}return!1}storeRow(e,t){let n=0,r=!1,i=!1;for(;n<this.rows.length;){let t=this.rows[n];if(t.getRowNumber()>e){i=t.isEquivalent(this.pairs);break}r=t.isEquivalent(this.pairs),n++}i||r||st.isPartialRow(this.pairs,this.rows)||(this.rows.push(n,new it(this.pairs,e,t)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,t){for(let n of t)if(n.getPairs().length!==e.length)for(let t of n.getPairs())for(let n of e)if(rt.equals(t,n))break}static isPartialRow(e,t){for(let n of t){let t=!0;for(let r of e){let e=!1;for(let t of n.getPairs())if(r.equals(t)){e=!0;break}if(!e){t=!1;break}}if(t)return!0}return!1}getRows(){return this.rows}static constructResult(e){let t=nt(Fe.buildBitArray(e)).parseInformation(),n=e[0].getFinderPattern().getResultPoints(),r=e[e.length-1].getFinderPattern().getResultPoints(),i=[n[0],n[1],r[0],r[1]];return new U(t,null,null,i,V.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),t=e.getLeftChar(),n=e.getRightChar();if(null==n)return!1;let r=n.getChecksumPortion(),i=2;for(let s=1;s<this.pairs.size();++s){let e=this.pairs.get(s);r+=e.getLeftChar().getChecksumPortion(),i++;let t=e.getRightChar();null!=t&&(r+=t.getChecksumPortion(),i++)}return r%=211,211*(i-4)+r==t.getValue()}static getNextSecondBar(e,t){let n;return e.get(t)?(n=e.getNextUnset(t),n=e.getNextSet(n)):(n=e.getNextSet(t),n=e.getNextUnset(n)),n}retrieveNextPair(e,t,n){let r,i=t.length%2==0;this.startFromEven&&(i=!i);let s=!0,a=-1;do{this.findNextPair(e,t,a),r=this.parseFoundFinderPattern(e,n,i),null==r?a=st.getNextSecondBar(e,this.startEnd[0]):s=!1}while(s);let o,l=this.decodeDataCharacter(e,r,i,!0);if(!this.isEmptyPair(t)&&t[t.length-1].mustBeLast())throw new k;try{o=this.decodeDataCharacter(e,r,i,!1)}catch(c){o=null,this.verbose&&console.log(c)}return new rt(l,o,r,!0)}isEmptyPair(e){return 0===e.length}findNextPair(e,t,n){let r=this.getDecodeFinderCounters();r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i,s=e.getSize();i=n>=0?n:this.isEmptyPair(t)?0:t[t.length-1].getFinderPattern().getStartEnd()[1];let a=t.length%2!=0;this.startFromEven&&(a=!a);let o=!1;for(;i<s&&(o=!e.get(i),o);)i++;let l=0,c=i;for(let u=i;u<s;u++)if(e.get(u)!=o)r[l]++;else{if(3==l){if(a&&st.reverseCounters(r),st.isFinderPattern(r))return this.startEnd[0]=c,void(this.startEnd[1]=u);a&&st.reverseCounters(r),c+=r[0]+r[1],r[0]=r[2],r[1]=r[3],r[2]=0,r[3]=0,l--}else l++;r[l]=1,o=!o}throw new k}static reverseCounters(e){let t=e.length;for(let n=0;n<t/2;++n){let r=e[n];e[n]=e[t-n-1],e[t-n-1]=r}}parseFoundFinderPattern(e,t,n){let r,i,s;if(n){let t=this.startEnd[0]-1;for(;t>=0&&!e.get(t);)t--;t++,r=this.startEnd[0]-t,i=t,s=this.startEnd[1]}else i=this.startEnd[0],s=e.getNextUnset(this.startEnd[1]+1),r=s-this.startEnd[1];let a,o=this.getDecodeFinderCounters();m.arraycopy(o,0,o,1,o.length-1),o[0]=r;try{a=this.parseFinderValue(o,st.FINDER_PATTERNS)}catch(l){return null}return new Le(a,[i,s],i,s,t)}decodeDataCharacter(e,t,n,r){let i=this.getDataCharacterCounters();for(let E=0;E<i.length;E++)i[E]=0;if(r)st.recordPatternInReverse(e,t.getStartEnd()[0],i);else{st.recordPattern(e,t.getStartEnd()[1],i);for(let e=0,t=i.length-1;e<t;e++,t--){let n=i[e];i[e]=i[t],i[t]=n}}let s=17,a=se.sum(new Int32Array(i))/s,o=(t.getStartEnd()[1]-t.getStartEnd()[0])/15;if(Math.abs(a-o)/o>.3)throw new k;let l=this.getOddCounts(),c=this.getEvenCounts(),u=this.getOddRoundingErrors(),d=this.getEvenRoundingErrors();for(let E=0;E<i.length;E++){let e=1*i[E]/a,t=e+.5;if(t<1){if(e<.3)throw new k;t=1}else if(t>8){if(e>8.7)throw new k;t=8}let n=E/2;0==(1&E)?(l[n]=t,u[n]=e-t):(c[n]=t,d[n]=e-t)}this.adjustOddEvenCounts(s);let h=4*t.getValue()+(n?0:2)+(r?0:1)-1,f=0,p=0;for(let E=l.length-1;E>=0;E--){if(st.isNotA1left(t,n,r)){let e=st.WEIGHTS[h][2*E];p+=l[E]*e}f+=l[E]}let m=0;for(let E=c.length-1;E>=0;E--)if(st.isNotA1left(t,n,r)){let e=st.WEIGHTS[h][2*E+1];m+=c[E]*e}let g=p+m;if(0!=(1&f)||f>13||f<4)throw new k;let y=(13-f)/2,v=st.SYMBOL_WIDEST[y],w=9-v,b=Me.getRSSvalue(l,v,!0),x=Me.getRSSvalue(c,w,!1),S=st.EVEN_TOTAL_SUBSET[y],A=st.GSUM[y];return new Oe(b*S+x+A,g)}static isNotA1left(e,t,n){return!(0==e.getValue()&&t&&n)}adjustOddEvenCounts(e){let t=se.sum(new Int32Array(this.getOddCounts())),n=se.sum(new Int32Array(this.getEvenCounts())),r=!1,i=!1;t>13?i=!0:t<4&&(r=!0);let s=!1,a=!1;n>13?a=!0:n<4&&(s=!0);let o=t+n-e,l=1==(1&t),c=0==(1&n);if(1==o)if(l){if(c)throw new k;i=!0}else{if(!c)throw new k;a=!0}else if(-1==o)if(l){if(c)throw new k;r=!0}else{if(!c)throw new k;s=!0}else{if(0!=o)throw new k;if(l){if(!c)throw new k;t<n?(r=!0,a=!0):(i=!0,s=!0)}else if(c)throw new k}if(r){if(i)throw new k;st.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(i&&st.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(a)throw new k;st.increment(this.getEvenCounts(),this.getOddRoundingErrors())}a&&st.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}st.SYMBOL_WIDEST=[7,5,4,3,1],st.EVEN_TOTAL_SUBSET=[4,20,52,104,204],st.GSUM=[0,348,1388,2948,3988],st.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],st.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],st.FINDER_PAT_A=0,st.FINDER_PAT_B=1,st.FINDER_PAT_C=2,st.FINDER_PAT_D=3,st.FINDER_PAT_E=4,st.FINDER_PAT_F=5,st.FINDER_PATTERN_SEQUENCES=[[st.FINDER_PAT_A,st.FINDER_PAT_A],[st.FINDER_PAT_A,st.FINDER_PAT_B,st.FINDER_PAT_B],[st.FINDER_PAT_A,st.FINDER_PAT_C,st.FINDER_PAT_B,st.FINDER_PAT_D],[st.FINDER_PAT_A,st.FINDER_PAT_E,st.FINDER_PAT_B,st.FINDER_PAT_D,st.FINDER_PAT_C],[st.FINDER_PAT_A,st.FINDER_PAT_E,st.FINDER_PAT_B,st.FINDER_PAT_D,st.FINDER_PAT_D,st.FINDER_PAT_F],[st.FINDER_PAT_A,st.FINDER_PAT_E,st.FINDER_PAT_B,st.FINDER_PAT_D,st.FINDER_PAT_E,st.FINDER_PAT_F,st.FINDER_PAT_F],[st.FINDER_PAT_A,st.FINDER_PAT_A,st.FINDER_PAT_B,st.FINDER_PAT_B,st.FINDER_PAT_C,st.FINDER_PAT_C,st.FINDER_PAT_D,st.FINDER_PAT_D],[st.FINDER_PAT_A,st.FINDER_PAT_A,st.FINDER_PAT_B,st.FINDER_PAT_B,st.FINDER_PAT_C,st.FINDER_PAT_C,st.FINDER_PAT_D,st.FINDER_PAT_E,st.FINDER_PAT_E],[st.FINDER_PAT_A,st.FINDER_PAT_A,st.FINDER_PAT_B,st.FINDER_PAT_B,st.FINDER_PAT_C,st.FINDER_PAT_C,st.FINDER_PAT_D,st.FINDER_PAT_E,st.FINDER_PAT_F,st.FINDER_PAT_F],[st.FINDER_PAT_A,st.FINDER_PAT_A,st.FINDER_PAT_B,st.FINDER_PAT_B,st.FINDER_PAT_C,st.FINDER_PAT_D,st.FINDER_PAT_D,st.FINDER_PAT_E,st.FINDER_PAT_E,st.FINDER_PAT_F,st.FINDER_PAT_F]],st.MAX_PAIRS=11;class at extends Oe{constructor(e,t,n){super(e,t),this.count=0,this.finderPattern=n}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class ot extends De{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,t,n){const r=this.decodePair(t,!1,e,n);ot.addOrTally(this.possibleLeftPairs,r),t.reverse();let i=this.decodePair(t,!0,e,n);ot.addOrTally(this.possibleRightPairs,i),t.reverse();for(let s of this.possibleLeftPairs)if(s.getCount()>1)for(let e of this.possibleRightPairs)if(e.getCount()>1&&ot.checkChecksum(s,e))return ot.constructResult(s,e);throw new k}static addOrTally(e,t){if(null==t)return;let n=!1;for(let r of e)if(r.getValue()===t.getValue()){r.incrementCount(),n=!0;break}n||e.push(t)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,t){let n=4537077*e.getValue()+t.getValue(),r=new String(n).toString(),i=new T;for(let l=13-r.length;l>0;l--)i.append("0");i.append(r);let s=0;for(let l=0;l<13;l++){let e=i.charAt(l).charCodeAt(0)-"0".charCodeAt(0);s+=0===(1&l)?3*e:e}s=10-s%10,10===s&&(s=0),i.append(s.toString());let a=e.getFinderPattern().getResultPoints(),o=t.getFinderPattern().getResultPoints();return new U(i.toString(),null,0,[a[0],a[1],o[0],o[1]],V.RSS_14,(new Date).getTime())}static checkChecksum(e,t){let n=(e.getChecksumPortion()+16*t.getChecksumPortion())%79,r=9*e.getFinderPattern().getValue()+t.getFinderPattern().getValue();return r>72&&r--,r>8&&r--,n===r}decodePair(e,t,n,r){try{let i=this.findFinderPattern(e,t),s=this.parseFoundFinderPattern(e,n,t,i),a=null==r?null:r.get(S.NEED_RESULT_POINT_CALLBACK);if(null!=a){let r=(i[0]+i[1])/2;t&&(r=e.getSize()-1-r),a.foundPossibleResultPoint(new oe(r,n))}let o=this.decodeDataCharacter(e,s,!0),l=this.decodeDataCharacter(e,s,!1);return new at(1597*o.getValue()+l.getValue(),o.getChecksumPortion()+4*l.getChecksumPortion(),s)}catch(i){return null}}decodeDataCharacter(e,t,n){let r=this.getDataCharacterCounters();for(let m=0;m<r.length;m++)r[m]=0;if(n)we.recordPatternInReverse(e,t.getStartEnd()[0],r);else{we.recordPattern(e,t.getStartEnd()[1]+1,r);for(let e=0,t=r.length-1;e<t;e++,t--){let n=r[e];r[e]=r[t],r[t]=n}}let i=n?16:15,s=se.sum(new Int32Array(r))/i,a=this.getOddCounts(),o=this.getEvenCounts(),l=this.getOddRoundingErrors(),c=this.getEvenRoundingErrors();for(let m=0;m<r.length;m++){let e=r[m]/s,t=Math.floor(e+.5);t<1?t=1:t>8&&(t=8);let n=Math.floor(m/2);0===(1&m)?(a[n]=t,l[n]=e-t):(o[n]=t,c[n]=e-t)}this.adjustOddEvenCounts(n,i);let u=0,d=0;for(let m=a.length-1;m>=0;m--)d*=9,d+=a[m],u+=a[m];let h=0,f=0;for(let m=o.length-1;m>=0;m--)h*=9,h+=o[m],f+=o[m];let p=d+3*h;if(n){if(0!==(1&u)||u>12||u<4)throw new k;let e=(12-u)/2,t=ot.OUTSIDE_ODD_WIDEST[e],n=9-t,r=Me.getRSSvalue(a,t,!1),i=Me.getRSSvalue(o,n,!0),s=ot.OUTSIDE_EVEN_TOTAL_SUBSET[e],l=ot.OUTSIDE_GSUM[e];return new Oe(r*s+i+l,p)}{if(0!==(1&f)||f>10||f<4)throw new k;let e=(10-f)/2,t=ot.INSIDE_ODD_WIDEST[e],n=9-t,r=Me.getRSSvalue(a,t,!0),i=Me.getRSSvalue(o,n,!1),s=ot.INSIDE_ODD_TOTAL_SUBSET[e],l=ot.INSIDE_GSUM[e];return new Oe(i*s+r+l,p)}}findFinderPattern(e,t){let n=this.getDecodeFinderCounters();n[0]=0,n[1]=0,n[2]=0,n[3]=0;let r=e.getSize(),i=!1,s=0;for(;s<r&&(i=!e.get(s),t!==i);)s++;let a=0,o=s;for(let l=s;l<r;l++)if(e.get(l)!==i)n[a]++;else{if(3===a){if(De.isFinderPattern(n))return[o,l];o+=n[0]+n[1],n[0]=n[2],n[1]=n[3],n[2]=0,n[3]=0,a--}else a++;n[a]=1,i=!i}throw new k}parseFoundFinderPattern(e,t,n,r){let i=e.get(r[0]),s=r[0]-1;for(;s>=0&&i!==e.get(s);)s--;s++;const a=r[0]-s,o=this.getDecodeFinderCounters(),l=new Int32Array(o.length);m.arraycopy(o,0,l,1,o.length-1),l[0]=a;const c=this.parseFinderValue(l,ot.FINDER_PATTERNS);let u=s,d=r[1];return n&&(u=e.getSize()-1-u,d=e.getSize()-1-d),new Le(c,[s,r[1]],u,d,t)}adjustOddEvenCounts(e,t){let n=se.sum(new Int32Array(this.getOddCounts())),r=se.sum(new Int32Array(this.getEvenCounts())),i=!1,s=!1,a=!1,o=!1;e?(n>12?s=!0:n<4&&(i=!0),r>12?o=!0:r<4&&(a=!0)):(n>11?s=!0:n<5&&(i=!0),r>10?o=!0:r<4&&(a=!0));let l=n+r-t,c=(1&n)===(e?1:0),u=1===(1&r);if(1===l)if(c){if(u)throw new k;s=!0}else{if(!u)throw new k;o=!0}else if(-1===l)if(c){if(u)throw new k;i=!0}else{if(!u)throw new k;a=!0}else{if(0!==l)throw new k;if(c){if(!u)throw new k;n<r?(i=!0,o=!0):(s=!0,a=!0)}else if(u)throw new k}if(i){if(s)throw new k;De.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&De.decrement(this.getOddCounts(),this.getOddRoundingErrors()),a){if(o)throw new k;De.increment(this.getEvenCounts(),this.getOddRoundingErrors())}o&&De.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ot.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],ot.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],ot.OUTSIDE_GSUM=[0,161,961,2015,2715],ot.INSIDE_GSUM=[0,336,1036,1516],ot.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],ot.INSIDE_ODD_WIDEST=[2,4,6,8],ot.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class lt extends we{constructor(e,t){super(),this.readers=[],this.verbose=!0===t;const n=e?e.get(S.POSSIBLE_FORMATS):null,r=e&&void 0!==e.get(S.ASSUME_CODE_39_CHECK_DIGIT);n?((n.includes(V.EAN_13)||n.includes(V.UPC_A)||n.includes(V.EAN_8)||n.includes(V.UPC_E))&&this.readers.push(new Re(e)),n.includes(V.CODE_39)&&this.readers.push(new xe(r)),n.includes(V.CODE_128)&&this.readers.push(new be),n.includes(V.ITF)&&this.readers.push(new Se),n.includes(V.RSS_14)&&this.readers.push(new ot),n.includes(V.RSS_EXPANDED)&&this.readers.push(new st(this.verbose))):(this.readers.push(new Re(e)),this.readers.push(new xe),this.readers.push(new Re(e)),this.readers.push(new be),this.readers.push(new Se),this.readers.push(new ot),this.readers.push(new st(this.verbose)))}decodeRow(e,t,n){for(let i=0;i<this.readers.length;i++)try{return this.readers[i].decodeRow(e,t,n)}catch(r){}throw new k}reset(){this.readers.forEach(e=>e.reset())}}class ct extends B{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,t=arguments.length>1?arguments[1]:void 0;super(new lt(t),e,t)}}class ut{constructor(e,t,n){this.ecCodewords=e,this.ecBlocks=[t],n&&this.ecBlocks.push(n)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class dt{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ht{constructor(e,t,n,r,i,s){this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=n,this.dataRegionSizeRows=r,this.dataRegionSizeColumns=i,this.ecBlocks=s;let a=0;const o=s.getECCodewords(),l=s.getECBlocks();for(let c of l)a+=c.getCount()*(c.getDataCodewords()+o);this.totalCodewords=a}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,t){if(0!==(1&e)||0!==(1&t))throw new A;for(let n of ht.VERSIONS)if(n.symbolSizeRows===e&&n.symbolSizeColumns===t)return n;throw new A}toString(){return""+this.versionNumber}static buildVersions(){return[new ht(1,10,10,8,8,new ut(5,new dt(1,3))),new ht(2,12,12,10,10,new ut(7,new dt(1,5))),new ht(3,14,14,12,12,new ut(10,new dt(1,8))),new ht(4,16,16,14,14,new ut(12,new dt(1,12))),new ht(5,18,18,16,16,new ut(14,new dt(1,18))),new ht(6,20,20,18,18,new ut(18,new dt(1,22))),new ht(7,22,22,20,20,new ut(20,new dt(1,30))),new ht(8,24,24,22,22,new ut(24,new dt(1,36))),new ht(9,26,26,24,24,new ut(28,new dt(1,44))),new ht(10,32,32,14,14,new ut(36,new dt(1,62))),new ht(11,36,36,16,16,new ut(42,new dt(1,86))),new ht(12,40,40,18,18,new ut(48,new dt(1,114))),new ht(13,44,44,20,20,new ut(56,new dt(1,144))),new ht(14,48,48,22,22,new ut(68,new dt(1,174))),new ht(15,52,52,24,24,new ut(42,new dt(2,102))),new ht(16,64,64,14,14,new ut(56,new dt(2,140))),new ht(17,72,72,16,16,new ut(36,new dt(4,92))),new ht(18,80,80,18,18,new ut(48,new dt(4,114))),new ht(19,88,88,20,20,new ut(56,new dt(4,144))),new ht(20,96,96,22,22,new ut(68,new dt(4,174))),new ht(21,104,104,24,24,new ut(56,new dt(6,136))),new ht(22,120,120,18,18,new ut(68,new dt(6,175))),new ht(23,132,132,20,20,new ut(62,new dt(8,163))),new ht(24,144,144,22,22,new ut(62,new dt(8,156),new dt(2,155))),new ht(25,8,18,6,16,new ut(7,new dt(1,5))),new ht(26,8,32,6,14,new ut(11,new dt(1,10))),new ht(27,12,26,10,24,new ut(14,new dt(1,16))),new ht(28,12,36,10,16,new ut(18,new dt(1,22))),new ht(29,16,36,14,16,new ut(24,new dt(1,32))),new ht(30,16,48,14,22,new ut(28,new dt(1,49)))]}}ht.VERSIONS=ht.buildVersions();class ft{constructor(e){const t=e.getHeight();if(t<8||t>144||0!==(1&t))throw new A;this.version=ft.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new I(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const t=e.getHeight(),n=e.getWidth();return ht.getVersionForDimensions(t,n)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let t=0,n=4,r=0;const i=this.mappingBitMatrix.getHeight(),s=this.mappingBitMatrix.getWidth();let a=!1,o=!1,l=!1,c=!1;do{if(n!==i||0!==r||a)if(n!==i-2||0!==r||0===(3&s)||o)if(n!==i+4||2!==r||0!==(7&s)||l)if(n!==i-2||0!==r||4!==(7&s)||c){do{n<i&&r>=0&&!this.readMappingMatrix.get(r,n)&&(e[t++]=255&this.readUtah(n,r,i,s)),n-=2,r+=2}while(n>=0&&r<s);n+=1,r+=3;do{n>=0&&r<s&&!this.readMappingMatrix.get(r,n)&&(e[t++]=255&this.readUtah(n,r,i,s)),n+=2,r-=2}while(n<i&&r>=0);n+=3,r+=1}else e[t++]=255&this.readCorner4(i,s),n-=2,r+=2,c=!0;else e[t++]=255&this.readCorner3(i,s),n-=2,r+=2,l=!0;else e[t++]=255&this.readCorner2(i,s),n-=2,r+=2,o=!0;else e[t++]=255&this.readCorner1(i,s),n-=2,r+=2,a=!0}while(n<i||r<s);if(t!==this.version.getTotalCodewords())throw new A;return e}readModule(e,t,n,r){return e<0&&(e+=n,t+=4-(n+4&7)),t<0&&(t+=r,e+=4-(r+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)}readUtah(e,t,n,r){let i=0;return this.readModule(e-2,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e-2,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t,n,r)&&(i|=1),i<<=1,this.readModule(e,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e,t,n,r)&&(i|=1),i}readCorner1(e,t){let n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,1,e,t)&&(n|=1),n<<=1,this.readModule(e-1,2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n}readCorner2(e,t){let n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-4,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n}readCorner3(e,t){let n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-3,e,t)&&(n|=1),n<<=1,this.readModule(1,t-2,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n}readCorner4(e,t){let n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n}extractDataRegion(e){const t=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new d("Dimension of bitMatrix must match the version size");const r=this.version.getDataRegionSizeRows(),i=this.version.getDataRegionSizeColumns(),s=t/r|0,a=n/i|0,o=new I(a*i,s*r);for(let l=0;l<s;++l){const t=l*r;for(let n=0;n<a;++n){const s=n*i;for(let a=0;a<r;++a){const c=l*(r+2)+1+a,u=t+a;for(let t=0;t<i;++t){const r=n*(i+2)+1+t;if(e.get(r,c)){const e=s+t;o.set(e,u)}}}}}return o}}class pt{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t){const n=t.getECBlocks();let r=0;const i=n.getECBlocks();for(let d of i)r+=d.getCount();const s=new Array(r);let a=0;for(let d of i)for(let e=0;e<d.getCount();e++){const e=d.getDataCodewords(),t=n.getECCodewords()+e;s[a++]=new pt(e,new Uint8Array(t))}const o=s[0].codewords.length-n.getECCodewords(),l=o-1;let c=0;for(let d=0;d<l;d++)for(let t=0;t<a;t++)s[t].codewords[d]=e[c++];const u=24===t.getVersionNumber(),h=u?8:a;for(let d=0;d<h;d++)s[d].codewords[o-1]=e[c++];const f=s[0].codewords.length;for(let d=o;d<f;d++)for(let t=0;t<a;t++){const n=u?(t+8)%a:t,r=u&&n>7?d-1:d;s[n].codewords[r]=e[c++]}if(c!==e.length)throw new d;return s}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class mt{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new d(""+e);let t=0,n=this.bitOffset,r=this.byteOffset;const i=this.bytes;if(n>0){const s=8-n,a=e<s?e:s,o=s-a,l=255>>8-a<<o;t=(i[r]&l)>>o,e-=a,n+=a,8===n&&(n=0,r++)}if(e>0){for(;e>=8;)t=t<<8|255&i[r],r++,e-=8;if(e>0){const s=8-e,a=255>>s<<s;t=t<<e|(i[r]&a)>>s,n+=e}}return this.bitOffset=n,this.byteOffset=r,t}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}!function(e){e[e.PAD_ENCODE=0]="PAD_ENCODE",e[e.ASCII_ENCODE=1]="ASCII_ENCODE",e[e.C40_ENCODE=2]="C40_ENCODE",e[e.TEXT_ENCODE=3]="TEXT_ENCODE",e[e.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",e[e.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",e[e.BASE256_ENCODE=6]="BASE256_ENCODE"}(W||(W={}));class gt{static decode(e){const t=new mt(e),n=new T,r=new T,i=new Array;let s=W.ASCII_ENCODE;do{if(s===W.ASCII_ENCODE)s=this.decodeAsciiSegment(t,n,r);else{switch(s){case W.C40_ENCODE:this.decodeC40Segment(t,n);break;case W.TEXT_ENCODE:this.decodeTextSegment(t,n);break;case W.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,n);break;case W.EDIFACT_ENCODE:this.decodeEdifactSegment(t,n);break;case W.BASE256_ENCODE:this.decodeBase256Segment(t,n,i);break;default:throw new A}s=W.ASCII_ENCODE}}while(s!==W.PAD_ENCODE&&t.available()>0);return r.length()>0&&n.append(r.toString()),new Q(e,n.toString(),0===i.length?null:i,null)}static decodeAsciiSegment(e,t,n){let r=!1;do{let i=e.readBits(8);if(0===i)throw new A;if(i<=128)return r&&(i+=128),t.append(String.fromCharCode(i-1)),W.ASCII_ENCODE;if(129===i)return W.PAD_ENCODE;if(i<=229){const e=i-130;e<10&&t.append("0"),t.append(""+e)}else switch(i){case 230:return W.C40_ENCODE;case 231:return W.BASE256_ENCODE;case 232:t.append(String.fromCharCode(29));break;case 233:case 234:case 241:break;case 235:r=!0;break;case 236:t.append("[)>\x1e05\x1d"),n.insert(0,"\x1e\x04");break;case 237:t.append("[)>\x1e06\x1d"),n.insert(0,"\x1e\x04");break;case 238:return W.ANSIX12_ENCODE;case 239:return W.TEXT_ENCODE;case 240:return W.EDIFACT_ENCODE;default:if(254!==i||0!==e.available())throw new A}}while(e.available()>0);return W.ASCII_ENCODE}static decodeC40Segment(e,t){let n=!1;const r=[];let i=0;do{if(8===e.available())return;const s=e.readBits(8);if(254===s)return;this.parseTwoBytes(s,e.readBits(8),r);for(let e=0;e<3;e++){const s=r[e];switch(i){case 0:if(s<3)i=s+1;else{if(!(s<this.C40_BASIC_SET_CHARS.length))throw new A;{const e=this.C40_BASIC_SET_CHARS[s];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e)}}break;case 1:n?(t.append(String.fromCharCode(s+128)),n=!1):t.append(String.fromCharCode(s)),i=0;break;case 2:if(s<this.C40_SHIFT2_SET_CHARS.length){const e=this.C40_SHIFT2_SET_CHARS[s];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e)}else switch(s){case 27:t.append(String.fromCharCode(29));break;case 30:n=!0;break;default:throw new A}i=0;break;case 3:n?(t.append(String.fromCharCode(s+224)),n=!1):t.append(String.fromCharCode(s+96)),i=0;break;default:throw new A}}}while(e.available()>0)}static decodeTextSegment(e,t){let n=!1,r=[],i=0;do{if(8===e.available())return;const s=e.readBits(8);if(254===s)return;this.parseTwoBytes(s,e.readBits(8),r);for(let e=0;e<3;e++){const s=r[e];switch(i){case 0:if(s<3)i=s+1;else{if(!(s<this.TEXT_BASIC_SET_CHARS.length))throw new A;{const e=this.TEXT_BASIC_SET_CHARS[s];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e)}}break;case 1:n?(t.append(String.fromCharCode(s+128)),n=!1):t.append(String.fromCharCode(s)),i=0;break;case 2:if(s<this.TEXT_SHIFT2_SET_CHARS.length){const e=this.TEXT_SHIFT2_SET_CHARS[s];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e)}else switch(s){case 27:t.append(String.fromCharCode(29));break;case 30:n=!0;break;default:throw new A}i=0;break;case 3:if(!(s<this.TEXT_SHIFT3_SET_CHARS.length))throw new A;{const e=this.TEXT_SHIFT3_SET_CHARS[s];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e),i=0}break;default:throw new A}}}while(e.available()>0)}static decodeAnsiX12Segment(e,t){const n=[];do{if(8===e.available())return;const r=e.readBits(8);if(254===r)return;this.parseTwoBytes(r,e.readBits(8),n);for(let e=0;e<3;e++){const r=n[e];switch(r){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(r<14)t.append(String.fromCharCode(r+44));else{if(!(r<40))throw new A;t.append(String.fromCharCode(r+51))}}}}while(e.available()>0)}static parseTwoBytes(e,t,n){let r=(e<<8)+t-1,i=Math.floor(r/1600);n[0]=i,r-=1600*i,i=Math.floor(r/40),n[1]=i,n[2]=r-40*i}static decodeEdifactSegment(e,t){do{if(e.available()<=16)return;for(let n=0;n<4;n++){let n=e.readBits(6);if(31===n){const t=8-e.getBitOffset();return void(8!==t&&e.readBits(t))}0===(32&n)&&(n|=64),t.append(String.fromCharCode(n))}}while(e.available()>0)}static decodeBase256Segment(e,t,n){let r=1+e.getByteOffset();const i=this.unrandomize255State(e.readBits(8),r++);let s;if(s=0===i?e.available()/8|0:i<250?i:250*(i-249)+this.unrandomize255State(e.readBits(8),r++),s<0)throw new A;const a=new Uint8Array(s);for(let l=0;l<s;l++){if(e.available()<8)throw new A;a[l]=this.unrandomize255State(e.readBits(8),r++)}n.push(a);try{t.append(C.decode(a,_.ISO88591))}catch(o){throw new ne("Platform does not support required encoding: "+o.message)}}static unrandomize255State(e,t){const n=e-(149*t%255+1);return n>=0?n:n+256}}gt.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],gt.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],gt.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],gt.TEXT_SHIFT2_SET_CHARS=gt.C40_SHIFT2_SET_CHARS,gt.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)];class yt{constructor(){this.rsDecoder=new re(ee.DATA_MATRIX_FIELD_256)}decode(e){const t=new ft(e),n=t.getVersion(),r=t.readCodewords(),i=pt.getDataBlocks(r,n);let s=0;for(let l of i)s+=l.getNumDataCodewords();const a=new Uint8Array(s),o=i.length;for(let l=0;l<o;l++){const e=i[l],t=e.getCodewords(),n=e.getNumDataCodewords();this.correctErrors(t,n);for(let r=0;r<n;r++)a[r*o+l]=t[r]}return gt.decode(a)}correctErrors(e,t){const n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch(r){throw new f}for(let i=0;i<t;i++)e[i]=n[i]}}class vt{constructor(e){this.image=e,this.rectangleDetector=new ue(this.image)}detect(){const e=this.rectangleDetector.detect();let t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new k;t=this.shiftToModuleCenter(t);const n=t[0],r=t[1],i=t[2],s=t[3];let a=this.transitionsBetween(n,s)+1,o=this.transitionsBetween(i,s)+1;1===(1&a)&&(a+=1),1===(1&o)&&(o+=1),4*a<7*o&&4*o<7*a&&(a=o=Math.max(a,o));let l=vt.sampleGrid(this.image,n,r,i,s,a,o);return new le(l,[n,r,i,s])}static shiftPoint(e,t,n){let r=(t.getX()-e.getX())/(n+1),i=(t.getY()-e.getY())/(n+1);return new oe(e.getX()+r,e.getY()+i)}static moveAway(e,t,n){let r=e.getX(),i=e.getY();return r<t?r-=1:r+=1,i<n?i-=1:i+=1,new oe(r,i)}detectSolid1(e){let t=e[0],n=e[1],r=e[3],i=e[2],s=this.transitionsBetween(t,n),a=this.transitionsBetween(n,r),o=this.transitionsBetween(r,i),l=this.transitionsBetween(i,t),c=s,u=[i,t,n,r];return c>a&&(c=a,u[0]=t,u[1]=n,u[2]=r,u[3]=i),c>o&&(c=o,u[0]=n,u[1]=r,u[2]=i,u[3]=t),c>l&&(u[0]=r,u[1]=i,u[2]=t,u[3]=n),u}detectSolid2(e){let t=e[0],n=e[1],r=e[2],i=e[3],s=this.transitionsBetween(t,i),a=vt.shiftPoint(n,r,4*(s+1)),o=vt.shiftPoint(r,n,4*(s+1));return this.transitionsBetween(a,t)<this.transitionsBetween(o,i)?(e[0]=t,e[1]=n,e[2]=r,e[3]=i):(e[0]=n,e[1]=r,e[2]=i,e[3]=t),e}correctTopRight(e){let t=e[0],n=e[1],r=e[2],i=e[3],s=this.transitionsBetween(t,i),a=this.transitionsBetween(n,i),o=vt.shiftPoint(t,n,4*(a+1)),l=vt.shiftPoint(r,n,4*(s+1));s=this.transitionsBetween(o,i),a=this.transitionsBetween(l,i);let c=new oe(i.getX()+(r.getX()-n.getX())/(s+1),i.getY()+(r.getY()-n.getY())/(s+1)),u=new oe(i.getX()+(t.getX()-n.getX())/(a+1),i.getY()+(t.getY()-n.getY())/(a+1));return this.isValid(c)?this.isValid(u)?this.transitionsBetween(o,c)+this.transitionsBetween(l,c)>this.transitionsBetween(o,u)+this.transitionsBetween(l,u)?c:u:c:this.isValid(u)?u:null}shiftToModuleCenter(e){let t=e[0],n=e[1],r=e[2],i=e[3],s=this.transitionsBetween(t,i)+1,a=this.transitionsBetween(r,i)+1,o=vt.shiftPoint(t,n,4*a),l=vt.shiftPoint(r,n,4*s);s=this.transitionsBetween(o,i)+1,a=this.transitionsBetween(l,i)+1,1===(1&s)&&(s+=1),1===(1&a)&&(a+=1);let c,u,d=(t.getX()+n.getX()+r.getX()+i.getX())/4,h=(t.getY()+n.getY()+r.getY()+i.getY())/4;return t=vt.moveAway(t,d,h),n=vt.moveAway(n,d,h),r=vt.moveAway(r,d,h),i=vt.moveAway(i,d,h),o=vt.shiftPoint(t,n,4*a),o=vt.shiftPoint(o,i,4*s),c=vt.shiftPoint(n,t,4*a),c=vt.shiftPoint(c,r,4*s),l=vt.shiftPoint(r,i,4*a),l=vt.shiftPoint(l,n,4*s),u=vt.shiftPoint(i,r,4*a),u=vt.shiftPoint(u,t,4*s),[o,c,l,u]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,t,n,r,i,s,a){return pe.getInstance().sampleGrid(e,s,a,.5,.5,s-.5,.5,s-.5,a-.5,.5,a-.5,t.getX(),t.getY(),i.getX(),i.getY(),r.getX(),r.getY(),n.getX(),n.getY())}transitionsBetween(e,t){let n=Math.trunc(e.getX()),r=Math.trunc(e.getY()),i=Math.trunc(t.getX()),s=Math.trunc(t.getY()),a=Math.abs(s-r)>Math.abs(i-n);if(a){let e=n;n=r,r=e,e=i,i=s,s=e}let o=Math.abs(i-n),l=Math.abs(s-r),c=-o/2,u=r<s?1:-1,d=n<i?1:-1,h=0,f=this.image.get(a?r:n,a?n:r);for(let p=n,m=r;p!==i;p+=d){let e=this.image.get(a?m:p,a?p:m);if(e!==f&&(h++,f=e),c+=l,c>0){if(m===s)break;m+=u,c-=o}}return h}}class wt{constructor(){this.decoder=new yt}decode(e){let t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!=r&&r.has(S.PURE_BARCODE)){const r=wt.extractPureBits(e.getBlackMatrix());t=this.decoder.decode(r),n=wt.NO_POINTS}else{const r=new vt(e.getBlackMatrix()).detect();t=this.decoder.decode(r.getBits()),n=r.getPoints()}const i=t.getRawBytes(),s=new U(t.getText(),i,8*i.length,n,V.DATA_MATRIX,m.currentTimeMillis()),a=t.getByteSegments();null!=a&&s.putMetadata(X.BYTE_SEGMENTS,a);const o=t.getECLevel();return null!=o&&s.putMetadata(X.ERROR_CORRECTION_LEVEL,o),s}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(null==t||null==n)throw new k;const r=this.moduleSize(t,e);let i=t[1];const s=n[1];let a=t[0];const o=(n[0]-a+1)/r,l=(s-i+1)/r;if(o<=0||l<=0)throw new k;const c=r/2;i+=c,a+=c;const u=new I(o,l);for(let d=0;d<l;d++){const t=i+d*r;for(let n=0;n<o;n++)e.get(a+n*r,t)&&u.set(n,d)}return u}static moduleSize(e,t){const n=t.getWidth();let r=e[0];const i=e[1];for(;r<n&&t.get(r,i);)r++;if(r===n)throw new k;const s=r-e[0];if(0===s)throw new k;return s}}wt.NO_POINTS=[];class bt extends B{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;super(new wt,e)}}!function(e){e[e.L=0]="L",e[e.M=1]="M",e[e.Q=2]="Q",e[e.H=3]="H"}(q||(q={}));class xt{constructor(e,t,n){this.value=e,this.stringValue=t,this.bits=n,xt.FOR_BITS.set(n,this),xt.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return xt.L;case"M":return xt.M;case"Q":return xt.Q;case"H":return xt.H;default:throw new u(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof xt))return!1;const t=e;return this.value===t.value}static forBits(e){if(e<0||e>=xt.FOR_BITS.size)throw new d;return xt.FOR_BITS.get(e)}}xt.FOR_BITS=new Map,xt.FOR_VALUE=new Map,xt.L=new xt(q.L,"L",1),xt.M=new xt(q.M,"M",0),xt.Q=new xt(q.Q,"Q",3),xt.H=new xt(q.H,"H",2);class St{constructor(e){this.errorCorrectionLevel=xt.forBits(e>>3&3),this.dataMask=7&e}static numBitsDiffering(e,t){return w.bitCount(e^t)}static decodeFormatInformation(e,t){const n=St.doDecodeFormatInformation(e,t);return null!==n?n:St.doDecodeFormatInformation(e^St.FORMAT_INFO_MASK_QR,t^St.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,t){let n=Number.MAX_SAFE_INTEGER,r=0;for(const i of St.FORMAT_INFO_DECODE_LOOKUP){const s=i[0];if(s===e||s===t)return new St(i[1]);let a=St.numBitsDiffering(e,s);a<n&&(r=i[1],n=a),e!==t&&(a=St.numBitsDiffering(t,s),a<n&&(r=i[1],n=a))}return n<=3?new St(r):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof St))return!1;const t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask}}St.FORMAT_INFO_MASK_QR=21522,St.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class At{constructor(e){this.ecCodewordsPerBlock=e;for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.ecBlocks=n}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const t=this.ecBlocks;for(const n of t)e+=n.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class Et{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Nt{constructor(e,t){this.versionNumber=e,this.alignmentPatternCenters=t;for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];this.ecBlocks=r;let s=0;const a=r[0].getECCodewordsPerBlock(),o=r[0].getECBlocks();for(const l of o)s+=l.getCount()*(l.getDataCodewords()+a);this.totalCodewords=s}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new A;try{return this.getVersionForNumber((e-17)/4)}catch(t){throw new A}}static getVersionForNumber(e){if(e<1||e>40)throw new d;return Nt.VERSIONS[e-1]}static decodeVersionInformation(e){let t=Number.MAX_SAFE_INTEGER,n=0;for(let r=0;r<Nt.VERSION_DECODE_INFO.length;r++){const i=Nt.VERSION_DECODE_INFO[r];if(i===e)return Nt.getVersionForNumber(r+7);const s=St.numBitsDiffering(e,i);s<t&&(n=r+7,t=s)}return t<=3?Nt.getVersionForNumber(n):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),t=new I(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);const n=this.alignmentPatternCenters.length;for(let r=0;r<n;r++){const e=this.alignmentPatternCenters[r]-2;for(let i=0;i<n;i++)0===r&&(0===i||i===n-1)||r===n-1&&0===i||t.setRegion(this.alignmentPatternCenters[i]-2,e,5,5)}return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t}toString(){return""+this.versionNumber}}Nt.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Nt.VERSIONS=[new Nt(1,new Int32Array(0),new At(7,new Et(1,19)),new At(10,new Et(1,16)),new At(13,new Et(1,13)),new At(17,new Et(1,9))),new Nt(2,Int32Array.from([6,18]),new At(10,new Et(1,34)),new At(16,new Et(1,28)),new At(22,new Et(1,22)),new At(28,new Et(1,16))),new Nt(3,Int32Array.from([6,22]),new At(15,new Et(1,55)),new At(26,new Et(1,44)),new At(18,new Et(2,17)),new At(22,new Et(2,13))),new Nt(4,Int32Array.from([6,26]),new At(20,new Et(1,80)),new At(18,new Et(2,32)),new At(26,new Et(2,24)),new At(16,new Et(4,9))),new Nt(5,Int32Array.from([6,30]),new At(26,new Et(1,108)),new At(24,new Et(2,43)),new At(18,new Et(2,15),new Et(2,16)),new At(22,new Et(2,11),new Et(2,12))),new Nt(6,Int32Array.from([6,34]),new At(18,new Et(2,68)),new At(16,new Et(4,27)),new At(24,new Et(4,19)),new At(28,new Et(4,15))),new Nt(7,Int32Array.from([6,22,38]),new At(20,new Et(2,78)),new At(18,new Et(4,31)),new At(18,new Et(2,14),new Et(4,15)),new At(26,new Et(4,13),new Et(1,14))),new Nt(8,Int32Array.from([6,24,42]),new At(24,new Et(2,97)),new At(22,new Et(2,38),new Et(2,39)),new At(22,new Et(4,18),new Et(2,19)),new At(26,new Et(4,14),new Et(2,15))),new Nt(9,Int32Array.from([6,26,46]),new At(30,new Et(2,116)),new At(22,new Et(3,36),new Et(2,37)),new At(20,new Et(4,16),new Et(4,17)),new At(24,new Et(4,12),new Et(4,13))),new Nt(10,Int32Array.from([6,28,50]),new At(18,new Et(2,68),new Et(2,69)),new At(26,new Et(4,43),new Et(1,44)),new At(24,new Et(6,19),new Et(2,20)),new At(28,new Et(6,15),new Et(2,16))),new Nt(11,Int32Array.from([6,30,54]),new At(20,new Et(4,81)),new At(30,new Et(1,50),new Et(4,51)),new At(28,new Et(4,22),new Et(4,23)),new At(24,new Et(3,12),new Et(8,13))),new Nt(12,Int32Array.from([6,32,58]),new At(24,new Et(2,92),new Et(2,93)),new At(22,new Et(6,36),new Et(2,37)),new At(26,new Et(4,20),new Et(6,21)),new At(28,new Et(7,14),new Et(4,15))),new Nt(13,Int32Array.from([6,34,62]),new At(26,new Et(4,107)),new At(22,new Et(8,37),new Et(1,38)),new At(24,new Et(8,20),new Et(4,21)),new At(22,new Et(12,11),new Et(4,12))),new Nt(14,Int32Array.from([6,26,46,66]),new At(30,new Et(3,115),new Et(1,116)),new At(24,new Et(4,40),new Et(5,41)),new At(20,new Et(11,16),new Et(5,17)),new At(24,new Et(11,12),new Et(5,13))),new Nt(15,Int32Array.from([6,26,48,70]),new At(22,new Et(5,87),new Et(1,88)),new At(24,new Et(5,41),new Et(5,42)),new At(30,new Et(5,24),new Et(7,25)),new At(24,new Et(11,12),new Et(7,13))),new Nt(16,Int32Array.from([6,26,50,74]),new At(24,new Et(5,98),new Et(1,99)),new At(28,new Et(7,45),new Et(3,46)),new At(24,new Et(15,19),new Et(2,20)),new At(30,new Et(3,15),new Et(13,16))),new Nt(17,Int32Array.from([6,30,54,78]),new At(28,new Et(1,107),new Et(5,108)),new At(28,new Et(10,46),new Et(1,47)),new At(28,new Et(1,22),new Et(15,23)),new At(28,new Et(2,14),new Et(17,15))),new Nt(18,Int32Array.from([6,30,56,82]),new At(30,new Et(5,120),new Et(1,121)),new At(26,new Et(9,43),new Et(4,44)),new At(28,new Et(17,22),new Et(1,23)),new At(28,new Et(2,14),new Et(19,15))),new Nt(19,Int32Array.from([6,30,58,86]),new At(28,new Et(3,113),new Et(4,114)),new At(26,new Et(3,44),new Et(11,45)),new At(26,new Et(17,21),new Et(4,22)),new At(26,new Et(9,13),new Et(16,14))),new Nt(20,Int32Array.from([6,34,62,90]),new At(28,new Et(3,107),new Et(5,108)),new At(26,new Et(3,41),new Et(13,42)),new At(30,new Et(15,24),new Et(5,25)),new At(28,new Et(15,15),new Et(10,16))),new Nt(21,Int32Array.from([6,28,50,72,94]),new At(28,new Et(4,116),new Et(4,117)),new At(26,new Et(17,42)),new At(28,new Et(17,22),new Et(6,23)),new At(30,new Et(19,16),new Et(6,17))),new Nt(22,Int32Array.from([6,26,50,74,98]),new At(28,new Et(2,111),new Et(7,112)),new At(28,new Et(17,46)),new At(30,new Et(7,24),new Et(16,25)),new At(24,new Et(34,13))),new Nt(23,Int32Array.from([6,30,54,78,102]),new At(30,new Et(4,121),new Et(5,122)),new At(28,new Et(4,47),new Et(14,48)),new At(30,new Et(11,24),new Et(14,25)),new At(30,new Et(16,15),new Et(14,16))),new Nt(24,Int32Array.from([6,28,54,80,106]),new At(30,new Et(6,117),new Et(4,118)),new At(28,new Et(6,45),new Et(14,46)),new At(30,new Et(11,24),new Et(16,25)),new At(30,new Et(30,16),new Et(2,17))),new Nt(25,Int32Array.from([6,32,58,84,110]),new At(26,new Et(8,106),new Et(4,107)),new At(28,new Et(8,47),new Et(13,48)),new At(30,new Et(7,24),new Et(22,25)),new At(30,new Et(22,15),new Et(13,16))),new Nt(26,Int32Array.from([6,30,58,86,114]),new At(28,new Et(10,114),new Et(2,115)),new At(28,new Et(19,46),new Et(4,47)),new At(28,new Et(28,22),new Et(6,23)),new At(30,new Et(33,16),new Et(4,17))),new Nt(27,Int32Array.from([6,34,62,90,118]),new At(30,new Et(8,122),new Et(4,123)),new At(28,new Et(22,45),new Et(3,46)),new At(30,new Et(8,23),new Et(26,24)),new At(30,new Et(12,15),new Et(28,16))),new Nt(28,Int32Array.from([6,26,50,74,98,122]),new At(30,new Et(3,117),new Et(10,118)),new At(28,new Et(3,45),new Et(23,46)),new At(30,new Et(4,24),new Et(31,25)),new At(30,new Et(11,15),new Et(31,16))),new Nt(29,Int32Array.from([6,30,54,78,102,126]),new At(30,new Et(7,116),new Et(7,117)),new At(28,new Et(21,45),new Et(7,46)),new At(30,new Et(1,23),new Et(37,24)),new At(30,new Et(19,15),new Et(26,16))),new Nt(30,Int32Array.from([6,26,52,78,104,130]),new At(30,new Et(5,115),new Et(10,116)),new At(28,new Et(19,47),new Et(10,48)),new At(30,new Et(15,24),new Et(25,25)),new At(30,new Et(23,15),new Et(25,16))),new Nt(31,Int32Array.from([6,30,56,82,108,134]),new At(30,new Et(13,115),new Et(3,116)),new At(28,new Et(2,46),new Et(29,47)),new At(30,new Et(42,24),new Et(1,25)),new At(30,new Et(23,15),new Et(28,16))),new Nt(32,Int32Array.from([6,34,60,86,112,138]),new At(30,new Et(17,115)),new At(28,new Et(10,46),new Et(23,47)),new At(30,new Et(10,24),new Et(35,25)),new At(30,new Et(19,15),new Et(35,16))),new Nt(33,Int32Array.from([6,30,58,86,114,142]),new At(30,new Et(17,115),new Et(1,116)),new At(28,new Et(14,46),new Et(21,47)),new At(30,new Et(29,24),new Et(19,25)),new At(30,new Et(11,15),new Et(46,16))),new Nt(34,Int32Array.from([6,34,62,90,118,146]),new At(30,new Et(13,115),new Et(6,116)),new At(28,new Et(14,46),new Et(23,47)),new At(30,new Et(44,24),new Et(7,25)),new At(30,new Et(59,16),new Et(1,17))),new Nt(35,Int32Array.from([6,30,54,78,102,126,150]),new At(30,new Et(12,121),new Et(7,122)),new At(28,new Et(12,47),new Et(26,48)),new At(30,new Et(39,24),new Et(14,25)),new At(30,new Et(22,15),new Et(41,16))),new Nt(36,Int32Array.from([6,24,50,76,102,128,154]),new At(30,new Et(6,121),new Et(14,122)),new At(28,new Et(6,47),new Et(34,48)),new At(30,new Et(46,24),new Et(10,25)),new At(30,new Et(2,15),new Et(64,16))),new Nt(37,Int32Array.from([6,28,54,80,106,132,158]),new At(30,new Et(17,122),new Et(4,123)),new At(28,new Et(29,46),new Et(14,47)),new At(30,new Et(49,24),new Et(10,25)),new At(30,new Et(24,15),new Et(46,16))),new Nt(38,Int32Array.from([6,32,58,84,110,136,162]),new At(30,new Et(4,122),new Et(18,123)),new At(28,new Et(13,46),new Et(32,47)),new At(30,new Et(48,24),new Et(14,25)),new At(30,new Et(42,15),new Et(32,16))),new Nt(39,Int32Array.from([6,26,54,82,110,138,166]),new At(30,new Et(20,117),new Et(4,118)),new At(28,new Et(40,47),new Et(7,48)),new At(30,new Et(43,24),new Et(22,25)),new At(30,new Et(10,15),new Et(67,16))),new Nt(40,Int32Array.from([6,30,58,86,114,142,170]),new At(30,new Et(19,118),new Et(6,119)),new At(28,new Et(18,47),new Et(31,48)),new At(30,new Et(34,24),new Et(34,25)),new At(30,new Et(20,15),new Et(61,16)))],function(e){e[e.DATA_MASK_000=0]="DATA_MASK_000",e[e.DATA_MASK_001=1]="DATA_MASK_001",e[e.DATA_MASK_010=2]="DATA_MASK_010",e[e.DATA_MASK_011=3]="DATA_MASK_011",e[e.DATA_MASK_100=4]="DATA_MASK_100",e[e.DATA_MASK_101=5]="DATA_MASK_101",e[e.DATA_MASK_110=6]="DATA_MASK_110",e[e.DATA_MASK_111=7]="DATA_MASK_111"}(G||(G={}));class Ct{constructor(e,t){this.value=e,this.isMasked=t}unmaskBitMatrix(e,t){for(let n=0;n<t;n++)for(let r=0;r<t;r++)this.isMasked(n,r)&&e.flip(r,n)}}Ct.values=new Map([[G.DATA_MASK_000,new Ct(G.DATA_MASK_000,(e,t)=>0===(e+t&1))],[G.DATA_MASK_001,new Ct(G.DATA_MASK_001,(e,t)=>0===(1&e))],[G.DATA_MASK_010,new Ct(G.DATA_MASK_010,(e,t)=>t%3===0)],[G.DATA_MASK_011,new Ct(G.DATA_MASK_011,(e,t)=>(e+t)%3===0)],[G.DATA_MASK_100,new Ct(G.DATA_MASK_100,(e,t)=>0===(Math.floor(e/2)+Math.floor(t/3)&1))],[G.DATA_MASK_101,new Ct(G.DATA_MASK_101,(e,t)=>e*t%6===0)],[G.DATA_MASK_110,new Ct(G.DATA_MASK_110,(e,t)=>e*t%6<3)],[G.DATA_MASK_111,new Ct(G.DATA_MASK_111,(e,t)=>0===(e+t+e*t%3&1))]]);class _t{constructor(e){const t=e.getHeight();if(t<21||1!==(3&t))throw new A;this.bitMatrix=e}readFormatInformation(){if(null!==this.parsedFormatInfo&&void 0!==this.parsedFormatInfo)return this.parsedFormatInfo;let e=0;for(let i=0;i<6;i++)e=this.copyBit(i,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let i=5;i>=0;i--)e=this.copyBit(8,i,e);const t=this.bitMatrix.getHeight();let n=0;const r=t-7;for(let i=t-1;i>=r;i--)n=this.copyBit(8,i,n);for(let i=t-8;i<t;i++)n=this.copyBit(i,8,n);if(this.parsedFormatInfo=St.decodeFormatInformation(e,n),null!==this.parsedFormatInfo)return this.parsedFormatInfo;throw new A}readVersion(){if(null!==this.parsedVersion&&void 0!==this.parsedVersion)return this.parsedVersion;const e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return Nt.getVersionForNumber(t);let n=0;const r=e-11;for(let s=5;s>=0;s--)for(let t=e-9;t>=r;t--)n=this.copyBit(t,s,n);let i=Nt.decodeVersionInformation(n);if(null!==i&&i.getDimensionForVersion()===e)return this.parsedVersion=i,i;n=0;for(let s=5;s>=0;s--)for(let t=e-9;t>=r;t--)n=this.copyBit(s,t,n);if(i=Nt.decodeVersionInformation(n),null!==i&&i.getDimensionForVersion()===e)return this.parsedVersion=i,i;throw new A}copyBit(e,t,n){return(this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t))?n<<1|1:n<<1}readCodewords(){const e=this.readFormatInformation(),t=this.readVersion(),n=Ct.values.get(e.getDataMask()),r=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,r);const i=t.buildFunctionPattern();let s=!0;const a=new Uint8Array(t.getTotalCodewords());let o=0,l=0,c=0;for(let u=r-1;u>0;u-=2){6===u&&u--;for(let e=0;e<r;e++){const t=s?r-1-e:e;for(let e=0;e<2;e++)i.get(u-e,t)||(c++,l<<=1,this.bitMatrix.get(u-e,t)&&(l|=1),8===c&&(a[o++]=l,c=0,l=0))}s=!s}if(o!==t.getTotalCodewords())throw new A;return a}remask(){if(null===this.parsedFormatInfo)return;const e=Ct.values[this.parsedFormatInfo.getDataMask()],t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let t=0,n=e.getWidth();t<n;t++)for(let r=t+1,i=e.getHeight();r<i;r++)e.get(t,r)!==e.get(r,t)&&(e.flip(r,t),e.flip(t,r))}}class Tt{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t,n){if(e.length!==t.getTotalCodewords())throw new d;const r=t.getECBlocksForLevel(n);let i=0;const s=r.getECBlocks();for(const d of s)i+=d.getCount();const a=new Array(i);let o=0;for(const d of s)for(let e=0;e<d.getCount();e++){const e=d.getDataCodewords(),t=r.getECCodewordsPerBlock()+e;a[o++]=new Tt(e,new Uint8Array(t))}const l=a[0].codewords.length;let c=a.length-1;for(;c>=0&&a[c].codewords.length!==l;)c--;c++;const u=l-r.getECCodewordsPerBlock();let h=0;for(let d=0;d<u;d++)for(let t=0;t<o;t++)a[t].codewords[d]=e[h++];for(let d=c;d<o;d++)a[d].codewords[u]=e[h++];const f=a[0].codewords.length;for(let d=u;d<f;d++)for(let t=0;t<o;t++){const n=t<c?d:d+1;a[t].codewords[n]=e[h++]}return a}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}!function(e){e[e.TERMINATOR=0]="TERMINATOR",e[e.NUMERIC=1]="NUMERIC",e[e.ALPHANUMERIC=2]="ALPHANUMERIC",e[e.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",e[e.BYTE=4]="BYTE",e[e.ECI=5]="ECI",e[e.KANJI=6]="KANJI",e[e.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",e[e.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",e[e.HANZI=9]="HANZI"}(K||(K={}));class It{constructor(e,t,n,r){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=n,this.bits=r,It.FOR_BITS.set(r,this),It.FOR_VALUE.set(e,this)}static forBits(e){const t=It.FOR_BITS.get(e);if(void 0===t)throw new d;return t}getCharacterCountBits(e){const t=e.getVersionNumber();let n;return n=t<=9?0:t<=26?1:2,this.characterCountBitsForVersions[n]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof It))return!1;const t=e;return this.value===t.value}toString(){return this.stringValue}}It.FOR_BITS=new Map,It.FOR_VALUE=new Map,It.TERMINATOR=new It(K.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),It.NUMERIC=new It(K.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),It.ALPHANUMERIC=new It(K.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),It.STRUCTURED_APPEND=new It(K.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),It.BYTE=new It(K.BYTE,"BYTE",Int32Array.from([8,16,16]),4),It.ECI=new It(K.ECI,"ECI",Int32Array.from([0,0,0]),7),It.KANJI=new It(K.KANJI,"KANJI",Int32Array.from([8,10,12]),8),It.FNC1_FIRST_POSITION=new It(K.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),It.FNC1_SECOND_POSITION=new It(K.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),It.HANZI=new It(K.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class kt{static decode(e,t,n,r){const i=new mt(e);let s=new T;const a=new Array;let o=-1,l=-1;try{let e,n=null,c=!1;do{if(i.available()<4)e=It.TERMINATOR;else{const t=i.readBits(4);e=It.forBits(t)}switch(e){case It.TERMINATOR:break;case It.FNC1_FIRST_POSITION:case It.FNC1_SECOND_POSITION:c=!0;break;case It.STRUCTURED_APPEND:if(i.available()<16)throw new A;o=i.readBits(8),l=i.readBits(8);break;case It.ECI:const u=kt.parseECIValue(i);if(n=E.getCharacterSetECIByValue(u),null===n)throw new A;break;case It.HANZI:const d=i.readBits(4),h=i.readBits(e.getCharacterCountBits(t));d===kt.GB2312_SUBSET&&kt.decodeHanziSegment(i,s,h);break;default:const f=i.readBits(e.getCharacterCountBits(t));switch(e){case It.NUMERIC:kt.decodeNumericSegment(i,s,f);break;case It.ALPHANUMERIC:kt.decodeAlphanumericSegment(i,s,f,c);break;case It.BYTE:kt.decodeByteSegment(i,s,f,n,a,r);break;case It.KANJI:kt.decodeKanjiSegment(i,s,f);break;default:throw new A}}}while(e!==It.TERMINATOR)}catch(c){throw new A}return new Q(e,s.toString(),0===a.length?null:a,null===n?null:n.toString(),o,l)}static decodeHanziSegment(e,t,n){if(13*n>e.available())throw new A;const r=new Uint8Array(2*n);let i=0;for(;n>0;){const t=e.readBits(13);let s=t/96<<8&4294967295|t%96;s+=s<959?41377:42657,r[i]=s>>8&255,r[i+1]=255&s,i+=2,n--}try{t.append(C.decode(r,_.GB2312))}catch(s){throw new A(s)}}static decodeKanjiSegment(e,t,n){if(13*n>e.available())throw new A;const r=new Uint8Array(2*n);let i=0;for(;n>0;){const t=e.readBits(13);let s=t/192<<8&4294967295|t%192;s+=s<7936?33088:49472,r[i]=s>>8,r[i+1]=s,i+=2,n--}try{t.append(C.decode(r,_.SHIFT_JIS))}catch(s){throw new A(s)}}static decodeByteSegment(e,t,n,r,i,s){if(8*n>e.available())throw new A;const a=new Uint8Array(n);for(let c=0;c<n;c++)a[c]=e.readBits(8);let o;o=null===r?_.guessEncoding(a,s):r.getName();try{t.append(C.decode(a,o))}catch(l){throw new A(l)}i.push(a)}static toAlphaNumericChar(e){if(e>=kt.ALPHANUMERIC_CHARS.length)throw new A;return kt.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,t,n,r){const i=t.length();for(;n>1;){if(e.available()<11)throw new A;const r=e.readBits(11);t.append(kt.toAlphaNumericChar(Math.floor(r/45))),t.append(kt.toAlphaNumericChar(r%45)),n-=2}if(1===n){if(e.available()<6)throw new A;t.append(kt.toAlphaNumericChar(e.readBits(6)))}if(r)for(let s=i;s<t.length();s++)"%"===t.charAt(s)&&(s<t.length()-1&&"%"===t.charAt(s+1)?t.deleteCharAt(s+1):t.setCharAt(s,String.fromCharCode(29)))}static decodeNumericSegment(e,t,n){for(;n>=3;){if(e.available()<10)throw new A;const r=e.readBits(10);if(r>=1e3)throw new A;t.append(kt.toAlphaNumericChar(Math.floor(r/100))),t.append(kt.toAlphaNumericChar(Math.floor(r/10)%10)),t.append(kt.toAlphaNumericChar(r%10)),n-=3}if(2===n){if(e.available()<7)throw new A;const n=e.readBits(7);if(n>=100)throw new A;t.append(kt.toAlphaNumericChar(Math.floor(n/10))),t.append(kt.toAlphaNumericChar(n%10))}else if(1===n){if(e.available()<4)throw new A;const n=e.readBits(4);if(n>=10)throw new A;t.append(kt.toAlphaNumericChar(n))}}static parseECIValue(e){const t=e.readBits(8);if(0===(128&t))return 127&t;if(128===(192&t))return(63&t)<<8&4294967295|e.readBits(8);if(192===(224&t))return(31&t)<<16&4294967295|e.readBits(16);throw new A}}kt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",kt.GB2312_SUBSET=1;class Pt{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||null===e||e.length<3)return;const t=e[0];e[0]=e[2],e[2]=t}}class Rt{constructor(){this.rsDecoder=new re(ee.QR_CODE_FIELD_256)}decodeBooleanArray(e,t){return this.decodeBitMatrix(I.parseFromBooleanArray(e),t)}decodeBitMatrix(e,t){const n=new _t(e);let r=null;try{return this.decodeBitMatrixParser(n,t)}catch(i){r=i}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();const e=this.decodeBitMatrixParser(n,t);return e.setOther(new Pt(!0)),e}catch(i){if(null!==r)throw r;throw i}}decodeBitMatrixParser(e,t){const n=e.readVersion(),r=e.readFormatInformation().getErrorCorrectionLevel(),i=e.readCodewords(),s=Tt.getDataBlocks(i,n,r);let a=0;for(const c of s)a+=c.getNumDataCodewords();const o=new Uint8Array(a);let l=0;for(const c of s){const e=c.getCodewords(),t=c.getNumDataCodewords();this.correctErrors(e,t);for(let n=0;n<t;n++)o[l++]=e[n]}return kt.decode(o,n,r,t)}correctErrors(e,t){const n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch(r){throw new f}for(let i=0;i<t;i++)e[i]=n[i]}}class Dt extends oe{constructor(e,t,n){super(e,t),this.estimatedModuleSize=n}aboutEquals(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){const t=Math.abs(e-this.estimatedModuleSize);return t<=1||t<=this.estimatedModuleSize}return!1}combineEstimate(e,t,n){const r=(this.getX()+t)/2,i=(this.getY()+e)/2,s=(this.estimatedModuleSize+n)/2;return new Dt(r,i,s)}}class Ot{constructor(e,t,n,r,i,s,a){this.image=e,this.startX=t,this.startY=n,this.width=r,this.height=i,this.moduleSize=s,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,t=this.height,n=e+this.width,r=this.startY+t/2,i=new Int32Array(3),s=this.image;for(let a=0;a<t;a++){const t=r+(0===(1&a)?Math.floor((a+1)/2):-Math.floor((a+1)/2));i[0]=0,i[1]=0,i[2]=0;let o=e;for(;o<n&&!s.get(o,t);)o++;let l=0;for(;o<n;){if(s.get(o,t))if(1===l)i[1]++;else if(2===l){if(this.foundPatternCross(i)){const e=this.handlePossibleCenter(i,t,o);if(null!==e)return e}i[0]=i[2],i[1]=1,i[2]=0,l=1}else i[++l]++;else 1===l&&l++,i[l]++;o++}if(this.foundPatternCross(i)){const e=this.handlePossibleCenter(i,t,n);if(null!==e)return e}}if(0!==this.possibleCenters.length)return this.possibleCenters[0];throw new k}static centerFromEnd(e,t){return t-e[2]-e[1]/2}foundPatternCross(e){const t=this.moduleSize,n=t/2;for(let r=0;r<3;r++)if(Math.abs(t-e[r])>=n)return!1;return!0}crossCheckVertical(e,t,n,r){const i=this.image,s=i.getHeight(),a=this.crossCheckStateCount;a[0]=0,a[1]=0,a[2]=0;let o=e;for(;o>=0&&i.get(t,o)&&a[1]<=n;)a[1]++,o--;if(o<0||a[1]>n)return NaN;for(;o>=0&&!i.get(t,o)&&a[0]<=n;)a[0]++,o--;if(a[0]>n)return NaN;for(o=e+1;o<s&&i.get(t,o)&&a[1]<=n;)a[1]++,o++;if(o===s||a[1]>n)return NaN;for(;o<s&&!i.get(t,o)&&a[2]<=n;)a[2]++,o++;if(a[2]>n)return NaN;const l=a[0]+a[1]+a[2];return 5*Math.abs(l-r)>=2*r?NaN:this.foundPatternCross(a)?Ot.centerFromEnd(a,o):NaN}handlePossibleCenter(e,t,n){const r=e[0]+e[1]+e[2],i=Ot.centerFromEnd(e,n),s=this.crossCheckVertical(t,i,2*e[1],r);if(!isNaN(s)){const t=(e[0]+e[1]+e[2])/3;for(const e of this.possibleCenters)if(e.aboutEquals(t,s,i))return e.combineEstimate(s,i,t);const n=new Dt(i,s,t);this.possibleCenters.push(n),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(n)}return null}}class Lt extends oe{constructor(e,t,n,r){super(e,t),this.estimatedModuleSize=n,this.count=r,void 0===r&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){const t=Math.abs(e-this.estimatedModuleSize);return t<=1||t<=this.estimatedModuleSize}return!1}combineEstimate(e,t,n){const r=this.count+1,i=(this.count*this.getX()+t)/r,s=(this.count*this.getY()+e)/r,a=(this.count*this.estimatedModuleSize+n)/r;return new Lt(i,s,a,r)}}class Mt{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Ft{constructor(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){const t=null!==e&&void 0!==e&&void 0!==e.get(S.TRY_HARDER),n=null!==e&&void 0!==e&&void 0!==e.get(S.PURE_BARCODE),r=this.image,i=r.getHeight(),s=r.getWidth();let a=Math.floor(3*i/(4*Ft.MAX_MODULES));(a<Ft.MIN_SKIP||t)&&(a=Ft.MIN_SKIP);let o=!1;const l=new Int32Array(5);for(let u=a-1;u<i&&!o;u+=a){l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0;let e=0;for(let t=0;t<s;t++)if(r.get(t,u))1===(1&e)&&e++,l[e]++;else if(0===(1&e))if(4===e)if(Ft.foundPatternCross(l)){if(!0!==this.handlePossibleCenter(l,u,t,n)){l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,e=3;continue}if(a=2,!0===this.hasSkipped)o=this.haveMultiplyConfirmedCenters();else{const e=this.findRowSkip();e>l[2]&&(u+=e-l[2]-a,t=s-1)}e=0,l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0}else l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,e=3;else l[++e]++;else l[e]++;Ft.foundPatternCross(l)&&!0===this.handlePossibleCenter(l,u,s,n)&&(a=l[0],this.hasSkipped&&(o=this.haveMultiplyConfirmedCenters()))}const c=this.selectBestPatterns();return oe.orderBestPatterns(c),new Mt(c)}static centerFromEnd(e,t){return t-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let t=0;for(let i=0;i<5;i++){const n=e[i];if(0===n)return!1;t+=n}if(t<7)return!1;const n=t/7,r=n/2;return Math.abs(n-e[0])<r&&Math.abs(n-e[1])<r&&Math.abs(3*n-e[2])<3*r&&Math.abs(n-e[3])<r&&Math.abs(n-e[4])<r}getCrossCheckStateCount(){const e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,t,n,r){const i=this.getCrossCheckStateCount();let s=0;const a=this.image;for(;e>=s&&t>=s&&a.get(t-s,e-s);)i[2]++,s++;if(e<s||t<s)return!1;for(;e>=s&&t>=s&&!a.get(t-s,e-s)&&i[1]<=n;)i[1]++,s++;if(e<s||t<s||i[1]>n)return!1;for(;e>=s&&t>=s&&a.get(t-s,e-s)&&i[0]<=n;)i[0]++,s++;if(i[0]>n)return!1;const o=a.getHeight(),l=a.getWidth();for(s=1;e+s<o&&t+s<l&&a.get(t+s,e+s);)i[2]++,s++;if(e+s>=o||t+s>=l)return!1;for(;e+s<o&&t+s<l&&!a.get(t+s,e+s)&&i[3]<n;)i[3]++,s++;if(e+s>=o||t+s>=l||i[3]>=n)return!1;for(;e+s<o&&t+s<l&&a.get(t+s,e+s)&&i[4]<n;)i[4]++,s++;if(i[4]>=n)return!1;const c=i[0]+i[1]+i[2]+i[3]+i[4];return Math.abs(c-r)<2*r&&Ft.foundPatternCross(i)}crossCheckVertical(e,t,n,r){const i=this.image,s=i.getHeight(),a=this.getCrossCheckStateCount();let o=e;for(;o>=0&&i.get(t,o);)a[2]++,o--;if(o<0)return NaN;for(;o>=0&&!i.get(t,o)&&a[1]<=n;)a[1]++,o--;if(o<0||a[1]>n)return NaN;for(;o>=0&&i.get(t,o)&&a[0]<=n;)a[0]++,o--;if(a[0]>n)return NaN;for(o=e+1;o<s&&i.get(t,o);)a[2]++,o++;if(o===s)return NaN;for(;o<s&&!i.get(t,o)&&a[3]<n;)a[3]++,o++;if(o===s||a[3]>=n)return NaN;for(;o<s&&i.get(t,o)&&a[4]<n;)a[4]++,o++;if(a[4]>=n)return NaN;const l=a[0]+a[1]+a[2]+a[3]+a[4];return 5*Math.abs(l-r)>=2*r?NaN:Ft.foundPatternCross(a)?Ft.centerFromEnd(a,o):NaN}crossCheckHorizontal(e,t,n,r){const i=this.image,s=i.getWidth(),a=this.getCrossCheckStateCount();let o=e;for(;o>=0&&i.get(o,t);)a[2]++,o--;if(o<0)return NaN;for(;o>=0&&!i.get(o,t)&&a[1]<=n;)a[1]++,o--;if(o<0||a[1]>n)return NaN;for(;o>=0&&i.get(o,t)&&a[0]<=n;)a[0]++,o--;if(a[0]>n)return NaN;for(o=e+1;o<s&&i.get(o,t);)a[2]++,o++;if(o===s)return NaN;for(;o<s&&!i.get(o,t)&&a[3]<n;)a[3]++,o++;if(o===s||a[3]>=n)return NaN;for(;o<s&&i.get(o,t)&&a[4]<n;)a[4]++,o++;if(a[4]>=n)return NaN;const l=a[0]+a[1]+a[2]+a[3]+a[4];return 5*Math.abs(l-r)>=r?NaN:Ft.foundPatternCross(a)?Ft.centerFromEnd(a,o):NaN}handlePossibleCenter(e,t,n,r){const i=e[0]+e[1]+e[2]+e[3]+e[4];let s=Ft.centerFromEnd(e,n),a=this.crossCheckVertical(t,Math.floor(s),e[2],i);if(!isNaN(a)&&(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(a),e[2],i),!isNaN(s)&&(!r||this.crossCheckDiagonal(Math.floor(a),Math.floor(s),e[2],i)))){const e=i/7;let t=!1;const n=this.possibleCenters;for(let r=0,i=n.length;r<i;r++){const i=n[r];if(i.aboutEquals(e,a,s)){n[r]=i.combineEstimate(a,s,e),t=!0;break}}if(!t){const t=new Lt(s,a,e);n.push(t),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(t)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let e=null;for(const t of this.possibleCenters)if(t.getCount()>=Ft.CENTER_QUORUM){if(null!=e)return this.hasSkipped=!0,Math.floor((Math.abs(e.getX()-t.getX())-Math.abs(e.getY()-t.getY()))/2);e=t}return 0}haveMultiplyConfirmedCenters(){let e=0,t=0;const n=this.possibleCenters.length;for(const s of this.possibleCenters)s.getCount()>=Ft.CENTER_QUORUM&&(e++,t+=s.getEstimatedModuleSize());if(e<3)return!1;const r=t/n;let i=0;for(const s of this.possibleCenters)i+=Math.abs(s.getEstimatedModuleSize()-r);return i<=.05*t}selectBestPatterns(){const e=this.possibleCenters.length;if(e<3)throw new k;const t=this.possibleCenters;let n;if(e>3){let r=0,i=0;for(const e of this.possibleCenters){const t=e.getEstimatedModuleSize();r+=t,i+=t*t}n=r/e;let s=Math.sqrt(i/e-n*n);t.sort((e,t)=>{const r=Math.abs(t.getEstimatedModuleSize()-n),i=Math.abs(e.getEstimatedModuleSize()-n);return r<i?-1:r>i?1:0});const a=Math.max(.2*n,s);for(let e=0;e<t.length&&t.length>3;e++){const r=t[e];Math.abs(r.getEstimatedModuleSize()-n)>a&&(t.splice(e,1),e--)}}if(t.length>3){let e=0;for(const n of t)e+=n.getEstimatedModuleSize();n=e/t.length,t.sort((e,t)=>{if(t.getCount()===e.getCount()){const r=Math.abs(t.getEstimatedModuleSize()-n),i=Math.abs(e.getEstimatedModuleSize()-n);return r<i?1:r>i?-1:0}return t.getCount()-e.getCount()}),t.splice(3)}return[t[0],t[1],t[2]]}}Ft.CENTER_QUORUM=2,Ft.MIN_SKIP=3,Ft.MAX_MODULES=57;class jt{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=null===e||void 0===e?null:e.get(S.NEED_RESULT_POINT_CALLBACK);const t=new Ft(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(t)}processFinderPatternInfo(e){const t=e.getTopLeft(),n=e.getTopRight(),r=e.getBottomLeft(),i=this.calculateModuleSize(t,n,r);if(i<1)throw new k("No pattern found in proccess finder.");const s=jt.computeDimension(t,n,r,i),a=Nt.getProvisionalVersionForDimension(s),o=a.getDimensionForVersion()-7;let l=null;if(a.getAlignmentPatternCenters().length>0){const e=n.getX()-t.getX()+r.getX(),s=n.getY()-t.getY()+r.getY(),a=1-3/o,c=Math.floor(t.getX()+a*(e-t.getX())),u=Math.floor(t.getY()+a*(s-t.getY()));for(let t=4;t<=16;t<<=1)try{l=this.findAlignmentInRegion(i,c,u,t);break}catch(h){if(!(h instanceof k))throw h}}const c=jt.createTransform(t,n,r,l,s),u=jt.sampleGrid(this.image,c,s);let d;return d=null===l?[r,t,n]:[r,t,n,l],new le(u,d)}static createTransform(e,t,n,r,i){const s=i-3.5;let a,o,l,c;return null!==r?(a=r.getX(),o=r.getY(),l=s-3,c=l):(a=t.getX()-e.getX()+n.getX(),o=t.getY()-e.getY()+n.getY(),l=s,c=s),he.quadrilateralToQuadrilateral(3.5,3.5,s,3.5,l,c,3.5,s,e.getX(),e.getY(),t.getX(),t.getY(),a,o,n.getX(),n.getY())}static sampleGrid(e,t,n){return pe.getInstance().sampleGridWithTransform(e,n,n,t)}static computeDimension(e,t,n,r){const i=se.round(oe.distance(e,t)/r),s=se.round(oe.distance(e,n)/r);let a=Math.floor((i+s)/2)+7;switch(3&a){case 0:a++;break;case 2:a--;break;case 3:throw new k("Dimensions could be not found.")}return a}calculateModuleSize(e,t,n){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,n))/2}calculateModuleSizeOneWay(e,t){const n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?r/7:isNaN(r)?n/7:(n+r)/14}sizeOfBlackWhiteBlackRunBothWays(e,t,n,r){let i=this.sizeOfBlackWhiteBlackRun(e,t,n,r),s=1,a=e-(n-e);a<0?(s=e/(e-a),a=0):a>=this.image.getWidth()&&(s=(this.image.getWidth()-1-e)/(a-e),a=this.image.getWidth()-1);let o=Math.floor(t-(r-t)*s);return s=1,o<0?(s=t/(t-o),o=0):o>=this.image.getHeight()&&(s=(this.image.getHeight()-1-t)/(o-t),o=this.image.getHeight()-1),a=Math.floor(e+(a-e)*s),i+=this.sizeOfBlackWhiteBlackRun(e,t,a,o),i-1}sizeOfBlackWhiteBlackRun(e,t,n,r){const i=Math.abs(r-t)>Math.abs(n-e);if(i){let i=e;e=t,t=i,i=n,n=r,r=i}const s=Math.abs(n-e),a=Math.abs(r-t);let o=-s/2;const l=e<n?1:-1,c=t<r?1:-1;let u=0;const d=n+l;for(let h=e,f=t;h!==d;h+=l){const n=i?f:h,l=i?h:f;if(1===u===this.image.get(n,l)){if(2===u)return se.distance(h,f,e,t);u++}if(o+=a,o>0){if(f===r)break;f+=c,o-=s}}return 2===u?se.distance(n+l,r,e,t):NaN}findAlignmentInRegion(e,t,n,r){const i=Math.floor(r*e),s=Math.max(0,t-i),a=Math.min(this.image.getWidth()-1,t+i);if(a-s<3*e)throw new k("Alignment top exceeds estimated module size.");const o=Math.max(0,n-i),l=Math.min(this.image.getHeight()-1,n+i);if(l-o<3*e)throw new k("Alignment bottom exceeds estimated module size.");return new Ot(this.image,s,o,a-s,l-o,e,this.resultPointCallback).find()}}class Bt{constructor(){this.decoder=new Rt}getDecoder(){return this.decoder}decode(e,t){let n,r;if(void 0!==t&&null!==t&&void 0!==t.get(S.PURE_BARCODE)){const i=Bt.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(i,t),r=Bt.NO_POINTS}else{const i=new jt(e.getBlackMatrix()).detect(t);n=this.decoder.decodeBitMatrix(i.getBits(),t),r=i.getPoints()}n.getOther()instanceof Pt&&n.getOther().applyMirroredCorrection(r);const i=new U(n.getText(),n.getRawBytes(),void 0,r,V.QR_CODE,void 0),s=n.getByteSegments();null!==s&&i.putMetadata(X.BYTE_SEGMENTS,s);const a=n.getECLevel();return null!==a&&i.putMetadata(X.ERROR_CORRECTION_LEVEL,a),n.hasStructuredAppend()&&(i.putMetadata(X.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),i.putMetadata(X.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),i}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(null===t||null===n)throw new k;const r=this.moduleSize(t,e);let i=t[1],s=n[1],a=t[0],o=n[0];if(a>=o||i>=s)throw new k;if(s-i!==o-a&&(o=a+(s-i),o>=e.getWidth()))throw new k;const l=Math.round((o-a+1)/r),c=Math.round((s-i+1)/r);if(l<=0||c<=0)throw new k;if(c!==l)throw new k;const u=Math.floor(r/2);i+=u,a+=u;const d=a+Math.floor((l-1)*r)-o;if(d>0){if(d>u)throw new k;a-=d}const h=i+Math.floor((c-1)*r)-s;if(h>0){if(h>u)throw new k;i-=h}const f=new I(l,c);for(let p=0;p<c;p++){const t=i+Math.floor(p*r);for(let n=0;n<l;n++)e.get(a+Math.floor(n*r),t)&&f.set(n,p)}return f}static moduleSize(e,t){const n=t.getHeight(),r=t.getWidth();let i=e[0],s=e[1],a=!0,o=0;for(;i<r&&s<n;){if(a!==t.get(i,s)){if(5===++o)break;a=!a}i++,s++}if(i===r||s===n)throw new k;return(i-e[0])/7}}Bt.NO_POINTS=new Array;class Ut{PDF417Common(){}static getBitCountSum(e){return se.sum(e)}static toIntArray(e){if(null==e||!e.length)return Ut.EMPTY_INT_ARRAY;const t=new Int32Array(e.length);let n=0;for(const r of e)t[n++]=r;return t}static getCodeword(e){const t=v.binarySearch(Ut.SYMBOL_TABLE,262143&e);return t<0?-1:(Ut.CODEWORD_TABLE[t]-1)%Ut.NUMBER_OF_CODEWORDS}}Ut.NUMBER_OF_CODEWORDS=929,Ut.MAX_CODEWORDS_IN_BARCODE=Ut.NUMBER_OF_CODEWORDS-1,Ut.MIN_ROWS_IN_BARCODE=3,Ut.MAX_ROWS_IN_BARCODE=90,Ut.MODULES_IN_CODEWORD=17,Ut.MODULES_IN_STOP_PATTERN=18,Ut.BARS_IN_MODULE=8,Ut.EMPTY_INT_ARRAY=new Int32Array([]),Ut.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Ut.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class zt{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class Vt{static detectMultiple(e,t,n){let r=e.getBlackMatrix(),i=Vt.detect(n,r);return i.length||(r=r.clone(),r.rotate180(),i=Vt.detect(n,r)),new zt(r,i)}static detect(e,t){const n=new Array;let r=0,i=0,s=!1;for(;r<t.getHeight();){const a=Vt.findVertices(t,r,i);if(null!=a[0]||null!=a[3]){if(s=!0,n.push(a),!e)break;null!=a[2]?(i=Math.trunc(a[2].getX()),r=Math.trunc(a[2].getY())):(i=Math.trunc(a[4].getX()),r=Math.trunc(a[4].getY()))}else{if(!s)break;s=!1,i=0;for(const e of n)null!=e[1]&&(r=Math.trunc(Math.max(r,e[1].getY()))),null!=e[3]&&(r=Math.max(r,Math.trunc(e[3].getY())));r+=Vt.ROW_STEP}}return n}static findVertices(e,t,n){const r=e.getHeight(),i=e.getWidth(),s=new Array(8);return Vt.copyToResult(s,Vt.findRowsWithPattern(e,r,i,t,n,Vt.START_PATTERN),Vt.INDEXES_START_PATTERN),null!=s[4]&&(n=Math.trunc(s[4].getX()),t=Math.trunc(s[4].getY())),Vt.copyToResult(s,Vt.findRowsWithPattern(e,r,i,t,n,Vt.STOP_PATTERN),Vt.INDEXES_STOP_PATTERN),s}static copyToResult(e,t,n){for(let r=0;r<n.length;r++)e[n[r]]=t[r]}static findRowsWithPattern(e,t,n,r,i,s){const a=new Array(4);let o=!1;const l=new Int32Array(s.length);for(;r<t;r+=Vt.ROW_STEP){let t=Vt.findGuardPattern(e,i,r,n,!1,s,l);if(null!=t){for(;r>0;){const a=Vt.findGuardPattern(e,i,--r,n,!1,s,l);if(null==a){r++;break}t=a}a[0]=new oe(t[0],r),a[1]=new oe(t[1],r),o=!0;break}}let c=r+1;if(o){let r=0,i=Int32Array.from([Math.trunc(a[0].getX()),Math.trunc(a[1].getX())]);for(;c<t;c++){const t=Vt.findGuardPattern(e,i[0],c,n,!1,s,l);if(null!=t&&Math.abs(i[0]-t[0])<Vt.MAX_PATTERN_DRIFT&&Math.abs(i[1]-t[1])<Vt.MAX_PATTERN_DRIFT)i=t,r=0;else{if(r>Vt.SKIPPED_ROW_COUNT_MAX)break;r++}}c-=r+1,a[2]=new oe(i[0],c),a[3]=new oe(i[1],c)}return c-r<Vt.BARCODE_MIN_HEIGHT&&v.fill(a,null),a}static findGuardPattern(e,t,n,r,i,s,a){v.fillWithin(a,0,a.length,0);let o=t,l=0;for(;e.get(o,n)&&o>0&&l++<Vt.MAX_PIXEL_DRIFT;)o--;let c=o,u=0,d=s.length;for(let h=i;c<r;c++)if(e.get(c,n)!==h)a[u]++;else{if(u===d-1){if(Vt.patternMatchVariance(a,s,Vt.MAX_INDIVIDUAL_VARIANCE)<Vt.MAX_AVG_VARIANCE)return new Int32Array([o,c]);o+=a[0]+a[1],m.arraycopy(a,2,a,0,u-1),a[u-1]=0,a[u]=0,u--}else u++;a[u]=1,h=!h}return u===d-1&&Vt.patternMatchVariance(a,s,Vt.MAX_INDIVIDUAL_VARIANCE)<Vt.MAX_AVG_VARIANCE?new Int32Array([o,c-1]):null}static patternMatchVariance(e,t,n){let r=e.length,i=0,s=0;for(let l=0;l<r;l++)i+=e[l],s+=t[l];if(i<s)return 1/0;let a=i/s;n*=a;let o=0;for(let l=0;l<r;l++){let r=e[l],i=t[l]*a,s=r>i?r-i:i-r;if(s>n)return 1/0;o+=s}return o/i}}Vt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Vt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Vt.MAX_AVG_VARIANCE=.42,Vt.MAX_INDIVIDUAL_VARIANCE=.8,Vt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Vt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Vt.MAX_PIXEL_DRIFT=3,Vt.MAX_PATTERN_DRIFT=5,Vt.SKIPPED_ROW_COUNT_MAX=25,Vt.ROW_STEP=5,Vt.BARCODE_MIN_HEIGHT=10;class Ht{constructor(e,t){if(0===t.length)throw new d;this.field=e;let n=t.length;if(n>1&&0===t[0]){let e=1;for(;e<n&&0===t[e];)e++;e===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-e),m.arraycopy(t,e,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(0===e)return this.getCoefficient(0);if(1===e){let e=0;for(let t of this.coefficients)e=this.field.add(e,t);return e}let t=this.coefficients[0],n=this.coefficients.length;for(let r=1;r<n;r++)t=this.field.add(this.field.multiply(e,t),this.coefficients[r]);return t}add(e){if(!this.field.equals(e.field))throw new d("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,n=e.coefficients;if(t.length>n.length){let e=t;t=n,n=e}let r=new Int32Array(n.length),i=n.length-t.length;m.arraycopy(n,0,r,0,i);for(let s=i;s<n.length;s++)r[s]=this.field.add(t[s-i],n[s]);return new Ht(this.field,r)}subtract(e){if(!this.field.equals(e.field))throw new d("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof Ht?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new d("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new Ht(this.field,new Int32Array([0]));let t=this.coefficients,n=t.length,r=e.coefficients,i=r.length,s=new Int32Array(n+i-1);for(let a=0;a<n;a++){let e=t[a];for(let t=0;t<i;t++)s[a+t]=this.field.add(s[a+t],this.field.multiply(e,r[t]))}return new Ht(this.field,s)}negative(){let e=this.coefficients.length,t=new Int32Array(e);for(let n=0;n<e;n++)t[n]=this.field.subtract(0,this.coefficients[n]);return new Ht(this.field,t)}multiplyScalar(e){if(0===e)return new Ht(this.field,new Int32Array([0]));if(1===e)return this;let t=this.coefficients.length,n=new Int32Array(t);for(let r=0;r<t;r++)n[r]=this.field.multiply(this.coefficients[r],e);return new Ht(this.field,n)}multiplyByMonomial(e,t){if(e<0)throw new d;if(0===t)return new Ht(this.field,new Int32Array([0]));let n=this.coefficients.length,r=new Int32Array(n+e);for(let i=0;i<n;i++)r[i]=this.field.multiply(this.coefficients[i],t);return new Ht(this.field,r)}toString(){let e=new T;for(let t=this.getDegree();t>=0;t--){let n=this.getCoefficient(t);0!==n&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),0!==t&&1===n||e.append(n),0!==t&&(1===t?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()}}class Wt{add(e,t){return(e+t)%this.modulus}subtract(e,t){return(this.modulus+e-t)%this.modulus}exp(e){return this.expTable[e]}log(e){if(0===e)throw new d;return this.logTable[e]}inverse(e){if(0===e)throw new $;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class qt extends Wt{constructor(e,t){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let n=1;for(let r=0;r<e;r++)this.expTable[r]=n,n=n*t%e;for(let r=0;r<e-1;r++)this.logTable[this.expTable[r]]=r;this.zero=new Ht(this,new Int32Array([0])),this.one=new Ht(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new d;if(0===t)return this.zero;let n=new Int32Array(e+1);return n[0]=t,new Ht(this,n)}}qt.PDF417_GF=new qt(Ut.NUMBER_OF_CODEWORDS,3);class Gt{constructor(){this.field=qt.PDF417_GF}decode(e,t,n){let r=new Ht(this.field,e),i=new Int32Array(t),s=!1;for(let f=t;f>0;f--){let e=r.evaluateAt(this.field.exp(f));i[t-f]=e,0!==e&&(s=!0)}if(!s)return 0;let a=this.field.getOne();if(null!=n)for(const f of n){let t=this.field.exp(e.length-1-f),n=new Ht(this.field,new Int32Array([this.field.subtract(0,t),1]));a=a.multiply(n)}let o=new Ht(this.field,i),l=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),o,t),c=l[0],u=l[1],d=this.findErrorLocations(c),h=this.findErrorMagnitudes(u,c,d);for(let p=0;p<d.length;p++){let t=e.length-1-this.field.log(d[p]);if(t<0)throw f.getChecksumInstance();e[t]=this.field.subtract(e[t],h[p])}return d.length}runEuclideanAlgorithm(e,t,n){if(e.getDegree()<t.getDegree()){let n=e;e=t,t=n}let r=e,i=t,s=this.field.getZero(),a=this.field.getOne();for(;i.getDegree()>=Math.round(n/2);){let e=r,t=s;if(r=i,s=a,r.isZero())throw f.getChecksumInstance();i=e;let n=this.field.getZero(),o=r.getCoefficient(r.getDegree()),l=this.field.inverse(o);for(;i.getDegree()>=r.getDegree()&&!i.isZero();){let e=i.getDegree()-r.getDegree(),t=this.field.multiply(i.getCoefficient(i.getDegree()),l);n=n.add(this.field.buildMonomial(e,t)),i=i.subtract(r.multiplyByMonomial(e,t))}a=n.multiply(s).subtract(t).negative()}let o=a.getCoefficient(0);if(0===o)throw f.getChecksumInstance();let l=this.field.inverse(o);return[a.multiply(l),i.multiply(l)]}findErrorLocations(e){let t=e.getDegree(),n=new Int32Array(t),r=0;for(let i=1;i<this.field.getSize()&&r<t;i++)0===e.evaluateAt(i)&&(n[r]=this.field.inverse(i),r++);if(r!==t)throw f.getChecksumInstance();return n}findErrorMagnitudes(e,t,n){let r=t.getDegree(),i=new Int32Array(r);for(let l=1;l<=r;l++)i[r-l]=this.field.multiply(l,t.getCoefficient(l));let s=new Ht(this.field,i),a=n.length,o=new Int32Array(a);for(let l=0;l<a;l++){let t=this.field.inverse(n[l]),r=this.field.subtract(0,e.evaluateAt(t)),i=this.field.inverse(s.evaluateAt(t));o[l]=this.field.multiply(r,i)}return o}}class Kt{constructor(e,t,n,r,i){e instanceof Kt?this.constructor_2(e):this.constructor_1(e,t,n,r,i)}constructor_1(e,t,n,r,i){const s=null==t||null==n,a=null==r||null==i;if(s&&a)throw new k;s?(t=new oe(0,r.getY()),n=new oe(0,i.getY())):a&&(r=new oe(e.getWidth()-1,t.getY()),i=new oe(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=t,this.bottomLeft=n,this.topRight=r,this.bottomRight=i,this.minX=Math.trunc(Math.min(t.getX(),n.getX())),this.maxX=Math.trunc(Math.max(r.getX(),i.getX())),this.minY=Math.trunc(Math.min(t.getY(),r.getY())),this.maxY=Math.trunc(Math.max(n.getY(),i.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,t){return null==e?t:null==t?e:new Kt(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)}addMissingRows(e,t,n){let r=this.topLeft,i=this.bottomLeft,s=this.topRight,a=this.bottomRight;if(e>0){let t=n?this.topLeft:this.topRight,i=Math.trunc(t.getY()-e);i<0&&(i=0);let a=new oe(t.getX(),i);n?r=a:s=a}if(t>0){let e=n?this.bottomLeft:this.bottomRight,r=Math.trunc(e.getY()+t);r>=this.image.getHeight()&&(r=this.image.getHeight()-1);let s=new oe(e.getX(),r);n?i=s:a=s}return new Kt(this.image,r,i,s,a)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Yt{constructor(e,t,n,r){this.columnCount=e,this.errorCorrectionLevel=r,this.rowCountUpperPart=t,this.rowCountLowerPart=n,this.rowCount=t+n}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Xt{constructor(){this.buffer=""}static form(e,t){let n=-1;function r(e,r,i,s,a,o){if("%%"===e)return"%";if(void 0===t[++n])return;e=s?parseInt(s.substr(1)):void 0;let l,c=a?parseInt(a.substr(1)):void 0;switch(o){case"s":l=t[n];break;case"c":l=t[n][0];break;case"f":l=parseFloat(t[n]).toFixed(e);break;case"p":l=parseFloat(t[n]).toPrecision(e);break;case"e":l=parseFloat(t[n]).toExponential(e);break;case"x":l=parseInt(t[n]).toString(c||16);break;case"d":l=parseFloat(parseInt(t[n],c||10).toPrecision(e)).toFixed(0)}l="object"===typeof l?JSON.stringify(l):(+l).toString(c);let u=parseInt(i),d=i&&i[0]+""==="0"?"0":" ";for(;l.length<u;)l=void 0!==r?l+d:d+l;return l}let i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(i,r)}format(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.buffer+=Xt.form(e,n)}toString(){return this.buffer}}class Qt{constructor(e){this.boundingBox=new Kt(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let t=this.getCodeword(e);if(null!=t)return t;for(let n=1;n<Qt.MAX_NEARBY_DISTANCE;n++){let r=this.imageRowToCodewordIndex(e)-n;if(r>=0&&(t=this.codewords[r],null!=t))return t;if(r=this.imageRowToCodewordIndex(e)+n,r<this.codewords.length&&(t=this.codewords[r],null!=t))return t}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const e=new Xt;let t=0;for(const n of this.codewords)null!=n?e.format("%3d: %3d|%3d%n",t++,n.getRowNumber(),n.getValue()):e.format("%3d:    |   %n",t++);return e.toString()}}Qt.MAX_NEARBY_DISTANCE=5;class Jt{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let t=this.values.get(e);null==t&&(t=0),t++,this.values.set(e,t)}getValue(){let e=-1,t=new Array;for(const[n,r]of this.values.entries()){const i={getKey:()=>n,getValue:()=>r};i.getValue()>e?(e=i.getValue(),t=[],t.push(i.getKey())):i.getValue()===e&&t.push(i.getKey())}return Ut.toIntArray(t)}getConfidence(e){return this.values.get(e)}}class Zt extends Qt{constructor(e,t){super(e),this._isLeft=t}setRowNumbers(){for(let e of this.getCodewords())null!=e&&e.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let t=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(t,e);let n=this.getBoundingBox(),r=this._isLeft?n.getTopLeft():n.getTopRight(),i=this._isLeft?n.getBottomLeft():n.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(r.getY())),a=this.imageRowToCodewordIndex(Math.trunc(i.getY())),o=-1,l=1,c=0;for(let u=s;u<a;u++){if(null==t[u])continue;let n=t[u],r=n.getRowNumber()-o;if(0===r)c++;else if(1===r)l=Math.max(l,c),c=1,o=n.getRowNumber();else if(r<0||n.getRowNumber()>=e.getRowCount()||r>u)t[u]=null;else{let e;e=l>2?(l-2)*r:r;let i=e>=u;for(let n=1;n<=e&&!i;n++)i=null!=t[u-n];i?t[u]=null:(o=n.getRowNumber(),c=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(null==e)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let t=new Int32Array(e.getRowCount());for(let n of this.getCodewords())if(null!=n){let e=n.getRowNumber();if(e>=t.length)continue;t[e]++}return t}adjustIncompleteIndicatorColumnRowNumbers(e){let t=this.getBoundingBox(),n=this._isLeft?t.getTopLeft():t.getTopRight(),r=this._isLeft?t.getBottomLeft():t.getBottomRight(),i=this.imageRowToCodewordIndex(Math.trunc(n.getY())),s=this.imageRowToCodewordIndex(Math.trunc(r.getY())),a=this.getCodewords(),o=-1;for(let l=i;l<s;l++){if(null==a[l])continue;let t=a[l];t.setRowNumberAsRowIndicatorColumn();let n=t.getRowNumber()-o;0===n||(1===n?o=t.getRowNumber():t.getRowNumber()>=e.getRowCount()?a[l]=null:o=t.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),t=new Jt,n=new Jt,r=new Jt,i=new Jt;for(let a of e){if(null==a)continue;a.setRowNumberAsRowIndicatorColumn();let e=a.getValue()%30,s=a.getRowNumber();switch(this._isLeft||(s+=2),s%3){case 0:n.setValue(3*e+1);break;case 1:i.setValue(e/3),r.setValue(e%3);break;case 2:t.setValue(e+1)}}if(0===t.getValue().length||0===n.getValue().length||0===r.getValue().length||0===i.getValue().length||t.getValue()[0]<1||n.getValue()[0]+r.getValue()[0]<Ut.MIN_ROWS_IN_BARCODE||n.getValue()[0]+r.getValue()[0]>Ut.MAX_ROWS_IN_BARCODE)return null;let s=new Yt(t.getValue()[0],n.getValue()[0],r.getValue()[0],i.getValue()[0]);return this.removeIncorrectCodewords(e,s),s}removeIncorrectCodewords(e,t){for(let n=0;n<e.length;n++){let r=e[n];if(null==e[n])continue;let i=r.getValue()%30,s=r.getRowNumber();if(s>t.getRowCount())e[n]=null;else switch(this._isLeft||(s+=2),s%3){case 0:3*i+1!==t.getRowCountUpperPart()&&(e[n]=null);break;case 1:Math.trunc(i/3)===t.getErrorCorrectionLevel()&&i%3===t.getRowCountLowerPart()||(e[n]=null);break;case 2:i+1!==t.getColumnCount()&&(e[n]=null)}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+"\n"+super.toString()}}class $t{constructor(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e,t=Ut.MAX_CODEWORDS_IN_BARCODE;do{e=t,t=this.adjustRowNumbersAndGetCount()}while(t>0&&t<e);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){null!=e&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(0===e)return 0;for(let t=1;t<this.barcodeColumnCount+1;t++){let e=this.detectionResultColumns[t].getCodewords();for(let n=0;n<e.length;n++)null!=e[n]&&(e[n].hasValidRowNumber()||this.adjustRowNumbers(t,n,e))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(null==this.detectionResultColumns[0]||null==this.detectionResultColumns[this.barcodeColumnCount+1])return;let e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<e.length;n++)if(null!=e[n]&&null!=t[n]&&e[n].getRowNumber()===t[n].getRowNumber())for(let t=1;t<=this.barcodeColumnCount;t++){let r=this.detectionResultColumns[t].getCodewords()[n];null!=r&&(r.setRowNumber(e[n].getRowNumber()),r.hasValidRowNumber()||(this.detectionResultColumns[t].getCodewords()[n]=null))}}adjustRowNumbersFromRRI(){if(null==this.detectionResultColumns[this.barcodeColumnCount+1])return 0;let e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<t.length;n++){if(null==t[n])continue;let r=t[n].getRowNumber(),i=0;for(let t=this.barcodeColumnCount+1;t>0&&i<this.ADJUST_ROW_NUMBER_SKIP;t--){let s=this.detectionResultColumns[t].getCodewords()[n];null!=s&&(i=$t.adjustRowNumberIfValid(r,i,s),s.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(null==this.detectionResultColumns[0])return 0;let e=0,t=this.detectionResultColumns[0].getCodewords();for(let n=0;n<t.length;n++){if(null==t[n])continue;let r=t[n].getRowNumber(),i=0;for(let t=1;t<this.barcodeColumnCount+1&&i<this.ADJUST_ROW_NUMBER_SKIP;t++){let s=this.detectionResultColumns[t].getCodewords()[n];null!=s&&(i=$t.adjustRowNumberIfValid(r,i,s),s.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,t,n){return null==n||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),t=0):++t),t}adjustRowNumbers(e,t,n){if(!this.detectionResultColumns[e-1])return;let r=n[t],i=this.detectionResultColumns[e-1].getCodewords(),s=i;null!=this.detectionResultColumns[e+1]&&(s=this.detectionResultColumns[e+1].getCodewords());let a=new Array(14);a[2]=i[t],a[3]=s[t],t>0&&(a[0]=n[t-1],a[4]=i[t-1],a[5]=s[t-1]),t>1&&(a[8]=n[t-2],a[10]=i[t-2],a[11]=s[t-2]),t<n.length-1&&(a[1]=n[t+1],a[6]=i[t+1],a[7]=s[t+1]),t<n.length-2&&(a[9]=n[t+2],a[12]=i[t+2],a[13]=s[t+2]);for(let o of a)if($t.adjustRowNumber(r,o))return}static adjustRowNumber(e,t){return null!=t&&!(!t.hasValidRowNumber()||t.getBucket()!==e.getBucket())&&(e.setRowNumber(t.getRowNumber()),!0)}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,t){this.detectionResultColumns[e]=t}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];null==e&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let t=new Xt;for(let n=0;n<e.getCodewords().length;n++){t.format("CW %3d:",n);for(let e=0;e<this.barcodeColumnCount+2;e++){if(null==this.detectionResultColumns[e]){t.format("    |   ");continue}let r=this.detectionResultColumns[e].getCodewords()[n];null!=r?t.format(" %3d|%3d",r.getRowNumber(),r.getValue()):t.format("    |   ")}t.format("%n")}return t.toString()}}class en{constructor(e,t,n,r){this.rowNumber=en.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(n),this.value=Math.trunc(r)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==en.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}en.BARCODE_ROW_UNKNOWN=-1;class tn{static initialize(){for(let e=0;e<Ut.SYMBOL_TABLE.length;e++){let t=Ut.SYMBOL_TABLE[e],n=1&t;for(let r=0;r<Ut.BARS_IN_MODULE;r++){let i=0;for(;(1&t)===n;)i+=1,t>>=1;n=1&t,tn.RATIOS_TABLE[e]||(tn.RATIOS_TABLE[e]=new Array(Ut.BARS_IN_MODULE)),tn.RATIOS_TABLE[e][Ut.BARS_IN_MODULE-r-1]=Math.fround(i/Ut.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let t=tn.getDecodedCodewordValue(tn.sampleBitCounts(e));return-1!==t?t:tn.getClosestDecodedValue(e)}static sampleBitCounts(e){let t=se.sum(e),n=new Int32Array(Ut.BARS_IN_MODULE),r=0,i=0;for(let s=0;s<Ut.MODULES_IN_CODEWORD;s++){let a=t/(2*Ut.MODULES_IN_CODEWORD)+s*t/Ut.MODULES_IN_CODEWORD;i+e[r]<=a&&(i+=e[r],r++),n[r]++}return n}static getDecodedCodewordValue(e){let t=tn.getBitValue(e);return-1===Ut.getCodeword(t)?-1:t}static getBitValue(e){let t=0;for(let n=0;n<e.length;n++)for(let r=0;r<e[n];r++)t=t<<1|(n%2===0?1:0);return Math.trunc(t)}static getClosestDecodedValue(e){let t=se.sum(e),n=new Array(Ut.BARS_IN_MODULE);if(t>1)for(let s=0;s<n.length;s++)n[s]=Math.fround(e[s]/t);let r=ae.MAX_VALUE,i=-1;this.bSymbolTableReady||tn.initialize();for(let s=0;s<tn.RATIOS_TABLE.length;s++){let e=0,t=tn.RATIOS_TABLE[s];for(let i=0;i<Ut.BARS_IN_MODULE;i++){let s=Math.fround(t[i]-n[i]);if(e+=Math.fround(s*s),e>=r)break}e<r&&(r=e,i=Ut.SYMBOL_TABLE[s])}return i}}tn.bSymbolTableReady=!1,tn.RATIOS_TABLE=new Array(Ut.SYMBOL_TABLE.length).map(e=>new Array(Ut.BARS_IN_MODULE));class nn{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class rn{static parseLong(e){return parseInt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0)}}class sn extends c{}sn.kind="NullPointerException";class an{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,t,n){if(null==e)throw new sn;if(t<0||t>e.length||n<0||t+n>e.length||t+n<0)throw new g;if(0!==n)for(let r=0;r<n;r++)this.write(e[t+r])}flush(){}close(){}}class on extends c{}class ln extends an{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(super(),this.count=0,e<0)throw new d("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let t=this.buf.length<<1;if(t-e<0&&(t=e),t<0){if(e<0)throw new on;t=w.MAX_VALUE}this.buf=v.copyOfUint8Array(this.buf,t)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,t,n){if(t<0||t>e.length||n<0||t+n-e.length>0)throw new g;this.ensureCapacity(this.count+n),m.arraycopy(e,t,this.buf,this.count,n),this.count+=n}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return v.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?"string"===typeof e?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}function cn(){if("undefined"!==typeof window)return window.BigInt||null;if("undefined"!==typeof n.g)return n.g.BigInt||null;if("undefined"!==typeof self)return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let un;function dn(e){if("undefined"===typeof un&&(un=cn()),null===un)throw new Error("BigInt is not supported!");return un(e)}function hn(){let e=[];e[0]=dn(1);let t=dn(900);e[1]=t;for(let n=2;n<16;n++)e[n]=e[n-1]*t;return e}!function(e){e[e.ALPHA=0]="ALPHA",e[e.LOWER=1]="LOWER",e[e.MIXED=2]="MIXED",e[e.PUNCT=3]="PUNCT",e[e.ALPHA_SHIFT=4]="ALPHA_SHIFT",e[e.PUNCT_SHIFT=5]="PUNCT_SHIFT"}(Y||(Y={}));class fn{static decode(e,t){let n=new T(""),r=E.ISO8859_1;n.enableDecoding(r);let i=1,s=e[i++],a=new nn;for(;i<e[0];){switch(s){case fn.TEXT_COMPACTION_MODE_LATCH:i=fn.textCompaction(e,i,n);break;case fn.BYTE_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH_6:i=fn.byteCompaction(s,e,r,i,n);break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[i++]);break;case fn.NUMERIC_COMPACTION_MODE_LATCH:i=fn.numericCompaction(e,i,n);break;case fn.ECI_CHARSET:E.getCharacterSetECIByValue(e[i++]);break;case fn.ECI_GENERAL_PURPOSE:i+=2;break;case fn.ECI_USER_DEFINED:i++;break;case fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:i=fn.decodeMacroBlock(e,i,a);break;case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fn.MACRO_PDF417_TERMINATOR:throw new A;default:i--,i=fn.textCompaction(e,i,n)}if(!(i<e.length))throw A.getFormatInstance();s=e[i++]}if(0===n.length())throw A.getFormatInstance();let o=new Q(null,n.toString(),null,t);return o.setOther(a),o}static decodeMacroBlock(e,t,n){if(t+fn.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw A.getFormatInstance();let r=new Int32Array(fn.NUMBER_OF_SEQUENCE_CODEWORDS);for(let a=0;a<fn.NUMBER_OF_SEQUENCE_CODEWORDS;a++,t++)r[a]=e[t];n.setSegmentIndex(w.parseInt(fn.decodeBase900toBase10(r,fn.NUMBER_OF_SEQUENCE_CODEWORDS)));let i=new T;t=fn.textCompaction(e,t,i),n.setFileId(i.toString());let s=-1;for(e[t]===fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=t+1);t<e[0];)switch(e[t]){case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(e[++t]){case fn.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let r=new T;t=fn.textCompaction(e,t+1,r),n.setFileName(r.toString());break;case fn.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let i=new T;t=fn.textCompaction(e,t+1,i),n.setSender(i.toString());break;case fn.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let s=new T;t=fn.textCompaction(e,t+1,s),n.setAddressee(s.toString());break;case fn.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let a=new T;t=fn.numericCompaction(e,t+1,a),n.setSegmentCount(w.parseInt(a.toString()));break;case fn.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let o=new T;t=fn.numericCompaction(e,t+1,o),n.setTimestamp(rn.parseLong(o.toString()));break;case fn.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let l=new T;t=fn.numericCompaction(e,t+1,l),n.setChecksum(w.parseInt(l.toString()));break;case fn.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let c=new T;t=fn.numericCompaction(e,t+1,c),n.setFileSize(rn.parseLong(c.toString()));break;default:throw A.getFormatInstance()}break;case fn.MACRO_PDF417_TERMINATOR:t++,n.setLastSegment(!0);break;default:throw A.getFormatInstance()}if(-1!==s){let r=t-s;n.isLastSegment()&&r--,n.setOptionalData(v.copyOfRange(e,s,s+r))}return t}static textCompaction(e,t,n){let r=new Int32Array(2*(e[0]-t)),i=new Int32Array(2*(e[0]-t)),s=0,a=!1;for(;t<e[0]&&!a;){let n=e[t++];if(n<fn.TEXT_COMPACTION_MODE_LATCH)r[s]=n/30,r[s+1]=n%30,s+=2;else switch(n){case fn.TEXT_COMPACTION_MODE_LATCH:r[s++]=fn.TEXT_COMPACTION_MODE_LATCH;break;case fn.BYTE_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH_6:case fn.NUMERIC_COMPACTION_MODE_LATCH:case fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fn.MACRO_PDF417_TERMINATOR:t--,a=!0;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r[s]=fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,n=e[t++],i[s]=n,s++}}return fn.decodeTextCompaction(r,i,s,n),t}static decodeTextCompaction(e,t,n,r){let i=Y.ALPHA,s=Y.ALPHA,a=0;for(;a<n;){let n=e[a],o="";switch(i){case Y.ALPHA:if(n<26)o=String.fromCharCode(65+n);else switch(n){case 26:o=" ";break;case fn.LL:i=Y.LOWER;break;case fn.ML:i=Y.MIXED;break;case fn.PS:s=i,i=Y.PUNCT_SHIFT;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[a]);break;case fn.TEXT_COMPACTION_MODE_LATCH:i=Y.ALPHA}break;case Y.LOWER:if(n<26)o=String.fromCharCode(97+n);else switch(n){case 26:o=" ";break;case fn.AS:s=i,i=Y.ALPHA_SHIFT;break;case fn.ML:i=Y.MIXED;break;case fn.PS:s=i,i=Y.PUNCT_SHIFT;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[a]);break;case fn.TEXT_COMPACTION_MODE_LATCH:i=Y.ALPHA}break;case Y.MIXED:if(n<fn.PL)o=fn.MIXED_CHARS[n];else switch(n){case fn.PL:i=Y.PUNCT;break;case 26:o=" ";break;case fn.LL:i=Y.LOWER;break;case fn.AL:i=Y.ALPHA;break;case fn.PS:s=i,i=Y.PUNCT_SHIFT;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[a]);break;case fn.TEXT_COMPACTION_MODE_LATCH:i=Y.ALPHA}break;case Y.PUNCT:if(n<fn.PAL)o=fn.PUNCT_CHARS[n];else switch(n){case fn.PAL:i=Y.ALPHA;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[a]);break;case fn.TEXT_COMPACTION_MODE_LATCH:i=Y.ALPHA}break;case Y.ALPHA_SHIFT:if(i=s,n<26)o=String.fromCharCode(65+n);else switch(n){case 26:o=" ";break;case fn.TEXT_COMPACTION_MODE_LATCH:i=Y.ALPHA}break;case Y.PUNCT_SHIFT:if(i=s,n<fn.PAL)o=fn.PUNCT_CHARS[n];else switch(n){case fn.PAL:i=Y.ALPHA;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[a]);break;case fn.TEXT_COMPACTION_MODE_LATCH:i=Y.ALPHA}}""!==o&&r.append(o),a++}}static byteCompaction(e,t,n,r,i){let s=new ln,a=0,o=0,l=!1;switch(e){case fn.BYTE_COMPACTION_MODE_LATCH:let e=new Int32Array(6),n=t[r++];for(;r<t[0]&&!l;)switch(e[a++]=n,o=900*o+n,n=t[r++],n){case fn.TEXT_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH:case fn.NUMERIC_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH_6:case fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fn.MACRO_PDF417_TERMINATOR:r--,l=!0;break;default:if(a%5===0&&a>0){for(let e=0;e<6;++e)s.write(Number(dn(o)>>dn(8*(5-e))));o=0,a=0}}r===t[0]&&n<fn.TEXT_COMPACTION_MODE_LATCH&&(e[a++]=n);for(let t=0;t<a;t++)s.write(e[t]);break;case fn.BYTE_COMPACTION_MODE_LATCH_6:for(;r<t[0]&&!l;){let e=t[r++];if(e<fn.TEXT_COMPACTION_MODE_LATCH)a++,o=900*o+e;else switch(e){case fn.TEXT_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH:case fn.NUMERIC_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH_6:case fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fn.MACRO_PDF417_TERMINATOR:r--,l=!0}if(a%5===0&&a>0){for(let e=0;e<6;++e)s.write(Number(dn(o)>>dn(8*(5-e))));o=0,a=0}}}return i.append(C.decode(s.toByteArray(),n)),r}static numericCompaction(e,t,n){let r=0,i=!1,s=new Int32Array(fn.MAX_NUMERIC_CODEWORDS);for(;t<e[0]&&!i;){let a=e[t++];if(t===e[0]&&(i=!0),a<fn.TEXT_COMPACTION_MODE_LATCH)s[r]=a,r++;else switch(a){case fn.TEXT_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH_6:case fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fn.MACRO_PDF417_TERMINATOR:t--,i=!0}(r%fn.MAX_NUMERIC_CODEWORDS===0||a===fn.NUMERIC_COMPACTION_MODE_LATCH||i)&&r>0&&(n.append(fn.decodeBase900toBase10(s,r)),r=0)}return t}static decodeBase900toBase10(e,t){let n=dn(0);for(let i=0;i<t;i++)n+=fn.EXP900[t-i-1]*dn(e[i]);let r=n.toString();if("1"!==r.charAt(0))throw new A;return r.substring(1)}}fn.TEXT_COMPACTION_MODE_LATCH=900,fn.BYTE_COMPACTION_MODE_LATCH=901,fn.NUMERIC_COMPACTION_MODE_LATCH=902,fn.BYTE_COMPACTION_MODE_LATCH_6=924,fn.ECI_USER_DEFINED=925,fn.ECI_GENERAL_PURPOSE=926,fn.ECI_CHARSET=927,fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,fn.MACRO_PDF417_TERMINATOR=922,fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,fn.MAX_NUMERIC_CODEWORDS=15,fn.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,fn.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,fn.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,fn.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,fn.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,fn.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,fn.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,fn.PL=25,fn.LL=27,fn.AS=27,fn.ML=28,fn.AL=28,fn.PS=29,fn.PAL=29,fn.PUNCT_CHARS=";<>@[\\]_`~!\r\t,:\n-.$/\"|*()?{}'",fn.MIXED_CHARS="0123456789&\r\t,:#-.$/+%*=^",fn.EXP900=cn()?hn():[],fn.NUMBER_OF_SEQUENCE_CODEWORDS=2;class pn{constructor(){}static decode(e,t,n,r,i,s,a){let o,l=new Kt(e,t,n,r,i),c=null,u=null;for(let f=!0;;f=!1){if(null!=t&&(c=pn.getRowIndicatorColumn(e,l,t,!0,s,a)),null!=r&&(u=pn.getRowIndicatorColumn(e,l,r,!1,s,a)),o=pn.merge(c,u),null==o)throw k.getNotFoundInstance();let n=o.getBoundingBox();if(!f||null==n||!(n.getMinY()<l.getMinY()||n.getMaxY()>l.getMaxY()))break;l=n}o.setBoundingBox(l);let d=o.getBarcodeColumnCount()+1;o.setDetectionResultColumn(0,c),o.setDetectionResultColumn(d,u);let h=null!=c;for(let f=1;f<=d;f++){let t,n=h?f:d-f;if(void 0!==o.getDetectionResultColumn(n))continue;t=0===n||n===d?new Zt(l,0===n):new Qt(l),o.setDetectionResultColumn(n,t);let r=-1,i=r;for(let c=l.getMinY();c<=l.getMaxY();c++){if(r=pn.getStartColumn(o,n,c,h),r<0||r>l.getMaxX()){if(-1===i)continue;r=i}let u=pn.detectCodeword(e,l.getMinX(),l.getMaxX(),h,r,c,s,a);null!=u&&(t.setCodeword(c,u),i=r,s=Math.min(s,u.getWidth()),a=Math.max(a,u.getWidth()))}}return pn.createDecoderResult(o)}static merge(e,t){if(null==e&&null==t)return null;let n=pn.getBarcodeMetadata(e,t);if(null==n)return null;let r=Kt.merge(pn.adjustBoundingBox(e),pn.adjustBoundingBox(t));return new $t(n,r)}static adjustBoundingBox(e){if(null==e)return null;let t=e.getRowHeights();if(null==t)return null;let n=pn.getMax(t),r=0;for(let a of t)if(r+=n-a,a>0)break;let i=e.getCodewords();for(let a=0;r>0&&null==i[a];a++)r--;let s=0;for(let a=t.length-1;a>=0&&(s+=n-t[a],!(t[a]>0));a--);for(let a=i.length-1;s>0&&null==i[a];a--)s--;return e.getBoundingBox().addMissingRows(r,s,e.isLeft())}static getMax(e){let t=-1;for(let n of e)t=Math.max(t,n);return t}static getBarcodeMetadata(e,t){let n,r;return null==e||null==(n=e.getBarcodeMetadata())?null==t?null:t.getBarcodeMetadata():null==t||null==(r=t.getBarcodeMetadata())?n:n.getColumnCount()!==r.getColumnCount()&&n.getErrorCorrectionLevel()!==r.getErrorCorrectionLevel()&&n.getRowCount()!==r.getRowCount()?null:n}static getRowIndicatorColumn(e,t,n,r,i,s){let a=new Zt(t,r);for(let o=0;o<2;o++){let l=0===o?1:-1,c=Math.trunc(Math.trunc(n.getX()));for(let o=Math.trunc(Math.trunc(n.getY()));o<=t.getMaxY()&&o>=t.getMinY();o+=l){let t=pn.detectCodeword(e,0,e.getWidth(),r,c,o,i,s);null!=t&&(a.setCodeword(o,t),c=r?t.getStartX():t.getEndX())}}return a}static adjustCodewordCount(e,t){let n=t[0][1],r=n.getValue(),i=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-pn.getNumberOfECCodeWords(e.getBarcodeECLevel());if(0===r.length){if(i<1||i>Ut.MAX_CODEWORDS_IN_BARCODE)throw k.getNotFoundInstance();n.setValue(i)}else r[0]!==i&&n.setValue(i)}static createDecoderResult(e){let t=pn.createBarcodeMatrix(e);pn.adjustCodewordCount(e,t);let n=new Array,r=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),i=[],s=new Array;for(let o=0;o<e.getBarcodeRowCount();o++)for(let a=0;a<e.getBarcodeColumnCount();a++){let l=t[o][a+1].getValue(),c=o*e.getBarcodeColumnCount()+a;0===l.length?n.push(c):1===l.length?r[c]=l[0]:(s.push(c),i.push(l))}let a=new Array(i.length);for(let o=0;o<a.length;o++)a[o]=i[o];return pn.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),r,Ut.toIntArray(n),Ut.toIntArray(s),a)}static createDecoderResultFromAmbiguousValues(e,t,n,r,i){let s=new Int32Array(r.length),a=100;for(;a-- >0;){for(let e=0;e<s.length;e++)t[r[e]]=i[e][s[e]];try{return pn.decodeCodewords(t,e,n)}catch(o){if(!(o instanceof f))throw o}if(0===s.length)throw f.getChecksumInstance();for(let e=0;e<s.length;e++){if(s[e]<i[e].length-1){s[e]++;break}if(s[e]=0,e===s.length-1)throw f.getChecksumInstance()}}throw f.getChecksumInstance()}static createBarcodeMatrix(e){let t=Array.from({length:e.getBarcodeRowCount()},()=>new Array(e.getBarcodeColumnCount()+2));for(let r=0;r<t.length;r++)for(let e=0;e<t[r].length;e++)t[r][e]=new Jt;let n=0;for(let r of e.getDetectionResultColumns()){if(null!=r)for(let e of r.getCodewords())if(null!=e){let r=e.getRowNumber();if(r>=0){if(r>=t.length)continue;t[r][n].setValue(e.getValue())}}n++}return t}static isValidBarcodeColumn(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1}static getStartColumn(e,t,n,r){let i=r?1:-1,s=null;if(pn.isValidBarcodeColumn(e,t-i)&&(s=e.getDetectionResultColumn(t-i).getCodeword(n)),null!=s)return r?s.getEndX():s.getStartX();if(s=e.getDetectionResultColumn(t).getCodewordNearby(n),null!=s)return r?s.getStartX():s.getEndX();if(pn.isValidBarcodeColumn(e,t-i)&&(s=e.getDetectionResultColumn(t-i).getCodewordNearby(n)),null!=s)return r?s.getEndX():s.getStartX();let a=0;for(;pn.isValidBarcodeColumn(e,t-i);){t-=i;for(let n of e.getDetectionResultColumn(t).getCodewords())if(null!=n)return(r?n.getEndX():n.getStartX())+i*a*(n.getEndX()-n.getStartX());a++}return r?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,t,n,r,i,s,a,o){i=pn.adjustCodewordStartColumn(e,t,n,r,i,s);let l,c=pn.getModuleBitCount(e,t,n,r,i,s);if(null==c)return null;let u=se.sum(c);if(r)l=i+u;else{for(let e=0;e<c.length/2;e++){let t=c[e];c[e]=c[c.length-1-e],c[c.length-1-e]=t}l=i,i=l-u}if(!pn.checkCodewordSkew(u,a,o))return null;let d=tn.getDecodedValue(c),h=Ut.getCodeword(d);return-1===h?null:new en(i,l,pn.getCodewordBucketNumber(d),h)}static getModuleBitCount(e,t,n,r,i,s){let a=i,o=new Int32Array(8),l=0,c=r?1:-1,u=r;for(;(r?a<n:a>=t)&&l<o.length;)e.get(a,s)===u?(o[l]++,a+=c):(l++,u=!u);return l===o.length||a===(r?n:t)&&l===o.length-1?o:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,t,n,r,i,s){let a=i,o=r?-1:1;for(let l=0;l<2;l++){for(;(r?a>=t:a<n)&&r===e.get(a,s);){if(Math.abs(i-a)>pn.CODEWORD_SKEW_SIZE)return i;a+=o}o=-o,r=!r}return a}static checkCodewordSkew(e,t,n){return t-pn.CODEWORD_SKEW_SIZE<=e&&e<=n+pn.CODEWORD_SKEW_SIZE}static decodeCodewords(e,t,n){if(0===e.length)throw A.getFormatInstance();let r=1<<t+1,i=pn.correctErrors(e,n,r);pn.verifyCodewordCount(e,r);let s=fn.decode(e,""+t);return s.setErrorsCorrected(i),s.setErasures(n.length),s}static correctErrors(e,t,n){if(null!=t&&t.length>n/2+pn.MAX_ERRORS||n<0||n>pn.MAX_EC_CODEWORDS)throw f.getChecksumInstance();return pn.errorCorrection.decode(e,n,t)}static verifyCodewordCount(e,t){if(e.length<4)throw A.getFormatInstance();let n=e[0];if(n>e.length)throw A.getFormatInstance();if(0===n){if(!(t<e.length))throw A.getFormatInstance();e[0]=e.length-t}}static getBitCountForCodeword(e){let t=new Int32Array(8),n=0,r=t.length-1;for(;!((1&e)!==n&&(n=1&e,r--,r<0));)t[r]++,e>>=1;return t}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return pn.getCodewordBucketNumber(pn.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let t=new Xt;for(let n=0;n<e.length;n++){t.format("Row %2d: ",n);for(let r=0;r<e[n].length;r++){let i=e[n][r];0===i.getValue().length?t.format("        ",null):t.format("%4d(%2d)",i.getValue()[0],i.getConfidence(i.getValue()[0]))}t.format("%n")}return t.toString()}}pn.CODEWORD_SKEW_SIZE=2,pn.MAX_ERRORS=3,pn.MAX_EC_CODEWORDS=512,pn.errorCorrection=new Gt;class mn{decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=mn.decode(e,t,!1);if(null==n||0===n.length||null==n[0])throw k.getNotFoundInstance();return n[0]}decodeMultiple(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{return mn.decode(e,t,!0)}catch(n){if(n instanceof A||n instanceof f)throw k.getNotFoundInstance();throw n}}static decode(e,t,n){const r=new Array,i=Vt.detectMultiple(e,t,n);for(const s of i.getPoints()){const e=pn.decode(i.getBits(),s[4],s[5],s[6],s[7],mn.getMinCodewordWidth(s),mn.getMaxCodewordWidth(s)),t=new U(e.getText(),e.getRawBytes(),void 0,s,V.PDF_417);t.putMetadata(X.ERROR_CORRECTION_LEVEL,e.getECLevel());const n=e.getOther();null!=n&&t.putMetadata(X.PDF417_EXTRA_METADATA,n),r.push(t)}return r.map(e=>e)}static getMaxWidth(e,t){return null==e||null==t?0:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMinWidth(e,t){return null==e||null==t?w.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(mn.getMaxWidth(e[0],e[4]),mn.getMaxWidth(e[6],e[2])*Ut.MODULES_IN_CODEWORD/Ut.MODULES_IN_STOP_PATTERN),Math.max(mn.getMaxWidth(e[1],e[5]),mn.getMaxWidth(e[7],e[3])*Ut.MODULES_IN_CODEWORD/Ut.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(mn.getMinWidth(e[0],e[4]),mn.getMinWidth(e[6],e[2])*Ut.MODULES_IN_CODEWORD/Ut.MODULES_IN_STOP_PATTERN),Math.min(mn.getMinWidth(e[1],e[5]),mn.getMinWidth(e[7],e[3])*Ut.MODULES_IN_CODEWORD/Ut.MODULES_IN_STOP_PATTERN)))}reset(){}}class gn extends c{}gn.kind="ReaderException";class yn{constructor(e,t){this.verbose=!0===e,t&&this.setHints(t)}decode(e,t){return t&&this.setHints(t),this.decodeInternal(e)}decodeWithState(e){return null!==this.readers&&void 0!==this.readers||this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const n=!t(e)&&!0===e.get(S.TRY_HARDER),r=t(e)?null:e.get(S.POSSIBLE_FORMATS),i=new Array;if(!t(r)){const t=r.some(e=>e===V.UPC_A||e===V.UPC_E||e===V.EAN_13||e===V.EAN_8||e===V.CODABAR||e===V.CODE_39||e===V.CODE_93||e===V.CODE_128||e===V.ITF||e===V.RSS_14||e===V.RSS_EXPANDED);t&&!n&&i.push(new lt(e,this.verbose)),r.includes(V.QR_CODE)&&i.push(new Bt),r.includes(V.DATA_MATRIX)&&i.push(new wt),r.includes(V.AZTEC)&&i.push(new ye),r.includes(V.PDF_417)&&i.push(new mn),t&&n&&i.push(new lt(e,this.verbose))}0===i.length&&(n||i.push(new lt(e,this.verbose)),i.push(new Bt),i.push(new wt),i.push(new ye),i.push(new mn),n&&i.push(new lt(e,this.verbose))),this.readers=i}reset(){if(null!==this.readers)for(const e of this.readers)e.reset()}decodeInternal(e){if(null===this.readers)throw new gn("No readers where selected, nothing can be read.");for(const n of this.readers)try{return n.decode(e,this.hints)}catch(t){if(t instanceof gn)continue}throw new k("No MultiFormat Readers were able to detect the code.")}}class vn extends B{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;const n=new yn;n.setHints(e),super(n,t)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class wn extends B{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;super(new mn,e)}}class bn extends B{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;super(new Bt,e)}}var xn;!function(e){e[e.ERROR_CORRECTION=0]="ERROR_CORRECTION",e[e.CHARACTER_SET=1]="CHARACTER_SET",e[e.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",e[e.MIN_SIZE=3]="MIN_SIZE",e[e.MAX_SIZE=4]="MAX_SIZE",e[e.MARGIN=5]="MARGIN",e[e.PDF417_COMPACT=6]="PDF417_COMPACT",e[e.PDF417_COMPACTION=7]="PDF417_COMPACTION",e[e.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",e[e.AZTEC_LAYERS=9]="AZTEC_LAYERS",e[e.QR_VERSION=10]="QR_VERSION"}(xn||(xn={}));var Sn=xn;class An{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Z(e,Int32Array.from([1])))}buildGenerator(e){const t=this.cachedGenerators;if(e>=t.length){let n=t[t.length-1];const r=this.field;for(let i=t.length;i<=e;i++){const e=n.multiply(new Z(r,Int32Array.from([1,r.exp(i-1+r.getGeneratorBase())])));t.push(e),n=e}}return t[e]}encode(e,t){if(0===t)throw new d("No error correction bytes");const n=e.length-t;if(n<=0)throw new d("No data bytes provided");const r=this.buildGenerator(t),i=new Int32Array(n);m.arraycopy(e,0,i,0,n);let s=new Z(this.field,i);s=s.multiplyByMonomial(t,1);const a=s.divide(r)[1].getCoefficients(),o=t-a.length;for(let l=0;l<o;l++)e[n+l]=0;m.arraycopy(a,0,e,n+o,a.length)}}class En{constructor(){}static applyMaskPenaltyRule1(e){return En.applyMaskPenaltyRule1Internal(e,!0)+En.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let t=0;const n=e.getArray(),r=e.getWidth(),i=e.getHeight();for(let s=0;s<i-1;s++){const e=n[s];for(let i=0;i<r-1;i++){const r=e[i];r===e[i+1]&&r===n[s+1][i]&&r===n[s+1][i+1]&&t++}}return En.N2*t}static applyMaskPenaltyRule3(e){let t=0;const n=e.getArray(),r=e.getWidth(),i=e.getHeight();for(let s=0;s<i;s++)for(let e=0;e<r;e++){const a=n[s];e+6<r&&1===a[e]&&0===a[e+1]&&1===a[e+2]&&1===a[e+3]&&1===a[e+4]&&0===a[e+5]&&1===a[e+6]&&(En.isWhiteHorizontal(a,e-4,e)||En.isWhiteHorizontal(a,e+7,e+11))&&t++,s+6<i&&1===n[s][e]&&0===n[s+1][e]&&1===n[s+2][e]&&1===n[s+3][e]&&1===n[s+4][e]&&0===n[s+5][e]&&1===n[s+6][e]&&(En.isWhiteVertical(n,e,s-4,s)||En.isWhiteVertical(n,e,s+7,s+11))&&t++}return t*En.N3}static isWhiteHorizontal(e,t,n){t=Math.max(t,0),n=Math.min(n,e.length);for(let r=t;r<n;r++)if(1===e[r])return!1;return!0}static isWhiteVertical(e,t,n,r){n=Math.max(n,0),r=Math.min(r,e.length);for(let i=n;i<r;i++)if(1===e[i][t])return!1;return!0}static applyMaskPenaltyRule4(e){let t=0;const n=e.getArray(),r=e.getWidth(),i=e.getHeight();for(let a=0;a<i;a++){const e=n[a];for(let n=0;n<r;n++)1===e[n]&&t++}const s=e.getHeight()*e.getWidth();return Math.floor(10*Math.abs(2*t-s)/s)*En.N4}static getDataMaskBit(e,t,n){let r,i;switch(e){case 0:r=n+t&1;break;case 1:r=1&n;break;case 2:r=t%3;break;case 3:r=(n+t)%3;break;case 4:r=Math.floor(n/2)+Math.floor(t/3)&1;break;case 5:i=n*t,r=(1&i)+i%3;break;case 6:i=n*t,r=(1&i)+i%3&1;break;case 7:i=n*t,r=i%3+(n+t&1)&1;break;default:throw new d("Invalid mask pattern: "+e)}return 0===r}static applyMaskPenaltyRule1Internal(e,t){let n=0;const r=t?e.getHeight():e.getWidth(),i=t?e.getWidth():e.getHeight(),s=e.getArray();for(let a=0;a<r;a++){let e=0,r=-1;for(let o=0;o<i;o++){const i=t?s[a][o]:s[o][a];i===r?e++:(e>=5&&(n+=En.N1+(e-5)),e=1,r=i)}e>=5&&(n+=En.N1+(e-5))}return n}}En.N1=3,En.N2=3,En.N3=40,En.N4=10;class Nn{constructor(e,t){this.width=e,this.height=t;const n=new Array(t);for(let r=0;r!==t;r++)n[r]=new Uint8Array(e);this.bytes=n}getHeight(){return this.height}getWidth(){return this.width}get(e,t){return this.bytes[t][e]}getArray(){return this.bytes}setNumber(e,t,n){this.bytes[t][e]=n}setBoolean(e,t,n){this.bytes[t][e]=n?1:0}clear(e){for(const t of this.bytes)v.fill(t,e)}equals(e){if(!(e instanceof Nn))return!1;const t=e;if(this.width!==t.width)return!1;if(this.height!==t.height)return!1;for(let n=0,r=this.height;n<r;++n){const e=this.bytes[n],r=t.bytes[n];for(let t=0,n=this.width;t<n;++t)if(e[t]!==r[t])return!1}return!0}toString(){const e=new T;for(let t=0,n=this.height;t<n;++t){const n=this.bytes[t];for(let t=0,r=this.width;t<r;++t)switch(n[t]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ")}e.append("\n")}return e.toString()}}class Cn{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const e=new T;return e.append("<<\n"),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append("\n ecLevel: "),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append("\n version: "),e.append(this.version?this.version.toString():"null"),e.append("\n maskPattern: "),e.append(this.maskPattern.toString()),this.matrix?(e.append("\n matrix:\n"),e.append(this.matrix.toString())):e.append("\n matrix: null\n"),e.append(">>\n"),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<Cn.NUM_MASK_PATTERNS}}Cn.NUM_MASK_PATTERNS=8;class _n extends c{}_n.kind="WriterException";class Tn{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,t,n,r,i){Tn.clearMatrix(i),Tn.embedBasicPatterns(n,i),Tn.embedTypeInfo(t,r,i),Tn.maybeEmbedVersionInfo(n,i),Tn.embedDataBits(e,r,i)}static embedBasicPatterns(e,t){Tn.embedPositionDetectionPatternsAndSeparators(t),Tn.embedDarkDotAtLeftBottomCorner(t),Tn.maybeEmbedPositionAdjustmentPatterns(e,t),Tn.embedTimingPatterns(t)}static embedTypeInfo(e,t,n){const r=new b;Tn.makeTypeInfoBits(e,t,r);for(let i=0,s=r.getSize();i<s;++i){const e=r.get(r.getSize()-1-i),t=Tn.TYPE_INFO_COORDINATES[i],s=t[0],a=t[1];if(n.setBoolean(s,a,e),i<8){const t=n.getWidth()-i-1,r=8;n.setBoolean(t,r,e)}else{const t=8,r=n.getHeight()-7+(i-8);n.setBoolean(t,r,e)}}}static maybeEmbedVersionInfo(e,t){if(e.getVersionNumber()<7)return;const n=new b;Tn.makeVersionInfoBits(e,n);let r=17;for(let i=0;i<6;++i)for(let e=0;e<3;++e){const s=n.get(r);r--,t.setBoolean(i,t.getHeight()-11+e,s),t.setBoolean(t.getHeight()-11+e,i,s)}}static embedDataBits(e,t,n){let r=0,i=-1,s=n.getWidth()-1,a=n.getHeight()-1;for(;s>0;){for(6===s&&(s-=1);a>=0&&a<n.getHeight();){for(let i=0;i<2;++i){const o=s-i;if(!Tn.isEmpty(n.get(o,a)))continue;let l;r<e.getSize()?(l=e.get(r),++r):l=!1,255!==t&&En.getDataMaskBit(t,o,a)&&(l=!l),n.setBoolean(o,a,l)}a+=i}i=-i,a+=i,s-=2}if(r!==e.getSize())throw new _n("Not all bits consumed: "+r+"/"+e.getSize())}static findMSBSet(e){return 32-w.numberOfLeadingZeros(e)}static calculateBCHCode(e,t){if(0===t)throw new d("0 polynomial");const n=Tn.findMSBSet(t);for(e<<=n-1;Tn.findMSBSet(e)>=n;)e^=t<<Tn.findMSBSet(e)-n;return e}static makeTypeInfoBits(e,t,n){if(!Cn.isValidMaskPattern(t))throw new _n("Invalid mask pattern");const r=e.getBits()<<3|t;n.appendBits(r,5);const i=Tn.calculateBCHCode(r,Tn.TYPE_INFO_POLY);n.appendBits(i,10);const s=new b;if(s.appendBits(Tn.TYPE_INFO_MASK_PATTERN,15),n.xor(s),15!==n.getSize())throw new _n("should not happen but we got: "+n.getSize())}static makeVersionInfoBits(e,t){t.appendBits(e.getVersionNumber(),6);const n=Tn.calculateBCHCode(e.getVersionNumber(),Tn.VERSION_INFO_POLY);if(t.appendBits(n,12),18!==t.getSize())throw new _n("should not happen but we got: "+t.getSize())}static isEmpty(e){return 255===e}static embedTimingPatterns(e){for(let t=8;t<e.getWidth()-8;++t){const n=(t+1)%2;Tn.isEmpty(e.get(t,6))&&e.setNumber(t,6,n),Tn.isEmpty(e.get(6,t))&&e.setNumber(6,t,n)}}static embedDarkDotAtLeftBottomCorner(e){if(0===e.get(8,e.getHeight()-8))throw new _n;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,t,n){for(let r=0;r<8;++r){if(!Tn.isEmpty(n.get(e+r,t)))throw new _n;n.setNumber(e+r,t,0)}}static embedVerticalSeparationPattern(e,t,n){for(let r=0;r<7;++r){if(!Tn.isEmpty(n.get(e,t+r)))throw new _n;n.setNumber(e,t+r,0)}}static embedPositionAdjustmentPattern(e,t,n){for(let r=0;r<5;++r){const i=Tn.POSITION_ADJUSTMENT_PATTERN[r];for(let s=0;s<5;++s)n.setNumber(e+s,t+r,i[s])}}static embedPositionDetectionPattern(e,t,n){for(let r=0;r<7;++r){const i=Tn.POSITION_DETECTION_PATTERN[r];for(let s=0;s<7;++s)n.setNumber(e+s,t+r,i[s])}}static embedPositionDetectionPatternsAndSeparators(e){const t=Tn.POSITION_DETECTION_PATTERN[0].length;Tn.embedPositionDetectionPattern(0,0,e),Tn.embedPositionDetectionPattern(e.getWidth()-t,0,e),Tn.embedPositionDetectionPattern(0,e.getWidth()-t,e);const n=8;Tn.embedHorizontalSeparationPattern(0,n-1,e),Tn.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),Tn.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);const r=7;Tn.embedVerticalSeparationPattern(r,0,e),Tn.embedVerticalSeparationPattern(e.getHeight()-r-1,0,e),Tn.embedVerticalSeparationPattern(r,e.getHeight()-r,e)}static maybeEmbedPositionAdjustmentPatterns(e,t){if(e.getVersionNumber()<2)return;const n=e.getVersionNumber()-1,r=Tn.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n];for(let i=0,s=r.length;i!==s;i++){const e=r[i];if(e>=0)for(let n=0;n!==s;n++){const i=r[n];i>=0&&Tn.isEmpty(t.get(i,e))&&Tn.embedPositionAdjustmentPattern(i-2,e-2,t)}}}}Tn.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Tn.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Tn.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Tn.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Tn.VERSION_INFO_POLY=7973,Tn.TYPE_INFO_POLY=1335,Tn.TYPE_INFO_MASK_PATTERN=21522;class In{constructor(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class kn{constructor(){}static calculateMaskPenalty(e){return En.applyMaskPenaltyRule1(e)+En.applyMaskPenaltyRule2(e)+En.applyMaskPenaltyRule3(e)+En.applyMaskPenaltyRule4(e)}static encode(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=kn.DEFAULT_BYTE_MODE_ENCODING;const i=null!==n&&void 0!==n.get(Sn.CHARACTER_SET);i&&(r=n.get(Sn.CHARACTER_SET).toString());const s=this.chooseMode(e,r),a=new b;if(s===It.BYTE&&(i||kn.DEFAULT_BYTE_MODE_ENCODING!==r)){const e=E.getCharacterSetECIByName(r);void 0!==e&&this.appendECI(e,a)}this.appendModeInfo(s,a);const o=new b;let l;if(this.appendBytes(e,s,o,r),null!==n&&void 0!==n.get(Sn.QR_VERSION)){const e=Number.parseInt(n.get(Sn.QR_VERSION).toString(),10);l=Nt.getVersionForNumber(e);const r=this.calculateBitsNeeded(s,a,o,l);if(!this.willFit(r,l,t))throw new _n("Data too big for requested version")}else l=this.recommendVersion(t,s,a,o);const c=new b;c.appendBitArray(a);const u=s===It.BYTE?o.getSizeInBytes():e.length;this.appendLengthInfo(u,l,s,c),c.appendBitArray(o);const d=l.getECBlocksForLevel(t),h=l.getTotalCodewords()-d.getTotalECCodewords();this.terminateBits(h,c);const f=this.interleaveWithECBytes(c,l.getTotalCodewords(),h,d.getNumBlocks()),p=new Cn;p.setECLevel(t),p.setMode(s),p.setVersion(l);const m=l.getDimensionForVersion(),g=new Nn(m,m),y=this.chooseMaskPattern(f,t,l,g);return p.setMaskPattern(y),Tn.buildMatrix(f,t,l,y,g),p.setMatrix(g),p}static recommendVersion(e,t,n,r){const i=this.calculateBitsNeeded(t,n,r,Nt.getVersionForNumber(1)),s=this.chooseVersion(i,e),a=this.calculateBitsNeeded(t,n,r,s);return this.chooseVersion(a,e)}static calculateBitsNeeded(e,t,n,r){return t.getSize()+e.getCharacterCountBits(r)+n.getSize()}static getAlphanumericCode(e){return e<kn.ALPHANUMERIC_TABLE.length?kn.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(E.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return It.KANJI;let n=!1,r=!1;for(let i=0,s=e.length;i<s;++i){const t=e.charAt(i);if(kn.isDigit(t))n=!0;else{if(-1===this.getAlphanumericCode(t.charCodeAt(0)))return It.BYTE;r=!0}}return r?It.ALPHANUMERIC:n?It.NUMERIC:It.BYTE}static isOnlyDoubleByteKanji(e){let t;try{t=C.encode(e,E.SJIS)}catch(r){return!1}const n=t.length;if(n%2!==0)return!1;for(let i=0;i<n;i+=2){const e=255&t[i];if((e<129||e>159)&&(e<224||e>235))return!1}return!0}static chooseMaskPattern(e,t,n,r){let i=Number.MAX_SAFE_INTEGER,s=-1;for(let a=0;a<Cn.NUM_MASK_PATTERNS;a++){Tn.buildMatrix(e,t,n,a,r);let o=this.calculateMaskPenalty(r);o<i&&(i=o,s=a)}return s}static chooseVersion(e,t){for(let n=1;n<=40;n++){const r=Nt.getVersionForNumber(n);if(kn.willFit(e,r,t))return r}throw new _n("Data too big")}static willFit(e,t,n){return t.getTotalCodewords()-t.getECBlocksForLevel(n).getTotalECCodewords()>=(e+7)/8}static terminateBits(e,t){const n=8*e;if(t.getSize()>n)throw new _n("data bits cannot fit in the QR Code"+t.getSize()+" > "+n);for(let s=0;s<4&&t.getSize()<n;++s)t.appendBit(!1);const r=7&t.getSize();if(r>0)for(let s=r;s<8;s++)t.appendBit(!1);const i=e-t.getSizeInBytes();for(let s=0;s<i;++s)t.appendBits(0===(1&s)?236:17,8);if(t.getSize()!==n)throw new _n("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,t,n,r,i,s){if(r>=n)throw new _n("Block ID too large");const a=e%n,o=n-a,l=Math.floor(e/n),c=l+1,u=Math.floor(t/n),d=u+1,h=l-u,f=c-d;if(h!==f)throw new _n("EC bytes mismatch");if(n!==o+a)throw new _n("RS blocks mismatch");if(e!==(u+h)*o+(d+f)*a)throw new _n("Total bytes mismatch");r<o?(i[0]=u,s[0]=h):(i[0]=d,s[0]=f)}static interleaveWithECBytes(e,t,n,r){if(e.getSizeInBytes()!==n)throw new _n("Number of bits and data bytes does not match");let i=0,s=0,a=0;const o=new Array;for(let c=0;c<r;++c){const l=new Int32Array(1),u=new Int32Array(1);kn.getNumDataBytesAndNumECBytesForBlockID(t,n,r,c,l,u);const d=l[0],h=new Uint8Array(d);e.toBytes(8*i,h,0,d);const f=kn.generateECBytes(h,u[0]);o.push(new In(h,f)),s=Math.max(s,d),a=Math.max(a,f.length),i+=l[0]}if(n!==i)throw new _n("Data bytes does not match offset");const l=new b;for(let c=0;c<s;++c)for(const e of o){const t=e.getDataBytes();c<t.length&&l.appendBits(t[c],8)}for(let c=0;c<a;++c)for(const e of o){const t=e.getErrorCorrectionBytes();c<t.length&&l.appendBits(t[c],8)}if(t!==l.getSizeInBytes())throw new _n("Interleaving error: "+t+" and "+l.getSizeInBytes()+" differ.");return l}static generateECBytes(e,t){const n=e.length,r=new Int32Array(n+t);for(let s=0;s<n;s++)r[s]=255&e[s];new An(ee.QR_CODE_FIELD_256).encode(r,t);const i=new Uint8Array(t);for(let s=0;s<t;s++)i[s]=r[n+s];return i}static appendModeInfo(e,t){t.appendBits(e.getBits(),4)}static appendLengthInfo(e,t,n,r){const i=n.getCharacterCountBits(t);if(e>=1<<i)throw new _n(e+" is bigger than "+((1<<i)-1));r.appendBits(e,i)}static appendBytes(e,t,n,r){switch(t){case It.NUMERIC:kn.appendNumericBytes(e,n);break;case It.ALPHANUMERIC:kn.appendAlphanumericBytes(e,n);break;case It.BYTE:kn.append8BitBytes(e,n,r);break;case It.KANJI:kn.appendKanjiBytes(e,n);break;default:throw new _n("Invalid mode: "+t)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const t=kn.getDigit(e);return t>=0&&t<=9}static appendNumericBytes(e,t){const n=e.length;let r=0;for(;r<n;){const i=kn.getDigit(e.charAt(r));if(r+2<n){const n=kn.getDigit(e.charAt(r+1)),s=kn.getDigit(e.charAt(r+2));t.appendBits(100*i+10*n+s,10),r+=3}else if(r+1<n){const n=kn.getDigit(e.charAt(r+1));t.appendBits(10*i+n,7),r+=2}else t.appendBits(i,4),r++}}static appendAlphanumericBytes(e,t){const n=e.length;let r=0;for(;r<n;){const i=kn.getAlphanumericCode(e.charCodeAt(r));if(-1===i)throw new _n;if(r+1<n){const n=kn.getAlphanumericCode(e.charCodeAt(r+1));if(-1===n)throw new _n;t.appendBits(45*i+n,11),r+=2}else t.appendBits(i,6),r++}}static append8BitBytes(e,t,n){let r;try{r=C.encode(e,n)}catch(i){throw new _n(i)}for(let s=0,a=r.length;s!==a;s++){const e=r[s];t.appendBits(e,8)}}static appendKanjiBytes(e,t){let n;try{n=C.encode(e,E.SJIS)}catch(i){throw new _n(i)}const r=n.length;for(let s=0;s<r;s+=2){const e=(255&n[s])<<8&4294967295|255&n[s+1];let r=-1;if(e>=33088&&e<=40956?r=e-33088:e>=57408&&e<=60351&&(r=e-49472),-1===r)throw new _n("Invalid byte sequence");const i=192*(r>>8)+(255&r);t.appendBits(i,13)}}static appendECI(e,t){t.appendBits(It.ECI.getBits(),4),t.appendBits(e.getValue(),8)}}kn.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),kn.DEFAULT_BYTE_MODE_ENCODING=E.UTF8.getName();class Pn{write(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(0===e.length)throw new d("Found empty contents");if(t<0||n<0)throw new d("Requested dimensions are too small: "+t+"x"+n);let i=xt.L,s=Pn.QUIET_ZONE_SIZE;null!==r&&(void 0!==r.get(Sn.ERROR_CORRECTION)&&(i=xt.fromString(r.get(Sn.ERROR_CORRECTION).toString())),void 0!==r.get(Sn.MARGIN)&&(s=Number.parseInt(r.get(Sn.MARGIN).toString(),10)));const a=kn.encode(e,i,r);return this.renderResult(a,t,n,s)}writeToDom(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;"string"===typeof e&&(e=document.querySelector(e));const s=this.write(t,n,r,i);e&&e.appendChild(s)}renderResult(e,t,n,r){const i=e.getMatrix();if(null===i)throw new ne;const s=i.getWidth(),a=i.getHeight(),o=s+2*r,l=a+2*r,c=Math.max(t,o),u=Math.max(n,l),d=Math.min(Math.floor(c/o),Math.floor(u/l)),h=Math.floor((c-s*d)/2),f=Math.floor((u-a*d)/2),p=this.createSVGElement(c,u);for(let m=0,g=f;m<a;m++,g+=d)for(let e=0,t=h;e<s;e++,t+=d)if(1===i.get(e,m)){const e=this.createSvgRectElement(t,g,d,d);p.appendChild(e)}return p}createSVGElement(e,t){const n=document.createElementNS(Pn.SVG_NS,"svg");return n.setAttributeNS(null,"height",e.toString()),n.setAttributeNS(null,"width",t.toString()),n}createSvgRectElement(e,t,n,r){const i=document.createElementNS(Pn.SVG_NS,"rect");return i.setAttributeNS(null,"x",e.toString()),i.setAttributeNS(null,"y",t.toString()),i.setAttributeNS(null,"height",n.toString()),i.setAttributeNS(null,"width",r.toString()),i.setAttributeNS(null,"fill","#000000"),i}}Pn.QUIET_ZONE_SIZE=4,Pn.SVG_NS="http://www.w3.org/2000/svg";class Rn{encode(e,t,n,r,i){if(0===e.length)throw new d("Found empty contents");if(t!==V.QR_CODE)throw new d("Can only encode QR_CODE, but got "+t);if(n<0||r<0)throw new d("Requested dimensions are too small: ".concat(n,"x").concat(r));let s=xt.L,a=Rn.QUIET_ZONE_SIZE;null!==i&&(void 0!==i.get(Sn.ERROR_CORRECTION)&&(s=xt.fromString(i.get(Sn.ERROR_CORRECTION).toString())),void 0!==i.get(Sn.MARGIN)&&(a=Number.parseInt(i.get(Sn.MARGIN).toString(),10)));const o=kn.encode(e,s,i);return Rn.renderResult(o,n,r,a)}static renderResult(e,t,n,r){const i=e.getMatrix();if(null===i)throw new ne;const s=i.getWidth(),a=i.getHeight(),o=s+2*r,l=a+2*r,c=Math.max(t,o),u=Math.max(n,l),d=Math.min(Math.floor(c/o),Math.floor(u/l)),h=Math.floor((c-s*d)/2),f=Math.floor((u-a*d)/2),p=new I(c,u);for(let m=0,g=f;m<a;m++,g+=d)for(let e=0,t=h;e<s;e++,t+=d)1===i.get(e,m)&&p.setRegion(t,g,d,d);return p}}Rn.QUIET_ZONE_SIZE=4;class Dn{encode(e,t,n,r,i){let s;if(t!==V.QR_CODE)throw new d("No encoder available for format "+t);return s=new Rn,s.encode(e,t,n,r,i)}}class On extends D{constructor(e,t,n,r,i,s,a,o){if(super(s,a),this.yuvData=e,this.dataWidth=t,this.dataHeight=n,this.left=r,this.top=i,r+s>t||i+a>n)throw new d("Crop rectangle does not fit within image data.");o&&this.reverseHorizontal(s,a)}getRow(e,t){if(e<0||e>=this.getHeight())throw new d("Requested row is outside the image: "+e);const n=this.getWidth();(null===t||void 0===t||t.length<n)&&(t=new Uint8ClampedArray(n));const r=(e+this.top)*this.dataWidth+this.left;return m.arraycopy(this.yuvData,r,t,0,n),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.yuvData;const n=e*t,r=new Uint8ClampedArray(n);let i=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return m.arraycopy(this.yuvData,i,r,0,n),r;for(let s=0;s<t;s++){const t=s*e;m.arraycopy(this.yuvData,i,r,t,e),i+=this.dataWidth}return r}isCropSupported(){return!0}crop(e,t,n,r){return new On(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+t,n,r,!1)}renderThumbnail(){const e=this.getWidth()/On.THUMBNAIL_SCALE_FACTOR,t=this.getHeight()/On.THUMBNAIL_SCALE_FACTOR,n=new Int32Array(e*t),r=this.yuvData;let i=this.top*this.dataWidth+this.left;for(let s=0;s<t;s++){const t=s*e;for(let s=0;s<e;s++){const e=255&r[i+s*On.THUMBNAIL_SCALE_FACTOR];n[t+s]=4278190080|65793*e}i+=this.dataWidth*On.THUMBNAIL_SCALE_FACTOR}return n}getThumbnailWidth(){return this.getWidth()/On.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/On.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,t){const n=this.yuvData;for(let r=0,i=this.top*this.dataWidth+this.left;r<t;r++,i+=this.dataWidth){const t=i+e/2;for(let r=i,s=i+e-1;r<t;r++,s--){const e=n[r];n[r]=n[s],n[s]=e}}}invert(){return new O(this)}}On.THUMBNAIL_SCALE_FACTOR=2;class Ln extends D{constructor(e,t,n,r,i,s,a){if(super(t,n),this.dataWidth=r,this.dataHeight=i,this.left=s,this.top=a,4===e.BYTES_PER_ELEMENT){const r=t*n,i=new Uint8ClampedArray(r);for(let t=0;t<r;t++){const n=e[t],r=n>>16&255,s=n>>7&510,a=255&n;i[t]=(r+s+a)/4&255}this.luminances=i}else this.luminances=e;if(void 0===r&&(this.dataWidth=t),void 0===i&&(this.dataHeight=n),void 0===s&&(this.left=0),void 0===a&&(this.top=0),this.left+t>this.dataWidth||this.top+n>this.dataHeight)throw new d("Crop rectangle does not fit within image data.")}getRow(e,t){if(e<0||e>=this.getHeight())throw new d("Requested row is outside the image: "+e);const n=this.getWidth();(null===t||void 0===t||t.length<n)&&(t=new Uint8ClampedArray(n));const r=(e+this.top)*this.dataWidth+this.left;return m.arraycopy(this.luminances,r,t,0,n),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.luminances;const n=e*t,r=new Uint8ClampedArray(n);let i=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return m.arraycopy(this.luminances,i,r,0,n),r;for(let s=0;s<t;s++){const t=s*e;m.arraycopy(this.luminances,i,r,t,e),i+=this.dataWidth}return r}isCropSupported(){return!0}crop(e,t,n,r){return new Ln(this.luminances,n,r,this.dataWidth,this.dataHeight,this.left+e,this.top+t)}invert(){return new O(this)}}class Mn extends E{static forName(e){return this.getCharacterSetECIByName(e)}}class Fn{}Fn.ISO_8859_1=E.ISO8859_1;class jn{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class Bn{static singletonList(e){return[e]}static min(e,t){return e.sort(t)[0]}}class Un{constructor(e){this.previous=e}getPrevious(){return this.previous}}class zn extends Un{constructor(e,t,n){super(e),this.value=t,this.bitCount=n}appendTo(e,t){e.appendBits(this.value,this.bitCount)}add(e,t){return new zn(this,e,t)}addBinaryShift(e,t){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new zn(this,e,t)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+w.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class Vn extends zn{constructor(e,t,n){super(e,0,0),this.binaryShiftStart=t,this.binaryShiftByteCount=n}appendTo(e,t){for(let n=0;n<this.binaryShiftByteCount;n++)(0===n||31===n&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):0===n?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(t[this.binaryShiftStart+n],8)}addBinaryShift(e,t){return new Vn(this,e,t)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Hn(e,t,n){return new Vn(e,t,n)}function Wn(e,t,n){return new zn(e,t,n)}const qn=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Gn=0,Kn=1,Yn=2,Xn=3,Qn=4,Jn=new zn(null,0,0),Zn=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])];function $n(e){for(let t of e)v.fill(t,-1);return e[Gn][Qn]=0,e[Kn][Qn]=0,e[Kn][Gn]=28,e[Xn][Qn]=0,e[Yn][Qn]=0,e[Yn][Gn]=15,e}const er=$n(v.createInt32Array(6,6));class tr{constructor(e,t,n,r){this.token=e,this.mode=t,this.binaryShiftByteCount=n,this.bitCount=r}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,t){let n=this.bitCount,r=this.token;if(e!==this.mode){let t=Zn[this.mode][e];r=Wn(r,65535&t,t>>16),n+=t>>16}let i=e===Yn?4:5;return r=Wn(r,t,i),new tr(r,e,0,n+i)}shiftAndAppend(e,t){let n=this.token,r=this.mode===Yn?4:5;return n=Wn(n,er[this.mode][e],r),n=Wn(n,t,5),new tr(n,this.mode,0,this.bitCount+r+5)}addBinaryShiftChar(e){let t=this.token,n=this.mode,r=this.bitCount;if(this.mode===Qn||this.mode===Yn){let e=Zn[n][Gn];t=Wn(t,65535&e,e>>16),r+=e>>16,n=Gn}let i=0===this.binaryShiftByteCount||31===this.binaryShiftByteCount?18:62===this.binaryShiftByteCount?9:8,s=new tr(t,n,this.binaryShiftByteCount+1,r+i);return 2078===s.binaryShiftByteCount&&(s=s.endBinaryShift(e+1)),s}endBinaryShift(e){if(0===this.binaryShiftByteCount)return this;let t=this.token;return t=Hn(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new tr(t,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let t=this.bitCount+(Zn[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=tr.calculateBinaryShiftCost(e)-tr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount}toBitArray(e){let t=[];for(let r=this.endBinaryShift(e.length).token;null!==r;r=r.getPrevious())t.unshift(r);let n=new b;for(const r of t)r.appendTo(n,e);return n}toString(){return _.format("%s bits=%d bytes=%d",qn[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}function nr(e){const t=_.getCharCode(" "),n=_.getCharCode("."),r=_.getCharCode(",");e[Gn][t]=1;const i=_.getCharCode("Z"),s=_.getCharCode("A");for(let h=s;h<=i;h++)e[Gn][h]=h-s+2;e[Kn][t]=1;const a=_.getCharCode("z"),o=_.getCharCode("a");for(let h=o;h<=a;h++)e[Kn][h]=h-o+2;e[Yn][t]=1;const l=_.getCharCode("9"),c=_.getCharCode("0");for(let h=c;h<=l;h++)e[Yn][h]=h-c+2;e[Yn][r]=12,e[Yn][n]=13;const u=["\0"," ","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","\t","\n","\v","\f","\r","\x1b","\x1c","\x1d","\x1e","\x1f","@","\\","^","_","`","|","~","\x7f"];for(let h=0;h<u.length;h++)e[Xn][_.getCharCode(u[h])]=h;const d=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let h=0;h<d.length;h++)_.getCharCode(d[h])>0&&(e[Qn][_.getCharCode(d[h])]=h);return e}tr.INITIAL_STATE=new tr(Jn,Gn,0,0);const rr=nr(v.createInt32Array(5,256));class ir{constructor(e){this.text=e}encode(){const e=_.getCharCode(" "),t=_.getCharCode("\n");let n=Bn.singletonList(tr.INITIAL_STATE);for(let r=0;r<this.text.length;r++){let i,s=r+1<this.text.length?this.text[r+1]:0;switch(this.text[r]){case _.getCharCode("\r"):i=s===t?2:0;break;case _.getCharCode("."):i=s===e?3:0;break;case _.getCharCode(","):i=s===e?4:0;break;case _.getCharCode(":"):i=s===e?5:0;break;default:i=0}i>0?(n=ir.updateStateListForPair(n,r,i),r++):n=this.updateStateListForChar(n,r)}return Bn.min(n,(e,t)=>e.getBitCount()-t.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,t){const n=[];for(let r of e)this.updateStateForChar(r,t,n);return ir.simplifyStates(n)}updateStateForChar(e,t,n){let r=255&this.text[t],i=rr[e.getMode()][r]>0,s=null;for(let a=0;a<=Qn;a++){let o=rr[a][r];if(o>0){if(null==s&&(s=e.endBinaryShift(t)),!i||a===e.getMode()||a===Yn){const e=s.latchAndAppend(a,o);n.push(e)}if(!i&&er[e.getMode()][a]>=0){const e=s.shiftAndAppend(a,o);n.push(e)}}}if(e.getBinaryShiftByteCount()>0||0===rr[e.getMode()][r]){let r=e.addBinaryShiftChar(t);n.push(r)}}static updateStateListForPair(e,t,n){const r=[];for(let i of e)this.updateStateForPair(i,t,n,r);return this.simplifyStates(r)}static updateStateForPair(e,t,n,r){let i=e.endBinaryShift(t);if(r.push(i.latchAndAppend(Qn,n)),e.getMode()!==Qn&&r.push(i.shiftAndAppend(Qn,n)),3===n||4===n){let e=i.latchAndAppend(Yn,16-n).latchAndAppend(Yn,1);r.push(e)}if(e.getBinaryShiftByteCount()>0){let n=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);r.push(n)}}static simplifyStates(e){let t=[];for(const n of e){let e=!0;for(const r of t){if(r.isBetterThanOrEqualTo(n)){e=!1;break}n.isBetterThanOrEqualTo(r)&&(t=t.filter(e=>e!==r))}e&&t.push(n)}return t}}class sr{constructor(){}static encodeBytes(e){return sr.encode(e,sr.DEFAULT_EC_PERCENT,sr.DEFAULT_AZTEC_LAYERS)}static encode(e,t,n){let r,i,s,a,o,l=new ir(e).encode(),c=w.truncDivision(l.getSize()*t,100)+11,u=l.getSize()+c;if(n!==sr.DEFAULT_AZTEC_LAYERS){if(r=n<0,i=Math.abs(n),i>(r?sr.MAX_NB_BITS_COMPACT:sr.MAX_NB_BITS))throw new d(_.format("Illegal value %s for layers",n));s=sr.totalBitsInLayer(i,r),a=sr.WORD_SIZE[i];let e=s-s%a;if(o=sr.stuffBits(l,a),o.getSize()+c>e)throw new d("Data to large for user specified layer");if(r&&o.getSize()>64*a)throw new d("Data to large for user specified layer")}else{a=0,o=null;for(let e=0;;e++){if(e>sr.MAX_NB_BITS)throw new d("Data too large for an Aztec code");if(r=e<=3,i=r?e+1:e,s=sr.totalBitsInLayer(i,r),u>s)continue;null!=o&&a===sr.WORD_SIZE[i]||(a=sr.WORD_SIZE[i],o=sr.stuffBits(l,a));let t=s-s%a;if(!(r&&o.getSize()>64*a)&&o.getSize()+c<=t)break}}let h,f=sr.generateCheckWords(o,s,a),p=o.getSize()/a,m=sr.generateModeMessage(r,i,p),g=(r?11:14)+4*i,y=new Int32Array(g);if(r){h=g;for(let e=0;e<y.length;e++)y[e]=e}else{h=g+1+2*w.truncDivision(w.truncDivision(g,2)-1,15);let e=w.truncDivision(g,2),t=w.truncDivision(h,2);for(let n=0;n<e;n++){let r=n+w.truncDivision(n,15);y[e-n-1]=t-r-1,y[e+n]=t+r+1}}let v=new I(h);for(let d=0,w=0;d<i;d++){let e=4*(i-d)+(r?9:12);for(let t=0;t<e;t++){let n=2*t;for(let r=0;r<2;r++)f.get(w+n+r)&&v.set(y[2*d+r],y[2*d+t]),f.get(w+2*e+n+r)&&v.set(y[2*d+t],y[g-1-2*d-r]),f.get(w+4*e+n+r)&&v.set(y[g-1-2*d-r],y[g-1-2*d-t]),f.get(w+6*e+n+r)&&v.set(y[g-1-2*d-t],y[2*d+r])}w+=8*e}if(sr.drawModeMessage(v,r,h,m),r)sr.drawBullsEye(v,w.truncDivision(h,2),5);else{sr.drawBullsEye(v,w.truncDivision(h,2),7);for(let e=0,t=0;e<w.truncDivision(g,2)-1;e+=15,t+=16)for(let n=1&w.truncDivision(h,2);n<h;n+=2)v.set(w.truncDivision(h,2)-t,n),v.set(w.truncDivision(h,2)+t,n),v.set(n,w.truncDivision(h,2)-t),v.set(n,w.truncDivision(h,2)+t)}let b=new jn;return b.setCompact(r),b.setSize(h),b.setLayers(i),b.setCodeWords(p),b.setMatrix(v),b}static drawBullsEye(e,t,n){for(let r=0;r<n;r+=2)for(let n=t-r;n<=t+r;n++)e.set(n,t-r),e.set(n,t+r),e.set(t-r,n),e.set(t+r,n);e.set(t-n,t-n),e.set(t-n+1,t-n),e.set(t-n,t-n+1),e.set(t+n,t-n),e.set(t+n,t-n+1),e.set(t+n,t+n-1)}static generateModeMessage(e,t,n){let r=new b;return e?(r.appendBits(t-1,2),r.appendBits(n-1,6),r=sr.generateCheckWords(r,28,4)):(r.appendBits(t-1,5),r.appendBits(n-1,11),r=sr.generateCheckWords(r,40,4)),r}static drawModeMessage(e,t,n,r){let i=w.truncDivision(n,2);if(t)for(let s=0;s<7;s++){let t=i-3+s;r.get(s)&&e.set(t,i-5),r.get(s+7)&&e.set(i+5,t),r.get(20-s)&&e.set(t,i+5),r.get(27-s)&&e.set(i-5,t)}else for(let s=0;s<10;s++){let t=i-5+s+w.truncDivision(s,5);r.get(s)&&e.set(t,i-7),r.get(s+10)&&e.set(i+7,t),r.get(29-s)&&e.set(t,i+7),r.get(39-s)&&e.set(i-7,t)}}static generateCheckWords(e,t,n){let r=e.getSize()/n,i=new An(sr.getGF(n)),s=w.truncDivision(t,n),a=sr.bitsToWords(e,n,s);i.encode(a,s-r);let o=t%n,l=new b;l.appendBits(0,o);for(const c of Array.from(a))l.appendBits(c,n);return l}static bitsToWords(e,t,n){let r,i,s=new Int32Array(n);for(r=0,i=e.getSize()/t;r<i;r++){let n=0;for(let i=0;i<t;i++)n|=e.get(r*t+i)?1<<t-i-1:0;s[r]=n}return s}static getGF(e){switch(e){case 4:return ee.AZTEC_PARAM;case 6:return ee.AZTEC_DATA_6;case 8:return ee.AZTEC_DATA_8;case 10:return ee.AZTEC_DATA_10;case 12:return ee.AZTEC_DATA_12;default:throw new d("Unsupported word size "+e)}}static stuffBits(e,t){let n=new b,r=e.getSize(),i=(1<<t)-2;for(let s=0;s<r;s+=t){let a=0;for(let n=0;n<t;n++)(s+n>=r||e.get(s+n))&&(a|=1<<t-1-n);(a&i)===i?(n.appendBits(a&i,t),s--):0===(a&i)?(n.appendBits(1|a,t),s--):n.appendBits(a,t)}return n}static totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}sr.DEFAULT_EC_PERCENT=33,sr.DEFAULT_AZTEC_LAYERS=0,sr.MAX_NB_BITS=32,sr.MAX_NB_BITS_COMPACT=4,sr.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class ar{encode(e,t,n,r){return this.encodeWithHints(e,t,n,r,null)}encodeWithHints(e,t,n,r,i){let s=Fn.ISO_8859_1,a=sr.DEFAULT_EC_PERCENT,o=sr.DEFAULT_AZTEC_LAYERS;return null!=i&&(i.has(Sn.CHARACTER_SET)&&(s=Mn.forName(i.get(Sn.CHARACTER_SET).toString())),i.has(Sn.ERROR_CORRECTION)&&(a=w.parseInt(i.get(Sn.ERROR_CORRECTION).toString())),i.has(Sn.AZTEC_LAYERS)&&(o=w.parseInt(i.get(Sn.AZTEC_LAYERS).toString()))),ar.encodeLayers(e,t,n,r,s,a,o)}static encodeLayers(e,t,n,r,i,s,a){if(t!==V.AZTEC)throw new d("Can only encode AZTEC, but got "+t);let o=sr.encode(_.getBytes(e,i),s,a);return ar.renderResult(o,n,r)}static renderResult(e,t,n){let r=e.getMatrix();if(null==r)throw new ne;let i=r.getWidth(),s=r.getHeight(),a=Math.max(t,i),o=Math.max(n,s),l=Math.min(a/i,o/s),c=(a-i*l)/2,u=(o-s*l)/2,d=new I(a,o);for(let h=0,f=u;h<s;h++,f+=l)for(let e=0,t=c;e<i;e++,t+=l)r.get(e,h)&&d.setRegion(t,f,l,l);return d}}e.AbstractExpandedDecoder=qe,e.ArgumentException=u,e.ArithmeticException=$,e.AztecCode=jn,e.AztecCodeReader=ye,e.AztecCodeWriter=ar,e.AztecDecoder=ie,e.AztecDetector=ge,e.AztecDetectorResult=ce,e.AztecEncoder=sr,e.AztecHighLevelEncoder=ir,e.AztecPoint=me,e.BarcodeFormat=V,e.Binarizer=p,e.BinaryBitmap=h,e.BitArray=b,e.BitMatrix=I,e.BitSource=mt,e.BrowserAztecCodeReader=ve,e.BrowserBarcodeReader=ct,e.BrowserCodeReader=B,e.BrowserDatamatrixCodeReader=bt,e.BrowserMultiFormatReader=vn,e.BrowserPDF417Reader=wn,e.BrowserQRCodeReader=bn,e.BrowserQRCodeSvgWriter=Pn,e.CharacterSetECI=E,e.ChecksumException=f,e.Code128Reader=be,e.Code39Reader=xe,e.DataMatrixDecodedBitStreamParser=gt,e.DataMatrixReader=wt,e.DecodeHintType=S,e.DecoderResult=Q,e.DefaultGridSampler=fe,e.DetectorResult=le,e.EAN13Reader=Te,e.EncodeHintType=Sn,e.Exception=c,e.FormatException=A,e.GenericGF=ee,e.GenericGFPoly=Z,e.GlobalHistogramBinarizer=P,e.GridSampler=de,e.GridSamplerInstance=pe,e.HTMLCanvasElementLuminanceSource=L,e.HybridBinarizer=R,e.ITFReader=Se,e.IllegalArgumentException=d,e.IllegalStateException=ne,e.InvertedLuminanceSource=O,e.LuminanceSource=D,e.MathUtils=se,e.MultiFormatOneDReader=lt,e.MultiFormatReader=yn,e.MultiFormatWriter=Dn,e.NotFoundException=k,e.OneDReader=we,e.PDF417DecodedBitStreamParser=fn,e.PDF417DecoderErrorCorrection=Gt,e.PDF417Reader=mn,e.PDF417ResultMetadata=nn,e.PerspectiveTransform=he,e.PlanarYUVLuminanceSource=On,e.QRCodeByteMatrix=Nn,e.QRCodeDataMask=Ct,e.QRCodeDecodedBitStreamParser=kt,e.QRCodeDecoderErrorCorrectionLevel=xt,e.QRCodeDecoderFormatInformation=St,e.QRCodeEncoder=kn,e.QRCodeEncoderQRCode=Cn,e.QRCodeMaskUtil=En,e.QRCodeMatrixUtil=Tn,e.QRCodeMode=It,e.QRCodeReader=Bt,e.QRCodeVersion=Nt,e.QRCodeWriter=Rn,e.RGBLuminanceSource=Ln,e.RSS14Reader=ot,e.RSSExpandedReader=st,e.ReaderException=gn,e.ReedSolomonDecoder=re,e.ReedSolomonEncoder=An,e.ReedSolomonException=te,e.Result=U,e.ResultMetadataType=X,e.ResultPoint=oe,e.StringUtils=_,e.UnsupportedOperationException=N,e.VideoInputDevice=M,e.WhiteRectangleDetector=ue,e.WriterException=_n,e.ZXingArrays=v,e.ZXingCharset=Mn,e.ZXingInteger=w,e.ZXingStandardCharsets=Fn,e.ZXingStringBuilder=T,e.ZXingStringEncoding=C,e.ZXingSystem=m,e.createAbstractExpandedDecoder=nt,Object.defineProperty(e,"__esModule",{value:!0})}(t)},2182:(e,t,n)=>{const r=n(8293);t.render=function(e,t,n){let i=n,s=t;"undefined"!==typeof i||t&&t.getContext||(i=t,t=void 0),t||(s=function(){try{return document.createElement("canvas")}catch(e){throw new Error("You need to specify a canvas element")}}()),i=r.getOptions(i);const a=r.getImageWidth(e.modules.size,i),o=s.getContext("2d"),l=o.createImageData(a,a);return r.qrToImageData(l.data,e,i),function(e,t,n){e.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=n,t.width=n,t.style.height=n+"px",t.style.width=n+"px"}(o,s,a),o.putImageData(l,0,0),s},t.renderToDataURL=function(e,n,r){let i=r;"undefined"!==typeof i||n&&n.getContext||(i=n,n=void 0),i||(i={});const s=t.render(e,n,i),a=i.type||"image/png",o=i.rendererOpts||{};return s.toDataURL(a,o.quality)}},2284:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{A:()=>r})},2509:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(895);n(1098),n(8679),n(9887),n(5858),t.ActionCodeOperation=r.ActionCodeOperation,t.ActionCodeURL=r.ActionCodeURL,t.AuthCredential=r.AuthCredential,t.AuthErrorCodes=r.AUTH_ERROR_CODES_MAP_DO_NOT_USE_INTERNALLY,t.EmailAuthCredential=r.EmailAuthCredential,t.EmailAuthProvider=r.EmailAuthProvider,t.FacebookAuthProvider=r.FacebookAuthProvider,t.FactorId=r.FactorId,t.GithubAuthProvider=r.GithubAuthProvider,t.GoogleAuthProvider=r.GoogleAuthProvider,t.OAuthCredential=r.OAuthCredential,t.OAuthProvider=r.OAuthProvider,t.OperationType=r.OperationType,t.PhoneAuthCredential=r.PhoneAuthCredential,t.PhoneAuthProvider=r.PhoneAuthProvider,t.PhoneMultiFactorGenerator=r.PhoneMultiFactorGenerator,t.ProviderId=r.ProviderId,t.RecaptchaVerifier=r.RecaptchaVerifier,t.SAMLAuthProvider=r.SAMLAuthProvider,t.SignInMethod=r.SignInMethod,t.TotpMultiFactorGenerator=r.TotpMultiFactorGenerator,t.TotpSecret=r.TotpSecret,t.TwitterAuthProvider=r.TwitterAuthProvider,t.applyActionCode=r.applyActionCode,t.beforeAuthStateChanged=r.beforeAuthStateChanged,t.browserCookiePersistence=r.browserCookiePersistence,t.browserLocalPersistence=r.browserLocalPersistence,t.browserPopupRedirectResolver=r.browserPopupRedirectResolver,t.browserSessionPersistence=r.browserSessionPersistence,t.checkActionCode=r.checkActionCode,t.confirmPasswordReset=r.confirmPasswordReset,t.connectAuthEmulator=r.connectAuthEmulator,t.createUserWithEmailAndPassword=r.createUserWithEmailAndPassword,t.debugErrorMap=r.debugErrorMap,t.deleteUser=r.deleteUser,t.fetchSignInMethodsForEmail=r.fetchSignInMethodsForEmail,t.getAdditionalUserInfo=r.getAdditionalUserInfo,t.getAuth=r.getAuth,t.getIdToken=r.getIdToken,t.getIdTokenResult=r.getIdTokenResult,t.getMultiFactorResolver=r.getMultiFactorResolver,t.getRedirectResult=r.getRedirectResult,t.inMemoryPersistence=r.inMemoryPersistence,t.indexedDBLocalPersistence=r.indexedDBLocalPersistence,t.initializeAuth=r.initializeAuth,t.initializeRecaptchaConfig=r.initializeRecaptchaConfig,t.isSignInWithEmailLink=r.isSignInWithEmailLink,t.linkWithCredential=r.linkWithCredential,t.linkWithPhoneNumber=r.linkWithPhoneNumber,t.linkWithPopup=r.linkWithPopup,t.linkWithRedirect=r.linkWithRedirect,t.multiFactor=r.multiFactor,t.onAuthStateChanged=r.onAuthStateChanged,t.onIdTokenChanged=r.onIdTokenChanged,t.parseActionCodeURL=r.parseActionCodeURL,t.prodErrorMap=r.prodErrorMap,t.reauthenticateWithCredential=r.reauthenticateWithCredential,t.reauthenticateWithPhoneNumber=r.reauthenticateWithPhoneNumber,t.reauthenticateWithPopup=r.reauthenticateWithPopup,t.reauthenticateWithRedirect=r.reauthenticateWithRedirect,t.reload=r.reload,t.revokeAccessToken=r.revokeAccessToken,t.sendEmailVerification=r.sendEmailVerification,t.sendPasswordResetEmail=r.sendPasswordResetEmail,t.sendSignInLinkToEmail=r.sendSignInLinkToEmail,t.setPersistence=r.setPersistence,t.signInAnonymously=r.signInAnonymously,t.signInWithCredential=r.signInWithCredential,t.signInWithCustomToken=r.signInWithCustomToken,t.signInWithEmailAndPassword=r.signInWithEmailAndPassword,t.signInWithEmailLink=r.signInWithEmailLink,t.signInWithPhoneNumber=r.signInWithPhoneNumber,t.signInWithPopup=r.signInWithPopup,t.signInWithRedirect=r.signInWithRedirect,t.signOut=r.signOut,t.unlink=r.unlink,t.updateCurrentUser=r.updateCurrentUser,t.updateEmail=r.updateEmail,t.updatePassword=r.updatePassword,t.updatePhoneNumber=r.updatePhoneNumber,t.updateProfile=r.updateProfile,t.useDeviceLanguage=r.useDeviceLanguage,t.validatePassword=r.validatePassword,t.verifyBeforeUpdateEmail=r.verifyBeforeUpdateEmail,t.verifyPasswordResetCode=r.verifyPasswordResetCode},2799:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(e,t,r){var i=null;if(void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),"key"in t)for(var s in r={},t)"key"!==s&&(r[s]=t[s]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:i,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=i,t.jsxs=i},2897:(e,t,n)=>{var r=n(3693);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){r(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e},e.exports.__esModule=!0,e.exports.default=e.exports},2965:(e,t,n)=>{"use strict";n.d(t,{$b:()=>i,Vy:()=>c});const r=[];var i;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(i||(i={}));const s={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},a=i.INFO,o={[i.DEBUG]:"log",[i.VERBOSE]:"log",[i.INFO]:"info",[i.WARN]:"warn",[i.ERROR]:"error"},l=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=o[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class c{constructor(e){this.name=e,this._logLevel=a,this._logHandler=l,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in i))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?s[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.DEBUG,...t),this._logHandler(this,i.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.VERBOSE,...t),this._logHandler(this,i.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.INFO,...t),this._logHandler(this,i.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.WARN,...t),this._logHandler(this,i.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.ERROR,...t),this._logHandler(this,i.ERROR,...t)}}},3257:(e,t)=>{t.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}},3693:(e,t,n)=>{var r=n(7736);e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},3738:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},3986:(e,t,n)=>{"use strict";function r(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}n.d(t,{A:()=>r})},4004:(e,t,n)=>{const r=n(7421),i=n(900),s=n(9642),a=n(8697),o=n(5200),l=n(8511),c=n(7969),u=n(7347);function d(e){return unescape(encodeURIComponent(e)).length}function h(e,t,n){const r=[];let i;for(;null!==(i=e.exec(n));)r.push({data:i[0],index:i.index,mode:t,length:i[0].length});return r}function f(e){const t=h(l.NUMERIC,r.NUMERIC,e),n=h(l.ALPHANUMERIC,r.ALPHANUMERIC,e);let i,s;c.isKanjiModeEnabled()?(i=h(l.BYTE,r.BYTE,e),s=h(l.KANJI,r.KANJI,e)):(i=h(l.BYTE_KANJI,r.BYTE,e),s=[]);return t.concat(n,i,s).sort(function(e,t){return e.index-t.index}).map(function(e){return{data:e.data,mode:e.mode,length:e.length}})}function p(e,t){switch(t){case r.NUMERIC:return i.getBitsLength(e);case r.ALPHANUMERIC:return s.getBitsLength(e);case r.KANJI:return o.getBitsLength(e);case r.BYTE:return a.getBitsLength(e)}}function m(e,t){let n;const l=r.getBestModeForData(e);if(n=r.from(t,l),n!==r.BYTE&&n.bit<l.bit)throw new Error('"'+e+'" cannot be encoded with mode '+r.toString(n)+".\n Suggested mode is: "+r.toString(l));switch(n!==r.KANJI||c.isKanjiModeEnabled()||(n=r.BYTE),n){case r.NUMERIC:return new i(e);case r.ALPHANUMERIC:return new s(e);case r.KANJI:return new o(e);case r.BYTE:return new a(e)}}t.fromArray=function(e){return e.reduce(function(e,t){return"string"===typeof t?e.push(m(t,null)):t.data&&e.push(m(t.data,t.mode)),e},[])},t.fromString=function(e,n){const i=function(e){const t=[];for(let n=0;n<e.length;n++){const i=e[n];switch(i.mode){case r.NUMERIC:t.push([i,{data:i.data,mode:r.ALPHANUMERIC,length:i.length},{data:i.data,mode:r.BYTE,length:i.length}]);break;case r.ALPHANUMERIC:t.push([i,{data:i.data,mode:r.BYTE,length:i.length}]);break;case r.KANJI:t.push([i,{data:i.data,mode:r.BYTE,length:d(i.data)}]);break;case r.BYTE:t.push([{data:i.data,mode:r.BYTE,length:d(i.data)}])}}return t}(f(e,c.isKanjiModeEnabled())),s=function(e,t){const n={},i={start:{}};let s=["start"];for(let a=0;a<e.length;a++){const o=e[a],l=[];for(let e=0;e<o.length;e++){const c=o[e],u=""+a+e;l.push(u),n[u]={node:c,lastCount:0},i[u]={};for(let e=0;e<s.length;e++){const a=s[e];n[a]&&n[a].node.mode===c.mode?(i[a][u]=p(n[a].lastCount+c.length,c.mode)-p(n[a].lastCount,c.mode),n[a].lastCount+=c.length):(n[a]&&(n[a].lastCount=c.length),i[a][u]=p(c.length,c.mode)+4+r.getCharCountIndicator(c.mode,t))}}s=l}for(let r=0;r<s.length;r++)i[s[r]].end=0;return{map:i,table:n}}(i,n),a=u.find_path(s.map,"start","end"),o=[];for(let t=1;t<a.length-1;t++)o.push(s.table[a[t]].node);return t.fromArray(function(e){return e.reduce(function(e,t){const n=e.length-1>=0?e[e.length-1]:null;return n&&n.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)},[])}(o))},t.rawSplit=function(e){return t.fromArray(f(e,c.isKanjiModeEnabled()))}},4144:(e,t,n)=>{"use strict";n.d(t,{eJ:()=>ht,xI:()=>Fn,hg:()=>pt,x9:()=>ft});var r=n(3986),i=n(9379),s=n(1150),a=n(1776),o=n(2965),l=n(9606);const c=["providerId"],u=["uid","auth","stsTokenManager"],d=["providerId","signInMethod"];function h(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const f=h,p=new a.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),m=new o.Vy("@firebase/auth");function g(e){if(m.logLevel<=o.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];m.error("Auth (".concat(s.MF,"): ").concat(e),...n)}}function y(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw x(e,...n)}function v(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return x(e,...n)}function w(e,t,n){const r=(0,i.A)((0,i.A)({},f()),{},{[t]:n});return new a.FA("auth","Firebase",r).create(t,{appName:e.name})}function b(e){return w(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function x(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return p.create(e,...n)}function S(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw x(t,...r)}}function A(e){const t="INTERNAL ASSERTION FAILED: "+e;throw g(t),new Error(t)}function E(e,t){e||A(t)}function N(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function C(){return"http:"===_()||"https:"===_()}function _(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class T{constructor(e,t){this.shortDelay=e,this.longDelay=t,E(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,a.jZ)()||(0,a.lV)()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(C()||(0,a.sr)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function I(e,t){E(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class k{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void A("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void A("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void A("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const P={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},R=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],D=new T(3e4,6e4);function O(e,t){return e.tenantId&&!t.tenantId?(0,i.A)((0,i.A)({},t),{},{tenantId:e.tenantId}):t}async function L(e,t,n,r){return M(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let s={},o={};r&&("GET"===t?o=r:s={body:JSON.stringify(r)});const l=(0,a.Am)((0,i.A)({key:e.config.apiKey},o)).slice(1),c=await e._getAdditionalHeaders();c["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode);const u=(0,i.A)({method:t,headers:c},s);return(0,a.c1)()||(u.referrerPolicy="no-referrer"),e.emulatorConfig&&(0,a.zJ)(e.emulatorConfig.host)&&(u.credentials="include"),k.fetch()(await j(e,e.config.apiHost,n,l),u)})}async function M(e,t,n){e._canInitEmulator=!1;const r=(0,i.A)((0,i.A)({},P),t);try{const t=new U(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw z(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw z(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw z(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw z(e,"user-disabled",s);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw w(e,o,a);y(e,o)}}catch(s){if(s instanceof a.g)throw s;y(e,"network-request-failed",{message:String(s)})}}async function F(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await L(e,t,n,r,i);return"mfaPendingCredential"in s&&y(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function j(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r),s=e,a=s.config.emulator?I(e.config,i):"".concat(e.config.apiScheme,"://").concat(i);if(R.includes(n)&&(await s._persistenceManagerAvailable,"COOKIE"===s._getPersistenceType())){return s._getPersistence()._getFinalTarget(a).toString()}return a}function B(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class U{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(v(this.auth,"network-request-failed")),D.get())})}}function z(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=v(e,t,r);return i.customData._tokenResponse=n,i}function V(e){return void 0!==e&&void 0!==e.enterprise}class H{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return B(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function W(e,t){return L(e,"GET","/v2/recaptchaConfig",O(e,t))}async function q(e,t){return L(e,"POST","/v1/accounts:lookup",t)}function G(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function K(e){return 1e3*Number(e)}function Y(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return g("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,a.u)(n);return e?JSON.parse(e):(g("Failed to decode base64 JWT payload"),null)}catch(i){return g("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}function X(e){const t=Y(e);return S(t,"internal-error"),S("undefined"!==typeof t.exp,"internal-error"),S("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Q(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof a.g&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class J{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{var t;this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Z{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=G(this.lastLoginAt),this.creationTime=G(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function $(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Q(e,q(n,{idToken:r}));S(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const a=null!==(t=s.providerUserInfo)&&void 0!==t&&t.length?ee(s.providerUserInfo):[],o=(l=e.providerData,c=a,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&s.passwordHash)&&!(null!==o&&void 0!==o&&o.length),h=!!u&&d,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Z(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function ee(e){return e.map(e=>{let{providerId:t}=e,n=(0,r.A)(e,c);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class te{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){S(e.idToken,"internal-error"),S("undefined"!==typeof e.idToken,"internal-error"),S("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):X(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){S(0!==e.length,"internal-error");const t=X(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(S(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await M(e,{},async()=>{const n=(0,a.Am)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=await j(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:n};return e.emulatorConfig&&(0,a.zJ)(e.emulatorConfig.host)&&(l.credentials="include"),k.fetch()(s,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new te;return n&&(S("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(S("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(S("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new te,this.toJSON())}_performRefresh(){return A("not implemented")}}function ne(e,t){S("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class re{constructor(e){let{uid:t,auth:n,stsTokenManager:i}=e,s=(0,r.A)(e,u);this.providerId="firebase",this.proactiveRefresh=new J(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Z(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Q(this,this.stsTokenManager.getToken(this.auth,e));return S(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=(0,a.Ku)(e),r=await n.getIdToken(t),i=Y(r);S(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:G(K(i.auth_time)),issuedAtTime:G(K(i.iat)),expirationTime:G(K(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=(0,a.Ku)(e);await $(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(S(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>(0,i.A)({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new re((0,i.A)((0,i.A)({},this),{},{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){S(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await $(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if((0,s.xZ)(this.auth.app))return Promise.reject(b(this.auth));const e=await this.getIdToken();return await Q(this,async function(e,t){return L(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return(0,i.A)((0,i.A)({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>(0,i.A)({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{},{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,a,o,l,c,u;const d=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,f=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,p=null!==(a=t.photoURL)&&void 0!==a?a:void 0,m=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(l=t._redirectEventId)&&void 0!==l?l:void 0,y=null!==(c=t.createdAt)&&void 0!==c?c:void 0,v=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:w,emailVerified:b,isAnonymous:x,providerData:A,stsTokenManager:E}=t;S(w&&E,e,"internal-error");const N=te.fromJSON(this.name,E);S("string"===typeof w,e,"internal-error"),ne(d,e.name),ne(h,e.name),S("boolean"===typeof b,e,"internal-error"),S("boolean"===typeof x,e,"internal-error"),ne(f,e.name),ne(p,e.name),ne(m,e.name),ne(g,e.name),ne(y,e.name),ne(v,e.name);const C=new re({uid:w,auth:e,email:h,emailVerified:b,displayName:d,isAnonymous:x,photoURL:p,phoneNumber:f,tenantId:m,stsTokenManager:N,createdAt:y,lastLoginAt:v});return A&&Array.isArray(A)&&(C.providerData=A.map(e=>(0,i.A)({},e))),g&&(C._redirectEventId=g),C}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new te;r.updateFromServerResponse(t);const i=new re({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await $(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];S(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?ee(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length),a=new te;a.updateFromIdToken(n);const o=new re({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Z(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length)};return Object.assign(o,l),o}}const ie=new Map;function se(e){E(e instanceof Function,"Expected a class definition");let t=ie.get(e);return t?(E(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ie.set(e,t),t)}class ae{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ae.type="NONE";const oe=ae;function le(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class ce{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=le(this.userKey,r.apiKey,i),this.fullPersistenceKey=le("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await q(this.auth,{idToken:e}).catch(()=>{});return t?re._fromGetAccountInfoResponse(this.auth,t,e):null}return re._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new ce(se(oe),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||se(oe);const s=le(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(s);if(t){let n;if("string"===typeof t){const r=await q(e,{idToken:t}).catch(()=>{});if(!r)break;n=await re._fromGetAccountInfoResponse(e,r,t)}else n=re._fromJSON(e,t);c!==i&&(a=n),i=c;break}}catch(l){}const o=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&o.length?(i=o[0],a&&await i._set(s,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(t){}})),new ce(i,e,n)):new ce(i,e,n)}}function ue(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(pe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(de(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ge(t))return"Blackberry";if(ye(t))return"Webos";if(he(t))return"Safari";if((t.includes("chrome/")||fe(t))&&!t.includes("edge/"))return"Chrome";if(me(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function de(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/firefox\//i.test(e)}function he(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/crios\//i.test(e)}function pe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/iemobile/i.test(e)}function me(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/android/i.test(e)}function ge(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/blackberry/i.test(e)}function ye(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/webos/i.test(e)}function ve(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function we(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return ve(e)||me(e)||ye(e)||ge(e)||/windows phone/i.test(e)||pe(e)}function be(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=ue((0,a.ZQ)());break;case"Worker":t="".concat(ue((0,a.ZQ)()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(s.MF,"/").concat(r)}class xe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(i){r(i)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class Se{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(n=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==n?n:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(i=o.containsUppercaseLetter)||void 0===i||i),o.isValid&&(o.isValid=null===(s=o.containsNumericCharacter)||void 0===s||s),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Ae{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ne(this),this.idTokenSubscription=new Ne(this),this.beforeStateQueue=new xe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=p,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=se(t)),this._initializationPromise=this.queue(async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await ce.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null!==(r=this._popupRedirectResolver)&&void 0!==r&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(s){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await q(this,{idToken:e}),n=await re._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if((0,s.xZ)(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){var i,a;await this.getOrInitRedirectPersistenceManager();const t=null===(i=this.redirectUser)||void 0===i?void 0:i._redirectEventId,s=null===(a=n)||void 0===a?void 0:a._redirectEventId,o=await this.tryRedirectSignIn(e);t&&t!==s||null===o||void 0===o||!o.user||(n=o.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(o){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return S(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await $(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if((0,s.xZ)(this.app))return Promise.reject(b(this));const t=e?(0,a.Ku)(e):null;return t&&S(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&S(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return(0,s.xZ)(this.app)?Promise.reject(b(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return(0,s.xZ)(this.app)?Promise.reject(b(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(se(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return L(e,"GET","/v2/passwordPolicy",O(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Se(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new a.FA("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return L(e,"POST","/v2/accounts:revokeToken",O(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&se(e)||this._popupRedirectResolver;S(t,this,"argument-error"),this.redirectPersistenceManager=await ce.create(this,[se(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(S(a,this,"internal-error"),a.then(()=>{s||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return S(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=be(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if((0,s.xZ)(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return null!==t&&void 0!==t&&t.error&&function(e){if(m.logLevel<=o.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];m.warn("Auth (".concat(s.MF,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Ee(e){return(0,a.Ku)(e)}class Ne{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,a.tD)(e=>this.observer=e)}get next(){return S(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ce={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _e(e){return Ce.loadJS(e)}function Te(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Ie{constructor(){this.enterprise=new ke}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class ke{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Pe="NO_RECAPTCHA";class Re{constructor(e){this.type="recaptcha-enterprise",this.auth=Ee(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;V(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Pe)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Ie).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{W(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new H(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&V(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Ce.recaptchaEnterpriseScript;0!==t.length&&(t+=i),_e(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function De(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const a=new Re(e);let o;if(s)o=Pe;else try{o=await a.verify(n)}catch(c){o=await a.verify(n,!0)}const l=(0,i.A)({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in l){const e=l.phoneEnrollmentInfo.phoneNumber,t=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const e=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Oe(e,t,n,r,i){if("EMAIL_PASSWORD_PROVIDER"===i){var s;if(null!==(s=e._getRecaptchaConfig())&&void 0!==s&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await De(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await De(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}if("PHONE_PROVIDER"===i){var a;if(null!==(a=e._getRecaptchaConfig())&&void 0!==a&&a.isProviderEnabled("PHONE_PROVIDER")){const i=await De(e,t,n);return r(e,i).catch(async i=>{var s;if("AUDIT"===(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))&&(i.code==="auth/".concat("missing-recaptcha-token")||i.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const i=await De(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)})}{const i=await De(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function Le(e){const t=Ee(e),n=await W(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new H(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new Re(t).verify()}}function Me(e,t,n){const r=Ee(e);S(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!(null===n||void 0===n||!n.disableWarnings),s=Fe(t),{host:o,port:l}=function(e){const t=Fe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:je(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:je(t)}}}(t),c=null===l?"":":".concat(l),u={url:"".concat(s,"//").concat(o).concat(c,"/")},d=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return S(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void S((0,a.bD)(u,r.config.emulator)&&(0,a.bD)(d,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,(0,a.zJ)(o)?((0,a.gE)("".concat(s,"//").concat(o).concat(c)),(0,a.P1)("Auth",!0)):i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Fe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function je(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Be{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return A("not implemented")}_getIdTokenResponse(e){return A("not implemented")}_linkToIdToken(e,t){return A("not implemented")}_getReauthenticationResolver(e){return A("not implemented")}}async function Ue(e,t){return L(e,"POST","/v1/accounts:signUp",t)}async function ze(e,t){return F(e,"POST","/v1/accounts:signInWithPassword",O(e,t))}class Ve extends Be{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Ve(e,t,"password")}static _fromEmailAndCode(e,t){return new Ve(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if(null!==t&&void 0!==t&&t.email&&null!==t&&void 0!==t&&t.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Oe(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",ze,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return F(e,"POST","/v1/accounts:signInWithEmailLink",O(e,t))}(e,{email:this._email,oobCode:this._password});default:y(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Oe(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ue,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return F(e,"POST","/v1/accounts:signInWithEmailLink",O(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:y(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function He(e,t){return F(e,"POST","/v1/accounts:signInWithIdp",O(e,t))}class We extends Be{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new We(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):y("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,s=(0,r.A)(t,d);if(!n||!i)return null;const a=new We(n,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){return He(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,He(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,He(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,a.Am)(t)}return e}}async function qe(e,t){return L(e,"POST","/v1/accounts:sendVerificationCode",O(e,t))}const Ge={USER_NOT_FOUND:"user-not-found"};class Ke extends Be{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Ke({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Ke({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return F(e,"POST","/v1/accounts:signInWithPhoneNumber",O(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await F(e,"POST","/v1/accounts:signInWithPhoneNumber",O(e,t));if(n.temporaryProof)throw z(e,"account-exists-with-different-credential",n);return n}(e,(0,i.A)({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return F(e,"POST","/v1/accounts:signInWithPhoneNumber",O(e,(0,i.A)((0,i.A)({},t),{},{operation:"REAUTH"})),Ge)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Ke({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Ye{constructor(e){var t,n,r,i,s,o;const l=(0,a.I9)((0,a.hp)(e)),c=null!==(t=l.apiKey)&&void 0!==t?t:null,u=null!==(n=l.oobCode)&&void 0!==n?n:null,d=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=l.mode)&&void 0!==r?r:null);S(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=null!==(i=l.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=l.lang)&&void 0!==s?s:null,this.tenantId=null!==(o=l.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=(0,a.I9)((0,a.hp)(e)).link,n=t?(0,a.I9)((0,a.hp)(t)).deep_link_id:null,r=(0,a.I9)((0,a.hp)(e)).deep_link_id;return(r?(0,a.I9)((0,a.hp)(r)).link:null)||r||n||t||e}(e);try{return new Ye(t)}catch(n){return null}}}class Xe{constructor(){this.providerId=Xe.PROVIDER_ID}static credential(e,t){return Ve._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Ye.parseLink(t);return S(n,"argument-error"),Ve._fromEmailAndCode(e,n.code,n.tenantId)}}Xe.PROVIDER_ID="password",Xe.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Xe.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Qe{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Je extends Qe{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ze extends Je{constructor(){super("facebook.com")}static credential(e){return We._fromParams({providerId:Ze.PROVIDER_ID,signInMethod:Ze.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ze.credentialFromTaggedObject(e)}static credentialFromError(e){return Ze.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Ze.credential(t.oauthAccessToken)}catch(n){return null}}}Ze.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ze.PROVIDER_ID="facebook.com";class $e extends Je{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return We._fromParams({providerId:$e.PROVIDER_ID,signInMethod:$e.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return $e.credentialFromTaggedObject(e)}static credentialFromError(e){return $e.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return $e.credential(n,r)}catch(i){return null}}}$e.GOOGLE_SIGN_IN_METHOD="google.com",$e.PROVIDER_ID="google.com";class et extends Je{constructor(){super("github.com")}static credential(e){return We._fromParams({providerId:et.PROVIDER_ID,signInMethod:et.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return et.credentialFromTaggedObject(e)}static credentialFromError(e){return et.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return et.credential(t.oauthAccessToken)}catch(n){return null}}}et.GITHUB_SIGN_IN_METHOD="github.com",et.PROVIDER_ID="github.com";class tt extends Je{constructor(){super("twitter.com")}static credential(e,t){return We._fromParams({providerId:tt.PROVIDER_ID,signInMethod:tt.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return tt.credentialFromTaggedObject(e)}static credentialFromError(e){return tt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return tt.credential(n,r)}catch(i){return null}}}async function nt(e,t){return F(e,"POST","/v1/accounts:signUp",O(e,t))}tt.TWITTER_SIGN_IN_METHOD="twitter.com",tt.PROVIDER_ID="twitter.com";class rt{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await re._fromIdTokenResponse(e,n,r),s=it(n);return new rt({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=it(n);return new rt({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function it(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class st extends a.g{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,st.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new st(e,t,n,r)}}function at(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw st._fromErrorAndOperation(e,n,t,r);throw n})}async function ot(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Q(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return rt._forOperation(e,"link",r)}async function lt(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if((0,s.xZ)(r.app))return Promise.reject(b(r));const i="reauthenticate";try{const s=await Q(e,at(r,i,t,e),n);S(s.idToken,r,"internal-error");const a=Y(s.idToken);S(a,r,"internal-error");const{sub:o}=a;return S(e.uid===o,r,"user-mismatch"),rt._forOperation(e,i,s)}catch(a){throw(null===a||void 0===a?void 0:a.code)==="auth/".concat("user-not-found")&&y(r,"user-mismatch"),a}}async function ct(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,s.xZ)(e.app))return Promise.reject(b(e));const r="signIn",i=await at(e,r,t),a=await rt._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(a.user),a}async function ut(e,t){return ct(Ee(e),t)}async function dt(e){const t=Ee(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function ht(e,t,n){if((0,s.xZ)(e.app))return Promise.reject(b(e));const r=Ee(e),i=Oe(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",nt,"EMAIL_PASSWORD_PROVIDER"),a=await i.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&dt(e),t}),o=await rt._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(o.user),o}function ft(e,t,n){return(0,s.xZ)(e.app)?Promise.reject(b(e)):ut((0,a.Ku)(e),Xe.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&dt(e),t})}function pt(e,t,n,r){return(0,a.Ku)(e).onAuthStateChanged(t,n,r)}function mt(e,t){return L(e,"POST","/v2/accounts/mfaEnrollment:start",O(e,t))}new WeakMap;const gt="__sak";class yt{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(gt,"1"),this.storage.removeItem(gt),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class vt extends yt{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=we(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);(0,a.lT)()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}vt.type="LOCAL";const wt=vt;function bt(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp("".concat(r,"=([^;]+)"));return null!==(t=null===(n=document.cookie.match(i))||void 0===n?void 0:n[1])&&void 0!==t?t:null}function xt(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class St{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=xt(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return bt(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=xt(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=xt(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=bt(n);const i=setInterval(()=>{const e=bt(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}St.type="COOKIE";class At extends yt{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}At.type="SESSION";const Et=At;class Nt{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Nt(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(null===s||void 0===s||!s.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(s).map(async e=>e(t.origin,i)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Ct(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Nt.receivers=[];class _t{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((a,o)=>{const l=Ct("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(c),clearTimeout(i),o(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function Tt(){return window}function It(){return"undefined"!==typeof Tt().WorkerGlobalScope&&"function"===typeof Tt().importScripts}const kt="firebaseLocalStorageDb",Pt="firebaseLocalStorage",Rt="fbase_key";class Dt{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ot(e,t){return e.transaction([Pt],t?"readwrite":"readonly").objectStore(Pt)}function Lt(){const e=indexedDB.open(kt,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Pt,{keyPath:Rt})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Pt)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(kt);return new Dt(e).toPromise()}(),t(await Lt()))})})}async function Mt(e,t,n){const r=Ot(e,!0).put({[Rt]:t,value:n});return new Dt(r).toPromise()}function Ft(e,t){const n=Ot(e,!0).delete(t);return new Dt(n).toPromise()}class jt{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Lt()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return It()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Nt._getInstance(It()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){var e;if(null===(e=navigator)||void 0===e||!e.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new _t(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&null!==(e=n[0])&&void 0!==e&&e.fulfilled&&null!==(t=n[0])&&void 0!==t&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=navigator)||void 0===e||null===(e=e.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Lt();return await Mt(e,gt,"1"),await Ft(e,gt),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Mt(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Ot(e,!1).get(t),r=await new Dt(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Ft(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Ot(e,!1).getAll();return new Dt(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}jt.type="LOCAL";const Bt=jt;function Ut(e,t){return L(e,"POST","/v2/accounts/mfaSignIn:start",O(e,t))}Te("rcb"),new T(3e4,6e4);const zt="recaptcha";async function Vt(e,t,n){if(!e._getRecaptchaConfig())try{await Le(e)}catch(i){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){S("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=Oe(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Pe){S((null===n||void 0===n?void 0:n.type)===zt,e,"argument-error");return mt(e,await Ht(e,t,n))}return mt(e,t)},"PHONE_PROVIDER");return(await s.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{var r;S("signin"===t.type,e,"internal-error");const s=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;S(s,e,"missing-multi-factor-info");const a={mfaPendingCredential:t.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},o=Oe(e,a,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Pe){S((null===n||void 0===n?void 0:n.type)===zt,e,"argument-error");return Ut(e,await Ht(e,t,n))}return Ut(e,t)},"PHONE_PROVIDER");return(await o.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=Oe(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===Pe){S((null===n||void 0===n?void 0:n.type)===zt,e,"argument-error");return qe(e,await Ht(e,t,n))}return qe(e,t)},"PHONE_PROVIDER");return(await r.catch(e=>Promise.reject(e))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function Ht(e,t,n){S(n.type===zt,e,"argument-error");const r=await n.verify();S("string"===typeof r,e,"argument-error");const s=(0,i.A)({},t);if("phoneEnrollmentInfo"in s){const e=s.phoneEnrollmentInfo.phoneNumber,t=s.phoneEnrollmentInfo.captchaResponse,n=s.phoneEnrollmentInfo.clientType,i=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:i}}),s}if("phoneSignInInfo"in s){const e=s.phoneSignInInfo.captchaResponse,t=s.phoneSignInInfo.clientType,n=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),s}return Object.assign(s,{recaptchaToken:r}),s}class Wt{constructor(e){this.providerId=Wt.PROVIDER_ID,this.auth=Ee(e)}verifyPhoneNumber(e,t){return Vt(this.auth,e,(0,a.Ku)(t))}static credential(e,t){return Ke._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Wt.credentialFromTaggedObject(t)}static credentialFromError(e){return Wt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Ke._fromTokenResponse(n,r):null}}function qt(e,t){return t?se(t):(S(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Wt.PROVIDER_ID="phone",Wt.PHONE_SIGN_IN_METHOD="phone";class Gt extends Be{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return He(e,this._buildIdpRequest())}_linkToIdToken(e,t){return He(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return He(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Kt(e){return ct(e.auth,new Gt(e),e.bypassAuthState)}function Yt(e){const{auth:t,user:n}=e;return S(n,t,"internal-error"),lt(n,new Gt(e),e.bypassAuthState)}async function Xt(e){const{auth:t,user:n}=e;return S(n,t,"internal-error"),ot(n,new Gt(e),e.bypassAuthState)}class Qt{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:a}=e;if(s)return void this.reject(s);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Kt;case"linkViaPopup":case"linkViaRedirect":return Xt;case"reauthViaPopup":case"reauthViaRedirect":return Yt;default:y(this.auth,"internal-error")}}resolve(e){E(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){E(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Jt=new T(2e3,1e4);class Zt extends Qt{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Zt.currentPopupAction&&Zt.currentPopupAction.cancel(),Zt.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return S(e,this.auth,"internal-error"),e}async onExecution(){E(1===this.filter.length,"Popup operations only handle one event");const e=Ct();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(v(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(v(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Zt.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t;null!==(t=this.authWindow)&&void 0!==t&&null!==(t=t.window)&&void 0!==t&&t.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(v(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Jt.get())};e()}}Zt.currentPopupAction=null;const $t=new Map;class en extends Qt{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=$t.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=rn(t),r=nn(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}$t.set(this.auth._key(),e)}return this.bypassAuthState||$t.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function tn(e,t){$t.set(e._key(),t)}function nn(e){return se(e._redirectPersistence)}function rn(e){return le("pendingRedirect",e.config.apiKey,e.name)}async function sn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,s.xZ)(e.app))return Promise.reject(b(e));const r=Ee(e),i=qt(r,t),a=new en(r,i,n),o=await a.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class an{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ln(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!ln(e)){var n;const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(v(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(on(e))}saveEventToCache(e){this.cachedEventUids.add(on(e)),this.lastProcessedEventTime=Date.now()}}function on(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function ln(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const cn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,un=/^https?/;async function dn(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return L(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(hn(r))return}catch(n){}y(e,"unauthorized-domain")}function hn(e){const t=N(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!un.test(n))return!1;if(cn.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const fn=new T(3e4,6e4);function pn(){const e=Tt().___jsl;if(null!==e&&void 0!==e&&e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function mn(e){return new Promise((t,n)=>{var r,i;function s(){pn(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{pn(),n(v(e,"network-request-failed"))},timeout:fn.get()})}if(null!==(r=Tt().gapi)&&void 0!==r&&null!==(r=r.iframes)&&void 0!==r&&r.Iframe)t(gapi.iframes.getContext());else{if(null===(i=Tt().gapi)||void 0===i||!i.load){const t=Te("iframefcb");return Tt()[t]=()=>{gapi.load?s():n(v(e,"network-request-failed"))},_e("".concat(Ce.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}s()}}).catch(e=>{throw gn=null,e})}let gn=null;const yn=new T(5e3,15e3),vn={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wn=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function bn(e){const t=e.config;S(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?I(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:s.MF},i=wn.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),"".concat(n,"?").concat((0,a.Am)(r).slice(1))}async function xn(e){const t=await function(e){return gn=gn||mn(e),gn}(e),n=Tt().gapi;return S(n,e,"internal-error"),t.open({where:document.body,url:bn(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vn,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=v(e,"network-request-failed"),s=Tt().setTimeout(()=>{r(i)},yn.get());function a(){Tt().clearTimeout(s),n(t)}t.ping(a).then(a,()=>{r(i)})}))}const Sn={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class An{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function En(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=(0,i.A)((0,i.A)({},Sn),{},{width:r.toString(),height:s.toString(),top:o,left:l}),d=(0,a.ZQ)().toLowerCase();n&&(c=fe(d)?"_blank":n),de(d)&&(t=t||"http://localhost",u.scrollbars="yes");const h=Object.entries(u).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return ve(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)())&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(d)&&"_self"!==c)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",c),new An(null);const f=window.open(t||"",c,h);S(f,e,"popup-blocked");try{f.focus()}catch(p){}return new An(f)}const Nn="__/auth/handler",Cn="emulator/auth/handler",_n=encodeURIComponent("fac");async function Tn(e,t,n,r,i,o){S(e.config.authDomain,e,"auth-domain-config-required"),S(e.config.apiKey,e,"invalid-api-key");const l={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:s.MF,eventId:i};if(t instanceof Qe){t.setDefaultLanguage(e.languageCode),l.providerId=t.providerId||"",(0,a.Im)(t.getCustomParameters())||(l.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))l[e]=t}if(t instanceof Je){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(l.scopes=e.join(","))}e.tenantId&&(l.tid=e.tenantId);const c=l;for(const s of Object.keys(c))void 0===c[s]&&delete c[s];const u=await e._getAppCheckToken(),d=u?"#".concat(_n,"=").concat(encodeURIComponent(u)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Nn);return I(t,Cn)}(e),"?").concat((0,a.Am)(c).slice(1)).concat(d)}const In="webStorageSupport";const kn=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Et,this._completeRedirectFn=sn,this._overrideRedirectResult=tn}async _openPopup(e,t,n,r){var i;E(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return En(e,await Tn(e,t,n,N(),r),Ct())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Tt().location.href=e}(await Tn(e,t,n,N(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(E(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await xn(e),n=new an(e);return t.register("authEvent",t=>{S(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(In,{type:In},n=>{var r;const i=null===n||void 0===n||null===(r=n[0])||void 0===r?void 0:r[In];void 0!==i&&t(!!i),y(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=dn(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return we()||he()||ve()}};var Pn="@firebase/auth",Rn="1.11.1";class Dn{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){S(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const On=(0,a.XA)("authIdTokenMaxAge")||300;let Ln=null;const Mn=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&((new Date).getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>On)return;const i=null===n||void 0===n?void 0:n.token;Ln!==i&&(Ln=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:"Bearer ".concat(i)}:{}}))};function Fn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.Sx)();const t=(0,s.j6)(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=(0,s.j6)(e,"auth");if(n.isInitialized()){const e=n.getImmediate(),r=n.getOptions();if((0,a.bD)(r,null!==t&&void 0!==t?t:{}))return e;y(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:kn,persistence:[Bt,wt,Et]}),r=(0,a.XA)("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=Mn(e.toString());!function(e,t,n){(0,a.Ku)(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){(0,a.Ku)(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}const i=(0,a.Tj)("auth");return i&&Me(n,"http://".concat(i)),n}var jn;Ce={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=v("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},jn="Browser",(0,s.om)(new l.uA("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;S(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:jn,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:be(jn)},c=new Ae(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(se);null!==t&&void 0!==t&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),(0,s.om)(new l.uA("auth-internal",e=>(e=>new Dn(e))(Ee(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,s.KO)(Pn,Rn,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(jn)),(0,s.KO)(Pn,Rn,"esm2020")},4288:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),p=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,y={};function v(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||m}function w(){}function b(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||m}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},w.prototype=v.prototype;var x=b.prototype=new w;x.constructor=b,g(x,v.prototype),x.isPureReactComponent=!0;var S=Array.isArray;function A(){}var E={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function C(e,t,r){var i=r.ref;return{$$typeof:n,type:e,key:t,ref:void 0!==i?i:null,props:r}}function _(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function k(e,t,i,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(o){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case h:return k((u=e._init)(e._payload),t,i,s,a)}}if(u)return a=a(e),u=""===s?"."+I(e,0):s,S(a)?(i="",null!=u&&(i=u.replace(T,"$&/")+"/"),k(a,t,i,"",function(e){return e})):null!=a&&(_(a)&&(l=a,c=i+(null==a.key||e&&e.key===a.key?"":(""+a.key).replace(T,"$&/")+"/")+u,a=C(l.type,c,l.props)),t.push(a)),1;u=0;var d,f=""===s?".":s+":";if(S(e))for(var m=0;m<e.length;m++)u+=k(s=e[m],t,i,o=f+I(s,m),a);else if("function"===typeof(m=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=p&&d[p]||d["@@iterator"])?d:null))for(e=m.call(e),m=0;!(s=e.next()).done;)u+=k(s=s.value,t,i,o=f+I(s,m++),a);else if("object"===o){if("function"===typeof e.then)return k(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(A,A):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,i,s,a);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function P(e,t,n){if(null==e)return e;var r=[],i=0;return k(e,r,"","",function(e){return t.call(n,e,i++)}),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},O={map:P,forEach:function(e,t,n){P(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return P(e,function(){t++}),t},toArray:function(e){return P(e,function(e){return e})||[]},only:function(e){if(!_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};t.Activity=f,t.Children=O,t.Component=v,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return E.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cacheSignal=function(){return null},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=g({},e.props),i=e.key;if(null!=t)for(s in void 0!==t.key&&(i=""+t.key),t)!N.call(t,s)||"key"===s||"__self"===s||"__source"===s||"ref"===s&&void 0===t.ref||(r[s]=t[s]);var s=arguments.length-2;if(1===s)r.children=n;else if(1<s){for(var a=Array(s),o=0;o<s;o++)a[o]=arguments[o+2];r.children=a}return C(e.type,i,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},t.createElement=function(e,t,n){var r,i={},s=null;if(null!=t)for(r in void 0!==t.key&&(s=""+t.key),t)N.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(i[r]=t[r]);var a=arguments.length-2;if(1===a)i.children=n;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];i.children=o}if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===i[r]&&(i[r]=a[r]);return C(e,s,i)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=E.T,n={};E.T=n;try{var r=e(),i=E.S;null!==i&&i(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(A,D)}catch(s){D(s)}finally{null!==t&&null!==n.types&&(t.types=n.types),E.T=t}},t.unstable_useCacheRefresh=function(){return E.H.useCacheRefresh()},t.use=function(e){return E.H.use(e)},t.useActionState=function(e,t,n){return E.H.useActionState(e,t,n)},t.useCallback=function(e,t){return E.H.useCallback(e,t)},t.useContext=function(e){return E.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return E.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return E.H.useEffect(e,t)},t.useEffectEvent=function(e){return E.H.useEffectEvent(e)},t.useId=function(){return E.H.useId()},t.useImperativeHandle=function(e,t,n){return E.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return E.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return E.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return E.H.useMemo(e,t)},t.useOptimistic=function(e,t){return E.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return E.H.useReducer(e,t,n)},t.useRef=function(e){return E.H.useRef(e)},t.useState=function(e){return E.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return E.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return E.H.useTransition()},t.version="19.2.0"},4391:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(7004)},4467:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(816);function i(e,t,n){return(t=(0,r.A)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},4566:e=>{function t(){this.buffer=[],this.length=0}t.prototype={get:function(e){const t=Math.floor(e/8);return 1===(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(let n=0;n<t;n++)this.putBit(1===(e>>>t-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},e.exports=t},4661:e=>{function t(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}t.prototype.set=function(e,t,n,r){const i=e*this.size+t;this.data[i]=n,r&&(this.reservedBit[i]=!0)},t.prototype.get=function(e,t){return this.data[e*this.size+t]},t.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n},t.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},e.exports=t},4772:(e,t,n)=>{const r=n(7969),i=n(6272),s=n(4566),a=n(4661),o=n(9382),l=n(9021),c=n(4833),u=n(1805),d=n(8177),h=n(4980),f=n(350),p=n(7421),m=n(4004);function g(e,t,n){const r=e.size,i=f.getEncodedBits(t,n);let s,a;for(s=0;s<15;s++)a=1===(i>>s&1),s<6?e.set(s,8,a,!0):s<8?e.set(s+1,8,a,!0):e.set(r-15+s,8,a,!0),s<8?e.set(8,r-s-1,a,!0):s<9?e.set(8,15-s-1+1,a,!0):e.set(8,15-s-1,a,!0);e.set(r-8,8,1,!0)}function y(e,t,n){const i=new s;n.forEach(function(t){i.put(t.mode.bit,4),i.put(t.getLength(),p.getCharCountIndicator(t.mode,e)),t.write(i)});const a=8*(r.getSymbolTotalCodewords(e)-u.getTotalCodewordsCount(e,t));for(i.getLengthInBits()+4<=a&&i.put(0,4);i.getLengthInBits()%8!==0;)i.putBit(0);const o=(a-i.getLengthInBits())/8;for(let r=0;r<o;r++)i.put(r%2?17:236,8);return function(e,t,n){const i=r.getSymbolTotalCodewords(t),s=u.getTotalCodewordsCount(t,n),a=i-s,o=u.getBlocksCount(t,n),l=i%o,c=o-l,h=Math.floor(i/o),f=Math.floor(a/o),p=f+1,m=h-f,g=new d(m);let y=0;const v=new Array(o),w=new Array(o);let b=0;const x=new Uint8Array(e.buffer);for(let r=0;r<o;r++){const e=r<c?f:p;v[r]=x.slice(y,y+e),w[r]=g.encode(v[r]),y+=e,b=Math.max(b,e)}const S=new Uint8Array(i);let A,E,N=0;for(A=0;A<b;A++)for(E=0;E<o;E++)A<v[E].length&&(S[N++]=v[E][A]);for(A=0;A<m;A++)for(E=0;E<o;E++)S[N++]=w[E][A];return S}(i,e,t)}function v(e,t,n,i){let s;if(Array.isArray(e))s=m.fromArray(e);else{if("string"!==typeof e)throw new Error("Invalid data");{let r=t;if(!r){const t=m.rawSplit(e);r=h.getBestVersionForData(t,n)}s=m.fromString(e,r||40)}}const u=h.getBestVersionForData(s,n);if(!u)throw new Error("The amount of data is too big to be stored in a QR Code");if(t){if(t<u)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+u+".\n")}else t=u;const d=y(t,n,s),f=r.getSymbolSize(t),p=new a(f);return function(e,t){const n=e.size,r=l.getPositions(t);for(let i=0;i<r.length;i++){const t=r[i][0],s=r[i][1];for(let r=-1;r<=7;r++)if(!(t+r<=-1||n<=t+r))for(let i=-1;i<=7;i++)s+i<=-1||n<=s+i||(r>=0&&r<=6&&(0===i||6===i)||i>=0&&i<=6&&(0===r||6===r)||r>=2&&r<=4&&i>=2&&i<=4?e.set(t+r,s+i,!0,!0):e.set(t+r,s+i,!1,!0))}}(p,t),function(e){const t=e.size;for(let n=8;n<t-8;n++){const t=n%2===0;e.set(n,6,t,!0),e.set(6,n,t,!0)}}(p),function(e,t){const n=o.getPositions(t);for(let r=0;r<n.length;r++){const t=n[r][0],i=n[r][1];for(let n=-2;n<=2;n++)for(let r=-2;r<=2;r++)-2===n||2===n||-2===r||2===r||0===n&&0===r?e.set(t+n,i+r,!0,!0):e.set(t+n,i+r,!1,!0)}}(p,t),g(p,n,0),t>=7&&function(e,t){const n=e.size,r=h.getEncodedBits(t);let i,s,a;for(let o=0;o<18;o++)i=Math.floor(o/3),s=o%3+n-8-3,a=1===(r>>o&1),e.set(i,s,a,!0),e.set(s,i,a,!0)}(p,t),function(e,t){const n=e.size;let r=-1,i=n-1,s=7,a=0;for(let o=n-1;o>0;o-=2)for(6===o&&o--;;){for(let n=0;n<2;n++)if(!e.isReserved(i,o-n)){let r=!1;a<t.length&&(r=1===(t[a]>>>s&1)),e.set(i,o-n,r),s--,-1===s&&(a++,s=7)}if(i+=r,i<0||n<=i){i-=r,r=-r;break}}}(p,d),isNaN(i)&&(i=c.getBestMask(p,g.bind(null,p,n))),c.applyMask(i,p),g(p,n,i),{modules:p,version:t,errorCorrectionLevel:n,maskPattern:i,segments:s}}t.create=function(e,t){if("undefined"===typeof e||""===e)throw new Error("No input text");let n,s,a=i.M;return"undefined"!==typeof t&&(a=i.from(t.errorCorrectionLevel,i.M),n=h.from(t.version),s=c.from(t.maskPattern),t.toSJISFunc&&r.setToSJISFunction(t.toSJISFunc)),v(e,n,a,s)}},4833:(e,t)=>{t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const n=3,r=3,i=40,s=10;function a(e,n,r){switch(e){case t.Patterns.PATTERN000:return(n+r)%2===0;case t.Patterns.PATTERN001:return n%2===0;case t.Patterns.PATTERN010:return r%3===0;case t.Patterns.PATTERN011:return(n+r)%3===0;case t.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(r/3))%2===0;case t.Patterns.PATTERN101:return n*r%2+n*r%3===0;case t.Patterns.PATTERN110:return(n*r%2+n*r%3)%2===0;case t.Patterns.PATTERN111:return(n*r%3+(n+r)%2)%2===0;default:throw new Error("bad maskPattern:"+e)}}t.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},t.from=function(e){return t.isValid(e)?parseInt(e,10):void 0},t.getPenaltyN1=function(e){const t=e.size;let r=0,i=0,s=0,a=null,o=null;for(let l=0;l<t;l++){i=s=0,a=o=null;for(let c=0;c<t;c++){let t=e.get(l,c);t===a?i++:(i>=5&&(r+=n+(i-5)),a=t,i=1),t=e.get(c,l),t===o?s++:(s>=5&&(r+=n+(s-5)),o=t,s=1)}i>=5&&(r+=n+(i-5)),s>=5&&(r+=n+(s-5))}return r},t.getPenaltyN2=function(e){const t=e.size;let n=0;for(let r=0;r<t-1;r++)for(let i=0;i<t-1;i++){const t=e.get(r,i)+e.get(r,i+1)+e.get(r+1,i)+e.get(r+1,i+1);4!==t&&0!==t||n++}return n*r},t.getPenaltyN3=function(e){const t=e.size;let n=0,r=0,s=0;for(let i=0;i<t;i++){r=s=0;for(let a=0;a<t;a++)r=r<<1&2047|e.get(i,a),a>=10&&(1488===r||93===r)&&n++,s=s<<1&2047|e.get(a,i),a>=10&&(1488===s||93===s)&&n++}return n*i},t.getPenaltyN4=function(e){let t=0;const n=e.data.length;for(let r=0;r<n;r++)t+=e.data[r];return Math.abs(Math.ceil(100*t/n/5)-10)*s},t.applyMask=function(e,t){const n=t.size;for(let r=0;r<n;r++)for(let i=0;i<n;i++)t.isReserved(i,r)||t.xor(i,r,a(e,i,r))},t.getBestMask=function(e,n){const r=Object.keys(t.Patterns).length;let i=0,s=1/0;for(let a=0;a<r;a++){n(a),t.applyMask(a,e);const r=t.getPenaltyN1(e)+t.getPenaltyN2(e)+t.getPenaltyN3(e)+t.getPenaltyN4(e);t.applyMask(a,e),r<s&&(s=r,i=a)}return i}},4893:e=>{e.exports=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n},e.exports.__esModule=!0,e.exports.default=e.exports},4980:(e,t,n)=>{const r=n(7969),i=n(1805),s=n(6272),a=n(7421),o=n(3257),l=r.getBCHDigit(7973);function c(e,t){return a.getCharCountIndicator(e,t)+4}function u(e,t){let n=0;return e.forEach(function(e){const r=c(e.mode,t);n+=r+e.getBitsLength()}),n}t.from=function(e,t){return o.isValid(e)?parseInt(e,10):t},t.getCapacity=function(e,t,n){if(!o.isValid(e))throw new Error("Invalid QR Code version");"undefined"===typeof n&&(n=a.BYTE);const s=8*(r.getSymbolTotalCodewords(e)-i.getTotalCodewordsCount(e,t));if(n===a.MIXED)return s;const l=s-c(n,e);switch(n){case a.NUMERIC:return Math.floor(l/10*3);case a.ALPHANUMERIC:return Math.floor(l/11*2);case a.KANJI:return Math.floor(l/13);case a.BYTE:default:return Math.floor(l/8)}},t.getBestVersionForData=function(e,n){let r;const i=s.from(n,s.M);if(Array.isArray(e)){if(e.length>1)return function(e,n){for(let r=1;r<=40;r++)if(u(e,r)<=t.getCapacity(r,n,a.MIXED))return r}(e,i);if(0===e.length)return 1;r=e[0]}else r=e;return function(e,n,r){for(let i=1;i<=40;i++)if(n<=t.getCapacity(i,r,e))return i}(r.mode,r.getLength(),i)},t.getEncodedBits=function(e){if(!o.isValid(e)||e<7)throw new Error("Invalid QR Code version");let t=e<<12;for(;r.getBCHDigit(t)-l>=0;)t^=7973<<r.getBCHDigit(t)-l;return e<<12|t}},5043:(e,t,n)=>{"use strict";e.exports=n(4288)},5180:(e,t,n)=>{"use strict";n.r(t),n.d(t,{deleteDB:()=>v,openDB:()=>y,unwrap:()=>g,wrap:()=>m});var r=n(9379);const i=(e,t)=>t.some(t=>e instanceof t);let s,a;const o=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakMap;let h={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return l.get(e);if("objectStoreNames"===t)return e.objectStoreNames||c.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return m(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function f(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(a||(a=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(g(this),n),m(o.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return m(e.apply(g(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(g(this),t,...r);return c.set(s,t.sort?t.sort():[t]),m(s)}}function p(e){return"function"===typeof e?f(e):(e instanceof IDBTransaction&&function(e){if(l.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});l.set(e,t)}(e),i(e,s||(s=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,h):e)}function m(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(m(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&o.set(t,e)}).catch(()=>{}),d.set(t,e),t}(e);if(u.has(e))return u.get(e);const t=p(e);return t!==e&&(u.set(e,t),d.set(t,e)),t}const g=e=>d.get(e);function y(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=m(a);return r&&a.addEventListener("upgradeneeded",e=>{r(m(a.result),e.oldVersion,e.newVersion,m(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}function v(e){let{blocked:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",e=>t(e.oldVersion,e)),m(n).then(()=>{})}const w=["get","getKey","getAll","getAllKeys","count"],b=["put","add","delete","clear"],x=new Map;function S(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(x.get(t))return x.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=b.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!w.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(s=s.index(o.shift())),(await Promise.all([s[n](...o),i&&t.done]))[0]};return x.set(t,s),s}h=(e=>(0,r.A)((0,r.A)({},e),{},{get:(t,n,r)=>S(t,n)||e.get(t,n,r),has:(t,n)=>!!S(t,n)||e.has(t,n)}))(h)},5200:(e,t,n)=>{const r=n(7421),i=n(7969);function s(e){this.mode=r.KANJI,this.data=e}s.getBitsLength=function(e){return 13*e},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let n=i.toSJIS(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else{if(!(n>=57408&&n<=60351))throw new Error("Invalid SJIS character: "+this.data[t]+"\nMake sure your charset is UTF-8");n-=49472}n=192*(n>>>8&255)+(255&n),e.put(n,13)}},e.exports=s},5487:(e,t,n)=>{const r=n(8293);function i(e,t){const n=e.a/255,r=t+'="'+e.hex+'"';return n<1?r+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function s(e,t,n){let r=e+t;return"undefined"!==typeof n&&(r+=" "+n),r}t.render=function(e,t,n){const a=r.getOptions(t),o=e.modules.size,l=e.modules.data,c=o+2*a.margin,u=a.color.light.a?"<path "+i(a.color.light,"fill")+' d="M0 0h'+c+"v"+c+'H0z"/>':"",d="<path "+i(a.color.dark,"stroke")+' d="'+function(e,t,n){let r="",i=0,a=!1,o=0;for(let l=0;l<e.length;l++){const c=Math.floor(l%t),u=Math.floor(l/t);c||a||(a=!0),e[l]?(o++,l>0&&c>0&&e[l-1]||(r+=a?s("M",c+n,.5+u+n):s("m",i,0),i=0,a=!1),c+1<t&&e[l+1]||(r+=s("h",o),o=0)):i++}return r}(l,o,a.margin)+'"/>',h='viewBox="0 0 '+c+" "+c+'"',f='<svg xmlns="http://www.w3.org/2000/svg" '+(a.width?'width="'+a.width+'" height="'+a.width+'" ':"")+h+' shape-rendering="crispEdges">'+u+d+"</svg>\n";return"function"===typeof n&&n(null,f),f}},5858:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(8679);const i="[DEFAULT]";class s{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new r.Deferred;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:i})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(s=t,s===i?void 0:s),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(a){}var s;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return this.component?this.component.multipleInstances?e:i:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}t.Component=class{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}},t.ComponentContainer=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new s(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}},t.Provider=s},5896:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,y=!1,v="function"===typeof setTimeout?setTimeout:null,w="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function S(e){if(g=!1,x(e),!m)if(null!==r(c))m=!0,E||(E=!0,A());else{var t=r(u);null!==t&&R(S,t.startTime-e)}}var A,E=!1,N=-1,C=5,_=-1;function T(){return!!y||!(t.unstable_now()-_<C)}function I(){if(y=!1,E){var e=t.unstable_now();_=e;var n=!0;try{e:{m=!1,g&&(g=!1,w(N),N=-1),p=!0;var s=f;try{t:{for(x(e),h=r(c);null!==h&&!(h.expirationTime>e&&T());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var o=a(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof o){h.callback=o,x(e),n=!0;break t}h===r(c)&&i(c),x(e)}else i(c);h=r(c)}if(null!==h)n=!0;else{var l=r(u);null!==l&&R(S,l.startTime-e),n=!1}}break e}finally{h=null,f=s,p=!1}n=void 0}}finally{n?A():E=!1}}}if("function"===typeof b)A=function(){b(I)};else if("undefined"!==typeof MessageChannel){var k=new MessageChannel,P=k.port2;k.port1.onmessage=I,A=function(){P.postMessage(null)}}else A=function(){v(I,0)};function R(e,n){N=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_requestPaint=function(){y=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(w(N),N=-1):g=!0,R(S,s-a))):(e.sortIndex=o,n(c,e),m||p||(m=!0,E||(E=!0,A()))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},6116:e=>{e.exports=function(){return"function"===typeof Promise&&Promise.prototype&&Promise.prototype.then}},6272:(e,t)=>{t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2},t.isValid=function(e){return e&&"undefined"!==typeof e.bit&&e.bit>=0&&e.bit<4},t.from=function(e,n){if(t.isValid(e))return e;try{return function(e){if("string"!==typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+e)}}(e)}catch(r){return n}}},6667:(e,t,n)=>{"use strict";n.d(t,{gS:()=>gh,rJ:()=>ud,kd:()=>mh,H9:()=>dd,aU:()=>yd,aQ:()=>yh,vK:()=>xh,K7:()=>Eh,P:()=>$d,O5:()=>Nh,mZ:()=>ph,_M:()=>th});var r,i,s=n(9379),a=n(1150),o=n(9606),l=n(2965),c=n(1776),u="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},d={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}function n(e,t,n){n||(n=0);const r=Array(16);if("string"===typeof t)for(var i=0;i<16;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;i<16;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];let s,a=e.g[3];s=t+(a^n&(i^a))+r[0]+3614090360&4294967295,s=a+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[1]+3905402710&4294967295,a=t+(s<<12&4294967295|s>>>20),s=i+(n^a&(t^n))+r[2]+606105819&4294967295,s=n+(t^(i=a+(s<<17&4294967295|s>>>15))&(a^t))+r[3]+3250441966&4294967295,s=t+(a^(n=i+(s<<22&4294967295|s>>>10))&(i^a))+r[4]+4118548399&4294967295,s=a+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[5]+1200080426&4294967295,a=t+(s<<12&4294967295|s>>>20),s=i+(n^a&(t^n))+r[6]+2821735955&4294967295,s=n+(t^(i=a+(s<<17&4294967295|s>>>15))&(a^t))+r[7]+4249261313&4294967295,s=t+(a^(n=i+(s<<22&4294967295|s>>>10))&(i^a))+r[8]+1770035416&4294967295,s=a+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[9]+2336552879&4294967295,a=t+(s<<12&4294967295|s>>>20),s=i+(n^a&(t^n))+r[10]+4294925233&4294967295,s=n+(t^(i=a+(s<<17&4294967295|s>>>15))&(a^t))+r[11]+2304563134&4294967295,s=t+(a^(n=i+(s<<22&4294967295|s>>>10))&(i^a))+r[12]+1804603682&4294967295,s=a+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[13]+4254626195&4294967295,a=t+(s<<12&4294967295|s>>>20),s=i+(n^a&(t^n))+r[14]+2792965006&4294967295,s=n+(t^(i=a+(s<<17&4294967295|s>>>15))&(a^t))+r[15]+1236535329&4294967295,s=t+(i^a&((n=i+(s<<22&4294967295|s>>>10))^i))+r[1]+4129170786&4294967295,s=a+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[6]+3225465664&4294967295,a=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(a^t))+r[11]+643717713&4294967295,s=n+(a^t&((i=a+(s<<14&4294967295|s>>>18))^a))+r[0]+3921069994&4294967295,s=t+(i^a&((n=i+(s<<20&4294967295|s>>>12))^i))+r[5]+3593408605&4294967295,s=a+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[10]+38016083&4294967295,a=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(a^t))+r[15]+3634488961&4294967295,s=n+(a^t&((i=a+(s<<14&4294967295|s>>>18))^a))+r[4]+3889429448&4294967295,s=t+(i^a&((n=i+(s<<20&4294967295|s>>>12))^i))+r[9]+568446438&4294967295,s=a+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[14]+3275163606&4294967295,a=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(a^t))+r[3]+4107603335&4294967295,s=n+(a^t&((i=a+(s<<14&4294967295|s>>>18))^a))+r[8]+1163531501&4294967295,s=t+(i^a&((n=i+(s<<20&4294967295|s>>>12))^i))+r[13]+2850285829&4294967295,s=a+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[2]+4243563512&4294967295,a=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(a^t))+r[7]+1735328473&4294967295,s=n+(a^t&((i=a+(s<<14&4294967295|s>>>18))^a))+r[12]+2368359562&4294967295,s=t+((n=i+(s<<20&4294967295|s>>>12))^i^a)+r[5]+4294588738&4294967295,s=a+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[8]+2272392833&4294967295,a=t+(s<<11&4294967295|s>>>21),s=i+(a^t^n)+r[11]+1839030562&4294967295,s=n+((i=a+(s<<16&4294967295|s>>>16))^a^t)+r[14]+4259657740&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^a)+r[1]+2763975236&4294967295,s=a+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[4]+1272893353&4294967295,a=t+(s<<11&4294967295|s>>>21),s=i+(a^t^n)+r[7]+4139469664&4294967295,s=n+((i=a+(s<<16&4294967295|s>>>16))^a^t)+r[10]+3200236656&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^a)+r[13]+681279174&4294967295,s=a+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[0]+3936430074&4294967295,a=t+(s<<11&4294967295|s>>>21),s=i+(a^t^n)+r[3]+3572445317&4294967295,s=n+((i=a+(s<<16&4294967295|s>>>16))^a^t)+r[6]+76029189&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^a)+r[9]+3654602809&4294967295,s=a+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[12]+3873151461&4294967295,a=t+(s<<11&4294967295|s>>>21),s=i+(a^t^n)+r[15]+530742520&4294967295,s=n+((i=a+(s<<16&4294967295|s>>>16))^a^t)+r[2]+3299628645&4294967295,s=t+(i^((n=i+(s<<23&4294967295|s>>>9))|~a))+r[0]+4096336452&4294967295,s=a+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[7]+1126891415&4294967295,a=t+(s<<10&4294967295|s>>>22),s=i+(t^(a|~n))+r[14]+2878612391&4294967295,s=n+(a^((i=a+(s<<15&4294967295|s>>>17))|~t))+r[5]+4237533241&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~a))+r[12]+1700485571&4294967295,s=a+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[3]+2399980690&4294967295,a=t+(s<<10&4294967295|s>>>22),s=i+(t^(a|~n))+r[10]+4293915773&4294967295,s=n+(a^((i=a+(s<<15&4294967295|s>>>17))|~t))+r[1]+2240044497&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~a))+r[8]+1873313359&4294967295,s=a+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[15]+4264355552&4294967295,a=t+(s<<10&4294967295|s>>>22),s=i+(t^(a|~n))+r[6]+2734768916&4294967295,s=n+(a^((i=a+(s<<15&4294967295|s>>>17))|~t))+r[13]+1309151649&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~a))+r[4]+4149444226&4294967295,s=a+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[11]+3174756917&4294967295,a=t+(s<<10&4294967295|s>>>22),s=i+(t^(a|~n))+r[2]+718787259&4294967295,s=n+(a^((i=a+(s<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function s(e,t){this.h=t;const n=[];let r=!0;for(let i=e.length-1;i>=0;i--){const s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.v=function(e,t){void 0===t&&(t=e.length);const r=t-this.blockSize,i=this.C;let s=this.h,a=0;for(;a<t;){if(0==s)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(i[s++]=e.charCodeAt(a++),s==this.blockSize){n(this,i),s=0;break}}else for(;a<t;)if(i[s++]=e[a++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.A=function(){var e=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=8*this.o;for(var n=e.length-8;n<e.length;++n)e[n]=255&t,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};var a={};function o(e){return-128<=e&&e<128?function(e,t){var n=a;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new s([0|e],e<0?-1:0)}):new s([0|e],e<0?-1:0)}function l(e){if(isNaN(e)||!isFinite(e))return c;if(e<0)return m(l(-e));const t=[];let n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new s(t,0)}var c=o(0),u=o(1),h=o(16777216);function f(e){if(0!=e.h)return!1;for(let t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function p(e){return-1==e.h}function m(e){const t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new s(n,~e.h).add(u)}function g(e,t){return e.add(m(t))}function y(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function v(e,t){this.g=e,this.h=t}function w(e,t){if(f(t))throw Error("division by zero");if(f(e))return new v(c,c);if(p(e))return t=w(m(e),t),new v(m(t.g),m(t.h));if(p(t))return t=w(e,m(t)),new v(m(t.g),t.h);if(e.g.length>30){if(p(e)||p(t))throw Error("slowDivide_ only works with positive integers.");for(var n=u,r=t;r.l(e)<=0;)n=b(n),r=b(r);var i=x(n,1),s=x(r,1);for(r=x(r,2),n=x(n,2);!f(r);){var a=s.add(r);a.l(e)<=0&&(i=i.add(n),s=a),r=x(r,1),n=x(n,1)}return t=g(e,i.j(t)),new v(i,t)}for(i=c;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=(r=Math.ceil(Math.log(n)/Math.LN2))<=48?1:Math.pow(2,r-48),a=(s=l(n)).j(t);p(a)||a.l(e)>0;)a=(s=l(n-=r)).j(t);f(s)&&(s=u),i=i.add(s),e=g(e,a)}return new v(i,e)}function b(e){const t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new s(n,e.h)}function x(e,t){const n=t>>5;t%=32;const r=e.g.length-n,i=[];for(let s=0;s<r;s++)i[s]=t>0?e.i(s+n)>>>t|e.i(s+n+1)<<32-t:e.i(s+n);return new s(i,e.h)}(e=s.prototype).m=function(){if(p(this))return-m(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){const r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if((e=e||10)<2||36<e)throw Error("radix out of range: "+e);if(f(this))return"0";if(p(this))return"-"+m(this).toString(e);const t=l(Math.pow(e,6));var n=this;let r="";for(;;){const i=w(n,t).g;let s=(((n=g(n,i.j(t))).g.length>0?n.g[0]:n.h)>>>0).toString(e);if(f(n=i))return s+r;for(;s.length<6;)s="0"+s;r=s+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return p(e=g(this,e))?-1:f(e)?0:1},e.abs=function(){return p(this)?m(this):this},e.add=function(e){const t=Math.max(this.g.length,e.g.length),n=[];let r=0;for(let i=0;i<=t;i++){let t=r+(65535&this.i(i))+(65535&e.i(i)),s=(t>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);r=s>>>16,t&=65535,s&=65535,n[i]=s<<16|t}return new s(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(f(this)||f(e))return c;if(p(this))return p(e)?m(this).j(m(e)):m(m(this).j(e));if(p(e))return m(this.j(m(e)));if(this.l(h)<0&&e.l(h)<0)return l(this.m()*e.m());const t=this.g.length+e.g.length,n=[];for(var r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(let t=0;t<e.g.length;t++){const i=this.i(r)>>>16,s=65535&this.i(r),a=e.i(t)>>>16,o=65535&e.i(t);n[2*r+2*t]+=s*o,y(n,2*r+2*t),n[2*r+2*t+1]+=i*o,y(n,2*r+2*t+1),n[2*r+2*t+1]+=s*a,y(n,2*r+2*t+1),n[2*r+2*t+2]+=i*a,y(n,2*r+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new s(n,0)},e.B=function(e){return w(this,e).h},e.and=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new s(n,this.h&e.h)},e.or=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new s(n,this.h|e.h)},e.xor=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new s(n,this.h^e.h)},t.prototype.digest=t.prototype.A,t.prototype.reset=t.prototype.u,t.prototype.update=t.prototype.v,i=d.Md5=t,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if((n=n||10)<2||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return m(e(t.substring(1),n));if(t.indexOf("-")>=0)throw Error('number format error: interior "-" character');const r=l(Math.pow(n,8));let i=c;for(let a=0;a<t.length;a+=8){var s=Math.min(8,t.length-a);const e=parseInt(t.substring(a,a+s),n);s<8?(s=l(Math.pow(n,s)),i=i.j(s).add(l(e))):(i=i.j(r),i=i.add(l(e)))}return i},r=d.Integer=s}).apply("undefined"!==typeof u?u:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var h,f,p,m,g,y,v,w,b="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},x={};(function(){var e,t=Object.defineProperty;var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof b&&b];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function r(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var a=e[s];if(!(a in i))break e;i=i[a]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}r("Symbol.dispose",function(e){return e||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(e){return e||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push([t,e[t]]);return n}});var i=i||{},s=this||self;function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){return(l=o).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function u(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}var d="undefined"!==typeof AsyncContext&&"function"===typeof AsyncContext.Snapshot?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function S(e){const t=e.length;if(t>0){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function E(e,t){for(let r=1;r<arguments.length;r++){const t=arguments[r];var n=typeof t;if("array"==(n="object"!=n?n:t?Array.isArray(t)?"array":n:"null")||"object"==n&&"number"==typeof t.length){n=e.length||0;const r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function N(e){s.setTimeout(()=>{throw e},0)}function C(){var e=P;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var _=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new T,e=>e.reset());class T{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let I,k=!1,P=new class{constructor(){this.h=this.g=null}add(e,t){const n=_.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},R=()=>{const e=Promise.resolve(void 0);I=()=>{e.then(D)}};function D(){for(var e;e=C();){try{e.h.call(e.g)}catch(n){N(n)}var t=_;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}k=!1}function O(){this.u=this.u,this.C=this.C}function L(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},L.prototype.h=function(){this.defaultPrevented=!0};var M=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(n){}return e}();function F(e){return/^[\s\xa0]*$/.test(e)}function j(e,t){L.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e&&this.init(e,t)}u(j,L),j.prototype.init=function(e,t){const n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,(t=e.relatedTarget)||("mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&j.Z.h.call(this)},j.prototype.h=function(){j.Z.h.call(this);const e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var B="closure_listenable_"+(1e6*Math.random()|0),U=0;function z(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++U,this.da=this.fa=!1}function V(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function H(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function W(e){const t={};for(const n in e)t[n]=e[n];return t}const q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function G(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<q.length;t++)n=q[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function K(e){this.src=e,this.g={},this.h=0}function Y(e,t){const n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=s>=0)&&Array.prototype.splice.call(i,s,1),r&&(V(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function X(e,t,n,r){for(let i=0;i<e.length;++i){const s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}K.prototype.add=function(e,t,n,r,i){const s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);const a=X(e,t,r,i);return a>-1?(t=e[a],n||(t.fa=!1)):((t=new z(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var Q="closure_lm_"+(1e6*Math.random()|0),J={};function Z(e,t,n,r,i){if(r&&r.once)return ee(e,t,n,r,i);if(Array.isArray(t)){for(let s=0;s<t.length;s++)Z(e,t[s],n,r,i);return null}return n=le(n),e&&e[B]?e.J(t,n,a(r)?!!r.capture:!!r,i):$(e,t,n,!1,r,i)}function $(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");const o=a(i)?!!i.capture:!!i;let l=ae(e);if(l||(e[Q]=l=new K(e)),(n=l.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=se;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)M||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ie(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ee(e,t,n,r,i){if(Array.isArray(t)){for(let s=0;s<t.length;s++)ee(e,t[s],n,r,i);return null}return n=le(n),e&&e[B]?e.K(t,n,a(r)?!!r.capture:!!r,i):$(e,t,n,!0,r,i)}function te(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)te(e,t[s],n,r,i);else r=a(r)?!!r.capture:!!r,n=le(n),e&&e[B]?(e=e.i,(s=String(t).toString())in e.g&&((n=X(t=e.g[s],n,r,i))>-1&&(V(t[n]),Array.prototype.splice.call(t,n,1),0==t.length&&(delete e.g[s],e.h--)))):e&&(e=ae(e))&&(t=e.g[t.toString()],e=-1,t&&(e=X(t,n,r,i)),(n=e>-1?t[e]:null)&&re(n))}function re(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[B])Y(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ie(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ae(t))?(Y(n,e),0==n.h&&(n.src=null,t[Q]=null)):V(e)}}}function ie(e){return e in J?J[e]:J[e]="on"+e}function se(e,t){if(e.da)e=!0;else{t=new j(t,this);const n=e.listener,r=e.ha||e.src;e.fa&&re(e),e=n.call(r,t)}return e}function ae(e){return(e=e[Q])instanceof K?e:null}var oe="__closure_events_fn_"+(1e9*Math.random()>>>0);function le(e){return"function"===typeof e?e:(e[oe]||(e[oe]=function(t){return e.handleEvent(t)}),e[oe])}function ce(){O.call(this),this.i=new K(this),this.M=this,this.G=null}function ue(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new L(t,e);else if(t instanceof L)t.target=t.target||e;else{var i=t;G(t=new L(r,e),i)}let s,a;if(i=!0,n)for(a=n.length-1;a>=0;a--)s=t.g=n[a],i=de(s,r,!0,t)&&i;if(s=t.g=e,i=de(s,r,!0,t)&&i,i=de(s,r,!1,t)&&i,n)for(a=0;a<n.length;a++)s=t.g=n[a],i=de(s,r,!1,t)&&i}function de(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();let i=!0;for(let s=0;s<t.length;++s){const a=t[s];if(a&&!a.da&&a.capture==n){const t=a.listener,n=a.ha||a.src;a.fa&&Y(e.i,a),i=!1!==t.call(n,r)&&i}}return i&&!r.defaultPrevented}function he(e){e.g=function(e,t){if("function"!==typeof e){if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=l(e.handleEvent,e)}return Number(t)>2147483647?-1:s.setTimeout(e,t||0)}(()=>{e.g=null,e.i&&(e.i=!1,he(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}u(ce,O),ce.prototype[B]=!0,ce.prototype.removeEventListener=function(e,t,n,r){te(this,e,t,n,r)},ce.prototype.N=function(){if(ce.Z.N.call(this),this.i){var e=this.i;for(const t in e.g){const n=e.g[t];for(let e=0;e<n.length;e++)V(n[e]);delete e.g[t],e.h--}}this.G=null},ce.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ce.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class fe extends O{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:he(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pe(e){O.call(this),this.h=e,this.g={}}u(pe,O);var me=[];function ge(e){H(e.g,function(e,t){this.g.hasOwnProperty(t)&&re(e)},e),e.g={}}pe.prototype.N=function(){pe.Z.N.call(this),ge(this)},pe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ye=s.JSON.stringify,ve=s.JSON.parse,we=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function be(){}function xe(){}var Se={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ae(){L.call(this,"d")}function Ee(){L.call(this,"c")}u(Ae,L),u(Ee,L);var Ne={},Ce=null;function _e(){return Ce=Ce||new ce}function Te(e){L.call(this,Ne.Ia,e)}function Ie(e){const t=_e();ue(t,new Te(t))}function ke(e,t){L.call(this,Ne.STAT_EVENT,e),this.stat=t}function Pe(e){const t=_e();ue(t,new ke(t,e))}function Re(e,t){L.call(this,Ne.Ja,e),this.size=t}function De(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){e()},t)}function Oe(){this.g=!0}function Le(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{const s=JSON.parse(t);if(s)for(e=0;e<s.length;e++)if(Array.isArray(s[e])){var n=s[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var i=r[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(let e=1;e<r.length;e++)r[e]=""}}}return ye(s)}catch(s){return t}}(e,n)+(r?" "+r:"")})}Ne.Ia="serverreachability",u(Te,L),Ne.STAT_EVENT="statevent",u(ke,L),Ne.Ja="timingevent",u(Re,L),Oe.prototype.ua=function(){this.g=!1},Oe.prototype.info=function(){};var Me,Fe={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},je={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function Be(){}function Ue(e){return encodeURIComponent(String(e))}function ze(e){var t=1;e=e.split(":");const n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Ve(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new pe(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new He}function He(){this.i=null,this.g="",this.h=!1}u(Be,be),Be.prototype.g=function(){return new XMLHttpRequest},Me=new Be;var We={},qe={};function Ge(e,t,n){e.M=1,e.A=yt(ht(t)),e.u=n,e.R=!0,Ke(e,null)}function Ke(e,t){e.F=Date.now(),Qe(e),e.B=ht(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),Pt(n.i,"t",r),e.C=0,n=e.j.L,e.h=new He,e.g=vn(e.j,n?t:null,!e.u),e.P>0&&(e.O=new fe(l(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var i="readystatechange";Array.isArray(i)||(i&&(me[0]=i.toString()),i=me);for(let s=0;s<i.length;s++){const e=Z(n,i[s],r||t.handleEvent,!1,t.h||t);if(!e)break;t.g[e.key]=e}t=e.J?W(e.J):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.B,e.v,e.u,t)):(e.v="GET",e.g.ea(e.B,e.v,null,t)),Ie(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s){var a="",o=s.split("&");for(let e=0;e<o.length;e++){var l=o[e].split("=");if(l.length>1){const e=l[0];l=l[1];const t=e.split("_");a=t.length>=2&&"type"==t[1]?a+(e+"=")+l+"&":a+(e+"=redacted&")}}}else a=null;else a=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.v,e.B,e.l,e.S,e.u)}function Ye(e){return!!e.g&&("GET"==e.v&&2!=e.M&&e.j.Aa)}function Xe(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?qe:(n=Number(t.substring(n,r)),isNaN(n)?We:(r+=1)+n>t.length?qe:(t=t.slice(r,r+n),e.C=r+n,t))}function Qe(e){e.T=Date.now()+e.H,Je(e,e.H)}function Je(e,t){if(null!=e.D)throw Error("WatchDog timer not null");e.D=De(l(e.aa,e),t)}function Ze(e){e.D&&(s.clearTimeout(e.D),e.D=null)}function $e(e){0==e.j.I||e.K||fn(e.j,e)}function et(e){Ze(e);var t=e.O;t&&"function"==typeof t.dispose&&t.dispose(),e.O=null,ge(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function tt(e,t){try{var n=e.j;if(0!=n.I&&(n.g==e||at(n.h,e)))if(!e.L&&at(n.h,e)&&3==n.I){try{var r=n.Ba.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.v){if(n.g){if(!(n.g.F+3e3<e.F))break e;hn(n),tn(n)}cn(n),Pe(18)}}else n.xa=i[1],0<n.xa-n.K&&i[2]<37500&&n.F&&0==n.A&&!n.C&&(n.C=De(l(n.Va,n),6e3));st(n.h)<=1&&n.ta&&(n.ta=void 0)}else mn(n,11)}else if((e.L||n.g==e)&&hn(n),!F(t))for(i=n.Ba.g.parse(t),t=0;t<i.length;t++){let l=i[t];const u=l[0];if(!(u<=n.K))if(n.K=u,l=l[1],2==n.I)if("c"==l[0]){n.M=l[1],n.ba=l[2];const t=l[3];null!=t&&(n.ka=t,n.j.info("VER="+n.ka));const i=l[4];null!=i&&(n.za=i,n.j.info("SVER="+n.za));const u=l[5];null!=u&&"number"===typeof u&&u>0&&(r=1.5*u,n.O=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(ot(s,s.h),s.h=null))}if(r.G){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.wa=e,gt(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info("Handshake RTT: "+n.T+"ms"));var a=e;if((r=n).na=yn(r,r.L?r.ba:null,r.W),a.L){lt(r.h,a);var o=a,c=r.O;c&&(o.H=c),o.D&&(Ze(o),Qe(o)),r.g=a}else ln(r);n.i.length>0&&rn(n)}else"stop"!=l[0]&&"close"!=l[0]||mn(n,7);else 3==n.I&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?mn(n,7):en(n):"noop"!=l[0]&&n.l&&n.l.qa(l),n.A=0)}Ie()}catch(u){}}Ve.prototype.ba=function(e){e=e.target;const t=this.O;t&&3==Qt(e)?t.j():this.Y(e)},Ve.prototype.Y=function(e){try{if(e==this.g)e:{const l=Qt(this.g),c=this.g.ya();this.g.ca();if(!(l<3)&&(3!=l||this.g&&(this.h.h||this.g.la()||Jt(this.g)))){this.K||4!=l||7==c||Ie(),Ze(this);var t=this.g.ca();this.X=t;var n=function(e){if(!Ye(e))return e.g.la();const t=Jt(e.g);if(""===t)return"";let n="";const r=t.length,i=4==Qt(e.g);if(!e.h.i){if("undefined"===typeof TextDecoder)return et(e),$e(e),"";e.h.i=new s.TextDecoder}for(let s=0;s<r;s++)e.h.h=!0,n+=e.h.i.decode(t[s],{stream:!(i&&s==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}(this);if(this.o=200==t,function(e,t,n,r,i,s,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+a})}(this.i,this.v,this.B,this.l,this.S,l,t),this.o){if(this.U&&!this.L){t:{if(this.g){var r,i=this.g;if((r=i.g?i.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(r)){var a=r;break t}}a=null}if(!(e=a)){this.o=!1,this.m=3,Pe(12),et(this),$e(this);break e}Le(this.i,this.l,e,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,tt(this,e)}if(this.R){let t;for(e=!0;!this.K&&this.C<n.length;){if(t=Xe(this,n),t==qe){4==l&&(this.m=4,Pe(14),e=!1),Le(this.i,this.l,null,"[Incomplete Response]");break}if(t==We){this.m=4,Pe(15),Le(this.i,this.l,n,"[Invalid Chunk]"),e=!1;break}Le(this.i,this.l,t,null),tt(this,t)}if(Ye(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=l||0!=n.length||this.h.h||(this.m=1,Pe(16),e=!1),this.o=this.o&&e,e){if(n.length>0&&!this.W){this.W=!0;var o=this.j;o.g==this&&o.aa&&!o.P&&(o.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),un(o),o.P=!0,Pe(11))}}else Le(this.i,this.l,n,"[Invalid Chunked Response]"),et(this),$e(this)}else Le(this.i,this.l,n,null),tt(this,n);4==l&&et(this),this.o&&!this.K&&(4==l?fn(this.j,this):(this.o=!1,Qe(this)))}else(function(e){const t={};e=(e.g&&Qt(e)>=2&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(F(e[r]))continue;var n=ze(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==t&&n.indexOf("Unknown SID")>0?(this.m=3,Pe(12)):(this.m=0,Pe(13)),et(this),$e(this)}}}catch(ne){}},Ve.prototype.cancel=function(){this.K=!0,et(this)},Ve.prototype.aa=function(){this.D=null;const e=Date.now();e-this.T>=0?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.B),2!=this.M&&(Ie(),Pe(17)),et(this),this.m=2,$e(this)):Je(this,this.T-e)};var nt=class{constructor(e,t){this.g=e,this.map=t}};function rt(e){this.l=e||10,s.PerformanceNavigationTiming?e=(e=s.performance.getEntriesByType("navigation")).length>0&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function it(e){return!!e.h||!!e.g&&e.g.size>=e.j}function st(e){return e.h?1:e.g?e.g.size:0}function at(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function ot(e,t){e.g?e.g.add(t):e.h=t}function lt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function ct(e){if(null!=e.h)return e.i.concat(e.h.G);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.G);return t}return S(e.i)}rt.prototype.cancel=function(){if(this.i=ct(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var ut=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dt(e){let t;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,e instanceof dt?(this.l=e.l,ft(this,e.j),this.o=e.o,this.g=e.g,pt(this,e.u),this.h=e.h,mt(this,Rt(e.i)),this.m=e.m):e&&(t=String(e).match(ut))?(this.l=!1,ft(this,t[1]||"",!0),this.o=vt(t[2]||""),this.g=vt(t[3]||"",!0),pt(this,t[4]),this.h=vt(t[5]||"",!0),mt(this,t[6]||"",!0),this.m=vt(t[7]||"")):(this.l=!1,this.i=new Ct(null,this.l))}function ht(e){return new dt(e)}function ft(e,t,n){e.j=n?vt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function pt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.u=t}else e.u=null}function mt(e,t,n){t instanceof Ct?(e.i=t,function(e,t){t&&!e.j&&(_t(e),e.i=null,e.g.forEach(function(e,t){const n=t.toLowerCase();t!=n&&(Tt(this,t),Pt(this,n,e))},e)),e.j=t}(e.i,e.l)):(n||(t=wt(t,Et)),e.i=new Ct(t,e.l))}function gt(e,t,n){e.i.set(t,n)}function yt(e){return gt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function vt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function wt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,bt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function bt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}dt.prototype.toString=function(){const e=[];var t=this.j;t&&e.push(wt(t,xt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(wt(t,xt,!0),"@"),e.push(Ue(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.u)&&e.push(":",String(n))),(n=this.h)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(wt(n,"/"==n.charAt(0)?At:St,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",wt(n,Nt)),e.join("")},dt.prototype.resolve=function(e){const t=ht(this);let n=!!e.j;n?ft(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=null!=e.u;var r=e.h;if(n)pt(t,e.u);else if(n=!!e.h){if("/"!=r.charAt(0))if(this.g&&!this.h)r="/"+r;else{var i=t.h.lastIndexOf("/");-1!=i&&(r=t.h.slice(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");const e=[];for(let t=0;t<i.length;){const n=i[t++];"."==n?r&&t==i.length&&e.push(""):".."==n?((e.length>1||1==e.length&&""!=e[0])&&e.pop(),r&&t==i.length&&e.push("")):(e.push(n),r=!0)}r=e.join("/")}else r=i}return n?t.h=r:n=""!==e.i.toString(),n?mt(t,Rt(e.i)):n=!!e.m,n&&(t.m=e.m),t};var xt=/[#\/\?@]/g,St=/[#\?:]/g,At=/[#\?]/g,Et=/[#\?@]/g,Nt=/#/g;function Ct(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function _t(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(let n=0;n<e.length;n++){const r=e[n].indexOf("=");let i,s=null;r>=0?(i=e[n].substring(0,r),s=e[n].substring(r+1)):i=e[n],t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Tt(e,t){_t(e),t=Dt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function It(e,t){return _t(e),t=Dt(e,t),e.g.has(t)}function kt(e,t){_t(e);let n=[];if("string"===typeof t)It(e,t)&&(n=n.concat(e.g.get(Dt(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}function Pt(e,t,n){Tt(e,t),n.length>0&&(e.i=null,e.g.set(Dt(e,t),S(n)),e.h+=n.length)}function Rt(e){const t=new Ct;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function Dt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Ot(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function Lt(){this.g=new we}function Mt(e){this.i=e.Sb||null,this.h=e.ab||!1}function Ft(e,t){ce.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function jt(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}function Bt(e){e.readyState=4,e.l=null,e.j=null,e.B=null,Ut(e)}function Ut(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function zt(e){let t="";return H(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Vt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=zt(n),"string"===typeof e?null!=n&&Ue(n):gt(e,t,n))}function Ht(e){ce.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(e=Ct.prototype).add=function(e,t){_t(this),this.i=null,e=Dt(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){_t(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.set=function(e,t){return _t(this),this.i=null,It(this,e=Dt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&(e=kt(this,e)).length>0?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];const i=Ue(n);n=kt(this,n);for(let t=0;t<n.length;t++){let r=i;""!==n[t]&&(r+="="+Ue(n[t])),e.push(r)}}return this.i=e.join("&")},u(Mt,be),Mt.prototype.g=function(){return new Ft(this.i,this.h)},u(Ft,ce),(e=Ft.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=e,this.D=t,this.readyState=1,Ut(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||s).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,Bt(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ut(this)),this.g&&(this.readyState=3,Ut(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;jt(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))},e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Bt(this):Ut(this),3==this.readyState&&jt(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,Bt(this))},e.Na=function(e){this.g&&(this.response=e,Bt(this))},e.ga=function(){this.g&&Bt(this)},e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Ft.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),u(Ht,ce);var Wt=/^https?$/i,qt=["POST","PUT"];function Gt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,Kt(e),Xt(e)}function Kt(e){e.A||(e.A=!0,ue(e,"complete"),ue(e,"error"))}function Yt(e){if(e.h&&"undefined"!=typeof i)if(e.v&&4==Qt(e))setTimeout(e.Ca.bind(e),0);else if(ue(e,"readystatechange"),4==Qt(e)){e.h=!1;try{const i=e.ca();e:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===i){let t=String(e.D).match(ut)[1]||null;!t&&s.self&&s.self.location&&(t=s.self.location.protocol.slice(0,-1)),r=!Wt.test(t?t.toLowerCase():"")}n=r}if(n)ue(e,"complete"),ue(e,"success");else{e.o=6;try{var a=Qt(e)>2?e.g.statusText:""}catch(o){a=""}e.l=a+" ["+e.ca()+"]",Kt(e)}}finally{Xt(e)}}}function Xt(e,t){if(e.g){e.m&&(clearTimeout(e.m),e.m=null);const r=e.g;e.g=null,t||ue(e,"ready");try{r.onreadystatechange=null}catch(n){}}}function Qt(e){return e.g?e.g.readyState:0}function Jt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.F){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Zt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function $t(e){this.za=0,this.i=[],this.j=new Oe,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Zt("failFast",!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Zt("baseRetryDelayMs",5e3,e),this.Za=Zt("retryDelaySeedMs",1e4,e),this.Ta=Zt("forwardChannelMaxRetries",2,e),this.va=Zt("forwardChannelRequestTimeoutMs",2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M="",this.h=new rt(e&&e.concurrentRequestLimit),this.Ba=new Lt,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function en(e){if(nn(e),3==e.I){var t=e.V++,n=ht(e.J);if(gt(n,"SID",e.M),gt(n,"RID",t),gt(n,"TYPE","terminate"),an(e,n),(t=new Ve(e,e.j,t)).M=2,t.A=yt(ht(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&s.Image&&((new Image).src=t.A,n=!0),n||(t.g=vn(t.j,null),t.g.ea(t.A)),t.F=Date.now(),Qe(t)}gn(e)}function tn(e){e.g&&(un(e),e.g.cancel(),e.g=null)}function nn(e){tn(e),e.v&&(s.clearTimeout(e.v),e.v=null),hn(e),e.h.cancel(),e.m&&("number"===typeof e.m&&s.clearTimeout(e.m),e.m=null)}function rn(e){if(!it(e.h)&&!e.m){e.m=!0;var t=e.Ea;I||R(),k||(I(),k=!0),P.add(t,e),e.D=0}}function sn(e,t){var n;n=t?t.l:e.V++;const r=ht(e.J);gt(r,"SID",e.M),gt(r,"RID",n),gt(r,"AID",e.K),an(e,r),e.u&&e.o&&Vt(r,e.u,e.o),n=new Ve(e,e.j,n,e.D+1),null===e.u&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=on(e,n,1e3),n.H=Math.round(.5*e.va)+Math.round(.5*e.va*Math.random()),ot(e.h,n),Ge(n,r,t)}function an(e,t){e.H&&H(e.H,function(e,n){gt(t,n,e)}),e.l&&H({},function(e,n){gt(t,n,e)})}function on(e,t,n){n=Math.min(e.i.length,n);const r=e.l?l(e.l.Ka,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?n>0?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let l=!0;for(let c=0;c<n;c++){var s=i[c].g;const n=i[c].map;if((s-=t)<0)t=Math.max(0,i[c].g-100),l=!1;else try{s="req"+s+"_"||0;try{var o=n instanceof Map?n:Object.entries(n);for(const[t,n]of o){let r=n;a(n)&&(r=ye(n)),e.push(s+t+"="+encodeURIComponent(r))}}catch(A){throw e.push(s+"type="+encodeURIComponent("_badmap")),A}}catch(A){r&&r(n)}}if(l){o=e.join("&");break e}}o=void 0}return e=e.i.splice(0,n),t.G=e,o}function ln(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;I||R(),k||(I(),k=!0),P.add(t,e),e.A=0}}function cn(e){return!(e.g||e.v||e.A>=3)&&(e.Y++,e.v=De(l(e.Da,e),pn(e,e.A)),e.A++,!0)}function un(e){null!=e.B&&(s.clearTimeout(e.B),e.B=null)}function dn(e){e.g=new Ve(e,e.j,"rpc",e.Y),null===e.u&&(e.g.J=e.o),e.g.P=0;var t=ht(e.na);gt(t,"RID","rpc"),gt(t,"SID",e.M),gt(t,"AID",e.K),gt(t,"CI",e.F?"0":"1"),!e.F&&e.ia&&gt(t,"TO",e.ia),gt(t,"TYPE","xmlhttp"),an(e,t),e.u&&e.o&&Vt(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=yt(ht(t)),n.u=null,n.R=!0,Ke(n,e)}function hn(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function fn(e,t){var n=null;if(e.g==t){hn(e),un(e),e.g=null;var r=2}else{if(!at(e.h,t))return;n=t.G,lt(e.h,t),r=1}if(0!=e.I)if(t.o)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.F;var i=e.D;ue(r=_e(),new Re(r,n)),rn(e)}else ln(e);else if(3==(i=t.m)||0==i&&t.X>0||!(1==r&&function(e,t){return!(st(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.G.concat(e.i),!0):!(1==e.I||2==e.I||e.D>=(e.Sa?0:e.Ta))&&(e.m=De(l(e.Ea,e,t),pn(e,e.D)),e.D++,!0))}(e,t)||2==r&&cn(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),i){case 1:mn(e,5);break;case 4:mn(e,10);break;case 3:mn(e,6);break;default:mn(e,2)}}function pn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function mn(e,t){if(e.j.info("Error code "+t),2==t){var n=l(e.bb,e),r=e.Ua;const t=!r;r=new dt(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||ft(r,"https"),yt(r),t?function(e,t){const n=new Oe;if(s.Image){const r=new Image;r.onload=c(Ot,n,"TestLoadImage: loaded",!0,t,r),r.onerror=c(Ot,n,"TestLoadImage: error",!1,t,r),r.onabort=c(Ot,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=c(Ot,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Oe;const n=new AbortController,r=setTimeout(()=>{n.abort(),Ot(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Ot(0,0,!0,t):Ot(0,0,!1,t)}).catch(()=>{clearTimeout(r),Ot(0,0,!1,t)})}(r.toString(),n)}else Pe(2);e.I=0,e.l&&e.l.pa(t),gn(e),nn(e)}function gn(e){if(e.I=0,e.ja=[],e.l){const t=ct(e.h);0==t.length&&0==e.i.length||(E(e.ja,t),E(e.ja,e.i),e.h.i.length=0,S(e.i),e.i.length=0),e.l.oa()}}function yn(e,t,n){var r=n instanceof dt?ht(n):new dt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),pt(r,r.u);else{var i=s.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;const e=new dt(null);r&&ft(e,r),t&&(e.g=t),i&&pt(e,i),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&gt(r,n,t),gt(r,"VER",e.ka),an(e,r),r}function vn(e,t,n){if(t&&!e.L)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Aa&&!e.ma?new Ht(new Mt({ab:n})):new Ht(e.ma)).Fa(e.L),t}function wn(){}function bn(){}function xn(e,t){ce.call(this),this.g=new $t(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e["X-WebChannel-Client-Profile"]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!F(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!F(t)&&(this.g.G=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new En(this)}function Sn(e){Ae.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function An(){Ee.call(this),this.status=1}function En(e){this.g=e}(e=Ht.prototype).Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Me.g(),this.g.onreadystatechange=d(l(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void Gt(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=s.FormData&&e instanceof s.FormData,!(Array.prototype.indexOf.call(qt,t,void 0)>=0)||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(e),this.v=!1}catch(a){Gt(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,ue(this,"complete"),ue(this,"abort"),Xt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xt(this,!0)),Ht.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Yt(this):this.Xa())},e.Xa=function(){Yt(this)},e.isActive=function(){return!!this.g},e.ca=function(){try{return Qt(this)>2?this.g.status:-1}catch(e){return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ve(t)}},e.ya=function(){return this.o},e.Ha=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=$t.prototype).ka=8,e.I=1,e.connect=function(e,t,n,r){Pe(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=yn(this,null,this.W),rn(this)},e.Ea=function(e){if(this.m)if(this.m=null,1==this.I){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const i=new Ve(this,this.j,e);let s=this.o;if(this.U&&(s?(s=W(s),G(s,this.U)):s=this.U),null!==this.u||this.R||(i.J=s,s=null),this.S)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if((t+=r)>4096){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=on(this,i,t),gt(n=ht(this.J),"RID",e),gt(n,"CVER",22),this.G&&gt(n,"X-HTTP-Session-Id",this.G),an(this,n),s&&(this.R?t="headers="+Ue(zt(s))+"&"+t:this.u&&Vt(n,this.u,s)),ot(this.h,i),this.Ra&&gt(n,"TYPE","init"),this.S?(gt(n,"$req",t),gt(n,"SID","null"),i.U=!0,Ge(i,n,null)):Ge(i,n,t),this.I=2}}else 3==this.I&&(e?sn(this,e):0==this.i.length||it(this.h)||sn(this))},e.Da=function(){if(this.v=null,dn(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var e=4*this.T;this.j.info("BP detection timer enabled: "+e),this.B=De(l(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Pe(10),tn(this),dn(this))},e.Va=function(){null!=this.C&&(this.C=null,tn(this),cn(this),Pe(19))},e.bb=function(e){e?(this.j.info("Successfully pinged google.com"),Pe(2)):(this.j.info("Failed to ping google.com"),Pe(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=wn.prototype).ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){},bn.prototype.g=function(e,t){return new xn(e,t)},u(xn,ce),xn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},xn.prototype.close=function(){en(this.g)},xn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=ye(e),e=n);t.i.push(new nt(t.Ya++,e)),3==t.I&&rn(t)},xn.prototype.N=function(){this.g.l=null,delete this.j,en(this.g),delete this.g,xn.Z.N.call(this)},u(Sn,Ae),u(An,Ee),u(En,wn),En.prototype.ra=function(){ue(this.g,"a")},En.prototype.qa=function(e){ue(this.g,new Sn(e))},En.prototype.pa=function(e){ue(this.g,new An)},En.prototype.oa=function(){ue(this.g,"b")},bn.prototype.createWebChannel=bn.prototype.g,xn.prototype.send=xn.prototype.o,xn.prototype.open=xn.prototype.m,xn.prototype.close=xn.prototype.close,w=x.createWebChannelTransport=function(){return new bn},v=x.getStatEventTarget=function(){return _e()},y=x.Event=Ne,g=x.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Fe.NO_ERROR=0,Fe.TIMEOUT=8,Fe.HTTP_ERROR=6,m=x.ErrorCode=Fe,je.COMPLETE="complete",p=x.EventType=je,xe.EventType=Se,Se.OPEN="a",Se.CLOSE="b",Se.ERROR="c",Se.MESSAGE="d",ce.prototype.listen=ce.prototype.J,f=x.WebChannel=xe,x.FetchXmlHttpFactory=Mt,Ht.prototype.listenOnce=Ht.prototype.K,Ht.prototype.getLastError=Ht.prototype.Ha,Ht.prototype.getLastErrorCode=Ht.prototype.ya,Ht.prototype.getStatus=Ht.prototype.ca,Ht.prototype.getResponseJson=Ht.prototype.La,Ht.prototype.getResponseText=Ht.prototype.la,Ht.prototype.send=Ht.prototype.ea,Ht.prototype.setWithCredentials=Ht.prototype.Fa,h=x.XhrIo=Ht}).apply("undefined"!==typeof b?b:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const S="@firebase/firestore",A="4.9.2";class E{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}E.UNAUTHENTICATED=new E(null),E.GOOGLE_CREDENTIALS=new E("google-credentials-uid"),E.FIRST_PARTY=new E("first-party-uid"),E.MOCK_USER=new E("mock-user");let N="12.3.0";const C=new l.Vy("@firebase/firestore");function _(){return C.logLevel}function T(e){if(C.logLevel<=l.$b.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(P);C.debug("Firestore (".concat(N,"): ").concat(e),...i)}}function I(e){if(C.logLevel<=l.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(P);C.error("Firestore (".concat(N,"): ").concat(e),...i)}}function k(e){if(C.logLevel<=l.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(P);C.warn("Firestore (".concat(N,"): ").concat(e),...i)}}function P(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function R(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,D(e,r,n)}function D(e,t,n){let r="FIRESTORE (".concat(N,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw I(r),new Error(r)}function O(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||D(t,i,r)}function L(e,t){return e}const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class F extends c.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class j{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class B{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class U{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(E.UNAUTHENTICATED))}shutdown(){}}class z{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class V{constructor(e){this.t=e,this.currentUser=E.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){O(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new j;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new j,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{T("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(T("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new j)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(T("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(O("string"==typeof t.accessToken,31837,{l:t}),new B(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return O(null===e||"string"==typeof e,2055,{h:e}),new E(e)}}class H{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=E.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class W{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new H(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(E.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class q{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class G{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,(0,a.xZ)(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){O(void 0===this.o,3512);const n=e=>{null!=e.error&&T("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,T("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{T("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):T("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new q(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(O("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new q(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function K(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Y{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=K(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function X(e,t){return e<t?-1:e>t?1:0}function Q(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),i=t.charAt(r);if(n!==i)return $(n)===$(i)?X(n,i):$(n)?1:-1}return X(e.length,t.length)}const J=55296,Z=57343;function $(e){const t=e.charCodeAt(0);return t>=J&&t<=Z}function ee(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}function te(e){return e+"\0"}const ne="__name__";class re{constructor(e,t,n){void 0===t?t=0:t>e.length&&R(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&R(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===re.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof re?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=re.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return X(e.length,t.length)}static compareSegments(e,t){const n=re.isNumericId(e),r=re.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?re.extractNumericId(e).compare(re.extractNumericId(t)):Q(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return r.fromString(e.substring(4,e.length-2))}}class ie extends re{construct(e,t,n){return new ie(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new F(M.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new ie(e)}static emptyPath(){return new ie([])}}const se=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ae extends re{construct(e,t,n){return new ae(e,t,n)}static isValidIdentifier(e){return se.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ae.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===ne}static keyField(){return new ae([ne])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new F(M.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new F(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new F(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new F(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ae(t)}static emptyPath(){return new ae([])}}class oe{constructor(e){this.path=e}static fromPath(e){return new oe(ie.fromString(e))}static fromName(e){return new oe(ie.fromString(e).popFirst(5))}static empty(){return new oe(ie.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ie.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ie.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new oe(new ie(e.slice()))}}function le(e,t,n){if(!n)throw new F(M.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function ce(e){if(!oe.isDocumentKey(e))throw new F(M.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function ue(e){if(oe.isDocumentKey(e))throw new F(M.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function de(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function he(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":R(12329,{type:typeof e})}function fe(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new F(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=he(e);throw new F(M.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function pe(e,t){const n={typeString:e};return t&&(n.value=t),n}function me(e,t){if(!de(e))throw new F(M.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const a=e[r];if(i&&typeof a!==i){n="JSON field '".concat(r,"' must be a ").concat(i,".");break}if(void 0!==s&&a!==s.value){n="Expected '".concat(r,"' field to equal '").concat(s.value,"'");break}}if(n)throw new F(M.INVALID_ARGUMENT,n);return!0}const ge=-62135596800,ye=1e6;class ve{static now(){return ve.fromMillis(Date.now())}static fromDate(e){return ve.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*ye);return new ve(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new F(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new F(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ge)throw new F(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new F(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ye}_compareTo(e){return this.seconds===e.seconds?X(this.nanoseconds,e.nanoseconds):X(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ve._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(me(e,ve._jsonSchema))return new ve(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ge;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ve._jsonSchemaVersion="firestore/timestamp/1.0",ve._jsonSchema={type:pe("string",ve._jsonSchemaVersion),seconds:pe("number"),nanoseconds:pe("number")};class we{static fromTimestamp(e){return new we(e)}static min(){return new we(new ve(0,0))}static max(){return new we(new ve(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const be=-1;class xe{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function Se(e){return e.fields.find(e=>2===e.kind)}function Ae(e){return e.fields.filter(e=>2!==e.kind)}xe.UNKNOWN_ID=-1;class Ee{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ne{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ne(0,Te.min())}}function Ce(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=we.fromTimestamp(1e9===r?new ve(n+1,0):new ve(n,r));return new Te(i,oe.empty(),t)}function _e(e){return new Te(e.readTime,e.key,be)}class Te{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Te(we.min(),oe.empty(),be)}static max(){return new Te(we.max(),oe.empty(),be)}}function Ie(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=oe.comparator(e.documentKey,t.documentKey),0!==n?n:X(e.largestBatchId,t.largestBatchId))}const ke="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Pe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Re(e){if(e.code!==M.FAILED_PRECONDITION||e.message!==ke)throw e;T("LocalStore","Unexpectedly lost primary lease")}class De{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&R(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new De((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof De?t:De.resolve(t)}catch(e){return De.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):De.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):De.reject(t)}static resolve(e){return new De((t,n)=>{t(e)})}static reject(e){return new De((t,n)=>{n(e)})}static waitFor(e){return new De((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=De.resolve(!1);for(const n of e)t=t.next(e=>e?De.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new De((n,r)=>{const i=e.length,s=new Array(i);let a=0;for(let o=0;o<i;o++){const l=o;t(e[l]).next(e=>{s[l]=e,++a,a===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new De((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}const Oe="SimpleDb";class Le{static open(e,t,n,r){try{return new Le(t,e.transaction(r,n))}catch(e){throw new Be(t,e)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new j,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Be(e,t.error)):this.S.resolve()},this.transaction.onerror=t=>{const n=We(t.target.error);this.S.reject(new Be(e,n))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(T(Oe,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new ze(t)}}class Me{static delete(e){return T(Oe,"Removing database:",e),Ve((0,c.mS)().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!(0,c.zW)())return!1;if(Me.F())return!0;const e=(0,c.ZQ)(),t=Me.M(e),n=0<t&&t<10,r=Fe(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static F(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(e,t,n){this.name=e,this.version=t,this.N=n,this.B=null,12.2===Me.M((0,c.ZQ)())&&I("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(T(Oe,"Opening database:",this.name),this.db=await new Promise((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new Be(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new F(M.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new F(M.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new Be(e,r))},r.onupgradeneeded=e=>{T(Oe,'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.N.k(t,r.transaction,e.oldVersion,this.version).next(()=>{T(Oe,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=e=>this.q(e)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.L(e);const t=Le.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next(e=>(t.C(),e)).catch(e=>(t.abort(e),De.reject(e))).toPromise();return s.catch(()=>{}),await t.D,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(T(Oe,"Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Fe(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class je{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Ve(this.U.delete())}}class Be extends F{constructor(e,t){super(M.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function Ue(e){return"IndexedDbTransactionError"===e.name}class ze{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(T(Oe,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(T(Oe,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Ve(n)}add(e){return T(Oe,"ADD",this.store.name,e,e),Ve(this.store.add(e))}get(e){return Ve(this.store.get(e)).next(t=>(void 0===t&&(t=null),T(Oe,"GET",this.store.name,e,t),t))}delete(e){return T(Oe,"DELETE",this.store.name,e),Ve(this.store.delete(e))}count(){return T(Oe,"COUNT",this.store.name),Ve(this.store.count())}J(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new De((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}})}{const e=this.cursor(n),t=[];return this.H(e,(e,n)=>{t.push(n)}).next(()=>t)}}Y(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new De((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}})}Z(e,t){T(Oe,"DELETE ALL",this.store.name);const n=this.options(e,t);n.X=!1;const r=this.cursor(n);return this.H(r,(e,t,n)=>n.delete())}ee(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.H(r,t)}te(e){const t=this.cursor({});return new De((n,r)=>{t.onerror=e=>{const t=We(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next(e=>{e?r.continue():n()}):n()}})}H(e,t){const n=[];return new De((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new je(i),a=t(i.primaryKey,i.value,s);if(a instanceof De){const e=a.catch(e=>(s.done(),De.reject(e)));n.push(e)}s.isDone?r():null===s.G?i.continue():i.continue(s.G)}}).next(()=>De.waitFor(n))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ve(e){return new De((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=We(e.target.error);n(t)}})}let He=!1;function We(e){const t=Me.M((0,c.ZQ)());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new F("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return He||(He=!0,setTimeout(()=>{throw e},0)),e}}return e}const qe="IndexBackfiller";class Ge{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}re(e){T(qe,"Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const e=await this.ne.ie();T(qe,"Documents written: ".concat(e))}catch(e){Ue(e)?T(qe,"Ignoring IndexedDB error during index backfill: ",e):await Re(e)}await this.re(6e4)})}}class Ke{constructor(e,t){this.localStore=e,this.persistence=t}async ie(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.se(t,e))}se(e,t){const n=new Set;let r=t,i=!0;return De.doWhile(()=>!0===i&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(t=>{if(null!==t&&!n.has(t))return T(qe,"Processing collection: ".concat(t)),this.oe(e,t,r).next(e=>{r-=e,n.add(t)});i=!1})).next(()=>t-r)}oe(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next(n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next(()=>this._e(r,n)).next(n=>(T(qe,"Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n))).next(()=>i.size)}))}_e(e,t){let n=e;return t.changes.forEach((e,t)=>{const r=_e(t);Ie(r,n)>0&&(n=r)}),new Te(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Ye{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ye.ce=-1;const Xe=-1;function Qe(e){return null==e}function Je(e){return 0===e&&1/e==-1/0}function Ze(e){return"number"==typeof e&&Number.isInteger(e)&&!Je(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const $e="\x01";function et(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=nt(t)),t=tt(e.get(n),t);return nt(t)}function tt(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case $e:n+="\x01\x11";break;default:n+=t}}return n}function nt(e){return e+$e+"\x01"}function rt(e){const t=e.length;if(O(t>=2,64408,{path:e}),2===t)return O(e.charAt(0)===$e&&"\x01"===e.charAt(1),56145,{path:e}),ie.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf($e,s);switch((t<0||t>n)&&R(50515,{path:e}),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let a;0===i.length?a=n:(i+=n,a=i,i=""),r.push(a);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:R(61167,{path:e})}s=t+2}return new ie(r)}const it="remoteDocuments",st="owner",at="owner",ot="mutationQueues",lt="mutations",ct="batchId",ut="userMutationsIndex",dt=["userId","batchId"];function ht(e,t){return[e,et(t)]}function ft(e,t,n){return[e,et(t),n]}const pt={},mt="documentMutations",gt="remoteDocumentsV14",yt=["prefixPath","collectionGroup","readTime","documentId"],vt="documentKeyIndex",wt=["prefixPath","collectionGroup","documentId"],bt="collectionGroupIndex",xt=["collectionGroup","readTime","prefixPath","documentId"],St="remoteDocumentGlobal",At="remoteDocumentGlobalKey",Et="targets",Nt="queryTargetsIndex",Ct=["canonicalId","targetId"],_t="targetDocuments",Tt=["targetId","path"],It="documentTargetsIndex",kt=["path","targetId"],Pt="targetGlobalKey",Rt="targetGlobal",Dt="collectionParents",Ot=["collectionId","parent"],Lt="clientMetadata",Mt="bundles",Ft="namedQueries",jt="indexConfiguration",Bt="collectionGroupIndex",Ut="indexState",zt=["indexId","uid"],Vt="sequenceNumberIndex",Ht=["uid","sequenceNumber"],Wt="indexEntries",qt=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Gt="documentKeyIndex",Kt=["indexId","uid","orderedDocumentKey"],Yt="documentOverlays",Xt=["userId","collectionPath","documentId"],Qt="collectionPathOverlayIndex",Jt=["userId","collectionPath","largestBatchId"],Zt="collectionGroupOverlayIndex",$t=["userId","collectionGroup","largestBatchId"],en="globals",tn=[ot,lt,mt,it,Et,st,Rt,_t,Lt,St,Dt,Mt,Ft],nn=[...tn,Yt],rn=[ot,lt,mt,gt,Et,st,Rt,_t,Lt,St,Dt,Mt,Ft,Yt],sn=rn,an=[...sn,jt,Ut,Wt],on=an,ln=[...an,en],cn=ln;class un extends Pe{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function dn(e,t){const n=L(e);return Me.O(n.le,t)}function hn(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function fn(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function pn(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class mn{constructor(e,t){this.comparator=e,this.root=t||yn.EMPTY}insert(e,t){return new mn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,yn.BLACK,null,null))}remove(e){return new mn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new gn(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new gn(this.root,e,this.comparator,!1)}getReverseIterator(){return new gn(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new gn(this.root,e,this.comparator,!0)}}class gn{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yn{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:yn.RED,this.left=null!=r?r:yn.EMPTY,this.right=null!=i?i:yn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new yn(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return yn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return yn.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw R(43730,{key:this.key,value:this.value});if(this.right.isRed())throw R(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw R(27949);return e+(this.isRed()?0:1)}}yn.EMPTY=null,yn.RED=!0,yn.BLACK=!1,yn.EMPTY=new class{constructor(){this.size=0}get key(){throw R(57766)}get value(){throw R(16141)}get color(){throw R(16727)}get left(){throw R(29726)}get right(){throw R(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new yn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class vn{constructor(e){this.comparator=e,this.data=new mn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new wn(this.data.getIterator())}getIteratorFrom(e){return new wn(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof vn))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new vn(this.comparator);return t.data=e,t}}class wn{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function bn(e){return e.hasNext()?e.getNext():void 0}class xn{constructor(e){this.fields=e,e.sort(ae.comparator)}static empty(){return new xn([])}unionWith(e){let t=new vn(ae.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new xn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ee(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Sn extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class An{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Sn("Invalid base64 string: "+e):e}}(e);return new An(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new An(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return X(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}An.EMPTY_BYTE_STRING=new An("");const En=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nn(e){if(O(!!e,39018),"string"==typeof e){let t=0;const n=En.exec(e);if(O(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Cn(e.seconds),nanos:Cn(e.nanos)}}function Cn(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function _n(e){return"string"==typeof e?An.fromBase64String(e):An.fromUint8Array(e)}const Tn="server_timestamp",In="__type__",kn="__previous_value__",Pn="__local_write_time__";function Rn(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[In])||void 0===t?void 0:t.stringValue)===Tn}function Dn(e){const t=e.mapValue.fields[kn];return Rn(t)?Dn(t):t}function On(e){const t=Nn(e.mapValue.fields[Pn].timestampValue);return new ve(t.seconds,t.nanos)}class Ln{constructor(e,t,n,r,i,s,a,o,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l,this.isUsingEmulator=c}}const Mn="(default)";class Fn{constructor(e,t){this.projectId=e,this.database=t||Mn}static empty(){return new Fn("","")}get isDefaultDatabase(){return this.database===Mn}isEqual(e){return e instanceof Fn&&e.projectId===this.projectId&&e.database===this.database}}const jn="__type__",Bn="__max__",Un={mapValue:{fields:{__type__:{stringValue:Bn}}}},zn="__vector__",Vn="value",Hn={nullValue:"NULL_VALUE"};function Wn(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Rn(e)?4:or(e)?9007199254740991:sr(e)?10:11:R(28295,{value:e})}function qn(e,t){if(e===t)return!0;const n=Wn(e);if(n!==Wn(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return On(e).isEqual(On(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Nn(e.timestampValue),r=Nn(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return _n(e.bytesValue).isEqual(_n(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Cn(e.geoPointValue.latitude)===Cn(t.geoPointValue.latitude)&&Cn(e.geoPointValue.longitude)===Cn(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Cn(e.integerValue)===Cn(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Cn(e.doubleValue),r=Cn(t.doubleValue);return n===r?Je(n)===Je(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ee(e.arrayValue.values||[],t.arrayValue.values||[],qn);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(hn(n)!==hn(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!qn(n[i],r[i])))return!1;return!0}(e,t);default:return R(52216,{left:e})}}function Gn(e,t){return void 0!==(e.values||[]).find(e=>qn(e,t))}function Kn(e,t){if(e===t)return 0;const n=Wn(e),r=Wn(t);if(n!==r)return X(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return X(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Cn(e.integerValue||e.doubleValue),r=Cn(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Yn(e.timestampValue,t.timestampValue);case 4:return Yn(On(e),On(t));case 5:return Q(e.stringValue,t.stringValue);case 6:return function(e,t){const n=_n(e),r=_n(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=X(n[i],r[i]);if(0!==e)return e}return X(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=X(Cn(e.latitude),Cn(t.latitude));return 0!==n?n:X(Cn(e.longitude),Cn(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Xn(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const a=e.fields||{},o=t.fields||{},l=null===(n=a[Vn])||void 0===n?void 0:n.arrayValue,c=null===(r=o[Vn])||void 0===r?void 0:r.arrayValue,u=X((null===l||void 0===l||null===(i=l.values)||void 0===i?void 0:i.length)||0,(null===c||void 0===c||null===(s=c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:Xn(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Un.mapValue&&t===Un.mapValue)return 0;if(e===Un.mapValue)return 1;if(t===Un.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let a=0;a<r.length&&a<s.length;++a){const e=Q(r[a],s[a]);if(0!==e)return e;const t=Kn(n[r[a]],i[s[a]]);if(0!==t)return t}return X(r.length,s.length)}(e.mapValue,t.mapValue);default:throw R(23264,{he:n})}}function Yn(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return X(e,t);const n=Nn(e),r=Nn(t),i=X(n.seconds,r.seconds);return 0!==i?i:X(n.nanos,r.nanos)}function Xn(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Kn(n[i],r[i]);if(e)return e}return X(n.length,r.length)}function Qn(e){return Jn(e)}function Jn(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Nn(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return _n(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return oe.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Jn(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Jn(e.fields[i]));return n+"}"}(e.mapValue):R(61005,{value:e})}function Zn(e){switch(Wn(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Dn(e);return t?16+Zn(t):16;case 5:return 2*e.stringValue.length;case 6:return _n(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+Zn(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return fn(e.fields,(e,n)=>{t+=e.length+Zn(n)}),t}(e.mapValue);default:throw R(13486,{value:e})}}function $n(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function er(e){return!!e&&"integerValue"in e}function tr(e){return!!e&&"arrayValue"in e}function nr(e){return!!e&&"nullValue"in e}function rr(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ir(e){return!!e&&"mapValue"in e}function sr(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[jn])||void 0===t?void 0:t.stringValue)===zn}function ar(e){if(e.geoPointValue)return{geoPointValue:(0,s.A)({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:(0,s.A)({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return fn(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=ar(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ar(e.arrayValue.values[n]);return t}return(0,s.A)({},e)}function or(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Bn}const lr={mapValue:{fields:{[jn]:{stringValue:zn},[Vn]:{arrayValue:{}}}}};function cr(e){return"nullValue"in e?Hn:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?$n(Fn.empty(),oe.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?sr(e)?lr:{mapValue:{}}:R(35942,{value:e})}function ur(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?$n(Fn.empty(),oe.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?lr:"mapValue"in e?sr(e)?{mapValue:{}}:Un:R(61959,{value:e})}function dr(e,t){const n=Kn(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function hr(e,t){const n=Kn(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class fr{constructor(e){this.value=e}static empty(){return new fr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!ir(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ar(t)}setAll(e){let t=ae.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=ar(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());ir(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return qn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];ir(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){fn(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new fr(ar(this.value))}}function pr(e){const t=[];return fn(e.fields,(e,n)=>{const r=new ae([e]);if(ir(n)){const e=pr(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new xn(t)}class mr{constructor(e,t,n,r,i,s,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=a}static newInvalidDocument(e){return new mr(e,0,we.min(),we.min(),we.min(),fr.empty(),0)}static newFoundDocument(e,t,n,r){return new mr(e,1,t,we.min(),n,r,0)}static newNoDocument(e,t){return new mr(e,2,t,we.min(),we.min(),fr.empty(),0)}static newUnknownDocument(e,t){return new mr(e,3,t,we.min(),we.min(),fr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(we.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof mr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class gr{constructor(e,t){this.position=e,this.inclusive=t}}function yr(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],a=e.position[i];if(r=s.field.isKeyField()?oe.comparator(oe.fromName(a.referenceValue),n.key):Kn(a,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function vr(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!qn(e.position[n],t.position[n]))return!1;return!0}class wr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function br(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class xr{}class Sr extends xr{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Rr(e,t,n):"array-contains"===t?new Mr(e,n):"in"===t?new Fr(e,n):"not-in"===t?new jr(e,n):"array-contains-any"===t?new Br(e,n):new Sr(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Dr(e,n):new Or(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(Kn(t,this.value)):null!==t&&Wn(this.value)===Wn(t)&&this.matchesComparison(Kn(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return R(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ar extends xr{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ar(e,t)}matches(e){return Er(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Er(e){return"and"===e.op}function Nr(e){return"or"===e.op}function Cr(e){return _r(e)&&Er(e)}function _r(e){for(const t of e.filters)if(t instanceof Ar)return!1;return!0}function Tr(e){if(e instanceof Sr)return e.field.canonicalString()+e.op.toString()+Qn(e.value);if(Cr(e))return e.filters.map(e=>Tr(e)).join(",");{const t=e.filters.map(e=>Tr(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function Ir(e,t){return e instanceof Sr?function(e,t){return t instanceof Sr&&e.op===t.op&&e.field.isEqual(t.field)&&qn(e.value,t.value)}(e,t):e instanceof Ar?function(e,t){return t instanceof Ar&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Ir(n,t.filters[r]),!0)}(e,t):void R(19439)}function kr(e,t){const n=e.filters.concat(t);return Ar.create(n,e.op)}function Pr(e){return e instanceof Sr?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Qn(e.value))}(e):e instanceof Ar?function(e){return e.op.toString()+" {"+e.getFilters().map(Pr).join(" ,")+"}"}(e):"Filter"}class Rr extends Sr{constructor(e,t,n){super(e,t,n),this.key=oe.fromName(n.referenceValue)}matches(e){const t=oe.comparator(e.key,this.key);return this.matchesComparison(t)}}class Dr extends Sr{constructor(e,t){super(e,"in",t),this.keys=Lr("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Or extends Sr{constructor(e,t){super(e,"not-in",t),this.keys=Lr("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Lr(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>oe.fromName(e.referenceValue))}class Mr extends Sr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return tr(t)&&Gn(t.arrayValue,this.value)}}class Fr extends Sr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Gn(this.value.arrayValue,t)}}class jr extends Sr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Gn(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Gn(this.value.arrayValue,t)}}class Br extends Sr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!tr(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Gn(this.value.arrayValue,e))}}class Ur{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=a,this.Te=null}}function zr(e){return new Ur(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Vr(e){const t=L(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Tr(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Qe(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Qn(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Qn(e)).join(",")),t.Te=e}return t.Te}function Hr(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!br(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Ir(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!vr(e.startAt,t.startAt)&&vr(e.endAt,t.endAt)}function Wr(e){return oe.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function qr(e,t){return e.filters.filter(e=>e instanceof Sr&&e.field.isEqual(t))}function Gr(e,t,n){let r=Hn,i=!0;for(const s of qr(e,t)){let e=Hn,t=!0;switch(s.op){case"<":case"<=":e=cr(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=Hn}dr({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];dr({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function Kr(e,t,n){let r=Un,i=!0;for(const s of qr(e,t)){let e=Un,t=!0;switch(s.op){case">=":case">":e=ur(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=Un}hr({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];hr({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class Yr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=o,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Xr(e,t,n,r,i,s,a,o){return new Yr(e,t,n,r,i,s,a,o)}function Qr(e){return new Yr(e)}function Jr(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Zr(e){return null!==e.collectionGroup}function $r(e){const t=L(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new vn(ae.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new wr(r,n))}),e.has(ae.keyField().canonicalString())||t.Ie.push(new wr(ae.keyField(),n))}return t.Ie}function ei(e){const t=L(e);return t.Ee||(t.Ee=ti(t,$r(e))),t.Ee}function ti(e,t){if("F"===e.limitType)return zr(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new wr(e.field,t)});const n=e.endAt?new gr(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new gr(e.startAt.position,e.startAt.inclusive):null;return zr(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function ni(e,t){const n=e.filters.concat([t]);return new Yr(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function ri(e,t,n){return new Yr(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ii(e,t){return Hr(ei(e),ei(t))&&e.limitType===t.limitType}function si(e){return"".concat(Vr(ei(e)),"|lt:").concat(e.limitType)}function ai(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>Pr(e)).join(", "),"]")),Qe(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Qn(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Qn(e)).join(",")),"Target(".concat(t,")")}(ei(e)),"; limitType=").concat(e.limitType,")")}function oi(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):oe.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of $r(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=yr(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,$r(e),t))&&!(e.endAt&&!function(e,t,n){const r=yr(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,$r(e),t))}(e,t)}function li(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function ci(e){return(t,n)=>{let r=!1;for(const i of $r(e)){const e=ui(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function ui(e,t,n){const r=e.field.isKeyField()?oe.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Kn(r,i):R(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return R(19790,{direction:e.dir})}}class di{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){fn(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return pn(this.inner)}size(){return this.innerSize}}const hi=new mn(oe.comparator);function fi(){return hi}const pi=new mn(oe.comparator);function mi(){let e=pi;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function gi(e){let t=pi;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function yi(){return wi()}function vi(){return wi()}function wi(){return new di(e=>e.toString(),(e,t)=>e.isEqual(t))}const bi=new mn(oe.comparator),xi=new vn(oe.comparator);function Si(){let e=xi;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Ai=new vn(X);function Ei(){return Ai}function Ni(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Je(t)?"-0":t}}function Ci(e){return{integerValue:""+e}}function _i(e,t){return Ze(t)?Ci(t):Ni(e,t)}class Ti{constructor(){this._=void 0}}function Ii(e,t,n){return e instanceof Ri?function(e,t){const n={fields:{[In]:{stringValue:Tn},[Pn]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Rn(t)&&(t=Dn(t)),t&&(n.fields[kn]=t),{mapValue:n}}(n,t):e instanceof Di?Oi(e,t):e instanceof Li?Mi(e,t):function(e,t){const n=Pi(e,t),r=ji(n)+ji(e.Ae);return er(n)&&er(e.Ae)?Ci(r):Ni(e.serializer,r)}(e,t)}function ki(e,t,n){return e instanceof Di?Oi(e,t):e instanceof Li?Mi(e,t):n}function Pi(e,t){return e instanceof Fi?function(e){return er(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Ri extends Ti{}class Di extends Ti{constructor(e){super(),this.elements=e}}function Oi(e,t){const n=Bi(t);for(const r of e.elements)n.some(e=>qn(e,r))||n.push(r);return{arrayValue:{values:n}}}class Li extends Ti{constructor(e){super(),this.elements=e}}function Mi(e,t){let n=Bi(t);for(const r of e.elements)n=n.filter(e=>!qn(e,r));return{arrayValue:{values:n}}}class Fi extends Ti{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function ji(e){return Cn(e.integerValue||e.doubleValue)}function Bi(e){return tr(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Ui{constructor(e,t){this.field=e,this.transform=t}}class zi{constructor(e,t){this.version=e,this.transformResults=t}}class Vi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Vi}static exists(e){return new Vi(void 0,e)}static updateTime(e){return new Vi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Hi(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Wi{}function qi(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new ts(e.key,Vi.none()):new Qi(e.key,e.data,Vi.none());{const n=e.data,r=fr.empty();let i=new vn(ae.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Ji(e.key,r,new xn(i.toArray()),Vi.none())}}function Gi(e,t,n){e instanceof Qi?function(e,t,n){const r=e.value.clone(),i=$i(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Ji?function(e,t,n){if(!Hi(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=$i(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Zi(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Ki(e,t,n,r){return e instanceof Qi?function(e,t,n,r){if(!Hi(e.precondition,t))return n;const i=e.value.clone(),s=es(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Ji?function(e,t,n,r){if(!Hi(e.precondition,t))return n;const i=es(e.fieldTransforms,r,t),s=t.data;return s.setAll(Zi(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Hi(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Yi(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Pi(r.transform,e||null);null!=i&&(null===n&&(n=fr.empty()),n.set(r.field,i))}return n||null}function Xi(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&ee(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Di&&t instanceof Di||e instanceof Li&&t instanceof Li?ee(e.elements,t.elements,qn):e instanceof Fi&&t instanceof Fi?qn(e.Ae,t.Ae):e instanceof Ri&&t instanceof Ri}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Qi extends Wi{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Ji extends Wi{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Zi(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function $i(e,t,n){const r=new Map;O(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){const s=e[i],a=s.transform,o=t.data.field(s.field);r.set(s.field,ki(a,o,n[i]))}return r}function es(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Ii(e,s,t))}return r}class ts extends Wi{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ns extends Wi{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class rs{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Gi(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Ki(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Ki(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=vi();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let a=this.applyToLocalView(s,i.mutatedFields);a=t.has(r.key)?null:a;const o=qi(s,a);null!==o&&n.set(r.key,o),s.isValidDocument()||s.convertToNoDocument(we.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Si())}isEqual(e){return this.batchId===e.batchId&&ee(this.mutations,e.mutations,(e,t)=>Xi(e,t))&&ee(this.baseMutations,e.baseMutations,(e,t)=>Xi(e,t))}}class is{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){O(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=bi;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new is(e,t,n,r)}}class ss{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class as{constructor(e,t){this.count=e,this.unchangedNames=t}}var os,ls;function cs(e){switch(e){case M.OK:return R(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return R(15467,{code:e})}}function us(e){if(void 0===e)return I("GRPC error has no .code"),M.UNKNOWN;switch(e){case os.OK:return M.OK;case os.CANCELLED:return M.CANCELLED;case os.UNKNOWN:return M.UNKNOWN;case os.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case os.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case os.INTERNAL:return M.INTERNAL;case os.UNAVAILABLE:return M.UNAVAILABLE;case os.UNAUTHENTICATED:return M.UNAUTHENTICATED;case os.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case os.NOT_FOUND:return M.NOT_FOUND;case os.ALREADY_EXISTS:return M.ALREADY_EXISTS;case os.PERMISSION_DENIED:return M.PERMISSION_DENIED;case os.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case os.ABORTED:return M.ABORTED;case os.OUT_OF_RANGE:return M.OUT_OF_RANGE;case os.UNIMPLEMENTED:return M.UNIMPLEMENTED;case os.DATA_LOSS:return M.DATA_LOSS;default:return R(39323,{code:e})}}(ls=os||(os={}))[ls.OK=0]="OK",ls[ls.CANCELLED=1]="CANCELLED",ls[ls.UNKNOWN=2]="UNKNOWN",ls[ls.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ls[ls.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ls[ls.NOT_FOUND=5]="NOT_FOUND",ls[ls.ALREADY_EXISTS=6]="ALREADY_EXISTS",ls[ls.PERMISSION_DENIED=7]="PERMISSION_DENIED",ls[ls.UNAUTHENTICATED=16]="UNAUTHENTICATED",ls[ls.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ls[ls.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ls[ls.ABORTED=10]="ABORTED",ls[ls.OUT_OF_RANGE=11]="OUT_OF_RANGE",ls[ls.UNIMPLEMENTED=12]="UNIMPLEMENTED",ls[ls.INTERNAL=13]="INTERNAL",ls[ls.UNAVAILABLE=14]="UNAVAILABLE",ls[ls.DATA_LOSS=15]="DATA_LOSS";let ds=null;function hs(){return new TextEncoder}const fs=new r([4294967295,4294967295],0);function ps(e){const t=hs().encode(e),n=new i;return n.update(t),new Uint8Array(n.digest())}function ms(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),s=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new r([n,i],0),new r([s,a],0)]}class gs{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new ys("Invalid padding: ".concat(t));if(n<0)throw new ys("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new ys("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new ys("Invalid padding when bitmap length is 0: ".concat(t));this.ge=8*e.length-t,this.pe=r.fromNumber(this.ge)}ye(e,t,n){let i=e.add(t.multiply(r.fromNumber(n)));return 1===i.compare(fs)&&(i=new r([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=ps(e),[n,r]=ms(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new gs(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.ge)return;const t=ps(e),[n,r]=ms(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class ys extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class vs{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,ws.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new vs(we.min(),r,new mn(X),fi(),Si())}}class ws{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new ws(n,t,Si(),Si(),Si())}}class bs{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class xs{constructor(e,t){this.targetId=e,this.Ce=t}}class Ss{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:An.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class As{constructor(){this.ve=0,this.Fe=Cs(),this.Me=An.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Si(),t=Si(),n=Si();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:R(38017,{changeType:i})}}),new ws(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=Cs()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,O(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Es{constructor(e){this.Ge=e,this.ze=new Map,this.je=fi(),this.Je=Ns(),this.He=Ns(),this.Ye=new mn(X)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:R(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const s=r.target;if(Wr(s))if(0===n){const e=new oe(s.path);this.et(t,e,mr.newNoDocument(e,we.min()))}else O(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){var i;const n=this.ut(e),s=n?this.ct(n,e,r):1;if(0!==s){this.it(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}null===(i=ds)||void 0===i||i.lt(function(e,t,n,r,i){var s,a,o,l,c;const u={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(u.bloomFilter={applied:0===i,hashCount:null!==(s=null===d||void 0===d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(a=null===d||void 0===d||null===(o=d.bits)||void 0===o||null===(o=o.bitmap)||void 0===o?void 0:o.length)&&void 0!==a?a:0,padding:null!==(l=null===d||void 0===d||null===(c=d.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:e=>{var t;return null!==(t=null===r||void 0===r?void 0:r.mightContain(e))&&void 0!==t&&t}}),u}(r,e.Ce,this.Ge.ht(),n,s))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,a;try{s=_n(n).toUint8Array()}catch(e){if(e instanceof Sn)return k("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new gs(s,r,i)}catch(e){return k(e instanceof ys?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.ge?null:a}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Ge.ht(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const i=this.ot(r);if(i){if(n.current&&Wr(i.target)){const t=new oe(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,mr.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}});let n=Si();this.He.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new vs(e,t,this.Ye,this.je,n);return this.je=fi(),this.Je=Ns(),this.He=Ns(),this.Ye=new mn(X),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new As,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new vn(X),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new vn(X),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||T("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new As),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Ns(){return new mn(oe.comparator)}function Cs(){return new mn(oe.comparator)}const _s={asc:"ASCENDING",desc:"DESCENDING"},Ts={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Is={and:"AND",or:"OR"};class ks{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ps(e,t){return e.useProto3Json||Qe(t)?t:{value:t}}function Rs(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ds(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Os(e,t){return Rs(e,t.toTimestamp())}function Ls(e){return O(!!e,49232),we.fromTimestamp(function(e){const t=Nn(e);return new ve(t.seconds,t.nanos)}(e))}function Ms(e,t){return Fs(e,t).canonicalString()}function Fs(e,t){const n=function(e){return new ie(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function js(e){const t=ie.fromString(e);return O(aa(t),10190,{key:t.toString()}),t}function Bs(e,t){return Ms(e.databaseId,t.path)}function Us(e,t){const n=js(t);if(n.get(1)!==e.databaseId.projectId)throw new F(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new F(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new oe(Ws(n))}function zs(e,t){return Ms(e.databaseId,t)}function Vs(e){const t=js(e);return 4===t.length?ie.emptyPath():Ws(t)}function Hs(e){return new ie(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ws(e){return O(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function qs(e,t,n){return{name:Bs(e,t),fields:n.value.mapValue.fields}}function Gs(e,t,n){const r=Us(e,t.name),i=Ls(t.updateTime),s=t.createTime?Ls(t.createTime):we.min(),a=new fr({mapValue:{fields:t.fields}}),o=mr.newFoundDocument(r,i,s,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Ks(e,t){let n;if(t instanceof Qi)n={update:qs(e,t.key,t.value)};else if(t instanceof ts)n={delete:Bs(e,t.key)};else if(t instanceof Ji)n={update:qs(e,t.key,t.data),updateMask:sa(t.fieldMask)};else{if(!(t instanceof ns))return R(16599,{Vt:t.type});n={verify:Bs(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Ri)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Di)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Li)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Fi)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw R(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Os(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:R(27497)}(e,t.precondition)),n}function Ys(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Vi.updateTime(Ls(e.updateTime)):void 0!==e.exists?Vi.exists(e.exists):Vi.none()}(t.currentDocument):Vi.none(),r=t.updateTransforms?t.updateTransforms.map(t=>function(e,t){let n=null;if("setToServerValue"in t)O("REQUEST_TIME"===t.setToServerValue,16630,{proto:t}),n=new Ri;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new Di(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new Li(e)}else"increment"in t?n=new Fi(e,t.increment):R(16584,{proto:t});const r=ae.fromServerFormat(t.fieldPath);return new Ui(r,n)}(e,t)):[];if(t.update){t.update.name;const i=Us(e,t.update.name),s=new fr({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new xn(t.map(e=>ae.fromServerFormat(e)))}(t.updateMask);return new Ji(i,s,e,n,r)}return new Qi(i,s,n,r)}if(t.delete){const r=Us(e,t.delete);return new ts(r,n)}if(t.verify){const r=Us(e,t.verify);return new ns(r,n)}return R(1463,{proto:t})}function Xs(e,t){return{documents:[zs(e,t.path)]}}function Qs(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=zs(e,i);const s=function(e){if(0!==e.length)return ia(Ar.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:na(e.field),direction:$s(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=Ps(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function Js(e){let t=Vs(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){O(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Zs(e);return t instanceof Ar&&Cr(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new wr(ra(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,Qe(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new gr(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new gr(n,t)}(n.endAt)),Xr(t,i,a,s,o,"F",l,c)}function Zs(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=ra(e.unaryFilter.field);return Sr.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=ra(e.unaryFilter.field);return Sr.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ra(e.unaryFilter.field);return Sr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=ra(e.unaryFilter.field);return Sr.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return R(61313);default:return R(60726)}}(e):void 0!==e.fieldFilter?function(e){return Sr.create(ra(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return R(58110);default:return R(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Ar.create(e.compositeFilter.filters.map(e=>Zs(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return R(1026)}}(e.compositeFilter.op))}(e):R(30097,{filter:e})}function $s(e){return _s[e]}function ea(e){return Ts[e]}function ta(e){return Is[e]}function na(e){return{fieldPath:e.canonicalString()}}function ra(e){return ae.fromServerFormat(e.fieldPath)}function ia(e){return e instanceof Sr?function(e){if("=="===e.op){if(rr(e.value))return{unaryFilter:{field:na(e.field),op:"IS_NAN"}};if(nr(e.value))return{unaryFilter:{field:na(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(rr(e.value))return{unaryFilter:{field:na(e.field),op:"IS_NOT_NAN"}};if(nr(e.value))return{unaryFilter:{field:na(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:na(e.field),op:ea(e.op),value:e.value}}}(e):e instanceof Ar?function(e){const t=e.getFilters().map(e=>ia(e));return 1===t.length?t[0]:{compositeFilter:{op:ta(e.op),filters:t}}}(e):R(54877,{filter:e})}function sa(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function aa(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class oa{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:we.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:we.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:An.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new oa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new oa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new oa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new oa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class la{constructor(e){this.yt=e}}function ca(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:ua(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Bs(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Rs(e,t.version.toTimestamp()),createTime:Rs(e,t.createTime.toTimestamp())}}(e.yt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:da(t.version)};else{if(!t.isUnknownDocument())return R(57904,{document:t});r.unknownDocument={path:n.path.toArray(),version:da(t.version)}}return r}function ua(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function da(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function ha(e){const t=new ve(e.seconds,e.nanoseconds);return we.fromTimestamp(t)}function fa(e,t){const n=(t.baseMutations||[]).map(t=>Ys(e.yt,t));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map(t=>Ys(e.yt,t)),i=ve.fromMillis(t.localWriteTimeMs);return new rs(t.batchId,i,n,r)}function pa(e){const t=ha(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?ha(e.lastLimboFreeSnapshotVersion):we.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){const t=e.documents.length;return O(1===t,1966,{count:t}),ei(Qr(Vs(e.documents[0])))}(e.query):function(e){return ei(Js(e))}(e.query),new oa(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,An.fromBase64String(e.resumeToken))}function ma(e,t){const n=da(t.snapshotVersion),r=da(t.lastLimboFreeSnapshotVersion);let i;i=Wr(t.target)?Xs(e.yt,t.target):Qs(e.yt,t.target).ft;const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Vr(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function ga(e){const t=Js({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?ri(t,t.limit,"L"):t}function ya(e,t){return new ss(t.largestBatchId,Ys(e.yt,t.overlayMutation))}function va(e,t){const n=t.path.lastSegment();return[e,et(t.path.popLast()),n]}function wa(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:da(r.readTime),documentKey:et(r.documentKey.path),largestBatchId:r.largestBatchId}}class ba{getBundleMetadata(e,t){return xa(e).get(t).next(e=>{if(e)return function(e){return{id:e.bundleId,createTime:ha(e.createTime),version:e.version}}(e)})}saveBundleMetadata(e,t){return xa(e).put(function(e){return{bundleId:e.id,createTime:da(Ls(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return Sa(e).get(t).next(e=>{if(e)return function(e){return{name:e.name,query:ga(e.bundledQuery),readTime:ha(e.readTime)}}(e)})}saveNamedQuery(e,t){return Sa(e).put(function(e){return{name:e.name,readTime:da(Ls(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function xa(e){return dn(e,Mt)}function Sa(e){return dn(e,Ft)}class Aa{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const n=t.uid||"";return new Aa(e,n)}getOverlay(e,t){return Ea(e).get(va(this.userId,t)).next(e=>e?ya(this.serializer,e):null)}getOverlays(e,t){const n=yi();return De.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){const r=[];return n.forEach((n,i)=>{const s=new ss(t,i);r.push(this.St(e,s))}),De.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach(e=>r.add(et(e.getCollectionPath())));const i=[];return r.forEach(t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(Ea(e).Z(Qt,r))}),De.waitFor(i)}getOverlaysForCollection(e,t,n){const r=yi(),i=et(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Ea(e).J(Qt,s).next(e=>{for(const t of e){const e=ya(this.serializer,t);r.set(e.getKey(),e)}return r})}getOverlaysForCollectionGroup(e,t,n,r){const i=yi();let s;const a=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ea(e).ee({index:Zt,range:a},(e,t,n)=>{const a=ya(this.serializer,t);i.size()<r||a.largestBatchId===s?(i.set(a.getKey(),a),s=a.largestBatchId):n.done()}).next(()=>i)}St(e,t){return Ea(e).put(function(e,t,n){const[r,i,s]=va(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Ks(e.yt,n.mutation)}}(this.serializer,this.userId,t))}}function Ea(e){return dn(e,Yt)}class Na{bt(e){return dn(e,en)}getSessionToken(e){return this.bt(e).get("sessionToken").next(e=>{const t=null===e||void 0===e?void 0:e.value;return t?An.fromUint8Array(t):An.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class Ca{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Cn(e.integerValue));else if("doubleValue"in e){const n=Cn(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),Je(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=Nn(n)),t.xt("".concat(n.seconds||"")),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(_n(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?or(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):sr(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):R(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){var n;const r=e.fields||{};this.Ft(t,53);const i=Vn,s=(null===(n=r[i].arrayValue)||void 0===n||null===(n=n.values)||void 0===n?void 0:n.length)||0;this.Ft(t,15),t.Mt(Cn(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),oe.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Ca.Kt=new Ca;const _a=255;function Ta(e){if(0===e)return 8;let t=0;return e>>4||(t+=4,e<<=4),e>>6||(t+=2,e<<=2),e>>7||(t+=1),t}function Ia(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=Ta(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}class ka{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Gt(n.value),n=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Jt(n.value),n=t.next();this.Ht()}Yt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Gt(e);else if(e<2048)this.Gt(960|e>>>6),this.Gt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Gt(480|e>>>12),this.Gt(128|63&e>>>6),this.Gt(128|63&e);else{const e=t.codePointAt(0);this.Gt(240|e>>>18),this.Gt(128|63&e>>>12),this.Gt(128|63&e>>>6),this.Gt(128|63&e)}}this.zt()}Zt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Jt(e);else if(e<2048)this.Jt(960|e>>>6),this.Jt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Jt(480|e>>>12),this.Jt(128|63&e>>>6),this.Jt(128|63&e);else{const e=t.codePointAt(0);this.Jt(240|e>>>18),this.Jt(128|63&e>>>12),this.Jt(128|63&e>>>6),this.Jt(128|63&e)}}this.Ht()}Xt(e){const t=this.en(e),n=Ia(t);this.tn(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}nn(e){const t=this.en(e),n=Ia(t);this.tn(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}rn(){this.sn(_a),this.sn(255)}_n(){this.an(_a),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=!!(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Gt(e){const t=255&e;0===t?(this.sn(0),this.sn(255)):t===_a?(this.sn(_a),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;0===t?(this.an(0),this.an(255)):t===_a?(this.an(_a),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class Pa{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class Ra{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Da{constructor(){this.cn=new ka,this.ln=new Pa(this.cn),this.hn=new Ra(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return 0===e?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class Oa{constructor(e,t,n,r){this.Tn=e,this.In=t,this.En=n,this.dn=r}An(){const e=this.dn.length,t=0===e||255===this.dn[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.dn,0),t!==e?n.set([0],this.dn.length):++n[n.length-1],new Oa(this.Tn,this.In,this.En,n)}Rn(e,t,n){return{indexId:this.Tn,uid:e,arrayValue:Fa(this.En),directionalValue:Fa(this.dn),orderedDocumentKey:Fa(t),documentKey:n.path.toArray()}}Vn(e,t,n){const r=this.Rn(e,t,n);return[r.indexId,r.uid,r.arrayValue,r.directionalValue,r.orderedDocumentKey,r.documentKey]}}function La(e,t){let n=e.Tn-t.Tn;return 0!==n?n:(n=Ma(e.En,t.En),0!==n?n:(n=Ma(e.dn,t.dn),0!==n?n:oe.comparator(e.In,t.In)))}function Ma(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}function Fa(e){return(0,c.Ov)()?function(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}(e):e}function ja(e){return"string"!=typeof e?e:function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(e)}class Ba{constructor(e){this.mn=new vn((e,t)=>ae.comparator(e.field,t.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const e=t;e.isInequality()?this.mn=this.mn.add(e):this.gn.push(e)}}get pn(){return this.mn.size>1}yn(e){if(O(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=Se(e);if(void 0!==t&&!this.wn(t))return!1;const n=Ae(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.wn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.mn.size>0){const e=this.mn.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.Sn(e,t)||!this.bn(this.fn[s++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.fn.length||!this.bn(this.fn[s++],e))return!1}return!0}Dn(){if(this.pn)return null;let e=new vn(ae.comparator);const t=[];for(const n of this.gn)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new Ee(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new Ee(n.field,0))}for(const n of this.fn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new Ee(n.field,"asc"===n.dir?0:1)));return new xe(xe.UNKNOWN_ID,this.collectionId,t,Ne.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Ua(e){if(O(e instanceof Sr||e instanceof Ar,20012),e instanceof Sr){if(e instanceof Fr){var t;const n=(null===(t=e.value.arrayValue)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.map(t=>Sr.create(e.field,"==",t)))||[];return Ar.create(n,"or")}return e}const n=e.filters.map(e=>Ua(e));return Ar.create(n,e.op)}function za(e){if(0===e.getFilters().length)return[];const t=qa(Ua(e));return O(Wa(t),7391),Va(t)||Ha(t)?[t]:t.getFilters()}function Va(e){return e instanceof Sr}function Ha(e){return e instanceof Ar&&Cr(e)}function Wa(e){return Va(e)||Ha(e)||function(e){if(e instanceof Ar&&Nr(e)){for(const t of e.getFilters())if(!Va(t)&&!Ha(t))return!1;return!0}return!1}(e)}function qa(e){if(O(e instanceof Sr||e instanceof Ar,34018),e instanceof Sr)return e;if(1===e.filters.length)return qa(e.filters[0]);const t=e.filters.map(e=>qa(e));let n=Ar.create(t,e.op);return n=Ya(n),Wa(n)?n:(O(n instanceof Ar,64498),O(Er(n),40251),O(n.filters.length>1,57927),n.filters.reduce((e,t)=>Ga(e,t)))}function Ga(e,t){let n;return O(e instanceof Sr||e instanceof Ar,38388),O(t instanceof Sr||t instanceof Ar,25473),n=e instanceof Sr?t instanceof Sr?function(e,t){return Ar.create([e,t],"and")}(e,t):Ka(e,t):t instanceof Sr?Ka(t,e):function(e,t){if(O(e.filters.length>0&&t.filters.length>0,48005),Er(e)&&Er(t))return kr(e,t.getFilters());const n=Nr(e)?e:t,r=Nr(e)?t:e,i=n.filters.map(e=>Ga(e,r));return Ar.create(i,"or")}(e,t),Ya(n)}function Ka(e,t){if(Er(t))return kr(t,e.getFilters());{const n=t.filters.map(t=>Ga(e,t));return Ar.create(n,"or")}}function Ya(e){if(O(e instanceof Sr||e instanceof Ar,11850),e instanceof Sr)return e;const t=e.getFilters();if(1===t.length)return Ya(t[0]);if(_r(e))return e;const n=t.map(e=>Ya(e)),r=[];return n.forEach(t=>{t instanceof Sr?r.push(t):t instanceof Ar&&(t.op===e.op?r.push(...t.filters):r.push(t))}),1===r.length?r[0]:Ar.create(r,e.op)}class Xa{constructor(){this.Cn=new Qa}addToCollectionParentIndex(e,t){return this.Cn.add(t),De.resolve()}getCollectionParents(e,t){return De.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return De.resolve()}deleteFieldIndex(e,t){return De.resolve()}deleteAllFieldIndexes(e){return De.resolve()}createTargetIndexes(e,t){return De.resolve()}getDocumentsMatchingTarget(e,t){return De.resolve(null)}getIndexType(e,t){return De.resolve(0)}getFieldIndexes(e,t){return De.resolve([])}getNextCollectionGroupToUpdate(e){return De.resolve(null)}getMinOffset(e,t){return De.resolve(Te.min())}getMinOffsetFromCollectionGroup(e,t){return De.resolve(Te.min())}updateCollectionGroup(e,t,n){return De.resolve()}updateIndexEntries(e,t){return De.resolve()}}class Qa{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new vn(ie.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new vn(ie.comparator)).toArray()}}const Ja="IndexedDbIndexManager",Za=new Uint8Array(0);class $a{constructor(e,t){this.databaseId=t,this.vn=new Qa,this.Fn=new di(e=>Vr(e),(e,t)=>Hr(e,t)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.vn.add(t)});const i={collectionId:n,parent:et(r)};return eo(e).put(i)}return De.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[te(t),""],!1,!0);return eo(e).J(r).next(e=>{for(const r of e){if(r.collectionId!==t)break;n.push(rt(r.parent))}return n})}addFieldIndex(e,t){const n=no(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map(e=>[e.fieldPath.canonicalString(),e.kind])}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=ro(e);return i.next(e=>{n.put(wa(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return i.next()}deleteFieldIndex(e,t){const n=no(e),r=ro(e),i=to(e);return n.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=no(e),n=to(e),r=ro(e);return t.Z().next(()=>n.Z()).next(()=>r.Z())}createTargetIndexes(e,t){return De.forEach(this.Mn(t),t=>this.getIndexType(e,t).next(n=>{if(0===n||1===n){const n=new Ba(t).Dn();if(null!=n)return this.addFieldIndex(e,n)}}))}getDocumentsMatchingTarget(e,t){const n=to(e);let r=!0;const i=new Map;return De.forEach(this.Mn(t),t=>this.xn(e,t).next(e=>{r&&(r=!!e),i.set(t,e)})).next(()=>{if(r){let e=Si();const r=[];return De.forEach(i,(i,s)=>{T(Ja,"Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map(e=>"".concat(e.fieldPath,":").concat(e.kind)).join(","))}(i)," to execute ").concat(Vr(t)));const a=function(e,t){const n=Se(t);if(void 0===n)return null;for(const r of qr(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),o=function(e,t){const n=new Map;for(const r of Ae(t))for(const t of qr(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of Ae(t)){const t=0===i.kind?Gr(e,i.fieldPath,e.startAt):Kr(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new gr(n,r)}(s,i),c=function(e,t){const n=[];let r=!0;for(const i of Ae(t)){const t=0===i.kind?Kr(e,i.fieldPath,e.endAt):Gr(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new gr(n,r)}(s,i),u=this.On(i,s,l),d=this.On(i,s,c),h=this.Nn(i,s,o),f=this.Bn(i.indexId,a,u,l.inclusive,d,c.inclusive,h);return De.forEach(f,i=>n.Y(i,t.limit).next(t=>{t.forEach(t=>{const n=oe.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))})}))}).next(()=>r)}return De.resolve(null)})}Mn(e){let t=this.Fn.get(e);return t||(t=0===e.filters.length?[e]:za(Ar.create(e.filters,"and")).map(t=>zr(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,t),t)}Bn(e,t,n,r,i,s,a){const o=(null!=t?t.length:1)*Math.max(n.length,i.length),l=o/(null!=t?t.length:1),c=[];for(let u=0;u<o;++u){const o=t?this.Ln(t[u/l]):Za,d=this.kn(e,o,n[u%l],r),h=this.qn(e,o,i[u%l],s),f=a.map(t=>this.kn(e,o,t,!0));c.push(...this.createRange(d,h,f))}return c}kn(e,t,n,r){const i=new Oa(e,oe.empty(),t,n);return r?i:i.An()}qn(e,t,n,r){const i=new Oa(e,oe.empty(),t,n);return r?i.An():i}xn(e,t){const n=new Ba(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(e=>{let t=null;for(const r of e)n.yn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t})}getIndexType(e,t){let n=2;const r=this.Mn(t);return De.forEach(r,t=>this.xn(e,t).next(e=>{e?0!==n&&e.fields.length<function(e){let t=new vn(ae.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})).next(()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n)}Qn(e,t){const n=new Da;for(const r of Ae(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Pn(r.kind);Ca.Kt.Dt(e,i)}return n.un()}Ln(e){const t=new Da;return Ca.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const n=new Da;return Ca.Kt.Dt($n(this.databaseId,t),n.Pn(function(e){const t=Ae(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.un()}Nn(e,t,n){if(null===n)return[];let r=[];r.push(new Da);let i=0;for(const s of Ae(e)){const e=n[i++];for(const n of r)if(this.Un(t,s.fieldPath)&&tr(e))r=this.Kn(r,s,e);else{const t=n.Pn(s.kind);Ca.Kt.Dt(e,t)}}return this.Wn(r)}On(e,t,n){return this.Nn(e,t,n.position)}Wn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].un();return t}Kn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new Da;n.seed(e.un()),Ca.Kt.Dt(s,n.Pn(t.kind)),i.push(n)}return i}Un(e,t){return!!e.filters.find(e=>e instanceof Sr&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op))}getFieldIndexes(e,t){const n=no(e),r=ro(e);return(t?n.J(Bt,IDBKeyRange.bound(t,t)):n.J()).next(e=>{const t=[];return De.forEach(e,e=>r.get([e.indexId,this.uid]).next(n=>{t.push(function(e,t){const n=t?new Ne(t.sequenceNumber,new Te(ha(t.readTime),new oe(rt(t.documentKey)),t.largestBatchId)):Ne.empty(),r=e.fields.map(e=>{let[t,n]=e;return new Ee(ae.fromServerFormat(t),n)});return new xe(e.indexId,e.collectionGroup,r,n)}(e,n))})).next(()=>t)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(e=>0===e.length?null:(e.sort((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:X(e.collectionGroup,t.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(e,t,n){const r=no(e),i=ro(e);return this.Gn(e).next(e=>r.J(Bt,IDBKeyRange.bound(t,t)).next(t=>De.forEach(t,t=>i.put(wa(t.indexId,this.uid,e,n)))))}updateIndexEntries(e,t){const n=new Map;return De.forEach(t,(t,r)=>{const i=n.get(t.collectionGroup);return(i?De.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next(i=>(n.set(t.collectionGroup,i),De.forEach(i,n=>this.zn(e,t,n).next(t=>{const i=this.jn(r,n);return t.isEqual(i)?De.resolve():this.Jn(e,r,n,t,i)}))))})}Hn(e,t,n,r){return to(e).put(r.Rn(this.uid,this.$n(n,t.key),t.key))}Yn(e,t,n,r){return to(e).delete(r.Vn(this.uid,this.$n(n,t.key),t.key))}zn(e,t,n){const r=to(e);let i=new vn(La);return r.ee({index:Gt,range:IDBKeyRange.only([n.indexId,this.uid,Fa(this.$n(n,t))])},(e,r)=>{i=i.add(new Oa(n.indexId,t,ja(r.arrayValue),ja(r.directionalValue)))}).next(()=>i)}jn(e,t){let n=new vn(La);const r=this.Qn(t,e);if(null==r)return n;const i=Se(t);if(null!=i){const s=e.data.field(i.fieldPath);if(tr(s))for(const i of s.arrayValue.values||[])n=n.add(new Oa(t.indexId,e.key,this.Ln(i),r))}else n=n.add(new Oa(t.indexId,e.key,Za,r));return n}Jn(e,t,n,r,i){T(Ja,"Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),a=t.getIterator();let o=bn(s),l=bn(a);for(;o||l;){let e=!1,t=!1;if(o&&l){const r=n(o,l);r<0?t=!0:r>0&&(e=!0)}else null!=o?t=!0:e=!0;e?(r(l),l=bn(a)):t?(i(o),o=bn(s)):(o=bn(s),l=bn(a))}}(r,i,La,r=>{s.push(this.Hn(e,t,n,r))},r=>{s.push(this.Yn(e,t,n,r))}),De.waitFor(s)}Gn(e){let t=1;return ro(e).ee({index:Vt,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(e,n,r)=>{r.done(),t=n.sequenceNumber+1}).next(()=>t)}createRange(e,t,n){n=n.sort((e,t)=>La(e,t)).filter((e,t,n)=>!t||0!==La(e,n[t-1]));const r=[];r.push(e);for(const s of n){const n=La(s,e),i=La(s,t);if(0===n)r[0]=e.An();else if(n>0&&i<0)r.push(s),r.push(s.An());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.Zn(r[s],r[s+1]))return[];const e=r[s].Vn(this.uid,Za,oe.empty()),t=r[s+1].Vn(this.uid,Za,oe.empty());i.push(IDBKeyRange.bound(e,t))}return i}Zn(e,t){return La(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(io)}getMinOffset(e,t){return De.mapArray(this.Mn(t),t=>this.xn(e,t).next(e=>e||R(44426))).next(io)}}function eo(e){return dn(e,Dt)}function to(e){return dn(e,Wt)}function no(e){return dn(e,jt)}function ro(e){return dn(e,Ut)}function io(e){O(0!==e.length,28825);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;Ie(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Te(t.readTime,t.documentKey,n)}const so={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ao=41943040;class oo{static withCacheSize(e){return new oo(e,oo.DEFAULT_COLLECTION_PERCENTILE,oo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}function lo(e,t,n){const r=e.store(lt),i=e.store(mt),s=[],a=IDBKeyRange.only(n.batchId);let o=0;const l=r.ee({range:a},(e,t,n)=>(o++,n.delete()));s.push(l.next(()=>{O(1===o,47070,{batchId:n.batchId})}));const c=[];for(const u of n.mutations){const e=ft(t,u.key.path,n.batchId);s.push(i.delete(e)),c.push(u.key)}return De.waitFor(s).next(()=>c)}function co(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw R(14731);t=e.noDocument}return JSON.stringify(t).length}oo.DEFAULT_COLLECTION_PERCENTILE=10,oo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,oo.DEFAULT=new oo(ao,oo.DEFAULT_COLLECTION_PERCENTILE,oo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),oo.DISABLED=new oo(-1,0,0);class uo{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Xn={}}static wt(e,t,n,r){O(""!==e.uid,64387);const i=e.isAuthenticated()?e.uid:"";return new uo(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return fo(e).ee({index:ut,range:n},(e,n,r)=>{t=!1,r.done()}).next(()=>t)}addMutationBatch(e,t,n,r){const i=po(e),s=fo(e);return s.add({}).next(a=>{O("number"==typeof a,49019);const o=new rs(a,t,n,r),l=function(e,t,n){const r=n.baseMutations.map(t=>Ks(e.yt,t)),i=n.mutations.map(t=>Ks(e.yt,t));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,o),c=[];let u=new vn((e,t)=>X(e.canonicalString(),t.canonicalString()));for(const e of r){const t=ft(this.userId,e.key.path,a);u=u.add(e.key.path.popLast()),c.push(s.put(l)),c.push(i.put(t,pt))}return u.forEach(t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(()=>{this.Xn[a]=o.keys()}),De.waitFor(c).next(()=>o)})}lookupMutationBatch(e,t){return fo(e).get(t).next(e=>e?(O(e.userId===this.userId,48,"Unexpected user for mutation batch",{userId:e.userId,batchId:t}),fa(this.serializer,e)):null)}er(e,t){return this.Xn[t]?De.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next(e=>{if(e){const n=e.keys();return this.Xn[t]=n,n}return null})}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return fo(e).ee({index:ut,range:r},(e,t,r)=>{t.userId===this.userId&&(O(t.batchId>=n,47524,{tr:n}),i=fa(this.serializer,t)),r.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=Xe;return fo(e).ee({index:ut,range:t,reverse:!0},(e,t,r)=>{n=t.batchId,r.done()}).next(()=>n)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Xe],[this.userId,Number.POSITIVE_INFINITY]);return fo(e).J(ut,t).next(e=>e.map(e=>fa(this.serializer,e)))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=ht(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return po(e).ee({range:r},(n,r,s)=>{const[a,o,l]=n,c=rt(o);if(a===this.userId&&t.path.isEqual(c))return fo(e).get(l).next(e=>{if(!e)throw R(61480,{nr:n,batchId:l});O(e.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:e.userId,batchId:l}),i.push(fa(this.serializer,e))});s.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new vn(X);const r=[];return t.forEach(t=>{const i=ht(this.userId,t.path),s=IDBKeyRange.lowerBound(i),a=po(e).ee({range:s},(e,r,i)=>{const[s,a,o]=e,l=rt(a);s===this.userId&&t.path.isEqual(l)?n=n.add(o):i.done()});r.push(a)}),De.waitFor(r).next(()=>this.rr(e,n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=ht(this.userId,n),s=IDBKeyRange.lowerBound(i);let a=new vn(X);return po(e).ee({range:s},(e,t,i)=>{const[s,o,l]=e,c=rt(o);s===this.userId&&n.isPrefixOf(c)?c.length===r&&(a=a.add(l)):i.done()}).next(()=>this.rr(e,a))}rr(e,t){const n=[],r=[];return t.forEach(t=>{r.push(fo(e).get(t).next(e=>{if(null===e)throw R(35274,{batchId:t});O(e.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:e.userId,batchId:t}),n.push(fa(this.serializer,e))}))}),De.waitFor(r).next(()=>n)}removeMutationBatch(e,t){return lo(e.le,this.userId,t).next(n=>(e.addOnCommittedListener(()=>{this.ir(t.batchId)}),De.forEach(n,t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return De.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return po(e).ee({range:n},(e,t,n)=>{if(e[0]===this.userId){const t=rt(e[1]);r.push(t)}else n.done()}).next(()=>{O(0===r.length,56720,{sr:r.map(e=>e.canonicalString())})})})}containsKey(e,t){return ho(e,this.userId,t)}_r(e){return mo(e).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:Xe,lastStreamToken:""})}}function ho(e,t,n){const r=ht(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let a=!1;return po(e).ee({range:s,X:!0},(e,n,r)=>{const[s,o,l]=e;s===t&&o===i&&(a=!0),r.done()}).next(()=>a)}function fo(e){return dn(e,lt)}function po(e){return dn(e,mt)}function mo(e){return dn(e,ot)}class go{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new go(0)}static cr(){return new go(-1)}}class yo{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next(t=>{const n=new go(t.highestTargetId);return t.highestTargetId=n.next(),this.hr(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(e=>we.fromTimestamp(new ve(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(e,t,n){return this.lr(e).next(r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.hr(e,r)))}addTargetData(e,t){return this.Pr(e,t).next(()=>this.lr(e).next(n=>(n.targetCount+=1,this.Tr(t,n),this.hr(e,n))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>vo(e).delete(t.targetId)).next(()=>this.lr(e)).next(t=>(O(t.targetCount>0,8065),t.targetCount-=1,this.hr(e,t)))}removeTargets(e,t,n){let r=0;const i=[];return vo(e).ee((s,a)=>{const o=pa(a);o.sequenceNumber<=t&&null===n.get(o.targetId)&&(r++,i.push(this.removeTargetData(e,o)))}).next(()=>De.waitFor(i)).next(()=>r)}forEachTarget(e,t){return vo(e).ee((e,n)=>{const r=pa(n);t(r)})}lr(e){return wo(e).get(Pt).next(e=>(O(null!==e,2888),e))}hr(e,t){return wo(e).put(Pt,t)}Pr(e,t){return vo(e).put(ma(this.serializer,t))}Tr(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.lr(e).next(e=>e.targetCount)}getTargetData(e,t){const n=Vr(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return vo(e).ee({range:r,index:Nt},(e,n,r)=>{const s=pa(n);Hr(t,s.target)&&(i=s,r.done())}).next(()=>i)}addMatchingKeys(e,t,n){const r=[],i=bo(e);return t.forEach(t=>{const s=et(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))}),De.waitFor(r)}removeMatchingKeys(e,t,n){const r=bo(e);return De.forEach(t,t=>{const i=et(t.path);return De.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])})}removeMatchingKeysForTargetId(e,t){const n=bo(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=bo(e);let i=Si();return r.ee({range:n,X:!0},(e,t,n)=>{const r=rt(e[1]),s=new oe(r);i=i.add(s)}).next(()=>i)}containsKey(e,t){const n=et(t.path),r=IDBKeyRange.bound([n],[te(n)],!1,!0);let i=0;return bo(e).ee({index:It,X:!0,range:r},(e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())}).next(()=>i>0)}At(e,t){return vo(e).get(t).next(e=>e?pa(e):null)}}function vo(e){return dn(e,Et)}function wo(e){return dn(e,Rt)}function bo(e){return dn(e,_t)}const xo="LruGarbageCollector",So=1048576;function Ao(e,t){let[n,r]=e,[i,s]=t;const a=X(n,i);return 0===a?X(r,s):a}class Eo{constructor(e){this.Ir=e,this.buffer=new vn(Ao),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Ao(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class No{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){T(xo,"Garbage collection scheduled in ".concat(e,"ms")),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Ue(e)?T(xo,"Ignoring IndexedDB error during garbage collection: ",e):await Re(e)}await this.Vr(3e5)})}}class Co{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return De.resolve(Ye.ce);const n=new Eo(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(T("LruGarbageCollector","Garbage collection skipped; disabled"),De.resolve(so)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(T("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),so):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,i,s,a,o,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(T("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,o=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(c=Date.now(),_()<=l.$b.DEBUG&&T("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-u,"ms\n\tDetermined least recently used ").concat(r," in ")+(a-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(o-a)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(c-o)+"ms\n"+"Total Duration: ".concat(c-u,"ms")),De.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}function _o(e,t){return new Co(e,t)}class To{constructor(e,t){this.db=e,this.garbageCollector=_o(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,(e,n)=>t(n))}addReference(e,t,n){return Io(e,n)}removeReference(e,t,n){return Io(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Io(e,t)}br(e,t){return function(e,t){let n=!1;return mo(e).te(r=>ho(e,r,t).next(e=>(e&&(n=!0),De.resolve(!e)))).next(()=>n)}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Sr(e,(s,a)=>{if(a<=t){const t=this.br(e,s).next(t=>{if(!t)return i++,n.getEntry(e,s).next(()=>(n.removeEntry(s,we.min()),bo(e).delete(function(e){return[0,et(e.path)]}(s))))});r.push(t)}}).next(()=>De.waitFor(r)).next(()=>n.apply(e)).next(()=>i)}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Io(e,t)}Sr(e,t){const n=bo(e);let r,i=Ye.ce;return n.ee({index:It},(e,n)=>{let[s,a]=e,{path:o,sequenceNumber:l}=n;0===s?(i!==Ye.ce&&t(new oe(rt(r)),i),i=l,r=o):i=Ye.ce}).next(()=>{i!==Ye.ce&&t(new oe(rt(r)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Io(e,t){return bo(e).put(function(e,t){return{targetId:0,path:et(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class ko{constructor(){this.changes=new di(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,mr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?De.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Po{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Lo(e).put(n)}removeEntry(e,t,n){return Lo(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],ua(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next(n=>(n.byteSize+=t,this.Dr(e,n)))}getEntry(e,t){let n=mr.newInvalidDocument(t);return Lo(e).ee({index:vt,range:IDBKeyRange.only(Mo(t))},(e,r)=>{n=this.Cr(t,r)}).next(()=>n)}vr(e,t){let n={size:0,document:mr.newInvalidDocument(t)};return Lo(e).ee({index:vt,range:IDBKeyRange.only(Mo(t))},(e,r)=>{n={document:this.Cr(t,r),size:co(r)}}).next(()=>n)}getEntries(e,t){let n=fi();return this.Fr(e,t,(e,t)=>{const r=this.Cr(e,t);n=n.insert(e,r)}).next(()=>n)}Mr(e,t){let n=fi(),r=new mn(oe.comparator);return this.Fr(e,t,(e,t)=>{const i=this.Cr(e,t);n=n.insert(e,i),r=r.insert(e,co(t))}).next(()=>({documents:n,Or:r}))}Fr(e,t,n){if(t.isEmpty())return De.resolve();let r=new vn(jo);t.forEach(e=>r=r.add(e));const i=IDBKeyRange.bound(Mo(r.first()),Mo(r.last())),s=r.getIterator();let a=s.getNext();return Lo(e).ee({index:vt,range:i},(e,t,r)=>{const i=oe.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;a&&jo(a,i)<0;)n(a,null),a=s.getNext();a&&a.isEqual(i)&&(n(a,t),a=s.hasNext()?s.getNext():null),a?r.j(Mo(a)):r.done()}).next(()=>{for(;a;)n(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,n,r,i){const s=t.path,a=[s.popLast().toArray(),s.lastSegment(),ua(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],o=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Lo(e).J(IDBKeyRange.bound(a,o,!0)).next(e=>{null===i||void 0===i||i.incrementDocumentReadCount(e.length);let n=fi();for(const i of e){const e=this.Cr(oe.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(oi(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n})}getAllFromCollectionGroup(e,t,n,r){let i=fi();const s=Fo(t,n),a=Fo(t,Te.max());return Lo(e).ee({index:bt,range:IDBKeyRange.bound(s,a,!0)},(e,t,n)=>{const s=this.Cr(oe.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()}).next(()=>i)}newChangeBuffer(e){return new Do(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(e=>e.byteSize)}getMetadata(e){return Oo(e).get(At).next(e=>(O(!!e,20021),e))}Dr(e,t){return Oo(e).put(At,t)}Cr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Gs(e.yt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=oe.fromSegments(t.noDocument.path),r=ha(t.noDocument.readTime);n=mr.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return R(56709);{const e=oe.fromSegments(t.unknownDocument.path),r=ha(t.unknownDocument.version);n=mr.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new ve(e[0],e[1]);return we.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(we.min()))return e}return mr.newInvalidDocument(e)}}function Ro(e){return new Po(e)}class Do extends ko{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new di(e=>e.toString(),(e,t)=>e.isEqual(t))}applyChanges(e){const t=[];let n=0,r=new vn((e,t)=>X(e.canonicalString(),t.canonicalString()));return this.changes.forEach((i,s)=>{const a=this.Br.get(i);if(t.push(this.Nr.removeEntry(e,i,a.readTime)),s.isValidDocument()){const o=ca(this.Nr.serializer,s);r=r.add(i.path.popLast());const l=co(o);n+=l-a.size,t.push(this.Nr.addEntry(e,i,o))}else if(n-=a.size,this.trackRemovals){const n=ca(this.Nr.serializer,s.convertToNoDocument(we.min()));t.push(this.Nr.addEntry(e,i,n))}}),r.forEach(n=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,n))}),t.push(this.Nr.updateMetadata(e,n)),De.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next(e=>(this.Br.set(t,{size:e.size,readTime:e.document.readTime}),e.document))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next(e=>{let{documents:t,Or:n}=e;return n.forEach((e,n)=>{this.Br.set(e,{size:n,readTime:t.get(e).readTime})}),t})}}function Oo(e){return dn(e,St)}function Lo(e){return dn(e,gt)}function Mo(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Fo(e,t){const n=t.documentKey.path.toArray();return[e,ua(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function jo(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=X(n[s],r[s]),i)return i;return i=X(n.length,r.length),i||(i=X(n[n.length-2],r[r.length-2]),i||X(n[n.length-1],r[r.length-1]))}class Bo{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Uo{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Ki(n.mutation,e,xn.empty(),ve.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Si()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Si();const r=yi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=mi();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=yi();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Si()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=fi();const s=wi(),a=wi();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof Ji)?i=i.insert(t.key,t):void 0!==a?(s.set(t.key,a.mutation.getFieldMask()),Ki(a.mutation,t,a.mutation.getFieldMask(),ve.now())):s.set(t.key,xn.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new Bo(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=wi();let r=new mn((e,t)=>e-t),i=Si();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let a=n.get(e)||xn.empty();a=i.applyToLocalView(s,a),n.set(e,a);const o=(r.get(i.batchId)||Si()).add(e);r=r.insert(i.batchId,o)})}).next(()=>{const s=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=vi();l.forEach(e=>{if(!i.has(e)){const r=qi(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,o,c))}return De.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return oe.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Zr(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):De.resolve(yi());let a=be,o=i;return s.next(t=>De.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?De.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,o,t,Si())).next(e=>({batchId:a,changes:gi(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new oe(t)).next(e=>{let t=mi();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=mi();return this.indexManager.getCollectionParents(e,i).next(a=>De.forEach(a,a=>{const o=function(e,t){return new Yr(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,mr.newInvalidDocument(r)))});let n=mi();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&Ki(s.mutation,r,xn.empty(),ve.now()),oi(t,r)&&(n=n.insert(e,r))}),n})}}class zo{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return De.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Ls(e.createTime)}}(t)),De.resolve()}getNamedQuery(e,t){return De.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:ga(e.bundledQuery),readTime:Ls(e.readTime)}}(t)),De.resolve()}}class Vo{constructor(){this.overlays=new mn(oe.comparator),this.qr=new Map}getOverlay(e,t){return De.resolve(this.overlays.get(t))}getOverlays(e,t){const n=yi();return De.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),De.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),De.resolve()}getOverlaysForCollection(e,t,n){const r=yi(),i=t.length+1,s=new oe(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const e=a.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return De.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new mn((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=yi(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=yi(),o=i.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return De.resolve(a)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new ss(t,n));let i=this.qr.get(t);void 0===i&&(i=Si(),this.qr.set(t,i)),this.qr.set(t,i.add(n.key))}}class Ho{constructor(){this.sessionToken=An.EMPTY_BYTE_STRING}getSessionToken(e){return De.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,De.resolve()}}class Wo{constructor(){this.Qr=new vn(qo.$r),this.Ur=new vn(qo.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new qo(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new qo(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new oe(new ie([])),n=new qo(t,e),r=new qo(t,e+1),i=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),i.push(e.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new oe(new ie([])),n=new qo(t,e),r=new qo(t,e+1);let i=Si();return this.Ur.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new qo(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class qo{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return oe.comparator(e.key,t.key)||X(e.Yr,t.Yr)}static Kr(e,t){return X(e.Yr,t.Yr)||oe.comparator(e.key,t.key)}}class Go{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new vn(qo.$r)}checkEmpty(e){return De.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new rs(i,t,n,r);this.mutationQueue.push(s);for(const a of r)this.Zr=this.Zr.add(new qo(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return De.resolve(s)}lookupMutationBatch(e,t){return De.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),i=r<0?0:r;return De.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return De.resolve(0===this.mutationQueue.length?Xe:this.tr-1)}getAllMutationBatches(e){return De.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new qo(t,0),r=new qo(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);i.push(t)}),De.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new vn(X);return t.forEach(e=>{const t=new qo(e,0),r=new qo(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),De.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;oe.isDocumentKey(i)||(i=i.child(""));const s=new qo(new oe(i),0);let a=new vn(X);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.Yr)),!0)},s),De.resolve(this.ti(a))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){O(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return De.forEach(t.mutations,r=>{const i=new qo(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new qo(t,0),r=this.Zr.firstAfterOrEqual(n);return De.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,De.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Ko{constructor(e){this.ri=e,this.docs=new mn(oe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return De.resolve(n?n.document.mutableCopy():mr.newInvalidDocument(t))}getEntries(e,t){let n=fi();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():mr.newInvalidDocument(e))}),De.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=fi();const s=t.path,a=new oe(s.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Ie(_e(a),n)<=0||(r.has(a.key)||oi(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return De.resolve(i)}getAllFromCollectionGroup(e,t,n,r){R(9500)}ii(e,t){return De.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Yo(this)}getSize(e){return De.resolve(this.size)}}class Yo extends ko{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),De.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class Xo{constructor(e){this.persistence=e,this.si=new di(e=>Vr(e),Hr),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.oi=0,this._i=new Wo,this.targetCount=0,this.ai=go.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),De.resolve()}getLastRemoteSnapshotVersion(e){return De.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return De.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),De.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),De.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new go(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,De.resolve()}updateTargetData(e,t){return this.Pr(t),De.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,De.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.si.forEach((s,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.si.delete(s),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),De.waitFor(i).next(()=>r)}getTargetCount(e){return De.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return De.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),De.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),De.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),De.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return De.resolve(n)}containsKey(e,t){return De.resolve(this._i.containsKey(t))}}class Qo{constructor(e,t){this.ui={},this.overlays={},this.ci=new Ye(0),this.li=!1,this.li=!0,this.hi=new Ho,this.referenceDelegate=e(this),this.Pi=new Xo(this),this.indexManager=new Xa,this.remoteDocumentCache=function(e){return new Ko(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new la(t),this.Ii=new zo(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Vo,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new Go(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){T("MemoryPersistence","Starting transaction:",e);const r=new Jo(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return De.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class Jo extends Pe{constructor(e){super(),this.currentSequenceNumber=e}}class Zo{constructor(e){this.persistence=e,this.Ri=new Wo,this.Vi=null}static mi(e){return new Zo(e)}get fi(){if(this.Vi)return this.Vi;throw R(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),De.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),De.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),De.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return De.forEach(this.fi,n=>{const r=oe.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,we.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return De.or([()=>De.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class $o{constructor(e,t){this.persistence=e,this.pi=new di(e=>et(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=_o(this,t)}static mi(e,t){return new $o(e,t)}Ei(){}di(e){return De.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return De.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?De.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,i.removeEntry(r,we.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),De.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),De.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),De.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),De.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Zn(e.data.value)),t}br(e,t,n){return De.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return De.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class el{constructor(e){this.serializer=e}k(e,t,n,r){const i=new Le("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(st)}(e),function(e){e.createObjectStore(ot,{keyPath:"userId"});e.createObjectStore(lt,{keyPath:ct,autoIncrement:!0}).createIndex(ut,dt,{unique:!0}),e.createObjectStore(mt)}(e),tl(e),function(e){e.createObjectStore(it)}(e));let s=De.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(_t),e.deleteObjectStore(Et),e.deleteObjectStore(Rt)}(e),tl(e)),s=s.next(()=>function(e){const t=e.store(Rt),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:we.min().toTimestamp(),targetCount:0};return t.put(Pt,n)}(i))),n<4&&r>=4&&(0!==n&&(s=s.next(()=>function(e,t){return t.store(lt).J().next(n=>{e.deleteObjectStore(lt),e.createObjectStore(lt,{keyPath:ct,autoIncrement:!0}).createIndex(ut,dt,{unique:!0});const r=t.store(lt),i=n.map(e=>r.put(e));return De.waitFor(i)})}(e,i))),s=s.next(()=>{!function(e){e.createObjectStore(Lt,{keyPath:"clientId"})}(e)})),n<5&&r>=5&&(s=s.next(()=>this.yi(i))),n<6&&r>=6&&(s=s.next(()=>(function(e){e.createObjectStore(St)}(e),this.wi(i)))),n<7&&r>=7&&(s=s.next(()=>this.Si(i))),n<8&&r>=8&&(s=s.next(()=>this.bi(e,i))),n<9&&r>=9&&(s=s.next(()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)})),n<10&&r>=10&&(s=s.next(()=>this.Di(i))),n<11&&r>=11&&(s=s.next(()=>{!function(e){e.createObjectStore(Mt,{keyPath:"bundleId"})}(e),function(e){e.createObjectStore(Ft,{keyPath:"name"})}(e)})),n<12&&r>=12&&(s=s.next(()=>{!function(e){const t=e.createObjectStore(Yt,{keyPath:Xt});t.createIndex(Qt,Jt,{unique:!1}),t.createIndex(Zt,$t,{unique:!1})}(e)})),n<13&&r>=13&&(s=s.next(()=>function(e){const t=e.createObjectStore(gt,{keyPath:yt});t.createIndex(vt,wt),t.createIndex(bt,xt)}(e)).next(()=>this.Ci(e,i)).next(()=>e.deleteObjectStore(it))),n<14&&r>=14&&(s=s.next(()=>this.Fi(e,i))),n<15&&r>=15&&(s=s.next(()=>function(e){e.createObjectStore(jt,{keyPath:"indexId",autoIncrement:!0}).createIndex(Bt,"collectionGroup",{unique:!1});e.createObjectStore(Ut,{keyPath:zt}).createIndex(Vt,Ht,{unique:!1});e.createObjectStore(Wt,{keyPath:qt}).createIndex(Gt,Kt,{unique:!1})}(e))),n<16&&r>=16&&(s=s.next(()=>{t.objectStore(Ut).clear()}).next(()=>{t.objectStore(Wt).clear()})),n<17&&r>=17&&(s=s.next(()=>{!function(e){e.createObjectStore(en,{keyPath:"name"})}(e)})),n<18&&r>=18&&(0,c.Ov)()&&(s=s.next(()=>{t.objectStore(Ut).clear()}).next(()=>{t.objectStore(Wt).clear()})),s}wi(e){let t=0;return e.store(it).ee((e,n)=>{t+=co(n)}).next(()=>{const n={byteSize:t};return e.store(St).put(At,n)})}yi(e){const t=e.store(ot),n=e.store(lt);return t.J().next(t=>De.forEach(t,t=>{const r=IDBKeyRange.bound([t.userId,Xe],[t.userId,t.lastAcknowledgedBatchId]);return n.J(ut,r).next(n=>De.forEach(n,n=>{O(n.userId===t.userId,18650,"Cannot process batch from unexpected user",{batchId:n.batchId});const r=fa(this.serializer,n);return lo(e,t.userId,r).next(()=>{})}))}))}Si(e){const t=e.store(_t),n=e.store(it);return e.store(Rt).get(Pt).next(e=>{const r=[];return n.ee((n,i)=>{const s=new ie(n),a=function(e){return[0,et(e)]}(s);r.push(t.get(a).next(n=>n?De.resolve():(n=>t.put({targetId:0,path:et(n),sequenceNumber:e.highestListenSequenceNumber}))(s)))}).next(()=>De.waitFor(r))})}bi(e,t){e.createObjectStore(Dt,{keyPath:Ot});const n=t.store(Dt),r=new Qa,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:et(r)})}};return t.store(it).ee({X:!0},(e,t)=>{const n=new ie(e);return i(n.popLast())}).next(()=>t.store(mt).ee({X:!0},(e,t)=>{let[n,r,s]=e;const a=rt(r);return i(a.popLast())}))}Di(e){const t=e.store(Et);return t.ee((e,n)=>{const r=pa(n),i=ma(this.serializer,r);return t.put(i)})}Ci(e,t){const n=t.store(it),r=[];return n.ee((e,n)=>{const i=t.store(gt),s=function(e){return e.document?new oe(ie.fromString(e.document.name).popFirst(5)):e.noDocument?oe.fromSegments(e.noDocument.path):e.unknownDocument?oe.fromSegments(e.unknownDocument.path):R(36783)}(n).path.toArray(),a={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(a))}).next(()=>De.waitFor(r))}Fi(e,t){const n=t.store(lt),r=Ro(this.serializer),i=new Qo(Zo.mi,this.serializer.yt);return n.J().next(e=>{const n=new Map;return e.forEach(e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:Si();fa(this.serializer,e).keys().forEach(e=>r=r.add(e)),n.set(e.userId,r)}),De.forEach(n,(e,n)=>{const s=new E(n),a=Aa.wt(this.serializer,s),o=i.getIndexManager(s),l=uo.wt(s,this.serializer,o,i.referenceDelegate);return new Uo(r,l,a,o).recalculateAndSaveOverlaysForDocumentKeys(new un(t,Ye.ce),e).next()})})}}function tl(e){e.createObjectStore(_t,{keyPath:Tt}).createIndex(It,kt,{unique:!0}),e.createObjectStore(Et,{keyPath:"targetId"}).createIndex(Nt,Ct,{unique:!0}),e.createObjectStore(Rt)}const nl="IndexedDbPersistence",rl=18e5,il=5e3,sl="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",al="main";class ol{constructor(e,t,n,r,i,s,a,o,l,c){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:18;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Mi=i,this.window=s,this.document=a,this.xi=l,this.Oi=c,this.Ni=u,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=e=>Promise.resolve(),!ol.v())throw new F(M.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new To(this,r),this.$i=t+al,this.serializer=new la(o),this.Ui=new Me(this.$i,this.Ni,new el(this.serializer)),this.hi=new Na,this.Pi=new yo(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Ro(this.serializer),this.Ii=new ba,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,!1===c&&I(nl,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new F(M.FAILED_PRECONDITION,sl);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new Ye(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async t=>{null===t.newVersion&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>cl(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(e=>{e||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(t=>this.isPrimary&&!t?this.Zi(e).next(()=>!1):!!t&&this.Xi(e).next(()=>!0))).catch(e=>{if(Ue(e))return T(nl,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return T(nl,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return ll(e).get(at).next(e=>De.resolve(this.es(e)))}ts(e){return cl(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,rl)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{const t=dn(e,Lt);return t.J().next(e=>{const n=this.ss(e,rl),r=e.filter(e=>-1===n.indexOf(e));return De.forEach(r,e=>t.delete(e.clientId)).next(()=>r)})}).catch(()=>[]);if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?De.resolve(!0):ll(e).get(at).next(t=>{if(null!==t&&this.rs(t.leaseTimestampMs,il)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new F(M.FAILED_PRECONDITION,sl);return!1}}return!(!this.networkEnabled||!this.inForeground)||cl(e).J().next(e=>void 0===this.ss(e,il).find(e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&T(nl,"Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[st,Lt],e=>{const t=new un(e,Ye.ce);return this.Zi(t).next(()=>this.ts(t))}),this.Ui.close(),this.Ps()}ss(e,t){return e.filter(e=>this.rs(e.updateTimeMs,t)&&!this.us(e.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>cl(e).J().next(e=>this.ss(e,rl).map(e=>e.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return uo.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new $a(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Aa.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,n){T(nl,"Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 18===e?cn:17===e?ln:16===e?on:15===e?an:14===e?sn:13===e?rn:12===e?nn:11===e?tn:void R(60245)}(this.Ni);let s;return this.Ui.runTransaction(e,r,i,r=>(s=new un(r,this.ci?this.ci.next():Ye.ce),"readwrite-primary"===t?this.Hi(s).next(e=>!!e||this.Yi(s)).next(t=>{if(!t)throw I("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new F(M.FAILED_PRECONDITION,ke);return n(s)}).next(e=>this.Xi(s).next(()=>e)):this.Is(s).next(()=>n(s)))).then(e=>(s.raiseOnCommittedEvent(),e))}Is(e){return ll(e).get(at).next(e=>{if(null!==e&&this.rs(e.leaseTimestampMs,il)&&!this.us(e.ownerId)&&!this.es(e)&&!(this.Oi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new F(M.FAILED_PRECONDITION,sl)})}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ll(e).put(at,t)}static v(){return Me.v()}Zi(e){const t=ll(e);return t.get(at).next(e=>this.es(e)?(T(nl,"Releasing primary lease."),t.delete(at)):De.resolve())}rs(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(I("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground="visible"===this.document.visibilityState)}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;(0,c.nr)()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{var t;const n=null!==(null===(t=this.Ki)||void 0===t?void 0:t.getItem(this._s(e)));return T(nl,"Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return I(nl,"Failed to get zombied client id.",e),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){I("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch(e){}}_s(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function ll(e){return dn(e,st)}function cl(e){return dn(e,Lt)}function ul(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class dl{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=Si(),r=Si();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new dl(e,t.fromCache,n,r)}}class hl{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class fl{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(0,c.nr)()?8:Fe((0,c.ZQ)())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ys(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ws(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new hl;return this.Ss(e,t,n).next(r=>{if(i.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>i.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(_()<=l.$b.DEBUG&&T("QueryEngine","SDK will not create cache indexes for query:",ai(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),De.resolve()):(_()<=l.$b.DEBUG&&T("QueryEngine","Query:",ai(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(_()<=l.$b.DEBUG&&T("QueryEngine","The SDK decides to create cache indexes for query:",ai(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ei(t))):De.resolve())}ys(e,t){if(Jr(t))return De.resolve(null);let n=ei(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=ri(t,null,"F"),n=ei(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=Si(...r);return this.ps.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.Ds(t,r);return this.Cs(t,s,i,n.readTime)?this.ys(e,ri(t,null,"F")):this.vs(e,s,t,n)}))})))}ws(e,t,n,r){return Jr(t)||r.isEqual(we.min())?De.resolve(null):this.ps.getDocuments(e,n).next(i=>{const s=this.Ds(t,i);return this.Cs(t,s,n,r)?De.resolve(null):(_()<=l.$b.DEBUG&&T("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ai(t)),this.vs(e,s,t,Ce(r,be)).next(e=>e))})}Ds(e,t){let n=new vn(ci(e));return t.forEach((t,r)=>{oi(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,n){return _()<=l.$b.DEBUG&&T("QueryEngine","Using full collection scan to execute query:",ai(t)),this.ps.getDocumentsMatchingQuery(e,t,Te.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const pl="LocalStore",ml=3e8;class gl{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new mn(X),this.xs=new di(e=>Vr(e),Hr),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Uo(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function yl(e,t,n,r){return new gl(e,t,n,r)}async function vl(e,t){const n=L(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let a=Si();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({Ls:e,removedBatchIds:i,addedBatchIds:s}))})})}function wl(e){const t=L(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function bl(e,t,n){let r=Si(),i=Si();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=fi();return n.forEach((n,s)=>{const a=e.get(n);s.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(we.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):T(pl,"Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),{ks:r,qs:i}})}function xl(e,t){const n=L(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=Xe),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function Sl(e,t){const n=L(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Pi.getTargetData(e,t).next(i=>i?(r=i,De.resolve(r)):n.Pi.allocateTargetId(e).next(i=>(r=new oa(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}async function Al(e,t,n){const r=L(e),i=r.Ms.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!Ue(e))throw e;T(pl,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function El(e,t,n){const r=L(e);let i=we.min(),s=Si();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=L(e),i=r.xs.get(n);return void 0!==i?De.resolve(r.Ms.get(i)):r.Pi.getTargetData(t,n)}(r,e,ei(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Fs.getDocumentsMatchingQuery(e,t,n?i:we.min(),n?s:Si())).next(e=>(_l(r,li(t),e),{documents:e,Qs:s})))}function Nl(e,t){const n=L(e),r=L(n.Pi),i=n.Ms.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",e=>r.At(e,t).next(e=>e?e.target:null))}function Cl(e,t){const n=L(e),r=n.Os.get(t)||we.min();return n.persistence.runTransaction("Get new document changes","readonly",e=>n.Ns.getAllFromCollectionGroup(e,t,Ce(r,be),Number.MAX_SAFE_INTEGER)).then(e=>(_l(n,t,e),e))}function _l(e,t,n){let r=e.Os.get(t)||we.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Os.set(t,r)}const Tl="firestore_clients";function Il(e,t){return"".concat(Tl,"_").concat(e,"_").concat(t)}const kl="firestore_mutations";function Pl(e,t,n){let r="".concat(kl,"_").concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}const Rl="firestore_targets";function Dl(e,t){return"".concat(Rl,"_").concat(e,"_").concat(t)}const Ol="SharedClientState";class Ll{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Ws(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new F(r.error.code,r.error.message))),s?new Ll(e,t,r.state,i):(I(Ol,"Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ml{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Ws(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new F(n.error.code,n.error.message))),i?new Ml(e,n.state,r):(I(Ol,"Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Fl{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Ei();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=Ze(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new Fl(e,i):(I(Ol,"Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class jl{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new jl(t.clientId,t.onlineState):(I(Ol,"Failed to parse online state: ".concat(e)),null)}}class Bl{constructor(){this.activeTargetIds=Ei()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ul{constructor(e,t,n,r,i){this.window=e,this.Mi=t,this.persistenceKey=n,this.Js=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new mn(X),this.started=!1,this.Xs=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.eo=Il(this.persistenceKey,this.Js),this.no=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new Bl),this.ro=new RegExp("^".concat(Tl,"_").concat(s,"_([^_]*)$")),this.io=new RegExp("^".concat(kl,"_").concat(s,"_(\\d+)(?:_(.*))?$")),this.so=new RegExp("^".concat(Rl,"_").concat(s,"_(\\d+)$")),this.oo=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this._o=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const n of e){if(n===this.Js)continue;const e=this.getItem(Il(this.persistenceKey,n));if(e){const t=Fl.Ws(n,e);t&&(this.Zs=this.Zs.insert(t.clientId,t))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const e=this.uo(t);e&&this.co(e)}for(const n of this.Xs)this.Ys(n);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,n){this.ho(e,t,n),this.Po(e)}addLocalQueryTarget(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="not-current";if(this.isActiveQueryTarget(e)){const t=this.storage.getItem(Dl(this.persistenceKey,e));if(t){const r=Ml.Ws(e,t);r&&(n=r.state)}}return t&&this.To.zs(e),this.ao(),n}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Dl(this.persistenceKey,e))}updateQueryState(e,t,n){this.Io(e,t,n)}handleUserChange(e,t,n){t.forEach(e=>{this.Po(e)}),this.currentUser=e,n.forEach(e=>{this.addPendingMutation(e)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return T(Ol,"READ",e,t),t}setItem(e,t){T(Ol,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){T(Ol,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(T(Ol,"EVENT",t.key,t.newValue),t.key===this.eo)return void I("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(null!==t.key)if(this.ro.test(t.key)){if(null==t.newValue){const e=this.Ro(t.key);return this.Vo(e,null)}{const e=this.mo(t.key,t.newValue);if(e)return this.Vo(e.clientId,e)}}else if(this.io.test(t.key)){if(null!==t.newValue){const e=this.fo(t.key,t.newValue);if(e)return this.po(e)}}else if(this.so.test(t.key)){if(null!==t.newValue){const e=this.yo(t.key,t.newValue);if(e)return this.wo(e)}}else if(t.key===this.oo){if(null!==t.newValue){const e=this.uo(t.newValue);if(e)return this.co(e)}}else if(t.key===this.no){const e=function(e){let t=Ye.ce;if(null!=e)try{const n=JSON.parse(e);O("number"==typeof n,30636,{So:e}),t=n}catch(e){I(Ol,"Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Ye.ce&&this.sequenceNumberHandler(e)}else if(t.key===this._o){const e=this.bo(t.newValue);await Promise.all(e.map(e=>this.syncEngine.Do(e)))}}else this.Xs.push(t)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,n){const r=new Ll(this.currentUser,e,t,n),i=Pl(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Gs())}Po(e){const t=Pl(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,n){const r=Dl(this.persistenceKey,e),i=new Ml(e,t,n);this.setItem(r,i.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const n=this.Ro(e);return Fl.Ws(n,t)}fo(e,t){const n=this.io.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Ll.Ws(new E(i),r,t)}yo(e,t){const n=this.so.exec(e),r=Number(n[1]);return Ml.Ws(r,t)}uo(e){return jl.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);T(Ol,"Ignoring mutation for non-active user ".concat(e.user.uid))}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const n=t?this.Zs.insert(e,t):this.Zs.remove(e),r=this.lo(this.Zs),i=this.lo(n),s=[],a=[];return i.forEach(e=>{r.has(e)||s.push(e)}),r.forEach(e=>{i.has(e)||a.push(e)}),this.syncEngine.Fo(s,a).then(()=>{this.Zs=n})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=Ei();return e.forEach((e,n)=>{t=t.unionWith(n.activeTargetIds)}),t}}class zl{constructor(){this.Mo=new Bl,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Bl,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Vl{Oo(e){}shutdown(){}}const Hl="ConnectivityMonitor";class Wl{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){T(Hl,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){T(Hl,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let ql=null;function Gl(){return null===ql?ql=268435456+Math.round(2147483648*Math.random()):ql++,"0x"+ql.toString(16)}const Kl="RestConnection",Yl={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Xl{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko="projects/".concat(n,"/databases/").concat(r),this.Wo=this.databaseId.database===Mn?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Go(e,t,n,r,i){const s=Gl(),a=this.zo(e,t.toUriEncodedString());T(Kl,"Sending RPC '".concat(e,"' ").concat(s,":"),a,n);const o={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(o,r,i);const{host:l}=new URL(a),u=(0,c.zJ)(l);return this.Jo(e,a,o,n,u).then(t=>(T(Kl,"Received RPC '".concat(e,"' ").concat(s,": "),t),t),t=>{throw k(Kl,"RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",a,"request:",n),t})}Ho(e,t,n,r,i,s){return this.Go(e,t,n,r,i)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+N,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=Yl[e];return"".concat(this.Uo,"/v1/").concat(t,":").concat(n)}terminate(){}}class Ql{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Jl="WebChannelConnection";class Zl extends Xl{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){const s=Gl();return new Promise((i,a)=>{const o=new h;o.setWithCredentials(!0),o.listenOnce(p.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case m.NO_ERROR:const n=o.getResponseJson();T(Jl,"XHR for RPC '".concat(e,"' ").concat(s," received:"),JSON.stringify(n)),i(n);break;case m.TIMEOUT:T(Jl,"RPC '".concat(e,"' ").concat(s," timed out")),a(new F(M.DEADLINE_EXCEEDED,"Request time out"));break;case m.HTTP_ERROR:const r=o.getStatus();if(T(Jl,"RPC '".concat(e,"' ").concat(s," failed with status:"),r,"response text:",o.getResponseText()),r>0){var t;let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const n=null===(t=e)||void 0===t?void 0:t.error;if(n&&n.status&&n.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(t)>=0?t:M.UNKNOWN}(n.status);a(new F(e,n.message))}else a(new F(M.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new F(M.UNAVAILABLE,"Connection failed."));break;default:R(9055,{l_:e,streamId:s,h_:o.getLastErrorCode(),P_:o.getLastError()})}}finally{T(Jl,"RPC '".concat(e,"' ").concat(s," completed."))}});const l=JSON.stringify(r);T(Jl,"RPC '".concat(e,"' ").concat(s," sending request:"),r),o.send(t,"POST",l,n,15)})}T_(e,t,n){const r=Gl(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=w(),a=v(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.jo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=i.join("");T(Jl,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),o);const u=s.createWebChannel(c,o);this.I_(u);let d=!1,h=!1;const p=new Ql({Yo:t=>{h?T(Jl,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(T(Jl,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),T(Jl,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Zo:()=>u.close()}),m=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return m(u,f.EventType.OPEN,()=>{h||(T(Jl,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),p.o_())}),m(u,f.EventType.CLOSE,()=>{h||(h=!0,T(Jl,"RPC '".concat(e,"' stream ").concat(r," transport closed")),p.a_(),this.E_(u))}),m(u,f.EventType.ERROR,t=>{h||(h=!0,k(Jl,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),p.a_(new F(M.UNAVAILABLE,"The operation could not be completed")))}),m(u,f.EventType.MESSAGE,t=>{if(!h){var n;const i=t.data[0];O(!!i,16349);const s=i,a=(null===s||void 0===s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(a){T(Jl,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=os[e];if(void 0!==t)return us(t)}(t),i=a.message;void 0===n&&(n=M.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),h=!0,p.a_(new F(n,i)),u.close()}else T(Jl,"RPC '".concat(e,"' stream ").concat(r," received:"),i),p.u_(i)}}),m(a,y.STAT_EVENT,t=>{t.stat===g.PROXY?T(Jl,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===g.NOPROXY&&T(Jl,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{p.__()},0),p}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function $l(){return"undefined"!=typeof window?window:null}function ec(){return"undefined"!=typeof document?document:null}function tc(e){return new ks(e,!0)}class nc{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&T("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.V_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const rc="PersistentStream";class ic{constructor(e,t,n,r,i,s,a,o){this.Mi=e,this.S_=n,this.b_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new nc(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===M.RESOURCE_EXHAUSTED?(I(t.toString()),I("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===M.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new F(M.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return T(rc,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(T(rc,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class sc extends ic{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:R(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(O(void 0===t||"string"==typeof t,58123),An.fromBase64String(t||"")):(O(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),An.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?M.UNKNOWN:us(e.code);return new F(t,e.message||"")}(a);n=new Ss(r,i,s,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Us(e,r.document.name),s=Ls(r.document.updateTime),a=r.document.createTime?Ls(r.document.createTime):we.min(),o=new fr({mapValue:{fields:r.document.fields}}),l=mr.newFoundDocument(i,s,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new bs(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Us(e,r.document),s=r.readTime?Ls(r.readTime):we.min(),a=mr.newNoDocument(i,s),o=r.removedTargetIds||[];n=new bs([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Us(e,r.document),s=r.removedTargetIds||[];n=new bs([],s,i,null)}else{if(!("filter"in t))return R(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new as(r,i),a=e.targetId;n=new xs(a,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return we.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?we.min():t.readTime?Ls(t.readTime):we.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=Hs(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Wr(r)?{documents:Xs(e,r)}:{query:Qs(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Ds(e,t.resumeToken);const r=Ps(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(we.min())>0){n.readTime=Rs(e,t.snapshotVersion.toTimestamp());const r=Ps(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return R(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=Hs(this.serializer),t.removeTarget=e,this.q_(t)}}class ac extends ic{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return O(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,O(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){O(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(O(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?Ls(e.updateTime):Ls(t);return n.isEqual(we.min())&&(n=Ls(t)),new zi(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Ls(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=Hs(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Ks(this.serializer,e))};this.q_(t)}}class oc{}class lc extends oc{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new F(M.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[s,a]=i;return this.connection.Go(e,Fs(t,n),r,s,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new F(M.UNKNOWN,e.toString())})}Ho(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[a,o]=s;return this.connection.Ho(e,Fs(t,n),r,a,o,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new F(M.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class cc{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.aa?(I(t),this.aa=!1):T("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const uc="RemoteStore";class dc{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{bc(this)&&(T(uc,"Restarting streams for network reachability change."),await async function(e){const t=L(e);t.Ea.add(4),await fc(t),t.Ra.set("Unknown"),t.Ea.delete(4),await hc(t)}(this))})}),this.Ra=new cc(n,r)}}async function hc(e){if(bc(e))for(const t of e.da)await t(!0)}async function fc(e){for(const t of e.da)await t(!1)}function pc(e,t){const n=L(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),wc(n)?vc(n):Bc(n).O_()&&gc(n,t))}function mc(e,t){const n=L(e),r=Bc(n);n.Ia.delete(t),r.O_()&&yc(n,t),0===n.Ia.size&&(r.O_()?r.L_():bc(n)&&n.Ra.set("Unknown"))}function gc(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(we.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Bc(e).Y_(t)}function yc(e,t){e.Va.Ue(t),Bc(e).Z_(t)}function vc(e){e.Va=new Es({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Bc(e).start(),e.Ra.ua()}function wc(e){return bc(e)&&!Bc(e).x_()&&e.Ia.size>0}function bc(e){return 0===L(e).Ea.size}function xc(e){e.Va=void 0}async function Sc(e){e.Ra.set("Online")}async function Ac(e){e.Ia.forEach((t,n)=>{gc(e,t)})}async function Ec(e,t){xc(e),wc(e)?(e.Ra.ha(t),vc(e)):e.Ra.set("Unknown")}async function Nc(e,t,n){if(e.Ra.set("Online"),t instanceof Ss&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){T(uc,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Cc(e,n)}else if(t instanceof bs?e.Va.Ze(t):t instanceof xs?e.Va.st(t):e.Va.tt(t),!n.isEqual(we.min()))try{const t=await wl(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(An.EMPTY_BYTE_STRING,r.snapshotVersion)),yc(e,t);const i=new oa(r.target,t,n,r.sequenceNumber);gc(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){T(uc,"Failed to raise snapshot:",t),await Cc(e,t)}}async function Cc(e,t,n){if(!Ue(t))throw t;e.Ea.add(1),await fc(e),e.Ra.set("Offline"),n||(n=()=>wl(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{T(uc,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await hc(e)})}function _c(e,t){return t().catch(n=>Cc(e,n,t))}async function Tc(e){const t=L(e),n=Uc(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Xe;for(;Ic(t);)try{const e=await xl(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,kc(t,e)}catch(e){await Cc(t,e)}Pc(t)&&Rc(t)}function Ic(e){return bc(e)&&e.Ta.length<10}function kc(e,t){e.Ta.push(t);const n=Uc(e);n.O_()&&n.X_&&n.ea(t.mutations)}function Pc(e){return bc(e)&&!Uc(e).x_()&&e.Ta.length>0}function Rc(e){Uc(e).start()}async function Dc(e){Uc(e).ra()}async function Oc(e){const t=Uc(e);for(const n of e.Ta)t.ea(n.mutations)}async function Lc(e,t,n){const r=e.Ta.shift(),i=is.from(r,t,n);await _c(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await Tc(e)}async function Mc(e,t){t&&Uc(e).X_&&await async function(e,t){if(function(e){return cs(e)&&e!==M.ABORTED}(t.code)){const n=e.Ta.shift();Uc(e).B_(),await _c(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Tc(e)}}(e,t),Pc(e)&&Rc(e)}async function Fc(e,t){const n=L(e);n.asyncQueue.verifyOperationInProgress(),T(uc,"RemoteStore received new credentials");const r=bc(n);n.Ea.add(3),await fc(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await hc(n)}async function jc(e,t){const n=L(e);t?(n.Ea.delete(2),await hc(n)):t||(n.Ea.add(2),await fc(n),n.Ra.set("Unknown"))}function Bc(e){return e.ma||(e.ma=function(e,t,n){const r=L(e);return r.sa(),new sc(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:Sc.bind(null,e),t_:Ac.bind(null,e),r_:Ec.bind(null,e),H_:Nc.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),wc(e)?vc(e):e.Ra.set("Unknown")):(await e.ma.stop(),xc(e))})),e.ma}function Uc(e){return e.fa||(e.fa=function(e,t,n){const r=L(e);return r.sa(),new ac(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Dc.bind(null,e),r_:Mc.bind(null,e),ta:Oc.bind(null,e),na:Lc.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Tc(e)):(await e.fa.stop(),e.Ta.length>0&&(T(uc,"Stopping write stream with ".concat(e.Ta.length," pending writes")),e.Ta=[]))})),e.fa}class zc{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new j,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,a=new zc(e,t,s,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new F(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vc(e,t){if(I("AsyncQueue","".concat(t,": ").concat(e)),Ue(e))return new F(M.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Hc{static emptySet(e){return new Hc(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||oe.comparator(t.key,n.key):(e,t)=>oe.comparator(e.key,t.key),this.keyedMap=mi(),this.sortedSet=new mn(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Hc))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Hc;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Wc{constructor(){this.ga=new mn(oe.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):R(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class qc{constructor(e,t,n,r,i,s,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new qc(e,t,Hc.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ii(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Gc{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Kc{constructor(){this.queries=Yc(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=L(e),r=n.queries;n.queries=Yc(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new F(M.ABORTED,"Firestore shutting down"))}}function Yc(){return new di(e=>si(e),ii)}async function Xc(e,t){const n=L(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.ba()&&t.Da()&&(r=2):(s=new Gc,r=t.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Vc(e,"Initialization of query '".concat(ai(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.Sa.push(t),t.va(n.onlineState),s.wa&&t.Fa(s.wa)&&$c(n)}async function Qc(e,t){const n=L(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.Sa.indexOf(t);e>=0&&(s.Sa.splice(e,1),0===s.Sa.length?i=t.Da()?0:1:!s.ba()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Jc(e,t){const n=L(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Fa(i)&&(r=!0);t.wa=i}}r&&$c(n)}function Zc(e,t,n){const r=L(e),i=r.queries.get(t);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(t)}function $c(e){e.Ca.forEach(e=>{e.next()})}var eu,tu;(tu=eu||(eu={})).Ma="default",tu.Cache="cache";class nu{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new qc(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=qc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==eu.Cache}}class ru{constructor(e){this.key=e}}class iu{constructor(e){this.key=e}}class su{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Si(),this.mutatedKeys=Si(),this.eu=ci(e),this.tu=new Hc(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new Wc,r=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=oi(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.su(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.eu(u,o)>0||l&&this.eu(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(s=s.add(u),i=h?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:s,iu:n,Cs:a,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return R(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=null!==r&&void 0!==r&&r;const a=t&&!r?this._u():[],o=0===this.Xa.size&&this.current&&!r?1:0,l=o!==this.Za;return this.Za=o,0!==s.length||l?{snapshot:new qc(this.query,e.tu,i,s,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Wc,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Si(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new iu(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new ru(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=Si();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return qc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const au="SyncEngine";class ou{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class lu{constructor(e){this.key=e,this.hu=!1}}class cu{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new di(e=>si(e),ii),this.Iu=new Map,this.Eu=new Set,this.du=new mn(oe.comparator),this.Au=new Map,this.Ru=new Wo,this.Vu={},this.mu=new Map,this.fu=go.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function uu(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Bu(e);let i;const s=r.Tu.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await hu(r,t,n,!0),i}async function du(e,t){const n=Bu(e);await hu(n,t,!0,!1)}async function hu(e,t,n,r){const i=await Sl(e.localStore,ei(t)),s=i.targetId,a=e.sharedClientState.addLocalQueryTarget(s,n);let o;return r&&(o=await fu(e,t,s,"current"===a,i.resumeToken)),e.isPrimaryClient&&n&&pc(e.remoteStore,i),o}async function fu(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Cs&&(i=await El(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,i)}));const s=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s,a);return Nu(e,t.targetId,o.au),o.snapshot}(e,t,n,r);const s=await El(e.localStore,t,!0),a=new su(t,s.Qs),o=a.ru(s.documents),l=ws.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=a.applyChanges(o,e.isPrimaryClient,l);Nu(e,n,c.au);const u=new ou(t,n,a);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),c.snapshot}async function pu(e,t,n){const r=L(e),i=r.Tu.get(t),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(e=>!ii(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Al(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&mc(r.remoteStore,i.targetId),Au(r,i.targetId)}).catch(Re)):(Au(r,i.targetId),await Al(r.localStore,i.targetId,!0))}async function mu(e,t){const n=L(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),mc(n.remoteStore,r.targetId))}async function gu(e,t){const n=L(e);try{const e=await function(e,t){const n=L(e),r=t.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];t.targetChanges.forEach((s,o)=>{const l=i.get(o);if(!l)return;a.push(n.Pi.removeMatchingKeys(e,s.removedDocuments,o).next(()=>n.Pi.addMatchingKeys(e,s.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(An.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=ml||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,s)&&a.push(n.Pi.updateTargetData(e,c))});let o=fi(),l=Si();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(bl(e,s,t.documentUpdates).next(e=>{o=e.ks,l=e.qs})),!r.isEqual(we.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return De.waitFor(a).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.Ms=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(O(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?O(r.hu,14607):e.removedDocuments.size>0&&(O(r.hu,42227),r.hu=!1))}),await Tu(n,e,t)}catch(e){await Re(e)}}function yu(e,t,n){const r=L(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const i=r.view.va(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=L(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.Sa)i.va(t)&&(r=!0)}),r&&$c(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function vu(e,t,n){const r=L(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Au.get(t),s=i&&i.key;if(s){let e=new mn(oe.comparator);e=e.insert(s,mr.newNoDocument(s,we.min()));const n=Si().add(s),i=new vs(we.min(),new Map,new mn(X),e,n);await gu(r,i),r.du=r.du.remove(s),r.Au.delete(t),_u(r)}else await Al(r.localStore,t,!1).then(()=>Au(r,t,n)).catch(Re)}async function wu(e,t){const n=L(e),r=t.batch.batchId;try{const e=await function(e,t){const n=L(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let a=De.resolve();return s.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);O(null!==s,48541),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Si();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);Su(n,r,null),xu(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Tu(n,e)}catch(e){await Re(e)}}async function bu(e,t,n){const r=L(e);try{const e=await function(e,t){const n=L(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(O(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);Su(r,t,n),xu(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Tu(r,e)}catch(n){await Re(n)}}function xu(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function Su(e,t,n){const r=L(e);let i=r.Vu[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function Au(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||Eu(e,t)})}function Eu(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(mc(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),_u(e))}function Nu(e,t,n){for(const r of n)r instanceof ru?(e.Ru.addReference(r.key,t),Cu(e,r)):r instanceof iu?(T(au,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||Eu(e,r.key)):R(19791,{wu:r})}function Cu(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(T(au,"New document in limbo: "+n),e.Eu.add(r),_u(e))}function _u(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new oe(ie.fromString(t)),r=e.fu.next();e.Au.set(r,new lu(n)),e.du=e.du.insert(n,r),pc(e.remoteStore,new oa(ei(Qr(n.path)),r,"TargetPurposeLimboResolution",Ye.ce))}}async function Tu(e,t,n){const r=L(e),i=[],s=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((e,o)=>{a.push(r.pu(o,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){var t;const i=e?!e.fromCache:null===n||void 0===n||null===(t=n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,i?"current":"not-current")}if(e){i.push(e);const t=dl.As(o.targetId,e);s.push(t)}}))}),await Promise.all(a),r.Pu.H_(i),await async function(e,t){const n=L(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>De.forEach(t,t=>De.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>De.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Ue(e))throw e;T(pl,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ms.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(e,i)}}}(r.localStore,s))}async function Iu(e,t){const n=L(e);if(!n.currentUser.isEqual(t)){T(au,"User change. New user:",t.toKey());const e=await vl(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new F(M.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Tu(n,e.Ls)}}function ku(e,t){const n=L(e),r=n.Au.get(t);if(r&&r.hu)return Si().add(r.key);{let e=Si();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}async function Pu(e,t){const n=L(e),r=await El(n.localStore,t.query,!0),i=t.view.cu(r);return n.isPrimaryClient&&Nu(n,t.targetId,i.au),i}async function Ru(e,t){const n=L(e);return Cl(n.localStore,t).then(e=>Tu(n,e))}async function Du(e,t,n,r){const i=L(e),s=await function(e,t){const n=L(e),r=L(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",e=>r.er(e,t).next(t=>t?n.localDocuments.getDocuments(e,t):De.resolve(null)))}(i.localStore,t);null!==s?("pending"===n?await Tc(i.remoteStore):"acknowledged"===n||"rejected"===n?(Su(i,t,r||null),xu(i,t),function(e,t){L(L(e).mutationQueue).ir(t)}(i.localStore,t)):R(6720,"Unknown batchState",{Su:n}),await Tu(i,s)):T(au,"Cannot apply mutation batch with id: "+t)}async function Ou(e,t,n){const r=L(e),i=[],s=[];for(const a of t){let e;const t=r.Iu.get(a);if(t&&0!==t.length){e=await Sl(r.localStore,ei(t[0]));for(const e of t){const t=r.Tu.get(e),n=await Pu(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await Nl(r.localStore,a);e=await Sl(r.localStore,t),await fu(r,Lu(t),a,!1,e.resumeToken)}i.push(e)}return r.Pu.H_(s),i}function Lu(e){return Xr(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Mu(e){return function(e){return L(L(e).persistence).Ts()}(L(e).localStore)}async function Fu(e,t,n,r){const i=L(e);if(i.gu)return void T(au,"Ignoring unexpected query state notification.");const s=i.Iu.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await Cl(i.localStore,li(s[0])),r=vs.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,An.EMPTY_BYTE_STRING);await Tu(i,e,r);break}case"rejected":await Al(i.localStore,t,!0),Au(i,t,r);break;default:R(64155,n)}}async function ju(e,t,n){const r=Bu(e);if(r.gu){for(const e of t){if(r.Iu.has(e)&&r.sharedClientState.isActiveQueryTarget(e)){T(au,"Adding an already active target "+e);continue}const t=await Nl(r.localStore,e),n=await Sl(r.localStore,t);await fu(r,Lu(t),n.targetId,!1,n.resumeToken),pc(r.remoteStore,n)}for(const e of n)r.Iu.has(e)&&await Al(r.localStore,e,!1).then(()=>{mc(r.remoteStore,e),Au(r,e)}).catch(Re)}}function Bu(e){const t=L(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=gu.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ku.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=vu.bind(null,t),t.Pu.H_=Jc.bind(null,t.eventManager),t.Pu.yu=Zc.bind(null,t.eventManager),t}function Uu(e){const t=L(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=wu.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=bu.bind(null,t),t}class zu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=tc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return yl(this.persistence,new fl,e.initialUser,this.serializer)}Cu(e){return new Qo(Zo.mi,this.serializer)}Du(e){return new zl}async terminate(){var e,t;null!==(e=this.gcScheduler)&&void 0!==e&&e.stop(),null!==(t=this.indexBackfillerScheduler)&&void 0!==t&&t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}zu.provider={build:()=>new zu};class Vu extends zu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){O(this.persistence.referenceDelegate instanceof $o,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new No(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?oo.withCacheSize(this.cacheSizeBytes):oo.DEFAULT;return new Qo(e=>$o.mi(e,t),this.serializer)}}class Hu extends zu{constructor(e,t,n){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Uu(this.xu.syncEngine),await Tc(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return yl(this.persistence,new fl,e.initialUser,this.serializer)}Fu(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new No(n,e.asyncQueue,t)}Mu(e,t){const n=new Ke(t,this.persistence);return new Ge(e.asyncQueue,n)}Cu(e){const t=ul(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?oo.withCacheSize(this.cacheSizeBytes):oo.DEFAULT;return new ol(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,$l(),ec(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new zl}}class Wu extends Hu{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof Ul&&(this.sharedClientState.syncEngine={Co:Du.bind(null,t),vo:Fu.bind(null,t),Fo:ju.bind(null,t),Ts:Mu.bind(null,t),Do:Ru.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji(async e=>{await async function(e,t){const n=L(e);if(Bu(n),Uu(n),!0===t&&!0!==n.gu){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await Ou(n,e.toArray());n.gu=!0,await jc(n.remoteStore,!0);for(const r of t)pc(n.remoteStore,r)}else if(!1===t&&!1!==n.gu){const e=[];let t=Promise.resolve();n.Iu.forEach((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then(()=>(Au(n,i),Al(n.localStore,i,!0))),mc(n.remoteStore,i)}),await t,await Ou(n,e),function(e){const t=L(e);t.Au.forEach((e,n)=>{mc(t.remoteStore,n)}),t.Ru.Jr(),t.Au=new Map,t.du=new mn(oe.comparator)}(n),n.gu=!1,await jc(n.remoteStore,!1)}}(this.xu.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())})}Du(e){const t=$l();if(!Ul.v(t))throw new F(M.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=ul(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ul(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class qu{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>yu(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Iu.bind(null,this.syncEngine),await jc(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Kc}createDatastore(e){const t=tc(e.databaseInfo.databaseId),n=function(e){return new Zl(e)}(e.databaseInfo);return function(e,t,n,r){return new lc(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new dc(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>yu(this.syncEngine,e,0),Wl.v()?new Wl:new Vl)}createSyncEngine(e,t){return function(e,t,n,r,i,s,a){const o=new cu(e,t,n,r,i,s);return a&&(o.gu=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=L(e);T(uc,"RemoteStore shutting down."),t.Ea.add(5),await fc(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),null!==(e=this.datastore)&&void 0!==e&&e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}qu.provider={build:()=>new qu};class Gu{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):I("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const Ku="FirestoreClient";class Yu{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=E.UNAUTHENTICATED,this.clientId=Y.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{T(Ku,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(T(Ku,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new j;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Vc(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Xu(e,t){e.asyncQueue.verifyOperationInProgress(),T(Ku,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await vl(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Qu(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Ju(e);T(Ku,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Fc(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Fc(t.remoteStore,n)),e._onlineComponents=t}async function Ju(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){T(Ku,"Using user provided OfflineComponentProvider");try{await Xu(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===M.FAILED_PRECONDITION||e.code===M.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;k("Error using user provided cache. Falling back to memory cache: "+n),await Xu(e,new zu)}}else T(Ku,"Using default OfflineComponentProvider"),await Xu(e,new Vu(void 0));return e._offlineComponents}async function Zu(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(T(Ku,"Using user provided OnlineComponentProvider"),await Qu(e,e._uninitializedComponentsProvider._online)):(T(Ku,"Using default OnlineComponentProvider"),await Qu(e,new qu))),e._onlineComponents}function $u(e){return Zu(e).then(e=>e.syncEngine)}async function ed(e){const t=await Zu(e),n=t.eventManager;return n.onListen=uu.bind(null,t.syncEngine),n.onUnlisten=pu.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=du.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=mu.bind(null,t.syncEngine),n}function td(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const nd=new Map,rd="firestore.googleapis.com",id=!0;class sd{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new F(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=rd,this.ssl=id}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:id;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=ao;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<So)throw new F(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new F(M.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=td(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new F(M.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new F(M.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new F(M.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ad{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sd({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new F(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new F(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sd(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new U;switch(e.type){case"firstParty":return new W(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new F(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=nd.get(e);t&&(T("ComponentProvider","Removing Datastore"),nd.delete(e),t.terminate())}(this),Promise.resolve()}}class od{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new od(this.firestore,e,this._query)}}class ld{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cd(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ld(this.firestore,e,this._key)}toJSON(){return{type:ld._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(me(t,ld._jsonSchema))return new ld(e,n||null,new oe(ie.fromString(t.referencePath)))}}ld._jsonSchemaVersion="firestore/documentReference/1.0",ld._jsonSchema={type:pe("string",ld._jsonSchemaVersion),referencePath:pe("string")};class cd extends od{constructor(e,t,n){super(e,t,Qr(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ld(this.firestore,null,new oe(e))}withConverter(e){return new cd(this.firestore,e,this._path)}}function ud(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=(0,c.Ku)(e),le("collection","path",t),e instanceof ad){const n=ie.fromString(t,...r);return ue(n),new cd(e,null,n)}{if(!(e instanceof ld||e instanceof cd))throw new F(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ie.fromString(t,...r));return ue(n),new cd(e.firestore,null,n)}}function dd(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=(0,c.Ku)(e),1===arguments.length&&(t=Y.newId()),le("doc","path",t),e instanceof ad){const n=ie.fromString(t,...r);return ce(n),new ld(e,null,new oe(n))}{if(!(e instanceof ld||e instanceof cd))throw new F(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ie.fromString(t,...r));return ce(n),new ld(e.firestore,e instanceof cd?e.converter:null,new oe(n))}}const hd="AsyncQueue";class fd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new nc(this,"async_queue_retry"),this._c=()=>{const e=ec();e&&T(hd,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=ec();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=ec();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new j;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ue(e))throw e;T(hd,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,I("INTERNAL UNHANDLED ERROR: ",pd(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=zc.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&R(47125,{Pc:pd(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function pd(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function md(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class gd extends ad{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new fd,this._persistenceKey=(null===r||void 0===r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new fd(e),this._firestoreClient=void 0,await e}}}function yd(e,t){const n="object"==typeof e?e:(0,a.Sx)(),r="string"==typeof e?e:t||Mn,i=(0,a.j6)(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=(0,c.yU)("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=fe(e,ad);const i=(0,c.zJ)(t),a=e._getSettings(),o=(0,s.A)((0,s.A)({},a),{},{emulatorOptions:e._getEmulatorOptions()}),l="".concat(t,":").concat(n);i&&((0,c.gE)("https://".concat(l)),(0,c.P1)("Firestore",!0)),a.host!==rd&&a.host!==l&&k("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=(0,s.A)((0,s.A)({},a),{},{host:l,ssl:i,emulatorOptions:r});if(!(0,c.bD)(u,o)&&(e._setSettings(u),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=E.MOCK_USER;else{var d;t=(0,c.Fy)(r.mockUserToken,null===(d=e._app)||void 0===d?void 0:d.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new F(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new E(i)}e._authCredentials=new z(new B(t,n))}}(i,...e)}return i}function vd(e){if(e._terminated)throw new F(M.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||wd(e),e._firestoreClient}function wd(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Ln(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,td(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new Yu(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null===e||void 0===e?void 0:e._online.build();return{_offline:null===e||void 0===e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class bd{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bd(An.fromBase64String(e))}catch(e){throw new F(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new bd(An.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:bd._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(me(e,bd._jsonSchema))return bd.fromBase64String(e.bytes)}}bd._jsonSchemaVersion="firestore/bytes/1.0",bd._jsonSchema={type:pe("string",bd._jsonSchemaVersion),bytes:pe("string")};class xd{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new F(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ae(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Sd{constructor(e){this._methodName=e}}class Ad{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new F(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new F(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return X(this._lat,e._lat)||X(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ad._jsonSchemaVersion}}static fromJSON(e){if(me(e,Ad._jsonSchema))return new Ad(e.latitude,e.longitude)}}Ad._jsonSchemaVersion="firestore/geoPoint/1.0",Ad._jsonSchema={type:pe("string",Ad._jsonSchemaVersion),latitude:pe("number"),longitude:pe("number")};class Ed{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ed._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(me(e,Ed._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new Ed(e.vectorValues);throw new F(M.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ed._jsonSchemaVersion="firestore/vectorValue/1.0",Ed._jsonSchema={type:pe("string",Ed._jsonSchemaVersion),vectorValues:pe("object")};const Nd=/^__.*__$/;class Cd{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Ji(e,this.data,this.fieldMask,t,this.fieldTransforms):new Qi(e,this.data,t,this.fieldTransforms)}}class _d{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Ji(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Td(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw R(40011,{Ac:e})}}class Id{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Id((0,s.A)((0,s.A)({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return qd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(Td(this.Ac)&&Nd.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class kd{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||tc(e)}Cc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Id({Ac:e,methodName:t,Dc:n,path:ae.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Pd(e){const t=e._freezeSettings(),n=tc(e._databaseId);return new kd(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Rd(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Cc(s.merge||s.mergeFields?2:0,t,n,i);zd("Data must be an object, but it was:",a,r);const o=Bd(r,a);let l,c;if(s.merge)l=new xn(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Vd(t,r,n);if(!a.contains(i))throw new F(M.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));Gd(e,i)||e.push(i)}l=new xn(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new Cd(new fr(o),l,c)}class Dd extends Sd{_toFieldTransform(e){if(2!==e.Ac)throw 1===e.Ac?e.Sc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Sc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Dd}}class Od extends Sd{_toFieldTransform(e){return new Ui(e.path,new Ri)}isEqual(e){return e instanceof Od}}function Ld(e,t,n,r){const i=e.Cc(1,t,n);zd("Data must be an object, but it was:",i,r);const s=[],a=fr.empty();fn(r,(e,r)=>{const o=Wd(t,e,n);r=(0,c.Ku)(r);const l=i.yc(o);if(r instanceof Dd)s.push(o);else{const e=jd(r,l);null!=e&&(s.push(o),a.set(o,e))}});const o=new xn(s);return new _d(a,o,i.fieldTransforms)}function Md(e,t,n,r,i,s){const a=e.Cc(1,t,n),o=[Vd(t,r,n)],l=[i];if(s.length%2!=0)throw new F(M.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let c=0;c<s.length;c+=2)o.push(Vd(t,s[c])),l.push(s[c+1]);const u=[],d=fr.empty();for(let f=o.length-1;f>=0;--f)if(!Gd(u,o[f])){const e=o[f];let t=l[f];t=(0,c.Ku)(t);const n=a.yc(e);if(t instanceof Dd)u.push(e);else{const r=jd(t,n);null!=r&&(u.push(e),d.set(e,r))}}const h=new xn(u);return new _d(d,h,a.fieldTransforms)}function Fd(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return jd(n,e.Cc(r?4:3,t))}function jd(e,t){if(Ud(e=(0,c.Ku)(e)))return zd("Unsupported field value:",t,e),Bd(e,t);if(e instanceof Sd)return function(e,t){if(!Td(t.Ac))throw t.Sc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Sc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=jd(i,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,c.Ku)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return _i(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ve.fromDate(e);return{timestampValue:Rs(t.serializer,n)}}if(e instanceof ve){const n=new ve(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Rs(t.serializer,n)}}if(e instanceof Ad)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof bd)return{bytesValue:Ds(t.serializer,e._byteString)};if(e instanceof ld){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Ms(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Ed)return function(e,t){return{mapValue:{fields:{[jn]:{stringValue:zn},[Vn]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return Ni(t.serializer,e)})}}}}}}(e,t);throw t.Sc("Unsupported field value: ".concat(he(e)))}(e,t)}function Bd(e,t){const n={};return pn(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):fn(e,(e,r)=>{const i=jd(r,t.mc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function Ud(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ve||e instanceof Ad||e instanceof bd||e instanceof ld||e instanceof Sd||e instanceof Ed)}function zd(e,t,n){if(!Ud(n)||!de(n)){const r=he(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function Vd(e,t,n){if((t=(0,c.Ku)(t))instanceof xd)return t._internalPath;if("string"==typeof t)return Wd(e,t);throw qd("Field path arguments must be of type string or ",e,!1,void 0,n)}const Hd=new RegExp("[~\\*/\\[\\]]");function Wd(e,t,n){if(t.search(Hd)>=0)throw qd("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new xd(...t.split("."))._internalPath}catch(r){throw qd("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function qd(e,t,n,r,i){const s=r&&!r.isEmpty(),a=void 0!==i;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=" in field ".concat(r)),a&&(l+=" in document ".concat(i)),l+=")"),new F(M.INVALID_ARGUMENT,o+e+l)}function Gd(e,t){return e.some(e=>e.isEqual(t))}class Kd{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ld(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Yd(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Xd("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Yd extends Kd{data(){return super.data()}}function Xd(e,t){return"string"==typeof t?Wd(e,t):t instanceof xd?t._internalPath:t._delegate._internalPath}function Qd(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new F(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Jd{}class Zd extends Jd{}function $d(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof Jd&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof nh).length,n=e.filter(e=>e instanceof eh).length;if(t>1||t>0&&n>0)throw new F(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class eh extends Zd{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new eh(e,t,n)}_apply(e){const t=this._parse(e);return sh(e._query,t),new od(e.firestore,e.converter,ni(e._query,t))}_parse(e){const t=Pd(e.firestore),n=function(e,t,n,r,i,s,a){let o;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new F(M.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){ih(a,s);const t=[];for(const n of a)t.push(rh(r,e,n));o={arrayValue:{values:t}}}else o=rh(r,e,a)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||ih(a,s),o=Fd(n,t,a,"in"===s||"not-in"===s);return Sr.create(i,s,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function th(e,t,n){const r=t,i=Xd("where",e);return eh._create(i,r,n)}class nh extends Jd{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new nh(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:Ar.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)sh(n,i),n=ni(n,i)}(e._query,t),new od(e.firestore,e.converter,ni(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function rh(e,t,n){if("string"==typeof(n=(0,c.Ku)(n))){if(""===n)throw new F(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Zr(t)&&-1!==n.indexOf("/"))throw new F(M.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(ie.fromString(n));if(!oe.isDocumentKey(r))throw new F(M.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return $n(e,new oe(r))}if(n instanceof ld)return $n(e,n._key);throw new F(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(he(n),"."))}function ih(e,t){if(!Array.isArray(e)||0===e.length)throw new F(M.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function sh(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new F(M.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new F(M.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class ah{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Wn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Cn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(_n(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw R(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return fn(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t;const n=null===(t=e.fields)||void 0===t||null===(t=t[Vn].arrayValue)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.map(e=>Cn(e.doubleValue));return new Ed(n)}convertGeoPoint(e){return new Ad(Cn(e.latitude),Cn(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Dn(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(On(e));default:return null}}convertTimestamp(e){const t=Nn(e);return new ve(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ie.fromString(e);O(aa(n),9688,{name:e});const r=new Fn(n.get(1),n.get(3)),i=new oe(n.popFirst(5));return r.isEqual(t)||I("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function oh(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class lh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ch extends Kd{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new uh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Xd("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new F(M.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ch._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}ch._jsonSchemaVersion="firestore/documentSnapshot/1.0",ch._jsonSchema={type:pe("string",ch._jsonSchemaVersion),bundleSource:pe("string","DocumentSnapshot"),bundleName:pe("string"),bundle:pe("string")};class uh extends ch{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class dh{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new lh(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new uh(this._firestore,this._userDataWriter,n.key,n,new lh(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new F(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new uh(e._firestore,e._userDataWriter,n.doc.key,n.doc,new lh(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new uh(e._firestore,e._userDataWriter,t.doc.key,t.doc,new lh(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:hh(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new F(M.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=dh._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Y.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function hh(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return R(61501,{type:e})}}dh._jsonSchemaVersion="firestore/querySnapshot/1.0",dh._jsonSchema={type:pe("string",dh._jsonSchemaVersion),bundleSource:pe("string","QuerySnapshot"),bundleName:pe("string"),bundle:pe("string")};class fh extends ah{constructor(e){super(),this.firestore=e}convertBytes(e){return new bd(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ld(this.firestore,null,t)}}function ph(e,t,n){e=fe(e,ld);const r=fe(e.firestore,gd),i=Pd(r);let s;for(var a=arguments.length,o=new Array(a>3?a-3:0),l=3;l<a;l++)o[l-3]=arguments[l];return s="string"==typeof(t=(0,c.Ku)(t))||t instanceof xd?Md(i,"updateDoc",e._key,t,n,o):Ld(i,"updateDoc",e._key,t),vh(r,[s.toMutation(e._key,Vi.exists(!0))])}function mh(e){return vh(fe(e.firestore,gd),[new ts(e._key,Vi.none())])}function gh(e,t){const n=fe(e.firestore,gd),r=dd(e),i=oh(e.converter,t);return vh(n,[Rd(Pd(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Vi.exists(!1))]).then(()=>r)}function yh(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e=(0,c.Ku)(e);let i={includeMetadataChanges:!1,source:"default"},s=0;"object"!=typeof n[s]||md(n[s])||(i=n[s++]);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(md(n[s])){var o,l,u;const e=n[s];n[s]=null===(o=e.next)||void 0===o?void 0:o.bind(e),n[s+1]=null===(l=e.error)||void 0===l?void 0:l.bind(e),n[s+2]=null===(u=e.complete)||void 0===u?void 0:u.bind(e)}let d,h,f;if(e instanceof ld)h=fe(e.firestore,gd),f=Qr(e._key.path),d={next:t=>{n[s]&&n[s](wh(h,e,t))},error:n[s+1],complete:n[s+2]};else{const t=fe(e,od);h=fe(t.firestore,gd),f=t._query;const r=new fh(h);d={next:e=>{n[s]&&n[s](new dh(h,r,t,e))},error:n[s+1],complete:n[s+2]},Qd(e._query)}return function(e,t,n,r){const i=new Gu(r),s=new nu(t,i,n);return e.asyncQueue.enqueueAndForget(async()=>Xc(await ed(e),s)),()=>{i.Nu(),e.asyncQueue.enqueueAndForget(async()=>Qc(await ed(e),s))}}(vd(h),f,a,d)}function vh(e,t){return function(e,t){const n=new j;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=Uu(e);try{const e=await function(e,t){const n=L(e),r=ve.now(),i=t.reduce((e,t)=>e.add(t.key),Si());let s,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=fi(),l=Si();return n.Ns.getEntries(e,i).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(i=>{s=i;const a=[];for(const e of t){const t=Yi(e,s.get(e.key).overlayedDocument);null!=t&&a.push(new Ji(e.key,t,pr(t.value.mapValue),Vi.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:gi(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new mn(X)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await Tu(r,e.changes),await Tc(r.remoteStore)}catch(e){const t=Vc(e,"Failed to persist write");n.reject(t)}}(await $u(e),t,n)),n.promise}(vd(e),t)}function wh(e,t,n){const r=n.docs.get(t._key),i=new fh(e);return new ch(e,i,t._key,r,new lh(n.hasPendingWrites,n.fromCache),t.converter)}class bh{constructor(e){let t;this.kind="persistent",null!==e&&void 0!==e&&e.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=function(e){return new Sh(null===e||void 0===e?void 0:e.forceOwnership)}(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function xh(e){return new bh(e)}class Sh{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=qu.provider,this._offlineComponentProvider={build:t=>new Hu(t,null===e||void 0===e?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class Ah{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=qu.provider,this._offlineComponentProvider={build:t=>new Wu(t,null===e||void 0===e?void 0:e.cacheSizeBytes)}}}function Eh(){return new Ah}function Nh(){return new Od("serverTimestamp")}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){N=e}(a.MF),(0,a.om)(new o.uA("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const a=e.getProvider("app").getImmediate(),o=new gd(new V(e.getProvider("auth-internal")),new G(a,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new F(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fn(e.options.projectId,t)}(a,r),a);return i=(0,s.A)({useFetchStreams:t},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),(0,a.KO)(S,A,e),(0,a.KO)(S,A,"esm2020")}()},6672:(e,t,n)=>{"use strict";var r=n(5043);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var a={d:{f:s,r:function(){throw Error(i(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},o=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(i(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:o,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=a.p;try{if(l.T=null,a.p=2,e)return e()}finally{l.T=t,a.p=n,a.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,a.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&a.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),i="string"===typeof t.integrity?t.integrity:void 0,s="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?a.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:s}):"script"===n&&a.d.X(e,{crossOrigin:r,integrity:i,fetchPriority:s,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);a.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&a.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);a.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);a.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else a.d.m(e)},t.requestFormReset=function(e){a.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.2.0"},6860:(e,t,n)=>{"use strict";n.r(t),n.d(t,{auth:()=>l,db:()=>o,default:()=>h,getDeviceId:()=>d,initializeAuth:()=>u});var r=n(1150);(0,r.KO)("firebase","12.5.0","app");var i=n(6667),s=n(4144);const a=(0,r.Wp)({apiKey:"AIzaSyBH57yXo3xno_5jpzC_xPB_X_7Yi0KFRbc",authDomain:"manager-petrol-pump-9e452.firebaseapp.com",projectId:"manager-petrol-pump-9e452",storageBucket:"manager-petrol-pump-9e452.firebasestorage.app",messagingSenderId:"180699454459",appId:"1:180699454459:web:ec2859947a4d34c611495e",measurementId:"G-LX3Y4ZQEXL"}),o=(0,i.aU)(a,{localCache:(0,i.vK)({tabManager:(0,i.K7)()})});console.log("\u2705 Firebase offline persistence enabled (new cache API)");const l=(0,s.xI)(a);let c=!1;const u=()=>c?Promise.resolve():new Promise(e=>{const t=(0,s.hg)(l,n=>{t(),n?(console.log("\u2705 User authenticated:",n.email||n.uid),c=!0,e(n)):(console.log("\ud83d\udd12 User not authenticated - login required"),c=!0,e(null))})});u();const d=()=>{let e=localStorage.getItem("deviceId");return e||(e="device_"+Math.random().toString(36).substr(2,9)+"_"+Date.now(),localStorage.setItem("deviceId",e)),e},h=a},6897:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2509);Object.keys(r).forEach(function(e){"default"===e||t.hasOwnProperty(e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})})},6931:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(9379),i=n(6667),s=n(6860),a=n(8173);const o=new class{constructor(){this.deviceId=(0,s.getDeviceId)(),this.syncEnabled=!0,this.listeners=[],this.initialized=!1}getUserId(){var e;const{auth:t}=n(6860);return(null===(e=t.currentUser)||void 0===e?void 0:e.uid)||null}async initialize(){if(!this.initialized)try{await(0,s.initializeAuth)(),console.log("\u2705 Firebase sync service initialized"),this.initialized=!0,this.startListeners()}catch(e){console.error("\u274c Firebase sync initialization failed:",e)}}setSyncEnabled(e){this.syncEnabled=e,console.log("\ud83d\udd04 Firebase sync ".concat(e?"enabled":"disabled"))}async syncCustomer(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"add";if(this.syncEnabled)try{const n=this.getUserId();if(!n)return void console.log("\ud83d\udcf4 User not authenticated, skipping sync");const a=(0,r.A)((0,r.A)({},e),{},{userId:n,deviceId:this.deviceId,syncedAt:(0,i.O5)(),operation:t});if("add"===t||"update"===t){const t=(0,i.H9)(s.db,"customers",e.id);await(0,i.mZ)(t,a).catch(()=>(0,i.gS)((0,i.rJ)(s.db,"customers"),(0,r.A)((0,r.A)({},a),{},{id:e.id}))),console.log("\u2705 Customer synced:",e.name)}else if("delete"===t){const t=(0,i.H9)(s.db,"customers",e.id);await(0,i.kd)(t),console.log("\u2705 Customer deleted from cloud:",e.name)}}catch(n){console.log("\ud83d\udcf4 Will sync when online:",n.message)}}async syncCreditSale(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"add";if(this.syncEnabled)try{const n=this.getUserId();if(!n)return;const a=(0,r.A)((0,r.A)({},e),{},{userId:n,deviceId:this.deviceId,syncedAt:(0,i.O5)(),operation:t});if("add"===t||"update"===t){const t=(0,i.H9)(s.db,"creditSales",e.id);await(0,i.mZ)(t,a).catch(()=>(0,i.gS)((0,i.rJ)(s.db,"creditSales"),(0,r.A)((0,r.A)({},a),{},{id:e.id}))),console.log("\u2705 Credit sale synced:",e.customerName)}else if("delete"===t){const t=(0,i.H9)(s.db,"creditSales",e.id);await(0,i.kd)(t),console.log("\u2705 Credit sale deleted from cloud:",e.customerName)}}catch(n){console.log("\ud83d\udcf4 Will sync when online:",n.message)}}async syncPayment(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"add";if(this.syncEnabled)try{const n=this.getUserId();if(!n)return;const a=(0,r.A)((0,r.A)({},e),{},{userId:n,deviceId:this.deviceId,syncedAt:(0,i.O5)(),operation:t});if("add"===t||"update"===t){const t=(0,i.H9)(s.db,"payments",e.id);await(0,i.mZ)(t,a).catch(()=>(0,i.gS)((0,i.rJ)(s.db,"payments"),(0,r.A)((0,r.A)({},a),{},{id:e.id}))),console.log("\u2705 Payment synced:",e.customerName)}else if("delete"===t){const t=(0,i.H9)(s.db,"payments",e.id);await(0,i.kd)(t),console.log("\u2705 Payment deleted from cloud:",e.customerName)}}catch(n){console.log("\ud83d\udcf4 Will sync when online:",n.message)}}async syncSettlement(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"add";if(this.syncEnabled)try{const n=this.getUserId();if(!n)return;const a=(0,r.A)((0,r.A)({},e),{},{userId:n,deviceId:this.deviceId,syncedAt:(0,i.O5)(),operation:t});if("add"===t||"update"===t){const t=(0,i.H9)(s.db,"settlements",e.id);await(0,i.mZ)(t,a).catch(()=>(0,i.gS)((0,i.rJ)(s.db,"settlements"),(0,r.A)((0,r.A)({},a),{},{id:e.id}))),console.log("\u2705 Settlement synced")}else if("delete"===t){const t=(0,i.H9)(s.db,"settlements",e.id);await(0,i.kd)(t),console.log("\u2705 Settlement deleted from cloud")}}catch(n){console.log("\ud83d\udcf4 Will sync when online:",n.message)}}async syncSale(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"add";if(this.syncEnabled)try{const n=this.getUserId();if(!n)return;const a=(0,r.A)((0,r.A)({},e),{},{userId:n,deviceId:this.deviceId,syncedAt:(0,i.O5)(),operation:t});if("add"===t||"update"===t){const t=(0,i.H9)(s.db,"sales",e.id);await(0,i.mZ)(t,a).catch(()=>(0,i.gS)((0,i.rJ)(s.db,"sales"),(0,r.A)((0,r.A)({},a),{},{id:e.id}))),console.log("\u2705 Sale synced")}else if("delete"===t){const t=(0,i.H9)(s.db,"sales",e.id);await(0,i.kd)(t),console.log("\u2705 Sale deleted from cloud")}}catch(n){console.log("\ud83d\udcf4 Will sync when online:",n.message)}}async syncIncomeExpense(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"add";if(this.syncEnabled)try{const n=this.getUserId();if(!n)return;const a=(0,r.A)((0,r.A)({},e),{},{userId:n,deviceId:this.deviceId,syncedAt:(0,i.O5)(),operation:t});if("add"===t||"update"===t){const t=(0,i.H9)(s.db,"incomeExpenses",e.id);await(0,i.mZ)(t,a).catch(()=>(0,i.gS)((0,i.rJ)(s.db,"incomeExpenses"),(0,r.A)((0,r.A)({},a),{},{id:e.id}))),console.log("\u2705 Income/Expense synced")}else if("delete"===t){const t=(0,i.H9)(s.db,"incomeExpenses",e.id);await(0,i.kd)(t),console.log("\u2705 Income/Expense deleted from cloud")}}catch(n){console.log("\ud83d\udcf4 Will sync when online:",n.message)}}async syncAllLocalData(){if(this.syncEnabled){console.log("\ud83d\udd04 Starting bulk sync of local data to cloud...");try{const e=a.Ay.getCustomers(),t=a.Ay.getCreditData(),n=a.Ay.getPayments(),r=a.Ay.getSettlements(),i=a.Ay.getSalesData(),s=a.Ay.getIncomeExpenseData();for(const a of e)await this.syncCustomer(a,"add");for(const a of t)await this.syncCreditSale(a,"add");for(const a of n)await this.syncPayment(a,"add");for(const a of r)await this.syncSettlement(a,"add");for(const a of i)await this.syncSale(a,"add");for(const a of s)await this.syncIncomeExpense(a,"add");console.log("\u2705 Bulk sync completed successfully")}catch(e){console.error("\u274c Bulk sync failed:",e)}}}startListeners(){console.log("\ud83d\udc42 Starting Firebase listeners for real-time updates...");const e=this.getUserId();if(!e)return void console.log("\ud83d\udcf4 User not authenticated, skipping listeners");const t=(0,i.aQ)((0,i.P)((0,i.rJ)(s.db,"customers"),(0,i._M)("userId","==",e)),e=>{e.docChanges().forEach(e=>{const t=e.doc.data();if(t.deviceId!==this.deviceId)if("added"===e.type||"modified"===e.type){console.log("\ud83d\udce5 Customer update from another device:",t.name);const e=a.Ay.getCustomers(),n=e.findIndex(e=>e.id===t.id);n>=0?e[n]=t:e.push(t),localStorage.setItem("customers",JSON.stringify(e))}else if("removed"===e.type){console.log("\ud83d\udce5 Customer deleted from another device:",t.name);const e=a.Ay.getCustomers().filter(e=>e.id!==t.id);localStorage.setItem("customers",JSON.stringify(e))}})},e=>{console.log("\ud83d\udcf4 Listener error (will retry when online):",e.message)}),n=(0,i.aQ)((0,i.P)((0,i.rJ)(s.db,"creditSales"),(0,i._M)("userId","==",e)),e=>{e.docChanges().forEach(e=>{const t=e.doc.data();if(t.deviceId!==this.deviceId)if("added"===e.type||"modified"===e.type){console.log("\ud83d\udce5 Credit sale update from another device");const e=a.Ay.getCreditData(),n=e.findIndex(e=>e.id===t.id);n>=0?e[n]=t:e.push(t),localStorage.setItem("creditData",JSON.stringify(e))}else if("removed"===e.type){console.log("\ud83d\udce5 Credit sale deleted from another device");const e=a.Ay.getCreditData().filter(e=>e.id!==t.id);localStorage.setItem("creditData",JSON.stringify(e))}})},e=>{console.log("\ud83d\udcf4 Listener error:",e.message)}),r=(0,i.aQ)((0,i.P)((0,i.rJ)(s.db,"payments"),(0,i._M)("userId","==",e)),e=>{e.docChanges().forEach(e=>{const t=e.doc.data();if(t.deviceId!==this.deviceId)if("added"===e.type||"modified"===e.type){console.log("\ud83d\udce5 Payment update from another device");const e=a.Ay.getPayments(),n=e.findIndex(e=>e.id===t.id);n>=0?e[n]=t:e.push(t),localStorage.setItem("payments",JSON.stringify(e))}else if("removed"===e.type){console.log("\ud83d\udce5 Payment deleted from another device");const e=a.Ay.getPayments().filter(e=>e.id!==t.id);localStorage.setItem("payments",JSON.stringify(e))}})},e=>{console.log("\ud83d\udcf4 Listener error:",e.message)});this.listeners.push(t,n,r)}stopListeners(){this.listeners.forEach(e=>e()),this.listeners=[],console.log("\ud83d\uded1 Firebase listeners stopped")}getSyncStatus(){return{enabled:this.syncEnabled,deviceId:this.deviceId,initialized:this.initialized}}};o.initialize().catch(e=>{console.log("\ud83d\udcf4 Firebase sync will work when online:",e.message)});const l=o},7004:(e,t,n)=>{"use strict";var r=n(8853),i=n(5043),s=n(7950);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function d(e){if(l(e)!==e)throw Error(a(188))}function h(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=h(e)))return t;e=e.sibling}return null}var f=Object.assign,p=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),b=Symbol.for("react.consumer"),x=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),C=Symbol.for("react.lazy");Symbol.for("react.scope");var _=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var T=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var I=Symbol.iterator;function k(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=I&&e[I]||e["@@iterator"])?e:null}var P=Symbol.for("react.client.reference");function R(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===P?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case y:return"Fragment";case w:return"Profiler";case v:return"StrictMode";case A:return"Suspense";case E:return"SuspenseList";case _:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case g:return"Portal";case x:return e.displayName||"Context";case b:return(e._context.displayName||"Context")+".Consumer";case S:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case N:return null!==(t=e.displayName||null)?t:R(e.type)||"Memo";case C:t=e._payload,e=e._init;try{return R(e(t))}catch(n){}}return null}var D=Array.isArray,O=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M={pending:!1,data:null,method:null,action:null},F=[],j=-1;function B(e){return{current:e}}function U(e){0>j||(e.current=F[j],F[j]=null,j--)}function z(e,t){j++,F[j]=e.current,e.current=t}var V,H,W=B(null),q=B(null),G=B(null),K=B(null);function Y(e,t){switch(z(G,t),z(q,e),z(W,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?yd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=vd(t=yd(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}U(W),z(W,e)}function X(){U(W),U(q),U(G)}function Q(e){null!==e.memoizedState&&z(K,e);var t=W.current,n=vd(t,e.type);t!==n&&(z(q,e),z(W,n))}function J(e){q.current===e&&(U(W),U(q)),K.current===e&&(U(K),uh._currentValue=M)}function Z(e){if(void 0===V)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);V=t&&t[1]||"",H=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+V+e+H}var $=!1;function ee(e,t){if(!e||$)return"";$=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(i){var r=i}Reflect.construct(e,[],n)}else{try{n.call()}catch(s){r=s}e.call(n.prototype)}}else{try{throw Error()}catch(a){r=a}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(o){if(o&&r&&"string"===typeof o.stack)return[o.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=r.DetermineComponentFrameRoot(),a=s[0],o=s[1];if(a&&o){var l=a.split("\n"),c=o.split("\n");for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===c.length)for(r=l.length-1,i=c.length-1;1<=r&&0<=i&&l[r]!==c[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==c[i]){if(1!==r||1!==i)do{if(r--,0>--i||l[r]!==c[i]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=i);break}}}finally{$=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Z(n):""}function te(e,t){switch(e.tag){case 26:case 27:case 5:return Z(e.type);case 16:return Z("Lazy");case 13:return e.child!==t&&null!==t?Z("Suspense Fallback"):Z("Suspense");case 19:return Z("SuspenseList");case 0:case 15:return ee(e.type,!1);case 11:return ee(e.type.render,!1);case 1:return ee(e.type,!0);case 31:return Z("Activity");default:return""}}function ne(e){try{var t="",n=null;do{t+=te(e,n),n=e,e=e.return}while(e);return t}catch(r){return"\nError generating stack: "+r.message+"\n"+r.stack}}var re=Object.prototype.hasOwnProperty,ie=r.unstable_scheduleCallback,se=r.unstable_cancelCallback,ae=r.unstable_shouldYield,oe=r.unstable_requestPaint,le=r.unstable_now,ce=r.unstable_getCurrentPriorityLevel,ue=r.unstable_ImmediatePriority,de=r.unstable_UserBlockingPriority,he=r.unstable_NormalPriority,fe=r.unstable_LowPriority,pe=r.unstable_IdlePriority,me=r.log,ge=r.unstable_setDisableYieldValue,ye=null,ve=null;function we(e){if("function"===typeof me&&ge(e),ve&&"function"===typeof ve.setStrictMode)try{ve.setStrictMode(ye,e)}catch(t){}}var be=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(xe(e)/Se|0)|0},xe=Math.log,Se=Math.LN2;var Ae=256,Ee=262144,Ne=4194304;function Ce(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function _e(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var i=0,s=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var o=134217727&r;return 0!==o?0!==(r=o&~s)?i=Ce(r):0!==(a&=o)?i=Ce(a):n||0!==(n=o&~e)&&(i=Ce(n)):0!==(o=r&~s)?i=Ce(o):0!==a?i=Ce(a):n||0!==(n=r&~e)&&(i=Ce(n)),0===i?0:0!==t&&t!==i&&0===(t&s)&&((s=i&-i)>=(n=t&-t)||32===s&&0!==(4194048&n))?t:i}function Te(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Ie(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ke(){var e=Ne;return 0===(62914560&(Ne<<=1))&&(Ne=4194304),e}function Pe(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Re(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function De(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-be(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|261930&n}function Oe(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-be(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function Le(e,t){var n=t&-t;return 0!==((n=0!==(42&n)?1:Me(n))&(e.suspendedLanes|t))?0:n}function Me(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Fe(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function je(){var e=L.p;return 0!==e?e:void 0===(e=window.event)?32:Ch(e.type)}function Be(e,t){var n=L.p;try{return L.p=e,t()}finally{L.p=n}}var Ue=Math.random().toString(36).slice(2),ze="__reactFiber$"+Ue,Ve="__reactProps$"+Ue,He="__reactContainer$"+Ue,We="__reactEvents$"+Ue,qe="__reactListeners$"+Ue,Ge="__reactHandles$"+Ue,Ke="__reactResources$"+Ue,Ye="__reactMarker$"+Ue;function Xe(e){delete e[ze],delete e[Ve],delete e[We],delete e[qe],delete e[Ge]}function Qe(e){var t=e[ze];if(t)return t;for(var n=e.parentNode;n;){if(t=n[He]||n[ze]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Md(e);null!==e;){if(n=e[ze])return n;e=Md(e)}return t}n=(e=n).parentNode}return null}function Je(e){if(e=e[ze]||e[He]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function Ze(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(a(33))}function $e(e){var t=e[Ke];return t||(t=e[Ke]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function et(e){e[Ye]=!0}var tt=new Set,nt={};function rt(e,t){it(e,t),it(e+"Capture",t)}function it(e,t){for(nt[e]=t,e=0;e<t.length;e++)tt.add(t[e])}var st=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),at={},ot={};function lt(e,t,n){if(i=t,re.call(ot,i)||!re.call(at,i)&&(st.test(i)?ot[i]=!0:(at[i]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var i}function ct(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function ut(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function dt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ht(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ft(e){if(!e._valueTracker){var t=ht(e)?"checked":"value";e._valueTracker=function(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var i=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function pt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ht(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function mt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var gt=/[\n"\\]/g;function yt(e){return e.replace(gt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function vt(e,t,n,r,i,s,a,o){e.name="",null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.type=a:e.removeAttribute("type"),null!=t?"number"===a?(0===t&&""===e.value||e.value!=t)&&(e.value=""+dt(t)):e.value!==""+dt(t)&&(e.value=""+dt(t)):"submit"!==a&&"reset"!==a||e.removeAttribute("value"),null!=t?bt(e,a,dt(t)):null!=n?bt(e,a,dt(n)):null!=r&&e.removeAttribute("value"),null==i&&null!=s&&(e.defaultChecked=!!s),null!=i&&(e.checked=i&&"function"!==typeof i&&"symbol"!==typeof i),null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.name=""+dt(o):e.removeAttribute("name")}function wt(e,t,n,r,i,s,a,o){if(null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.type=s),null!=t||null!=n){if(!("submit"!==s&&"reset"!==s||void 0!==t&&null!==t))return void ft(e);n=null!=n?""+dt(n):"",t=null!=t?""+dt(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:i)&&"symbol"!==typeof r&&!!r,e.checked=o?e.checked:!!r,e.defaultChecked=!!r,null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a&&(e.name=a),ft(e)}function bt(e,t,n){"number"===t&&mt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function xt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+dt(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function St(e,t,n){null==t||((t=""+dt(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+dt(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function At(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(a(92));if(D(r)){if(1<r.length)throw Error(a(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=dt(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r),ft(e)}function Et(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Nt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ct(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||Nt.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function _t(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(a(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var i in t)r=t[i],t.hasOwnProperty(i)&&n[i]!==r&&Ct(e,i,r)}else for(var s in t)t.hasOwnProperty(s)&&Ct(e,s,t[s])}function Tt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var It=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),kt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Pt(e){return kt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Rt(){}var Dt=null;function Ot(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Lt=null,Mt=null;function Ft(e){var t=Je(e);if(t&&(e=t.stateNode)){var n=e[Ve]||null;e:switch(e=t.stateNode,t.type){case"input":if(vt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+yt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=r[Ve]||null;if(!i)throw Error(a(90));vt(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&pt(r)}break e;case"textarea":St(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&xt(e,!!n.multiple,t,!1)}}}var jt=!1;function Bt(e,t,n){if(jt)return e(t,n);jt=!0;try{return e(t)}finally{if(jt=!1,(null!==Lt||null!==Mt)&&($c(),Lt&&(t=Lt,e=Mt,Mt=Lt=null,Ft(t),e)))for(t=0;t<e.length;t++)Ft(e[t])}}function Ut(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Ve]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var zt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Vt=!1;if(zt)try{var Ht={};Object.defineProperty(Ht,"passive",{get:function(){Vt=!0}}),window.addEventListener("test",Ht,Ht),window.removeEventListener("test",Ht,Ht)}catch(Jh){Vt=!1}var Wt=null,qt=null,Gt=null;function Kt(){if(Gt)return Gt;var e,t,n=qt,r=n.length,i="value"in Wt?Wt.value:Wt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return Gt=i.slice(e,1<t?1-t:void 0)}function Yt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Xt(){return!0}function Qt(){return!1}function Jt(e){function t(t,n,r,i,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Xt:Qt,this.isPropagationStopped=Qt,this}return f(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Xt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Xt)},persist:function(){},isPersistent:Xt}),t}var Zt,$t,en,tn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nn=Jt(tn),rn=f({},tn,{view:0,detail:0}),sn=Jt(rn),an=f({},rn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==en&&(en&&"mousemove"===e.type?(Zt=e.screenX-en.screenX,$t=e.screenY-en.screenY):$t=Zt=0,en=e),Zt)},movementY:function(e){return"movementY"in e?e.movementY:$t}}),on=Jt(an),ln=Jt(f({},an,{dataTransfer:0})),cn=Jt(f({},rn,{relatedTarget:0})),un=Jt(f({},tn,{animationName:0,elapsedTime:0,pseudoElement:0})),dn=Jt(f({},tn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),hn=Jt(f({},tn,{data:0})),fn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=mn[e])&&!!t[e]}function yn(){return gn}var vn=Jt(f({},rn,{key:function(e){if(e.key){var t=fn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Yt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?pn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yn,charCode:function(e){return"keypress"===e.type?Yt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Yt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),wn=Jt(f({},an,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),bn=Jt(f({},rn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yn})),xn=Jt(f({},tn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Sn=Jt(f({},an,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),An=Jt(f({},tn,{newState:0,oldState:0})),En=[9,13,27,32],Nn=zt&&"CompositionEvent"in window,Cn=null;zt&&"documentMode"in document&&(Cn=document.documentMode);var _n=zt&&"TextEvent"in window&&!Cn,Tn=zt&&(!Nn||Cn&&8<Cn&&11>=Cn),In=String.fromCharCode(32),kn=!1;function Pn(e,t){switch(e){case"keyup":return-1!==En.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Dn=!1;var On={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ln(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!On[e.type]:"textarea"===t}function Mn(e,t,n,r){Lt?Mt?Mt.push(r):Mt=[r]:Lt=r,0<(t=rd(t,"onChange")).length&&(n=new nn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Fn=null,jn=null;function Bn(e){Xu(e,0)}function Un(e){if(pt(Ze(e)))return e}function zn(e,t){if("change"===e)return t}var Vn=!1;if(zt){var Hn;if(zt){var Wn="oninput"in document;if(!Wn){var qn=document.createElement("div");qn.setAttribute("oninput","return;"),Wn="function"===typeof qn.oninput}Hn=Wn}else Hn=!1;Vn=Hn&&(!document.documentMode||9<document.documentMode)}function Gn(){Fn&&(Fn.detachEvent("onpropertychange",Kn),jn=Fn=null)}function Kn(e){if("value"===e.propertyName&&Un(jn)){var t=[];Mn(t,jn,e,Ot(e)),Bt(Bn,t)}}function Yn(e,t,n){"focusin"===e?(Gn(),jn=n,(Fn=t).attachEvent("onpropertychange",Kn)):"focusout"===e&&Gn()}function Xn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Un(jn)}function Qn(e,t){if("click"===e)return Un(t)}function Jn(e,t){if("input"===e||"change"===e)return Un(t)}var Zn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function $n(e,t){if(Zn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!re.call(t,i)||!Zn(e[i],t[i]))return!1}return!0}function er(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function tr(e,t){var n,r=er(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=er(r)}}function nr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?nr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function rr(e){for(var t=mt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=mt((e=t.contentWindow).document)}return t}function ir(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var sr=zt&&"documentMode"in document&&11>=document.documentMode,ar=null,or=null,lr=null,cr=!1;function ur(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;cr||null==ar||ar!==mt(r)||("selectionStart"in(r=ar)&&ir(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},lr&&$n(lr,r)||(lr=r,0<(r=rd(or,"onSelect")).length&&(t=new nn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ar)))}function dr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var hr={animationend:dr("Animation","AnimationEnd"),animationiteration:dr("Animation","AnimationIteration"),animationstart:dr("Animation","AnimationStart"),transitionrun:dr("Transition","TransitionRun"),transitionstart:dr("Transition","TransitionStart"),transitioncancel:dr("Transition","TransitionCancel"),transitionend:dr("Transition","TransitionEnd")},fr={},pr={};function mr(e){if(fr[e])return fr[e];if(!hr[e])return e;var t,n=hr[e];for(t in n)if(n.hasOwnProperty(t)&&t in pr)return fr[e]=n[t];return e}zt&&(pr=document.createElement("div").style,"AnimationEvent"in window||(delete hr.animationend.animation,delete hr.animationiteration.animation,delete hr.animationstart.animation),"TransitionEvent"in window||delete hr.transitionend.transition);var gr=mr("animationend"),yr=mr("animationiteration"),vr=mr("animationstart"),wr=mr("transitionrun"),br=mr("transitionstart"),xr=mr("transitioncancel"),Sr=mr("transitionend"),Ar=new Map,Er="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nr(e,t){Ar.set(e,t),rt(t,[e])}Er.push("scrollEnd");var Cr="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},_r=[],Tr=0,Ir=0;function kr(){for(var e=Tr,t=Ir=Tr=0;t<e;){var n=_r[t];_r[t++]=null;var r=_r[t];_r[t++]=null;var i=_r[t];_r[t++]=null;var s=_r[t];if(_r[t++]=null,null!==r&&null!==i){var a=r.pending;null===a?i.next=i:(i.next=a.next,a.next=i),r.pending=i}0!==s&&Or(n,i,s)}}function Pr(e,t,n,r){_r[Tr++]=e,_r[Tr++]=t,_r[Tr++]=n,_r[Tr++]=r,Ir|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Rr(e,t,n,r){return Pr(e,t,n,r),Lr(e)}function Dr(e,t){return Pr(e,null,null,t),Lr(e)}function Or(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,s=e.return;null!==s;)s.childLanes|=n,null!==(r=s.alternate)&&(r.childLanes|=n),22===s.tag&&(null===(e=s.stateNode)||1&e._visibility||(i=!0)),e=s,s=s.return;return 3===e.tag?(s=e.stateNode,i&&null!==t&&(i=31-be(n),null===(r=(e=s.hiddenUpdates)[i])?e[i]=[t]:r.push(t),t.lane=536870912|n),s):null}function Lr(e){if(50<Wc)throw Wc=0,qc=null,Error(a(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Mr={};function Fr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jr(e,t,n,r){return new Fr(e,t,n,r)}function Br(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ur(e,t){var n=e.alternate;return null===n?((n=jr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function zr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Vr(e,t,n,r,i,s){var o=0;if(r=e,"function"===typeof e)Br(e)&&(o=1);else if("string"===typeof e)o=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,W.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case _:return(e=jr(31,n,t,i)).elementType=_,e.lanes=s,e;case y:return Hr(n.children,i,s,t);case v:o=8,i|=24;break;case w:return(e=jr(12,n,t,2|i)).elementType=w,e.lanes=s,e;case A:return(e=jr(13,n,t,i)).elementType=A,e.lanes=s,e;case E:return(e=jr(19,n,t,i)).elementType=E,e.lanes=s,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case x:o=10;break e;case b:o=9;break e;case S:o=11;break e;case N:o=14;break e;case C:o=16,r=null;break e}o=29,n=Error(a(130,null===e?"null":typeof e,"")),r=null}return(t=jr(o,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Hr(e,t,n,r){return(e=jr(7,e,r,t)).lanes=n,e}function Wr(e,t,n){return(e=jr(6,e,null,t)).lanes=n,e}function qr(e){var t=jr(18,null,null,0);return t.stateNode=e,t}function Gr(e,t,n){return(t=jr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Kr=new WeakMap;function Yr(e,t){if("object"===typeof e&&null!==e){var n=Kr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ne(t)},Kr.set(e,t),t)}return{value:e,source:t,stack:ne(t)}}var Xr=[],Qr=0,Jr=null,Zr=0,$r=[],ei=0,ti=null,ni=1,ri="";function ii(e,t){Xr[Qr++]=Zr,Xr[Qr++]=Jr,Jr=e,Zr=t}function si(e,t,n){$r[ei++]=ni,$r[ei++]=ri,$r[ei++]=ti,ti=e;var r=ni;e=ri;var i=32-be(r)-1;r&=~(1<<i),n+=1;var s=32-be(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,ni=1<<32-be(t)+i|n<<i|r,ri=s+e}else ni=1<<s|n<<i|r,ri=e}function ai(e){null!==e.return&&(ii(e,1),si(e,1,0))}function oi(e){for(;e===Jr;)Jr=Xr[--Qr],Xr[Qr]=null,Zr=Xr[--Qr],Xr[Qr]=null;for(;e===ti;)ti=$r[--ei],$r[ei]=null,ri=$r[--ei],$r[ei]=null,ni=$r[--ei],$r[ei]=null}function li(e,t){$r[ei++]=ni,$r[ei++]=ri,$r[ei++]=ti,ni=t.id,ri=t.overflow,ti=e}var ci=null,ui=null,di=!1,hi=null,fi=!1,pi=Error(a(519));function mi(e){throw xi(Yr(Error(a(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),pi}function gi(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[ze]=e,t[Ve]=r,n){case"dialog":Qu("cancel",t),Qu("close",t);break;case"iframe":case"object":case"embed":Qu("load",t);break;case"video":case"audio":for(n=0;n<Ku.length;n++)Qu(Ku[n],t);break;case"source":Qu("error",t);break;case"img":case"image":case"link":Qu("error",t),Qu("load",t);break;case"details":Qu("toggle",t);break;case"input":Qu("invalid",t),wt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":Qu("invalid",t);break;case"textarea":Qu("invalid",t),At(t,r.value,r.defaultValue,r.children)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||cd(t.textContent,n)?(null!=r.popover&&(Qu("beforetoggle",t),Qu("toggle",t)),null!=r.onScroll&&Qu("scroll",t),null!=r.onScrollEnd&&Qu("scrollend",t),null!=r.onClick&&(t.onclick=Rt),t=!0):t=!1,t||mi(e,!0)}function yi(e){for(ci=e.return;ci;)switch(ci.tag){case 5:case 31:case 13:return void(fi=!1);case 27:case 3:return void(fi=!0);default:ci=ci.return}}function vi(e){if(e!==ci)return!1;if(!di)return yi(e),di=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||wd(e.type,e.memoizedProps)),t=!t),t&&ui&&mi(e),yi(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));ui=Ld(e)}else if(31===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));ui=Ld(e)}else 27===n?(n=ui,Cd(e.type)?(e=Od,Od=null,ui=e):ui=n):ui=ci?Dd(e.stateNode.nextSibling):null;return!0}function wi(){ui=ci=null,di=!1}function bi(){var e=hi;return null!==e&&(null===kc?kc=e:kc.push.apply(kc,e),hi=null),e}function xi(e){null===hi?hi=[e]:hi.push(e)}var Si=B(null),Ai=null,Ei=null;function Ni(e,t,n){z(Si,t._currentValue),t._currentValue=n}function Ci(e){e._currentValue=Si.current,U(Si)}function _i(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ti(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var s=i.dependencies;if(null!==s){var o=i.child;s=s.firstContext;e:for(;null!==s;){var l=s;s=i;for(var c=0;c<t.length;c++)if(l.context===t[c]){s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),_i(s.return,n,e),r||(o=null);break e}s=l.next}}else if(18===i.tag){if(null===(o=i.return))throw Error(a(341));o.lanes|=n,null!==(s=o.alternate)&&(s.lanes|=n),_i(o,n,e),o=null}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===e){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}}function Ii(e,t,n,r){e=null;for(var i=t,s=!1;null!==i;){if(!s)if(0!==(524288&i.flags))s=!0;else if(0!==(262144&i.flags))break;if(10===i.tag){var o=i.alternate;if(null===o)throw Error(a(387));if(null!==(o=o.memoizedProps)){var l=i.type;Zn(i.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(i===K.current){if(null===(o=i.alternate))throw Error(a(387));o.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(uh):e=[uh])}i=i.return}null!==e&&Ti(t,e,n,r),t.flags|=262144}function ki(e){for(e=e.firstContext;null!==e;){if(!Zn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Pi(e){Ai=e,Ei=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ri(e){return Oi(Ai,e)}function Di(e,t){return null===Ai&&Pi(e),Oi(e,t)}function Oi(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===Ei){if(null===e)throw Error(a(308));Ei=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ei=Ei.next=t;return n}var Li="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Mi=r.unstable_scheduleCallback,Fi=r.unstable_NormalPriority,ji={$$typeof:x,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Bi(){return{controller:new Li,data:new Map,refCount:0}}function Ui(e){e.refCount--,0===e.refCount&&Mi(Fi,function(){e.controller.abort()})}var zi=null,Vi=0,Hi=0,Wi=null;function qi(){if(0===--Vi&&null!==zi){null!==Wi&&(Wi.status="fulfilled");var e=zi;zi=null,Hi=0,Wi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Gi=O.S;O.S=function(e,t){Dc=le(),"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===zi){var n=zi=[];Vi=0,Hi=Vu(),Wi={status:"pending",value:void 0,then:function(e){n.push(e)}}}Vi++,t.then(qi,qi)}(0,t),null!==Gi&&Gi(e,t)};var Ki=B(null);function Yi(){var e=Ki.current;return null!==e?e:pc.pooledCache}function Xi(e,t){z(Ki,null===t?Ki.current:t.pool)}function Qi(){var e=Yi();return null===e?null:{parent:ji._currentValue,pool:e}}var Ji=Error(a(460)),Zi=Error(a(474)),$i=Error(a(542)),es={then:function(){}};function ts(e){return"fulfilled"===(e=e.status)||"rejected"===e}function ns(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Rt,Rt),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw as(e=t.reason),e;default:if("string"===typeof t.status)t.then(Rt,Rt);else{if(null!==(e=pc)&&100<e.shellSuspendCounter)throw Error(a(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw as(e=t.reason),e}throw is=t,Ji}}function rs(e){try{return(0,e._init)(e._payload)}catch(t){if(null!==t&&"object"===typeof t&&"function"===typeof t.then)throw is=t,Ji;throw t}}var is=null;function ss(){if(null===is)throw Error(a(459));var e=is;return is=null,e}function as(e){if(e===Ji||e===$i)throw Error(a(483))}var os=null,ls=0;function cs(e){var t=ls;return ls+=1,null===os&&(os=[]),ns(os,e,t)}function us(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function ds(e,t){if(t.$$typeof===p)throw Error(a(525));throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function hs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=Ur(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Wr(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===y?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===C&&rs(s)===t.type)?(us(t=i(t,n.props),n),t.return=e,t):(us(t=Vr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Gr(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=Hr(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Wr(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case m:return us(n=Vr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case g:return(t=Gr(t,e.mode,n)).return=e,t;case C:return h(e,t=rs(t),n)}if(D(t)||k(t))return(t=Hr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,cs(t),n);if(t.$$typeof===x)return h(e,Di(e,t),n);ds(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case m:return n.key===i?c(e,t,n,r):null;case g:return n.key===i?u(e,t,n,r):null;case C:return f(e,t,n=rs(n),r)}if(D(n)||k(n))return null!==i?null:d(e,t,n,r,null);if("function"===typeof n.then)return f(e,t,cs(n),r);if(n.$$typeof===x)return f(e,t,Di(e,n),r);ds(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case m:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case g:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case C:return p(e,t,n,r=rs(r),i)}if(D(r)||k(r))return d(t,e=e.get(n)||null,r,i,null);if("function"===typeof r.then)return p(e,t,n,cs(r),i);if(r.$$typeof===x)return p(e,t,n,Di(t,r),i);ds(t,r)}return null}function v(l,c,u,d){if("object"===typeof u&&null!==u&&u.type===y&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case m:e:{for(var w=u.key;null!==c;){if(c.key===w){if((w=u.type)===y){if(7===c.tag){n(l,c.sibling),(d=i(c,u.props.children)).return=l,l=d;break e}}else if(c.elementType===w||"object"===typeof w&&null!==w&&w.$$typeof===C&&rs(w)===c.type){n(l,c.sibling),us(d=i(c,u.props),u),d.return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===y?((d=Hr(u.props.children,l.mode,d,u.key)).return=l,l=d):(us(d=Vr(u.type,u.key,u.props,null,l.mode,d),u),d.return=l,l=d)}return o(l);case g:e:{for(w=u.key;null!==c;){if(c.key===w){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(d=i(c,u.children||[])).return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}(d=Gr(u,l.mode,d)).return=l,l=d}return o(l);case C:return v(l,c,u=rs(u),d)}if(D(u))return function(i,a,o,l){for(var c=null,u=null,d=a,m=a=0,g=null;null!==d&&m<o.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=f(i,d,o[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(i,d),a=s(y,a,m),null===u?c=y:u.sibling=y,u=y,d=g}if(m===o.length)return n(i,d),di&&ii(i,m),c;if(null===d){for(;m<o.length;m++)null!==(d=h(i,o[m],l))&&(a=s(d,a,m),null===u?c=d:u.sibling=d,u=d);return di&&ii(i,m),c}for(d=r(d);m<o.length;m++)null!==(g=p(d,i,m,o[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),a=s(g,a,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(i,e)}),di&&ii(i,m),c}(l,c,u,d);if(k(u)){if("function"!==typeof(w=k(u)))throw Error(a(150));return function(i,o,l,c){if(null==l)throw Error(a(151));for(var u=null,d=null,m=o,g=o=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var w=f(i,m,v.value,c);if(null===w){null===m&&(m=y);break}e&&m&&null===w.alternate&&t(i,m),o=s(w,o,g),null===d?u=w:d.sibling=w,d=w,m=y}if(v.done)return n(i,m),di&&ii(i,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=h(i,v.value,c))&&(o=s(v,o,g),null===d?u=v:d.sibling=v,d=v);return di&&ii(i,g),u}for(m=r(m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),o=s(v,o,g),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach(function(e){return t(i,e)}),di&&ii(i,g),u}(l,c,u=w.call(u),d)}if("function"===typeof u.then)return v(l,c,cs(u),d);if(u.$$typeof===x)return v(l,c,Di(l,u),d);ds(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(d=i(c,u)).return=l,l=d):(n(l,c),(d=Wr(u,l.mode,d)).return=l,l=d),o(l)):n(l,c)}return function(e,t,n,r){try{ls=0;var i=v(e,t,n,r);return os=null,i}catch(a){if(a===Ji||a===$i)throw a;var s=jr(29,a,null,e.mode);return s.lanes=r,s.return=e,s}}}var fs=hs(!0),ps=hs(!1),ms=!1;function gs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ys(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function vs(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ws(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&fc)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=Lr(e),Or(e,null,n),t}return Pr(e,r,t,n),Lr(e)}function bs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Oe(e,n)}}function xs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===s?i=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Ss=!1;function As(){if(Ss){if(null!==Wi)throw Wi}}function Es(e,t,n,r){Ss=!1;var i=e.updateQueue;ms=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(a=0,u=c=l=null,o=s;;){var h=-536870913&o.lane,p=h!==o.lane;if(p?(gc&h)===h:(r&h)===h){0!==h&&h===Hi&&(Ss=!0),null!==u&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var m=e,g=o;h=t;var y=n;switch(g.tag){case 1:if("function"===typeof(m=g.payload)){d=m.call(y,d,h);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(h="function"===typeof(m=g.payload)?m.call(y,d,h):m)||void 0===h)break e;d=f({},d,h);break e;case 2:ms=!0}}null!==(h=o.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=i.callbacks)?i.callbacks=[h]:p.push(h))}else p={lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,a|=h;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(p=o).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null===s&&(i.shared.lanes=0),Ec|=a,e.lanes=a,e.memoizedState=d}}function Ns(e,t){if("function"!==typeof e)throw Error(a(191,e));e.call(t)}function Cs(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)Ns(n[e],t)}var _s=B(null),Ts=B(0);function Is(e,t){z(Ts,e=Sc),z(_s,t),Sc=e|t.baseLanes}function ks(){z(Ts,Sc),z(_s,_s.current)}function Ps(){Sc=Ts.current,U(_s),U(Ts)}var Rs=B(null),Ds=null;function Os(e){var t=e.alternate;z(Bs,1&Bs.current),z(Rs,e),null===Ds&&(null===t||null!==_s.current||null!==t.memoizedState)&&(Ds=e)}function Ls(e){z(Bs,Bs.current),z(Rs,e),null===Ds&&(Ds=e)}function Ms(e){22===e.tag?(z(Bs,Bs.current),z(Rs,e),null===Ds&&(Ds=e)):Fs()}function Fs(){z(Bs,Bs.current),z(Rs,Rs.current)}function js(e){U(Rs),Ds===e&&(Ds=null),U(Bs)}var Bs=B(0);function Us(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Pd(n)||Rd(n)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(0!==(128&t.flags))return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var zs=0,Vs=null,Hs=null,Ws=null,qs=!1,Gs=!1,Ks=!1,Ys=0,Xs=0,Qs=null,Js=0;function Zs(){throw Error(a(321))}function $s(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Zn(e[n],t[n]))return!1;return!0}function ea(e,t,n,r,i,s){return zs=s,Vs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,O.H=null===e||null===e.memoizedState?go:yo,Ks=!1,s=n(r,i),Ks=!1,Gs&&(s=na(t,n,r,i)),ta(e),s}function ta(e){O.H=mo;var t=null!==Hs&&null!==Hs.next;if(zs=0,Ws=Hs=Vs=null,qs=!1,Xs=0,Qs=null,t)throw Error(a(300));null===e||Do||null!==(e=e.dependencies)&&ki(e)&&(Do=!0)}function na(e,t,n,r){Vs=e;var i=0;do{if(Gs&&(Qs=null),Xs=0,Gs=!1,25<=i)throw Error(a(301));if(i+=1,Ws=Hs=null,null!=e.updateQueue){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,null!=s.memoCache&&(s.memoCache.index=0)}O.H=vo,s=t(n,r)}while(Gs);return s}function ra(){var e=O.H,t=e.useState()[0];return t="function"===typeof t.then?ca(t):t,e=e.useState()[0],(null!==Hs?Hs.memoizedState:null)!==e&&(Vs.flags|=1024),t}function ia(){var e=0!==Ys;return Ys=0,e}function sa(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function aa(e){if(qs){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}qs=!1}zs=0,Ws=Hs=Vs=null,Gs=!1,Xs=Ys=0,Qs=null}function oa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ws?Vs.memoizedState=Ws=e:Ws=Ws.next=e,Ws}function la(){if(null===Hs){var e=Vs.alternate;e=null!==e?e.memoizedState:null}else e=Hs.next;var t=null===Ws?Vs.memoizedState:Ws.next;if(null!==t)Ws=t,Hs=e;else{if(null===e){if(null===Vs.alternate)throw Error(a(467));throw Error(a(310))}e={memoizedState:(Hs=e).memoizedState,baseState:Hs.baseState,baseQueue:Hs.baseQueue,queue:Hs.queue,next:null},null===Ws?Vs.memoizedState=Ws=e:Ws=Ws.next=e}return Ws}function ca(e){var t=Xs;return Xs+=1,null===Qs&&(Qs=[]),e=ns(Qs,e,t),t=Vs,null===(null===Ws?t.memoizedState:Ws.next)&&(t=t.alternate,O.H=null===t||null===t.memoizedState?go:yo),e}function ua(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return ca(e);if(e.$$typeof===x)return Ri(e)}throw Error(a(438,String(e)))}function da(e){var t=null,n=Vs.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=Vs.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},Vs.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=T;return t.index++,n}function ha(e,t){return"function"===typeof t?t(e):t}function fa(e){return pa(la(),Hs,e)}function pa(e,t,n){var r=e.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=n;var i=e.baseQueue,s=r.pending;if(null!==s){if(null!==i){var o=i.next;i.next=s.next,s.next=o}t.baseQueue=i=s,r.pending=null}if(s=e.baseState,null===i)e.memoizedState=s;else{var l=o=null,c=null,u=t=i.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(gc&h)===h:(zs&h)===h){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Hi&&(d=!0);else{if((zs&f)===f){u=u.next,f===Hi&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,o=s):c=c.next=h,Vs.lanes|=f,Ec|=f}h=u.action,Ks&&n(s,h),s=u.hasEagerState?u.eagerState:n(s,h)}else f={lane:h,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,o=s):c=c.next=f,Vs.lanes|=h,Ec|=h;u=u.next}while(null!==u&&u!==t);if(null===c?o=s:c.next=l,!Zn(s,e.memoizedState)&&(Do=!0,d&&null!==(n=Wi)))throw n;e.memoizedState=s,e.baseState=o,e.baseQueue=c,r.lastRenderedState=s}return null===i&&(r.lanes=0),[e.memoizedState,r.dispatch]}function ma(e){var t=la(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{s=e(s,o.action),o=o.next}while(o!==i);Zn(s,t.memoizedState)||(Do=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function ga(e,t,n){var r=Vs,i=la(),s=di;if(s){if(void 0===n)throw Error(a(407));n=n()}else n=t();var o=!Zn((Hs||i).memoizedState,n);if(o&&(i.memoizedState=n,Do=!0),i=i.queue,za(wa.bind(null,r,i,e),[e]),i.getSnapshot!==t||o||null!==Ws&&1&Ws.memoizedState.tag){if(r.flags|=2048,Ma(9,{destroy:void 0},va.bind(null,r,i,n,t),null),null===pc)throw Error(a(349));s||0!==(127&zs)||ya(r,t,n)}return n}function ya(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Vs.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Vs.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function va(e,t,n,r){t.value=n,t.getSnapshot=r,ba(t)&&xa(e)}function wa(e,t,n){return n(function(){ba(t)&&xa(e)})}function ba(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Zn(e,n)}catch(r){return!0}}function xa(e){var t=Dr(e,2);null!==t&&Yc(t,e,2)}function Sa(e){var t=oa();if("function"===typeof e){var n=e;if(e=n(),Ks){we(!0);try{n()}finally{we(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ha,lastRenderedState:e},t}function Aa(e,t,n,r){return e.baseState=n,pa(e,Hs,"function"===typeof r?r:ha)}function Ea(e,t,n,r,i){if(ho(e))throw Error(a(485));if(null!==(e=t.action)){var s={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){s.listeners.push(e)}};null!==O.T?n(!0):s.isTransition=!1,r(s),null===(n=t.pending)?(s.next=t.pending=s,Na(t,s)):(s.next=n.next,t.pending=n.next=s)}}function Na(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var s=O.T,a={};O.T=a;try{var o=n(i,r),l=O.S;null!==l&&l(a,o),Ca(e,t,o)}catch(c){Ta(e,t,c)}finally{null!==s&&null!==a.types&&(s.types=a.types),O.T=s}}else try{Ca(e,t,s=n(i,r))}catch(u){Ta(e,t,u)}}function Ca(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){_a(e,t,n)},function(n){return Ta(e,t,n)}):_a(e,t,n)}function _a(e,t,n){t.status="fulfilled",t.value=n,Ia(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,Na(e,n)))}function Ta(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,Ia(t),t=t.next}while(t!==r)}e.action=null}function Ia(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function ka(e,t){return t}function Pa(e,t){if(di){var n=pc.formState;if(null!==n){e:{var r=Vs;if(di){if(ui){t:{for(var i=ui,s=fi;8!==i.nodeType;){if(!s){i=null;break t}if(null===(i=Dd(i.nextSibling))){i=null;break t}}i="F!"===(s=i.data)||"F"===s?i:null}if(i){ui=Dd(i.nextSibling),r="F!"===i.data;break e}}mi(r)}r=!1}r&&(t=n[0])}}return(n=oa()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ka,lastRenderedState:t},n.queue=r,n=lo.bind(null,Vs,r),r.dispatch=n,r=Sa(!1),s=uo.bind(null,Vs,!1,r.queue),i={state:t,dispatch:null,action:e,pending:null},(r=oa()).queue=i,n=Ea.bind(null,Vs,i,s,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function Ra(e){return Da(la(),Hs,e)}function Da(e,t,n){if(t=pa(e,t,ka)[0],e=fa(ha)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=ca(t)}catch(a){if(a===Ji)throw $i;throw a}else r=t;var i=(t=la()).queue,s=i.dispatch;return n!==t.memoizedState&&(Vs.flags|=2048,Ma(9,{destroy:void 0},Oa.bind(null,i,n),null)),[r,s,e]}function Oa(e,t){e.action=t}function La(e){var t=la(),n=Hs;if(null!==n)return Da(t,n,e);la(),t=t.memoizedState;var r=(n=la()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function Ma(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=Vs.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Vs.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Fa(){return la().memoizedState}function ja(e,t,n,r){var i=oa();Vs.flags|=e,i.memoizedState=Ma(1|t,{destroy:void 0},n,void 0===r?null:r)}function Ba(e,t,n,r){var i=la();r=void 0===r?null:r;var s=i.memoizedState.inst;null!==Hs&&null!==r&&$s(r,Hs.memoizedState.deps)?i.memoizedState=Ma(t,s,n,r):(Vs.flags|=e,i.memoizedState=Ma(1|t,s,n,r))}function Ua(e,t){ja(8390656,8,e,t)}function za(e,t){Ba(2048,8,e,t)}function Va(e){var t=la().memoizedState;return function(e){Vs.flags|=4;var t=Vs.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},Vs.updateQueue=t,t.events=[e];else{var n=t.events;null===n?t.events=[e]:n.push(e)}}({ref:t,nextImpl:e}),function(){if(0!==(2&fc))throw Error(a(440));return t.impl.apply(void 0,arguments)}}function Ha(e,t){return Ba(4,2,e,t)}function Wa(e,t){return Ba(4,4,e,t)}function qa(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Ga(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Ba(4,4,qa.bind(null,t,e),n)}function Ka(){}function Ya(e,t){var n=la();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&$s(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xa(e,t){var n=la();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&$s(t,r[1]))return r[0];if(r=e(),Ks){we(!0);try{e()}finally{we(!1)}}return n.memoizedState=[r,t],r}function Qa(e,t,n){return void 0===n||0!==(1073741824&zs)&&0===(261930&gc)?e.memoizedState=t:(e.memoizedState=n,e=Kc(),Vs.lanes|=e,Ec|=e,n)}function Ja(e,t,n,r){return Zn(n,t)?n:null!==_s.current?(e=Qa(e,n,r),Zn(e,t)||(Do=!0),e):0===(42&zs)||0!==(1073741824&zs)&&0===(261930&gc)?(Do=!0,e.memoizedState=n):(e=Kc(),Vs.lanes|=e,Ec|=e,t)}function Za(e,t,n,r,i){var s=L.p;L.p=0!==s&&8>s?s:8;var a=O.T,o={};O.T=o,uo(e,!1,t,n);try{var l=i(),c=O.S;if(null!==c&&c(o,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)co(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(l,r),Gc());else co(e,t,r,Gc())}catch(u){co(e,t,{then:function(){},status:"rejected",reason:u},Gc())}finally{L.p=s,null!==a&&null!==o.types&&(a.types=o.types),O.T=a}}function $a(){}function eo(e,t,n,r){if(5!==e.tag)throw Error(a(476));var i=to(e).queue;Za(e,i,t,M,null===n?$a:function(){return no(e),n(r)})}function to(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:M,baseState:M,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ha,lastRenderedState:M},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ha,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function no(e){var t=to(e);null===t.next&&(t=e.alternate.memoizedState),co(e,t.next.queue,{},Gc())}function ro(){return Ri(uh)}function io(){return la().memoizedState}function so(){return la().memoizedState}function ao(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Gc(),r=ws(t,e=vs(n),n);return null!==r&&(Yc(r,t,n),bs(r,t,n)),t={cache:Bi()},void(e.payload=t)}t=t.return}}function oo(e,t,n){var r=Gc();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},ho(e)?fo(t,n):null!==(n=Rr(e,t,n,r))&&(Yc(n,e,r),po(n,t,r))}function lo(e,t,n){co(e,t,n,Gc())}function co(e,t,n,r){var i={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(ho(e))fo(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,Zn(o,a))return Pr(e,t,i,0),null===pc&&kr(),!1}catch(l){}if(null!==(n=Rr(e,t,i,r)))return Yc(n,e,r),po(n,t,r),!0}return!1}function uo(e,t,n,r){if(r={lane:2,revertLane:Vu(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},ho(e)){if(t)throw Error(a(479))}else null!==(t=Rr(e,n,r,2))&&Yc(t,e,2)}function ho(e){var t=e.alternate;return e===Vs||null!==t&&t===Vs}function fo(e,t){Gs=qs=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function po(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Oe(e,n)}}var mo={readContext:Ri,use:ua,useCallback:Zs,useContext:Zs,useEffect:Zs,useImperativeHandle:Zs,useLayoutEffect:Zs,useInsertionEffect:Zs,useMemo:Zs,useReducer:Zs,useRef:Zs,useState:Zs,useDebugValue:Zs,useDeferredValue:Zs,useTransition:Zs,useSyncExternalStore:Zs,useId:Zs,useHostTransitionStatus:Zs,useFormState:Zs,useActionState:Zs,useOptimistic:Zs,useMemoCache:Zs,useCacheRefresh:Zs};mo.useEffectEvent=Zs;var go={readContext:Ri,use:ua,useCallback:function(e,t){return oa().memoizedState=[e,void 0===t?null:t],e},useContext:Ri,useEffect:Ua,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,ja(4194308,4,qa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ja(4194308,4,e,t)},useInsertionEffect:function(e,t){ja(4,2,e,t)},useMemo:function(e,t){var n=oa();t=void 0===t?null:t;var r=e();if(Ks){we(!0);try{e()}finally{we(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=oa();if(void 0!==n){var i=n(t);if(Ks){we(!0);try{n(t)}finally{we(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=oo.bind(null,Vs,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},oa().memoizedState=e},useState:function(e){var t=(e=Sa(e)).queue,n=lo.bind(null,Vs,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Ka,useDeferredValue:function(e,t){return Qa(oa(),e,t)},useTransition:function(){var e=Sa(!1);return e=Za.bind(null,Vs,e.queue,!0,!1),oa().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=Vs,i=oa();if(di){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===pc)throw Error(a(349));0!==(127&gc)||ya(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Ua(wa.bind(null,r,s,e),[e]),r.flags|=2048,Ma(9,{destroy:void 0},va.bind(null,r,s,n,t),null),n},useId:function(){var e=oa(),t=pc.identifierPrefix;if(di){var n=ri;t="_"+t+"R_"+(n=(ni&~(1<<32-be(ni)-1)).toString(32)+n),0<(n=Ys++)&&(t+="H"+n.toString(32)),t+="_"}else t="_"+t+"r_"+(n=Js++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:ro,useFormState:Pa,useActionState:Pa,useOptimistic:function(e){var t=oa();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=uo.bind(null,Vs,!0,n),n.dispatch=t,[e,t]},useMemoCache:da,useCacheRefresh:function(){return oa().memoizedState=ao.bind(null,Vs)},useEffectEvent:function(e){var t=oa(),n={impl:e};return t.memoizedState=n,function(){if(0!==(2&fc))throw Error(a(440));return n.impl.apply(void 0,arguments)}}},yo={readContext:Ri,use:ua,useCallback:Ya,useContext:Ri,useEffect:za,useImperativeHandle:Ga,useInsertionEffect:Ha,useLayoutEffect:Wa,useMemo:Xa,useReducer:fa,useRef:Fa,useState:function(){return fa(ha)},useDebugValue:Ka,useDeferredValue:function(e,t){return Ja(la(),Hs.memoizedState,e,t)},useTransition:function(){var e=fa(ha)[0],t=la().memoizedState;return["boolean"===typeof e?e:ca(e),t]},useSyncExternalStore:ga,useId:io,useHostTransitionStatus:ro,useFormState:Ra,useActionState:Ra,useOptimistic:function(e,t){return Aa(la(),0,e,t)},useMemoCache:da,useCacheRefresh:so};yo.useEffectEvent=Va;var vo={readContext:Ri,use:ua,useCallback:Ya,useContext:Ri,useEffect:za,useImperativeHandle:Ga,useInsertionEffect:Ha,useLayoutEffect:Wa,useMemo:Xa,useReducer:ma,useRef:Fa,useState:function(){return ma(ha)},useDebugValue:Ka,useDeferredValue:function(e,t){var n=la();return null===Hs?Qa(n,e,t):Ja(n,Hs.memoizedState,e,t)},useTransition:function(){var e=ma(ha)[0],t=la().memoizedState;return["boolean"===typeof e?e:ca(e),t]},useSyncExternalStore:ga,useId:io,useHostTransitionStatus:ro,useFormState:La,useActionState:La,useOptimistic:function(e,t){var n=la();return null!==Hs?Aa(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:da,useCacheRefresh:so};function wo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:f({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}vo.useEffectEvent=Va;var bo={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Gc(),i=vs(r);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=ws(e,i,r))&&(Yc(t,e,r),bs(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Gc(),i=vs(r);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=ws(e,i,r))&&(Yc(t,e,r),bs(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Gc(),r=vs(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=ws(e,r,n))&&(Yc(t,e,n),bs(t,e,n))}};function xo(e,t,n,r,i,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!$n(n,r)||!$n(i,s))}function So(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&bo.enqueueReplaceState(t,t.state,null)}function Ao(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=f({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}function Eo(e){Cr(e)}function No(e){console.error(e)}function Co(e){Cr(e)}function _o(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function To(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Io(e,t,n){return(n=vs(n)).tag=3,n.payload={element:null},n.callback=function(){_o(e,t)},n}function ko(e){return(e=vs(e)).tag=3,e}function Po(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"===typeof i){var s=r.value;e.payload=function(){return i(s)},e.callback=function(){To(t,n,r)}}var a=n.stateNode;null!==a&&"function"===typeof a.componentDidCatch&&(e.callback=function(){To(t,n,r),"function"!==typeof i&&(null===Mc?Mc=new Set([this]):Mc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Ro=Error(a(461)),Do=!1;function Oo(e,t,n,r){t.child=null===e?ps(t,null,n,r):fs(t,e.child,n,r)}function Lo(e,t,n,r,i){n=n.render;var s=t.ref;if("ref"in r){var a={};for(var o in r)"ref"!==o&&(a[o]=r[o])}else a=r;return Pi(t),r=ea(e,t,n,a,s,i),o=ia(),null===e||Do?(di&&o&&ai(t),t.flags|=1,Oo(e,t,r,i),t.child):(sa(e,t,i),il(e,t,i))}function Mo(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Br(s)||void 0!==s.defaultProps||null!==n.compare?((e=Vr(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Fo(e,t,s,r,i))}if(s=e.child,!sl(e,i)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:$n)(a,r)&&e.ref===t.ref)return il(e,t,i)}return t.flags|=1,(e=Ur(s,r)).ref=t.ref,e.return=t,t.child=e}function Fo(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if($n(s,r)&&e.ref===t.ref){if(Do=!1,t.pendingProps=r=s,!sl(e,i))return t.lanes=e.lanes,il(e,t,i);0!==(131072&e.flags)&&(Do=!0)}}return Wo(e,t,n,r,i)}function jo(e,t,n,r){var i=r.children,s=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===r.mode){if(0!==(128&t.flags)){if(s=null!==s?s.baseLanes|n:n,null!==e){for(r=t.child=e.child,i=0;null!==r;)i=i|r.lanes|r.childLanes,r=r.sibling;r=i&~s}else r=0,t.child=null;return Uo(e,t,s,n,r)}if(0===(536870912&n))return r=t.lanes=536870912,Uo(e,t,null!==s?s.baseLanes|n:n,n,r);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Xi(0,null!==s?s.cachePool:null),null!==s?Is(t,s):ks(),Ms(t)}else null!==s?(Xi(0,s.cachePool),Is(t,s),Fs(),t.memoizedState=null):(null!==e&&Xi(0,null),ks(),Fs());return Oo(e,t,i,n),t.child}function Bo(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Uo(e,t,n,r,i){var s=Yi();return s=null===s?null:{parent:ji._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},null!==e&&Xi(0,null),ks(),Ms(t),null!==e&&Ii(e,t,r,!0),t.childLanes=i,null}function zo(e,t){return(t=$o({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function Vo(e,t,n){return fs(t,e.child,null,n),(e=zo(t,t.pendingProps)).flags|=2,js(t),t.memoizedState=null,e}function Ho(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(a(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Wo(e,t,n,r,i){return Pi(t),n=ea(e,t,n,r,void 0,i),r=ia(),null===e||Do?(di&&r&&ai(t),t.flags|=1,Oo(e,t,n,i),t.child):(sa(e,t,i),il(e,t,i))}function qo(e,t,n,r,i,s){return Pi(t),t.updateQueue=null,n=na(t,r,n,i),ta(e),r=ia(),null===e||Do?(di&&r&&ai(t),t.flags|=1,Oo(e,t,n,s),t.child):(sa(e,t,s),il(e,t,s))}function Go(e,t,n,r,i){if(Pi(t),null===t.stateNode){var s=Mr,a=n.contextType;"object"===typeof a&&null!==a&&(s=Ri(a)),s=new n(r,s),t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,s.updater=bo,t.stateNode=s,s._reactInternals=t,(s=t.stateNode).props=r,s.state=t.memoizedState,s.refs={},gs(t),a=n.contextType,s.context="object"===typeof a&&null!==a?Ri(a):Mr,s.state=t.memoizedState,"function"===typeof(a=n.getDerivedStateFromProps)&&(wo(t,n,a,r),s.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(a=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),a!==s.state&&bo.enqueueReplaceState(s,s.state,null),Es(t,r,s,i),As(),s.state=t.memoizedState),"function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){s=t.stateNode;var o=t.memoizedProps,l=Ao(n,o);s.props=l;var c=s.context,u=n.contextType;a=Mr,"object"===typeof u&&null!==u&&(a=Ri(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof s.getSnapshotBeforeUpdate,o=t.pendingProps!==o,u||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o||c!==a)&&So(t,s,r,a),ms=!1;var h=t.memoizedState;s.state=h,Es(t,r,s,i),As(),c=t.memoizedState,o||h!==c||ms?("function"===typeof d&&(wo(t,n,d,r),c=t.memoizedState),(l=ms||xo(t,n,l,r,h,c,a))?(u||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),s.props=r,s.state=c,s.context=a,r=l):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,ys(e,t),u=Ao(n,a=t.memoizedProps),s.props=u,d=t.pendingProps,h=s.context,c=n.contextType,l=Mr,"object"===typeof c&&null!==c&&(l=Ri(c)),(c="function"===typeof(o=n.getDerivedStateFromProps)||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==d||h!==l)&&So(t,s,r,l),ms=!1,h=t.memoizedState,s.state=h,Es(t,r,s,i),As();var f=t.memoizedState;a!==d||h!==f||ms||null!==e&&null!==e.dependencies&&ki(e.dependencies)?("function"===typeof o&&(wo(t,n,o,r),f=t.memoizedState),(u=ms||xo(t,n,u,r,h,f,l)||null!==e&&null!==e.dependencies&&ki(e.dependencies))?(c||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=l,r=u):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return s=r,Ho(e,t),r=0!==(128&t.flags),s||r?(s=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:s.render(),t.flags|=1,null!==e&&r?(t.child=fs(t,e.child,null,i),t.child=fs(t,null,n,i)):Oo(e,t,n,i),t.memoizedState=s.state,e=t.child):e=il(e,t,i),e}function Ko(e,t,n,r){return wi(),t.flags|=256,Oo(e,t,n,r),t.child}var Yo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xo(e){return{baseLanes:e,cachePool:Qi()}}function Qo(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=_c),e}function Jo(e,t,n){var r,i=t.pendingProps,s=!1,o=0!==(128&t.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&0!==(2&Bs.current)),r&&(s=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(di){if(s?Os(t):Fs(),(e=ui)?null!==(e=null!==(e=kd(e,fi))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ti?{id:ni,overflow:ri}:null,retryLane:536870912,hydrationErrors:null},(n=qr(e)).return=t,t.child=n,ci=t,ui=null):e=null,null===e)throw mi(t);return Rd(e)?t.lanes=32:t.lanes=536870912,null}var l=i.children;return i=i.fallback,s?(Fs(),l=$o({mode:"hidden",children:l},s=t.mode),i=Hr(i,s,n,null),l.return=t,i.return=t,l.sibling=i,t.child=l,(i=t.child).memoizedState=Xo(n),i.childLanes=Qo(e,r,n),t.memoizedState=Yo,Bo(null,i)):(Os(t),Zo(t,l))}var c=e.memoizedState;if(null!==c&&null!==(l=c.dehydrated)){if(o)256&t.flags?(Os(t),t.flags&=-257,t=el(e,t,n)):null!==t.memoizedState?(Fs(),t.child=e.child,t.flags|=128,t=null):(Fs(),l=i.fallback,s=t.mode,i=$o({mode:"visible",children:i.children},s),(l=Hr(l,s,n,null)).flags|=2,i.return=t,l.return=t,i.sibling=l,t.child=i,fs(t,e.child,null,n),(i=t.child).memoizedState=Xo(n),i.childLanes=Qo(e,r,n),t.memoizedState=Yo,t=Bo(null,i));else if(Os(t),Rd(l)){if(r=l.nextSibling&&l.nextSibling.dataset)var u=r.dgst;r=u,(i=Error(a(419))).stack="",i.digest=r,xi({value:i,source:null,stack:null}),t=el(e,t,n)}else if(Do||Ii(e,t,n,!1),r=0!==(n&e.childLanes),Do||r){if(null!==(r=pc)&&(0!==(i=Le(r,n))&&i!==c.retryLane))throw c.retryLane=i,Dr(e,i),Yc(r,e,i),Ro;Pd(l)||au(),t=el(e,t,n)}else Pd(l)?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,ui=Dd(l.nextSibling),ci=t,di=!0,hi=null,fi=!1,null!==e&&li(t,e),(t=Zo(t,i.children)).flags|=4096);return t}return s?(Fs(),l=i.fallback,s=t.mode,u=(c=e.child).sibling,(i=Ur(c,{mode:"hidden",children:i.children})).subtreeFlags=65011712&c.subtreeFlags,null!==u?l=Ur(u,l):(l=Hr(l,s,n,null)).flags|=2,l.return=t,i.return=t,i.sibling=l,t.child=i,Bo(null,i),i=t.child,null===(l=e.child.memoizedState)?l=Xo(n):(null!==(s=l.cachePool)?(c=ji._currentValue,s=s.parent!==c?{parent:c,pool:c}:s):s=Qi(),l={baseLanes:l.baseLanes|n,cachePool:s}),i.memoizedState=l,i.childLanes=Qo(e,r,n),t.memoizedState=Yo,Bo(e.child,i)):(Os(t),e=(n=e.child).sibling,(n=Ur(n,{mode:"visible",children:i.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Zo(e,t){return(t=$o({mode:"visible",children:t},e.mode)).return=e,e.child=t}function $o(e,t){return(e=jr(22,e,null,t)).lanes=0,e}function el(e,t,n){return fs(t,e.child,null,n),(e=Zo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function tl(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_i(e.return,t,n)}function nl(e,t,n,r,i,s){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,treeForkCount:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i,a.treeForkCount=s)}function rl(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;r=r.children;var a=Bs.current,o=0!==(2&a);if(o?(a=1&a|2,t.flags|=128):a&=1,z(Bs,a),Oo(e,t,r,n),r=di?Zr:0,!o&&null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&tl(e,n,t);else if(19===e.tag)tl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Us(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),nl(t,!1,i,n,s,r);break;case"backwards":case"unstable_legacy-backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Us(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}nl(t,!0,n,null,s,r);break;case"together":nl(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function il(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ec|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Ii(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Ur(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ur(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function sl(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!ki(e))}function al(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Do=!0;else{if(!sl(e,n)&&0===(128&t.flags))return Do=!1,function(e,t,n){switch(t.tag){case 3:Y(t,t.stateNode.containerInfo),Ni(0,ji,e.memoizedState.cache),wi();break;case 27:case 5:Q(t);break;case 4:Y(t,t.stateNode.containerInfo);break;case 10:Ni(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,Ls(t),null;break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(Os(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Jo(e,t,n):(Os(t),null!==(e=il(e,t,n))?e.sibling:null);Os(t);break;case 19:var i=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(Ii(e,t,n,!1),r=0!==(n&t.childLanes)),i){if(r)return rl(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),z(Bs,Bs.current),r)break;return null;case 22:return t.lanes=0,jo(e,t,n,t.pendingProps);case 24:Ni(0,ji,e.memoizedState.cache)}return il(e,t,n)}(e,t,n);Do=0!==(131072&e.flags)}else Do=!1,di&&0!==(1048576&t.flags)&&si(t,Zr,t.index);switch(t.lanes=0,t.tag){case 16:e:{var r=t.pendingProps;if(e=rs(t.elementType),t.type=e,"function"!==typeof e){if(void 0!==e&&null!==e){var i=e.$$typeof;if(i===S){t.tag=11,t=Lo(null,t,e,r,n);break e}if(i===N){t.tag=14,t=Mo(null,t,e,r,n);break e}}throw t=R(e)||e,Error(a(306,t,""))}Br(e)?(r=Ao(e,r),t.tag=1,t=Go(null,t,e,r,n)):(t.tag=0,t=Wo(null,t,e,r,n))}return t;case 0:return Wo(e,t,t.type,t.pendingProps,n);case 1:return Go(e,t,r=t.type,i=Ao(r,t.pendingProps),n);case 3:e:{if(Y(t,t.stateNode.containerInfo),null===e)throw Error(a(387));r=t.pendingProps;var s=t.memoizedState;i=s.element,ys(e,t),Es(t,r,null,n);var o=t.memoizedState;if(r=o.cache,Ni(0,ji,r),r!==s.cache&&Ti(t,[ji],n,!0),As(),r=o.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Ko(e,t,r,n);break e}if(r!==i){xi(i=Yr(Error(a(424)),t)),t=Ko(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ui=Dd(e.firstChild),ci=t,di=!0,hi=null,fi=!0,n=ps(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(wi(),r===i){t=il(e,t,n);break e}Oo(e,t,r,n)}t=t.child}return t;case 26:return Ho(e,t),null===e?(n=qd(t.type,null,t.pendingProps,null))?t.memoizedState=n:di||(n=t.type,e=t.pendingProps,(r=gd(G.current).createElement(n))[ze]=t,r[Ve]=e,hd(r,n,e),et(r),t.stateNode=r):t.memoizedState=qd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Q(t),null===e&&di&&(r=t.stateNode=Fd(t.type,t.pendingProps,G.current),ci=t,fi=!0,i=ui,Cd(t.type)?(Od=i,ui=Dd(r.firstChild)):ui=i),Oo(e,t,t.pendingProps.children,n),Ho(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&di&&((i=r=ui)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Ye])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(s=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(s!==i.rel||e.getAttribute("href")!==(null==i.href||""===i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((s=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var s=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===s)return e}if(null===(e=Dd(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,fi))?(t.stateNode=r,ci=t,ui=Dd(r.firstChild),fi=!1,i=!0):i=!1),i||mi(t)),Q(t),i=t.type,s=t.pendingProps,o=null!==e?e.memoizedProps:null,r=s.children,wd(i,s)?r=null:null!==o&&wd(i,o)&&(t.flags|=32),null!==t.memoizedState&&(i=ea(e,t,ra,null,null,n),uh._currentValue=i),Ho(e,t),Oo(e,t,r,n),t.child;case 6:return null===e&&di&&((e=n=ui)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=Dd(e.nextSibling)))return null}return e}(n,t.pendingProps,fi))?(t.stateNode=n,ci=t,ui=null,e=!0):e=!1),e||mi(t)),null;case 13:return Jo(e,t,n);case 4:return Y(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=fs(t,null,r,n):Oo(e,t,r,n),t.child;case 11:return Lo(e,t,t.type,t.pendingProps,n);case 7:return Oo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Oo(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,Ni(0,t.type,r.value),Oo(e,t,r.children,n),t.child;case 9:return i=t.type._context,r=t.pendingProps.children,Pi(t),r=r(i=Ri(i)),t.flags|=1,Oo(e,t,r,n),t.child;case 14:return Mo(e,t,t.type,t.pendingProps,n);case 15:return Fo(e,t,t.type,t.pendingProps,n);case 19:return rl(e,t,n);case 31:return function(e,t,n){var r=t.pendingProps,i=0!==(128&t.flags);if(t.flags&=-129,null===e){if(di){if("hidden"===r.mode)return e=zo(t,r),t.lanes=536870912,Bo(null,e);if(Ls(t),(e=ui)?null!==(e=null!==(e=kd(e,fi))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ti?{id:ni,overflow:ri}:null,retryLane:536870912,hydrationErrors:null},(n=qr(e)).return=t,t.child=n,ci=t,ui=null):e=null,null===e)throw mi(t);return t.lanes=536870912,null}return zo(t,r)}var s=e.memoizedState;if(null!==s){var o=s.dehydrated;if(Ls(t),i)if(256&t.flags)t.flags&=-257,t=Vo(e,t,n);else{if(null===t.memoizedState)throw Error(a(558));t.child=e.child,t.flags|=128,t=null}else if(Do||Ii(e,t,n,!1),i=0!==(n&e.childLanes),Do||i){if(null!==(r=pc)&&0!==(o=Le(r,n))&&o!==s.retryLane)throw s.retryLane=o,Dr(e,o),Yc(r,e,o),Ro;au(),t=Vo(e,t,n)}else e=s.treeContext,ui=Dd(o.nextSibling),ci=t,di=!0,hi=null,fi=!1,null!==e&&li(t,e),(t=zo(t,r)).flags|=4096;return t}return(e=Ur(e.child,{mode:r.mode,children:r.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,n);case 22:return jo(e,t,n,t.pendingProps);case 24:return Pi(t),r=Ri(ji),null===e?(null===(i=Yi())&&(i=pc,s=Bi(),i.pooledCache=s,s.refCount++,null!==s&&(i.pooledCacheLanes|=n),i=s),t.memoizedState={parent:r,cache:i},gs(t),Ni(0,ji,i)):(0!==(e.lanes&n)&&(ys(e,t),Es(t,null,null,n),As()),i=e.memoizedState,s=t.memoizedState,i.parent!==r?(i={parent:r,cache:r},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),Ni(0,ji,r)):(r=s.cache,Ni(0,ji,r),r!==i.cache&&Ti(t,[ji],n,!0))),Oo(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(a(156,t.tag))}function ol(e){e.flags|=4}function ll(e,t,n,r,i){if((t=0!==(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&i)===i)if(e.stateNode.complete)e.flags|=8192;else{if(!ru())throw is=es,Zi;e.flags|=8192}}else e.flags&=-16777217}function cl(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!ih(t)){if(!ru())throw is=es,Zi;e.flags|=8192}}function ul(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?ke():536870912,e.lanes|=t,Tc|=t)}function dl(e,t){if(!di)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function hl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=65011712&i.subtreeFlags,r|=65011712&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function fl(e,t,n){var r=t.pendingProps;switch(oi(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return hl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Ci(ji),X(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(vi(t)?ol(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,bi())),hl(t),null;case 26:var i=t.type,s=t.memoizedState;return null===e?(ol(t),null!==s?(hl(t),cl(t,s)):(hl(t),ll(t,i,0,0,n))):s?s!==e.memoizedState?(ol(t),hl(t),cl(t,s)):(hl(t),t.flags&=-16777217):((e=e.memoizedProps)!==r&&ol(t),hl(t),ll(t,i,0,0,n)),null;case 27:if(J(t),n=G.current,i=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&ol(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return hl(t),null}e=W.current,vi(t)?gi(t):(e=Fd(i,r,n),t.stateNode=e,ol(t))}return hl(t),null;case 5:if(J(t),i=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&ol(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return hl(t),null}if(s=W.current,vi(t))gi(t);else{var o=gd(G.current);switch(s){case 1:s=o.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:s=o.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":s=o.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":s=o.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":(s=o.createElement("div")).innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s="string"===typeof r.is?o.createElement("select",{is:r.is}):o.createElement("select"),r.multiple?s.multiple=!0:r.size&&(s.size=r.size);break;default:s="string"===typeof r.is?o.createElement(i,{is:r.is}):o.createElement(i)}}s[ze]=t,s[Ve]=r;e:for(o=t.child;null!==o;){if(5===o.tag||6===o.tag)s.appendChild(o.stateNode);else if(4!==o.tag&&27!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;null===o.sibling;){if(null===o.return||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=s;e:switch(hd(s,i,r),i){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&ol(t)}}return hl(t),ll(t,t.type,null===e||e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&ol(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(e=G.current,vi(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(i=ci))switch(i.tag){case 27:case 5:r=i.memoizedProps}e[ze]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||cd(e.nodeValue,n)))||mi(t,!0)}else(e=gd(e).createTextNode(r))[ze]=t,t.stateNode=e}return hl(t),null;case 31:if(n=t.memoizedState,null===e||null!==e.memoizedState){if(r=vi(t),null!==n){if(null===e){if(!r)throw Error(a(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(a(557));e[ze]=t}else wi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;hl(t),e=!1}else n=bi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return 256&t.flags?(js(t),t):(js(t),null);if(0!==(128&t.flags))throw Error(a(558))}return hl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=vi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(a(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(a(317));i[ze]=t}else wi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;hl(t),i=!1}else i=bi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return 256&t.flags?(js(t),t):(js(t),null)}return js(t),0!==(128&t.flags)?(t.lanes=n,t):(n=null!==r,e=null!==e&&null!==e.memoizedState,n&&(i=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(i=r.alternate.memoizedState.cachePool.pool),s=null,null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(s=r.memoizedState.cachePool.pool),s!==i&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),ul(t,t.updateQueue),hl(t),null);case 4:return X(),null===e&&$u(t.stateNode.containerInfo),hl(t),null;case 10:return Ci(t.type),hl(t),null;case 19:if(U(Bs),null===(r=t.memoizedState))return hl(t),null;if(i=0!==(128&t.flags),null===(s=r.rendering))if(i)dl(r,!1);else{if(0!==Ac||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=Us(e))){for(t.flags|=128,dl(r,!1),e=s.updateQueue,t.updateQueue=e,ul(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)zr(n,e),n=n.sibling;return z(Bs,1&Bs.current|2),di&&ii(t,r.treeForkCount),t.child}e=e.sibling}null!==r.tail&&le()>Oc&&(t.flags|=128,i=!0,dl(r,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=Us(s))){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,ul(t,e),dl(r,!0),null===r.tail&&"hidden"===r.tailMode&&!s.alternate&&!di)return hl(t),null}else 2*le()-r.renderingStartTime>Oc&&536870912!==n&&(t.flags|=128,i=!0,dl(r,!1),t.lanes=4194304);r.isBackwards?(s.sibling=t.child,t.child=s):(null!==(e=r.last)?e.sibling=s:t.child=s,r.last=s)}return null!==r.tail?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=le(),e.sibling=null,n=Bs.current,z(Bs,i?1&n|2:1&n),di&&ii(t,r.treeForkCount),e):(hl(t),null);case 22:case 23:return js(t),Ps(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(hl(t),6&t.subtreeFlags&&(t.flags|=8192)):hl(t),null!==(n=t.updateQueue)&&ul(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&U(Ki),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Ci(ji),hl(t),null;case 25:case 30:return null}throw Error(a(156,t.tag))}function pl(e,t){switch(oi(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ci(ji),X(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return J(t),null;case 31:if(null!==t.memoizedState){if(js(t),null===t.alternate)throw Error(a(340));wi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(js(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));wi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return U(Bs),null;case 4:return X(),null;case 10:return Ci(t.type),null;case 22:case 23:return js(t),Ps(),null!==e&&U(Ki),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Ci(ji),null;default:return null}}function ml(e,t){switch(oi(t),t.tag){case 3:Ci(ji),X();break;case 26:case 27:case 5:J(t);break;case 4:X();break;case 31:null!==t.memoizedState&&js(t);break;case 13:js(t);break;case 19:U(Bs);break;case 10:Ci(t.type);break;case 22:case 23:js(t),Ps(),null!==e&&U(Ki);break;case 24:Ci(ji)}}function gl(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var s=n.create,a=n.inst;r=s(),a.destroy=r}n=n.next}while(n!==i)}}catch(o){Au(t,t.return,o)}}function yl(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var s=i.next;r=s;do{if((r.tag&e)===e){var a=r.inst,o=a.destroy;if(void 0!==o){a.destroy=void 0,i=t;var l=n,c=o;try{c()}catch(u){Au(i,l,u)}}}r=r.next}while(r!==s)}}catch(u){Au(t,t.return,u)}}function vl(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{Cs(t,n)}catch(r){Au(e,e.return,r)}}}function wl(e,t,n){n.props=Ao(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){Au(e,t,r)}}function bl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(i){Au(e,t,i)}}function xl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(i){Au(e,t,i)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(s){Au(e,t,s)}else n.current=null}function Sl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(i){Au(e,e.return,i)}}function Al(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,s=null,o=null,l=null,c=null,u=null,d=null;for(p in n){var h=n[p];if(n.hasOwnProperty(p)&&null!=h)switch(p){case"checked":case"value":break;case"defaultValue":c=h;default:r.hasOwnProperty(p)||ud(e,t,p,null,r,h)}}for(var f in r){var p=r[f];if(h=n[f],r.hasOwnProperty(f)&&(null!=p||null!=h))switch(f){case"type":s=p;break;case"name":i=p;break;case"checked":u=p;break;case"defaultChecked":d=p;break;case"value":o=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(a(137,t));break;default:p!==h&&ud(e,t,f,p,r,h)}}return void vt(e,o,l,c,u,d,s,i);case"select":for(s in p=o=l=f=null,n)if(c=n[s],n.hasOwnProperty(s)&&null!=c)switch(s){case"value":break;case"multiple":p=c;default:r.hasOwnProperty(s)||ud(e,t,s,null,r,c)}for(i in r)if(s=r[i],c=n[i],r.hasOwnProperty(i)&&(null!=s||null!=c))switch(i){case"value":f=s;break;case"defaultValue":l=s;break;case"multiple":o=s;default:s!==c&&ud(e,t,i,s,r,c)}return t=l,n=o,r=p,void(null!=f?xt(e,!!n,f,!1):!!r!==!!n&&(null!=t?xt(e,!!n,t,!0):xt(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=f=null,n)if(i=n[l],n.hasOwnProperty(l)&&null!=i&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:ud(e,t,l,null,r,i)}for(o in r)if(i=r[o],s=n[o],r.hasOwnProperty(o)&&(null!=i||null!=s))switch(o){case"value":f=i;break;case"defaultValue":p=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(a(91));break;default:i!==s&&ud(e,t,o,i,r,s)}return void St(e,f,p);case"option":for(var m in n)if(f=n[m],n.hasOwnProperty(m)&&null!=f&&!r.hasOwnProperty(m))if("selected"===m)e.selected=!1;else ud(e,t,m,null,r,f);for(c in r)if(f=r[c],p=n[c],r.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))if("selected"===c)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else ud(e,t,c,f,r,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)f=n[g],n.hasOwnProperty(g)&&null!=f&&!r.hasOwnProperty(g)&&ud(e,t,g,null,r,f);for(u in r)if(f=r[u],p=n[u],r.hasOwnProperty(u)&&f!==p&&(null!=f||null!=p))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(a(137,t));break;default:ud(e,t,u,f,r,p)}return;default:if(Tt(t)){for(var y in n)f=n[y],n.hasOwnProperty(y)&&void 0!==f&&!r.hasOwnProperty(y)&&dd(e,t,y,void 0,r,f);for(d in r)f=r[d],p=n[d],!r.hasOwnProperty(d)||f===p||void 0===f&&void 0===p||dd(e,t,d,f,r,p);return}}for(var v in n)f=n[v],n.hasOwnProperty(v)&&null!=f&&!r.hasOwnProperty(v)&&ud(e,t,v,null,r,f);for(h in r)f=r[h],p=n[h],!r.hasOwnProperty(h)||f===p||null==f&&null==p||ud(e,t,h,f,r,p)}(r,e.type,n,t),r[Ve]=t}catch(i){Au(e,e.return,i)}}function El(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&Cd(e.type)||4===e.tag}function Nl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||El(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&Cd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Rt));else if(4!==r&&(27===r&&Cd(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(Cl(e,t,n),e=e.sibling;null!==e;)Cl(e,t,n),e=e.sibling}function _l(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&Cd(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(_l(e,t,n),e=e.sibling;null!==e;)_l(e,t,n),e=e.sibling}function Tl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);hd(t,r,n),t[ze]=e,t[Ve]=n}catch(s){Au(e,e.return,s)}}var Il=!1,kl=!1,Pl=!1,Rl="function"===typeof WeakSet?WeakSet:Set,Dl=null;function Ol(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Yl(e,n),4&r&&gl(5,n);break;case 1:if(Yl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(a){Au(n,n.return,a)}else{var i=Ao(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){Au(n,n.return,o)}}64&r&&vl(n),512&r&&bl(n,n.return);break;case 3:if(Yl(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{Cs(e,t)}catch(a){Au(n,n.return,a)}}break;case 27:null===t&&4&r&&Tl(n);case 26:case 5:Yl(e,n),null===t&&4&r&&Sl(n),512&r&&bl(n,n.return);break;case 12:Yl(e,n);break;case 31:Yl(e,n),4&r&&Ul(e,n);break;case 13:Yl(e,n),4&r&&zl(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=_u.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||Il)){t=null!==t&&null!==t.memoizedState||kl,i=Il;var s=kl;Il=r,(kl=t)&&!s?Ql(e,n,0!==(8772&n.subtreeFlags)):Yl(e,n),Il=i,kl=s}break;case 30:break;default:Yl(e,n)}}function Ll(e){var t=e.alternate;null!==t&&(e.alternate=null,Ll(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Xe(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ml=null,Fl=!1;function jl(e,t,n){for(n=n.child;null!==n;)Bl(e,t,n),n=n.sibling}function Bl(e,t,n){if(ve&&"function"===typeof ve.onCommitFiberUnmount)try{ve.onCommitFiberUnmount(ye,n)}catch(s){}switch(n.tag){case 26:kl||xl(n,t),jl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:kl||xl(n,t);var r=Ml,i=Fl;Cd(n.type)&&(Ml=n.stateNode,Fl=!1),jl(e,t,n),jd(n.stateNode),Ml=r,Fl=i;break;case 5:kl||xl(n,t);case 6:if(r=Ml,i=Fl,Ml=null,jl(e,t,n),Fl=i,null!==(Ml=r))if(Fl)try{(9===Ml.nodeType?Ml.body:"HTML"===Ml.nodeName?Ml.ownerDocument.body:Ml).removeChild(n.stateNode)}catch(a){Au(n,t,a)}else try{Ml.removeChild(n.stateNode)}catch(a){Au(n,t,a)}break;case 18:null!==Ml&&(Fl?(_d(9===(e=Ml).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Wh(e)):_d(Ml,n.stateNode));break;case 4:r=Ml,i=Fl,Ml=n.stateNode.containerInfo,Fl=!0,jl(e,t,n),Ml=r,Fl=i;break;case 0:case 11:case 14:case 15:yl(2,n,t),kl||yl(4,n,t),jl(e,t,n);break;case 1:kl||(xl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&wl(n,t,r)),jl(e,t,n);break;case 21:jl(e,t,n);break;case 22:kl=(r=kl)||null!==n.memoizedState,jl(e,t,n),kl=r;break;default:jl(e,t,n)}}function Ul(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&null!==(e=e.memoizedState))){e=e.dehydrated;try{Wh(e)}catch(n){Au(t,t.return,n)}}}function zl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Wh(e)}catch(n){Au(t,t.return,n)}}function Vl(e,t){var n=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Rl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Rl),t;default:throw Error(a(435,e.tag))}}(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=Tu.bind(null,e,t);t.then(r,r)}})}function Hl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r],s=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:if(Cd(l.type)){Ml=l.stateNode,Fl=!1;break e}break;case 5:Ml=l.stateNode,Fl=!1;break e;case 3:case 4:Ml=l.stateNode.containerInfo,Fl=!0;break e}l=l.return}if(null===Ml)throw Error(a(160));Bl(s,o,i),Ml=null,Fl=!1,null!==(s=i.alternate)&&(s.return=null),i.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)ql(t,e),t=t.sibling}var Wl=null;function ql(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Hl(t,e),Gl(e),4&r&&(yl(3,e,e.return),gl(3,e),yl(5,e,e.return));break;case 1:Hl(t,e),Gl(e),512&r&&(kl||null===n||xl(n,n.return)),64&r&&Il&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var i=Wl;if(Hl(t,e),Gl(e),512&r&&(kl||null===n||xl(n,n.return)),4&r){var s=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(r){case"title":(!(s=i.getElementsByTagName("title")[0])||s[Ye]||s[ze]||"http://www.w3.org/2000/svg"===s.namespaceURI||s.hasAttribute("itemprop"))&&(s=i.createElement(r),i.head.insertBefore(s,i.querySelector("head > title"))),hd(s,r,n),s[ze]=e,et(s),r=s;break e;case"link":var o=nh("link","href",i).get(r+(n.href||""));if(o)for(var l=0;l<o.length;l++)if((s=o[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&s.getAttribute("rel")===(null==n.rel?null:n.rel)&&s.getAttribute("title")===(null==n.title?null:n.title)&&s.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){o.splice(l,1);break t}hd(s=i.createElement(r),r,n),i.head.appendChild(s);break;case"meta":if(o=nh("meta","content",i).get(r+(n.content||"")))for(l=0;l<o.length;l++)if((s=o[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&s.getAttribute("name")===(null==n.name?null:n.name)&&s.getAttribute("property")===(null==n.property?null:n.property)&&s.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&s.getAttribute("charset")===(null==n.charSet?null:n.charSet)){o.splice(l,1);break t}hd(s=i.createElement(r),r,n),i.head.appendChild(s);break;default:throw Error(a(468,r))}s[ze]=e,et(s),r=s}e.stateNode=r}else rh(i,e.type,e.stateNode);else e.stateNode=Jd(i,r,e.memoizedProps);else s!==r?(null===s?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):s.count--,null===r?rh(i,e.type,e.stateNode):Jd(i,r,e.memoizedProps)):null===r&&null!==e.stateNode&&Al(e,e.memoizedProps,n.memoizedProps)}break;case 27:Hl(t,e),Gl(e),512&r&&(kl||null===n||xl(n,n.return)),null!==n&&4&r&&Al(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Hl(t,e),Gl(e),512&r&&(kl||null===n||xl(n,n.return)),32&e.flags){i=e.stateNode;try{Et(i,"")}catch(m){Au(e,e.return,m)}}4&r&&null!=e.stateNode&&Al(e,i=e.memoizedProps,null!==n?n.memoizedProps:i),1024&r&&(Pl=!0);break;case 6:if(Hl(t,e),Gl(e),4&r){if(null===e.stateNode)throw Error(a(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(m){Au(e,e.return,m)}}break;case 3:if(th=null,i=Wl,Wl=zd(t.containerInfo),Hl(t,e),Wl=i,Gl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Wh(t.containerInfo)}catch(m){Au(e,e.return,m)}Pl&&(Pl=!1,Kl(e));break;case 4:r=Wl,Wl=zd(e.stateNode.containerInfo),Hl(t,e),Gl(e),Wl=r;break;case 12:default:Hl(t,e),Gl(e);break;case 31:case 19:Hl(t,e),Gl(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Vl(e,r)));break;case 13:Hl(t,e),Gl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(Rc=le()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Vl(e,r)));break;case 22:i=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=Il,d=kl;if(Il=u||i,kl=d||c,Hl(t,e),kl=d,Il=u,Gl(e),8192&r)e:for(t=e.stateNode,t._visibility=i?-2&t._visibility:1|t._visibility,i&&(null===n||c||Il||kl||Xl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(s=c.stateNode,i)"function"===typeof(o=s.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,f=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(m){Au(c,c.return,m)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=i?"":c.memoizedProps}catch(m){Au(c,c.return,m)}}}else if(18===t.tag){if(null===n){c=t;try{var p=c.stateNode;i?Td(p,!0):Td(c.stateNode,!1)}catch(m){Au(c,c.return,m)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Vl(e,n))));case 30:case 21:}}function Gl(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(El(r)){n=r;break}r=r.return}if(null==n)throw Error(a(160));switch(n.tag){case 27:var i=n.stateNode;_l(e,Nl(e),i);break;case 5:var s=n.stateNode;32&n.flags&&(Et(s,""),n.flags&=-33),_l(e,Nl(e),s);break;case 3:case 4:var o=n.stateNode.containerInfo;Cl(e,Nl(e),o);break;default:throw Error(a(161))}}catch(l){Au(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Kl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Kl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Yl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Ol(e,t.alternate,t),t=t.sibling}function Xl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:yl(4,t,t.return),Xl(t);break;case 1:xl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&wl(t,t.return,n),Xl(t);break;case 27:jd(t.stateNode);case 26:case 5:xl(t,t.return),Xl(t);break;case 22:null===t.memoizedState&&Xl(t);break;default:Xl(t)}e=e.sibling}}function Ql(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,i=e,s=t,a=s.flags;switch(s.tag){case 0:case 11:case 15:Ql(i,s,n),gl(4,s);break;case 1:if(Ql(i,s,n),"function"===typeof(i=(r=s).stateNode).componentDidMount)try{i.componentDidMount()}catch(c){Au(r,r.return,c)}if(null!==(i=(r=s).updateQueue)){var o=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)Ns(l[i],o)}catch(c){Au(r,r.return,c)}}n&&64&a&&vl(s),bl(s,s.return);break;case 27:Tl(s);case 26:case 5:Ql(i,s,n),n&&null===r&&4&a&&Sl(s),bl(s,s.return);break;case 12:Ql(i,s,n);break;case 31:Ql(i,s,n),n&&4&a&&Ul(i,s);break;case 13:Ql(i,s,n),n&&4&a&&zl(i,s);break;case 22:null===s.memoizedState&&Ql(i,s,n),bl(s,s.return);break;case 30:break;default:Ql(i,s,n)}t=t.sibling}}function Jl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Ui(n))}function Zl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ui(e))}function $l(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)ec(e,t,n,r),t=t.sibling}function ec(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:$l(e,t,n,r),2048&i&&gl(9,t);break;case 1:case 31:case 13:default:$l(e,t,n,r);break;case 3:$l(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ui(e)));break;case 12:if(2048&i){$l(e,t,n,r),e=t.stateNode;try{var s=t.memoizedProps,a=s.id,o=s.onPostCommit;"function"===typeof o&&o(a,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){Au(t,t.return,l)}}else $l(e,t,n,r);break;case 23:break;case 22:s=t.stateNode,a=t.alternate,null!==t.memoizedState?2&s._visibility?$l(e,t,n,r):nc(e,t):2&s._visibility?$l(e,t,n,r):(s._visibility|=2,tc(e,t,n,r,0!==(10256&t.subtreeFlags)||!1)),2048&i&&Jl(a,t);break;case 24:$l(e,t,n,r),2048&i&&Zl(t.alternate,t)}}function tc(e,t,n,r,i){for(i=i&&(0!==(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var s=e,a=t,o=n,l=r,c=a.flags;switch(a.tag){case 0:case 11:case 15:tc(s,a,o,l,i),gl(8,a);break;case 23:break;case 22:var u=a.stateNode;null!==a.memoizedState?2&u._visibility?tc(s,a,o,l,i):nc(s,a):(u._visibility|=2,tc(s,a,o,l,i)),i&&2048&c&&Jl(a.alternate,a);break;case 24:tc(s,a,o,l,i),i&&2048&c&&Zl(a.alternate,a);break;default:tc(s,a,o,l,i)}t=t.sibling}}function nc(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:nc(n,r),2048&i&&Jl(r.alternate,r);break;case 24:nc(n,r),2048&i&&Zl(r.alternate,r);break;default:nc(n,r)}t=t.sibling}}var rc=8192;function ic(e,t,n){if(e.subtreeFlags&rc)for(e=e.child;null!==e;)sc(e,t,n),e=e.sibling}function sc(e,t,n){switch(e.tag){case 26:ic(e,t,n),e.flags&rc&&null!==e.memoizedState&&function(e,t,n,r){if("stylesheet"===n.type&&("string"!==typeof r.media||!1!==matchMedia(r.media).matches)&&0===(4&n.state.loading)){if(null===n.instance){var i=Gd(r.href),s=t.querySelector(Kd(i));if(s)return null!==(t=s._p)&&"object"===typeof t&&"function"===typeof t.then&&(e.count++,e=ah.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=s,void et(s);s=t.ownerDocument||t,r=Yd(r),(i=Bd.get(i))&&$d(r,i),et(s=s.createElement("link"));var a=s;a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),hd(s,"link",r),n.instance=s}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&0===(3&n.state.loading)&&(e.count++,n=ah.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}(n,Wl,e.memoizedState,e.memoizedProps);break;case 5:default:ic(e,t,n);break;case 3:case 4:var r=Wl;Wl=zd(e.stateNode.containerInfo),ic(e,t,n),Wl=r;break;case 22:null===e.memoizedState&&(null!==(r=e.alternate)&&null!==r.memoizedState?(r=rc,rc=16777216,ic(e,t,n),rc=r):ic(e,t,n))}}function ac(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function oc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Dl=r,uc(r,e)}ac(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)lc(e),e=e.sibling}function lc(e){switch(e.tag){case 0:case 11:case 15:oc(e),2048&e.flags&&yl(9,e,e.return);break;case 3:case 12:default:oc(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,cc(e)):oc(e)}}function cc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Dl=r,uc(r,e)}ac(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:yl(8,t,t.return),cc(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,cc(t));break;default:cc(t)}e=e.sibling}}function uc(e,t){for(;null!==Dl;){var n=Dl;switch(n.tag){case 0:case 11:case 15:yl(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Ui(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Dl=r;else e:for(n=e;null!==Dl;){var i=(r=Dl).sibling,s=r.return;if(Ll(r),r===n){Dl=null;break e}if(null!==i){i.return=s,Dl=i;break e}Dl=s}}}var dc={getCacheForType:function(e){var t=Ri(ji),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Ri(ji).controller.signal}},hc="function"===typeof WeakMap?WeakMap:Map,fc=0,pc=null,mc=null,gc=0,yc=0,vc=null,wc=!1,bc=!1,xc=!1,Sc=0,Ac=0,Ec=0,Nc=0,Cc=0,_c=0,Tc=0,Ic=null,kc=null,Pc=!1,Rc=0,Dc=0,Oc=1/0,Lc=null,Mc=null,Fc=0,jc=null,Bc=null,Uc=0,zc=0,Vc=null,Hc=null,Wc=0,qc=null;function Gc(){return 0!==(2&fc)&&0!==gc?gc&-gc:null!==O.T?Vu():je()}function Kc(){if(0===_c)if(0===(536870912&gc)||di){var e=Ee;0===(3932160&(Ee<<=1))&&(Ee=262144),_c=e}else _c=536870912;return null!==(e=Rs.current)&&(e.flags|=32),_c}function Yc(e,t,n){(e!==pc||2!==yc&&9!==yc)&&null===e.cancelPendingCommit||(tu(e,0),Zc(e,gc,_c,!1)),Re(e,n),0!==(2&fc)&&e===pc||(e===pc&&(0===(2&fc)&&(Nc|=n),4===Ac&&Zc(e,gc,_c,!1)),Lu(e))}function Xc(e,t,n){if(0!==(6&fc))throw Error(a(327));for(var r=!n&&0===(127&t)&&0===(t&e.expiredLanes)||Te(e,t),i=r?function(e,t){var n=fc;fc|=2;var r=iu(),i=su();pc!==e||gc!==t?(Lc=null,Oc=le()+500,tu(e,t)):bc=Te(e,t);e:for(;;)try{if(0!==yc&&null!==mc){t=mc;var s=vc;t:switch(yc){case 1:yc=0,vc=null,hu(e,t,s,1);break;case 2:case 9:if(ts(s)){yc=0,vc=null,du(t);break}t=function(){2!==yc&&9!==yc||pc!==e||(yc=7),Lu(e)},s.then(t,t);break e;case 3:yc=7;break e;case 4:yc=5;break e;case 7:ts(s)?(yc=0,vc=null,du(t)):(yc=0,vc=null,hu(e,t,s,7));break;case 5:var o=null;switch(mc.tag){case 26:o=mc.memoizedState;case 5:case 27:var l=mc;if(o?ih(o):l.stateNode.complete){yc=0,vc=null;var c=l.sibling;if(null!==c)mc=c;else{var u=l.return;null!==u?(mc=u,fu(u)):mc=null}break t}}yc=0,vc=null,hu(e,t,s,5);break;case 6:yc=0,vc=null,hu(e,t,s,6);break;case 8:eu(),Ac=6;break e;default:throw Error(a(462))}}cu();break}catch(d){nu(e,d)}return Ei=Ai=null,O.H=r,O.A=i,fc=n,null!==mc?0:(pc=null,gc=0,kr(),Ac)}(e,t):ou(e,t,!0),s=r;;){if(0===i){bc&&!r&&Zc(e,t,0,!1);break}if(n=e.current.alternate,!s||Jc(n)){if(2===i){if(s=t,e.errorRecoveryDisabledLanes&s)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;i=Ic;var c=l.current.memoizedState.isDehydrated;if(c&&(tu(l,o).flags|=256),2!==(o=ou(l,o,!1))){if(xc&&!c){l.errorRecoveryDisabledLanes|=s,Nc|=s,i=4;break e}s=kc,kc=i,null!==s&&(null===kc?kc=s:kc.push.apply(kc,s))}i=o}if(s=!1,2!==i)continue}}if(1===i){tu(e,0),Zc(e,t,0,!0);break}e:{switch(r=e,s=i){case 0:case 1:throw Error(a(345));case 4:if((4194048&t)!==t)break;case 6:Zc(r,t,_c,!wc);break e;case 2:kc=null;break;case 3:case 5:break;default:throw Error(a(329))}if((62914560&t)===t&&10<(i=Rc+300-le())){if(Zc(r,t,_c,!wc),0!==_e(r,0,!0))break e;Uc=t,r.timeoutHandle=xd(Qc.bind(null,r,n,kc,Lc,Pc,t,_c,Nc,Tc,wc,s,"Throttled",-0,0),i)}else Qc(r,n,kc,Lc,Pc,t,_c,Nc,Tc,wc,s,null,-0,0)}break}i=ou(e,t,!1),s=!1}Lu(e)}function Qc(e,t,n,r,i,s,a,o,l,c,u,d,h,f){if(e.timeoutHandle=-1,8192&(d=t.subtreeFlags)||16785408===(16785408&d)){sc(t,s,d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Rt});var p=(62914560&s)===s?Rc-le():(4194048&s)===s?Dc-le():0;if(null!==(p=function(e,t){return e.stylesheets&&0===e.count&&lh(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&lh(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===sh&&(sh=62500*function(){if("function"===typeof performance.getEntriesByType){for(var e=0,t=0,n=performance.getEntriesByType("resource"),r=0;r<n.length;r++){var i=n[r],s=i.transferSize,a=i.initiatorType,o=i.duration;if(s&&o&&fd(a)){for(a=0,o=i.responseEnd,r+=1;r<n.length;r++){var l=n[r],c=l.startTime;if(c>o)break;var u=l.transferSize,d=l.initiatorType;u&&fd(d)&&(a+=u*((l=l.responseEnd)<o?1:(o-c)/(l-c)))}if(--r,t+=8*(s+a)/(i.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&"number"===typeof(e=navigator.connection.downlink)?e:5}());var i=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&lh(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>sh?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(i)}}:null}(d,p)))return Uc=s,e.cancelPendingCommit=p(mu.bind(null,e,t,s,n,r,i,a,o,l,u,d,null,h,f)),void Zc(e,s,a,!c)}mu(e,t,s,n,r,i,a,o,l)}function Jc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Zn(s(),i))return!1}catch(a){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Zc(e,t,n,r){t&=~Cc,t&=~Nc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var s=31-be(i),a=1<<s;r[s]=-1,i&=~a}0!==n&&De(e,n,t)}function $c(){return 0!==(6&fc)||(Mu(0,!1),!1)}function eu(){if(null!==mc){if(0===yc)var e=mc.return;else Ei=Ai=null,aa(e=mc),os=null,ls=0,e=mc;for(;null!==e;)ml(e.alternate,e),e=e.return;mc=null}}function tu(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,Sd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Uc=0,eu(),pc=e,mc=n=Ur(e.current,null),gc=t,yc=0,vc=null,wc=!1,bc=Te(e,t),xc=!1,Tc=_c=Cc=Nc=Ec=Ac=0,kc=Ic=null,Pc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-be(r),s=1<<i;t|=e[i],r&=~s}return Sc=t,kr(),n}function nu(e,t){Vs=null,O.H=mo,t===Ji||t===$i?(t=ss(),yc=3):t===Zi?(t=ss(),yc=4):yc=t===Ro?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,vc=t,null===mc&&(Ac=1,_o(e,Yr(t,e.current)))}function ru(){var e=Rs.current;return null===e||((4194048&gc)===gc?null===Ds:((62914560&gc)===gc||0!==(536870912&gc))&&e===Ds)}function iu(){var e=O.H;return O.H=mo,null===e?mo:e}function su(){var e=O.A;return O.A=dc,e}function au(){Ac=4,wc||(4194048&gc)!==gc&&null!==Rs.current||(bc=!0),0===(134217727&Ec)&&0===(134217727&Nc)||null===pc||Zc(pc,gc,_c,!1)}function ou(e,t,n){var r=fc;fc|=2;var i=iu(),s=su();pc===e&&gc===t||(Lc=null,tu(e,t)),t=!1;var a=Ac;e:for(;;)try{if(0!==yc&&null!==mc){var o=mc,l=vc;switch(yc){case 8:eu(),a=6;break e;case 3:case 2:case 9:case 6:null===Rs.current&&(t=!0);var c=yc;if(yc=0,vc=null,hu(e,o,l,c),n&&bc){a=0;break e}break;default:c=yc,yc=0,vc=null,hu(e,o,l,c)}}lu(),a=Ac;break}catch(u){nu(e,u)}return t&&e.shellSuspendCounter++,Ei=Ai=null,fc=r,O.H=i,O.A=s,null===mc&&(pc=null,gc=0,kr()),a}function lu(){for(;null!==mc;)uu(mc)}function cu(){for(;null!==mc&&!ae();)uu(mc)}function uu(e){var t=al(e.alternate,e,Sc);e.memoizedProps=e.pendingProps,null===t?fu(e):mc=t}function du(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=qo(n,t,t.pendingProps,t.type,void 0,gc);break;case 11:t=qo(n,t,t.pendingProps,t.type.render,t.ref,gc);break;case 5:aa(t);default:ml(n,t),t=al(n,t=mc=zr(t,Sc),Sc)}e.memoizedProps=e.pendingProps,null===t?fu(e):mc=t}function hu(e,t,n,r){Ei=Ai=null,aa(t),os=null,ls=0;var i=t.return;try{if(function(e,t,n,r,i){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&Ii(t,n,i,!0),null!==(n=Rs.current)){switch(n.tag){case 31:case 13:return null===Ds?au():null===n.alternate&&0===Ac&&(Ac=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===es?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),Eu(e,r,i)),!1;case 22:return n.flags|=65536,r===es?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),Eu(e,r,i)),!1}throw Error(a(435,n.tag))}return Eu(e,r,i),au(),!1}if(di)return null!==(t=Rs.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,r!==pi&&xi(Yr(e=Error(a(422),{cause:r}),n))):(r!==pi&&xi(Yr(t=Error(a(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,r=Yr(r,n),xs(e,i=Io(e.stateNode,r,i)),4!==Ac&&(Ac=2)),!1;var s=Error(a(520),{cause:r});if(s=Yr(s,n),null===Ic?Ic=[s]:Ic.push(s),4!==Ac&&(Ac=2),null===t)return!0;r=Yr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,xs(n,e=Io(n.stateNode,r,e)),!1;case 1:if(t=n.type,s=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==s&&"function"===typeof s.componentDidCatch&&(null===Mc||!Mc.has(s))))return n.flags|=65536,i&=-i,n.lanes|=i,Po(i=ko(i),e,n,r),xs(n,i),!1}n=n.return}while(null!==n);return!1}(e,i,t,n,gc))return Ac=1,_o(e,Yr(n,e.current)),void(mc=null)}catch(s){if(null!==i)throw mc=i,s;return Ac=1,_o(e,Yr(n,e.current)),void(mc=null)}32768&t.flags?(di||1===r?e=!0:bc||0!==(536870912&gc)?e=!1:(wc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=Rs.current)&&13===r.tag&&(r.flags|=16384))),pu(t,e)):fu(t)}function fu(e){var t=e;do{if(0!==(32768&t.flags))return void pu(t,wc);e=t.return;var n=fl(t.alternate,t,Sc);if(null!==n)return void(mc=n);if(null!==(t=t.sibling))return void(mc=t);mc=t=e}while(null!==t);0===Ac&&(Ac=5)}function pu(e,t){do{var n=pl(e.alternate,e);if(null!==n)return n.flags&=32767,void(mc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(mc=e);mc=e=n}while(null!==e);Ac=6,mc=null}function mu(e,t,n,r,i,s,o,l,c){e.cancelPendingCommit=null;do{bu()}while(0!==Fc);if(0!==(6&fc))throw Error(a(327));if(null!==t){if(t===e.current)throw Error(a(177));if(s=t.lanes|t.childLanes,function(e,t,n,r,i,s){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=a&~n;0<n;){var u=31-be(n),d=1<<u;o[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var f=h[u];null!==f&&(f.lane&=-536870913)}n&=~d}0!==r&&De(e,r,0),0!==s&&0===i&&0!==e.tag&&(e.suspendedLanes|=s&~(a&~t))}(e,n,s|=Ir,o,l,c),e===pc&&(mc=pc=null,gc=0),Bc=t,jc=e,Uc=n,zc=s,Vc=i,Hc=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,ie(he,function(){return xu(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=O.T,O.T=null,i=L.p,L.p=2,o=fc,fc|=4;try{!function(e,t){if(e=e.containerInfo,pd=wh,ir(e=rr(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(g){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=o+i),h!==s||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=o),f===s&&++d===r&&(c=o),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(md={focusedElem:e,selectionRange:n},wh=!1,Dl=t;null!==Dl;)if(e=(t=Dl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Dl=e;else for(;null!==Dl;){switch(s=(t=Dl).alternate,e=t.flags,t.tag){case 0:if(0!==(4&e)&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(n=0;n<e.length;n++)(i=e[n]).ref.impl=i.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==s){e=void 0,n=t,i=s.memoizedProps,s=s.memoizedState,r=n.stateNode;try{var m=Ao(n.type,i);e=r.getSnapshotBeforeUpdate(m,s),r.__reactInternalSnapshotBeforeUpdate=e}catch(y){Au(n,n.return,y)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))Id(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Id(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(a(163))}if(null!==(e=t.sibling)){e.return=t.return,Dl=e;break}Dl=t.return}}(e,t)}finally{fc=o,L.p=i,O.T=r}}Fc=1,gu(),yu(),vu()}}function gu(){if(1===Fc){Fc=0;var e=jc,t=Bc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=O.T,O.T=null;var r=L.p;L.p=2;var i=fc;fc|=4;try{ql(t,e);var s=md,a=rr(e.containerInfo),o=s.focusedElem,l=s.selectionRange;if(a!==o&&o&&o.ownerDocument&&nr(o.ownerDocument.documentElement,o)){if(null!==l&&ir(o)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var d=o.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var f=h.getSelection(),p=o.textContent.length,m=Math.min(l.start,p),g=void 0===l.end?m:Math.min(l.end,p);!f.extend&&m>g&&(a=g,g=m,m=a);var y=tr(o,m),v=tr(o,g);if(y&&v&&(1!==f.rangeCount||f.anchorNode!==y.node||f.anchorOffset!==y.offset||f.focusNode!==v.node||f.focusOffset!==v.offset)){var w=d.createRange();w.setStart(y.node,y.offset),f.removeAllRanges(),m>g?(f.addRange(w),f.extend(v.node,v.offset)):(w.setEnd(v.node,v.offset),f.addRange(w))}}}}for(d=[],f=o;f=f.parentNode;)1===f.nodeType&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof o.focus&&o.focus(),o=0;o<d.length;o++){var b=d[o];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}wh=!!pd,md=pd=null}finally{fc=i,L.p=r,O.T=n}}e.current=t,Fc=2}}function yu(){if(2===Fc){Fc=0;var e=jc,t=Bc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=O.T,O.T=null;var r=L.p;L.p=2;var i=fc;fc|=4;try{Ol(e,t.alternate,t)}finally{fc=i,L.p=r,O.T=n}}Fc=3}}function vu(){if(4===Fc||3===Fc){Fc=0,oe();var e=jc,t=Bc,n=Uc,r=Hc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Fc=5:(Fc=0,Bc=jc=null,wu(e,e.pendingLanes));var i=e.pendingLanes;if(0===i&&(Mc=null),Fe(n),t=t.stateNode,ve&&"function"===typeof ve.onCommitFiberRoot)try{ve.onCommitFiberRoot(ye,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=O.T,i=L.p,L.p=2,O.T=null;try{for(var s=e.onRecoverableError,a=0;a<r.length;a++){var o=r[a];s(o.value,{componentStack:o.stack})}}finally{O.T=t,L.p=i}}0!==(3&Uc)&&bu(),Lu(e),i=e.pendingLanes,0!==(261930&n)&&0!==(42&i)?e===qc?Wc++:(Wc=0,qc=e):Wc=0,Mu(0,!1)}}function wu(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Ui(t)))}function bu(){return gu(),yu(),vu(),xu()}function xu(){if(5!==Fc)return!1;var e=jc,t=zc;zc=0;var n=Fe(Uc),r=O.T,i=L.p;try{L.p=32>n?32:n,O.T=null,n=Vc,Vc=null;var s=jc,o=Uc;if(Fc=0,Bc=jc=null,Uc=0,0!==(6&fc))throw Error(a(331));var l=fc;if(fc|=4,lc(s.current),ec(s,s.current,o,n),fc=l,Mu(0,!1),ve&&"function"===typeof ve.onPostCommitFiberRoot)try{ve.onPostCommitFiberRoot(ye,s)}catch(c){}return!0}finally{L.p=i,O.T=r,wu(e,t)}}function Su(e,t,n){t=Yr(n,t),null!==(e=ws(e,t=Io(e.stateNode,t,2),2))&&(Re(e,2),Lu(e))}function Au(e,t,n){if(3===e.tag)Su(e,e,n);else for(;null!==t;){if(3===t.tag){Su(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Mc||!Mc.has(r))){e=Yr(n,e),null!==(r=ws(t,n=ko(2),2))&&(Po(n,r,t,e),Re(r,2),Lu(r));break}}t=t.return}}function Eu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new hc;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(xc=!0,i.add(n),e=Nu.bind(null,e,t,n),t.then(e,e))}function Nu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,pc===e&&(gc&n)===n&&(4===Ac||3===Ac&&(62914560&gc)===gc&&300>le()-Rc?0===(2&fc)&&tu(e,0):Cc|=n,Tc===gc&&(Tc=0)),Lu(e)}function Cu(e,t){0===t&&(t=ke()),null!==(e=Dr(e,t))&&(Re(e,t),Lu(e))}function _u(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cu(e,n)}function Tu(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(a(314))}null!==r&&r.delete(t),Cu(e,n)}var Iu=null,ku=null,Pu=!1,Ru=!1,Du=!1,Ou=0;function Lu(e){e!==ku&&null===e.next&&(null===ku?Iu=ku=e:ku=ku.next=e),Ru=!0,Pu||(Pu=!0,Ed(function(){0!==(6&fc)?ie(ue,Fu):ju()}))}function Mu(e,t){if(!Du&&Ru){Du=!0;do{for(var n=!1,r=Iu;null!==r;){if(!t)if(0!==e){var i=r.pendingLanes;if(0===i)var s=0;else{var a=r.suspendedLanes,o=r.pingedLanes;s=(1<<31-be(42|e)+1)-1,s=201326741&(s&=i&~(a&~o))?201326741&s|1:s?2|s:0}0!==s&&(n=!0,zu(r,s))}else s=gc,0===(3&(s=_e(r,r===pc?s:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||Te(r,s)||(n=!0,zu(r,s));r=r.next}}while(n);Du=!1}}function Fu(){ju()}function ju(){Ru=Pu=!1;var e=0;0!==Ou&&function(){var e=window.event;if(e&&"popstate"===e.type)return e!==bd&&(bd=e,!0);return bd=null,!1}()&&(e=Ou);for(var t=le(),n=null,r=Iu;null!==r;){var i=r.next,s=Bu(r,t);0===s?(r.next=null,null===n?Iu=i:n.next=i,null===i&&(ku=n)):(n=r,(0!==e||0!==(3&s))&&(Ru=!0)),r=i}0!==Fc&&5!==Fc||Mu(e,!1),0!==Ou&&(Ou=0)}function Bu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=-62914561&e.pendingLanes;0<s;){var a=31-be(s),o=1<<a,l=i[a];-1===l?0!==(o&n)&&0===(o&r)||(i[a]=Ie(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}if(n=gc,n=_e(e,e===(t=pc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===yc||9===yc)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&se(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||Te(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&se(r),Fe(n)){case 2:case 8:n=de;break;case 32:default:n=he;break;case 268435456:n=pe}return r=Uu.bind(null,e),n=ie(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&se(r),e.callbackPriority=2,e.callbackNode=null,2}function Uu(e,t){if(0!==Fc&&5!==Fc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(bu()&&e.callbackNode!==n)return null;var r=gc;return 0===(r=_e(e,e===pc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Xc(e,r,t),Bu(e,le()),null!=e.callbackNode&&e.callbackNode===n?Uu.bind(null,e):null)}function zu(e,t){if(bu())return null;Xc(e,t,!0)}function Vu(){if(0===Ou){var e=Hi;0===e&&(e=Ae,0===(261888&(Ae<<=1))&&(Ae=256)),Ou=e}return Ou}function Hu(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Pt(""+e)}function Wu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var qu=0;qu<Er.length;qu++){var Gu=Er[qu];Nr(Gu.toLowerCase(),"on"+(Gu[0].toUpperCase()+Gu.slice(1)))}Nr(gr,"onAnimationEnd"),Nr(yr,"onAnimationIteration"),Nr(vr,"onAnimationStart"),Nr("dblclick","onDoubleClick"),Nr("focusin","onFocus"),Nr("focusout","onBlur"),Nr(wr,"onTransitionRun"),Nr(br,"onTransitionStart"),Nr(xr,"onTransitionCancel"),Nr(Sr,"onTransitionEnd"),it("onMouseEnter",["mouseout","mouseover"]),it("onMouseLeave",["mouseout","mouseover"]),it("onPointerEnter",["pointerout","pointerover"]),it("onPointerLeave",["pointerout","pointerover"]),rt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rt("onBeforeInput",["compositionend","keypress","textInput","paste"]),rt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ku="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ku));function Xu(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;s=o,i.currentTarget=c;try{s(i)}catch(u){Cr(u)}i.currentTarget=null,s=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;s=o,i.currentTarget=c;try{s(i)}catch(u){Cr(u)}i.currentTarget=null,s=l}}}}function Qu(e,t){var n=t[We];void 0===n&&(n=t[We]=new Set);var r=e+"__bubble";n.has(r)||(ed(t,e,2,!1),n.add(r))}function Ju(e,t,n){var r=0;t&&(r|=4),ed(n,e,r,t)}var Zu="_reactListening"+Math.random().toString(36).slice(2);function $u(e){if(!e[Zu]){e[Zu]=!0,tt.forEach(function(t){"selectionchange"!==t&&(Yu.has(t)||Ju(t,!1,e),Ju(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Zu]||(t[Zu]=!0,Ju("selectionchange",!1,t))}}function ed(e,t,n,r){switch(Ch(t)){case 2:var i=bh;break;case 8:i=xh;break;default:i=Sh}n=i.bind(null,t,n,e),i=void 0,!Vt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function td(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===i)break;if(4===a)for(a=r.return;null!==a;){var c=a.tag;if((3===c||4===c)&&a.stateNode.containerInfo===i)return;a=a.return}for(;null!==o;){if(null===(a=Qe(o)))return;if(5===(c=a.tag)||6===c||26===c||27===c){r=s=a;continue e}o=o.parentNode}}r=r.return}Bt(function(){var r=s,i=Ot(n),a=[];e:{var o=Ar.get(e);if(void 0!==o){var c=nn,u=e;switch(e){case"keypress":if(0===Yt(n))break e;case"keydown":case"keyup":c=vn;break;case"focusin":u="focus",c=cn;break;case"focusout":u="blur",c=cn;break;case"beforeblur":case"afterblur":c=cn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=on;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=ln;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=bn;break;case gr:case yr:case vr:c=un;break;case Sr:c=xn;break;case"scroll":case"scrollend":c=sn;break;case"wheel":c=Sn;break;case"copy":case"cut":case"paste":c=dn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=wn;break;case"toggle":case"beforetoggle":c=An}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),f=d?null!==o?o+"Capture":null:o;d=[];for(var p,m=r;null!==m;){var g=m;if(p=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===p||null===f||null!=(g=Ut(m,f))&&d.push(nd(m,g,p)),h)break;m=m.return}0<d.length&&(o=new c(o,u,null,n,i),a.push({event:o,listeners:d}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===Dt||!(u=n.relatedTarget||n.fromElement)||!Qe(u)&&!u[He])&&(c||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?Qe(u):null)&&(h=l(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=r),c!==u)){if(d=on,g="onMouseLeave",f="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=wn,g="onPointerLeave",f="onPointerEnter",m="pointer"),h=null==c?o:Ze(c),p=null==u?o:Ze(u),(o=new d(g,m+"leave",c,n,i)).target=h,o.relatedTarget=p,g=null,Qe(i)===r&&((d=new d(f,m+"enter",u,n,i)).target=p,d.relatedTarget=h,g=d),h=g,c&&u)e:{for(d=id,m=u,p=0,g=f=c;g;g=d(g))p++;g=0;for(var y=m;y;y=d(y))g++;for(;0<p-g;)f=d(f),p--;for(;0<g-p;)m=d(m),g--;for(;p--;){if(f===m||null!==m&&f===m.alternate){d=f;break e}f=d(f),m=d(m)}d=null}else d=null;null!==c&&sd(a,o,c,d,!1),null!==u&&null!==h&&sd(a,h,u,d,!0)}if("select"===(c=(o=r?Ze(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===c&&"file"===o.type)var v=zn;else if(Ln(o))if(Vn)v=Jn;else{v=Xn;var w=Yn}else!(c=o.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type?r&&Tt(r.elementType)&&(v=zn):v=Qn;switch(v&&(v=v(e,r))?Mn(a,v,n,i):(w&&w(e,o,r),"focusout"===e&&r&&"number"===o.type&&null!=r.memoizedProps.value&&bt(o,"number",o.value)),w=r?Ze(r):window,e){case"focusin":(Ln(w)||"true"===w.contentEditable)&&(ar=w,or=r,lr=null);break;case"focusout":lr=or=ar=null;break;case"mousedown":cr=!0;break;case"contextmenu":case"mouseup":case"dragend":cr=!1,ur(a,n,i);break;case"selectionchange":if(sr)break;case"keydown":case"keyup":ur(a,n,i)}var b;if(Nn)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Dn?Pn(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(Tn&&"ko"!==n.locale&&(Dn||"onCompositionStart"!==x?"onCompositionEnd"===x&&Dn&&(b=Kt()):(qt="value"in(Wt=i)?Wt.value:Wt.textContent,Dn=!0)),0<(w=rd(r,x)).length&&(x=new hn(x,e,null,n,i),a.push({event:x,listeners:w}),b?x.data=b:null!==(b=Rn(n))&&(x.data=b))),(b=_n?function(e,t){switch(e){case"compositionend":return Rn(t);case"keypress":return 32!==t.which?null:(kn=!0,In);case"textInput":return(e=t.data)===In&&kn?null:e;default:return null}}(e,n):function(e,t){if(Dn)return"compositionend"===e||!Nn&&Pn(e,t)?(e=Kt(),Gt=qt=Wt=null,Dn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Tn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(x=rd(r,"onBeforeInput")).length&&(w=new hn("onBeforeInput","beforeinput",null,n,i),a.push({event:w,listeners:x}),w.data=b)),function(e,t,n,r,i){if("submit"===t&&n&&n.stateNode===i){var s=Hu((i[Ve]||null).action),a=r.submitter;a&&null!==(t=(t=a[Ve]||null)?Hu(t.formAction):a.getAttribute("formAction"))&&(s=t,a=null);var o=new nn("action","action",null,r,i);e.push({event:o,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Ou){var e=a?Wu(i,a):new FormData(i);eo(n,{pending:!0,data:e,method:i.method,action:s},null,e)}}else"function"===typeof s&&(o.preventDefault(),e=a?Wu(i,a):new FormData(i),eo(n,{pending:!0,data:e,method:i.method,action:s},s,e))},currentTarget:i}]})}}(a,e,r,n,i)}Xu(a,t)})}function nd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function rd(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;if(5!==(i=i.tag)&&26!==i&&27!==i||null===s||(null!=(i=Ut(e,n))&&r.unshift(nd(e,i,s)),null!=(i=Ut(e,t))&&r.push(nd(e,i,s))),3===e.tag)return r;e=e.return}return[]}function id(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function sd(e,t,n,r,i){for(var s=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,null!==l&&l===r)break;5!==o&&26!==o&&27!==o||null===c||(l=c,i?null!=(c=Ut(n,s))&&a.unshift(nd(n,c,l)):i||null!=(c=Ut(n,s))&&a.push(nd(n,c,l))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var ad=/\r\n?/g,od=/\u0000|\uFFFD/g;function ld(e){return("string"===typeof e?e:""+e).replace(ad,"\n").replace(od,"")}function cd(e,t){return t=ld(t),ld(e)===t}function ud(e,t,n,r,i,s){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||Et(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&Et(e,""+r);break;case"className":ct(e,"class",r);break;case"tabIndex":ct(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":ct(e,n,r);break;case"style":_t(e,r,s);break;case"data":if("object"!==t){ct(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Pt(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof s&&("formAction"===n?("input"!==t&&ud(e,t,"name",i.name,i,null),ud(e,t,"formEncType",i.formEncType,i,null),ud(e,t,"formMethod",i.formMethod,i,null),ud(e,t,"formTarget",i.formTarget,i,null)):(ud(e,t,"encType",i.encType,i,null),ud(e,t,"method",i.method,i,null),ud(e,t,"target",i.target,i,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Pt(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Rt);break;case"onScroll":null!=r&&Qu("scroll",e);break;case"onScrollEnd":null!=r&&Qu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(a(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=Pt(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Qu("beforetoggle",e),Qu("toggle",e),lt(e,"popover",r);break;case"xlinkActuate":ut(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":ut(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":ut(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":ut(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":ut(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":ut(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":ut(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":ut(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":ut(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":lt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&lt(e,n=It.get(n)||n,r)}}function dd(e,t,n,r,i,s){switch(n){case"style":_t(e,r,s);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(a(60));e.innerHTML=n}}break;case"children":"string"===typeof r?Et(e,r):("number"===typeof r||"bigint"===typeof r)&&Et(e,""+r);break;case"onScroll":null!=r&&Qu("scroll",e);break;case"onScrollEnd":null!=r&&Qu("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Rt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:nt.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),"function"===typeof(s=null!=(s=e[Ve]||null)?s[n]:null)&&e.removeEventListener(t,s,i),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):lt(e,n,r):("function"!==typeof s&&null!==s&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,i)))}}function hd(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qu("error",e),Qu("load",e);var r,i=!1,s=!1;for(r in n)if(n.hasOwnProperty(r)){var o=n[r];if(null!=o)switch(r){case"src":i=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:ud(e,t,r,o,n,null)}}return s&&ud(e,t,"srcSet",n.srcSet,n,null),void(i&&ud(e,t,"src",n.src,n,null));case"input":Qu("invalid",e);var l=r=o=s=null,c=null,u=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(null!=d)switch(i){case"name":s=d;break;case"type":o=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(a(137,t));break;default:ud(e,t,i,d,n,null)}}return void wt(e,r,l,c,u,o,s,!1);case"select":for(s in Qu("invalid",e),i=o=r=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":r=l;break;case"defaultValue":o=l;break;case"multiple":i=l;default:ud(e,t,s,l,n,null)}return t=r,n=o,e.multiple=!!i,void(null!=t?xt(e,!!i,t,!1):null!=n&&xt(e,!!i,n,!0));case"textarea":for(o in Qu("invalid",e),r=s=i=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":i=l;break;case"defaultValue":s=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(a(91));break;default:ud(e,t,o,l,n,null)}return void At(e,i,s,r);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(i=n[c]))if("selected"===c)e.selected=i&&"function"!==typeof i&&"symbol"!==typeof i;else ud(e,t,c,i,n,null);return;case"dialog":Qu("beforetoggle",e),Qu("toggle",e),Qu("cancel",e),Qu("close",e);break;case"iframe":case"object":Qu("load",e);break;case"video":case"audio":for(i=0;i<Ku.length;i++)Qu(Ku[i],e);break;case"image":Qu("error",e),Qu("load",e);break;case"details":Qu("toggle",e);break;case"embed":case"source":case"link":Qu("error",e),Qu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(i=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:ud(e,t,u,i,n,null)}return;default:if(Tt(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(i=n[d])&&dd(e,t,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(i=n[l])&&ud(e,t,l,i,n,null))}function fd(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var pd=null,md=null;function gd(e){return 9===e.nodeType?e:e.ownerDocument}function yd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function vd(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function wd(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var bd=null;var xd="function"===typeof setTimeout?setTimeout:void 0,Sd="function"===typeof clearTimeout?clearTimeout:void 0,Ad="function"===typeof Promise?Promise:void 0,Ed="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof Ad?function(e){return Ad.resolve(null).then(e).catch(Nd)}:xd;function Nd(e){setTimeout(function(){throw e})}function Cd(e){return"head"===e}function _d(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)||"/&"===n){if(0===r)return e.removeChild(i),void Wh(t);r--}else if("$"===n||"$?"===n||"$~"===n||"$!"===n||"&"===n)r++;else if("html"===n)jd(e.ownerDocument.documentElement);else if("head"===n){jd(n=e.ownerDocument.head);for(var s=n.firstChild;s;){var a=s.nextSibling,o=s.nodeName;s[Ye]||"SCRIPT"===o||"STYLE"===o||"LINK"===o&&"stylesheet"===s.rel.toLowerCase()||n.removeChild(s),s=a}}else"body"===n&&jd(e.ownerDocument.body);n=i}while(n);Wh(t)}function Td(e,t){var n=e;e=0;do{var r=n.nextSibling;if(1===n.nodeType?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",""===n.getAttribute("style")&&n.removeAttribute("style")):3===n.nodeType&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===e)break;e--}else"$"!==n&&"$?"!==n&&"$~"!==n&&"$!"!==n||e++;n=r}while(n)}function Id(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Id(n),Xe(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function kd(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=Dd(e.nextSibling)))return null}return e}function Pd(e){return"$?"===e.data||"$~"===e.data}function Rd(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function Dd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var Od=null;function Ld(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n||"/&"===n){if(0===t)return Dd(e.nextSibling);t--}else"$"!==n&&"$!"!==n&&"$?"!==n&&"$~"!==n&&"&"!==n||t++}e=e.nextSibling}return null}function Md(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n||"$~"===n||"&"===n){if(0===t)return e;t--}else"/$"!==n&&"/&"!==n||t++}e=e.previousSibling}return null}function Fd(e,t,n){switch(t=gd(n),e){case"html":if(!(e=t.documentElement))throw Error(a(452));return e;case"head":if(!(e=t.head))throw Error(a(453));return e;case"body":if(!(e=t.body))throw Error(a(454));return e;default:throw Error(a(451))}}function jd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Xe(e)}var Bd=new Map,Ud=new Set;function zd(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Vd=L.d;L.d={f:function(){var e=Vd.f(),t=$c();return e||t},r:function(e){var t=Je(e);null!==t&&5===t.tag&&"form"===t.type?no(t):Vd.r(e)},D:function(e){Vd.D(e),Wd("dns-prefetch",e,null)},C:function(e,t){Vd.C(e,t),Wd("preconnect",e,t)},L:function(e,t,n){Vd.L(e,t,n);var r=Hd;if(r&&e&&t){var i='link[rel="preload"][as="'+yt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(i+='[imagesrcset="'+yt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(i+='[imagesizes="'+yt(n.imageSizes)+'"]')):i+='[href="'+yt(e)+'"]';var s=i;switch(t){case"style":s=Gd(e);break;case"script":s=Xd(e)}Bd.has(s)||(e=f({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Bd.set(s,e),null!==r.querySelector(i)||"style"===t&&r.querySelector(Kd(s))||"script"===t&&r.querySelector(Qd(s))||(hd(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}},m:function(e,t){Vd.m(e,t);var n=Hd;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+yt(r)+'"][href="'+yt(e)+'"]',s=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Xd(e)}if(!Bd.has(s)&&(e=f({rel:"modulepreload",href:e},t),Bd.set(s,e),null===n.querySelector(i))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Qd(s)))return}hd(r=n.createElement("link"),"link",e),et(r),n.head.appendChild(r)}}},X:function(e,t){Vd.X(e,t);var n=Hd;if(n&&e){var r=$e(n).hoistableScripts,i=Xd(e),s=r.get(i);s||((s=n.querySelector(Qd(i)))||(e=f({src:e,async:!0},t),(t=Bd.get(i))&&eh(e,t),et(s=n.createElement("script")),hd(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}},S:function(e,t,n){Vd.S(e,t,n);var r=Hd;if(r&&e){var i=$e(r).hoistableStyles,s=Gd(e);t=t||"default";var a=i.get(s);if(!a){var o={loading:0,preload:null};if(a=r.querySelector(Kd(s)))o.loading=5;else{e=f({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Bd.get(s))&&$d(e,n);var l=a=r.createElement("link");et(l),hd(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Zd(a,t,r)}a={type:"stylesheet",instance:a,count:1,state:o},i.set(s,a)}}},M:function(e,t){Vd.M(e,t);var n=Hd;if(n&&e){var r=$e(n).hoistableScripts,i=Xd(e),s=r.get(i);s||((s=n.querySelector(Qd(i)))||(e=f({src:e,async:!0,type:"module"},t),(t=Bd.get(i))&&eh(e,t),et(s=n.createElement("script")),hd(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}}};var Hd="undefined"===typeof document?null:document;function Wd(e,t,n){var r=Hd;if(r&&"string"===typeof t&&t){var i=yt(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"===typeof n&&(i+='[crossorigin="'+n+'"]'),Ud.has(i)||(Ud.add(i),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(i)&&(hd(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}}function qd(e,t,n,r){var i,s,o,l,c=(c=G.current)?zd(c):null;if(!c)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Gd(n.href),(r=(n=$e(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Gd(n.href);var u=$e(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(Kd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),Bd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Bd.set(e,n),u||(i=c,s=e,o=n,l=d.state,i.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=i.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),hd(s,"link",o),et(s),i.head.appendChild(s))))),t&&null===r)throw Error(a(528,""));return d}if(t&&null!==r)throw Error(a(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Xd(n),(r=(n=$e(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function Gd(e){return'href="'+yt(e)+'"'}function Kd(e){return'link[rel="stylesheet"]['+e+"]"}function Yd(e){return f({},e,{"data-precedence":e.precedence,precedence:null})}function Xd(e){return'[src="'+yt(e)+'"]'}function Qd(e){return"script[async]"+e}function Jd(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+yt(n.href)+'"]');if(r)return t.instance=r,et(r),r;var i=f({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return et(r=(e.ownerDocument||e).createElement("style")),hd(r,"style",i),Zd(r,n.precedence,e),t.instance=r;case"stylesheet":i=Gd(n.href);var s=e.querySelector(Kd(i));if(s)return t.state.loading|=4,t.instance=s,et(s),s;r=Yd(n),(i=Bd.get(i))&&$d(r,i),et(s=(e.ownerDocument||e).createElement("link"));var o=s;return o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),hd(s,"link",r),t.state.loading|=4,Zd(s,n.precedence,e),t.instance=s;case"script":return s=Xd(n.src),(i=e.querySelector(Qd(s)))?(t.instance=i,et(i),i):(r=n,(i=Bd.get(s))&&eh(r=f({},n),i),et(i=(e=e.ownerDocument||e).createElement("script")),hd(i,"link",r),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(a(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Zd(r,n.precedence,e));return t.instance}function Zd(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,s=i,a=0;a<r.length;a++){var o=r[a];if(o.dataset.precedence===t)s=o;else if(s!==i)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function $d(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function eh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var th=null;function nh(e,t,n){if(null===th){var r=new Map,i=th=new Map;i.set(n,r)}else(r=(i=th).get(n))||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var s=n[i];if(!(s[Ye]||s[ze]||"link"===e&&"stylesheet"===s.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==s.namespaceURI){var a=s.getAttribute(t)||"";a=e+a;var o=r.get(a);o?o.push(s):r.set(a,[s])}}return r}function rh(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function ih(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var sh=0;function ah(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)lh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var oh=null;function lh(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,oh=new Map,t.forEach(ch,e),oh=null,ah.call(e))}function ch(e,t){if(!(4&t.state.loading)){var n=oh.get(e);if(n)var r=n.get(null);else{n=new Map,oh.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<i.length;s++){var a=i[s];"LINK"!==a.nodeName&&"not all"===a.getAttribute("media")||(n.set(a.dataset.precedence,a),r=a)}r&&n.set(null,r)}a=(i=t.instance).getAttribute("data-precedence"),(s=n.get(a)||r)===r&&n.set(null,i),n.set(a,i),this.count++,r=ah.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),s?s.parentNode.insertBefore(i,s.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var uh={$$typeof:x,Provider:null,Consumer:null,_currentValue:M,_currentValue2:M,_threadCount:0};function dh(e,t,n,r,i,s,a,o,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Pe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pe(0),this.hiddenUpdates=Pe(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function hh(e,t,n,r,i,s,a,o,l,c,u,d){return e=new dh(e,t,n,a,l,c,u,d,o),t=1,!0===s&&(t|=24),s=jr(3,null,null,t),e.current=s,s.stateNode=e,(t=Bi()).refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:r,isDehydrated:n,cache:t},gs(s),e}function fh(e){return e?e=Mr:Mr}function ph(e,t,n,r,i,s){i=fh(i),null===r.context?r.context=i:r.pendingContext=i,(r=vs(t)).payload={element:n},null!==(s=void 0===s?null:s)&&(r.callback=s),null!==(n=ws(e,r,t))&&(Yc(n,0,t),bs(n,e,t))}function mh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function gh(e,t){mh(e,t),(e=e.alternate)&&mh(e,t)}function yh(e){if(13===e.tag||31===e.tag){var t=Dr(e,67108864);null!==t&&Yc(t,0,67108864),gh(e,67108864)}}function vh(e){if(13===e.tag||31===e.tag){var t=Gc(),n=Dr(e,t=Me(t));null!==n&&Yc(n,0,t),gh(e,t)}}var wh=!0;function bh(e,t,n,r){var i=O.T;O.T=null;var s=L.p;try{L.p=2,Sh(e,t,n,r)}finally{L.p=s,O.T=i}}function xh(e,t,n,r){var i=O.T;O.T=null;var s=L.p;try{L.p=8,Sh(e,t,n,r)}finally{L.p=s,O.T=i}}function Sh(e,t,n,r){if(wh){var i=Ah(r);if(null===i)td(e,t,r,Eh,n),Lh(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Th=Mh(Th,e,t,n,r,i),!0;case"dragenter":return Ih=Mh(Ih,e,t,n,r,i),!0;case"mouseover":return kh=Mh(kh,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ph.set(s,Mh(Ph.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Rh.set(s,Mh(Rh.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lh(e,r),4&t&&-1<Oh.indexOf(e)){for(;null!==i;){var s=Je(i);if(null!==s)switch(s.tag){case 3:if((s=s.stateNode).current.memoizedState.isDehydrated){var a=Ce(s.pendingLanes);if(0!==a){var o=s;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var l=1<<31-be(a);o.entanglements[1]|=l,a&=~l}Lu(s),0===(6&fc)&&(Oc=le()+500,Mu(0,!1))}}break;case 31:case 13:null!==(o=Dr(s,2))&&Yc(o,0,2),$c(),gh(s,2)}if(null===(s=Ah(r))&&td(e,t,r,Eh,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else td(e,t,r,null,n)}}function Ah(e){return Nh(e=Ot(e))}var Eh=null;function Nh(e){if(Eh=null,null!==(e=Qe(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(31===n){if(null!==(e=u(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Eh=e,null}function Ch(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ce()){case ue:return 2;case de:return 8;case he:case fe:return 32;case pe:return 268435456;default:return 32}default:return 32}}var _h=!1,Th=null,Ih=null,kh=null,Ph=new Map,Rh=new Map,Dh=[],Oh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Lh(e,t){switch(e){case"focusin":case"focusout":Th=null;break;case"dragenter":case"dragleave":Ih=null;break;case"mouseover":case"mouseout":kh=null;break;case"pointerover":case"pointerout":Ph.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rh.delete(t.pointerId)}}function Mh(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=Je(t))&&yh(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Fh(e){var t=Qe(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void Be(e.priority,function(){vh(n)})}else if(31===t){if(null!==(t=u(n)))return e.blockedOn=t,void Be(e.priority,function(){vh(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ah(e.nativeEvent);if(null!==n)return null!==(t=Je(n))&&yh(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Dt=r,n.target.dispatchEvent(r),Dt=null,t.shift()}return!0}function Bh(e,t,n){jh(e)&&n.delete(t)}function Uh(){_h=!1,null!==Th&&jh(Th)&&(Th=null),null!==Ih&&jh(Ih)&&(Ih=null),null!==kh&&jh(kh)&&(kh=null),Ph.forEach(Bh),Rh.forEach(Bh)}function zh(e,t){e.blockedOn===t&&(e.blockedOn=null,_h||(_h=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Uh)))}var Vh=null;function Hh(e){Vh!==e&&(Vh=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Vh===e&&(Vh=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if("function"!==typeof r){if(null===Nh(r||n))continue;break}var s=Je(n);null!==s&&(e.splice(t,3),t-=3,eo(s,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function Wh(e){function t(t){return zh(t,e)}null!==Th&&zh(Th,e),null!==Ih&&zh(Ih,e),null!==kh&&zh(kh,e),Ph.forEach(t),Rh.forEach(t);for(var n=0;n<Dh.length;n++){var r=Dh[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Dh.length&&null===(n=Dh[0]).blockedOn;)Fh(n),null===n.blockedOn&&Dh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],s=n[r+1],a=i[Ve]||null;if("function"===typeof s)a||Hh(n);else if(a){var o=null;if(s&&s.hasAttribute("formAction")){if(i=s,a=s[Ve]||null)o=a.formAction;else if(null!==Nh(i))continue}else o=a.action;"function"===typeof o?n[r+1]=o:(n.splice(r,3),r-=3),Hh(n)}}}function qh(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return i=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==i&&(i(),i=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"===typeof navigation){var r=!1,i=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==i&&(i(),i=null)}}}function Gh(e){this._internalRoot=e}function Kh(e){this._internalRoot=e}Kh.prototype.render=Gh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));ph(t.current,Gc(),e,t,null,null)},Kh.prototype.unmount=Gh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;ph(e.current,2,null,e,null,null),$c(),t[He]=null}},Kh.prototype.unstable_scheduleHydration=function(e){if(e){var t=je();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dh.length&&0!==t&&t<Dh[n].priority;n++);Dh.splice(n,0,e),0===n&&Fh(e)}};var Yh=i.version;if("19.2.0"!==Yh)throw Error(a(527,Yh,"19.2.0"));L.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return d(i),e;if(s===r)return d(i),t;s=s.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o){for(c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?h(e):null)?null:e.stateNode};var Xh={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.2.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Qh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qh.isDisabled&&Qh.supportsFiber)try{ye=Qh.inject(Xh),ve=Qh}catch(Zh){}}t.createRoot=function(e,t){if(!o(e))throw Error(a(299));var n=!1,r="",i=Eo,s=No,l=Co;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(s=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError)),t=hh(e,1,!1,null,0,n,r,null,i,s,l,qh),e[He]=t.current,$u(e),new Gh(t)},t.hydrateRoot=function(e,t,n){if(!o(e))throw Error(a(299));var r=!1,i="",s=Eo,l=No,c=Co,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onUncaughtError&&(s=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.formState&&(u=n.formState)),(t=hh(e,1,!0,t,0,r,i,u,s,l,c,qh)).context=fh(null),n=t.current,(i=vs(r=Me(r=Gc()))).callback=null,ws(n,i,r),n=r,t.current.lanes=n,Re(t,n),Lu(t),e[He]=t.current,$u(e),new Kh(t)},t.version="19.2.0"},7198:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultsFromPostinstall=()=>{}},7347:e=>{"use strict";var t={single_source_shortest_paths:function(e,n,r){var i={},s={};s[n]=0;var a,o,l,c,u,d,h,f=t.PriorityQueue.make();for(f.push(n,0);!f.empty();)for(l in o=(a=f.pop()).value,c=a.cost,u=e[o]||{})u.hasOwnProperty(l)&&(d=c+u[l],h=s[l],("undefined"===typeof s[l]||h>d)&&(s[l]=d,f.push(l,d),i[l]=o));if("undefined"!==typeof r&&"undefined"===typeof s[r]){var p=["Could not find a path from ",n," to ",r,"."].join("");throw new Error(p)}return i},extract_shortest_path_from_predecessor_list:function(e,t){for(var n=[],r=t;r;)n.push(r),e[r],r=e[r];return n.reverse(),n},find_path:function(e,n,r){var i=t.single_source_shortest_paths(e,n,r);return t.extract_shortest_path_from_predecessor_list(i,r)},PriorityQueue:{make:function(e){var n,r=t.PriorityQueue,i={};for(n in e=e||{},r)r.hasOwnProperty(n)&&(i[n]=r[n]);return i.queue=[],i.sorter=e.sorter||r.default_sorter,i},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){var n={value:e,cost:t};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};e.exports=t},7421:(e,t,n)=>{const r=n(3257),i=n(8511);t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(e,t){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!r.isValid(t))throw new Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]},t.getBestModeForData=function(e){return i.testNumeric(e)?t.NUMERIC:i.testAlphanumeric(e)?t.ALPHANUMERIC:i.testKanji(e)?t.KANJI:t.BYTE},t.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},t.isValid=function(e){return e&&e.bit&&e.ccBits},t.from=function(e,n){if(t.isValid(e))return e;try{return function(e){if("string"!==typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+e)}}(e)}catch(r){return n}}},7736:(e,t,n)=>{var r=n(3738).default,i=n(9045);e.exports=function(e){var t=i(e,"string");return"symbol"==r(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},7762:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AcroForm:()=>xt,AcroFormAppearance:()=>wt,AcroFormButton:()=>ht,AcroFormCheckBox:()=>gt,AcroFormChoiceField:()=>lt,AcroFormComboBox:()=>ut,AcroFormEditBox:()=>dt,AcroFormListBox:()=>ct,AcroFormPasswordField:()=>vt,AcroFormPushButton:()=>ft,AcroFormRadioButton:()=>pt,AcroFormTextField:()=>yt,GState:()=>Ie,ShadingPattern:()=>Pe,TilingPattern:()=>Re,default:()=>bn,jsPDF:()=>De});var r=n(2284),i=Uint8Array,s=Uint16Array,a=Int32Array,o=new i([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),l=new i([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),c=new i([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),u=function(e,t){for(var n=new s(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var i=new a(n[30]);for(r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)i[o]=o-n[r]<<5|r;return{b:n,r:i}},d=u(o,2),h=d.b,f=d.r;h[28]=258,f[258]=28;for(var p=u(l,0),m=p.b,g=p.r,y=new s(32768),v=0;v<32768;++v){var w=(43690&v)>>1|(21845&v)<<1;w=(61680&(w=(52428&w)>>2|(13107&w)<<2))>>4|(3855&w)<<4,y[v]=((65280&w)>>8|(255&w)<<8)>>1}var b=function(e,t,n){for(var r=e.length,i=0,a=new s(t);i<r;++i)e[i]&&++a[e[i]-1];var o,l=new s(t);for(i=1;i<t;++i)l[i]=l[i-1]+a[i-1]<<1;if(n){o=new s(1<<t);var c=15-t;for(i=0;i<r;++i)if(e[i])for(var u=i<<4|e[i],d=t-e[i],h=l[e[i]-1]++<<d,f=h|(1<<d)-1;h<=f;++h)o[y[h]>>c]=u}else for(o=new s(r),i=0;i<r;++i)e[i]&&(o[i]=y[l[e[i]-1]++]>>15-e[i]);return o},x=new i(288);for(v=0;v<144;++v)x[v]=8;for(v=144;v<256;++v)x[v]=9;for(v=256;v<280;++v)x[v]=7;for(v=280;v<288;++v)x[v]=8;var S=new i(32);for(v=0;v<32;++v)S[v]=5;var A=b(x,9,0),E=b(x,9,1),N=b(S,5,0),C=b(S,5,1),_=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},T=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},I=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},k=function(e){return(e+7)/8|0},P=function(e,t,n){return(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length),new i(e.subarray(t,n))},R=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],D=function(e,t,n){var r=new Error(t||R[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,D),!n)throw r;return r},O=function(e,t,n,r){var s=e.length,a=r?r.length:0;if(!s||t.f&&!t.l)return n||new i(0);var u=!n,d=u||2!=t.i,f=t.i;u&&(n=new i(3*s));var p=function(e){var t=n.length;if(e>t){var r=new i(Math.max(2*t,e));r.set(n),n=r}},g=t.f||0,y=t.p||0,v=t.b||0,w=t.l,x=t.d,S=t.m,A=t.n,N=8*s;do{if(!w){g=T(e,y,1);var R=T(e,y+1,3);if(y+=3,!R){var O=e[(q=k(y)+4)-4]|e[q-3]<<8,L=q+O;if(L>s){f&&D(0);break}d&&p(v+O),n.set(e.subarray(q,L),v),t.b=v+=O,t.p=y=8*L,t.f=g;continue}if(1==R)w=E,x=C,S=9,A=5;else if(2==R){var M=T(e,y,31)+257,F=T(e,y+10,15)+4,j=M+T(e,y+5,31)+1;y+=14;for(var B=new i(j),U=new i(19),z=0;z<F;++z)U[c[z]]=T(e,y+3*z,7);y+=3*F;var V=_(U),H=(1<<V)-1,W=b(U,V,1);for(z=0;z<j;){var q,G=W[T(e,y,H)];if(y+=15&G,(q=G>>4)<16)B[z++]=q;else{var K=0,Y=0;for(16==q?(Y=3+T(e,y,3),y+=2,K=B[z-1]):17==q?(Y=3+T(e,y,7),y+=3):18==q&&(Y=11+T(e,y,127),y+=7);Y--;)B[z++]=K}}var X=B.subarray(0,M),Q=B.subarray(M);S=_(X),A=_(Q),w=b(X,S,1),x=b(Q,A,1)}else D(1);if(y>N){f&&D(0);break}}d&&p(v+131072);for(var J=(1<<S)-1,Z=(1<<A)-1,$=y;;$=y){var ee=(K=w[I(e,y)&J])>>4;if((y+=15&K)>N){f&&D(0);break}if(K||D(2),ee<256)n[v++]=ee;else{if(256==ee){$=y,w=null;break}var te=ee-254;if(ee>264){var ne=o[z=ee-257];te=T(e,y,(1<<ne)-1)+h[z],y+=ne}var re=x[I(e,y)&Z],ie=re>>4;re||D(3),y+=15&re;Q=m[ie];if(ie>3){ne=l[ie];Q+=I(e,y)&(1<<ne)-1,y+=ne}if(y>N){f&&D(0);break}d&&p(v+131072);var se=v+te;if(v<Q){var ae=a-Q,oe=Math.min(Q,se);for(ae+v<0&&D(3);v<oe;++v)n[v]=r[ae+v]}for(;v<se;++v)n[v]=n[v-Q]}}t.l=w,t.p=$,t.b=v,t.f=g,w&&(g=1,t.m=S,t.d=x,t.n=A)}while(!g);return v!=n.length&&u?P(n,0,v):n.subarray(0,v)},L=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8},M=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8,e[r+2]|=n>>16},F=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var a=n.length,o=n.slice();if(!a)return{t:W,l:0};if(1==a){var l=new i(n[0].s+1);return l[n[0].s]=1,{t:l,l:1}}n.sort(function(e,t){return e.f-t.f}),n.push({s:-1,f:25001});var c=n[0],u=n[1],d=0,h=1,f=2;for(n[0]={s:-1,f:c.f+u.f,l:c,r:u};h!=a-1;)c=n[n[d].f<n[f].f?d++:f++],u=n[d!=h&&n[d].f<n[f].f?d++:f++],n[h++]={s:-1,f:c.f+u.f,l:c,r:u};var p=o[0].s;for(r=1;r<a;++r)o[r].s>p&&(p=o[r].s);var m=new s(p+1),g=j(n[h-1],m,0);if(g>t){r=0;var y=0,v=g-t,w=1<<v;for(o.sort(function(e,t){return m[t.s]-m[e.s]||e.f-t.f});r<a;++r){var b=o[r].s;if(!(m[b]>t))break;y+=w-(1<<g-m[b]),m[b]=t}for(y>>=v;y>0;){var x=o[r].s;m[x]<t?y-=1<<t-m[x]++-1:++r}for(;r>=0&&y;--r){var S=o[r].s;m[S]==t&&(--m[S],++y)}g=t}return{t:new i(m),l:g}},j=function(e,t,n){return-1==e.s?Math.max(j(e.l,t,n+1),j(e.r,t,n+1)):t[e.s]=n},B=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new s(++t),r=0,i=e[0],a=1,o=function(e){n[r++]=e},l=1;l<=t;++l)if(e[l]==i&&l!=t)++a;else{if(!i&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(i),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(i);a=1,i=e[l]}return{c:n.subarray(0,r),n:t}},U=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},z=function(e,t,n){var r=n.length,i=k(t+2);e[i]=255&r,e[i+1]=r>>8,e[i+2]=255^e[i],e[i+3]=255^e[i+1];for(var s=0;s<r;++s)e[i+s+4]=n[s];return 8*(i+4+r)},V=function(e,t,n,r,i,a,u,d,h,f,p){L(t,p++,n),++i[256];for(var m=F(i,15),g=m.t,y=m.l,v=F(a,15),w=v.t,E=v.l,C=B(g),_=C.c,T=C.n,I=B(w),k=I.c,P=I.n,R=new s(19),D=0;D<_.length;++D)++R[31&_[D]];for(D=0;D<k.length;++D)++R[31&k[D]];for(var O=F(R,7),j=O.t,V=O.l,H=19;H>4&&!j[c[H-1]];--H);var W,q,G,K,Y=f+5<<3,X=U(i,x)+U(a,S)+u,Q=U(i,g)+U(a,w)+u+14+3*H+U(R,j)+2*R[16]+3*R[17]+7*R[18];if(h>=0&&Y<=X&&Y<=Q)return z(t,p,e.subarray(h,h+f));if(L(t,p,1+(Q<X)),p+=2,Q<X){W=b(g,y,0),q=g,G=b(w,E,0),K=w;var J=b(j,V,0);L(t,p,T-257),L(t,p+5,P-1),L(t,p+10,H-4),p+=14;for(D=0;D<H;++D)L(t,p+3*D,j[c[D]]);p+=3*H;for(var Z=[_,k],$=0;$<2;++$){var ee=Z[$];for(D=0;D<ee.length;++D){var te=31&ee[D];L(t,p,J[te]),p+=j[te],te>15&&(L(t,p,ee[D]>>5&127),p+=ee[D]>>12)}}}else W=A,q=x,G=N,K=S;for(D=0;D<d;++D){var ne=r[D];if(ne>255){M(t,p,W[(te=ne>>18&31)+257]),p+=q[te+257],te>7&&(L(t,p,ne>>23&31),p+=o[te]);var re=31&ne;M(t,p,G[re]),p+=K[re],re>3&&(M(t,p,ne>>5&8191),p+=l[re])}else M(t,p,W[ne]),p+=q[ne]}return M(t,p,W[256]),p+q[256]},H=new a([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),W=new i(0),q=function(e,t,n,r,c,u){var d=u.z||e.length,h=new i(r+d+5*(1+Math.ceil(d/7e3))+c),p=h.subarray(r,h.length-c),m=u.l,y=7&(u.r||0);if(t){y&&(p[0]=u.r>>3);for(var v=H[t-1],w=v>>13,b=8191&v,x=(1<<n)-1,S=u.p||new s(32768),A=u.h||new s(x+1),E=Math.ceil(n/3),N=2*E,C=function(t){return(e[t]^e[t+1]<<E^e[t+2]<<N)&x},_=new a(25e3),T=new s(288),I=new s(32),R=0,D=0,O=u.i||0,L=0,M=u.w||0,F=0;O+2<d;++O){var j=C(O),B=32767&O,U=A[j];if(S[B]=U,A[j]=B,M<=O){var W=d-O;if((R>7e3||L>24576)&&(W>423||!m)){y=V(e,p,0,_,T,I,D,L,F,O-F,y),L=R=D=0,F=O;for(var q=0;q<286;++q)T[q]=0;for(q=0;q<30;++q)I[q]=0}var G=2,K=0,Y=b,X=B-U&32767;if(W>2&&j==C(O-X))for(var Q=Math.min(w,W)-1,J=Math.min(32767,O),Z=Math.min(258,W);X<=J&&--Y&&B!=U;){if(e[O+G]==e[O+G-X]){for(var $=0;$<Z&&e[O+$]==e[O+$-X];++$);if($>G){if(G=$,K=X,$>Q)break;var ee=Math.min(X,$-2),te=0;for(q=0;q<ee;++q){var ne=O-X+q&32767,re=ne-S[ne]&32767;re>te&&(te=re,U=ne)}}}X+=(B=U)-(U=S[B])&32767}if(K){_[L++]=268435456|f[G]<<18|g[K];var ie=31&f[G],se=31&g[K];D+=o[ie]+l[se],++T[257+ie],++I[se],M=O+G,++R}else _[L++]=e[O],++T[e[O]]}}for(O=Math.max(O,M);O<d;++O)_[L++]=e[O],++T[e[O]];y=V(e,p,m,_,T,I,D,L,F,O-F,y),m||(u.r=7&y|p[y/8|0]<<3,y-=7,u.h=A,u.p=S,u.i=O,u.w=M)}else{for(O=u.w||0;O<d+m;O+=65535){var ae=O+65535;ae>=d&&(p[y/8|0]=m,ae=d),y=z(p,y+1,e.subarray(O,ae))}u.i=d}return P(h,0,r+k(y)+c)},G=function(){var e=1,t=0;return{p:function(n){for(var r=e,i=t,s=0|n.length,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=r+=n[a];r=(65535&r)+15*(r>>16),i=(65535&i)+15*(i>>16)}e=r,t=i},d:function(){return(255&(e%=65521))<<24|(65280&e)<<8|(255&(t%=65521))<<8|t>>8}}},K=function(e,t,n,r,s){if(!s&&(s={l:1},t.dictionary)){var a=t.dictionary.subarray(-32768),o=new i(a.length+e.length);o.set(a),o.set(e,a.length),e=o,s.w=a.length}return q(e,null==t.level?6:t.level,null==t.mem?s.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):20:12+t.mem,n,r,s)},Y=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},X=function(e,t){var n=t.level,r=0==n?0:n<6?1:9==n?3:2;if(e[0]=120,e[1]=r<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var i=G();i.p(t.dictionary),Y(e,2,i.d())}},Q=function(e,t){return(8!=(15&e[0])||e[0]>>4>7||(e[0]<<8|e[1])%31)&&D(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&D(6,"invalid zlib data: "+(32&e[1]?"need":"unexpected")+" dictionary"),2+(e[1]>>3&4)};function J(e,t){t||(t={});var n=G();n.p(e);var r=K(e,t,t.dictionary?6:2,4);return X(r,t),Y(r,r.length-4,n.d()),r}function Z(e,t){return O(e.subarray(Q(e,t&&t.dictionary),-4),{i:2},t&&t.out,t&&t.dictionary)}var $="undefined"!=typeof TextDecoder&&new TextDecoder;try{$.decode(W,{stream:!0})}catch(xn){}"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;var ee=function(){return"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:this}();function te(){ee.console&&"function"==typeof ee.console.log&&ee.console.log.apply(ee.console,arguments)}var ne={log:te,warn:function(e){ee.console&&("function"==typeof ee.console.warn?ee.console.warn.apply(ee.console,arguments):te.call(null,arguments))},error:function(e){ee.console&&("function"==typeof ee.console.error?ee.console.error.apply(ee.console,arguments):te(e))}};function re(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){le(r.response,t,n)},r.onerror=function(){ne.error("could not download file")},r.send()}function ie(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return t.status>=200&&t.status<=299}function se(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var ae,oe,le=ee.saveAs||("object"!==("undefined"==typeof window?"undefined":(0,r.A)(window))||window!==ee?function(){}:"undefined"!=typeof HTMLAnchorElement&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var r=ee.URL||ee.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener","string"==typeof e?(i.href=e,i.origin!==location.origin?ie(i.href)?re(e,t,n):se(i,i.target="_blank"):se(i)):(i.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){se(i)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download","string"==typeof e)if(ie(e))re(e,t,n);else{var i=document.createElement("a");i.href=e,i.target="_blank",setTimeout(function(){se(i)})}else navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!==(0,r.A)(t)&&(ne.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}(e,n),t)}:function(e,t,n,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof e)return re(e,t,n);var s="application/octet-stream"===e.type,a=/constructor/i.test(ee.HTMLElement)||ee.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||s&&a)&&"object"===("undefined"==typeof FileReader?"undefined":(0,r.A)(FileReader))){var l=new FileReader;l.onloadend=function(){var e=l.result;e=o?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=e:location=e,i=null},l.readAsDataURL(e)}else{var c=ee.URL||ee.webkitURL,u=c.createObjectURL(e);i?i.location=u:location.href=u,i=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});function ce(e){var t;e=e||"",this.ok=!1,"#"==e.charAt(0)&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,a=i.exec(e);a&&(t=s(a),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var e=this.r.toString(16),t=this.g.toString(16),n=this.b.toString(16);return 1==e.length&&(e="0"+e),1==t.length&&(t="0"+t),1==n.length&&(n="0"+n),"#"+e+t+n}}function ue(e,t){var n=e[0],r=e[1],i=e[2],s=e[3];n=he(n,r,i,s,t[0],7,-680876936),s=he(s,n,r,i,t[1],12,-389564586),i=he(i,s,n,r,t[2],17,606105819),r=he(r,i,s,n,t[3],22,-1044525330),n=he(n,r,i,s,t[4],7,-176418897),s=he(s,n,r,i,t[5],12,1200080426),i=he(i,s,n,r,t[6],17,-1473231341),r=he(r,i,s,n,t[7],22,-45705983),n=he(n,r,i,s,t[8],7,1770035416),s=he(s,n,r,i,t[9],12,-1958414417),i=he(i,s,n,r,t[10],17,-42063),r=he(r,i,s,n,t[11],22,-1990404162),n=he(n,r,i,s,t[12],7,1804603682),s=he(s,n,r,i,t[13],12,-40341101),i=he(i,s,n,r,t[14],17,-1502002290),n=fe(n,r=he(r,i,s,n,t[15],22,1236535329),i,s,t[1],5,-165796510),s=fe(s,n,r,i,t[6],9,-1069501632),i=fe(i,s,n,r,t[11],14,643717713),r=fe(r,i,s,n,t[0],20,-373897302),n=fe(n,r,i,s,t[5],5,-701558691),s=fe(s,n,r,i,t[10],9,38016083),i=fe(i,s,n,r,t[15],14,-660478335),r=fe(r,i,s,n,t[4],20,-405537848),n=fe(n,r,i,s,t[9],5,568446438),s=fe(s,n,r,i,t[14],9,-1019803690),i=fe(i,s,n,r,t[3],14,-187363961),r=fe(r,i,s,n,t[8],20,1163531501),n=fe(n,r,i,s,t[13],5,-1444681467),s=fe(s,n,r,i,t[2],9,-51403784),i=fe(i,s,n,r,t[7],14,1735328473),n=pe(n,r=fe(r,i,s,n,t[12],20,-1926607734),i,s,t[5],4,-378558),s=pe(s,n,r,i,t[8],11,-2022574463),i=pe(i,s,n,r,t[11],16,1839030562),r=pe(r,i,s,n,t[14],23,-35309556),n=pe(n,r,i,s,t[1],4,-1530992060),s=pe(s,n,r,i,t[4],11,1272893353),i=pe(i,s,n,r,t[7],16,-155497632),r=pe(r,i,s,n,t[10],23,-1094730640),n=pe(n,r,i,s,t[13],4,681279174),s=pe(s,n,r,i,t[0],11,-358537222),i=pe(i,s,n,r,t[3],16,-722521979),r=pe(r,i,s,n,t[6],23,76029189),n=pe(n,r,i,s,t[9],4,-640364487),s=pe(s,n,r,i,t[12],11,-421815835),i=pe(i,s,n,r,t[15],16,530742520),n=me(n,r=pe(r,i,s,n,t[2],23,-995338651),i,s,t[0],6,-198630844),s=me(s,n,r,i,t[7],10,1126891415),i=me(i,s,n,r,t[14],15,-1416354905),r=me(r,i,s,n,t[5],21,-57434055),n=me(n,r,i,s,t[12],6,1700485571),s=me(s,n,r,i,t[3],10,-1894986606),i=me(i,s,n,r,t[10],15,-1051523),r=me(r,i,s,n,t[1],21,-2054922799),n=me(n,r,i,s,t[8],6,1873313359),s=me(s,n,r,i,t[15],10,-30611744),i=me(i,s,n,r,t[6],15,-1560198380),r=me(r,i,s,n,t[13],21,1309151649),n=me(n,r,i,s,t[4],6,-145523070),s=me(s,n,r,i,t[11],10,-1120210379),i=me(i,s,n,r,t[2],15,718787259),r=me(r,i,s,n,t[9],21,-343485551),e[0]=Ae(n,e[0]),e[1]=Ae(r,e[1]),e[2]=Ae(i,e[2]),e[3]=Ae(s,e[3])}function de(e,t,n,r,i,s){return t=Ae(Ae(t,e),Ae(r,s)),Ae(t<<i|t>>>32-i,n)}function he(e,t,n,r,i,s,a){return de(t&n|~t&r,e,t,i,s,a)}function fe(e,t,n,r,i,s,a){return de(t&r|n&~r,e,t,i,s,a)}function pe(e,t,n,r,i,s,a){return de(t^n^r,e,t,i,s,a)}function me(e,t,n,r,i,s,a){return de(n^(t|~r),e,t,i,s,a)}function ge(e){var t,n=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)ue(r,ye(e.substring(t-64,t)));e=e.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(ue(r,i),t=0;t<16;t++)i[t]=0;return i[14]=8*n,ue(r,i),r}function ye(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}ae=ee.atob.bind(ee),oe=ee.btoa.bind(ee);var ve="0123456789abcdef".split("");function we(e){for(var t="",n=0;n<4;n++)t+=ve[e>>8*n+4&15]+ve[e>>8*n&15];return t}function be(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function xe(e){return ge(e).map(be).join("")}var Se="5d41402abc4b2a76b9719d911017c592"!=function(e){for(var t=0;t<e.length;t++)e[t]=we(e[t]);return e.join("")}(ge("hello"));function Ae(e,t){if(Se){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}function Ee(e,t){var n,r,i,s;if(e!==n){for(var a=(i=e,s=1+(256/e.length|0),new Array(s+1).join(i)),o=[],l=0;l<256;l++)o[l]=l;var c=0;for(l=0;l<256;l++){var u=o[l];c=(c+u+a.charCodeAt(l))%256,o[l]=o[c],o[c]=u}n=e,r=o}else o=r;var d=t.length,h=0,f=0,p="";for(l=0;l<d;l++)f=(f+(u=o[h=(h+1)%256]))%256,o[h]=o[f],o[f]=u,a=o[(o[h]+o[f])%256],p+=String.fromCharCode(t.charCodeAt(l)^a);return p}var Ne={print:4,modify:8,copy:16,"annot-forms":32};function Ce(e,t,n,r){this.v=1,this.r=2;var i=192;e.forEach(function(e){if(void 0!==Ne.perm)throw new Error("Invalid permission: "+e);i+=Ne[e]}),this.padding="(\xbfN^Nu\x8aAd\0NV\xff\xfa\x01\b..\0\xb6\xd0h>\x80/\f\xa9\xfedSiz";var s=(t+this.padding).substr(0,32),a=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,a),this.P=-(1+(255^i)),this.encryptionKey=xe(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Ee(this.encryptionKey,this.padding)}function _e(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,r=0;r<n;r++){var i=e.charCodeAt(r);t+=i<33||35===i||37===i||40===i||41===i||47===i||60===i||62===i||91===i||93===i||123===i||125===i||i>126?"#"+("0"+i.toString(16)).slice(-2):e[r]}return t}function Te(e){if("object"!==(0,r.A)(e))throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,n,r){if(r=r||!1,"string"!=typeof e||"function"!=typeof n||"boolean"!=typeof r)throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var i=Math.random().toString(35);return t[e][i]=[n,!!r],i},this.unsubscribe=function(e){for(var n in t)if(t[n][e])return delete t[n][e],0===Object.keys(t[n]).length&&delete t[n],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in t[n]){var a=t[n][s];try{a[0].apply(e,r)}catch(n){ee.console&&ne.error("jsPDF PubSub Error",n.message,n)}a[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Ie(e){if(!(this instanceof Ie))return new Ie(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function ke(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Pe(e,t,n,r,i){if(!(this instanceof Pe))return new Pe(e,t,n,r,i);this.type="axial"===e?2:3,this.coords=t,this.colors=n,ke.call(this,r,i)}function Re(e,t,n,r,i){if(!(this instanceof Re))return new Re(e,t,n,r,i);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,ke.call(this,r,i)}function De(e){var t,n="string"==typeof arguments[0]?arguments[0]:"p",i=arguments[1],s=arguments[2],a=arguments[3],o=[],l=1,c=16,u="S",d=null;"object"===(0,r.A)(e=e||{})&&(n=e.orientation,i=e.unit||i,s=e.format||s,a=e.compress||e.compressPdf||a,null!==(d=e.encryption||null)&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),l="number"==typeof e.userUnit?Math.abs(e.userUnit):1,void 0!==e.precision&&(t=e.precision),void 0!==e.floatPrecision&&(c=e.floatPrecision),u=e.defaultPathOperation||"S"),o=e.filters||(!0===a?["FlateEncode"]:o),i=i||"mm",n=(""+(n||"P")).toLowerCase();var h=e.putOnlyUsedFonts||!1,f={},p={internal:{},__private__:{}};p.__private__.PubSub=Te;var m="1.3",g=p.__private__.getPdfVersion=function(){return m};p.__private__.setPdfVersion=function(e){m=e};var y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return y};var v=p.__private__.getPageFormat=function(e){return y[e]};s=s||"a4";var w="compat",b="advanced",x=w;function S(){this.saveGraphicsState(),Z(new We(ve,0,0,-ve,0,An()*ve).toString()+" cm"),this.setFontSize(this.getFontSize()/ve),u="n",x=b}function A(){this.restoreGraphicsState(),u="S",x=w}var E=p.__private__.combineFontStyleAndFontWeight=function(e,t){if("bold"==e&&"normal"==t||"bold"==e&&400==t||"normal"==e&&"italic"==t||"bold"==e&&"italic"==t)throw new Error("Invalid Combination of fontweight and fontstyle");return t&&(e=400==t||"normal"===t?"italic"===e?"italic":"normal":700!=t&&"bold"!==t||"normal"!==e?(700==t?"bold":t)+""+e:"bold"),e};p.advancedAPI=function(e){var t=x===w;return t&&S.call(this),"function"!=typeof e||(e(this),t&&A.call(this)),this},p.compatAPI=function(e){var t=x===b;return t&&A.call(this),"function"!=typeof e||(e(this),t&&S.call(this)),this},p.isAdvancedAPI=function(){return x===b};var N,C=function(e){if(x!==b)throw new Error(e+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},_=p.roundToPrecision=p.__private__.roundToPrecision=function(e,n){var r=t||n;if(isNaN(e)||isNaN(r))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return e.toFixed(r).replace(/0+$/,"")};N=p.hpf=p.__private__.hpf="number"==typeof c?function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return _(e,c)}:"smart"===c?function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return _(e,e>-1&&e<1?16:5)}:function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return _(e,16)};var T=p.f2=p.__private__.f2=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f2");return _(e,2)},I=p.__private__.f3=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f3");return _(e,3)},k=p.scale=p.__private__.scale=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.scale");return x===w?e*ve:x===b?e:void 0},P=function(e){return k(function(e){return x===w?An()-e:x===b?e:void 0}(e))};p.__private__.setPrecision=p.setPrecision=function(e){"number"==typeof parseInt(e,10)&&(t=parseInt(e,10))};var R,D="00000000000000000000000000000000",O=p.__private__.getFileId=function(){return D},L=p.__private__.setFileId=function(e){return D=void 0!==e&&/^[a-fA-F0-9]{32}$/.test(e)?e.toUpperCase():D.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),null!==d&&(Rt=new Ce(d.userPermissions,d.userPassword,d.ownerPassword,D)),D};p.setFileId=function(e){return L(e),this},p.getFileId=function(){return O()};var M=p.__private__.convertDateToPDFDate=function(e){var t=e.getTimezoneOffset(),n=t<0?"+":"-",r=Math.floor(Math.abs(t/60)),i=Math.abs(t%60),s=[n,z(r),"'",z(i),"'"].join("");return["D:",e.getFullYear(),z(e.getMonth()+1),z(e.getDate()),z(e.getHours()),z(e.getMinutes()),z(e.getSeconds()),s].join("")},F=p.__private__.convertPDFDateToDate=function(e){var t=parseInt(e.substr(2,4),10),n=parseInt(e.substr(6,2),10)-1,r=parseInt(e.substr(8,2),10),i=parseInt(e.substr(10,2),10),s=parseInt(e.substr(12,2),10),a=parseInt(e.substr(14,2),10);return new Date(t,n,r,i,s,a,0)},j=p.__private__.setCreationDate=function(e){var t;if(void 0===e&&(e=new Date),e instanceof Date)t=M(e);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(e))throw new Error("Invalid argument passed to jsPDF.setCreationDate");t=e}return R=t},B=p.__private__.getCreationDate=function(e){var t=R;return"jsDate"===e&&(t=F(R)),t};p.setCreationDate=function(e){return j(e),this},p.getCreationDate=function(e){return B(e)};var U,z=p.__private__.padd2=function(e){return("0"+parseInt(e)).slice(-2)},V=p.__private__.padd2Hex=function(e){return("00"+(e=e.toString())).substr(e.length)},H=0,W=[],q=[],G=0,K=[],Y=[],X=!1,Q=q;p.__private__.setCustomOutputDestination=function(e){X=!0,Q=e};var J=function(e){X||(Q=e)};p.__private__.resetCustomOutputDestination=function(){X=!1,Q=q};var Z=p.__private__.out=function(e){return e=e.toString(),G+=e.length+1,Q.push(e),Q},$=p.__private__.write=function(e){return Z(1===arguments.length?e.toString():Array.prototype.join.call(arguments," "))},te=p.__private__.getArrayBuffer=function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n);t--;)r[t]=e.charCodeAt(t);return n},re=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return re};var ie=e.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(e){return ie=x===b?e/ve:e,this};var se,ae=p.__private__.getFontSize=p.getFontSize=function(){return x===w?ie:ie*ve},ue=e.R2L||!1;p.__private__.setR2L=p.setR2L=function(e){return ue=e,this},p.__private__.getR2L=p.getR2L=function(){return ue};var de,he=p.__private__.setZoomMode=function(e){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(e))se=e;else if(isNaN(e)){if(-1===[void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(e))throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+e+'" is not recognized.');se=e}else se=parseInt(e,10)};p.__private__.getZoomMode=function(){return se};var fe,pe=p.__private__.setPageMode=function(e){if(-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(e))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+e+'" is not recognized.');de=e};p.__private__.getPageMode=function(){return de};var me=p.__private__.setLayoutMode=function(e){if(-1==[void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(e))throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+e+'" is not recognized.');fe=e};p.__private__.getLayoutMode=function(){return fe},p.__private__.setDisplayMode=p.setDisplayMode=function(e,t,n){return he(e),me(t),pe(n),this};var ge={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(e){if(-1===Object.keys(ge).indexOf(e))throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ge[e]},p.__private__.getDocumentProperties=function(){return ge},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(e){for(var t in ge)ge.hasOwnProperty(t)&&e[t]&&(ge[t]=e[t]);return this},p.__private__.setDocumentProperty=function(e,t){if(-1===Object.keys(ge).indexOf(e))throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ge[e]=t};var ye,ve,we,be,xe,Se={},Ae={},Ee=[],Ne={},ke={},Oe={},Le={},Me=null,Fe=0,je=[],Be=new Te(p),Ue=e.hotfixes||[],ze={},Ve={},He=[],We=function e(t,n,r,i,s,a){if(!(this instanceof e))return new e(t,n,r,i,s,a);isNaN(t)&&(t=1),isNaN(n)&&(n=0),isNaN(r)&&(r=0),isNaN(i)&&(i=1),isNaN(s)&&(s=0),isNaN(a)&&(a=0),this._matrix=[t,n,r,i,s,a]};Object.defineProperty(We.prototype,"sx",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty(We.prototype,"shy",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty(We.prototype,"shx",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty(We.prototype,"sy",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty(We.prototype,"tx",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty(We.prototype,"ty",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty(We.prototype,"a",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty(We.prototype,"b",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty(We.prototype,"c",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty(We.prototype,"d",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty(We.prototype,"e",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty(We.prototype,"f",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty(We.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(We.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(We.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(We.prototype,"isIdentity",{get:function(){return 1===this.sx&&0===this.shy&&0===this.shx&&1===this.sy&&0===this.tx&&0===this.ty}}),We.prototype.join=function(e){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(N).join(e)},We.prototype.multiply=function(e){var t=e.sx*this.sx+e.shy*this.shx,n=e.sx*this.shy+e.shy*this.sy,r=e.shx*this.sx+e.sy*this.shx,i=e.shx*this.shy+e.sy*this.sy,s=e.tx*this.sx+e.ty*this.shx+this.tx,a=e.tx*this.shy+e.ty*this.sy+this.ty;return new We(t,n,r,i,s,a)},We.prototype.decompose=function(){var e=this.sx,t=this.shy,n=this.shx,r=this.sy,i=this.tx,s=this.ty,a=Math.sqrt(e*e+t*t),o=(e/=a)*n+(t/=a)*r;n-=e*o,r-=t*o;var l=Math.sqrt(n*n+r*r);return o/=l,e*(r/=l)<t*(n/=l)&&(e=-e,t=-t,o=-o,a=-a),{scale:new We(a,0,0,l,0,0),translate:new We(1,0,0,1,i,s),rotate:new We(e,t,-t,e,0,0),skew:new We(1,0,o,1,0,0)}},We.prototype.toString=function(e){return this.join(" ")},We.prototype.inversed=function(){var e=this.sx,t=this.shy,n=this.shx,r=this.sy,i=this.tx,s=this.ty,a=1/(e*r-t*n),o=r*a,l=-t*a,c=-n*a,u=e*a;return new We(o,l,c,u,-o*i-c*s,-l*i-u*s)},We.prototype.applyToPoint=function(e){var t=e.x*this.sx+e.y*this.shx+this.tx,n=e.x*this.shy+e.y*this.sy+this.ty;return new gn(t,n)},We.prototype.applyToRectangle=function(e){var t=this.applyToPoint(e),n=this.applyToPoint(new gn(e.x+e.w,e.y+e.h));return new yn(t.x,t.y,n.x-t.x,n.y-t.y)},We.prototype.clone=function(){var e=this.sx,t=this.shy,n=this.shx,r=this.sy,i=this.tx,s=this.ty;return new We(e,t,n,r,i,s)},p.Matrix=We;var qe=p.matrixMult=function(e,t){return t.multiply(e)},Ge=new We(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=Ge;var Ke=function(e,t){if(!ke[e]){var n=(t instanceof Pe?"Sh":"P")+(Object.keys(Ne).length+1).toString(10);t.id=n,ke[e]=n,Ne[n]=t,Be.publish("addPattern",t)}};p.ShadingPattern=Pe,p.TilingPattern=Re,p.addShadingPattern=function(e,t){return C("addShadingPattern()"),Ke(e,t),this},p.beginTilingPattern=function(e){C("beginTilingPattern()"),wn(e.boundingBox[0],e.boundingBox[1],e.boundingBox[2]-e.boundingBox[0],e.boundingBox[3]-e.boundingBox[1],e.matrix)},p.endTilingPattern=function(e,t){C("endTilingPattern()"),t.stream=Y[U].join("\n"),Ke(e,t),Be.publish("endTilingPattern",t),He.pop().restore()};var Ye,Xe=p.__private__.newObject=function(){var e=Qe();return Je(e,!0),e},Qe=p.__private__.newObjectDeferred=function(){return H++,W[H]=function(){return G},H},Je=function(e,t){return t="boolean"==typeof t&&t,W[e]=G,t&&Z(e+" 0 obj"),e},Ze=p.__private__.newAdditionalObject=function(){var e={objId:Qe(),content:""};return K.push(e),e},$e=Qe(),et=Qe(),tt=p.__private__.decodeColorString=function(e){var t=e.split(" ");if(2!==t.length||"g"!==t[1]&&"G"!==t[1])5!==t.length||"k"!==t[4]&&"K"!==t[4]||(t=[(1-t[0])*(1-t[3]),(1-t[1])*(1-t[3]),(1-t[2])*(1-t[3]),"r"]);else{var n=parseFloat(t[0]);t=[n,n,n,"r"]}for(var r="#",i=0;i<3;i++)r+=("0"+Math.floor(255*parseFloat(t[i])).toString(16)).slice(-2);return r},nt=p.__private__.encodeColorString=function(e){var t;"string"==typeof e&&(e={ch1:e});var n=e.ch1,i=e.ch2,s=e.ch3,a=e.ch4,o="draw"===e.pdfColorType?["G","RG","K"]:["g","rg","k"];if("string"==typeof n&&"#"!==n.charAt(0)){var l=new ce(n);if(l.ok)n=l.toHex();else if(!/^\d*\.?\d*$/.test(n))throw new Error('Invalid color "'+n+'" passed to jsPDF.encodeColorString.')}if("string"==typeof n&&/^#[0-9A-Fa-f]{3}$/.test(n)&&(n="#"+n[1]+n[1]+n[2]+n[2]+n[3]+n[3]),"string"==typeof n&&/^#[0-9A-Fa-f]{6}$/.test(n)){var c=parseInt(n.substr(1),16);n=c>>16&255,i=c>>8&255,s=255&c}if(void 0===i||void 0===a&&n===i&&i===s)if("string"==typeof n)t=n+" "+o[0];else if(2===e.precision)t=T(n/255)+" "+o[0];else t=I(n/255)+" "+o[0];else if(void 0===a||"object"===(0,r.A)(a)){if(a&&!isNaN(a.a)&&0===a.a)return["1.","1.","1.",o[1]].join(" ");if("string"==typeof n)t=[n,i,s,o[1]].join(" ");else if(2===e.precision)t=[T(n/255),T(i/255),T(s/255),o[1]].join(" ");else t=[I(n/255),I(i/255),I(s/255),o[1]].join(" ")}else if("string"==typeof n)t=[n,i,s,a,o[2]].join(" ");else if(2===e.precision)t=[T(n),T(i),T(s),T(a),o[2]].join(" ");else t=[I(n),I(i),I(s),I(a),o[2]].join(" ");return t},rt=p.__private__.getFilters=function(){return o},it=p.__private__.putStream=function(e){var t=(e=e||{}).data||"",n=e.filters||rt(),r=e.alreadyAppliedFilters||[],i=e.addLength1||!1,s=t.length,a=e.objectId,o=function(e){return e};if(null!==d&&void 0===a)throw new Error("ObjectId must be passed to putStream for file encryption");null!==d&&(o=Rt.encryptor(a,0));var l={};!0===n&&(n=["FlateEncode"]);var c=e.additionalKeyValues||[],u=(l=void 0!==De.API.processDataByFilters?De.API.processDataByFilters(t,n):{data:t,reverseChain:[]}).reverseChain+(Array.isArray(r)?r.join(" "):r.toString());if(0!==l.data.length&&(c.push({key:"Length",value:l.data.length}),!0===i&&c.push({key:"Length1",value:s})),0!=u.length)if(u.split("/").length-1==1)c.push({key:"Filter",value:u});else{c.push({key:"Filter",value:"["+u+"]"});for(var h=0;h<c.length;h+=1)if("DecodeParms"===c[h].key){for(var f=[],p=0;p<l.reverseChain.split("/").length-1;p+=1)f.push("null");f.push(c[h].value),c[h].value="["+f.join(" ")+"]"}}Z("<<");for(var m=0;m<c.length;m++)Z("/"+c[m].key+" "+c[m].value);Z(">>"),0!==l.data.length&&(Z("stream"),Z(o(l.data)),Z("endstream"))},st=p.__private__.putPage=function(e){var t=e.number,n=e.data,r=e.objId,i=e.contentsObjId;Je(r,!0),Z("<</Type /Page"),Z("/Parent "+e.rootDictionaryObjId+" 0 R"),Z("/Resources "+e.resourceDictionaryObjId+" 0 R"),Z("/MediaBox ["+parseFloat(N(e.mediaBox.bottomLeftX))+" "+parseFloat(N(e.mediaBox.bottomLeftY))+" "+N(e.mediaBox.topRightX)+" "+N(e.mediaBox.topRightY)+"]"),null!==e.cropBox&&Z("/CropBox ["+N(e.cropBox.bottomLeftX)+" "+N(e.cropBox.bottomLeftY)+" "+N(e.cropBox.topRightX)+" "+N(e.cropBox.topRightY)+"]"),null!==e.bleedBox&&Z("/BleedBox ["+N(e.bleedBox.bottomLeftX)+" "+N(e.bleedBox.bottomLeftY)+" "+N(e.bleedBox.topRightX)+" "+N(e.bleedBox.topRightY)+"]"),null!==e.trimBox&&Z("/TrimBox ["+N(e.trimBox.bottomLeftX)+" "+N(e.trimBox.bottomLeftY)+" "+N(e.trimBox.topRightX)+" "+N(e.trimBox.topRightY)+"]"),null!==e.artBox&&Z("/ArtBox ["+N(e.artBox.bottomLeftX)+" "+N(e.artBox.bottomLeftY)+" "+N(e.artBox.topRightX)+" "+N(e.artBox.topRightY)+"]"),"number"==typeof e.userUnit&&1!==e.userUnit&&Z("/UserUnit "+e.userUnit),Be.publish("putPage",{objId:r,pageContext:je[t],pageNumber:t,page:n}),Z("/Contents "+i+" 0 R"),Z(">>"),Z("endobj");var s=n.join("\n");return x===b&&(s+="\nQ"),Je(i,!0),it({data:s,filters:rt(),objectId:i}),Z("endobj"),r},at=p.__private__.putPages=function(){var e,t,n=[];for(e=1;e<=Fe;e++)je[e].objId=Qe(),je[e].contentsObjId=Qe();for(e=1;e<=Fe;e++)n.push(st({number:e,data:Y[e],objId:je[e].objId,contentsObjId:je[e].contentsObjId,mediaBox:je[e].mediaBox,cropBox:je[e].cropBox,bleedBox:je[e].bleedBox,trimBox:je[e].trimBox,artBox:je[e].artBox,userUnit:je[e].userUnit,rootDictionaryObjId:$e,resourceDictionaryObjId:et}));Je($e,!0),Z("<</Type /Pages");var r="/Kids [";for(t=0;t<Fe;t++)r+=n[t]+" 0 R ";Z(r+"]"),Z("/Count "+Fe),Z(">>"),Z("endobj"),Be.publish("postPutPages")},ot=function(e){Be.publish("putFont",{font:e,out:Z,newObject:Xe,putStream:it}),!0!==e.isAlreadyPutted&&(e.objectNumber=Xe(),Z("<<"),Z("/Type /Font"),Z("/BaseFont /"+_e(e.postScriptName)),Z("/Subtype /Type1"),"string"==typeof e.encoding&&Z("/Encoding /"+e.encoding),Z("/FirstChar 32"),Z("/LastChar 255"),Z(">>"),Z("endobj"))},lt=function(e){e.objectNumber=Xe();var t=[];t.push({key:"Type",value:"/XObject"}),t.push({key:"Subtype",value:"/Form"}),t.push({key:"BBox",value:"["+[N(e.x),N(e.y),N(e.x+e.width),N(e.y+e.height)].join(" ")+"]"}),t.push({key:"Matrix",value:"["+e.matrix.toString()+"]"});var n=e.pages[1].join("\n");it({data:n,additionalKeyValues:t,objectId:e.objectNumber}),Z("endobj")},ct=function(e,t){t||(t=21);var n=Xe(),r=function(e,t){var n,r=[],i=1/(t-1);for(n=0;n<1;n+=i)r.push(n);if(r.push(1),0!=e[0].offset){var s={offset:0,color:e[0].color};e.unshift(s)}if(1!=e[e.length-1].offset){var a={offset:1,color:e[e.length-1].color};e.push(a)}for(var o="",l=0,c=0;c<r.length;c++){for(n=r[c];n>e[l+1].offset;)l++;var u=e[l].offset,d=(n-u)/(e[l+1].offset-u),h=e[l].color,f=e[l+1].color;o+=V(Math.round((1-d)*h[0]+d*f[0]).toString(16))+V(Math.round((1-d)*h[1]+d*f[1]).toString(16))+V(Math.round((1-d)*h[2]+d*f[2]).toString(16))}return o.trim()}(e.colors,t),i=[];i.push({key:"FunctionType",value:"0"}),i.push({key:"Domain",value:"[0.0 1.0]"}),i.push({key:"Size",value:"["+t+"]"}),i.push({key:"BitsPerSample",value:"8"}),i.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),i.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),it({data:r,additionalKeyValues:i,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:n}),Z("endobj"),e.objectNumber=Xe(),Z("<< /ShadingType "+e.type),Z("/ColorSpace /DeviceRGB");var s="/Coords ["+N(parseFloat(e.coords[0]))+" "+N(parseFloat(e.coords[1]))+" ";2===e.type?s+=N(parseFloat(e.coords[2]))+" "+N(parseFloat(e.coords[3])):s+=N(parseFloat(e.coords[2]))+" "+N(parseFloat(e.coords[3]))+" "+N(parseFloat(e.coords[4]))+" "+N(parseFloat(e.coords[5])),Z(s+="]"),e.matrix&&Z("/Matrix ["+e.matrix.toString()+"]"),Z("/Function "+n+" 0 R"),Z("/Extend [true true]"),Z(">>"),Z("endobj")},ut=function(e,t){var n=Qe(),r=Xe();t.push({resourcesOid:n,objectOid:r}),e.objectNumber=r;var i=[];i.push({key:"Type",value:"/Pattern"}),i.push({key:"PatternType",value:"1"}),i.push({key:"PaintType",value:"1"}),i.push({key:"TilingType",value:"1"}),i.push({key:"BBox",value:"["+e.boundingBox.map(N).join(" ")+"]"}),i.push({key:"XStep",value:N(e.xStep)}),i.push({key:"YStep",value:N(e.yStep)}),i.push({key:"Resources",value:n+" 0 R"}),e.matrix&&i.push({key:"Matrix",value:"["+e.matrix.toString()+"]"}),it({data:e.stream,additionalKeyValues:i,objectId:e.objectNumber}),Z("endobj")},dt=function(e){for(var t in e.objectNumber=Xe(),Z("<<"),e)switch(t){case"opacity":Z("/ca "+T(e[t]));break;case"stroke-opacity":Z("/CA "+T(e[t]))}Z(">>"),Z("endobj")},ht=function(e){Je(e.resourcesOid,!0),Z("<<"),Z("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var e in Z("/Font <<"),Se)Se.hasOwnProperty(e)&&(!1===h||!0===h&&f.hasOwnProperty(e))&&Z("/"+e+" "+Se[e].objectNumber+" 0 R");Z(">>")}(),function(){if(Object.keys(Ne).length>0){for(var e in Z("/Shading <<"),Ne)Ne.hasOwnProperty(e)&&Ne[e]instanceof Pe&&Ne[e].objectNumber>=0&&Z("/"+e+" "+Ne[e].objectNumber+" 0 R");Be.publish("putShadingPatternDict"),Z(">>")}}(),function(e){if(Object.keys(Ne).length>0){for(var t in Z("/Pattern <<"),Ne)Ne.hasOwnProperty(t)&&Ne[t]instanceof p.TilingPattern&&Ne[t].objectNumber>=0&&Ne[t].objectNumber<e&&Z("/"+t+" "+Ne[t].objectNumber+" 0 R");Be.publish("putTilingPatternDict"),Z(">>")}}(e.objectOid),function(){if(Object.keys(Oe).length>0){var e;for(e in Z("/ExtGState <<"),Oe)Oe.hasOwnProperty(e)&&Oe[e].objectNumber>=0&&Z("/"+e+" "+Oe[e].objectNumber+" 0 R");Be.publish("putGStateDict"),Z(">>")}}(),function(){for(var e in Z("/XObject <<"),ze)ze.hasOwnProperty(e)&&ze[e].objectNumber>=0&&Z("/"+e+" "+ze[e].objectNumber+" 0 R");Be.publish("putXobjectDict"),Z(">>")}(),Z(">>"),Z("endobj")},ft=function(){var e=[];(function(){for(var e in Se)Se.hasOwnProperty(e)&&(!1===h||!0===h&&f.hasOwnProperty(e))&&ot(Se[e])})(),function(){var e;for(e in Oe)Oe.hasOwnProperty(e)&&dt(Oe[e])}(),function(){for(var e in ze)ze.hasOwnProperty(e)&&lt(ze[e])}(),function(e){var t;for(t in Ne)Ne.hasOwnProperty(t)&&(Ne[t]instanceof Pe?ct(Ne[t]):Ne[t]instanceof Re&&ut(Ne[t],e))}(e),Be.publish("putResources"),e.forEach(ht),ht({resourcesOid:et,objectOid:Number.MAX_SAFE_INTEGER}),Be.publish("postPutResources")},pt=function(e){Ae[e.fontName]=Ae[e.fontName]||{},Ae[e.fontName][e.fontStyle]=e.id},mt=function(e,t,n,r,i){var s={id:"F"+(Object.keys(Se).length+1).toString(10),postScriptName:e,fontName:t,fontStyle:n,encoding:r,isStandardFont:i||!1,metadata:{}};return Be.publish("addFont",{font:s,instance:this}),Se[s.id]=s,pt(s),s.id},gt=p.__private__.pdfEscape=p.pdfEscape=function(e,t){return function(e,t){var n,r,i,s,a,o,l,c,u;if(i=(t=t||{}).sourceEncoding||"Unicode",a=t.outputEncoding,(t.autoencode||a)&&Se[ye].metadata&&Se[ye].metadata[i]&&Se[ye].metadata[i].encoding&&(s=Se[ye].metadata[i].encoding,!a&&Se[ye].encoding&&(a=Se[ye].encoding),!a&&s.codePages&&(a=s.codePages[0]),"string"==typeof a&&(a=s[a]),a)){for(l=!1,o=[],n=0,r=e.length;n<r;n++)(c=a[e.charCodeAt(n)])?o.push(String.fromCharCode(c)):o.push(e[n]),o[n].charCodeAt(0)>>8&&(l=!0);e=o.join("")}for(n=e.length;void 0===l&&0!==n;)e.charCodeAt(n-1)>>8&&(l=!0),n--;if(!l)return e;for(o=t.noBOM?[]:[254,255],n=0,r=e.length;n<r;n++){if((u=(c=e.charCodeAt(n))>>8)>>8)throw new Error("Character at position "+n+" of string '"+e+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");o.push(u),o.push(c-(u<<8))}return String.fromCharCode.apply(void 0,o)}(e,t).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},yt=p.__private__.beginPage=function(e){Y[++Fe]=[],je[Fe]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(e[0]),topRightY:Number(e[1])}},bt(Fe),J(Y[U])},vt=function(e,t){var r,i,a;switch(n=t||n,"string"==typeof e&&(r=v(e.toLowerCase()),Array.isArray(r)&&(i=r[0],a=r[1])),Array.isArray(e)&&(i=e[0]*ve,a=e[1]*ve),isNaN(i)&&(i=s[0],a=s[1]),(i>14400||a>14400)&&(ne.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),i=Math.min(14400,i),a=Math.min(14400,a)),s=[i,a],n.substr(0,1)){case"l":a>i&&(s=[a,i]);break;case"p":i>a&&(s=[a,i])}yt(s),Zt(Qt),Z(on),0!==fn&&Z(fn+" J"),0!==pn&&Z(pn+" j"),Be.publish("addPage",{pageNumber:Fe})},wt=function(e){e>0&&e<=Fe&&(Y.splice(e,1),je.splice(e,1),Fe--,U>Fe&&(U=Fe),this.setPage(U))},bt=function(e){e>0&&e<=Fe&&(U=e)},xt=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return Y.length-1},St=function(e,t,n){var r,i=void 0;return n=n||{},e=void 0!==e?e:Se[ye].fontName,t=void 0!==t?t:Se[ye].fontStyle,r=e.toLowerCase(),void 0!==Ae[r]&&void 0!==Ae[r][t]?i=Ae[r][t]:void 0!==Ae[e]&&void 0!==Ae[e][t]?i=Ae[e][t]:!1===n.disableWarning&&ne.warn("Unable to look up font label for font '"+e+"', '"+t+"'. Refer to getFontList() for available fonts."),i||n.noFallback||null==(i=Ae.times[t])&&(i=Ae.times.normal),i},At=p.__private__.putInfo=function(){var e=Xe(),t=function(e){return e};for(var n in null!==d&&(t=Rt.encryptor(e,0)),Z("<<"),Z("/Producer ("+gt(t("jsPDF "+De.version))+")"),ge)ge.hasOwnProperty(n)&&ge[n]&&Z("/"+n.substr(0,1).toUpperCase()+n.substr(1)+" ("+gt(t(ge[n]))+")");Z("/CreationDate ("+gt(t(R))+")"),Z(">>"),Z("endobj")},Et=p.__private__.putCatalog=function(e){var t=(e=e||{}).rootDictionaryObjId||$e;switch(Xe(),Z("<<"),Z("/Type /Catalog"),Z("/Pages "+t+" 0 R"),se||(se="fullwidth"),se){case"fullwidth":Z("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Z("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Z("/OpenAction [3 0 R /Fit]");break;case"original":Z("/OpenAction [3 0 R /XYZ null null 1]");break;default:var n=""+se;"%"===n.substr(n.length-1)&&(se=parseInt(se)/100),"number"==typeof se&&Z("/OpenAction [3 0 R /XYZ null null "+T(se)+"]")}switch(fe||(fe="continuous"),fe){case"continuous":Z("/PageLayout /OneColumn");break;case"single":Z("/PageLayout /SinglePage");break;case"two":case"twoleft":Z("/PageLayout /TwoColumnLeft");break;case"tworight":Z("/PageLayout /TwoColumnRight")}de&&Z("/PageMode /"+de),Be.publish("putCatalog"),Z(">>"),Z("endobj")},Nt=p.__private__.putTrailer=function(){Z("trailer"),Z("<<"),Z("/Size "+(H+1)),Z("/Root "+H+" 0 R"),Z("/Info "+(H-1)+" 0 R"),null!==d&&Z("/Encrypt "+Rt.oid+" 0 R"),Z("/ID [ <"+D+"> <"+D+"> ]"),Z(">>")},Ct=p.__private__.putHeader=function(){Z("%PDF-"+m),Z("%\xba\xdf\xac\xe0")},_t=p.__private__.putXRef=function(){var e="0000000000";Z("xref"),Z("0 "+(H+1)),Z("0000000000 65535 f ");for(var t=1;t<=H;t++)"function"==typeof W[t]?Z((e+W[t]()).slice(-10)+" 00000 n "):void 0!==W[t]?Z((e+W[t]).slice(-10)+" 00000 n "):Z("0000000000 00000 n ")},Tt=p.__private__.buildDocument=function(){H=0,G=0,q=[],W=[],K=[],$e=Qe(),et=Qe(),J(q),Be.publish("buildDocument"),Ct(),at(),function(){Be.publish("putAdditionalObjects");for(var e=0;e<K.length;e++){var t=K[e];Je(t.objId,!0),Z(t.content),Z("endobj")}Be.publish("postPutAdditionalObjects")}(),ft(),null!==d&&(Rt.oid=Xe(),Z("<<"),Z("/Filter /Standard"),Z("/V "+Rt.v),Z("/R "+Rt.r),Z("/U <"+Rt.toHexString(Rt.U)+">"),Z("/O <"+Rt.toHexString(Rt.O)+">"),Z("/P "+Rt.P),Z(">>"),Z("endobj")),At(),Et();var e=G;return _t(),Nt(),Z("startxref"),Z(""+e),Z("%%EOF"),J(Y[U]),q.join("\n")},It=p.__private__.getBlob=function(e){return new Blob([te(e)],{type:"application/pdf"})},kt=p.output=p.__private__.output=(Ye=function(e,t){switch("string"==typeof(t=t||{})?t={filename:t}:t.filename=t.filename||"generated.pdf",e){case void 0:return Tt();case"save":p.save(t.filename);break;case"arraybuffer":return te(Tt());case"blob":return It(Tt());case"bloburi":case"bloburl":if(void 0!==ee.URL&&"function"==typeof ee.URL.createObjectURL)return ee.URL&&ee.URL.createObjectURL(It(Tt()))||void 0;ne.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var n="",r=Tt();try{n=oe(r)}catch(e){n=oe(unescape(encodeURIComponent(r)))}return"data:application/pdf;filename="+t.filename+";base64,"+n;case"pdfobjectnewwindow":if("[object Window]"===Object.prototype.toString.call(ee)){var i="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",s=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';t.pdfObjectUrl&&(i=t.pdfObjectUrl,s="");var a='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+i+'"'+s+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(t)+");<\/script></body></html>",o=ee.open();return null!==o&&o.document.write(a),o}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if("[object Window]"===Object.prototype.toString.call(ee)){var l='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(t.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+t.filename+'" width="500px" height="400px" /></body></html>',c=ee.open();if(null!==c){c.document.write(l);var u=this;c.document.documentElement.querySelector("#pdfViewer").onload=function(){c.document.title=t.filename,c.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(u.output("bloburl"))}}return c}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if("[object Window]"!==Object.prototype.toString.call(ee))throw new Error("The option dataurlnewwindow just works in a browser-environment.");var d='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",t)+'"></iframe></body></html>',h=ee.open();if(null!==h&&(h.document.write(d),h.document.title=t.filename),h||"undefined"==typeof safari)return h;break;case"datauri":case"dataurl":return ee.document.location.href=this.output("datauristring",t);default:return null}},Ye.foo=function(){try{return Ye.apply(this,arguments)}catch(Ye){var e=Ye.stack||"";~e.indexOf(" at ")&&(e=e.split(" at ")[1]);var t="Error in function "+e.split("\n")[0].split("<")[0]+": "+Ye.message;if(!ee.console)throw new Error(t);ee.console.error(t,Ye),ee.alert&&alert(t)}},Ye.foo.bar=Ye,Ye.foo),Pt=function(e){return!0===Array.isArray(Ue)&&Ue.indexOf(e)>-1};switch(i){case"pt":ve=1;break;case"mm":ve=72/25.4;break;case"cm":ve=72/2.54;break;case"in":ve=72;break;case"px":ve=1==Pt("px_scaling")?.75:96/72;break;case"pc":case"em":ve=12;break;case"ex":ve=6;break;default:if("number"!=typeof i)throw new Error("Invalid unit: "+i);ve=i}var Rt=null;j(),L();var Dt=p.__private__.getPageInfo=p.getPageInfo=function(e){if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:je[e].objId,pageNumber:e,pageContext:je[e]}},Ot=p.__private__.getPageInfoByObjId=function(e){if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var t in je)if(je[t].objId===e)break;return Dt(t)},Lt=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:je[U].objId,pageNumber:U,pageContext:je[U]}};p.addPage=function(){return vt.apply(this,arguments),this},p.setPage=function(){return bt.apply(this,arguments),J.call(this,Y[U]),this},p.insertPage=function(e){return this.addPage(),this.movePage(U,e),this},p.movePage=function(e,t){var n,r;if(e>t){n=Y[e],r=je[e];for(var i=e;i>t;i--)Y[i]=Y[i-1],je[i]=je[i-1];Y[t]=n,je[t]=r,this.setPage(t)}else if(e<t){n=Y[e],r=je[e];for(var s=e;s<t;s++)Y[s]=Y[s+1],je[s]=je[s+1];Y[t]=n,je[t]=r,this.setPage(t)}return this},p.deletePage=function(){return wt.apply(this,arguments),this},p.__private__.text=p.text=function(e,t,n,i,s){var a,o,l,c,u,d,h,p,m,g=(i=i||{}).scope||this;if("number"==typeof e&&"number"==typeof t&&("string"==typeof n||Array.isArray(n))){var y=n;n=t,t=e,e=y}if(arguments[3]instanceof We==0?(l=arguments[4],c=arguments[5],"object"===(0,r.A)(h=arguments[3])&&null!==h||("string"==typeof l&&(c=l,l=null),"string"==typeof h&&(c=h,h=null),"number"==typeof h&&(l=h,h=null),i={flags:h,angle:l,align:c})):(C("The transform parameter of text() with a Matrix value"),m=s),isNaN(t)||isNaN(n)||null==e)throw new Error("Invalid arguments passed to jsPDF.text");if(0===e.length)return g;var v,w="",S="number"==typeof i.lineHeightFactor?i.lineHeightFactor:Xt,A=g.internal.scaleFactor;function E(e){return e=e.split("\t").join(Array(i.TabLen||9).join(" ")),gt(e,h)}function _(e){for(var t,n=e.concat(),r=[],i=n.length;i--;)"string"==typeof(t=n.shift())?r.push(t):Array.isArray(e)&&(1===t.length||void 0===t[1]&&void 0===t[2])?r.push(t[0]):r.push([t[0],t[1],t[2]]);return r}function T(e,t){var n;if("string"==typeof e)n=t(e)[0];else if(Array.isArray(e)){for(var r,i,s=e.concat(),a=[],o=s.length;o--;)"string"==typeof(r=s.shift())?a.push(t(r)[0]):Array.isArray(r)&&"string"==typeof r[0]&&(i=t(r[0],r[1],r[2]),a.push([i[0],i[1],i[2]]));n=a}return n}var I=!1,P=!0;if("string"==typeof e)I=!0;else if(Array.isArray(e)){var R=e.concat();o=[];for(var D,O=R.length;O--;)("string"!=typeof(D=R.shift())||Array.isArray(D)&&"string"!=typeof D[0])&&(P=!1);I=P}if(!1===I)throw new Error('Type of text must be string or Array. "'+e+'" is not recognized.');"string"==typeof e&&(e=e.match(/[\r?\n]/)?e.split(/\r\n|\r|\n/g):[e]);var L=ie/g.internal.scaleFactor,M=L*(S-1);switch(i.baseline){case"bottom":n-=M;break;case"top":n+=L-M;break;case"hanging":n+=L-2*M;break;case"middle":n+=L/2-M}if((d=i.maxWidth||0)>0&&("string"==typeof e?e=g.splitTextToSize(e,d):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce(function(e,t){return e.concat(g.splitTextToSize(t,d))},[]))),a={text:e,x:t,y:n,options:i,mutex:{pdfEscape:gt,activeFontKey:ye,fonts:Se,activeFontSize:ie}},Be.publish("preProcessText",a),e=a.text,l=(i=a.options).angle,m instanceof We==0&&l&&"number"==typeof l){l*=Math.PI/180,0===i.rotationDirection&&(l=-l),x===b&&(l=-l);var F=Math.cos(l),j=Math.sin(l);m=new We(F,j,-j,F,0,0)}else l&&l instanceof We&&(m=l);x!==b||m||(m=Ge),void 0!==(u=i.charSpace||dn)&&(w+=N(k(u))+" Tc\n",this.setCharSpace(this.getCharSpace()||0)),void 0!==(p=i.horizontalScale)&&(w+=N(100*p)+" Tz\n"),i.lang;var B=-1,U=void 0!==i.renderingMode?i.renderingMode:i.stroke,z=g.internal.getCurrentPageInfo().pageContext;switch(U){case 0:case!1:case"fill":B=0;break;case 1:case!0:case"stroke":B=1;break;case 2:case"fillThenStroke":B=2;break;case 3:case"invisible":B=3;break;case 4:case"fillAndAddForClipping":B=4;break;case 5:case"strokeAndAddPathForClipping":B=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":B=6;break;case 7:case"addToPathForClipping":B=7}var V=void 0!==z.usedRenderingMode?z.usedRenderingMode:-1;-1!==B?w+=B+" Tr\n":-1!==V&&(w+="0 Tr\n"),-1!==B&&(z.usedRenderingMode=B),c=i.align||"left";var H,W=ie*S,q=g.internal.pageSize.getWidth(),G=Se[ye];u=i.charSpace||dn,d=i.maxWidth||0,h=Object.assign({autoencode:!0,noBOM:!0},i.flags);var K=[],Y=function(e){return g.getStringUnitWidth(e,{font:G,charSpace:u,fontSize:ie,doKerning:!1})*ie/A};if("[object Array]"===Object.prototype.toString.call(e)){var X;o=_(e),"left"!==c&&(H=o.map(Y));var Q,J=0;if("right"===c){t-=H[0],e=[],O=o.length;for(var $=0;$<O;$++)0===$?(Q=nn(t),X=rn(n)):(Q=k(J-H[$]),X=-W),e.push([o[$],Q,X]),J=H[$]}else if("center"===c){t-=H[0]/2,e=[],O=o.length;for(var ee=0;ee<O;ee++)0===ee?(Q=nn(t),X=rn(n)):(Q=k((J-H[ee])/2),X=-W),e.push([o[ee],Q,X]),J=H[ee]}else if("left"===c){e=[],O=o.length;for(var te=0;te<O;te++)e.push(o[te])}else if("justify"===c&&"Identity-H"===G.encoding){e=[],O=o.length,d=0!==d?d:q;for(var ne=0,re=0;re<O;re++)if(X=0===re?rn(n):-W,Q=0===re?nn(t):ne,re<O-1){var se=k((d-H[re])/(o[re].split(" ").length-1)),ae=o[re].split(" ");e.push([ae[0]+" ",Q,X]),ne=0;for(var oe=1;oe<ae.length;oe++){var le=(Y(ae[oe-1]+" "+ae[oe])-Y(ae[oe]))*A+se;oe==ae.length-1?e.push([ae[oe],le,0]):e.push([ae[oe]+" ",le,0]),ne-=le}}else e.push([o[re],Q,X]);e.push(["",ne,0])}else{if("justify"!==c)throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(e=[],O=o.length,d=0!==d?d:q,re=0;re<O;re++)X=0===re?rn(n):-W,Q=0===re?nn(t):0,re<O-1?K.push(N(k((d-H[re])/(o[re].split(" ").length-1)))):K.push(0),e.push([o[re],Q,X])}}!0===("boolean"==typeof i.R2L?i.R2L:ue)&&(e=T(e,function(e,t,n){return[e.split("").reverse().join(""),t,n]})),a={text:e,x:t,y:n,options:i,mutex:{pdfEscape:gt,activeFontKey:ye,fonts:Se,activeFontSize:ie}},Be.publish("postProcessText",a),e=a.text,v=a.mutex.isHex||!1;var ce=Se[ye].encoding;"WinAnsiEncoding"!==ce&&"StandardEncoding"!==ce||(e=T(e,function(e,t,n){return[E(e),t,n]})),o=_(e),e=[];for(var de,he,fe,pe=Array.isArray(o[0])?1:0,me="",ge=function(e,t,n){var r="";return n instanceof We?(n="number"==typeof i.angle?qe(n,new We(1,0,0,1,e,t)):qe(new We(1,0,0,1,e,t),n),x===b&&(n=qe(new We(1,0,0,-1,0,0),n)),r=n.join(" ")+" Tm\n"):r=N(e)+" "+N(t)+" Td\n",r},ve=0;ve<o.length;ve++){switch(me="",pe){case 1:fe=(v?"<":"(")+o[ve][0]+(v?">":")"),de=parseFloat(o[ve][1]),he=parseFloat(o[ve][2]);break;case 0:fe=(v?"<":"(")+o[ve]+(v?">":")"),de=nn(t),he=rn(n)}void 0!==K&&void 0!==K[ve]&&(me=K[ve]+" Tw\n"),0===ve?e.push(me+ge(de,he,m)+fe):0===pe?e.push(me+fe):1===pe&&e.push(me+ge(de,he,m)+fe)}e=0===pe?e.join(" Tj\nT* "):e.join(" Tj\n"),e+=" Tj\n";var we="BT\n/";return we+=ye+" "+ie+" Tf\n",we+=N(ie*S)+" TL\n",we+=cn+"\n",we+=w,we+=e,Z(we+="ET"),f[ye]=!0,g};var Mt=p.__private__.clip=p.clip=function(e){return Z("evenodd"===e?"W*":"W"),this};p.clipEvenOdd=function(){return Mt("evenodd")},p.__private__.discardPath=p.discardPath=function(){return Z("n"),this};var Ft=p.__private__.isValidStyle=function(e){var t=!1;return-1!==[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(e)&&(t=!0),t};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(e){return Ft(e)&&(u=e),this};var jt=p.__private__.getStyle=p.getStyle=function(e){var t=u;switch(e){case"D":case"S":t="S";break;case"F":t="f";break;case"FD":case"DF":t="B";break;case"f":case"f*":case"B":case"B*":t=e}return t},Bt=p.close=function(){return Z("h"),this};p.stroke=function(){return Z("S"),this},p.fill=function(e){return Ut("f",e),this},p.fillEvenOdd=function(e){return Ut("f*",e),this},p.fillStroke=function(e){return Ut("B",e),this},p.fillStrokeEvenOdd=function(e){return Ut("B*",e),this};var Ut=function(e,t){"object"===(0,r.A)(t)?Ht(t,e):Z(e)},zt=function(e){null===e||x===b&&void 0===e||(e=jt(e),Z(e))};function Vt(e,t,n,r,i){var s=new Re(t||this.boundingBox,n||this.xStep,r||this.yStep,this.gState,i||this.matrix);s.stream=this.stream;var a=e+"$$"+this.cloneIndex+++"$$";return Ke(a,s),s}var Ht=function(e,t){var n=ke[e.key],r=Ne[n];if(r instanceof Pe)Z("q"),Z(Wt(t)),r.gState&&p.setGState(r.gState),Z(e.matrix.toString()+" cm"),Z("/"+n+" sh"),Z("Q");else if(r instanceof Re){var i=new We(1,0,0,-1,0,An());e.matrix&&(i=i.multiply(e.matrix||Ge),n=Vt.call(r,e.key,e.boundingBox,e.xStep,e.yStep,i).id),Z("q"),Z("/Pattern cs"),Z("/"+n+" scn"),r.gState&&p.setGState(r.gState),Z(t),Z("Q")}},Wt=function(e){switch(e){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},qt=p.moveTo=function(e,t){return Z(N(k(e))+" "+N(P(t))+" m"),this},Gt=p.lineTo=function(e,t){return Z(N(k(e))+" "+N(P(t))+" l"),this},Kt=p.curveTo=function(e,t,n,r,i,s){return Z([N(k(e)),N(P(t)),N(k(n)),N(P(r)),N(k(i)),N(P(s)),"c"].join(" ")),this};p.__private__.line=p.line=function(e,t,n,r,i){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||!Ft(i))throw new Error("Invalid arguments passed to jsPDF.line");return x===w?this.lines([[n-e,r-t]],e,t,[1,1],i||"S"):this.lines([[n-e,r-t]],e,t,[1,1]).stroke()},p.__private__.lines=p.lines=function(e,t,n,r,i,s){var a,o,l,c,u,d,h,f,p,m,g,y;if("number"==typeof e&&(y=n,n=t,t=e,e=y),r=r||[1,1],s=s||!1,isNaN(t)||isNaN(n)||!Array.isArray(e)||!Array.isArray(r)||!Ft(i)||"boolean"!=typeof s)throw new Error("Invalid arguments passed to jsPDF.lines");for(qt(t,n),a=r[0],o=r[1],c=e.length,m=t,g=n,l=0;l<c;l++)2===(u=e[l]).length?(m=u[0]*a+m,g=u[1]*o+g,Gt(m,g)):(d=u[0]*a+m,h=u[1]*o+g,f=u[2]*a+m,p=u[3]*o+g,m=u[4]*a+m,g=u[5]*o+g,Kt(d,h,f,p,m,g));return s&&Bt(),zt(i),this},p.path=function(e){for(var t=0;t<e.length;t++){var n=e[t],r=n.c;switch(n.op){case"m":qt(r[0],r[1]);break;case"l":Gt(r[0],r[1]);break;case"c":Kt.apply(this,r);break;case"h":Bt()}}return this},p.__private__.rect=p.rect=function(e,t,n,r,i){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||!Ft(i))throw new Error("Invalid arguments passed to jsPDF.rect");return x===w&&(r=-r),Z([N(k(e)),N(P(t)),N(k(n)),N(k(r)),"re"].join(" ")),zt(i),this},p.__private__.triangle=p.triangle=function(e,t,n,r,i,s,a){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(i)||isNaN(s)||!Ft(a))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[n-e,r-t],[i-n,s-r],[e-i,t-s]],e,t,[1,1],a,!0),this},p.__private__.roundedRect=p.roundedRect=function(e,t,n,r,i,s,a){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(i)||isNaN(s)||!Ft(a))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var o=4/3*(Math.SQRT2-1);return i=Math.min(i,.5*n),s=Math.min(s,.5*r),this.lines([[n-2*i,0],[i*o,0,i,s-s*o,i,s],[0,r-2*s],[0,s*o,-i*o,s,-i,s],[2*i-n,0],[-i*o,0,-i,-s*o,-i,-s],[0,2*s-r],[0,-s*o,i*o,-s,i,-s]],e+i,t,[1,1],a,!0),this},p.__private__.ellipse=p.ellipse=function(e,t,n,r,i){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||!Ft(i))throw new Error("Invalid arguments passed to jsPDF.ellipse");var s=4/3*(Math.SQRT2-1)*n,a=4/3*(Math.SQRT2-1)*r;return qt(e+n,t),Kt(e+n,t-a,e+s,t-r,e,t-r),Kt(e-s,t-r,e-n,t-a,e-n,t),Kt(e-n,t+a,e-s,t+r,e,t+r),Kt(e+s,t+r,e+n,t+a,e+n,t),zt(i),this},p.__private__.circle=p.circle=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||!Ft(r))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(e,t,n,n,r)},p.setFont=function(e,t,n){return n&&(t=E(t,n)),ye=St(e,t,{disableWarning:!1}),this};var Yt=p.__private__.getFont=p.getFont=function(){return Se[St.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var e,t,n={};for(e in Ae)if(Ae.hasOwnProperty(e))for(t in n[e]=[],Ae[e])Ae[e].hasOwnProperty(t)&&n[e].push(t);return n},p.addFont=function(e,t,n,r,i){var s=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&-1!==s.indexOf(arguments[3])?i=arguments[3]:arguments[3]&&-1==s.indexOf(arguments[3])&&(n=E(n,r)),mt.call(this,e,t,n,i=i||"Identity-H")};var Xt,Qt=e.lineWidth||.200025,Jt=p.__private__.getLineWidth=p.getLineWidth=function(){return Qt},Zt=p.__private__.setLineWidth=p.setLineWidth=function(e){return Qt=e,Z(N(k(e))+" w"),this};p.__private__.setLineDash=De.API.setLineDash=De.API.setLineDashPattern=function(e,t){if(e=e||[],t=t||0,isNaN(t)||!Array.isArray(e))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return e=e.map(function(e){return N(k(e))}).join(" "),t=N(k(t)),Z("["+e+"] "+t+" d"),this};var $t=p.__private__.getLineHeight=p.getLineHeight=function(){return ie*Xt};p.__private__.getLineHeight=p.getLineHeight=function(){return ie*Xt};var en=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(e){return"number"==typeof(e=e||1.15)&&(Xt=e),this},tn=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return Xt};en(e.lineHeight);var nn=p.__private__.getHorizontalCoordinate=function(e){return k(e)},rn=p.__private__.getVerticalCoordinate=function(e){return x===b?e:je[U].mediaBox.topRightY-je[U].mediaBox.bottomLeftY-k(e)},sn=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(e){return N(nn(e))},an=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(e){return N(rn(e))},on=e.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return tt(on)},p.__private__.setStrokeColor=p.setDrawColor=function(e,t,n,r){return on=nt({ch1:e,ch2:t,ch3:n,ch4:r,pdfColorType:"draw",precision:2}),Z(on),this};var ln=e.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return tt(ln)},p.__private__.setFillColor=p.setFillColor=function(e,t,n,r){return ln=nt({ch1:e,ch2:t,ch3:n,ch4:r,pdfColorType:"fill",precision:2}),Z(ln),this};var cn=e.textColor||"0 g",un=p.__private__.getTextColor=p.getTextColor=function(){return tt(cn)};p.__private__.setTextColor=p.setTextColor=function(e,t,n,r){return cn=nt({ch1:e,ch2:t,ch3:n,ch4:r,pdfColorType:"text",precision:3}),this};var dn=e.charSpace,hn=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(dn||0)};p.__private__.setCharSpace=p.setCharSpace=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return dn=e,this};var fn=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(e){var t=p.CapJoinStyles[e];if(void 0===t)throw new Error("Line cap style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return fn=t,Z(t+" J"),this};var pn=0;p.__private__.setLineJoin=p.setLineJoin=function(e){var t=p.CapJoinStyles[e];if(void 0===t)throw new Error("Line join style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return pn=t,Z(t+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(e){if(e=e||0,isNaN(e))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Z(N(k(e))+" M"),this},p.GState=Ie,p.setGState=function(e){(e="string"==typeof e?Oe[Le[e]]:mn(null,e)).equals(Me)||(Z("/"+e.id+" gs"),Me=e)};var mn=function(e,t){if(!e||!Le[e]){var n=!1;for(var r in Oe)if(Oe.hasOwnProperty(r)&&Oe[r].equals(t)){n=!0;break}if(n)t=Oe[r];else{var i="GS"+(Object.keys(Oe).length+1).toString(10);Oe[i]=t,t.id=i}return e&&(Le[e]=t.id),Be.publish("addGState",t),t}};p.addGState=function(e,t){return mn(e,t),this},p.saveGraphicsState=function(){return Z("q"),Ee.push({key:ye,size:ie,color:cn}),this},p.restoreGraphicsState=function(){Z("Q");var e=Ee.pop();return ye=e.key,ie=e.size,cn=e.color,Me=null,this},p.setCurrentTransformationMatrix=function(e){return Z(e.toString()+" cm"),this},p.comment=function(e){return Z("#"+e),this};var gn=function(e,t){var n=e||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return n},set:function(e){isNaN(e)||(n=parseFloat(e))}});var r=t||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return r},set:function(e){isNaN(e)||(r=parseFloat(e))}});var i="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return i},set:function(e){i=e.toString()}}),this},yn=function(e,t,n,r){gn.call(this,e,t),this.type="rect";var i=n||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return i},set:function(e){isNaN(e)||(i=parseFloat(e))}});var s=r||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return s},set:function(e){isNaN(e)||(s=parseFloat(e))}}),this},vn=function(){this.page=Fe,this.currentPage=U,this.pages=Y.slice(0),this.pagesContext=je.slice(0),this.x=we,this.y=be,this.matrix=xe,this.width=xn(U),this.height=An(U),this.outputDestination=Q,this.id="",this.objectNumber=-1};vn.prototype.restore=function(){Fe=this.page,U=this.currentPage,je=this.pagesContext,Y=this.pages,we=this.x,be=this.y,xe=this.matrix,Sn(U,this.width),En(U,this.height),Q=this.outputDestination};var wn=function(e,t,n,r,i){He.push(new vn),Fe=U=0,Y=[],we=e,be=t,xe=i,yt([n,r])};for(var bn in p.beginFormObject=function(e,t,n,r,i){return wn(e,t,n,r,i),this},p.endFormObject=function(e){return function(e){if(Ve[e])He.pop().restore();else{var t=new vn,n="Xo"+(Object.keys(ze).length+1).toString(10);t.id=n,Ve[e]=n,ze[n]=t,Be.publish("addFormObject",t),He.pop().restore()}}(e),this},p.doFormObject=function(e,t){var n=ze[Ve[e]];return Z("q"),Z(t.toString()+" cm"),Z("/"+n.id+" Do"),Z("Q"),this},p.getFormObject=function(e){var t=ze[Ve[e]];return{x:t.x,y:t.y,width:t.width,height:t.height,matrix:t.matrix}},p.save=function(e,t){return e=e||"generated.pdf",(t=t||{}).returnPromise=t.returnPromise||!1,!1===t.returnPromise?(le(It(Tt()),e),"function"==typeof le.unload&&ee.setTimeout&&setTimeout(le.unload,911),this):new Promise(function(t,n){try{var r=le(It(Tt()),e);"function"==typeof le.unload&&ee.setTimeout&&setTimeout(le.unload,911),t(r)}catch(e){n(e.message)}})},De.API)De.API.hasOwnProperty(bn)&&("events"===bn&&De.API.events.length?function(e,t){var n,r,i;for(i=t.length-1;-1!==i;i--)n=t[i][0],r=t[i][1],e.subscribe.apply(e,[n].concat("function"==typeof r?[r]:r))}(Be,De.API.events):p[bn]=De.API[bn]);var xn=p.getPageWidth=function(e){return(je[e=e||U].mediaBox.topRightX-je[e].mediaBox.bottomLeftX)/ve},Sn=p.setPageWidth=function(e,t){je[e].mediaBox.topRightX=t*ve+je[e].mediaBox.bottomLeftX},An=p.getPageHeight=function(e){return(je[e=e||U].mediaBox.topRightY-je[e].mediaBox.bottomLeftY)/ve},En=p.setPageHeight=function(e,t){je[e].mediaBox.topRightY=t*ve+je[e].mediaBox.bottomLeftY};return p.internal={pdfEscape:gt,getStyle:jt,getFont:Yt,getFontSize:ae,getCharSpace:hn,getTextColor:un,getLineHeight:$t,getLineHeightFactor:tn,getLineWidth:Jt,write:$,getHorizontalCoordinate:nn,getVerticalCoordinate:rn,getCoordinateString:sn,getVerticalCoordinateString:an,collections:{},newObject:Xe,newAdditionalObject:Ze,newObjectDeferred:Qe,newObjectDeferredBegin:Je,getFilters:rt,putStream:it,events:Be,scaleFactor:ve,pageSize:{getWidth:function(){return xn(U)},setWidth:function(e){Sn(U,e)},getHeight:function(){return An(U)},setHeight:function(e){En(U,e)}},encryptionOptions:d,encryption:Rt,getEncryptor:function(e){return null!==d?Rt.encryptor(e,0):function(e){return e}},output:kt,getNumberOfPages:xt,pages:Y,out:Z,f2:T,f3:I,getPageInfo:Dt,getPageInfoByObjId:Ot,getCurrentPageInfo:Lt,getPDFVersion:g,Point:gn,Rectangle:yn,Matrix:We,hasHotfix:Pt},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return xn(U)},set:function(e){Sn(U,e)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return An(U)},set:function(e){En(U,e)},enumerable:!0,configurable:!0}),function(e){for(var t=0,n=re.length;t<n;t++){var r=mt.call(this,e[t][0],e[t][1],e[t][2],re[t][3],!0);!1===h&&(f[r]=!0);var i=e[t][0].split("-");pt({id:r,fontName:i[0],fontStyle:i[1]||""})}Be.publish("addFonts",{fonts:Se,dictionary:Ae})}.call(p,re),ye="F1",vt(s,n),Be.publish("initialized"),p}Ce.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},Ce.prototype.toHexString=function(e){return e.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Ce.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},Ce.prototype.processOwnerPassword=function(e,t){return Ee(xe(t).substr(0,5),e)},Ce.prototype.encryptor=function(e,t){var n=xe(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(e){return Ee(n,e)}},Ie.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||(0,r.A)(e)!==(0,r.A)(this))return!1;var i=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t))return!1;if(this[t]!==e[t])return!1;i++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&i--;return 0===i},De.API={events:[]},De.version="2.5.2";var Oe=De.API,Le=1,Me=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Fe=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},je=function(e){return e.toFixed(2)},Be=function(e){return e.toFixed(5)};Oe.__acroform__={};var Ue=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},ze=function(e){return e*Le},Ve=function(e){var t=new st,n=wt.internal.getHeight(e)||0,r=wt.internal.getWidth(e)||0;return t.BBox=[0,0,Number(je(r)),Number(je(n))],t},He=Oe.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},We=Oe.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},qe=Oe.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return 0==(e&1<<t)?0:1},Ge=Oe.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return qe(e,t-1)},Ke=Oe.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return He(e,t-1)},Ye=Oe.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return We(e,t-1)},Xe=Oe.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,i=e[0],s=e[1],a=e[2],o=e[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(s+o)||0,l.upperRight_X=n(i+a)||0,l.upperRight_Y=r(s)||0,[Number(je(l.lowerLeft_X)),Number(je(l.lowerLeft_Y)),Number(je(l.upperRight_X)),Number(je(l.upperRight_Y))]},Qe=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,r=Je(e,n),i=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+i+" "+je(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=Ve(e);return s.scope=e.scope,s.stream=t.join("\n"),s}},Je=function(e,t){var n=0===e.fontSize?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},i=(t=")"==(t="("==t.substr(0,1)?t.substr(1):t).substr(t.length-1)?t.substr(0,t.length-1):t).split(" ");i=e.multiline?i.map(function(e){return e.split("\n")}):i.map(function(e){return[e]});var s=n,a=wt.internal.getHeight(e)||0;a=a<0?-a:a;var o=wt.internal.getWidth(e)||0;o=o<0?-o:o;var l=function(t,n,r){if(t+1<i.length){var s=n+" "+i[t+1][0];return Ze(s,e,r).width<=o-4}return!1};s++;e:for(;s>0;){t="",s--;var c,u,d=Ze("3",e,s).height,h=e.multiline?a-s:(a-d)/2,f=h+=2,p=0,m=0,g=0;if(s<=0){t="(...) Tj\n",t+="% Width of Text: "+Ze(t,e,s=12).width+", FieldWidth:"+o+"\n";break}for(var y="",v=0,w=0;w<i.length;w++)if(i.hasOwnProperty(w)){var b=!1;if(1!==i[w].length&&g!==i[w].length-1){if((d+2)*(v+2)+2>a)continue e;y+=i[w][g],b=!0,m=w,w--}else{y=" "==(y+=i[w][g]+" ").substr(y.length-1)?y.substr(0,y.length-1):y;var x=parseInt(w),S=l(x,y,s),A=w>=i.length-1;if(S&&!A){y+=" ",g=0;continue}if(S||A){if(A)m=x;else if(e.multiline&&(d+2)*(v+2)+2>a)continue e}else{if(!e.multiline)continue e;if((d+2)*(v+2)+2>a)continue e;m=x}}for(var E="",N=p;N<=m;N++){var C=i[N];if(e.multiline){if(N===m){E+=C[g]+" ",g=(g+1)%C.length;continue}if(N===p){E+=C[C.length-1]+" ";continue}}E+=C[0]+" "}switch(E=" "==E.substr(E.length-1)?E.substr(0,E.length-1):E,u=Ze(E,e,s).width,e.textAlign){case"right":c=o-u-2;break;case"center":c=(o-u)/2;break;default:c=2}t+=je(c)+" "+je(f)+" Td\n",t+="("+Me(E)+") Tj\n",t+=-je(c)+" 0 Td\n",f=-(s+2),u=0,p=b?m:m+1,v++,y=""}break}return r.text=t,r.fontSize=s,r},Ze=function(e,t,n){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},$e={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},et=function(e,t){var n={type:"reference",object:e};void 0===t.internal.getPageInfo(e.page).pageContext.annotations.find(function(e){return e.type===n.type&&e.object===n.object})&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},tt=function(e,t){if(t.scope=e,void 0!==e.internal&&(void 0===e.internal.acroformPlugin||!1===e.internal.acroformPlugin.isInitialized)){if(ot.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify($e)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Le=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new at,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){var t;(t=e).internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0}),e.internal.events.subscribe("buildDocument",function(){!function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var t=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];r.objId=void 0,r.hasAnnotation&&et(r,e)}}(e)}),e.internal.events.subscribe("putCatalog",function(){!function(e){if(void 0===e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")}(e)}),e.internal.events.subscribe("postPutPages",function(t){!function(e,t){var n=!e;for(var i in e||(t.internal.newObjectDeferredBegin(t.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),t.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),e=e||t.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(e.hasOwnProperty(i)){var s=e[i],a=[],o=s.Rect;if(s.Rect&&(s.Rect=Xe(s.Rect,t)),t.internal.newObjectDeferredBegin(s.objId,!0),s.DA=wt.createDefaultAppearanceStream(s),"object"===(0,r.A)(s)&&"function"==typeof s.getKeyValueListForStream&&(a=s.getKeyValueListForStream()),s.Rect=o,s.hasAppearanceStream&&!s.appearanceStreamContent){var l=Qe(s);a.push({key:"AP",value:"<</N "+l+">>"}),t.internal.acroformPlugin.xForms.push(l)}if(s.appearanceStreamContent){var c="";for(var u in s.appearanceStreamContent)if(s.appearanceStreamContent.hasOwnProperty(u)){var d=s.appearanceStreamContent[u];if(c+="/"+u+" ",c+="<<",Object.keys(d).length>=1||Array.isArray(d)){for(var i in d)if(d.hasOwnProperty(i)){var h=d[i];"function"==typeof h&&(h=h.call(t,s)),c+="/"+i+" "+h+" ",t.internal.acroformPlugin.xForms.indexOf(h)>=0||t.internal.acroformPlugin.xForms.push(h)}}else"function"==typeof(h=d)&&(h=h.call(t,s)),c+="/"+i+" "+h,t.internal.acroformPlugin.xForms.indexOf(h)>=0||t.internal.acroformPlugin.xForms.push(h);c+=">>"}a.push({key:"AP",value:"<<\n"+c+">>"})}t.internal.putStream({additionalKeyValues:a,objectId:s.objId}),t.internal.out("endobj")}n&&function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var i=n,s=e[n];t.internal.newObjectDeferredBegin(s.objId,!0),"object"===(0,r.A)(s)&&"function"==typeof s.putStream&&s.putStream(),delete e[i]}}(t.internal.acroformPlugin.xForms,t)}(t,e)}),e.internal.acroformPlugin.isInitialized=!0}},nt=Oe.__acroform__.arrayToPdfArray=function(e,t,n){var i=function(e){return e};if(Array.isArray(e)){for(var s="[",a=0;a<e.length;a++)switch(0!==a&&(s+=" "),(0,r.A)(e[a])){case"boolean":case"number":case"object":s+=e[a].toString();break;case"string":"/"!==e[a].substr(0,1)?(void 0!==t&&n&&(i=n.internal.getEncryptor(t)),s+="("+Me(i(e[a].toString()))+")"):s+=e[a].toString()}return s+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},rt=function(e,t,n){var r=function(e){return e};return void 0!==t&&n&&(r=n.internal.getEncryptor(t)),(e=e||"").toString(),"("+Me(r(e))+")"},it=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(void 0===this._objId){if(void 0===this.scope)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};it.prototype.toString=function(){return this.objId+" 0 R"},it.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},it.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(e){return"content"!=e&&"appearanceStreamContent"!=e&&"scope"!=e&&"objId"!=e&&"_"!=e.substring(0,1)});for(var n in t)if(!1===Object.getOwnPropertyDescriptor(this,t[n]).configurable){var r=t[n],i=this[r];i&&(Array.isArray(i)?e.push({key:r,value:nt(i,this.objId,this.scope)}):i instanceof it?(i.scope=this.scope,e.push({key:r,value:i.objId+" 0 R"})):"function"!=typeof i&&e.push({key:r,value:i}))}return e};var st=function(){it.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){e=t.trim()},get:function(){return e||null}})};Ue(st,it);var at=function(){it.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Me(t(e))+")"}},set:function(t){e=t}})};Ue(at,it);var ot=function e(){it.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute F supplied.');t=e}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(t,3))},set:function(e){!0===Boolean(e)?this.F=Ke(t,3):this.F=Ye(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute Ff supplied.');n=e}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(0!==r.length)return r},set:function(e){r=void 0!==e?e:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(e){r[0]=e}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(e){r[1]=e}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(e){r[2]=e}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(e){r[3]=e}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(e){switch(e){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=e;break;default:throw new Error('Invalid value "'+e+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof mt)return;s="FieldObject"+e.FieldNum++}var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Me(t(s))+")"},set:function(e){s=e.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(e){s=e}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(e){a=e}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(e){o=e}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(e){l=e}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return void 0===c?50/Le:c},set:function(e){c=e}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(e){u=e}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof mt||this instanceof yt))return rt(d,this.objId,this.scope)},set:function(e){e=e.toString(),d=e}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof ht==0?rt(h,this.objId,this.scope):h},set:function(e){e=e.toString(),h=this instanceof ht==0?"("===e.substr(0,1)?Fe(e.substr(1,e.length-2)):Fe(e):e}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ht==1?Fe(h.substr(1,h.length-1)):h},set:function(e){e=e.toString(),h=this instanceof ht==1?"/"+e:e}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(e){this.V=e}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof ht==0?rt(f,this.objId,this.scope):f},set:function(e){e=e.toString(),f=this instanceof ht==0?"("===e.substr(0,1)?Fe(e.substr(1,e.length-2)):Fe(e):e}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ht==1?Fe(f.substr(1,f.length-1)):f},set:function(e){e=e.toString(),f=this instanceof ht==1?"/"+e:e}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var p,m=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return m},set:function(e){e=Boolean(e),m=e}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(p)return p},set:function(e){p=e}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,1))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,1):this.Ff=Ye(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,2))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,2):this.Ff=Ye(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,3))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,3):this.Ff=Ye(this.Ff,3)}});var g=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(null!==g)return g},set:function(e){if(-1===[0,1,2].indexOf(e))throw new Error('Invalid value "'+e+'" for attribute Q supplied.');g=e}}),Object.defineProperty(this,"textAlign",{get:function(){var e;switch(g){case 0:default:e="left";break;case 1:e="center";break;case 2:e="right"}return e},configurable:!0,enumerable:!0,set:function(e){switch(e){case"right":case 2:g=2;break;case"center":case 1:g=1;break;default:g=0}}})};Ue(ot,it);var lt=function(){ot.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){e=t}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return nt(t,this.objId,this.scope)},set:function(e){var n,r;r=[],"string"==typeof(n=e)&&(r=function(e,t,n){n||(n=1);for(var r,i=[];r=t.exec(e);)i.push(r[n]);return i}(n,/\((.*?)\)/g)),t=r}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,n){for(n=n||!1,e=(e=e||"").toString();-1!==t.indexOf(e)&&(t.splice(t.indexOf(e),1),!1!==n););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,18))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,18):this.Ff=Ye(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,19))},set:function(e){!0===this.combo&&(!0===Boolean(e)?this.Ff=Ke(this.Ff,19):this.Ff=Ye(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,20))},set:function(e){!0===Boolean(e)?(this.Ff=Ke(this.Ff,20),t.sort()):this.Ff=Ye(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,22))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,22):this.Ff=Ye(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,23))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,23):this.Ff=Ye(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,27))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,27):this.Ff=Ye(this.Ff,27)}}),this.hasAppearanceStream=!1};Ue(lt,ot);var ct=function(){lt.call(this),this.fontName="helvetica",this.combo=!1};Ue(ct,lt);var ut=function(){ct.call(this),this.combo=!0};Ue(ut,ct);var dt=function(){ut.call(this),this.edit=!0};Ue(dt,ut);var ht=function(){ot.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,15))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,15):this.Ff=Ye(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,16))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,16):this.Ff=Ye(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,17))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,17):this.Ff=Ye(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,26))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,26):this.Ff=Ye(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),0!==Object.keys(t).length){var n,r=[];for(n in r.push("<<"),t)r.push("/"+n+" ("+Me(e(t[n]))+")");return r.push(">>"),r.join("\n")}},set:function(e){"object"===(0,r.A)(e)&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){"string"==typeof e&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(t){e="/"+t}})};Ue(ht,ot);var ft=function(){ht.call(this),this.pushButton=!0};Ue(ft,ht);var pt=function(){ht.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=void 0!==t?t:[]}})};Ue(pt,ht);var mt=function(){var e,t;ot.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(e){t=e}});var n,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};this.scope&&(e=this.scope.internal.getEncryptor(this.objId));var t,n=[];for(t in n.push("<<"),i)n.push("/"+t+" ("+Me(e(i[t]))+")");return n.push(">>"),n.join("\n")},set:function(e){"object"===(0,r.A)(e)&&(i=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(e){"string"==typeof e&&(i.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(e){n="/"+e}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=wt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ue(mt,ot),pt.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},pt.prototype.createOption=function(e){var t=new mt;return t.Parent=this,t.optionName=e,this.Kids.push(t),bt.call(this.scope,t),t};var gt=function(){ht.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=wt.CheckBox.createAppearanceStream()};Ue(gt,ht);var yt=function(){ot.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,13))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,13):this.Ff=Ye(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,21))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,21):this.Ff=Ye(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,23))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,23):this.Ff=Ye(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,24))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,24):this.Ff=Ye(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,25))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,25):this.Ff=Ye(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,26))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,26):this.Ff=Ye(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ue(yt,ot);var vt=function(){yt.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,14))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,14):this.Ff=Ye(this.Ff,14)}}),this.password=!0};Ue(vt,yt);var wt={CheckBox:{createAppearanceStream:function(){return{N:{On:wt.CheckBox.YesNormal},D:{On:wt.CheckBox.YesPushDown,Off:wt.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Ve(e);t.scope=e.scope;var n=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),s=Je(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+je(wt.internal.getWidth(e))+" "+je(wt.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+je(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join("\n"),t},YesNormal:function(e){var t=Ve(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),i=[],s=wt.internal.getHeight(e),a=wt.internal.getWidth(e),o=Je(e,e.caption);return i.push("1 g"),i.push("0 0 "+je(a)+" "+je(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+je(a-1)+" "+je(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+je(o.fontSize)+" Tf "+r),i.push(o.text),i.push("ET"),i.push("Q"),t.stream=i.join("\n"),t},OffPushDown:function(e){var t=Ve(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+je(wt.internal.getWidth(e))+" "+je(wt.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join("\n"),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:wt.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=wt.RadioButton.Circle.YesNormal,t.D[e]=wt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Ve(e);t.scope=e.scope;var n=[],r=wt.internal.getWidth(e)<=wt.internal.getHeight(e)?wt.internal.getWidth(e)/4:wt.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=wt.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Be(wt.internal.getWidth(e)/2)+" "+Be(wt.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t},YesPushDown:function(e){var t=Ve(e);t.scope=e.scope;var n=[],r=wt.internal.getWidth(e)<=wt.internal.getHeight(e)?wt.internal.getWidth(e)/4:wt.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*wt.internal.Bezier_C).toFixed(5)),a=Number((r*wt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Be(wt.internal.getWidth(e)/2)+" "+Be(wt.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Be(wt.internal.getWidth(e)/2)+" "+Be(wt.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t},OffPushDown:function(e){var t=Ve(e);t.scope=e.scope;var n=[],r=wt.internal.getWidth(e)<=wt.internal.getHeight(e)?wt.internal.getWidth(e)/4:wt.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*wt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Be(wt.internal.getWidth(e)/2)+" "+Be(wt.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:wt.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=wt.RadioButton.Cross.YesNormal,t.D[e]=wt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Ve(e);t.scope=e.scope;var n=[],r=wt.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+je(wt.internal.getWidth(e)-2)+" "+je(wt.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(je(r.x1.x)+" "+je(r.x1.y)+" m"),n.push(je(r.x2.x)+" "+je(r.x2.y)+" l"),n.push(je(r.x4.x)+" "+je(r.x4.y)+" m"),n.push(je(r.x3.x)+" "+je(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join("\n"),t},YesPushDown:function(e){var t=Ve(e);t.scope=e.scope;var n=wt.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+je(wt.internal.getWidth(e))+" "+je(wt.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+je(wt.internal.getWidth(e)-2)+" "+je(wt.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(je(n.x1.x)+" "+je(n.x1.y)+" m"),r.push(je(n.x2.x)+" "+je(n.x2.y)+" l"),r.push(je(n.x4.x)+" "+je(n.x4.y)+" m"),r.push(je(n.x3.x)+" "+je(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join("\n"),t},OffPushDown:function(e){var t=Ve(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+je(wt.internal.getWidth(e))+" "+je(wt.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join("\n"),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};wt.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=wt.internal.getWidth(e),n=wt.internal.getHeight(e),r=Math.min(t,n);return{x1:{x:(t-r)/2,y:(n-r)/2+r},x2:{x:(t-r)/2+r,y:(n-r)/2},x3:{x:(t-r)/2,y:(n-r)/2},x4:{x:(t-r)/2+r,y:(n-r)/2+r}}}},wt.internal.getWidth=function(e){var t=0;return"object"===(0,r.A)(e)&&(t=ze(e.Rect[2])),t},wt.internal.getHeight=function(e){var t=0;return"object"===(0,r.A)(e)&&(t=ze(e.Rect[3])),t};var bt=Oe.addField=function(e){if(tt(this,e),!(e instanceof ot))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Oe.AcroFormChoiceField=lt,Oe.AcroFormListBox=ct,Oe.AcroFormComboBox=ut,Oe.AcroFormEditBox=dt,Oe.AcroFormButton=ht,Oe.AcroFormPushButton=ft,Oe.AcroFormRadioButton=pt,Oe.AcroFormCheckBox=gt,Oe.AcroFormTextField=yt,Oe.AcroFormPasswordField=vt,Oe.AcroFormAppearance=wt,Oe.AcroForm={ChoiceField:lt,ListBox:ct,ComboBox:ut,EditBox:dt,Button:ht,PushButton:ft,RadioButton:pt,CheckBox:gt,TextField:yt,PasswordField:vt,Appearance:wt},De.AcroForm={ChoiceField:lt,ListBox:ct,ComboBox:ut,EditBox:dt,Button:ht,PushButton:ft,RadioButton:pt,CheckBox:gt,TextField:yt,PasswordField:vt,Appearance:wt};var xt=De.AcroForm;function St(e){return e.reduce(function(e,t,n){return e[t]=n,e},{})}!function(e){e.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=e.__addimage__.getImageFileTypeByImageData=function(e,r){var i,s,a,o,l,c=t;if("RGBA"===(r=r||t)||void 0!==e.data&&e.data instanceof Uint8ClampedArray&&"height"in e&&"width"in e)return"RGBA";if(A(e))for(l in n)for(a=n[l],i=0;i<a.length;i+=1){for(o=!0,s=0;s<a[i].length;s+=1)if(void 0!==a[i][s]&&a[i][s]!==e[s]){o=!1;break}if(!0===o){c=l;break}}else for(l in n)for(a=n[l],i=0;i<a.length;i+=1){for(o=!0,s=0;s<a[i].length;s+=1)if(void 0!==a[i][s]&&a[i][s]!==e.charCodeAt(s)){o=!1;break}if(!0===o){c=l;break}}return c===t&&r!==t&&(c=r),c},s=function e(t){for(var n=this.internal.write,r=this.internal.putStream,i=(0,this.internal.getFilters)();-1!==i.indexOf("FlateEncode");)i.splice(i.indexOf("FlateEncode"),1);t.objectId=this.internal.newObject();var s=[];if(s.push({key:"Type",value:"/XObject"}),s.push({key:"Subtype",value:"/Image"}),s.push({key:"Width",value:t.width}),s.push({key:"Height",value:t.height}),t.colorSpace===y.INDEXED?s.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(t.palette.length/3-1)+" "+("sMask"in t&&void 0!==t.sMask?t.objectId+2:t.objectId+1)+" 0 R]"}):(s.push({key:"ColorSpace",value:"/"+t.colorSpace}),t.colorSpace===y.DEVICE_CMYK&&s.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),s.push({key:"BitsPerComponent",value:t.bitsPerComponent}),"decodeParameters"in t&&void 0!==t.decodeParameters&&s.push({key:"DecodeParms",value:"<<"+t.decodeParameters+">>"}),"transparency"in t&&Array.isArray(t.transparency)){for(var a="",o=0,l=t.transparency.length;o<l;o++)a+=t.transparency[o]+" "+t.transparency[o]+" ";s.push({key:"Mask",value:"["+a+"]"})}void 0!==t.sMask&&s.push({key:"SMask",value:t.objectId+1+" 0 R"});var c=void 0!==t.filter?["/"+t.filter]:void 0;if(r({data:t.data,additionalKeyValues:s,alreadyAppliedFilters:c,objectId:t.objectId}),n("endobj"),"sMask"in t&&void 0!==t.sMask){var u="/Predictor "+t.predictor+" /Colors 1 /BitsPerComponent "+t.bitsPerComponent+" /Columns "+t.width,d={width:t.width,height:t.height,colorSpace:"DeviceGray",bitsPerComponent:t.bitsPerComponent,decodeParameters:u,data:t.sMask};"filter"in t&&(d.filter=t.filter),e.call(this,d)}if(t.colorSpace===y.INDEXED){var h=this.internal.newObject();r({data:N(new Uint8Array(t.palette)),objectId:h}),n("endobj")}},a=function(){var e=this.internal.collections.addImage_images;for(var t in e)s.call(this,e[t])},o=function(){var e,t=this.internal.collections.addImage_images,n=this.internal.write;for(var r in t)n("/I"+(e=t[r]).index,e.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var e=this.internal.collections.addImage_images;return l.call(this),e},u=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(t){return"function"==typeof e["process"+t.toUpperCase()]},h=function(e){return"object"===(0,r.A)(e)&&1===e.nodeType},f=function(t,n){if("IMG"===t.nodeName&&t.hasAttribute("src")){var r=""+t.getAttribute("src");if(0===r.indexOf("data:image/"))return ae(unescape(r).split("base64,").pop());var i=e.loadFile(r,!0);if(void 0!==i)return i}if("CANVAS"===t.nodeName){if(0===t.width||0===t.height)throw new Error("Given canvas must have data. Canvas width: "+t.width+", height: "+t.height);var s;switch(n){case"PNG":s="image/png";break;case"WEBP":s="image/webp";break;default:s="image/jpeg"}return ae(t.toDataURL(s,1).split("base64,").pop())}},p=function(e){var t=this.internal.collections.addImage_images;if(t)for(var n in t)if(e===t[n].alias)return t[n]},m=function(e,t,n){return e||t||(e=-96,t=-96),e<0&&(e=-1*n.width*72/e/this.internal.scaleFactor),t<0&&(t=-1*n.height*72/t/this.internal.scaleFactor),0===e&&(e=t*n.width/n.height),0===t&&(t=e*n.height/n.width),[e,t]},g=function(e,t,n,r,i,s){var a=m.call(this,n,r,i),o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,u=c.call(this);if(n=a[0],r=a[1],u[i.index]=i,s){s*=Math.PI/180;var d=Math.cos(s),h=Math.sin(s),f=function(e){return e.toFixed(4)},p=[f(d),f(h),f(-1*h),f(d),0,0,"cm"]}this.internal.write("q"),s?(this.internal.write([1,"0","0",1,o(e),l(t+r),"cm"].join(" ")),this.internal.write(p.join(" ")),this.internal.write([o(n),"0","0",o(r),"0","0","cm"].join(" "))):this.internal.write([o(n),"0","0",o(r),o(e),l(t+r),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+i.index+" Do"),this.internal.write("Q")},y=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var v=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},w=e.__addimage__.sHashCode=function(e){var t,n,r=0;if("string"==typeof e)for(n=e.length,t=0;t<n;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;else if(A(e))for(n=e.byteLength/2,t=0;t<n;t++)r=(r<<5)-r+e[t],r|=0;return r},b=e.__addimage__.validateStringAsBase64=function(e){(e=e||"").toString().trim();var t=!0;return 0===e.length&&(t=!1),e.length%4!=0&&(t=!1),!1===/^[A-Za-z0-9+/]+$/.test(e.substr(0,e.length-2))&&(t=!1),!1===/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(e.substr(-2))&&(t=!1),t},x=e.__addimage__.extractImageFromDataUrl=function(e){var t=(e=e||"").split("base64,"),n=null;if(2===t.length){var r=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(t[0]);Array.isArray(r)&&(n={mimeType:r[1],charset:r[2],data:t[1]})}return n},S=e.__addimage__.supportsArrayBuffer=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array};e.__addimage__.isArrayBuffer=function(e){return S()&&e instanceof ArrayBuffer};var A=e.__addimage__.isArrayBufferView=function(e){return S()&&"undefined"!=typeof Uint32Array&&(e instanceof Int8Array||e instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)},E=e.__addimage__.binaryStringToUint8Array=function(e){for(var t=e.length,n=new Uint8Array(t),r=0;r<t;r++)n[r]=e.charCodeAt(r);return n},N=e.__addimage__.arrayBufferToBinaryString=function(e){for(var t="",n=A(e)?e:new Uint8Array(e),r=0;r<n.length;r+=8192)t+=String.fromCharCode.apply(null,n.subarray(r,r+8192));return t};e.addImage=function(){var e,n,i,s,a,o,c,u,d;if("number"==typeof arguments[1]?(n=t,i=arguments[1],s=arguments[2],a=arguments[3],o=arguments[4],c=arguments[5],u=arguments[6],d=arguments[7]):(n=arguments[1],i=arguments[2],s=arguments[3],a=arguments[4],o=arguments[5],c=arguments[6],u=arguments[7],d=arguments[8]),"object"===(0,r.A)(e=arguments[0])&&!h(e)&&"imageData"in e){var f=e;e=f.imageData,n=f.format||n||t,i=f.x||i||0,s=f.y||s||0,a=f.w||f.width||a,o=f.h||f.height||o,c=f.alias||c,u=f.compression||u,d=f.rotation||f.angle||d}var p=this.internal.getFilters();if(void 0===u&&-1!==p.indexOf("FlateEncode")&&(u="SLOW"),isNaN(i)||isNaN(s))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var m=C.call(this,e,n,c,u);return g.call(this,i,s,a,o,m,d),this};var C=function(n,r,s,a){var o,l,c;if("string"==typeof n&&i(n)===t){n=unescape(n);var m=_(n,!1);(""!==m||void 0!==(m=e.loadFile(n,!0)))&&(n=m)}if(h(n)&&(n=f(n,r)),r=i(n,r),!d(r))throw new Error("addImage does not support files of type '"+r+"', please ensure that a plugin for '"+r+"' support is added.");if((null==(c=s)||0===c.length)&&(s=function(e){return"string"==typeof e||A(e)?w(e):A(e.data)?w(e.data):null}(n)),(o=p.call(this,s))||(S()&&(n instanceof Uint8Array||"RGBA"===r||(l=n,n=E(n))),o=this["process"+r.toUpperCase()](n,u.call(this),s,function(t){return t&&"string"==typeof t&&(t=t.toUpperCase()),t in e.image_compression?t:v.NONE}(a),l)),!o)throw new Error("An unknown error occurred whilst processing the image.");return o},_=e.__addimage__.convertBase64ToBinaryString=function(e,t){var n;t="boolean"!=typeof t||t;var r,i="";if("string"==typeof e){r=null!==(n=x(e))?n.data:e;try{i=ae(r)}catch(e){if(t)throw b(r)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+e.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return i};e.getImageProperties=function(n){var r,s,a="";if(h(n)&&(n=f(n)),"string"==typeof n&&i(n)===t&&(""===(a=_(n,!1))&&(a=e.loadFile(n)||""),n=a),s=i(n),!d(s))throw new Error("addImage does not support files of type '"+s+"', please ensure that a plugin for '"+s+"' support is added.");if(!S()||n instanceof Uint8Array||(n=E(n)),!(r=this["process"+s.toUpperCase()](n)))throw new Error("An unknown error occurred whilst processing the image");return r.fileType=s,r}}(De.API),function(e){var t=function(e){if(void 0!==e&&""!=e)return!0};De.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(e){for(var n,r,i,s=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,o=this.internal.getPageInfoByObjId(e.objId),l=e.pageContext.annotations,c=!1,u=0;u<l.length&&!c;u++)switch((n=l[u]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(c=!0);break;case"reference":case"text":case"freetext":c=!0}if(0!=c){this.internal.write("/Annots [");for(var d=0;d<l.length;d++){n=l[d];var h=this.internal.pdfEscape,f=this.internal.getEncryptor(e.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var p=this.internal.newAdditionalObject(),m=this.internal.newAdditionalObject(),g=this.internal.getEncryptor(p.objId),y=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(r="/Rect ["+s(n.bounds.x)+" "+a(n.bounds.y+n.bounds.h)+" "+s(n.bounds.x+n.bounds.w)+" "+a(n.bounds.y)+"] ")+"/Contents ("+h(g(n.contents))+")",i+=" /Popup "+m.objId+" 0 R",i+=" /P "+o.objId+" 0 R",i+=" /T ("+h(g(y))+") >>",p.content=i;var v=p.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(r="/Rect ["+s(n.bounds.x+30)+" "+a(n.bounds.y+n.bounds.h)+" "+s(n.bounds.x+n.bounds.w+30)+" "+a(n.bounds.y)+"] ")+" /Parent "+v,n.open&&(i+=" /Open true"),i+=" >>",m.content=i,this.internal.write(p.objId,"0 R",m.objId,"0 R");break;case"freetext":r="/Rect ["+s(n.bounds.x)+" "+a(n.bounds.y)+" "+s(n.bounds.x+n.bounds.w)+" "+a(n.bounds.y+n.bounds.h)+"] ";var w=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+r+"/Contents ("+h(f(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+w+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var b=this.annotations._nameMap[n.options.name];n.options.pageNumber=b.page,n.options.top=b.y}else n.options.top||(n.options.top=0);if(r="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /A <</S /URI /URI ("+h(f(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;default:var x=a(n.options.top);n.options.left=n.options.left||0,void 0===n.options.zoom&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+x+" "+n.options.zoom+"]"}""!=i&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(e){var t=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":t.pageContext.annotations.push(e)}},e.link=function(e,t,n,r,i){var s=this.internal.getCurrentPageInfo(),a=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString;s.pageContext.annotations.push({finalBounds:{x:a(e),y:o(t),w:a(e+n),h:o(t+r)},options:i,type:"link"})},e.textWithLink=function(e,t,n,r){var i,s,a=this.getTextWidth(e),o=this.internal.getLineHeight()/this.internal.scaleFactor;if(void 0!==r.maxWidth){s=r.maxWidth;var l=this.splitTextToSize(e,s).length;i=Math.ceil(o*l)}else s=a,i=o;return this.text(e,t,n,r),n+=.2*o,"center"===r.align&&(t-=a/2),"right"===r.align&&(t-=a),this.link(t,n-o,s,i,r),a},e.getTextWidth=function(e){var t=this.internal.getFontSize();return this.getStringUnitWidth(e)*t/this.internal.scaleFactor}}(De.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];e.__arabicParser__={};var s=e.__arabicParser__.isInArabicSubstitutionA=function(e){return void 0!==t[e.charCodeAt(0)]},a=e.__arabicParser__.isArabicLetter=function(e){return"string"==typeof e&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(e)},o=e.__arabicParser__.isArabicEndLetter=function(e){return a(e)&&s(e)&&t[e.charCodeAt(0)].length<=2},l=e.__arabicParser__.isArabicAlfLetter=function(e){return a(e)&&i.indexOf(e.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(e){return a(e)&&s(e)&&t[e.charCodeAt(0)].length>=1};var c=e.__arabicParser__.arabicLetterHasFinalForm=function(e){return a(e)&&s(e)&&t[e.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(e){return a(e)&&s(e)&&t[e.charCodeAt(0)].length>=3};var u=e.__arabicParser__.arabicLetterHasMedialForm=function(e){return a(e)&&s(e)&&4==t[e.charCodeAt(0)].length},d=e.__arabicParser__.resolveLigatures=function(e){var t=0,r=n,i="",s=0;for(t=0;t<e.length;t+=1)void 0!==r[e.charCodeAt(t)]?(s++,"number"==typeof(r=r[e.charCodeAt(t)])&&(i+=String.fromCharCode(r),r=n,s=0),t===e.length-1&&(r=n,i+=e.charAt(t-(s-1)),t-=s-1,s=0)):(r=n,i+=e.charAt(t-s),t-=s,s=0);return i};e.__arabicParser__.isArabicDiacritic=function(e){return void 0!==e&&void 0!==r[e.charCodeAt(0)]};var h=e.__arabicParser__.getCorrectForm=function(e,t,n){return a(e)?!1===s(e)?-1:!c(e)||!a(t)&&!a(n)||!a(n)&&o(t)||o(e)&&!a(t)||o(e)&&l(t)||o(e)&&o(t)?0:u(e)&&a(t)&&!o(t)&&a(n)&&c(n)?3:o(e)||!a(n)?1:2:-1},f=function(e){var n=0,r=0,i=0,s="",o="",l="",c=(e=e||"").split("\\s+"),u=[];for(n=0;n<c.length;n+=1){for(u.push(""),r=0;r<c[n].length;r+=1)s=c[n][r],o=c[n][r-1],l=c[n][r+1],a(s)?(i=h(s,o,l),u[n]+=-1!==i?String.fromCharCode(t[s.charCodeAt(0)][i]):s):u[n]+=s;u[n]=d(u[n])}return u.join(" ")},p=e.__arabicParser__.processArabic=e.processArabic=function(){var e,t="string"==typeof arguments[0]?arguments[0]:arguments[0].text,n=[];if(Array.isArray(t)){var r=0;for(n=[],r=0;r<t.length;r+=1)Array.isArray(t[r])?n.push([f(t[r][0]),t[r][1],t[r][2]]):n.push([f(t[r])]);e=n}else e=f(t);return"string"==typeof arguments[0]?e:(arguments[0].text=e,arguments[0])};e.events.push(["preProcessText",p])}(De.API),De.API.autoPrint=function(e){var t;if("javascript"===((e=e||{}).variant=e.variant||"non-conform",e.variant))this.addJS("print({});");else this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")});return this},function(e){var t=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(t){e=t}});var t=150;Object.defineProperty(this,"width",{get:function(){return t},set:function(e){t=isNaN(e)||!1===Number.isInteger(e)||e<0?150:e,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=t+1)}});var n=300;Object.defineProperty(this,"height",{get:function(){return n},set:function(e){n=isNaN(e)||!1===Number.isInteger(e)||e<0?300:e,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=n+1)}});var r=[];Object.defineProperty(this,"childNodes",{get:function(){return r},set:function(e){r=e}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(e){i=e}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(e,t){var n;if("2d"!==(e=e||"2d"))return null;for(n in t)this.pdf.context2d.hasOwnProperty(n)&&(this.pdf.context2d[n]=t[n]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(De.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,i=function(){void 0===this.internal.__cell__&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var e=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return e},set:function(t){e=t}});var t=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return t},set:function(e){t=e}});var n=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return n},set:function(e){n=e}});var r=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return r},set:function(e){r=e}});var i=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return i},set:function(e){i=e}});var s=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return s},set:function(e){s=e}});var a=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return a},set:function(e){a=e}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(e){return i.call(this),this.internal.__cell__.headerFunction="function"==typeof e?e:void 0,this},e.getTextDimensions=function(e,t){i.call(this);var n=(t=t||{}).fontSize||this.getFontSize(),r=t.font||this.getFont(),s=t.scaleFactor||this.internal.scaleFactor,a=0,o=0,l=0,c=this;if(!Array.isArray(e)&&"string"!=typeof e){if("number"!=typeof e)throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");e=String(e)}var u=t.maxWidth;u>0?"string"==typeof e?e=this.splitTextToSize(e,u):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce(function(e,t){return e.concat(c.splitTextToSize(t,u))},[])):e=Array.isArray(e)?e:[e];for(var d=0;d<e.length;d++)a<(l=this.getStringUnitWidth(e[d],{font:r})*n)&&(a=l);return 0!==a&&(o=e.length),{w:a/=s,h:Math.max((o*n*this.getLineHeightFactor()-n*(this.getLineHeightFactor()-1))/s,0)}},e.cellAddPage=function(){i.call(this),this.addPage();var e=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new a(e.left,e.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var e;e=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),i.call(this);var r=this.internal.__cell__.lastCell,s=this.internal.__cell__.padding,o=this.internal.__cell__.margins||t,l=this.internal.__cell__.tableHeaderRow,c=this.internal.__cell__.printHeaders;return void 0!==r.lineNumber&&(r.lineNumber===e.lineNumber?(e.x=(r.x||0)+(r.width||0),e.y=r.y||0):r.y+r.height+e.height+o.bottom>this.getPageHeight()?(this.cellAddPage(),e.y=o.top,c&&l&&(this.printHeaderRow(e.lineNumber,!0),e.y+=l[0].height)):e.y=r.y+r.height||e.y),void 0!==e.text[0]&&(this.rect(e.x,e.y,e.width,e.height,!0===n?"FD":void 0),"right"===e.align?this.text(e.text,e.x+e.width-s,e.y+s,{align:"right",baseline:"top"}):"center"===e.align?this.text(e.text,e.x+e.width/2,e.y+s,{align:"center",baseline:"top",maxWidth:e.width-s-s}):this.text(e.text,e.x+s,e.y+s,{align:"left",baseline:"top",maxWidth:e.width-s-s})),this.internal.__cell__.lastCell=e,this};e.table=function(e,n,c,u,d){if(i.call(this),!c)throw new Error("No data for PDF table.");var h,f,p,m,g=[],y=[],v=[],w={},b={},x=[],S=[],A=(d=d||{}).autoSize||!1,E=!1!==d.printHeaders,N=d.css&&void 0!==d.css["font-size"]?16*d.css["font-size"]:d.fontSize||12,C=d.margins||Object.assign({width:this.getPageWidth()},t),_="number"==typeof d.padding?d.padding:3,T=d.headerBackgroundColor||"#c8c8c8",I=d.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=E,this.internal.__cell__.margins=C,this.internal.__cell__.table_font_size=N,this.internal.__cell__.padding=_,this.internal.__cell__.headerBackgroundColor=T,this.internal.__cell__.headerTextColor=I,this.setFontSize(N),null==u)y=g=Object.keys(c[0]),v=g.map(function(){return"left"});else if(Array.isArray(u)&&"object"===(0,r.A)(u[0]))for(g=u.map(function(e){return e.name}),y=u.map(function(e){return e.prompt||e.name||""}),v=u.map(function(e){return e.align||"left"}),h=0;h<u.length;h+=1)b[u[h].name]=u[h].width*(19.049976/25.4);else Array.isArray(u)&&"string"==typeof u[0]&&(y=g=u,v=g.map(function(){return"left"}));if(A||Array.isArray(u)&&"string"==typeof u[0])for(h=0;h<g.length;h+=1){for(w[m=g[h]]=c.map(function(e){return e[m]}),this.setFont(void 0,"bold"),x.push(this.getTextDimensions(y[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),f=w[m],this.setFont(void 0,"normal"),p=0;p<f.length;p+=1)x.push(this.getTextDimensions(f[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);b[m]=Math.max.apply(null,x)+_+_,x=[]}if(E){var k={};for(h=0;h<g.length;h+=1)k[g[h]]={},k[g[h]].text=y[h],k[g[h]].align=v[h];var P=l.call(this,k,b);S=g.map(function(t){return new a(e,n,b[t],P,k[t].text,void 0,k[t].align)}),this.setTableHeaderRow(S),this.printHeaderRow(1,!1)}var R=u.reduce(function(e,t){return e[t.name]=t.align,e},{});for(h=0;h<c.length;h+=1){"rowStart"in d&&d.rowStart instanceof Function&&d.rowStart({row:h,data:c[h]},this);var D=l.call(this,c[h],b);for(p=0;p<g.length;p+=1){var O=c[h][g[p]];"cellStart"in d&&d.cellStart instanceof Function&&d.cellStart({row:h,col:p,data:O},this),o.call(this,new a(e,n,b[g[p]],D,O,h+2,R[g[p]]))}}return this.internal.__cell__.table_x=e,this.internal.__cell__.table_y=n,this};var l=function(e,t){var n=this.internal.__cell__.padding,r=this.internal.__cell__.table_font_size,i=this.internal.scaleFactor;return Object.keys(e).map(function(r){var i=e[r];return this.splitTextToSize(i.hasOwnProperty("text")?i.text:i,t[r]-n-n)},this).map(function(e){return this.getLineHeightFactor()*e.length*r/i+n+n},this).reduce(function(e,t){return Math.max(e,t)},0)};e.setTableHeaderRow=function(e){i.call(this),this.internal.__cell__.tableHeaderRow=e},e.printHeaderRow=function(e,t){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var r;if(n=!0,"function"==typeof this.internal.__cell__.headerFunction){var s=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(s[0],s[1],s[2],s[3],void 0,-1)}this.setFont(void 0,"bold");for(var l=[],c=0;c<this.internal.__cell__.tableHeaderRow.length;c+=1){r=this.internal.__cell__.tableHeaderRow[c].clone(),t&&(r.y=this.internal.__cell__.margins.top||0,l.push(r)),r.lineNumber=e;var u=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,r),this.setTextColor(u)}l.length>0&&this.setTableHeaderRow(l),this.setFont(void 0,"normal"),n=!1}}(De.API);var At={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Et=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Nt=St(Et),Ct=[100,200,300,400,500,600,700,800,900],_t=St(Ct);function Tt(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(e){return At[e=e||"normal"]?e:"normal"}(e.style),r=function(e){return e?"number"==typeof e?e>=100&&e<=900&&e%100==0?e:400:/^\d00$/.test(e)?parseInt(e):"bold"===e?700:400:400}(e.weight),i=function(e){return"number"==typeof Nt[e=e||"normal"]?e:"normal"}(e.stretch);return{family:t,style:n,weight:r,stretch:i,src:e.src||[],ref:e.ref||{name:t,style:[i,n,r].join(" ")}}}function It(e,t,n,r){var i;for(i=n;i>=0&&i<t.length;i+=r)if(e[t[i]])return e[t[i]];for(i=n;i>=0&&i<t.length;i-=r)if(e[t[i]])return e[t[i]]}var kt={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Pt={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Rt(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function Dt(e){return e.trimLeft()}function Ot(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function Lt(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return null===t?null:[t[0],e.substring(t[0].length)]}var Mt,Ft,jt,Bt,Ut=["times"];!function(e){var t,n,i,s,a,o,l,c,u,d=function(e){return e=e||{},this.isStrokeTransparent=e.isStrokeTransparent||!1,this.strokeOpacity=e.strokeOpacity||1,this.strokeStyle=e.strokeStyle||"#000000",this.fillStyle=e.fillStyle||"#000000",this.isFillTransparent=e.isFillTransparent||!1,this.fillOpacity=e.fillOpacity||1,this.font=e.font||"10px sans-serif",this.textBaseline=e.textBaseline||"alphabetic",this.textAlign=e.textAlign||"left",this.lineWidth=e.lineWidth||1,this.lineJoin=e.lineJoin||"miter",this.lineCap=e.lineCap||"butt",this.path=e.path||[],this.transform=void 0!==e.transform?e.transform.clone():new c,this.globalCompositeOperation=e.globalCompositeOperation||"normal",this.globalAlpha=e.globalAlpha||1,this.clip_path=e.clip_path||[],this.currentPoint=e.currentPoint||new o,this.miterLimit=e.miterLimit||10,this.lastPoint=e.lastPoint||new o,this.lineDashOffset=e.lineDashOffset||0,this.lineDash=e.lineDash||[],this.margin=e.margin||[0,0,0,0],this.prevPageLastElemOffset=e.prevPageLastElemOffset||0,this.ignoreClearRect="boolean"!=typeof e.ignoreClearRect||e.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new h(this),t=this.internal.f2,n=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var h=function(e){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var t=e;Object.defineProperty(this,"pdf",{get:function(){return t}});var n=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return n},set:function(e){n=Boolean(e)}});var r=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return r},set:function(e){r=Boolean(e)}});var i=0;Object.defineProperty(this,"posX",{get:function(){return i},set:function(e){isNaN(e)||(i=e)}});var s=0;Object.defineProperty(this,"posY",{get:function(){return s},set:function(e){isNaN(e)||(s=e)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(e){var t;"number"==typeof e?t=[e,e,e,e]:((t=new Array(4))[0]=e[0],t[1]=e.length>=2?e[1]:t[0],t[2]=e.length>=3?e[2]:t[0],t[3]=e.length>=4?e[3]:t[1]),u.margin=t}});var a=!1;Object.defineProperty(this,"autoPaging",{get:function(){return a},set:function(e){a=e}});var o=0;Object.defineProperty(this,"lastBreak",{get:function(){return o},set:function(e){o=e}});var l=[];Object.defineProperty(this,"pageBreaks",{get:function(){return l},set:function(e){l=e}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(e){e instanceof d&&(u=e)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(e){u.path=e}});var c=[];Object.defineProperty(this,"ctxStack",{get:function(){return c},set:function(e){c=e}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(e){var t;t=f(e),this.ctx.fillStyle=t.style,this.ctx.isFillTransparent=0===t.a,this.ctx.fillOpacity=t.a,this.pdf.setFillColor(t.r,t.g,t.b,{a:t.a}),this.pdf.setTextColor(t.r,t.g,t.b,{a:t.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(e){var t=f(e);this.ctx.strokeStyle=t.style,this.ctx.isStrokeTransparent=0===t.a,this.ctx.strokeOpacity=t.a,0===t.a?this.pdf.setDrawColor(255,255,255):(t.a,this.pdf.setDrawColor(t.r,t.g,t.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(e){-1!==["butt","round","square"].indexOf(e)&&(this.ctx.lineCap=e,this.pdf.setLineCap(e))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(e){isNaN(e)||(this.ctx.lineWidth=e,this.pdf.setLineWidth(e))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(e){-1!==["bevel","round","miter"].indexOf(e)&&(this.ctx.lineJoin=e,this.pdf.setLineJoin(e))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(e){isNaN(e)||(this.ctx.miterLimit=e,this.pdf.setMiterLimit(e))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(e){this.ctx.textBaseline=e}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(e){-1!==["right","end","center","left","start"].indexOf(e)&&(this.ctx.textAlign=e)}});var h=null;function p(e,t){if(null===h){var n=function(e){var t=[];return Object.keys(e).forEach(function(n){e[n].forEach(function(e){var r=null;switch(e){case"bold":r={family:n,weight:"bold"};break;case"italic":r={family:n,style:"italic"};break;case"bolditalic":r={family:n,weight:"bold",style:"italic"};break;case"":case"normal":r={family:n}}null!==r&&(r.ref={name:n,style:e},t.push(r))})}),t}(e.getFontList());h=function(e){for(var t={},n=0;n<e.length;++n){var r=Tt(e[n]),i=r.family,s=r.stretch,a=r.style,o=r.weight;t[i]=t[i]||{},t[i][s]=t[i][s]||{},t[i][s][a]=t[i][s][a]||{},t[i][s][a][o]=r}return t}(n.concat(t))}return h}var m=null;Object.defineProperty(this,"fontFaces",{get:function(){return m},set:function(e){h=null,m=e}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(e){var t;if(this.ctx.font=e,null!==(t=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(e))){var n=t[1],r=(t[2],t[3]),i=t[4],s=(t[5],t[6]),a=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(i)[2];i="px"===a?Math.floor(parseFloat(i)*this.pdf.internal.scaleFactor):"em"===a?Math.floor(parseFloat(i)*this.pdf.getFontSize()):Math.floor(parseFloat(i)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(i);var o=function(e){var t,n,r=[],i=e.trim();if(""===i)return Ut;if(i in Pt)return[Pt[i]];for(;""!==i;){switch(n=null,t=(i=Dt(i)).charAt(0)){case'"':case"'":n=Ot(i.substring(1),t);break;default:n=Lt(i)}if(null===n)return Ut;if(r.push(n[0]),""!==(i=Dt(n[1]))&&","!==i.charAt(0))return Ut;i=i.replace(/^,/,"")}return r}(s);if(this.fontFaces){var l=function(e,t,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},kt,n.genericFontFamilies||{}),s=null,a=null,o=0;o<t.length;++o)if(i[(s=Tt(t[o])).family]&&(s.family=i[s.family]),e.hasOwnProperty(s.family)){a=e[s.family];break}if(!(a=a||e[r]))throw new Error("Could not find a font-family for the rule '"+Rt(s)+"' and default family '"+r+"'.");if(a=function(e,t){if(t[e])return t[e];var n=Nt[e],r=n<=Nt.normal?-1:1,i=It(t,Et,n,r);if(!i)throw new Error("Could not find a matching font-stretch value for "+e);return i}(s.stretch,a),a=function(e,t){if(t[e])return t[e];for(var n=At[e],r=0;r<n.length;++r)if(t[n[r]])return t[n[r]];throw new Error("Could not find a matching font-style for "+e)}(s.style,a),!(a=function(e,t){if(t[e])return t[e];if(400===e&&t[500])return t[500];if(500===e&&t[400])return t[400];var n=_t[e],r=It(t,Ct,n,e<400?-1:1);if(!r)throw new Error("Could not find a matching font-weight for value "+e);return r}(s.weight,a)))throw new Error("Failed to resolve a font for the rule '"+Rt(s)+"'.");return a}(p(this.pdf,this.fontFaces),o.map(function(e){return{family:e,stretch:"normal",weight:r,style:n}}));this.pdf.setFont(l.ref.name,l.ref.style)}else{var c="";("bold"===r||parseInt(r,10)>=700||"bold"===n)&&(c="bold"),"italic"===n&&(c+="italic"),0===c.length&&(c="normal");for(var u="",d={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},h=0;h<o.length;h++){if(void 0!==this.pdf.internal.getFont(o[h],c,{noFallback:!0,disableWarning:!0})){u=o[h];break}if("bolditalic"===c&&void 0!==this.pdf.internal.getFont(o[h],"bold",{noFallback:!0,disableWarning:!0}))u=o[h],c="bold";else if(void 0!==this.pdf.internal.getFont(o[h],"normal",{noFallback:!0,disableWarning:!0})){u=o[h],c="normal";break}}if(""===u)for(var f=0;f<o.length;f++)if(d[o[f]]){u=d[o[f]];break}u=""===u?"Times":u,this.pdf.setFont(u,c)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(e){this.ctx.globalCompositeOperation=e}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(e){this.ctx.globalAlpha=e}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(e){this.ctx.lineDashOffset=e,j.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(e){this.ctx.lineDash=e,j.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(e){this.ctx.ignoreClearRect=Boolean(e)}})};h.prototype.setLineDash=function(e){this.lineDash=e},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){x.call(this,"fill",!1)},h.prototype.stroke=function(){x.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(e,t){if(isNaN(e)||isNaN(t))throw ne.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var n=this.ctx.transform.applyToPoint(new o(e,t));this.path.push({type:"mt",x:n.x,y:n.y}),this.ctx.lastPoint=new o(e,t)},h.prototype.closePath=function(){var e=new o(0,0),t=0;for(t=this.path.length-1;-1!==t;t--)if("begin"===this.path[t].type&&"object"===(0,r.A)(this.path[t+1])&&"number"==typeof this.path[t+1].x){e=new o(this.path[t+1].x,this.path[t+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(e.x,e.y)},h.prototype.lineTo=function(e,t){if(isNaN(e)||isNaN(t))throw ne.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var n=this.ctx.transform.applyToPoint(new o(e,t));this.path.push({type:"lt",x:n.x,y:n.y}),this.ctx.lastPoint=new o(n.x,n.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),x.call(this,null,!0)},h.prototype.quadraticCurveTo=function(e,t,n,r){if(isNaN(n)||isNaN(r)||isNaN(e)||isNaN(t))throw ne.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var i=this.ctx.transform.applyToPoint(new o(n,r)),s=this.ctx.transform.applyToPoint(new o(e,t));this.path.push({type:"qct",x1:s.x,y1:s.y,x:i.x,y:i.y}),this.ctx.lastPoint=new o(i.x,i.y)},h.prototype.bezierCurveTo=function(e,t,n,r,i,s){if(isNaN(i)||isNaN(s)||isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw ne.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var a=this.ctx.transform.applyToPoint(new o(i,s)),l=this.ctx.transform.applyToPoint(new o(e,t)),c=this.ctx.transform.applyToPoint(new o(n,r));this.path.push({type:"bct",x1:l.x,y1:l.y,x2:c.x,y2:c.y,x:a.x,y:a.y}),this.ctx.lastPoint=new o(a.x,a.y)},h.prototype.arc=function(e,t,n,r,i,s){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(i))throw ne.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(s=Boolean(s),!this.ctx.transform.isIdentity){var a=this.ctx.transform.applyToPoint(new o(e,t));e=a.x,t=a.y;var l=this.ctx.transform.applyToPoint(new o(0,n)),c=this.ctx.transform.applyToPoint(new o(0,0));n=Math.sqrt(Math.pow(l.x-c.x,2)+Math.pow(l.y-c.y,2))}Math.abs(i-r)>=2*Math.PI&&(r=0,i=2*Math.PI),this.path.push({type:"arc",x:e,y:t,radius:n,startAngle:r,endAngle:i,counterclockwise:s})},h.prototype.arcTo=function(e,t,n,r,i){throw new Error("arcTo not implemented.")},h.prototype.rect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw ne.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(e,t),this.lineTo(e+n,t),this.lineTo(e+n,t+r),this.lineTo(e,t+r),this.lineTo(e,t),this.lineTo(e+n,t),this.lineTo(e,t)},h.prototype.fillRect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw ne.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var i={};"butt"!==this.lineCap&&(i.lineCap=this.lineCap,this.lineCap="butt"),"miter"!==this.lineJoin&&(i.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(e,t,n,r),this.fill(),i.hasOwnProperty("lineCap")&&(this.lineCap=i.lineCap),i.hasOwnProperty("lineJoin")&&(this.lineJoin=i.lineJoin)}},h.prototype.strokeRect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw ne.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");m.call(this)||(this.beginPath(),this.rect(e,t,n,r),this.stroke())},h.prototype.clearRect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw ne.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(e,t,n,r))},h.prototype.save=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("q");if(this.pdf.setPage(t),e){this.ctx.fontSize=this.pdf.internal.getFontSize();var r=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=r}},h.prototype.restore=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("Q");this.pdf.setPage(t),e&&0!==this.ctxStack.length&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var f=function(e){var t,n,r,i;if(!0===e.isCanvasGradient&&(e=e.getColor()),!e)return{r:0,g:0,b:0,a:0,style:e};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(e))t=0,n=0,r=0,i=0;else{var s=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(e);if(null!==s)t=parseInt(s[1]),n=parseInt(s[2]),r=parseInt(s[3]),i=1;else if(null!==(s=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(e)))t=parseInt(s[1]),n=parseInt(s[2]),r=parseInt(s[3]),i=parseFloat(s[4]);else{if(i=1,"string"==typeof e&&"#"!==e.charAt(0)){var a=new ce(e);e=a.ok?a.toHex():"#000000"}4===e.length?(t=e.substring(1,2),t+=t,n=e.substring(2,3),n+=n,r=e.substring(3,4),r+=r):(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7)),t=parseInt(t,16),n=parseInt(n,16),r=parseInt(r,16)}}return{r:t,g:n,b:r,a:i,style:e}},p=function(){return this.ctx.isFillTransparent||0==this.globalAlpha},m=function(){return Boolean(this.ctx.isStrokeTransparent||0==this.globalAlpha)};h.prototype.fillText=function(e,t,n,r){if(isNaN(t)||isNaN(n)||"string"!=typeof e)throw ne.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(r=isNaN(r)?void 0:r,!p.call(this)){var i=L(this.ctx.transform.rotation),s=this.ctx.transform.scaleX;I.call(this,{text:e,x:t,y:n,scale:s,angle:i,align:this.textAlign,maxWidth:r})}},h.prototype.strokeText=function(e,t,n,r){if(isNaN(t)||isNaN(n)||"string"!=typeof e)throw ne.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!m.call(this)){r=isNaN(r)?void 0:r;var i=L(this.ctx.transform.rotation),s=this.ctx.transform.scaleX;I.call(this,{text:e,x:t,y:n,scale:s,renderingMode:"stroke",angle:i,align:this.textAlign,maxWidth:r})}},h.prototype.measureText=function(e){if("string"!=typeof e)throw ne.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var t=this.pdf,n=this.pdf.internal.scaleFactor,r=t.internal.getFontSize(),i=t.getStringUnitWidth(e)*r/t.internal.scaleFactor;return new function(e){var t=(e=e||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return t}}),this}({width:i*=Math.round(96*n/72*1e4)/1e4})},h.prototype.scale=function(e,t){if(isNaN(e)||isNaN(t))throw ne.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var n=new c(e,0,0,t,0,0);this.ctx.transform=this.ctx.transform.multiply(n)},h.prototype.rotate=function(e){if(isNaN(e))throw ne.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var t=new c(Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),0,0);this.ctx.transform=this.ctx.transform.multiply(t)},h.prototype.translate=function(e,t){if(isNaN(e)||isNaN(t))throw ne.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var n=new c(1,0,0,1,e,t);this.ctx.transform=this.ctx.transform.multiply(n)},h.prototype.transform=function(e,t,n,r,i,s){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(i)||isNaN(s))throw ne.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var a=new c(e,t,n,r,i,s);this.ctx.transform=this.ctx.transform.multiply(a)},h.prototype.setTransform=function(e,t,n,r,i,s){e=isNaN(e)?1:e,t=isNaN(t)?0:t,n=isNaN(n)?0:n,r=isNaN(r)?1:r,i=isNaN(i)?0:i,s=isNaN(s)?0:s,this.ctx.transform=new c(e,t,n,r,i,s)};var g=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(e,t,n,r,i,s,a,o,u){var d=this.pdf.getImageProperties(e),h=1,f=1,p=1,m=1;void 0!==r&&void 0!==o&&(p=o/r,m=u/i,h=d.width/r*o/r,f=d.height/i*u/i),void 0===s&&(s=t,a=n,t=0,n=0),void 0!==r&&void 0===o&&(o=r,u=i),void 0===r&&void 0===o&&(o=d.width,u=d.height);for(var v,x=this.ctx.transform.decompose(),A=L(x.rotate.shx),E=new c,N=(E=(E=(E=E.multiply(x.translate)).multiply(x.skew)).multiply(x.scale)).applyToRectangle(new l(s-t*p,a-n*m,r*h,i*f)),C=y.call(this,N),_=[],T=0;T<C.length;T+=1)-1===_.indexOf(C[T])&&_.push(C[T]);if(b(_),this.autoPaging)for(var I=_[0],k=_[_.length-1],P=I;P<k+1;P++){this.pdf.setPage(P);var R=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],D=1===P?this.posY+this.margin[0]:this.margin[0],O=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],M=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],F=1===P?0:O+(P-2)*M;if(0!==this.ctx.clip_path.length){var j=this.path;v=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(v,this.posX+this.margin[3],-F+D+this.ctx.prevPageLastElemOffset),S.call(this,"fill",!0),this.path=j}var B=JSON.parse(JSON.stringify(N));B=w([B],this.posX+this.margin[3],-F+D+this.ctx.prevPageLastElemOffset)[0];var U=(P>I||P<k)&&g.call(this);U&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],R,M,null).clip().discardPath()),this.pdf.addImage(e,"JPEG",B.x,B.y,B.w,B.h,null,null,A),U&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(e,"JPEG",N.x,N.y,N.w,N.h,null,null,A)};var y=function(e,t,n){var r=[];t=t||this.pdf.internal.pageSize.width,n=n||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var i=this.posY+this.ctx.prevPageLastElemOffset;switch(e.type){default:case"mt":case"lt":r.push(Math.floor((e.y+i)/n)+1);break;case"arc":r.push(Math.floor((e.y+i-e.radius)/n)+1),r.push(Math.floor((e.y+i+e.radius)/n)+1);break;case"qct":var s=M(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x,e.y);r.push(Math.floor((s.y+i)/n)+1),r.push(Math.floor((s.y+s.h+i)/n)+1);break;case"bct":var a=F(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x2,e.y2,e.x,e.y);r.push(Math.floor((a.y+i)/n)+1),r.push(Math.floor((a.y+a.h+i)/n)+1);break;case"rect":r.push(Math.floor((e.y+i)/n)+1),r.push(Math.floor((e.y+e.h+i)/n)+1)}for(var o=0;o<r.length;o+=1)for(;this.pdf.internal.getNumberOfPages()<r[o];)v.call(this);return r},v=function(){var e=this.fillStyle,t=this.strokeStyle,n=this.font,r=this.lineCap,i=this.lineWidth,s=this.lineJoin;this.pdf.addPage(),this.fillStyle=e,this.strokeStyle=t,this.font=n,this.lineCap=r,this.lineWidth=i,this.lineJoin=s},w=function(e,t,n){for(var r=0;r<e.length;r++)switch(e[r].type){case"bct":e[r].x2+=t,e[r].y2+=n;case"qct":e[r].x1+=t,e[r].y1+=n;default:e[r].x+=t,e[r].y+=n}return e},b=function(e){return e.sort(function(e,t){return e-t})},x=function(e,t){for(var n,r,i=this.fillStyle,s=this.strokeStyle,a=this.lineCap,o=this.lineWidth,l=Math.abs(o*this.ctx.transform.scaleX),c=this.lineJoin,u=JSON.parse(JSON.stringify(this.path)),d=JSON.parse(JSON.stringify(this.path)),h=[],f=0;f<d.length;f++)if(void 0!==d[f].x)for(var p=y.call(this,d[f]),m=0;m<p.length;m+=1)-1===h.indexOf(p[m])&&h.push(p[m]);for(var x=0;x<h.length;x++)for(;this.pdf.internal.getNumberOfPages()<h[x];)v.call(this);if(b(h),this.autoPaging)for(var A=h[0],E=h[h.length-1],N=A;N<E+1;N++){this.pdf.setPage(N),this.fillStyle=i,this.strokeStyle=s,this.lineCap=a,this.lineWidth=l,this.lineJoin=c;var C=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],_=1===N?this.posY+this.margin[0]:this.margin[0],T=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],I=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],k=1===N?0:T+(N-2)*I;if(0!==this.ctx.clip_path.length){var P=this.path;n=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(n,this.posX+this.margin[3],-k+_+this.ctx.prevPageLastElemOffset),S.call(this,e,!0),this.path=P}if(r=JSON.parse(JSON.stringify(u)),this.path=w(r,this.posX+this.margin[3],-k+_+this.ctx.prevPageLastElemOffset),!1===t||0===N){var R=(N>A||N<E)&&g.call(this);R&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],C,I,null).clip().discardPath()),S.call(this,e,t),R&&this.pdf.restoreGraphicsState()}this.lineWidth=o}else this.lineWidth=l,S.call(this,e,t),this.lineWidth=o;this.path=u},S=function(e,t){if(("stroke"!==e||t||!m.call(this))&&("stroke"===e||t||!p.call(this))){for(var n,r,i=[],s=this.path,a=0;a<s.length;a++){var o=s[a];switch(o.type){case"begin":i.push({begin:!0});break;case"close":i.push({close:!0});break;case"mt":i.push({start:o,deltas:[],abs:[]});break;case"lt":var l=i.length;if(s[a-1]&&!isNaN(s[a-1].x)&&(n=[o.x-s[a-1].x,o.y-s[a-1].y],l>0))for(;l>=0;l--)if(!0!==i[l-1].close&&!0!==i[l-1].begin){i[l-1].deltas.push(n),i[l-1].abs.push(o);break}break;case"bct":n=[o.x1-s[a-1].x,o.y1-s[a-1].y,o.x2-s[a-1].x,o.y2-s[a-1].y,o.x-s[a-1].x,o.y-s[a-1].y],i[i.length-1].deltas.push(n);break;case"qct":var c=s[a-1].x+2/3*(o.x1-s[a-1].x),u=s[a-1].y+2/3*(o.y1-s[a-1].y),d=o.x+2/3*(o.x1-o.x),h=o.y+2/3*(o.y1-o.y),f=o.x,g=o.y;n=[c-s[a-1].x,u-s[a-1].y,d-s[a-1].x,h-s[a-1].y,f-s[a-1].x,g-s[a-1].y],i[i.length-1].deltas.push(n);break;case"arc":i.push({deltas:[],abs:[],arc:!0}),Array.isArray(i[i.length-1].abs)&&i[i.length-1].abs.push(o)}}r=t?null:"stroke"===e?"stroke":"fill";for(var y=!1,v=0;v<i.length;v++)if(i[v].arc)for(var w=i[v].abs,b=0;b<w.length;b++){var x=w[b];"arc"===x.type?N.call(this,x.x,x.y,x.radius,x.startAngle,x.endAngle,x.counterclockwise,void 0,t,!y):k.call(this,x.x,x.y),y=!0}else if(!0===i[v].close)this.pdf.internal.out("h"),y=!1;else if(!0!==i[v].begin){var S=i[v].start.x,A=i[v].start.y;P.call(this,i[v].deltas,S,A),y=!0}r&&C.call(this,r),t&&_.call(this)}},A=function(e){var t=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,n=t*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return e-n;case"top":return e+t-n;case"hanging":return e+t-2*n;case"middle":return e+t/2-n;default:return e}},E=function(e){return e+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var e=function(){};return e.colorStops=[],e.addColorStop=function(e,t){this.colorStops.push([e,t])},e.getColor=function(){return 0===this.colorStops.length?"#000000":this.colorStops[0][1]},e.isCanvasGradient=!0,e},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var N=function(e,t,n,r,i,s,a,o,l){for(var c=D.call(this,n,r,i,s),u=0;u<c.length;u++){var d=c[u];0===u&&(l?T.call(this,d.x1+e,d.y1+t):k.call(this,d.x1+e,d.y1+t)),R.call(this,e,t,d.x2,d.y2,d.x3,d.y3,d.x4,d.y4)}o?_.call(this):C.call(this,a)},C=function(e){switch(e){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},_=function(){this.pdf.clip(),this.pdf.discardPath()},T=function(e,t){this.pdf.internal.out(n(e)+" "+i(t)+" m")},I=function(e){var t;switch(e.align){case"right":case"end":t="right";break;case"center":t="center";break;default:t="left"}var n=this.pdf.getTextDimensions(e.text),r=A.call(this,e.y),i=E.call(this,r)-n.h,s=this.ctx.transform.applyToPoint(new o(e.x,r)),a=this.ctx.transform.decompose(),u=new c;u=(u=(u=u.multiply(a.translate)).multiply(a.skew)).multiply(a.scale);for(var d,h,f,p=this.ctx.transform.applyToRectangle(new l(e.x,r,n.w,n.h)),m=u.applyToRectangle(new l(e.x,i,n.w,n.h)),v=y.call(this,m),x=[],N=0;N<v.length;N+=1)-1===x.indexOf(v[N])&&x.push(v[N]);if(b(x),this.autoPaging)for(var C=x[0],_=x[x.length-1],T=C;T<_+1;T++){this.pdf.setPage(T);var I=1===T?this.posY+this.margin[0]:this.margin[0],k=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],P=this.pdf.internal.pageSize.height-this.margin[2],R=P-this.margin[0],D=this.pdf.internal.pageSize.width-this.margin[1],O=D-this.margin[3],L=1===T?0:k+(T-2)*R;if(0!==this.ctx.clip_path.length){var M=this.path;d=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(d,this.posX+this.margin[3],-1*L+I),S.call(this,"fill",!0),this.path=M}var F=w([JSON.parse(JSON.stringify(m))],this.posX+this.margin[3],-L+I+this.ctx.prevPageLastElemOffset)[0];e.scale>=.01&&(h=this.pdf.internal.getFontSize(),this.pdf.setFontSize(h*e.scale),f=this.lineWidth,this.lineWidth=f*e.scale);var j="text"!==this.autoPaging;if(j||F.y+F.h<=P){if(j||F.y>=I&&F.x<=D){var B=j?e.text:this.pdf.splitTextToSize(e.text,e.maxWidth||D-F.x)[0],U=w([JSON.parse(JSON.stringify(p))],this.posX+this.margin[3],-L+I+this.ctx.prevPageLastElemOffset)[0],z=j&&(T>C||T<_)&&g.call(this);z&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],O,R,null).clip().discardPath()),this.pdf.text(B,U.x,U.y,{angle:e.angle,align:t,renderingMode:e.renderingMode}),z&&this.pdf.restoreGraphicsState()}}else F.y<P&&(this.ctx.prevPageLastElemOffset+=P-F.y);e.scale>=.01&&(this.pdf.setFontSize(h),this.lineWidth=f)}else e.scale>=.01&&(h=this.pdf.internal.getFontSize(),this.pdf.setFontSize(h*e.scale),f=this.lineWidth,this.lineWidth=f*e.scale),this.pdf.text(e.text,s.x+this.posX,s.y+this.posY,{angle:e.angle,align:t,renderingMode:e.renderingMode,maxWidth:e.maxWidth}),e.scale>=.01&&(this.pdf.setFontSize(h),this.lineWidth=f)},k=function(e,t,r,s){r=r||0,s=s||0,this.pdf.internal.out(n(e+r)+" "+i(t+s)+" l")},P=function(e,t,n){return this.pdf.lines(e,t,n,null,null)},R=function(e,n,r,i,o,l,c,u){this.pdf.internal.out([t(s(r+e)),t(a(i+n)),t(s(o+e)),t(a(l+n)),t(s(c+e)),t(a(u+n)),"c"].join(" "))},D=function(e,t,n,r){for(var i=2*Math.PI,s=Math.PI/2;t>n;)t-=i;var a=Math.abs(n-t);a<i&&r&&(a=i-a);for(var o=[],l=r?-1:1,c=t;a>1e-5;){var u=c+l*Math.min(a,s);o.push(O.call(this,e,c,u)),a-=Math.abs(u-c),c=u}return o},O=function(e,t,n){var r=(n-t)/2,i=e*Math.cos(r),s=e*Math.sin(r),a=i,o=-s,l=a*a+o*o,c=l+a*i+o*s,u=4/3*(Math.sqrt(2*l*c)-c)/(a*s-o*i),d=a-u*o,h=o+u*a,f=d,p=-h,m=r+t,g=Math.cos(m),y=Math.sin(m);return{x1:e*Math.cos(t),y1:e*Math.sin(t),x2:d*g-h*y,y2:d*y+h*g,x3:f*g-p*y,y3:f*y+p*g,x4:e*Math.cos(n),y4:e*Math.sin(n)}},L=function(e){return 180*e/Math.PI},M=function(e,t,n,r,i,s){var a=e+.5*(n-e),o=t+.5*(r-t),c=i+.5*(n-i),u=s+.5*(r-s),d=Math.min(e,i,a,c),h=Math.max(e,i,a,c),f=Math.min(t,s,o,u),p=Math.max(t,s,o,u);return new l(d,f,h-d,p-f)},F=function(e,t,n,r,i,s,a,o){var c,u,d,h,f,p,m,g,y,v,w,b,x,S,A=n-e,E=r-t,N=i-n,C=s-r,_=a-i,T=o-s;for(u=0;u<41;u++)y=(m=(d=e+(c=u/40)*A)+c*((f=n+c*N)-d))+c*(f+c*(i+c*_-f)-m),v=(g=(h=t+c*E)+c*((p=r+c*C)-h))+c*(p+c*(s+c*T-p)-g),0==u?(w=y,b=v,x=y,S=v):(w=Math.min(w,y),b=Math.min(b,v),x=Math.max(x,y),S=Math.max(S,v));return new l(Math.round(w),Math.round(b),Math.round(x-w),Math.round(S-b))},j=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var e,t,n=(e=this.ctx.lineDash,t=this.ctx.lineDashOffset,JSON.stringify({lineDash:e,lineDashOffset:t}));this.prevLineDash!==n&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=n)}}}(De.API),function(e){var t=function(e){var t,n,r,i,s,a,o,l,c,u;for(/[^\x00-\xFF]/.test(e),n=[],r=0,i=(e+=t="\0\0\0\0".slice(e.length%4||4)).length;i>r;r+=4)0!==(s=(e.charCodeAt(r)<<24)+(e.charCodeAt(r+1)<<16)+(e.charCodeAt(r+2)<<8)+e.charCodeAt(r+3))?(a=(s=((s=((s=((s=(s-(u=s%85))/85)-(c=s%85))/85)-(l=s%85))/85)-(o=s%85))/85)%85,n.push(a+33,o+33,l+33,c+33,u+33)):n.push(122);return function(e,t){for(var n=t;n>0;n--)e.pop()}(n,t.length),String.fromCharCode.apply(String,n)+"~>"},n=function(e){var t,n,r,i,s,a=String,o="length",l=255,c="charCodeAt",u="slice",d="replace";for(e[u](-2),e=e[u](0,-2)[d](/\s/g,"")[d]("z","!!!!!"),r=[],i=0,s=(e+=t="uuuuu"[u](e[o]%5||5))[o];s>i;i+=5)n=52200625*(e[c](i)-33)+614125*(e[c](i+1)-33)+7225*(e[c](i+2)-33)+85*(e[c](i+3)-33)+(e[c](i+4)-33),r.push(l&n>>24,l&n>>16,l&n>>8,l&n);return function(e,t){for(var n=t;n>0;n--)e.pop()}(r,t[o]),a.fromCharCode.apply(a,r)},r=function(e){var t=new RegExp(/^([0-9A-Fa-f]{2})+$/);if(-1!==(e=e.replace(/\s/g,"")).indexOf(">")&&(e=e.substr(0,e.indexOf(">"))),e.length%2&&(e+="0"),!1===t.test(e))return"";for(var n="",r=0;r<e.length;r+=2)n+=String.fromCharCode("0x"+(e[r]+e[r+1]));return n},i=function(e){for(var t=new Uint8Array(e.length),n=e.length;n--;)t[n]=e.charCodeAt(n);return(t=J(t)).reduce(function(e,t){return e+String.fromCharCode(t)},"")};e.processDataByFilters=function(e,s){var a=0,o=e||"",l=[];for("string"==typeof(s=s||[])&&(s=[s]),a=0;a<s.length;a+=1)switch(s[a]){case"ASCII85Decode":case"/ASCII85Decode":o=n(o),l.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":o=t(o),l.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":o=r(o),l.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":o=o.split("").map(function(e){return("0"+e.charCodeAt().toString(16)).slice(-2)}).join("")+">",l.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":o=i(o),l.push("/FlateDecode");break;default:throw new Error('The filter: "'+s[a]+'" is not implemented')}return{data:o,reverseChain:l.reverse().join(" ")}}}(De.API),(Bt=De.API).loadFile=function(e,t,n){return function(e,t,n){t=!1!==t,n="function"==typeof n?n:function(){};var r=void 0;try{r=function(e,t,n){var r=new XMLHttpRequest,i=0,s=function(e){var t=e.length,n=[],r=String.fromCharCode;for(i=0;i<t;i+=1)n.push(r(255&e.charCodeAt(i)));return n.join("")};if(r.open("GET",e,!t),r.overrideMimeType("text/plain; charset=x-user-defined"),!1===t&&(r.onload=function(){200===r.status?n(s(this.responseText)):n(void 0)}),r.send(null),t&&200===r.status)return s(r.responseText)}(e,t,n)}catch(e){}return r}(e,t,n)},Bt.loadImageFile=Bt.loadFile,function(e){function t(){return(ee.html2canvas?Promise.resolve(ee.html2canvas):n.e(239).then(n.t.bind(n,5239,23))).catch(function(e){return Promise.reject(new Error("Could not load html2canvas: "+e))}).then(function(e){return e.default?e.default:e})}function i(){return(ee.DOMPurify?Promise.resolve(ee.DOMPurify):n.e(213).then(n.t.bind(n,6213,23))).catch(function(e){return Promise.reject(new Error("Could not load dompurify: "+e))}).then(function(e){return e.default?e.default:e})}var s=function(e){var t=(0,r.A)(e);return"undefined"===t?"undefined":"string"===t||e instanceof String?"string":"number"===t||e instanceof Number?"number":"function"===t||e instanceof Function?"function":e&&e.constructor===Array?"array":e&&1===e.nodeType?"element":"object"===t?"object":"unknown"},a=function(e,t){var n=document.createElement(e);for(var r in t.className&&(n.className=t.className),t.innerHTML&&t.dompurify&&(n.innerHTML=t.dompurify.sanitize(t.innerHTML)),t.style)n.style[r]=t.style[r];return n},o=function e(t){var n=Object.assign(e.convert(Promise.resolve()),JSON.parse(JSON.stringify(e.template))),r=e.convert(Promise.resolve(),n);return(r=r.setProgress(1,e,1,[e])).set(t)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(e,t){return e.__proto__=t||o.prototype,e},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(e,t){return this.then(function(){switch(t=t||function(e){switch(s(e)){case"string":return"string";case"element":return"canvas"===e.nodeName.toLowerCase()?"canvas":"element";default:return"unknown"}}(e)){case"string":return this.then(i).then(function(t){return this.set({src:a("div",{innerHTML:e,dompurify:t})})});case"element":return this.set({src:e});case"canvas":return this.set({canvas:e});case"img":return this.set({img:e});default:return this.error("Unknown source type.")}})},o.prototype.to=function(e){switch(e){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var e={position:"relative",display:"inline-block",width:("number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},t=function e(t,n){for(var r=3===t.nodeType?document.createTextNode(t.nodeValue):t.cloneNode(!1),i=t.firstChild;i;i=i.nextSibling)!0!==n&&1===i.nodeType&&"SCRIPT"===i.nodeName||r.appendChild(e(i,n));return 1===t.nodeType&&("CANVAS"===t.nodeName?(r.width=t.width,r.height=t.height,r.getContext("2d").drawImage(t,0,0)):"TEXTAREA"!==t.nodeName&&"SELECT"!==t.nodeName||(r.value=t.value),r.addEventListener("load",function(){r.scrollTop=t.scrollTop,r.scrollLeft=t.scrollLeft},!0)),r}(this.prop.src,this.opt.html2canvas.javascriptEnabled);"BODY"===t.tagName&&(e.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:e}),this.prop.container.appendChild(t),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then(function(e){var t=Object.assign({},this.opt.html2canvas);return delete t.onrendered,e(this.prop.container,t)}).then(function(e){(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then(function(e){var t=this.opt.jsPDF,n=this.opt.fontFaces,r="number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,i=Object.assign({async:!0,allowTaint:!0,scale:r,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete i.onrendered,t.context2d.autoPaging=void 0===this.opt.autoPaging||this.opt.autoPaging,t.context2d.posX=this.opt.x,t.context2d.posY=this.opt.y,t.context2d.margin=this.opt.margin,t.context2d.fontFaces=n,n)for(var s=0;s<n.length;++s){var a=n[s],o=a.src.find(function(e){return"truetype"===e.format});o&&t.addFont(o.url,a.ref.name,a.ref.style)}return i.windowHeight=i.windowHeight||0,i.windowHeight=0==i.windowHeight?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):i.windowHeight,t.context2d.save(!0),e(this.prop.container,i)}).then(function(e){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var e=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=e})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(e,t,n){return"img"===(n=n||"pdf").toLowerCase()||"image"===n.toLowerCase()?this.outputImg(e,t):this.outputPdf(e,t)},o.prototype.outputPdf=function(e,t){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(e,t)})},o.prototype.outputImg=function(e){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(e){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+e+'" is not supported.'}})},o.prototype.save=function(e){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(e?{filename:e}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(e){if("object"!==s(e))return this;var t=Object.keys(e||{}).map(function(t){if(t in o.template.prop)return function(){this.prop[t]=e[t]};switch(t){case"margin":return this.setMargin.bind(this,e.margin);case"jsPDF":return function(){return this.opt.jsPDF=e.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,e.pageSize);default:return function(){this.opt[t]=e[t]}}},this);return this.then(function(){return this.thenList(t)})},o.prototype.get=function(e,t){return this.then(function(){var n=e in o.template.prop?this.prop[e]:this.opt[e];return t?t(n):n})},o.prototype.setMargin=function(e){return this.then(function(){switch(s(e)){case"number":e=[e,e,e,e];case"array":if(2===e.length&&(e=[e[0],e[1],e[0],e[1]]),4===e.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=e}).then(this.setPageSize)},o.prototype.setPageSize=function(e){function t(e,t){return Math.floor(e*t/72*96)}return this.then(function(){(e=e||De.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(e.inner={width:e.width-this.opt.margin[1]-this.opt.margin[3],height:e.height-this.opt.margin[0]-this.opt.margin[2]},e.inner.px={width:t(e.inner.width,e.k),height:t(e.inner.height,e.k)},e.inner.ratio=e.inner.height/e.inner.width),this.prop.pageSize=e})},o.prototype.setProgress=function(e,t,n,r){return null!=e&&(this.progress.val=e),null!=t&&(this.progress.state=t),null!=n&&(this.progress.n=n),null!=r&&(this.progress.stack=r),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(e,t,n,r){return this.setProgress(e?this.progress.val+e:null,t||null,n?this.progress.n+n:null,r?this.progress.stack.concat(r):null)},o.prototype.then=function(e,t){var n=this;return this.thenCore(e,t,function(e,t){return n.updateProgress(null,null,1,[e]),Promise.prototype.then.call(this,function(t){return n.updateProgress(null,e),t}).then(e,t).then(function(e){return n.updateProgress(1),e})})},o.prototype.thenCore=function(e,t,n){n=n||Promise.prototype.then,e&&(e=e.bind(this)),t&&(t=t.bind(this));var r=-1!==Promise.toString().indexOf("[native code]")&&"Promise"===Promise.name?this:o.convert(Object.assign({},this),Promise.prototype),i=n.call(r,e,t);return o.convert(i,this.__proto__)},o.prototype.thenExternal=function(e,t){return Promise.prototype.then.call(this,e,t)},o.prototype.thenList=function(e){var t=this;return e.forEach(function(e){t=t.thenCore(e)}),t},o.prototype.catch=function(e){e&&(e=e.bind(this));var t=Promise.prototype.catch.call(this,e);return o.convert(t,this)},o.prototype.catchExternal=function(e){return Promise.prototype.catch.call(this,e)},o.prototype.error=function(e){return this.then(function(){throw new Error(e)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,De.getPageSize=function(e,t,n){if("object"===(0,r.A)(e)){var i=e;e=i.orientation,t=i.unit||t,n=i.format||n}t=t||"mm",n=n||"a4",e=(""+(e||"P")).toLowerCase();var s,a=(""+n).toLowerCase(),o={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(t){case"pt":s=1;break;case"mm":s=72/25.4;break;case"cm":s=72/2.54;break;case"in":s=72;break;case"px":s=.75;break;case"pc":case"em":s=12;break;case"ex":s=6;break;default:throw"Invalid unit: "+t}var l,c=0,u=0;if(o.hasOwnProperty(a))c=o[a][1]/s,u=o[a][0]/s;else try{c=n[1],u=n[0]}catch(Bt){throw new Error("Invalid format: "+n)}if("p"===e||"portrait"===e)e="p",u>c&&(l=u,u=c,c=l);else{if("l"!==e&&"landscape"!==e)throw"Invalid orientation: "+e;e="l",c>u&&(l=u,u=c,c=l)}return{width:u,height:c,unit:t,k:s,orientation:e}},e.html=function(e,t){(t=t||{}).callback=t.callback||function(){},t.html2canvas=t.html2canvas||{},t.html2canvas.canvas=t.html2canvas.canvas||this.canvas,t.jsPDF=t.jsPDF||this,t.fontFaces=t.fontFaces?t.fontFaces.map(Tt):null;var n=new o(t);return t.worker?n:n.from(e).doCallback()}}(De.API),De.API.addJS=function(e){return jt=e,this.internal.events.subscribe("postPutResources",function(){Mt=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Mt+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Ft=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+jt+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){void 0!==Mt&&void 0!==Ft&&this.internal.out("/Names <</JavaScript "+Mt+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var e=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var r=e.outline.render().split(/\r\n/),i=0;i<r.length;i++){var s=r[i],a=n.exec(s);if(null!=a){var o=a[1];e.internal.newObjectDeferredBegin(o,!1)}e.internal.write(s)}if(this.outline.createNamedDestinations){var l=this.internal.pages.length,c=[];for(i=0;i<l;i++){var u=e.internal.newObject();c.push(u);var d=e.internal.getPageInfo(i+1);e.internal.write("<< /D["+d.objId+" 0 R /XYZ null null null]>> endobj")}var h=e.internal.newObject();for(e.internal.write("<< /Names [ "),i=0;i<c.length;i++)e.internal.write("(page_"+(i+1)+")"+c[i]+" 0 R");e.internal.write(" ] >>","endobj"),t=e.internal.newObject(),e.internal.write("<< /Dests "+h+" 0 R"),e.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(e,t,n){var r={title:t,options:n,children:[]};return null==e&&(e=this.root),e.children.push(r),r},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(t){t.id=e.internal.newObjectDeferred();for(var n=0;n<t.children.length;n++)this.genIds_r(t.children[n])},e.outline.renderRoot=function(e){this.objStart(e),this.line("/Type /Outlines"),e.children.length>0&&(this.line("/First "+this.makeRef(e.children[0])),this.line("/Last "+this.makeRef(e.children[e.children.length-1]))),this.line("/Count "+this.count_r({count:0},e)),this.objEnd()},e.outline.renderItems=function(t){for(var n=this.ctx.pdf.internal.getVerticalCoordinateString,r=0;r<t.children.length;r++){var i=t.children[r];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(t)),r>0&&this.line("/Prev "+this.makeRef(t.children[r-1])),r<t.children.length-1&&this.line("/Next "+this.makeRef(t.children[r+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var s=this.count=this.count_r({count:0},i);if(s>0&&this.line("/Count "+s),i.options&&i.options.pageNumber){var a=e.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+a.objId+" 0 R /XYZ 0 "+n(0)+" 0]")}this.objEnd()}for(var o=0;o<t.children.length;o++)this.renderItems(t.children[o])},e.outline.line=function(e){this.ctx.val+=e+"\r\n"},e.outline.makeRef=function(e){return e.id+" 0 R"},e.outline.makeString=function(t){return"("+e.internal.pdfEscape(t)+")"},e.outline.objStart=function(e){this.ctx.val+="\r\n"+e.id+" 0 obj\r\n<<\r\n"},e.outline.objEnd=function(){this.ctx.val+=">> \r\nendobj\r\n"},e.outline.count_r=function(e,t){for(var n=0;n<t.children.length;n++)e.count++,this.count_r(e,t.children[n]);return e.count}}])}(De.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(e,n,r,i,s,a){var o,l=this.decode.DCT_DECODE,c=null;if("string"==typeof e||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=s||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,(o=function(e){for(var n,r=256*e.charCodeAt(4)+e.charCodeAt(5),i=e.length,s={width:0,height:0,numcomponents:1},a=4;a<i;a+=2){if(a+=r,-1!==t.indexOf(e.charCodeAt(a+1))){n=256*e.charCodeAt(a+5)+e.charCodeAt(a+6),s={width:256*e.charCodeAt(a+7)+e.charCodeAt(a+8),height:n,numcomponents:e.charCodeAt(a+9)};break}r=256*e.charCodeAt(a+2)+e.charCodeAt(a+3)}return s}(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}c={data:e,width:o.width,height:o.height,colorSpace:a,bitsPerComponent:8,filter:l,index:n,alias:r}}return c}}(De.API);var zt,Vt,Ht,Wt,qt,Gt=function(){var e,t,n;function r(e){var t,n,r,i,s,a,o,l,c,u,d,h,f,p;for(this.data=e,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},a=null;;){switch(t=this.readUInt32(),c=function(){var e,t;for(t=[],e=0;e<4;++e)t.push(String.fromCharCode(this.data[this.pos++]));return t}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(t);break;case"fcTL":a&&this.animation.frames.push(a),this.pos+=4,a={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},s=this.readUInt16(),i=this.readUInt16()||100,a.delay=1e3*s/i,a.disposeOp=this.data[this.pos++],a.blendOp=this.data[this.pos++],a.data=[];break;case"IDAT":case"fdAT":for("fdAT"===c&&(this.pos+=4,t-=4),e=(null!=a?a.data:void 0)||this.imgData,h=0;0<=t?h<t:h>t;0<=t?++h:--h)e.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(r=this.palette.length/3,this.transparency.indexed=this.read(t),this.transparency.indexed.length>r)throw new Error("More transparent colors than palette size");if((u=r-this.transparency.indexed.length)>0)for(f=0;0<=u?f<u:f>u;0<=u?++f:--f)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(t)[0];break;case 2:this.transparency.rgb=this.read(t)}break;case"tEXt":o=(d=this.read(t)).indexOf(0),l=String.fromCharCode.apply(String,d.slice(0,o)),this.text[l]=String.fromCharCode.apply(String,d.slice(o+1));break;case"IEND":return a&&this.animation.frames.push(a),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(p=this.colorType)||6===p,n=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*n,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=t}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;0<=e?++t:--t)n.push(this.data[this.pos++]);return n},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(e){var t=this.pixelBitlength/8,n=new Uint8Array(this.width*this.height*t),r=0,i=this;if(null==e&&(e=this.imgData),0===e.length)return new Uint8Array(0);function s(s,a,o,l){var c,u,d,h,f,p,m,g,y,v,w,b,x,S,A,E,N,C,_,T,I,k=Math.ceil((i.width-s)/o),P=Math.ceil((i.height-a)/l),R=i.width==k&&i.height==P;for(S=t*k,b=R?n:new Uint8Array(S*P),p=e.length,x=0,u=0;x<P&&r<p;){switch(e[r++]){case 0:for(h=N=0;N<S;h=N+=1)b[u++]=e[r++];break;case 1:for(h=C=0;C<S;h=C+=1)c=e[r++],f=h<t?0:b[u-t],b[u++]=(c+f)%256;break;case 2:for(h=_=0;_<S;h=_+=1)c=e[r++],d=(h-h%t)/t,A=x&&b[(x-1)*S+d*t+h%t],b[u++]=(A+c)%256;break;case 3:for(h=T=0;T<S;h=T+=1)c=e[r++],d=(h-h%t)/t,f=h<t?0:b[u-t],A=x&&b[(x-1)*S+d*t+h%t],b[u++]=(c+Math.floor((f+A)/2))%256;break;case 4:for(h=I=0;I<S;h=I+=1)c=e[r++],d=(h-h%t)/t,f=h<t?0:b[u-t],0===x?A=E=0:(A=b[(x-1)*S+d*t+h%t],E=d&&b[(x-1)*S+(d-1)*t+h%t]),m=f+A-E,g=Math.abs(m-f),v=Math.abs(m-A),w=Math.abs(m-E),y=g<=v&&g<=w?f:v<=w?A:E,b[u++]=(c+y)%256;break;default:throw new Error("Invalid filter algorithm: "+e[r-1])}if(!R){var D=((a+x*l)*i.width+s)*t,O=x*S;for(h=0;h<k;h+=1){for(var L=0;L<t;L+=1)n[D++]=b[O++];D+=(o-1)*t}}x++}}return e=Z(e),1==i.interlaceMethod?(s(0,0,8,8),s(4,0,8,8),s(0,4,4,8),s(2,0,4,4),s(0,2,2,4),s(1,0,2,2),s(0,1,1,2)):s(0,0,1,1),n},r.prototype.decodePalette=function(){var e,t,n,r,i,s,a,o,l;for(n=this.palette,s=this.transparency.indexed||[],i=new Uint8Array((s.length||0)+n.length),r=0,e=0,t=a=0,o=n.length;a<o;t=a+=3)i[r++]=n[t],i[r++]=n[t+1],i[r++]=n[t+2],i[r++]=null!=(l=s[e++])?l:255;return i},r.prototype.copyToImageData=function(e,t){var n,r,i,s,a,o,l,c,u,d,h;if(r=this.colors,u=null,n=this.hasAlphaChannel,this.palette.length&&(u=null!=(h=this._decodedPalette)?h:this._decodedPalette=this.decodePalette(),r=4,n=!0),c=(i=e.data||e).length,a=u||t,s=o=0,1===r)for(;s<c;)l=u?4*t[s/4]:o,d=a[l++],i[s++]=d,i[s++]=d,i[s++]=d,i[s++]=n?a[l++]:255,o=l;else for(;s<c;)l=u?4*t[s/4]:o,i[s++]=a[l++],i[s++]=a[l++],i[s++]=a[l++],i[s++]=n?a[l++]:255,o=l},r.prototype.decode=function(){var e;return e=new Uint8Array(this.width*this.height*4),this.copyToImageData(e,this.decodePixels()),e};var i=function(){if("[object Window]"===Object.prototype.toString.call(ee)){try{t=ee.document.createElement("canvas"),n=t.getContext("2d")}catch(e){return!1}return!0}return!1};return i(),e=function(e){var r;if(!0===i())return n.width=e.width,n.height=e.height,n.clearRect(0,0,e.width,e.height),n.putImageData(e,0,0),(r=new Image).src=t.toDataURL(),r;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(t){var n,r,i,s,a,o,l,c;if(this.animation){for(c=[],r=a=0,o=(l=this.animation.frames).length;a<o;r=++a)n=l[r],i=t.createImageData(n.width,n.height),s=this.decodePixels(new Uint8Array(n.data)),this.copyToImageData(i,s),n.imageData=i,c.push(n.image=e(i));return c}},r.prototype.renderFrame=function(e,t){var n,r,i;return n=(r=this.animation.frames)[t],i=r[t-1],0===t&&e.clearRect(0,0,this.width,this.height),1===(null!=i?i.disposeOp:void 0)?e.clearRect(i.xOffset,i.yOffset,i.width,i.height):2===(null!=i?i.disposeOp:void 0)&&e.putImageData(i.imageData,i.xOffset,i.yOffset),0===n.blendOp&&e.clearRect(n.xOffset,n.yOffset,n.width,n.height),e.drawImage(n.image,n.xOffset,n.yOffset)},r.prototype.animate=function(e){var t,n,r,i,s,a,o=this;return n=0,a=this.animation,i=a.numFrames,r=a.frames,s=a.numPlays,(t=function(){var a,l;if(a=n++%i,l=r[a],o.renderFrame(e,a),i>1&&n/i<s)return o.animation._timeout=setTimeout(t,l.delay)})()},r.prototype.stopAnimation=function(){var e;return clearTimeout(null!=(e=this.animation)?e._timeout:void 0)},r.prototype.render=function(e){var t,n;return e._png&&e._png.stopAnimation(),e._png=this,e.width=this.width,e.height=this.height,t=e.getContext("2d"),this.animation?(this.decodeFrames(t),this.animate(t)):(n=t.createImageData(this.width,this.height),this.copyToImageData(n,this.decodePixels()),t.putImageData(n,0,0))},r}();function Kt(e){var t=0;if(71!==e[t++]||73!==e[t++]||70!==e[t++]||56!==e[t++]||56!=(e[t++]+1&253)||97!==e[t++])throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,r=e[t++]|e[t++]<<8,i=e[t++],s=i>>7,a=1<<1+(7&i);e[t++],e[t++];var o=null,l=null;s&&(o=t,l=a,t+=3*a);var c=!0,u=[],d=0,h=null,f=0,p=null;for(this.width=n,this.height=r;c&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(11!==e[t]||78==e[t+1]&&69==e[t+2]&&84==e[t+3]&&83==e[t+4]&&67==e[t+5]&&65==e[t+6]&&80==e[t+7]&&69==e[t+8]&&50==e[t+9]&&46==e[t+10]&&48==e[t+11]&&3==e[t+12]&&1==e[t+13]&&0==e[t+16])t+=14,p=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((_=e[t++])>=0))throw Error("Invalid block size");if(0===_)break;t+=_}break;case 249:if(4!==e[t++]||0!==e[t+4])throw new Error("Invalid graphics extension block.");var m=e[t++];d=e[t++]|e[t++]<<8,h=e[t++],0==(1&m)&&(h=null),f=m>>2&7,t++;break;case 254:for(;;){if(!((_=e[t++])>=0))throw Error("Invalid block size");if(0===_)break;t+=_}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var g=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,v=e[t++]|e[t++]<<8,w=e[t++]|e[t++]<<8,b=e[t++],x=b>>6&1,S=1<<1+(7&b),A=o,E=l,N=!1;b>>7&&(N=!0,A=t,E=S,t+=3*S);var C=t;for(t++;;){var _;if(!((_=e[t++])>=0))throw Error("Invalid block size");if(0===_)break;t+=_}u.push({x:g,y:y,width:v,height:w,has_local_palette:N,palette_offset:A,palette_size:E,data_offset:C,data_length:t-C,transparent_index:h,interlaced:!!x,delay:d,disposal:f});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return p},this.frameInfo=function(e){if(e<0||e>=u.length)throw new Error("Frame index out of range.");return u[e]},this.decodeAndBlitFrameBGRA=function(t,r){var i=this.frameInfo(t),s=i.width*i.height,a=new Uint8Array(s);Yt(e,i.data_offset,a,s);var o=i.palette_offset,l=i.transparent_index;null===l&&(l=256);var c=i.width,u=n-c,d=c,h=4*(i.y*n+i.x),f=4*((i.y+i.height)*n+i.x),p=h,m=4*u;!0===i.interlaced&&(m+=4*n*7);for(var g=8,y=0,v=a.length;y<v;++y){var w=a[y];if(0===d&&(d=c,(p+=m)>=f&&(m=4*u+4*n*(g-1),p=h+(c+u)*(g<<1),g>>=1)),w===l)p+=4;else{var b=e[o+3*w],x=e[o+3*w+1],S=e[o+3*w+2];r[p++]=S,r[p++]=x,r[p++]=b,r[p++]=255}--d}},this.decodeAndBlitFrameRGBA=function(t,r){var i=this.frameInfo(t),s=i.width*i.height,a=new Uint8Array(s);Yt(e,i.data_offset,a,s);var o=i.palette_offset,l=i.transparent_index;null===l&&(l=256);var c=i.width,u=n-c,d=c,h=4*(i.y*n+i.x),f=4*((i.y+i.height)*n+i.x),p=h,m=4*u;!0===i.interlaced&&(m+=4*n*7);for(var g=8,y=0,v=a.length;y<v;++y){var w=a[y];if(0===d&&(d=c,(p+=m)>=f&&(m=4*u+4*n*(g-1),p=h+(c+u)*(g<<1),g>>=1)),w===l)p+=4;else{var b=e[o+3*w],x=e[o+3*w+1],S=e[o+3*w+2];r[p++]=b,r[p++]=x,r[p++]=S,r[p++]=255}--d}}}function Yt(e,t,n,r){for(var i=e[t++],s=1<<i,a=s+1,o=a+1,l=i+1,c=(1<<l)-1,u=0,d=0,h=0,f=e[t++],p=new Int32Array(4096),m=null;;){for(;u<16&&0!==f;)d|=e[t++]<<u,u+=8,1===f?f=e[t++]:--f;if(u<l)break;var g=d&c;if(d>>=l,u-=l,g!==s){if(g===a)break;for(var y=g<o?g:m,v=0,w=y;w>s;)w=p[w]>>8,++v;var b=w;if(h+v+(y!==g?1:0)>r)return void ne.log("Warning, gif stream longer than expected.");n[h++]=b;var x=h+=v;for(y!==g&&(n[h++]=b),w=y;v--;)w=p[w],n[--x]=255&w,w>>=8;null!==m&&o<4096&&(p[o++]=m<<8|b,o>=c+1&&l<12&&(++l,c=c<<1|1)),m=g}else o=a+1,c=(1<<(l=i+1))-1,m=null}return h!==r&&ne.log("Warning, gif stream shorter than expected."),n}function Xt(e){var t,n,r,i,s,a=Math.floor,o=new Array(64),l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(65535),h=new Array(65535),f=new Array(64),p=new Array(64),m=[],g=0,y=7,v=new Array(64),w=new Array(64),b=new Array(64),x=new Array(256),S=new Array(2048),A=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],E=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],N=[0,1,2,3,4,5,6,7,8,9,10,11],C=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],_=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],T=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],k=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],P=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function R(e,t){for(var n=0,r=0,i=new Array,s=1;s<=16;s++){for(var a=1;a<=e[s];a++)i[t[r]]=[],i[t[r]][0]=n,i[t[r]][1]=s,r++,n++;n*=2}return i}function D(e){for(var t=e[0],n=e[1]-1;n>=0;)t&1<<n&&(g|=1<<y),n--,--y<0&&(255==g?(O(255),O(0)):O(g),y=7,g=0)}function O(e){m.push(e)}function L(e){O(e>>8&255),O(255&e)}function M(e,t,n,r,i){for(var s,a=i[0],o=i[240],l=function(e,t){var n,r,i,s,a,o,l,c,u,d,h=0;for(u=0;u<8;++u){n=e[h],r=e[h+1],i=e[h+2],s=e[h+3],a=e[h+4],o=e[h+5],l=e[h+6];var p=n+(c=e[h+7]),m=n-c,g=r+l,y=r-l,v=i+o,w=i-o,b=s+a,x=s-a,S=p+b,A=p-b,E=g+v,N=g-v;e[h]=S+E,e[h+4]=S-E;var C=.707106781*(N+A);e[h+2]=A+C,e[h+6]=A-C;var _=.382683433*((S=x+w)-(N=y+m)),T=.5411961*S+_,I=1.306562965*N+_,k=.707106781*(E=w+y),P=m+k,R=m-k;e[h+5]=R+T,e[h+3]=R-T,e[h+1]=P+I,e[h+7]=P-I,h+=8}for(h=0,u=0;u<8;++u){n=e[h],r=e[h+8],i=e[h+16],s=e[h+24],a=e[h+32],o=e[h+40],l=e[h+48];var D=n+(c=e[h+56]),O=n-c,L=r+l,M=r-l,F=i+o,j=i-o,B=s+a,U=s-a,z=D+B,V=D-B,H=L+F,W=L-F;e[h]=z+H,e[h+32]=z-H;var q=.707106781*(W+V);e[h+16]=V+q,e[h+48]=V-q;var G=.382683433*((z=U+j)-(W=M+O)),K=.5411961*z+G,Y=1.306562965*W+G,X=.707106781*(H=j+M),Q=O+X,J=O-X;e[h+40]=J+K,e[h+24]=J-K,e[h+8]=Q+Y,e[h+56]=Q-Y,h++}for(u=0;u<64;++u)d=e[u]*t[u],f[u]=d>0?d+.5|0:d-.5|0;return f}(e,t),c=0;c<64;++c)p[A[c]]=l[c];var u=p[0]-n;n=p[0],0==u?D(r[0]):(D(r[h[s=32767+u]]),D(d[s]));for(var m=63;m>0&&0==p[m];)m--;if(0==m)return D(a),n;for(var g,y=1;y<=m;){for(var v=y;0==p[y]&&y<=m;)++y;var w=y-v;if(w>=16){g=w>>4;for(var b=1;b<=g;++b)D(o);w&=15}s=32767+p[y],D(i[(w<<4)+h[s]]),D(d[s]),y++}return 63!=m&&D(a),n}function F(e){e=Math.min(Math.max(e,1),100),s!=e&&(function(e){for(var t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],n=0;n<64;n++){var r=a((t[n]*e+50)/100);r=Math.min(Math.max(r,1),255),o[A[n]]=r}for(var i=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],s=0;s<64;s++){var d=a((i[s]*e+50)/100);d=Math.min(Math.max(d,1),255),l[A[s]]=d}for(var h=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],f=0,p=0;p<8;p++)for(var m=0;m<8;m++)c[f]=1/(o[A[f]]*h[p]*h[m]*8),u[f]=1/(l[A[f]]*h[p]*h[m]*8),f++}(e<50?Math.floor(5e3/e):Math.floor(200-2*e)),s=e)}this.encode=function(e,s){s&&F(s),m=new Array,g=0,y=7,L(65496),L(65504),L(16),O(74),O(70),O(73),O(70),O(0),O(1),O(1),O(0),L(1),L(1),O(0),O(0),function(){L(65499),L(132),O(0);for(var e=0;e<64;e++)O(o[e]);O(1);for(var t=0;t<64;t++)O(l[t])}(),function(e,t){L(65472),L(17),O(8),L(t),L(e),O(3),O(1),O(17),O(0),O(2),O(17),O(1),O(3),O(17),O(1)}(e.width,e.height),function(){L(65476),L(418),O(0);for(var e=0;e<16;e++)O(E[e+1]);for(var t=0;t<=11;t++)O(N[t]);O(16);for(var n=0;n<16;n++)O(C[n+1]);for(var r=0;r<=161;r++)O(_[r]);O(1);for(var i=0;i<16;i++)O(T[i+1]);for(var s=0;s<=11;s++)O(I[s]);O(17);for(var a=0;a<16;a++)O(k[a+1]);for(var o=0;o<=161;o++)O(P[o])}(),L(65498),L(12),O(3),O(1),O(0),O(2),O(17),O(3),O(17),O(0),O(63),O(0);var a=0,d=0,h=0;g=0,y=7,this.encode.displayName="_encode_";for(var f,p,x,A,R,j,B,U,z,V=e.data,H=e.width,W=e.height,q=4*H,G=0;G<W;){for(f=0;f<q;){for(R=q*G+f,B=-1,U=0,z=0;z<64;z++)j=R+(U=z>>3)*q+(B=4*(7&z)),G+U>=W&&(j-=q*(G+1+U-W)),f+B>=q&&(j-=f+B-q+4),p=V[j++],x=V[j++],A=V[j++],v[z]=(S[p]+S[x+256|0]+S[A+512|0]>>16)-128,w[z]=(S[p+768|0]+S[x+1024|0]+S[A+1280|0]>>16)-128,b[z]=(S[p+1280|0]+S[x+1536|0]+S[A+1792|0]>>16)-128;a=M(v,c,a,t,r),d=M(w,u,d,n,i),h=M(b,u,h,n,i),f+=32}G+=8}if(y>=0){var K=[];K[1]=y+1,K[0]=(1<<y+1)-1,D(K)}return L(65497),new Uint8Array(m)},e=e||50,function(){for(var e=String.fromCharCode,t=0;t<256;t++)x[t]=e(t)}(),t=R(E,N),n=R(T,I),r=R(C,_),i=R(k,P),function(){for(var e=1,t=2,n=1;n<=15;n++){for(var r=e;r<t;r++)h[32767+r]=n,d[32767+r]=[],d[32767+r][1]=n,d[32767+r][0]=r;for(var i=-(t-1);i<=-e;i++)h[32767+i]=n,d[32767+i]=[],d[32767+i][1]=n,d[32767+i][0]=t-1+i;e<<=1,t<<=1}}(),function(){for(var e=0;e<256;e++)S[e]=19595*e,S[e+256|0]=38470*e,S[e+512|0]=7471*e+32768,S[e+768|0]=-11059*e,S[e+1024|0]=-21709*e,S[e+1280|0]=32768*e+8421375,S[e+1536|0]=-27439*e,S[e+1792|0]=-5329*e}(),F(e)}function Qt(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,-1===["BM","BA","CI","CP","IC","PT"].indexOf(this.flag))throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Jt(e){function t(e){if(!e)throw Error("assert :P")}function n(e,t,n){for(var r=0;4>r;r++)if(e[t+r]!=n.charCodeAt(r))return!0;return!1}function r(e,t,n,r,i){for(var s=0;s<i;s++)e[t+s]=n[r+s]}function i(e,t,n,r){for(var i=0;i<r;i++)e[t+i]=n}function s(e){return new Int32Array(e)}function a(e,t){for(var n=[],r=0;r<e;r++)n.push(new t);return n}function o(e,t){var n=[];return function e(n,r,i){for(var s=i[r],a=0;a<s&&(n.push(i.length>r+1?[]:new t),!(i.length<r+1));a++)e(n[a],r+1,i)}(n,0,e),n}var l=function(){var e=this;function l(e,t){for(var n=1<<t-1>>>0;e&n;)n>>>=1;return n?(e&n-1)+n:e}function c(e,n,r,i,s){t(!(i%r));do{e[n+(i-=r)]=s}while(0<i)}function u(e,n,r,i,a){if(t(2328>=a),512>=a)var o=s(512);else if(null==(o=s(a)))return 0;return function(e,n,r,i,a,o){var u,h,f=n,p=1<<r,m=s(16),g=s(16);for(t(0!=a),t(null!=i),t(null!=e),t(0<r),h=0;h<a;++h){if(15<i[h])return 0;++m[i[h]]}if(m[0]==a)return 0;for(g[1]=0,u=1;15>u;++u){if(m[u]>1<<u)return 0;g[u+1]=g[u]+m[u]}for(h=0;h<a;++h)u=i[h],0<i[h]&&(o[g[u]++]=h);if(1==g[15])return(i=new d).g=0,i.value=o[0],c(e,f,1,p,i),p;var y,v=-1,w=p-1,b=0,x=1,S=1,A=1<<r;for(h=0,u=1,a=2;u<=r;++u,a<<=1){if(x+=S<<=1,0>(S-=m[u]))return 0;for(;0<m[u];--m[u])(i=new d).g=u,i.value=o[h++],c(e,f+b,a,A,i),b=l(b,u)}for(u=r+1,a=2;15>=u;++u,a<<=1){if(x+=S<<=1,0>(S-=m[u]))return 0;for(;0<m[u];--m[u]){if(i=new d,(b&w)!=v){for(f+=A,y=1<<(v=u)-r;15>v&&!(0>=(y-=m[v]));)++v,y<<=1;p+=A=1<<(y=v-r),e[n+(v=b&w)].g=y+r,e[n+v].value=f-n-v}i.g=u-r,i.value=o[h++],c(e,f+(b>>r),a,A,i),b=l(b,u)}}return x!=2*g[15]-1?0:p}(e,n,r,i,a,o)}function d(){this.value=this.g=0}function h(){this.value=this.g=0}function f(){this.G=a(5,d),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Bn,h)}function p(e,n,r,i){t(null!=e),t(null!=n),t(2147483648>i),e.Ca=254,e.I=0,e.b=-8,e.Ka=0,e.oa=n,e.pa=r,e.Jd=n,e.Yc=r+i,e.Zc=4<=i?r+i-4+1:r,C(e)}function m(e,t){for(var n=0;0<t--;)n|=T(e,128)<<t;return n}function g(e,t){var n=m(e,t);return _(e)?-n:n}function y(e,n,r,i){var s,a=0;for(t(null!=e),t(null!=n),t(4294967288>i),e.Sb=i,e.Ra=0,e.u=0,e.h=0,4<i&&(i=4),s=0;s<i;++s)a+=n[r+s]<<8*s;e.Ra=a,e.bb=i,e.oa=n,e.pa=r}function v(e){for(;8<=e.u&&e.bb<e.Sb;)e.Ra>>>=8,e.Ra+=e.oa[e.pa+e.bb]<<Vn-8>>>0,++e.bb,e.u-=8;A(e)&&(e.h=1,e.u=0)}function w(e,n){if(t(0<=n),!e.h&&n<=zn){var r=S(e)&Un[n];return e.u+=n,v(e),r}return e.h=1,e.u=0}function b(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function x(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function S(e){return e.Ra>>>(e.u&Vn-1)>>>0}function A(e){return t(e.bb<=e.Sb),e.h||e.bb==e.Sb&&e.u>Vn}function E(e,t){e.u=t,e.h=A(e)}function N(e){e.u>=Hn&&(t(e.u>=Hn),v(e))}function C(e){t(null!=e&&null!=e.oa),e.pa<e.Zc?(e.I=(e.oa[e.pa++]|e.I<<8)>>>0,e.b+=8):(t(null!=e&&null!=e.oa),e.pa<e.Yc?(e.b+=8,e.I=e.oa[e.pa++]|e.I<<8):e.Ka?e.b=0:(e.I<<=8,e.b+=8,e.Ka=1))}function _(e){return m(e,1)}function T(e,t){var n=e.Ca;0>e.b&&C(e);var r=e.b,i=n*t>>>8,s=(e.I>>>r>i)+0;for(s?(n-=i,e.I-=i+1<<r>>>0):n=i+1,r=n,i=0;256<=r;)i+=8,r>>=8;return r=7^i+Wn[r],e.b-=r,e.Ca=(n<<r)-1,s}function I(e,t,n){e[t+0]=n>>24&255,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n}function k(e,t){return e[t+0]|e[t+1]<<8}function P(e,t){return k(e,t)|e[t+2]<<16}function R(e,t){return k(e,t)|k(e,t+2)<<16}function D(e,n){var r=1<<n;return t(null!=e),t(0<n),e.X=s(r),null==e.X?0:(e.Mb=32-n,e.Xa=n,1)}function O(e,n){t(null!=e),t(null!=n),t(e.Xa==n.Xa),r(n.X,0,e.X,0,1<<n.Xa)}function L(){this.X=[],this.Xa=this.Mb=0}function M(e,n,r,i){t(null!=r),t(null!=i);var s=r[0],a=i[0];return 0==s&&(s=(e*a+n/2)/n),0==a&&(a=(n*s+e/2)/e),0>=s||0>=a?0:(r[0]=s,i[0]=a,1)}function F(e,t){return e+(1<<t)-1>>>t}function j(e,t){return((4278255360&e)+(4278255360&t)>>>0&4278255360)+((16711935&e)+(16711935&t)>>>0&16711935)>>>0}function B(t,n){e[n]=function(n,r,i,s,a,o,l){var c;for(c=0;c<a;++c){var u=e[t](o[l+c-1],i,s+c);o[l+c]=j(n[r+c],u)}}}function U(){this.ud=this.hd=this.jd=0}function z(e,t){return((4278124286&(e^t))>>>1)+(e&t)>>>0}function V(e){return 0<=e&&256>e?e:0>e?0:255<e?255:void 0}function H(e,t){return V(e+(e-t+.5>>1))}function W(e,t,n){return Math.abs(t-n)-Math.abs(e-n)}function q(e,t,n,r,i,s,a){for(r=s[a-1],n=0;n<i;++n)s[a+n]=r=j(e[t+n],r)}function G(e,t,n,r,i){var s;for(s=0;s<n;++s){var a=e[t+s],o=a>>8&255,l=16711935&(l=(l=16711935&a)+((o<<16)+o));r[i+s]=(4278255360&a)+l>>>0}}function K(e,t){t.jd=255&e,t.hd=e>>8&255,t.ud=e>>16&255}function Y(e,t,n,r,i,s){var a;for(a=0;a<r;++a){var o=t[n+a],l=o>>>8,c=o,u=255&(u=(u=o>>>16)+((e.jd<<24>>24)*(l<<24>>24)>>>5));c=255&(c=(c+=(e.hd<<24>>24)*(l<<24>>24)>>>5)+((e.ud<<24>>24)*(u<<24>>24)>>>5)),i[s+a]=(4278255360&o)+(u<<16)+c}}function X(t,n,r,i,s){e[n]=function(e,t,n,r,a,o,l,c,u){for(r=l;r<c;++r)for(l=0;l<u;++l)a[o++]=s(n[i(e[t++])])},e[t]=function(t,n,a,o,l,c,u){var d=8>>t.b,h=t.Ea,f=t.K[0],p=t.w;if(8>d)for(t=(1<<t.b)-1,p=(1<<d)-1;n<a;++n){var m,g=0;for(m=0;m<h;++m)m&t||(g=i(o[l++])),c[u++]=s(f[g&p]),g>>=d}else e["VP8LMapColor"+r](o,l,f,p,c,u,n,a,h)}}function Q(e,t,n,r,i){for(n=t+n;t<n;){var s=e[t++];r[i++]=s>>16&255,r[i++]=s>>8&255,r[i++]=255&s}}function J(e,t,n,r,i){for(n=t+n;t<n;){var s=e[t++];r[i++]=s>>16&255,r[i++]=s>>8&255,r[i++]=255&s,r[i++]=s>>24&255}}function Z(e,t,n,r,i){for(n=t+n;t<n;){var s=(a=e[t++])>>16&240|a>>12&15,a=240&a|a>>28&15;r[i++]=s,r[i++]=a}}function $(e,t,n,r,i){for(n=t+n;t<n;){var s=(a=e[t++])>>16&248|a>>13&7,a=a>>5&224|a>>3&31;r[i++]=s,r[i++]=a}}function ee(e,t,n,r,i){for(n=t+n;t<n;){var s=e[t++];r[i++]=255&s,r[i++]=s>>8&255,r[i++]=s>>16&255}}function te(e,t,n,i,s,a){if(0==a)for(n=t+n;t<n;)I(i,((a=e[t++])[0]>>24|a[1]>>8&65280|a[2]<<8&16711680|a[3]<<24)>>>0),s+=32;else r(i,s,e,t,n)}function ne(t,n){e[n][0]=e[t+"0"],e[n][1]=e[t+"1"],e[n][2]=e[t+"2"],e[n][3]=e[t+"3"],e[n][4]=e[t+"4"],e[n][5]=e[t+"5"],e[n][6]=e[t+"6"],e[n][7]=e[t+"7"],e[n][8]=e[t+"8"],e[n][9]=e[t+"9"],e[n][10]=e[t+"10"],e[n][11]=e[t+"11"],e[n][12]=e[t+"12"],e[n][13]=e[t+"13"],e[n][14]=e[t+"0"],e[n][15]=e[t+"0"]}function re(e){return e==Hr||e==Wr||e==qr||e==Gr}function ie(){this.eb=[],this.size=this.A=this.fb=0}function se(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ae(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ie,this.f.kb=new se,this.sd=null}function oe(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function le(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ce(e){return alert("todo:WebPSamplerProcessPlane"),e.T}function ue(e,t){var n=e.T,i=t.ba.f.RGBA,s=i.eb,a=i.fb+e.ka*i.A,o=yi[t.ba.S],l=e.y,c=e.O,u=e.f,d=e.N,h=e.ea,f=e.W,p=t.cc,m=t.dc,g=t.Mc,y=t.Nc,v=e.ka,w=e.ka+e.T,b=e.U,x=b+1>>1;for(0==v?o(l,c,null,null,u,d,h,f,u,d,h,f,s,a,null,null,b):(o(t.ec,t.fc,l,c,p,m,g,y,u,d,h,f,s,a-i.A,s,a,b),++n);v+2<w;v+=2)p=u,m=d,g=h,y=f,d+=e.Rc,f+=e.Rc,a+=2*i.A,o(l,(c+=2*e.fa)-e.fa,l,c,p,m,g,y,u,d,h,f,s,a-i.A,s,a,b);return c+=e.fa,e.j+w<e.o?(r(t.ec,t.fc,l,c,b),r(t.cc,t.dc,u,d,x),r(t.Mc,t.Nc,h,f,x),n--):1&w||o(l,c,null,null,u,d,h,f,u,d,h,f,s,a+i.A,null,null,b),n}function de(e,n,r){var i=e.F,s=[e.J];if(null!=i){var a=e.U,o=n.ba.S,l=o==Ur||o==qr;n=n.ba.f.RGBA;var c=[0],u=e.ka;c[0]=e.T,e.Kb&&(0==u?--c[0]:(--u,s[0]-=e.width),e.j+e.ka+e.T==e.o&&(c[0]=e.o-e.j-u));var d=n.eb;u=n.fb+u*n.A,e=Nr(i,s[0],e.width,a,c,d,u+(l?0:3),n.A),t(r==c),e&&re(o)&&Ar(d,u,l,a,c,n.A)}return 0}function he(e){var t=e.ma,n=t.ba.S,r=11>n,i=n==Fr||n==Br||n==Ur||n==zr||12==n||re(n);if(t.memory=null,t.Ib=null,t.Jb=null,t.Nd=null,!Mn(t.Oa,e,i?11:12))return 0;if(i&&re(n)&&wn(),e.da)alert("todo:use_scaling");else{if(r){if(t.Ib=ce,e.Kb){if(n=e.U+1>>1,t.memory=s(e.U+2*n),null==t.memory)return 0;t.ec=t.memory,t.fc=0,t.cc=t.ec,t.dc=t.fc+e.U,t.Mc=t.cc,t.Nc=t.dc+n,t.Ib=ue,wn()}}else alert("todo:EmitYUV");i&&(t.Jb=de,r&&yn())}if(r&&!Pi){for(e=0;256>e;++e)Ri[e]=89858*(e-128)+Ci>>Ni,Li[e]=-22014*(e-128)+Ci,Oi[e]=-45773*(e-128),Di[e]=113618*(e-128)+Ci>>Ni;for(e=_i;e<Ti;++e)t=76283*(e-16)+Ci>>Ni,Mi[e-_i]=qe(t,255),Fi[e-_i]=qe(t+8>>4,15);Pi=1}return 1}function fe(e){var n=e.ma,r=e.U,i=e.T;return t(!(1&e.ka)),0>=r||0>=i?0:(r=n.Ib(e,n),null!=n.Jb&&n.Jb(e,n,r),n.Dc+=r,1)}function pe(e){e.ma.memory=null}function me(e,t,n,r){return 47!=w(e,8)?0:(t[0]=w(e,14)+1,n[0]=w(e,14)+1,r[0]=w(e,1),0!=w(e,3)?0:!e.h)}function ge(e,t){if(4>e)return e+1;var n=e-2>>1;return(2+(1&e)<<n)+w(t,n)+1}function ye(e,t){return 120<t?t-120:1<=(n=((n=Zr[t-1])>>4)*e+(8-(15&n)))?n:1;var n}function ve(e,t,n){var r=S(n),i=e[t+=255&r].g-8;return 0<i&&(E(n,n.u+8),r=S(n),t+=e[t].value,t+=r&(1<<i)-1),E(n,n.u+e[t].g),e[t].value}function we(e,n,r){return r.g+=e.g,r.value+=e.value<<n>>>0,t(8>=r.g),e.g}function be(e,n,r){var i=e.xc;return t((n=0==i?0:e.vc[e.md*(r>>i)+(n>>i)])<e.Wb),e.Ya[n]}function xe(e,n,i,s){var a=e.ab,o=e.c*n,l=e.C;n=l+n;var c=i,u=s;for(s=e.Ta,i=e.Ua;0<a--;){var d=e.gc[a],h=l,f=n,p=c,m=u,g=(u=s,c=i,d.Ea);switch(t(h<f),t(f<=d.nc),d.hc){case 2:Kn(p,m,(f-h)*g,u,c);break;case 0:var y=h,v=f,w=u,b=c,x=(C=d).Ea;0==y&&(qn(p,m,null,null,1,w,b),q(p,m+1,0,0,x-1,w,b+1),m+=x,b+=x,++y);for(var S=1<<C.b,A=S-1,E=F(x,C.b),N=C.K,C=C.w+(y>>C.b)*E;y<v;){var _=N,T=C,I=1;for(Gn(p,m,w,b-x,1,w,b);I<x;){var k=(I&~A)+S;k>x&&(k=x),(0,Zn[_[T++]>>8&15])(p,m+ +I,w,b+I-x,k-I,w,b+I),I=k}m+=x,b+=x,++y&A||(C+=E)}f!=d.nc&&r(u,c-g,u,c+(f-h-1)*g,g);break;case 1:for(g=p,v=m,x=(p=d.Ea)-(b=p&~(w=(m=1<<d.b)-1)),y=F(p,d.b),S=d.K,d=d.w+(h>>d.b)*y;h<f;){for(A=S,E=d,N=new U,C=v+b,_=v+p;v<C;)K(A[E++],N),$n(N,g,v,m,u,c),v+=m,c+=m;v<_&&(K(A[E++],N),$n(N,g,v,x,u,c),v+=x,c+=x),++h&w||(d+=y)}break;case 3:if(p==u&&m==c&&0<d.b){for(v=u,p=g=c+(f-h)*g-(b=(f-h)*F(d.Ea,d.b)),m=u,w=c,y=[],b=(x=b)-1;0<=b;--b)y[b]=m[w+b];for(b=x-1;0<=b;--b)v[p+b]=y[b];Yn(d,h,f,u,g,u,c)}else Yn(d,h,f,p,m,u,c)}c=s,u=i}u!=i&&r(s,i,c,u,o)}function Se(e,n){var r=e.V,i=e.Ba+e.c*e.C,s=n-e.C;if(t(n<=e.l.o),t(16>=s),0<s){var a=e.l,o=e.Ta,l=e.Ua,c=a.width;if(xe(e,s,r,i),s=l=[l],t((r=e.C)<(i=n)),t(a.v<a.va),i>a.o&&(i=a.o),r<a.j){var u=a.j-r;r=a.j,s[0]+=u*c}if(r>=i?r=0:(s[0]+=4*a.v,a.ka=r-a.j,a.U=a.va-a.v,a.T=i-r,r=1),r){if(l=l[0],11>(r=e.ca).S){var d=r.f.RGBA,h=(i=r.S,s=a.U,a=a.T,u=d.eb,d.A),f=a;for(d=d.fb+e.Ma*d.A;0<f--;){var p=o,m=l,g=s,y=u,v=d;switch(i){case Mr:er(p,m,g,y,v);break;case Fr:tr(p,m,g,y,v);break;case Hr:tr(p,m,g,y,v),Ar(y,v,0,g,1,0);break;case jr:ir(p,m,g,y,v);break;case Br:te(p,m,g,y,v,1);break;case Wr:te(p,m,g,y,v,1),Ar(y,v,0,g,1,0);break;case Ur:te(p,m,g,y,v,0);break;case qr:te(p,m,g,y,v,0),Ar(y,v,1,g,1,0);break;case zr:nr(p,m,g,y,v);break;case Gr:nr(p,m,g,y,v),Er(y,v,g,1,0);break;case Vr:rr(p,m,g,y,v);break;default:t(0)}l+=c,d+=h}e.Ma+=a}else alert("todo:EmitRescaledRowsYUVA");t(e.Ma<=r.height)}}e.C=n,t(e.C<=e.i)}function Ae(e){var t;if(0<e.ua)return 0;for(t=0;t<e.Wb;++t){var n=e.Ya[t].G,r=e.Ya[t].H;if(0<n[1][r[1]+0].g||0<n[2][r[2]+0].g||0<n[3][r[3]+0].g)return 0}return 1}function Ee(e,n,r,i,s,a){if(0!=e.Z){var o=e.qd,l=e.rd;for(t(null!=gi[e.Z]);n<r;++n)gi[e.Z](o,l,i,s,i,s,a),o=i,l=s,s+=a;e.qd=o,e.rd=l}}function Ne(e,n){var r=e.l.ma,i=0==r.Z||1==r.Z?e.l.j:e.C;if(i=e.C<i?i:e.C,t(n<=e.l.o),n>i){var s=e.l.width,a=r.ca,o=r.tb+s*i,l=e.V,c=e.Ba+e.c*i,u=e.gc;t(1==e.ab),t(3==u[0].hc),Qn(u[0],i,n,l,c,a,o),Ee(r,i,n,a,o,s)}e.C=e.Ma=n}function Ce(e,n,r,i,s,a,o){var l=e.$/i,c=e.$%i,u=e.m,d=e.s,h=r+e.$,f=h;s=r+i*s;var p=r+i*a,m=280+d.ua,g=e.Pb?l:16777216,y=0<d.ua?d.Wa:null,v=d.wc,w=h<p?be(d,c,l):null;t(e.C<a),t(p<=s);var b=!1;e:for(;;){for(;b||h<p;){var x=0;if(l>=g){var C=h-r;t((g=e).Pb),g.wd=g.m,g.xd=C,0<g.s.ua&&O(g.s.Wa,g.s.vb),g=l+ei}if(c&v||(w=be(d,c,l)),t(null!=w),w.Qb&&(n[h]=w.qb,b=!0),!b)if(N(u),w.jc){x=u,C=n;var _=h,T=w.pd[S(x)&Bn-1];t(w.jc),256>T.g?(E(x,x.u+T.g),C[_]=T.value,x=0):(E(x,x.u+T.g-256),t(256<=T.value),x=T.value),0==x&&(b=!0)}else x=ve(w.G[0],w.H[0],u);if(u.h)break;if(b||256>x){if(!b)if(w.nd)n[h]=(w.qb|x<<8)>>>0;else{if(N(u),b=ve(w.G[1],w.H[1],u),N(u),C=ve(w.G[2],w.H[2],u),_=ve(w.G[3],w.H[3],u),u.h)break;n[h]=(_<<24|b<<16|x<<8|C)>>>0}if(b=!1,++h,++c>=i&&(c=0,++l,null!=o&&l<=a&&!(l%16)&&o(e,l),null!=y))for(;f<h;)x=n[f++],y.X[(506832829*x&4294967295)>>>y.Mb]=x}else if(280>x){if(x=ge(x-256,u),C=ve(w.G[4],w.H[4],u),N(u),C=ye(i,C=ge(C,u)),u.h)break;if(h-r<C||s-h<x)break e;for(_=0;_<x;++_)n[h+_]=n[h+_-C];for(h+=x,c+=x;c>=i;)c-=i,++l,null!=o&&l<=a&&!(l%16)&&o(e,l);if(t(h<=s),c&v&&(w=be(d,c,l)),null!=y)for(;f<h;)x=n[f++],y.X[(506832829*x&4294967295)>>>y.Mb]=x}else{if(!(x<m))break e;for(b=x-280,t(null!=y);f<h;)x=n[f++],y.X[(506832829*x&4294967295)>>>y.Mb]=x;x=h,t(!(b>>>(C=y).Xa)),n[x]=C.X[b],b=!0}b||t(u.h==A(u))}if(e.Pb&&u.h&&h<s)t(e.m.h),e.a=5,e.m=e.wd,e.$=e.xd,0<e.s.ua&&O(e.s.vb,e.s.Wa);else{if(u.h)break e;null!=o&&o(e,l>a?a:l),e.a=0,e.$=h-r}return 1}return e.a=3,0}function _e(e){t(null!=e),e.vc=null,e.yc=null,e.Ya=null;var n=e.Wa;null!=n&&(n.X=null),e.vb=null,t(null!=e)}function Te(){var t=new on;return null==t?null:(t.a=0,t.xb=mi,ne("Predictor","VP8LPredictors"),ne("Predictor","VP8LPredictors_C"),ne("PredictorAdd","VP8LPredictorsAdd"),ne("PredictorAdd","VP8LPredictorsAdd_C"),Kn=G,$n=Y,er=Q,tr=J,nr=Z,rr=$,ir=ee,e.VP8LMapColor32b=Xn,e.VP8LMapColor8b=Jn,t)}function Ie(e,n,r,o,l){var c=1,h=[e],p=[n],m=o.m,g=o.s,y=null,v=0;e:for(;;){if(r)for(;c&&w(m,1);){var b=h,x=p,A=o,C=1,_=A.m,T=A.gc[A.ab],I=w(_,2);if(A.Oc&1<<I)c=0;else{switch(A.Oc|=1<<I,T.hc=I,T.Ea=b[0],T.nc=x[0],T.K=[null],++A.ab,t(4>=A.ab),I){case 0:case 1:T.b=w(_,3)+2,C=Ie(F(T.Ea,T.b),F(T.nc,T.b),0,A,T.K),T.K=T.K[0];break;case 3:var k,P=w(_,8)+1,R=16<P?0:4<P?1:2<P?2:3;if(b[0]=F(T.Ea,R),T.b=R,k=C=Ie(P,1,0,A,T.K)){var O,L=P,M=T,B=1<<(8>>M.b),U=s(B);if(null==U)k=0;else{var z=M.K[0],V=M.w;for(U[0]=M.K[0][0],O=1;O<1*L;++O)U[O]=j(z[V+O],U[O-1]);for(;O<4*B;++O)U[O]=0;M.K[0]=null,M.K[0]=U,k=1}}C=k;break;case 2:break;default:t(0)}c=C}}if(h=h[0],p=p[0],c&&w(m,1)&&!(c=1<=(v=w(m,4))&&11>=v)){o.a=3;break e}var H;if(H=c)t:{var W,q,G,K=o,Y=h,X=p,Q=v,J=r,Z=K.m,$=K.s,ee=[null],te=1,ne=0,re=$r[Q];n:for(;;){if(J&&w(Z,1)){var ie=w(Z,3)+2,se=F(Y,ie),ae=F(X,ie),oe=se*ae;if(!Ie(se,ae,0,K,ee))break n;for(ee=ee[0],$.xc=ie,W=0;W<oe;++W){var le=ee[W]>>8&65535;ee[W]=le,le>=te&&(te=le+1)}}if(Z.h)break n;for(q=0;5>q;++q){var ce=Xr[q];!q&&0<Q&&(ce+=1<<Q),ne<ce&&(ne=ce)}var ue=a(te*re,d),de=te,he=a(de,f);if(null==he)var fe=null;else t(65536>=de),fe=he;var pe=s(ne);if(null==fe||null==pe||null==ue){K.a=1;break n}var me=ue;for(W=G=0;W<te;++W){var ge=fe[W],ye=ge.G,ve=ge.H,be=0,xe=1,Se=0;for(q=0;5>q;++q){ce=Xr[q],ye[q]=me,ve[q]=G,!q&&0<Q&&(ce+=1<<Q);r:{var Ae,Ee=ce,Ne=K,Te=pe,ke=me,Pe=G,Re=0,De=Ne.m,Oe=w(De,1);if(i(Te,0,0,Ee),Oe){var Le=w(De,1)+1,Me=w(De,1),Fe=w(De,0==Me?1:8);Te[Fe]=1,2==Le&&(Te[Fe=w(De,8)]=1);var je=1}else{var Be=s(19),Ue=w(De,4)+4;if(19<Ue){Ne.a=3;var ze=0;break r}for(Ae=0;Ae<Ue;++Ae)Be[Jr[Ae]]=w(De,3);var Ve=void 0,He=void 0,We=Ne,qe=Be,Ge=Ee,Ke=Te,Ye=0,Xe=We.m,Qe=8,Je=a(128,d);i:for(;u(Je,0,7,qe,19);){if(w(Xe,1)){var Ze=2+2*w(Xe,3);if((Ve=2+w(Xe,Ze))>Ge)break i}else Ve=Ge;for(He=0;He<Ge&&Ve--;){N(Xe);var $e=Je[0+(127&S(Xe))];E(Xe,Xe.u+$e.g);var et=$e.value;if(16>et)Ke[He++]=et,0!=et&&(Qe=et);else{var tt=16==et,nt=et-16,rt=Yr[nt],it=w(Xe,Kr[nt])+rt;if(He+it>Ge)break i;for(var st=tt?Qe:0;0<it--;)Ke[He++]=st}}Ye=1;break i}Ye||(We.a=3),je=Ye}(je=je&&!De.h)&&(Re=u(ke,Pe,8,Te,Ee)),je&&0!=Re?ze=Re:(Ne.a=3,ze=0)}if(0==ze)break n;if(xe&&1==Qr[q]&&(xe=0==me[G].g),be+=me[G].g,G+=ze,3>=q){var at,ot=pe[0];for(at=1;at<ce;++at)pe[at]>ot&&(ot=pe[at]);Se+=ot}}if(ge.nd=xe,ge.Qb=0,xe&&(ge.qb=(ye[3][ve[3]+0].value<<24|ye[1][ve[1]+0].value<<16|ye[2][ve[2]+0].value)>>>0,0==be&&256>ye[0][ve[0]+0].value&&(ge.Qb=1,ge.qb+=ye[0][ve[0]+0].value<<8)),ge.jc=!ge.Qb&&6>Se,ge.jc){var lt,ct=ge;for(lt=0;lt<Bn;++lt){var ut=lt,dt=ct.pd[ut],ht=ct.G[0][ct.H[0]+ut];256<=ht.value?(dt.g=ht.g+256,dt.value=ht.value):(dt.g=0,dt.value=0,ut>>=we(ht,8,dt),ut>>=we(ct.G[1][ct.H[1]+ut],16,dt),ut>>=we(ct.G[2][ct.H[2]+ut],0,dt),we(ct.G[3][ct.H[3]+ut],24,dt))}}}$.vc=ee,$.Wb=te,$.Ya=fe,$.yc=ue,H=1;break t}H=0}if(!(c=H)){o.a=3;break e}if(0<v){if(g.ua=1<<v,!D(g.Wa,v)){o.a=1,c=0;break e}}else g.ua=0;var ft=o,pt=h,mt=p,gt=ft.s,yt=gt.xc;if(ft.c=pt,ft.i=mt,gt.md=F(pt,yt),gt.wc=0==yt?-1:(1<<yt)-1,r){o.xb=pi;break e}if(null==(y=s(h*p))){o.a=1,c=0;break e}c=(c=Ce(o,y,0,h,p,p,null))&&!m.h;break e}return c?(null!=l?l[0]=y:(t(null==y),t(r)),o.$=0,r||_e(g)):_e(g),c}function ke(e,n){var r=e.c*e.i,i=r+n+16*n;return t(e.c<=n),e.V=s(i),null==e.V?(e.Ta=null,e.Ua=0,e.a=1,0):(e.Ta=e.V,e.Ua=e.Ba+r+n,1)}function Pe(e,n){var r=e.C,i=n-r,s=e.V,a=e.Ba+e.c*r;for(t(n<=e.l.o);0<i;){var o=16<i?16:i,l=e.l.ma,c=e.l.width,u=c*o,d=l.ca,h=l.tb+c*r,f=e.Ta,p=e.Ua;xe(e,o,s,a),Cr(f,p,d,h,u),Ee(l,r,r+o,d,h,c),i-=o,s+=o*e.c,r+=o}t(r==n),e.C=e.Ma=n}function Re(){this.ub=this.yd=this.td=this.Rb=0}function De(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Oe(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Le(){this.Yb=function(){var e=[];return function e(t,n,r){for(var i=r[n],s=0;s<i&&(t.push(r.length>n+1?[]:0),!(r.length<n+1));s++)e(t[s],n+1,r)}(e,0,[3,11]),e}()}function Me(){this.jb=s(3),this.Wc=o([4,8],Le),this.Xc=o([4,17],Le)}function Fe(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function je(){this.ld=this.La=this.dd=this.tc=0}function Be(){this.Na=this.la=0}function Ue(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ze(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ve(){this.uc=this.M=this.Nb=0,this.wa=Array(new je),this.Y=0,this.ya=Array(new ze),this.aa=0,this.l=new Ge}function He(){this.y=s(16),this.f=s(8),this.ea=s(8)}function We(){this.cb=this.a=0,this.sc="",this.m=new b,this.Od=new Re,this.Kc=new De,this.ed=new Fe,this.Qa=new Oe,this.Ic=this.$c=this.Aa=0,this.D=new Ve,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,b),this.ia=0,this.pb=a(4,Ue),this.Pa=new Me,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new He),this.Hd=0,this.rb=Array(new Be),this.sb=0,this.wa=Array(new je),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ze),this.L=this.aa=0,this.gd=o([4,2],je),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function qe(e,t){return 0>e?0:e>t?t:e}function Ge(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ke(){var e=new We;return null!=e&&(e.a=0,e.sc="OK",e.cb=0,e.Xb=0,ri||(ri=Je)),e}function Ye(e,t,n){return 0==e.a&&(e.a=t,e.sc=n,e.cb=0),0}function Xe(e,t,n){return 3<=n&&157==e[t+0]&&1==e[t+1]&&42==e[t+2]}function Qe(e,n){if(null==e)return 0;if(e.a=0,e.sc="OK",null==n)return Ye(e,2,"null VP8Io passed to VP8GetHeaders()");var r=n.data,s=n.w,a=n.ha;if(4>a)return Ye(e,7,"Truncated header.");var o=r[s+0]|r[s+1]<<8|r[s+2]<<16,l=e.Od;if(l.Rb=!(1&o),l.td=o>>1&7,l.yd=o>>4&1,l.ub=o>>5,3<l.td)return Ye(e,3,"Incorrect keyframe parameters.");if(!l.yd)return Ye(e,4,"Frame not displayable.");s+=3,a-=3;var c=e.Kc;if(l.Rb){if(7>a)return Ye(e,7,"cannot parse picture header");if(!Xe(r,s,a))return Ye(e,3,"Bad code word");c.c=16383&(r[s+4]<<8|r[s+3]),c.Td=r[s+4]>>6,c.i=16383&(r[s+6]<<8|r[s+5]),c.Ud=r[s+6]>>6,s+=7,a-=7,e.za=c.c+15>>4,e.Ub=c.i+15>>4,n.width=c.c,n.height=c.i,n.Da=0,n.j=0,n.v=0,n.va=n.width,n.o=n.height,n.da=0,n.ib=n.width,n.hb=n.height,n.U=n.width,n.T=n.height,i((o=e.Pa).jb,0,255,o.jb.length),t(null!=(o=e.Qa)),o.Cb=0,o.Bb=0,o.Fb=1,i(o.Zb,0,0,o.Zb.length),i(o.Lb,0,0,o.Lb)}if(l.ub>a)return Ye(e,7,"bad partition length");p(o=e.m,r,s,l.ub),s+=l.ub,a-=l.ub,l.Rb&&(c.Ld=_(o),c.Kd=_(o)),c=e.Qa;var u,d=e.Pa;if(t(null!=o),t(null!=c),c.Cb=_(o),c.Cb){if(c.Bb=_(o),_(o)){for(c.Fb=_(o),u=0;4>u;++u)c.Zb[u]=_(o)?g(o,7):0;for(u=0;4>u;++u)c.Lb[u]=_(o)?g(o,6):0}if(c.Bb)for(u=0;3>u;++u)d.jb[u]=_(o)?m(o,8):255}else c.Bb=0;if(o.Ka)return Ye(e,3,"cannot parse segment header");if((c=e.ed).zd=_(o),c.Tb=m(o,6),c.wb=m(o,3),c.Pc=_(o),c.Pc&&_(o)){for(d=0;4>d;++d)_(o)&&(c.vd[d]=g(o,6));for(d=0;4>d;++d)_(o)&&(c.od[d]=g(o,6))}if(e.L=0==c.Tb?0:c.zd?1:2,o.Ka)return Ye(e,3,"cannot parse filter header");var h=a;if(a=u=s,s=u+h,c=h,e.Xb=(1<<m(e.m,2))-1,h<3*(d=e.Xb))r=7;else{for(u+=3*d,c-=3*d,h=0;h<d;++h){var f=r[a+0]|r[a+1]<<8|r[a+2]<<16;f>c&&(f=c),p(e.Jc[+h],r,u,f),u+=f,c-=f,a+=3}p(e.Jc[+d],r,u,c),r=u<s?0:5}if(0!=r)return Ye(e,r,"cannot parse partitions");for(r=m(u=e.m,7),a=_(u)?g(u,4):0,s=_(u)?g(u,4):0,c=_(u)?g(u,4):0,d=_(u)?g(u,4):0,u=_(u)?g(u,4):0,h=e.Qa,f=0;4>f;++f){if(h.Cb){var y=h.Zb[f];h.Fb||(y+=r)}else{if(0<f){e.pb[f]=e.pb[0];continue}y=r}var v=e.pb[f];v.Sc[0]=ti[qe(y+a,127)],v.Sc[1]=ni[qe(y+0,127)],v.Eb[0]=2*ti[qe(y+s,127)],v.Eb[1]=101581*ni[qe(y+c,127)]>>16,8>v.Eb[1]&&(v.Eb[1]=8),v.Qc[0]=ti[qe(y+d,117)],v.Qc[1]=ni[qe(y+u,127)],v.lc=y+u}if(!l.Rb)return Ye(e,4,"Not a key frame.");for(_(o),l=e.Pa,r=0;4>r;++r){for(a=0;8>a;++a)for(s=0;3>s;++s)for(c=0;11>c;++c)d=T(o,ci[r][a][s][c])?m(o,8):oi[r][a][s][c],l.Wc[r][a].Yb[s][c]=d;for(a=0;17>a;++a)l.Xc[r][a]=l.Wc[r][ui[a]]}return e.kc=_(o),e.kc&&(e.Bd=m(o,8)),e.cb=1}function Je(e,t,n,r,i,s,a){var o=t[i].Yb[n];for(n=0;16>i;++i){if(!T(e,o[n+0]))return i;for(;!T(e,o[n+1]);)if(o=t[++i].Yb[0],n=0,16==i)return 16;var l=t[i+1].Yb;if(T(e,o[n+2])){var c=e,u=0;if(T(c,(h=o)[(d=n)+3]))if(T(c,h[d+6])){for(o=0,d=2*(u=T(c,h[d+8]))+(h=T(c,h[d+9+u])),u=0,h=ii[d];h[o];++o)u+=u+T(c,h[o]);u+=3+(8<<d)}else T(c,h[d+7])?(u=7+2*T(c,165),u+=T(c,145)):u=5+T(c,159);else u=T(c,h[d+4])?3+T(c,h[d+5]):2;o=l[2]}else u=1,o=l[1];l=a+si[i],0>(c=e).b&&C(c);var d,h=c.b,f=(d=c.Ca>>1)-(c.I>>h)>>31;--c.b,c.Ca+=f,c.Ca|=1,c.I-=(d+1&f)<<h,s[l]=((u^f)-f)*r[(0<i)+0]}return 16}function Ze(e){var t=e.rb[e.sb-1];t.la=0,t.Na=0,i(e.zc,0,0,e.zc.length),e.ja=0}function $e(e,n){if(null==e)return 0;if(null==n)return Ye(e,2,"NULL VP8Io parameter in VP8Decode().");if(!e.cb&&!Qe(e,n))return 0;if(t(e.cb),null==n.ac||n.ac(n)){n.ob&&(e.L=0);var o=Bi[e.L];if(2==e.L?(e.yb=0,e.zb=0):(e.yb=n.v-o>>4,e.zb=n.j-o>>4,0>e.yb&&(e.yb=0),0>e.zb&&(e.zb=0)),e.Va=n.o+15+o>>4,e.Hb=n.va+15+o>>4,e.Hb>e.za&&(e.Hb=e.za),e.Va>e.Ub&&(e.Va=e.Ub),0<e.L){var l=e.ed;for(o=0;4>o;++o){var c;if(e.Qa.Cb){var u=e.Qa.Lb[o];e.Qa.Fb||(u+=l.Tb)}else u=l.Tb;for(c=0;1>=c;++c){var d=e.gd[o][c],h=u;if(l.Pc&&(h+=l.vd[0],c&&(h+=l.od[0])),0<(h=0>h?0:63<h?63:h)){var f=h;0<l.wb&&(f=4<l.wb?f>>2:f>>1)>9-l.wb&&(f=9-l.wb),1>f&&(f=1),d.dd=f,d.tc=2*h+f,d.ld=40<=h?2:15<=h?1:0}else d.tc=0;d.La=c}}}o=0}else Ye(e,6,"Frame setup failed"),o=e.a;if(o=0==o){if(o){e.$c=0,0<e.Aa||(e.Ic=zi);e:{o=e.Ic,l=4*(f=e.za);var p=32*f,m=f+1,g=0<e.L?f*(0<e.Aa?2:1):0,y=(2==e.Aa?2:1)*f;if((d=l+832+(c=3*(16*o+Bi[e.L])/2*p)+(u=null!=e.Fa&&0<e.Fa.length?e.Kc.c*e.Kc.i:0))!=d)o=0;else{if(d>e.Vb){if(e.Vb=0,e.Ec=s(d),e.Fc=0,null==e.Ec){o=Ye(e,1,"no memory during frame initialization.");break e}e.Vb=d}d=e.Ec,h=e.Fc,e.Ac=d,e.Bc=h,h+=l,e.Gd=a(p,He),e.Hd=0,e.rb=a(m+1,Be),e.sb=1,e.wa=g?a(g,je):null,e.Y=0,e.D.Nb=0,e.D.wa=e.wa,e.D.Y=e.Y,0<e.Aa&&(e.D.Y+=f),t(!0),e.oc=d,e.pc=h,h+=832,e.ya=a(y,ze),e.aa=0,e.D.ya=e.ya,e.D.aa=e.aa,2==e.Aa&&(e.D.aa+=f),e.R=16*f,e.B=8*f,f=(p=Bi[e.L])*e.R,p=p/2*e.B,e.sa=d,e.ta=h+f,e.qa=e.sa,e.ra=e.ta+16*o*e.R+p,e.Ha=e.qa,e.Ia=e.ra+8*o*e.B+p,e.$c=0,h+=c,e.mb=u?d:null,e.nb=u?h:null,t(h+u<=e.Fc+e.Vb),Ze(e),i(e.Ac,e.Bc,0,l),o=1}}if(o){if(n.ka=0,n.y=e.sa,n.O=e.ta,n.f=e.qa,n.N=e.ra,n.ea=e.Ha,n.Vd=e.Ia,n.fa=e.R,n.Rc=e.B,n.F=null,n.J=0,!Pr){for(o=-255;255>=o;++o)_r[255+o]=0>o?-o:o;for(o=-1020;1020>=o;++o)Tr[1020+o]=-128>o?-128:127<o?127:o;for(o=-112;112>=o;++o)Ir[112+o]=-16>o?-16:15<o?15:o;for(o=-255;510>=o;++o)kr[255+o]=0>o?0:255<o?255:o;Pr=1}sr=ct,ar=st,lr=at,cr=ot,ur=lt,or=it,dr=Yt,hr=Xt,fr=Zt,pr=$t,mr=Qt,gr=Jt,yr=en,vr=tn,wr=Vt,br=Ht,xr=Wt,Sr=qt,hi[0]=Et,hi[1]=dt,hi[2]=St,hi[3]=At,hi[4]=Nt,hi[5]=_t,hi[6]=Ct,hi[7]=Tt,hi[8]=kt,hi[9]=It,di[0]=yt,di[1]=ft,di[2]=pt,di[3]=mt,di[4]=vt,di[5]=wt,di[6]=bt,fi[0]=Ot,fi[1]=ht,fi[2]=Pt,fi[3]=Rt,fi[4]=Mt,fi[5]=Lt,fi[6]=Ft,o=1}else o=0}o&&(o=function(e,n){for(e.M=0;e.M<e.Va;++e.M){var a,o=e.Jc[e.M&e.Xb],l=e.m,c=e;for(a=0;a<c.za;++a){var u=l,d=c,h=d.Ac,f=d.Bc+4*a,p=d.zc,m=d.ya[d.aa+a];if(d.Qa.Bb?m.$b=T(u,d.Pa.jb[0])?2+T(u,d.Pa.jb[2]):T(u,d.Pa.jb[1]):m.$b=0,d.kc&&(m.Ad=T(u,d.Bd)),m.Za=!T(u,145)+0,m.Za){var g=m.Ob,y=0;for(d=0;4>d;++d){var v,w=p[0+d];for(v=0;4>v;++v){w=li[h[f+v]][w];for(var b=ai[T(u,w[0])];0<b;)b=ai[2*b+T(u,w[b])];w=-b,h[f+v]=w}r(g,y,h,f,4),y+=4,p[0+d]=w}}else w=T(u,156)?T(u,128)?1:3:T(u,163)?2:0,m.Ob[0]=w,i(h,f,w,4),i(p,0,w,4);m.Dd=T(u,142)?T(u,114)?T(u,183)?1:3:2:0}if(c.m.Ka)return Ye(e,7,"Premature end-of-partition0 encountered.");for(;e.ja<e.za;++e.ja){if(c=o,u=(l=e).rb[l.sb-1],h=l.rb[l.sb+l.ja],a=l.ya[l.aa+l.ja],f=l.kc?a.Ad:0)u.la=h.la=0,a.Za||(u.Na=h.Na=0),a.Hc=0,a.Gc=0,a.ia=0;else{var x,S;if(u=h,h=c,f=l.Pa.Xc,p=l.ya[l.aa+l.ja],m=l.pb[p.$b],d=p.ad,g=0,y=l.rb[l.sb-1],w=v=0,i(d,g,0,384),p.Za)var A=0,E=f[3];else{b=s(16);var N=u.Na+y.Na;if(N=ri(h,f[1],N,m.Eb,0,b,0),u.Na=y.Na=(0<N)+0,1<N)sr(b,0,d,g);else{var C=b[0]+3>>3;for(b=0;256>b;b+=16)d[g+b]=C}A=1,E=f[0]}var _=15&u.la,I=15&y.la;for(b=0;4>b;++b){var k=1&I;for(C=S=0;4>C;++C)_=_>>1|(k=(N=ri(h,E,N=k+(1&_),m.Sc,A,d,g))>A)<<7,S=S<<2|(3<N?3:1<N?2:0!=d[g+0]),g+=16;_>>=4,I=I>>1|k<<7,v=(v<<8|S)>>>0}for(E=_,A=I>>4,x=0;4>x;x+=2){for(S=0,_=u.la>>4+x,I=y.la>>4+x,b=0;2>b;++b){for(k=1&I,C=0;2>C;++C)N=k+(1&_),_=_>>1|(k=0<(N=ri(h,f[2],N,m.Qc,0,d,g)))<<3,S=S<<2|(3<N?3:1<N?2:0!=d[g+0]),g+=16;_>>=2,I=I>>1|k<<5}w|=S<<4*x,E|=_<<4<<x,A|=(240&I)<<x}u.la=E,y.la=A,p.Hc=v,p.Gc=w,p.ia=43690&w?0:m.ia,f=!(v|w)}if(0<l.L&&(l.wa[l.Y+l.ja]=l.gd[a.$b][a.Za],l.wa[l.Y+l.ja].La|=!f),c.Ka)return Ye(e,7,"Premature end-of-file encountered.")}if(Ze(e),l=n,c=1,a=(o=e).D,u=0<o.L&&o.M>=o.zb&&o.M<=o.Va,0==o.Aa)e:{if(a.M=o.M,a.uc=u,On(o,a),c=1,a=(S=o.D).Nb,u=(w=Bi[o.L])*o.R,h=w/2*o.B,b=16*a*o.R,C=8*a*o.B,f=o.sa,p=o.ta-u+b,m=o.qa,d=o.ra-h+C,g=o.Ha,y=o.Ia-h+C,I=0==(_=S.M),v=_>=o.Va-1,2==o.Aa&&On(o,S),S.uc)for(k=(N=o).D.M,t(N.D.uc),S=N.yb;S<N.Hb;++S){A=S,E=k;var P=(R=(z=N).D).Nb;x=z.R;var R=R.wa[R.Y+A],D=z.sa,O=z.ta+16*P*x+16*A,L=R.dd,M=R.tc;if(0!=M)if(t(3<=M),1==z.L)0<A&&br(D,O,x,M+4),R.La&&Sr(D,O,x,M),0<E&&wr(D,O,x,M+4),R.La&&xr(D,O,x,M);else{var F=z.B,j=z.qa,B=z.ra+8*P*F+8*A,U=z.Ha,z=z.Ia+8*P*F+8*A;P=R.ld,0<A&&(hr(D,O,x,M+4,L,P),pr(j,B,U,z,F,M+4,L,P)),R.La&&(gr(D,O,x,M,L,P),vr(j,B,U,z,F,M,L,P)),0<E&&(dr(D,O,x,M+4,L,P),fr(j,B,U,z,F,M+4,L,P)),R.La&&(mr(D,O,x,M,L,P),yr(j,B,U,z,F,M,L,P))}}if(o.ia&&alert("todo:DitherRow"),null!=l.put){if(S=16*_,_=16*(_+1),I?(l.y=o.sa,l.O=o.ta+b,l.f=o.qa,l.N=o.ra+C,l.ea=o.Ha,l.W=o.Ia+C):(S-=w,l.y=f,l.O=p,l.f=m,l.N=d,l.ea=g,l.W=y),v||(_-=w),_>l.o&&(_=l.o),l.F=null,l.J=null,null!=o.Fa&&0<o.Fa.length&&S<_&&(l.J=hn(o,l,S,_-S),l.F=o.mb,null==l.F&&0==l.F.length)){c=Ye(o,3,"Could not decode alpha data.");break e}S<l.j&&(w=l.j-S,S=l.j,t(!(1&w)),l.O+=o.R*w,l.N+=o.B*(w>>1),l.W+=o.B*(w>>1),null!=l.F&&(l.J+=l.width*w)),S<_&&(l.O+=l.v,l.N+=l.v>>1,l.W+=l.v>>1,null!=l.F&&(l.J+=l.v),l.ka=S-l.j,l.U=l.va-l.v,l.T=_-S,c=l.put(l))}a+1!=o.Ic||v||(r(o.sa,o.ta-u,f,p+16*o.R,u),r(o.qa,o.ra-h,m,d+8*o.B,h),r(o.Ha,o.Ia-h,g,y+8*o.B,h))}if(!c)return Ye(e,6,"Output aborted.")}return 1}(e,n)),null!=n.bc&&n.bc(n),o&=1}return o?(e.cb=0,o):0}function et(e,t,n,r,i){i=e[t+n+32*r]+(i>>3),e[t+n+32*r]=-256&i?0>i?0:255:i}function tt(e,t,n,r,i,s){et(e,t,0,n,r+i),et(e,t,1,n,r+s),et(e,t,2,n,r-s),et(e,t,3,n,r-i)}function nt(e){return(20091*e>>16)+e}function rt(e,t,n,r){var i,a=0,o=s(16);for(i=0;4>i;++i){var l=e[t+0]+e[t+8],c=e[t+0]-e[t+8],u=(35468*e[t+4]>>16)-nt(e[t+12]),d=nt(e[t+4])+(35468*e[t+12]>>16);o[a+0]=l+d,o[a+1]=c+u,o[a+2]=c-u,o[a+3]=l-d,a+=4,t++}for(i=a=0;4>i;++i)l=(e=o[a+0]+4)+o[a+8],c=e-o[a+8],u=(35468*o[a+4]>>16)-nt(o[a+12]),et(n,r,0,0,l+(d=nt(o[a+4])+(35468*o[a+12]>>16))),et(n,r,1,0,c+u),et(n,r,2,0,c-u),et(n,r,3,0,l-d),a++,r+=32}function it(e,t,n,r){var i=e[t+0]+4,s=35468*e[t+4]>>16,a=nt(e[t+4]),o=35468*e[t+1]>>16;tt(n,r,0,i+a,e=nt(e[t+1]),o),tt(n,r,1,i+s,e,o),tt(n,r,2,i-s,e,o),tt(n,r,3,i-a,e,o)}function st(e,t,n,r,i){rt(e,t,n,r),i&&rt(e,t+16,n,r+4)}function at(e,t,n,r){ar(e,t+0,n,r,1),ar(e,t+32,n,r+128,1)}function ot(e,t,n,r){var i;for(e=e[t+0]+4,i=0;4>i;++i)for(t=0;4>t;++t)et(n,r,t,i,e)}function lt(e,t,n,r){e[t+0]&&cr(e,t+0,n,r),e[t+16]&&cr(e,t+16,n,r+4),e[t+32]&&cr(e,t+32,n,r+128),e[t+48]&&cr(e,t+48,n,r+128+4)}function ct(e,t,n,r){var i,a=s(16);for(i=0;4>i;++i){var o=e[t+0+i]+e[t+12+i],l=e[t+4+i]+e[t+8+i],c=e[t+4+i]-e[t+8+i],u=e[t+0+i]-e[t+12+i];a[0+i]=o+l,a[8+i]=o-l,a[4+i]=u+c,a[12+i]=u-c}for(i=0;4>i;++i)o=(e=a[0+4*i]+3)+a[3+4*i],l=a[1+4*i]+a[2+4*i],c=a[1+4*i]-a[2+4*i],u=e-a[3+4*i],n[r+0]=o+l>>3,n[r+16]=u+c>>3,n[r+32]=o-l>>3,n[r+48]=u-c>>3,r+=64}function ut(e,t,n){var r,i=t-32,s=Or,a=255-e[i-1];for(r=0;r<n;++r){var o,l=s,c=a+e[t-1];for(o=0;o<n;++o)e[t+o]=l[c+e[i+o]];t+=32}}function dt(e,t){ut(e,t,4)}function ht(e,t){ut(e,t,8)}function ft(e,t){ut(e,t,16)}function pt(e,t){var n;for(n=0;16>n;++n)r(e,t+32*n,e,t-32,16)}function mt(e,t){var n;for(n=16;0<n;--n)i(e,t,e[t-1],16),t+=32}function gt(e,t,n){var r;for(r=0;16>r;++r)i(t,n+32*r,e,16)}function yt(e,t){var n,r=16;for(n=0;16>n;++n)r+=e[t-1+32*n]+e[t+n-32];gt(r>>5,e,t)}function vt(e,t){var n,r=8;for(n=0;16>n;++n)r+=e[t-1+32*n];gt(r>>4,e,t)}function wt(e,t){var n,r=8;for(n=0;16>n;++n)r+=e[t+n-32];gt(r>>4,e,t)}function bt(e,t){gt(128,e,t)}function xt(e,t,n){return e+2*t+n+2>>2}function St(e,t){var n,i=t-32;for(i=new Uint8Array([xt(e[i-1],e[i+0],e[i+1]),xt(e[i+0],e[i+1],e[i+2]),xt(e[i+1],e[i+2],e[i+3]),xt(e[i+2],e[i+3],e[i+4])]),n=0;4>n;++n)r(e,t+32*n,i,0,i.length)}function At(e,t){var n=e[t-1],r=e[t-1+32],i=e[t-1+64],s=e[t-1+96];I(e,t+0,16843009*xt(e[t-1-32],n,r)),I(e,t+32,16843009*xt(n,r,i)),I(e,t+64,16843009*xt(r,i,s)),I(e,t+96,16843009*xt(i,s,s))}function Et(e,t){var n,r=4;for(n=0;4>n;++n)r+=e[t+n-32]+e[t-1+32*n];for(r>>=3,n=0;4>n;++n)i(e,t+32*n,r,4)}function Nt(e,t){var n=e[t-1+0],r=e[t-1+32],i=e[t-1+64],s=e[t-1-32],a=e[t+0-32],o=e[t+1-32],l=e[t+2-32],c=e[t+3-32];e[t+0+96]=xt(r,i,e[t-1+96]),e[t+1+96]=e[t+0+64]=xt(n,r,i),e[t+2+96]=e[t+1+64]=e[t+0+32]=xt(s,n,r),e[t+3+96]=e[t+2+64]=e[t+1+32]=e[t+0+0]=xt(a,s,n),e[t+3+64]=e[t+2+32]=e[t+1+0]=xt(o,a,s),e[t+3+32]=e[t+2+0]=xt(l,o,a),e[t+3+0]=xt(c,l,o)}function Ct(e,t){var n=e[t+1-32],r=e[t+2-32],i=e[t+3-32],s=e[t+4-32],a=e[t+5-32],o=e[t+6-32],l=e[t+7-32];e[t+0+0]=xt(e[t+0-32],n,r),e[t+1+0]=e[t+0+32]=xt(n,r,i),e[t+2+0]=e[t+1+32]=e[t+0+64]=xt(r,i,s),e[t+3+0]=e[t+2+32]=e[t+1+64]=e[t+0+96]=xt(i,s,a),e[t+3+32]=e[t+2+64]=e[t+1+96]=xt(s,a,o),e[t+3+64]=e[t+2+96]=xt(a,o,l),e[t+3+96]=xt(o,l,l)}function _t(e,t){var n=e[t-1+0],r=e[t-1+32],i=e[t-1+64],s=e[t-1-32],a=e[t+0-32],o=e[t+1-32],l=e[t+2-32],c=e[t+3-32];e[t+0+0]=e[t+1+64]=s+a+1>>1,e[t+1+0]=e[t+2+64]=a+o+1>>1,e[t+2+0]=e[t+3+64]=o+l+1>>1,e[t+3+0]=l+c+1>>1,e[t+0+96]=xt(i,r,n),e[t+0+64]=xt(r,n,s),e[t+0+32]=e[t+1+96]=xt(n,s,a),e[t+1+32]=e[t+2+96]=xt(s,a,o),e[t+2+32]=e[t+3+96]=xt(a,o,l),e[t+3+32]=xt(o,l,c)}function Tt(e,t){var n=e[t+0-32],r=e[t+1-32],i=e[t+2-32],s=e[t+3-32],a=e[t+4-32],o=e[t+5-32],l=e[t+6-32],c=e[t+7-32];e[t+0+0]=n+r+1>>1,e[t+1+0]=e[t+0+64]=r+i+1>>1,e[t+2+0]=e[t+1+64]=i+s+1>>1,e[t+3+0]=e[t+2+64]=s+a+1>>1,e[t+0+32]=xt(n,r,i),e[t+1+32]=e[t+0+96]=xt(r,i,s),e[t+2+32]=e[t+1+96]=xt(i,s,a),e[t+3+32]=e[t+2+96]=xt(s,a,o),e[t+3+64]=xt(a,o,l),e[t+3+96]=xt(o,l,c)}function It(e,t){var n=e[t-1+0],r=e[t-1+32],i=e[t-1+64],s=e[t-1+96];e[t+0+0]=n+r+1>>1,e[t+2+0]=e[t+0+32]=r+i+1>>1,e[t+2+32]=e[t+0+64]=i+s+1>>1,e[t+1+0]=xt(n,r,i),e[t+3+0]=e[t+1+32]=xt(r,i,s),e[t+3+32]=e[t+1+64]=xt(i,s,s),e[t+3+64]=e[t+2+64]=e[t+0+96]=e[t+1+96]=e[t+2+96]=e[t+3+96]=s}function kt(e,t){var n=e[t-1+0],r=e[t-1+32],i=e[t-1+64],s=e[t-1+96],a=e[t-1-32],o=e[t+0-32],l=e[t+1-32],c=e[t+2-32];e[t+0+0]=e[t+2+32]=n+a+1>>1,e[t+0+32]=e[t+2+64]=r+n+1>>1,e[t+0+64]=e[t+2+96]=i+r+1>>1,e[t+0+96]=s+i+1>>1,e[t+3+0]=xt(o,l,c),e[t+2+0]=xt(a,o,l),e[t+1+0]=e[t+3+32]=xt(n,a,o),e[t+1+32]=e[t+3+64]=xt(r,n,a),e[t+1+64]=e[t+3+96]=xt(i,r,n),e[t+1+96]=xt(s,i,r)}function Pt(e,t){var n;for(n=0;8>n;++n)r(e,t+32*n,e,t-32,8)}function Rt(e,t){var n;for(n=0;8>n;++n)i(e,t,e[t-1],8),t+=32}function Dt(e,t,n){var r;for(r=0;8>r;++r)i(t,n+32*r,e,8)}function Ot(e,t){var n,r=8;for(n=0;8>n;++n)r+=e[t+n-32]+e[t-1+32*n];Dt(r>>4,e,t)}function Lt(e,t){var n,r=4;for(n=0;8>n;++n)r+=e[t+n-32];Dt(r>>3,e,t)}function Mt(e,t){var n,r=4;for(n=0;8>n;++n)r+=e[t-1+32*n];Dt(r>>3,e,t)}function Ft(e,t){Dt(128,e,t)}function jt(e,t,n){var r=e[t-n],i=e[t+0],s=3*(i-r)+Rr[1020+e[t-2*n]-e[t+n]],a=Dr[112+(s+4>>3)];e[t-n]=Or[255+r+Dr[112+(s+3>>3)]],e[t+0]=Or[255+i-a]}function Bt(e,t,n,r){var i=e[t+0],s=e[t+n];return Lr[255+e[t-2*n]-e[t-n]]>r||Lr[255+s-i]>r}function Ut(e,t,n,r){return 4*Lr[255+e[t-n]-e[t+0]]+Lr[255+e[t-2*n]-e[t+n]]<=r}function zt(e,t,n,r,i){var s=e[t-3*n],a=e[t-2*n],o=e[t-n],l=e[t+0],c=e[t+n],u=e[t+2*n],d=e[t+3*n];return 4*Lr[255+o-l]+Lr[255+a-c]>r?0:Lr[255+e[t-4*n]-s]<=i&&Lr[255+s-a]<=i&&Lr[255+a-o]<=i&&Lr[255+d-u]<=i&&Lr[255+u-c]<=i&&Lr[255+c-l]<=i}function Vt(e,t,n,r){var i=2*r+1;for(r=0;16>r;++r)Ut(e,t+r,n,i)&&jt(e,t+r,n)}function Ht(e,t,n,r){var i=2*r+1;for(r=0;16>r;++r)Ut(e,t+r*n,1,i)&&jt(e,t+r*n,1)}function Wt(e,t,n,r){var i;for(i=3;0<i;--i)Vt(e,t+=4*n,n,r)}function qt(e,t,n,r){var i;for(i=3;0<i;--i)Ht(e,t+=4,n,r)}function Gt(e,t,n,r,i,s,a,o){for(s=2*s+1;0<i--;){if(zt(e,t,n,s,a))if(Bt(e,t,n,o))jt(e,t,n);else{var l=e,c=t,u=n,d=l[c-2*u],h=l[c-u],f=l[c+0],p=l[c+u],m=l[c+2*u],g=27*(v=Rr[1020+3*(f-h)+Rr[1020+d-p]])+63>>7,y=18*v+63>>7,v=9*v+63>>7;l[c-3*u]=Or[255+l[c-3*u]+v],l[c-2*u]=Or[255+d+y],l[c-u]=Or[255+h+g],l[c+0]=Or[255+f-g],l[c+u]=Or[255+p-y],l[c+2*u]=Or[255+m-v]}t+=r}}function Kt(e,t,n,r,i,s,a,o){for(s=2*s+1;0<i--;){if(zt(e,t,n,s,a))if(Bt(e,t,n,o))jt(e,t,n);else{var l=e,c=t,u=n,d=l[c-u],h=l[c+0],f=l[c+u],p=Dr[112+(4+(m=3*(h-d))>>3)],m=Dr[112+(m+3>>3)],g=p+1>>1;l[c-2*u]=Or[255+l[c-2*u]+g],l[c-u]=Or[255+d+m],l[c+0]=Or[255+h-p],l[c+u]=Or[255+f-g]}t+=r}}function Yt(e,t,n,r,i,s){Gt(e,t,n,1,16,r,i,s)}function Xt(e,t,n,r,i,s){Gt(e,t,1,n,16,r,i,s)}function Qt(e,t,n,r,i,s){var a;for(a=3;0<a;--a)Kt(e,t+=4*n,n,1,16,r,i,s)}function Jt(e,t,n,r,i,s){var a;for(a=3;0<a;--a)Kt(e,t+=4,1,n,16,r,i,s)}function Zt(e,t,n,r,i,s,a,o){Gt(e,t,i,1,8,s,a,o),Gt(n,r,i,1,8,s,a,o)}function $t(e,t,n,r,i,s,a,o){Gt(e,t,1,i,8,s,a,o),Gt(n,r,1,i,8,s,a,o)}function en(e,t,n,r,i,s,a,o){Kt(e,t+4*i,i,1,8,s,a,o),Kt(n,r+4*i,i,1,8,s,a,o)}function tn(e,t,n,r,i,s,a,o){Kt(e,t+4,1,i,8,s,a,o),Kt(n,r+4,1,i,8,s,a,o)}function nn(){this.ba=new ae,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new le,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function rn(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function sn(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function an(){this.ua=0,this.Wa=new L,this.vb=new L,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new f,this.yc=new d}function on(){this.xb=this.a=0,this.l=new Ge,this.ca=new ae,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new x,this.Pb=0,this.wd=new x,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new an,this.ab=0,this.gc=a(4,sn),this.Oc=0}function ln(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ge,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function cn(e,t,n,r,i,s,a){for(e=null==e?0:e[t+0],t=0;t<a;++t)i[s+t]=e+n[r+t]&255,e=i[s+t]}function un(e,t,n,r,i,s,a){var o;if(null==e)cn(null,null,n,r,i,s,a);else for(o=0;o<a;++o)i[s+o]=e[t+o]+n[r+o]&255}function dn(e,t,n,r,i,s,a){if(null==e)cn(null,null,n,r,i,s,a);else{var o,l=e[t+0],c=l,u=l;for(o=0;o<a;++o)c=u+(l=e[t+o])-c,u=n[r+o]+(-256&c?0>c?0:255:c)&255,c=l,i[s+o]=u}}function hn(e,n,i,a){var o=n.width,l=n.o;if(t(null!=e&&null!=n),0>i||0>=a||i+a>l)return null;if(!e.Cc){if(null==e.ga){var c;if(e.ga=new ln,(c=null==e.ga)||(c=n.width*n.o,t(0==e.Gb.length),e.Gb=s(c),e.Uc=0,null==e.Gb?c=0:(e.mb=e.Gb,e.nb=e.Uc,e.rc=null,c=1),c=!c),!c){c=e.ga;var u=e.Fa,d=e.P,h=e.qc,f=e.mb,p=e.nb,m=d+1,g=h-1,v=c.l;if(t(null!=u&&null!=f&&null!=n),gi[0]=null,gi[1]=cn,gi[2]=un,gi[3]=dn,c.ca=f,c.tb=p,c.c=n.width,c.i=n.height,t(0<c.c&&0<c.i),1>=h)n=0;else if(c.$a=3&u[d+0],c.Z=u[d+0]>>2&3,c.Lc=u[d+0]>>4&3,d=u[d+0]>>6&3,0>c.$a||1<c.$a||4<=c.Z||1<c.Lc||d)n=0;else if(v.put=fe,v.ac=he,v.bc=pe,v.ma=c,v.width=n.width,v.height=n.height,v.Da=n.Da,v.v=n.v,v.va=n.va,v.j=n.j,v.o=n.o,c.$a)e:{t(1==c.$a),n=Te();t:for(;;){if(null==n){n=0;break e}if(t(null!=c),c.mc=n,n.c=c.c,n.i=c.i,n.l=c.l,n.l.ma=c,n.l.width=c.c,n.l.height=c.i,n.a=0,y(n.m,u,m,g),!Ie(c.c,c.i,1,n,null))break t;if(1==n.ab&&3==n.gc[0].hc&&Ae(n.s)?(c.ic=1,u=n.c*n.i,n.Ta=null,n.Ua=0,n.V=s(u),n.Ba=0,null==n.V?(n.a=1,n=0):n=1):(c.ic=0,n=ke(n,c.c)),!n)break t;n=1;break e}c.mc=null,n=0}else n=g>=c.c*c.i;c=!n}if(c)return null;1!=e.ga.Lc?e.Ga=0:a=l-i}t(null!=e.ga),t(i+a<=l);e:{if(n=(u=e.ga).c,l=u.l.o,0==u.$a){if(m=e.rc,g=e.Vc,v=e.Fa,d=e.P+1+i*n,h=e.mb,f=e.nb+i*n,t(d<=e.P+e.qc),0!=u.Z)for(t(null!=gi[u.Z]),c=0;c<a;++c)gi[u.Z](m,g,v,d,h,f,n),m=h,g=f,f+=n,d+=n;else for(c=0;c<a;++c)r(h,f,v,d,n),m=h,g=f,f+=n,d+=n;e.rc=m,e.Vc=g}else{if(t(null!=u.mc),n=i+a,t(null!=(c=u.mc)),t(n<=c.i),c.C>=n)n=1;else if(u.ic||yn(),u.ic){u=c.V,m=c.Ba,g=c.c;var w=c.i,b=(v=1,d=c.$/g,h=c.$%g,f=c.m,p=c.s,c.$),x=g*w,S=g*n,E=p.wc,C=b<S?be(p,h,d):null;t(b<=x),t(n<=w),t(Ae(p));t:for(;;){for(;!f.h&&b<S;){if(h&E||(C=be(p,h,d)),t(null!=C),N(f),256>(w=ve(C.G[0],C.H[0],f)))u[m+b]=w,++b,++h>=g&&(h=0,++d<=n&&!(d%16)&&Ne(c,d));else{if(!(280>w)){v=0;break t}w=ge(w-256,f);var _,T=ve(C.G[4],C.H[4],f);if(N(f),!(b>=(T=ye(g,T=ge(T,f)))&&x-b>=w)){v=0;break t}for(_=0;_<w;++_)u[m+b+_]=u[m+b+_-T];for(b+=w,h+=w;h>=g;)h-=g,++d<=n&&!(d%16)&&Ne(c,d);b<S&&h&E&&(C=be(p,h,d))}t(f.h==A(f))}Ne(c,d>n?n:d);break t}!v||f.h&&b<x?(v=0,c.a=f.h?5:3):c.$=b,n=v}else n=Ce(c,c.V,c.Ba,c.c,c.i,n,Pe);if(!n){a=0;break e}}i+a>=l&&(e.Cc=1),a=1}if(!a)return null;if(e.Cc&&(null!=(a=e.ga)&&(a.mc=null),e.ga=null,0<e.Ga))return alert("todo:WebPDequantizeLevels"),null}return e.nb+i*o}function fn(e,t,n,r,i,s){for(;0<i--;){var a,o=e,l=t+(n?1:0),c=e,u=t+(n?0:3);for(a=0;a<r;++a){var d=c[u+4*a];255!=d&&(d*=32897,o[l+4*a+0]=o[l+4*a+0]*d>>23,o[l+4*a+1]=o[l+4*a+1]*d>>23,o[l+4*a+2]=o[l+4*a+2]*d>>23)}t+=s}}function pn(e,t,n,r,i){for(;0<r--;){var s;for(s=0;s<n;++s){var a=e[t+2*s+0],o=15&(c=e[t+2*s+1]),l=4369*o,c=(240&c|c>>4)*l>>16;e[t+2*s+0]=(240&a|a>>4)*l>>16&240|(15&a|a<<4)*l>>16>>4&15,e[t+2*s+1]=240&c|o}t+=i}}function mn(e,t,n,r,i,s,a,o){var l,c,u=255;for(c=0;c<i;++c){for(l=0;l<r;++l){var d=e[t+l];s[a+4*l]=d,u&=d}t+=n,a+=o}return 255!=u}function gn(e,t,n,r,i){var s;for(s=0;s<i;++s)n[r+s]=e[t+s]>>8}function yn(){Ar=fn,Er=pn,Nr=mn,Cr=gn}function vn(n,r,i){e[n]=function(e,n,s,a,o,l,c,u,d,h,f,p,m,g,y,v,w){var b,x=w-1>>1,S=o[l+0]|c[u+0]<<16,A=d[h+0]|f[p+0]<<16;t(null!=e);var E=3*S+A+131074>>2;for(r(e[n+0],255&E,E>>16,m,g),null!=s&&(E=3*A+S+131074>>2,r(s[a+0],255&E,E>>16,y,v)),b=1;b<=x;++b){var N=o[l+b]|c[u+b]<<16,C=d[h+b]|f[p+b]<<16,_=S+N+A+C+524296,T=_+2*(N+A)>>3;E=T+S>>1,S=(_=_+2*(S+C)>>3)+N>>1,r(e[n+2*b-1],255&E,E>>16,m,g+(2*b-1)*i),r(e[n+2*b-0],255&S,S>>16,m,g+(2*b-0)*i),null!=s&&(E=_+A>>1,S=T+C>>1,r(s[a+2*b-1],255&E,E>>16,y,v+(2*b-1)*i),r(s[a+2*b+0],255&S,S>>16,y,v+(2*b+0)*i)),S=N,A=C}1&w||(E=3*S+A+131074>>2,r(e[n+w-1],255&E,E>>16,m,g+(w-1)*i),null!=s&&(E=3*A+S+131074>>2,r(s[a+w-1],255&E,E>>16,y,v+(w-1)*i)))}}function wn(){yi[Mr]=vi,yi[Fr]=bi,yi[jr]=wi,yi[Br]=xi,yi[Ur]=Si,yi[zr]=Ai,yi[Vr]=Ei,yi[Hr]=bi,yi[Wr]=xi,yi[qr]=Si,yi[Gr]=Ai}function bn(e){return e&~ki?0>e?0:255:e>>Ii}function xn(e,t){return bn((19077*e>>8)+(26149*t>>8)-14234)}function Sn(e,t,n){return bn((19077*e>>8)-(6419*t>>8)-(13320*n>>8)+8708)}function An(e,t){return bn((19077*e>>8)+(33050*t>>8)-17685)}function En(e,t,n,r,i){r[i+0]=xn(e,n),r[i+1]=Sn(e,t,n),r[i+2]=An(e,t)}function Nn(e,t,n,r,i){r[i+0]=An(e,t),r[i+1]=Sn(e,t,n),r[i+2]=xn(e,n)}function Cn(e,t,n,r,i){var s=Sn(e,t,n);t=s<<3&224|An(e,t)>>3,r[i+0]=248&xn(e,n)|s>>5,r[i+1]=t}function _n(e,t,n,r,i){var s=240&An(e,t)|15;r[i+0]=240&xn(e,n)|Sn(e,t,n)>>4,r[i+1]=s}function Tn(e,t,n,r,i){r[i+0]=255,En(e,t,n,r,i+1)}function In(e,t,n,r,i){Nn(e,t,n,r,i),r[i+3]=255}function kn(e,t,n,r,i){En(e,t,n,r,i),r[i+3]=255}function qe(e,t){return 0>e?0:e>t?t:e}function Pn(t,n,r){e[t]=function(e,t,i,s,a,o,l,c,u){for(var d=c+(-2&u)*r;c!=d;)n(e[t+0],i[s+0],a[o+0],l,c),n(e[t+1],i[s+0],a[o+0],l,c+r),t+=2,++s,++o,c+=2*r;1&u&&n(e[t+0],i[s+0],a[o+0],l,c)}}function Rn(e,t,n){return 0==n?0==e?0==t?6:5:0==t?4:0:n}function Dn(e,t,n,r,i){switch(e>>>30){case 3:ar(t,n,r,i,0);break;case 2:or(t,n,r,i);break;case 1:cr(t,n,r,i)}}function On(e,t){var n,s,a=t.M,o=t.Nb,l=e.oc,c=e.pc+40,u=e.oc,d=e.pc+584,h=e.oc,f=e.pc+600;for(n=0;16>n;++n)l[c+32*n-1]=129;for(n=0;8>n;++n)u[d+32*n-1]=129,h[f+32*n-1]=129;for(0<a?l[c-1-32]=u[d-1-32]=h[f-1-32]=129:(i(l,c-32-1,127,21),i(u,d-32-1,127,9),i(h,f-32-1,127,9)),s=0;s<e.za;++s){var p=t.ya[t.aa+s];if(0<s){for(n=-1;16>n;++n)r(l,c+32*n-4,l,c+32*n+12,4);for(n=-1;8>n;++n)r(u,d+32*n-4,u,d+32*n+4,4),r(h,f+32*n-4,h,f+32*n+4,4)}var m=e.Gd,g=e.Hd+s,y=p.ad,v=p.Hc;if(0<a&&(r(l,c-32,m[g].y,0,16),r(u,d-32,m[g].f,0,8),r(h,f-32,m[g].ea,0,8)),p.Za){var w=l,b=c-32+16;for(0<a&&(s>=e.za-1?i(w,b,m[g].y[15],4):r(w,b,m[g+1].y,0,4)),n=0;4>n;n++)w[b+128+n]=w[b+256+n]=w[b+384+n]=w[b+0+n];for(n=0;16>n;++n,v<<=2)w=l,b=c+ji[n],hi[p.Ob[n]](w,b),Dn(v,y,16*+n,w,b)}else if(w=Rn(s,a,p.Ob[0]),di[w](l,c),0!=v)for(n=0;16>n;++n,v<<=2)Dn(v,y,16*+n,l,c+ji[n]);for(n=p.Gc,w=Rn(s,a,p.Dd),fi[w](u,d),fi[w](h,f),v=y,w=u,b=d,255&(p=n|0)&&(170&p?lr(v,256,w,b):ur(v,256,w,b)),p=h,v=f,255&(n>>=8)&&(170&n?lr(y,320,p,v):ur(y,320,p,v)),a<e.Ub-1&&(r(m[g].y,0,l,c+480,16),r(m[g].f,0,u,d+224,8),r(m[g].ea,0,h,f+224,8)),n=8*o*e.B,m=e.sa,g=e.ta+16*s+16*o*e.R,y=e.qa,p=e.ra+8*s+n,v=e.Ha,w=e.Ia+8*s+n,n=0;16>n;++n)r(m,g+n*e.R,l,c+32*n,16);for(n=0;8>n;++n)r(y,p+n*e.B,u,d+32*n,8),r(v,w+n*e.B,h,f+32*n,8)}}function Ln(e,r,i,s,a,o,l,c,u){var d=[0],h=[0],f=0,p=null!=u?u.kd:0,m=null!=u?u:new rn;if(null==e||12>i)return 7;m.data=e,m.w=r,m.ha=i,r=[r],i=[i],m.gb=[m.gb];e:{var g=r,v=i,w=m.gb;if(t(null!=e),t(null!=v),t(null!=w),w[0]=0,12<=v[0]&&!n(e,g[0],"RIFF")){if(n(e,g[0]+8,"WEBP")){w=3;break e}var b=R(e,g[0]+4);if(12>b||4294967286<b){w=3;break e}if(p&&b>v[0]-8){w=7;break e}w[0]=b,g[0]+=12,v[0]-=12}w=0}if(0!=w)return w;for(b=0<m.gb[0],i=i[0];;){e:{var S=e;v=r,w=i;var A=d,E=h,N=g=[0];if((T=f=[f])[0]=0,8>w[0])w=7;else{if(!n(S,v[0],"VP8X")){if(10!=R(S,v[0]+4)){w=3;break e}if(18>w[0]){w=7;break e}var C=R(S,v[0]+8),_=1+P(S,v[0]+12);if(2147483648<=_*(S=1+P(S,v[0]+15))){w=3;break e}null!=N&&(N[0]=C),null!=A&&(A[0]=_),null!=E&&(E[0]=S),v[0]+=18,w[0]-=18,T[0]=1}w=0}}if(f=f[0],g=g[0],0!=w)return w;if(v=!!(2&g),!b&&f)return 3;if(null!=o&&(o[0]=!!(16&g)),null!=l&&(l[0]=v),null!=c&&(c[0]=0),l=d[0],g=h[0],f&&v&&null==u){w=0;break}if(4>i){w=7;break}if(b&&f||!b&&!f&&!n(e,r[0],"ALPH")){i=[i],m.na=[m.na],m.P=[m.P],m.Sa=[m.Sa];e:{C=e,w=r,b=i;var T=m.gb;A=m.na,E=m.P,N=m.Sa,_=22,t(null!=C),t(null!=b),S=w[0];var I=b[0];for(t(null!=A),t(null!=N),A[0]=null,E[0]=null,N[0]=0;;){if(w[0]=S,b[0]=I,8>I){w=7;break e}var k=R(C,S+4);if(4294967286<k){w=3;break e}var D=8+k+1&-2;if(_+=D,0<T&&_>T){w=3;break e}if(!n(C,S,"VP8 ")||!n(C,S,"VP8L")){w=0;break e}if(I[0]<D){w=7;break e}n(C,S,"ALPH")||(A[0]=C,E[0]=S+8,N[0]=k),S+=D,I-=D}}if(i=i[0],m.na=m.na[0],m.P=m.P[0],m.Sa=m.Sa[0],0!=w)break}i=[i],m.Ja=[m.Ja],m.xa=[m.xa];e:if(T=e,w=r,b=i,A=m.gb[0],E=m.Ja,N=m.xa,C=w[0],S=!n(T,C,"VP8 "),_=!n(T,C,"VP8L"),t(null!=T),t(null!=b),t(null!=E),t(null!=N),8>b[0])w=7;else{if(S||_){if(T=R(T,C+4),12<=A&&T>A-12){w=3;break e}if(p&&T>b[0]-8){w=7;break e}E[0]=T,w[0]+=8,b[0]-=8,N[0]=_}else N[0]=5<=b[0]&&47==T[C+0]&&!(T[C+4]>>5),E[0]=b[0];w=0}if(i=i[0],m.Ja=m.Ja[0],m.xa=m.xa[0],r=r[0],0!=w)break;if(4294967286<m.Ja)return 3;if(null==c||v||(c[0]=m.xa?2:1),l=[l],g=[g],m.xa){if(5>i){w=7;break}c=l,p=g,v=o,null==e||5>i?e=0:5<=i&&47==e[r+0]&&!(e[r+4]>>5)?(b=[0],T=[0],A=[0],y(E=new x,e,r,i),me(E,b,T,A)?(null!=c&&(c[0]=b[0]),null!=p&&(p[0]=T[0]),null!=v&&(v[0]=A[0]),e=1):e=0):e=0}else{if(10>i){w=7;break}c=g,null==e||10>i||!Xe(e,r+3,i-3)?e=0:(p=e[r+0]|e[r+1]<<8|e[r+2]<<16,v=16383&(e[r+7]<<8|e[r+6]),e=16383&(e[r+9]<<8|e[r+8]),1&p||3<(p>>1&7)||!(p>>4&1)||p>>5>=m.Ja||!v||!e?e=0:(l&&(l[0]=v),c&&(c[0]=e),e=1))}if(!e)return 3;if(l=l[0],g=g[0],f&&(d[0]!=l||h[0]!=g))return 3;null!=u&&(u[0]=m,u.offset=r-u.w,t(4294967286>r-u.w),t(u.offset==u.ha-i));break}return 0==w||7==w&&f&&null==u?(null!=o&&(o[0]|=null!=m.na&&0<m.na.length),null!=s&&(s[0]=l),null!=a&&(a[0]=g),0):w}function Mn(e,t,n){var r=t.width,i=t.height,s=0,a=0,o=r,l=i;if(t.Da=null!=e&&0<e.Da,t.Da&&(o=e.cd,l=e.bd,s=e.v,a=e.j,11>n||(s&=-2,a&=-2),0>s||0>a||0>=o||0>=l||s+o>r||a+l>i))return 0;if(t.v=s,t.j=a,t.va=s+o,t.o=a+l,t.U=o,t.T=l,t.da=null!=e&&0<e.da,t.da){if(!M(o,l,n=[e.ib],s=[e.hb]))return 0;t.ib=n[0],t.hb=s[0]}return t.ob=null!=e&&e.ob,t.Kb=null==e||!e.Sd,t.da&&(t.ob=t.ib<3*r/4&&t.hb<3*i/4,t.Kb=0),1}function Fn(e){if(null==e)return 2;if(11>e.S){var t=e.f.RGBA;t.fb+=(e.height-1)*t.A,t.A=-t.A}else t=e.f.kb,e=e.height,t.O+=(e-1)*t.fa,t.fa=-t.fa,t.N+=(e-1>>1)*t.Ab,t.Ab=-t.Ab,t.W+=(e-1>>1)*t.Db,t.Db=-t.Db,null!=t.F&&(t.J+=(e-1)*t.lb,t.lb=-t.lb);return 0}function jn(e,t,n,r){if(null==r||0>=e||0>=t)return 2;if(null!=n){if(n.Da){var i=n.cd,a=n.bd,o=-2&n.v,l=-2&n.j;if(0>o||0>l||0>=i||0>=a||o+i>e||l+a>t)return 2;e=i,t=a}if(n.da){if(!M(e,t,i=[n.ib],a=[n.hb]))return 2;e=i[0],t=a[0]}}r.width=e,r.height=t;e:{var c=r.width,u=r.height;if(e=r.S,0>=c||0>=u||!(e>=Mr&&13>e))e=2;else{if(0>=r.Rd&&null==r.sd){o=a=i=t=0;var d=(l=c*Vi[e])*u;if(11>e||(a=(u+1)/2*(t=(c+1)/2),12==e&&(o=(i=c)*u)),null==(u=s(d+2*a+o))){e=1;break e}r.sd=u,11>e?((c=r.f.RGBA).eb=u,c.fb=0,c.A=l,c.size=d):((c=r.f.kb).y=u,c.O=0,c.fa=l,c.Fd=d,c.f=u,c.N=0+d,c.Ab=t,c.Cd=a,c.ea=u,c.W=0+d+a,c.Db=t,c.Ed=a,12==e&&(c.F=u,c.J=0+d+2*a),c.Tc=o,c.lb=i)}if(t=1,i=r.S,a=r.width,o=r.height,i>=Mr&&13>i)if(11>i)e=r.f.RGBA,t&=(l=Math.abs(e.A))*(o-1)+a<=e.size,t&=l>=a*Vi[i],t&=null!=e.eb;else{e=r.f.kb,l=(a+1)/2,d=(o+1)/2,c=Math.abs(e.fa),u=Math.abs(e.Ab);var h=Math.abs(e.Db),f=Math.abs(e.lb),p=f*(o-1)+a;t&=c*(o-1)+a<=e.Fd,t&=u*(d-1)+l<=e.Cd,t=(t&=h*(d-1)+l<=e.Ed)&c>=a&u>=l&h>=l,t&=null!=e.y,t&=null!=e.f,t&=null!=e.ea,12==i&&(t&=f>=a,t&=p<=e.Tc,t&=null!=e.F)}else t=0;e=t?0:2}}return 0!=e||null!=n&&n.fd&&(e=Fn(r)),e}var Bn=64,Un=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],zn=24,Vn=32,Hn=8,Wn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];B("Predictor0","PredictorAdd0"),e.Predictor0=function(){return 4278190080},e.Predictor1=function(e){return e},e.Predictor2=function(e,t,n){return t[n+0]},e.Predictor3=function(e,t,n){return t[n+1]},e.Predictor4=function(e,t,n){return t[n-1]},e.Predictor5=function(e,t,n){return z(z(e,t[n+1]),t[n+0])},e.Predictor6=function(e,t,n){return z(e,t[n-1])},e.Predictor7=function(e,t,n){return z(e,t[n+0])},e.Predictor8=function(e,t,n){return z(t[n-1],t[n+0])},e.Predictor9=function(e,t,n){return z(t[n+0],t[n+1])},e.Predictor10=function(e,t,n){return z(z(e,t[n-1]),z(t[n+0],t[n+1]))},e.Predictor11=function(e,t,n){var r=t[n+0];return 0>=W(r>>24&255,e>>24&255,(t=t[n-1])>>24&255)+W(r>>16&255,e>>16&255,t>>16&255)+W(r>>8&255,e>>8&255,t>>8&255)+W(255&r,255&e,255&t)?r:e},e.Predictor12=function(e,t,n){var r=t[n+0];return(V((e>>24&255)+(r>>24&255)-((t=t[n-1])>>24&255))<<24|V((e>>16&255)+(r>>16&255)-(t>>16&255))<<16|V((e>>8&255)+(r>>8&255)-(t>>8&255))<<8|V((255&e)+(255&r)-(255&t)))>>>0},e.Predictor13=function(e,t,n){var r=t[n-1];return(H((e=z(e,t[n+0]))>>24&255,r>>24&255)<<24|H(e>>16&255,r>>16&255)<<16|H(e>>8&255,r>>8&255)<<8|H(255&e,255&r))>>>0};var qn=e.PredictorAdd0;e.PredictorAdd1=q,B("Predictor2","PredictorAdd2"),B("Predictor3","PredictorAdd3"),B("Predictor4","PredictorAdd4"),B("Predictor5","PredictorAdd5"),B("Predictor6","PredictorAdd6"),B("Predictor7","PredictorAdd7"),B("Predictor8","PredictorAdd8"),B("Predictor9","PredictorAdd9"),B("Predictor10","PredictorAdd10"),B("Predictor11","PredictorAdd11"),B("Predictor12","PredictorAdd12"),B("Predictor13","PredictorAdd13");var Gn=e.PredictorAdd2;X("ColorIndexInverseTransform","MapARGB","32b",function(e){return e>>8&255},function(e){return e}),X("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(e){return e},function(e){return e>>8&255});var Kn,Yn=e.ColorIndexInverseTransform,Xn=e.MapARGB,Qn=e.VP8LColorIndexInverseTransformAlpha,Jn=e.MapAlpha,Zn=e.VP8LPredictorsAdd=[];Zn.length=16,(e.VP8LPredictors=[]).length=16,(e.VP8LPredictorsAdd_C=[]).length=16,(e.VP8LPredictors_C=[]).length=16;var $n,er,tr,nr,rr,ir,sr,ar,or,lr,cr,ur,dr,hr,fr,pr,mr,gr,yr,vr,wr,br,xr,Sr,Ar,Er,Nr,Cr,_r=s(511),Tr=s(2041),Ir=s(225),kr=s(767),Pr=0,Rr=Tr,Dr=Ir,Or=kr,Lr=_r,Mr=0,Fr=1,jr=2,Br=3,Ur=4,zr=5,Vr=6,Hr=7,Wr=8,qr=9,Gr=10,Kr=[2,3,7],Yr=[3,3,11],Xr=[280,256,256,256,40],Qr=[0,1,1,1,0],Jr=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Zr=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],$r=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],ei=8,ti=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],ni=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ri=null,ii=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],si=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],ai=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],oi=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],li=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],ci=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],ui=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],di=[],hi=[],fi=[],pi=1,mi=2,gi=[],yi=[];vn("UpsampleRgbLinePair",En,3),vn("UpsampleBgrLinePair",Nn,3),vn("UpsampleRgbaLinePair",kn,4),vn("UpsampleBgraLinePair",In,4),vn("UpsampleArgbLinePair",Tn,4),vn("UpsampleRgba4444LinePair",_n,2),vn("UpsampleRgb565LinePair",Cn,2);var vi=e.UpsampleRgbLinePair,wi=e.UpsampleBgrLinePair,bi=e.UpsampleRgbaLinePair,xi=e.UpsampleBgraLinePair,Si=e.UpsampleArgbLinePair,Ai=e.UpsampleRgba4444LinePair,Ei=e.UpsampleRgb565LinePair,Ni=16,Ci=1<<Ni-1,_i=-227,Ti=482,Ii=6,ki=(256<<Ii)-1,Pi=0,Ri=s(256),Di=s(256),Oi=s(256),Li=s(256),Mi=s(Ti-_i),Fi=s(Ti-_i);Pn("YuvToRgbRow",En,3),Pn("YuvToBgrRow",Nn,3),Pn("YuvToRgbaRow",kn,4),Pn("YuvToBgraRow",In,4),Pn("YuvToArgbRow",Tn,4),Pn("YuvToRgba4444Row",_n,2),Pn("YuvToRgb565Row",Cn,2);var ji=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Bi=[0,2,8],Ui=[8,7,6,4,4,2,2,2,1,1,1,1],zi=1;this.WebPDecodeRGBA=function(e,n,r,i,s){var a=Fr,o=new nn,l=new ae;o.ba=l,l.S=a,l.width=[l.width],l.height=[l.height];var c=l.width,u=l.height,d=new oe;if(null==d||null==e)var h=2;else t(null!=d),h=Ln(e,n,r,d.width,d.height,d.Pd,d.Qd,d.format,null);if(0!=h?c=0:(null!=c&&(c[0]=d.width[0]),null!=u&&(u[0]=d.height[0]),c=1),c){l.width=l.width[0],l.height=l.height[0],null!=i&&(i[0]=l.width),null!=s&&(s[0]=l.height);e:{if(i=new Ge,(s=new rn).data=e,s.w=n,s.ha=r,s.kd=1,n=[0],t(null!=s),(0==(e=Ln(s.data,s.w,s.ha,null,null,null,n,null,s))||7==e)&&n[0]&&(e=4),0==(n=e)){if(t(null!=o),i.data=s.data,i.w=s.w+s.offset,i.ha=s.ha-s.offset,i.put=fe,i.ac=he,i.bc=pe,i.ma=o,s.xa){if(null==(e=Te())){o=1;break e}if(function(e,n){var r=[0],i=[0],s=[0];t:for(;;){if(null==e)return 0;if(null==n)return e.a=2,0;if(e.l=n,e.a=0,y(e.m,n.data,n.w,n.ha),!me(e.m,r,i,s)){e.a=3;break t}if(e.xb=mi,n.width=r[0],n.height=i[0],!Ie(r[0],i[0],1,e,null))break t;return 1}return t(0!=e.a),0}(e,i)){if(i=0==(n=jn(i.width,i.height,o.Oa,o.ba))){t:{i=e;n:for(;;){if(null==i){i=0;break t}if(t(null!=i.s.yc),t(null!=i.s.Ya),t(0<i.s.Wb),t(null!=(r=i.l)),t(null!=(s=r.ma)),0!=i.xb){if(i.ca=s.ba,i.tb=s.tb,t(null!=i.ca),!Mn(s.Oa,r,Br)){i.a=2;break n}if(!ke(i,r.width))break n;if(r.da)break n;if((r.da||re(i.ca.S))&&yn(),11>i.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),null!=i.ca.f.kb.F&&yn()),i.Pb&&0<i.s.ua&&null==i.s.vb.X&&!D(i.s.vb,i.s.Wa.Xa)){i.a=1;break n}i.xb=0}if(!Ce(i,i.V,i.Ba,i.c,i.i,r.o,Se))break n;s.Dc=i.Ma,i=1;break t}t(0!=i.a),i=0}i=!i}i&&(n=e.a)}else n=e.a}else{if(null==(e=new Ke)){o=1;break e}if(e.Fa=s.na,e.P=s.P,e.qc=s.Sa,Qe(e,i)){if(0==(n=jn(i.width,i.height,o.Oa,o.ba))){if(e.Aa=0,r=o.Oa,t(null!=(s=e)),null!=r){if(0<(c=0>(c=r.Md)?0:100<c?255:255*c/100)){for(u=d=0;4>u;++u)12>(h=s.pb[u]).lc&&(h.ia=c*Ui[0>h.lc?0:h.lc]>>3),d|=h.ia;d&&(alert("todo:VP8InitRandom"),s.ia=1)}s.Ga=r.Id,100<s.Ga?s.Ga=100:0>s.Ga&&(s.Ga=0)}$e(e,i)||(n=e.a)}}else n=e.a}0==n&&null!=o.Oa&&o.Oa.fd&&(n=Fn(o.ba))}o=n}a=0!=o?null:11>a?l.f.RGBA.eb:l.f.kb.y}else a=null;return a};var Vi=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(e,t){for(var n="",r=0;r<4;r++)n+=String.fromCharCode(e[t++]);return n}function u(e,t){return(e[t+0]|e[t+1]<<8|e[t+2]<<16)>>>0}function d(e,t){return(e[t+0]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}new l;var h=[0],f=[0],p=[],m=new l,g=e,y=function(e,t){var n={},r=0,i=!1,s=0,a=0;if(n.frames=[],!function(e,t){for(var n=0;n<4;n++)if(e[t+n]!="RIFF".charCodeAt(n))return!0;return!1}(e,t)){var o,l;for(d(e,t+=4),t+=8;t<e.length;){var h=c(e,t),f=d(e,t+=4);t+=4;var p=f+(1&f);switch(h){case"VP8 ":case"VP8L":void 0===n.frames[r]&&(n.frames[r]={}),(y=n.frames[r]).src_off=i?a:t-8,y.src_size=s+f+8,r++,i&&(i=!1,s=0,a=0);break;case"VP8X":(y=n.header={}).feature_flags=e[t];var m=t+4;y.canvas_width=1+u(e,m),m+=3,y.canvas_height=1+u(e,m),m+=3;break;case"ALPH":i=!0,s=p+8,a=t-8;break;case"ANIM":(y=n.header).bgcolor=d(e,t),m=t+4,y.loop_count=(o=e)[(l=m)+0]|o[l+1]<<8,m+=2;break;case"ANMF":var g,y;(y=n.frames[r]={}).offset_x=2*u(e,t),t+=3,y.offset_y=2*u(e,t),t+=3,y.width=1+u(e,t),t+=3,y.height=1+u(e,t),t+=3,y.duration=u(e,t),t+=3,g=e[t++],y.dispose=1&g,y.blend=g>>1&1}"ANMF"!=h&&(t+=p)}return n}}(g,0);y.response=g,y.rgbaoutput=!0,y.dataurl=!1;var v=y.header?y.header:null,w=y.frames?y.frames:null;if(v){v.loop_counter=v.loop_count,h=[v.canvas_height],f=[v.canvas_width];for(var b=0;b<w.length&&0!=w[b].blend;b++);}var x=w[0],S=m.WebPDecodeRGBA(g,x.src_off,x.src_size,f,h);x.rgba=S,x.imgwidth=f[0],x.imgheight=h[0];for(var A=0;A<f[0]*h[0]*4;A++)p[A]=S[A];return this.width=f,this.height=h,this.data=p,this}!function(e){var t=function(t,r,l,c){var u=4,d=s;switch(c){case e.image_compression.FAST:u=1,d=i;break;case e.image_compression.MEDIUM:u=6,d=a;break;case e.image_compression.SLOW:u=9,d=o}var h=J(t=n(t,r,l,d),{level:u});return e.__addimage__.arrayBufferToBinaryString(h)},n=function(e,t,n,r){for(var i,s,a,o=e.length/t,l=new Uint8Array(e.length+o),d=c(),h=0;h<o;h+=1){if(a=h*t,i=e.subarray(a,a+t),r)l.set(r(i,n,s),a+h);else{for(var f,p=d.length,m=[];f<p;f+=1)m[f]=d[f](i,n,s);var g=u(m.concat());l.set(m[g],a+h)}s=i}return l},r=function(e){var t=Array.apply([],e);return t.unshift(0),t},i=function(e,t){var n,r=[],i=e.length;r[0]=1;for(var s=0;s<i;s+=1)n=e[s-t]||0,r[s+1]=e[s]-n+256&255;return r},s=function(e,t,n){var r,i=[],s=e.length;i[0]=2;for(var a=0;a<s;a+=1)r=n&&n[a]||0,i[a+1]=e[a]-r+256&255;return i},a=function(e,t,n){var r,i,s=[],a=e.length;s[0]=3;for(var o=0;o<a;o+=1)r=e[o-t]||0,i=n&&n[o]||0,s[o+1]=e[o]+256-(r+i>>>1)&255;return s},o=function(e,t,n){var r,i,s,a,o=[],c=e.length;o[0]=4;for(var u=0;u<c;u+=1)r=e[u-t]||0,i=n&&n[u]||0,s=n&&n[u-t]||0,a=l(r,i,s),o[u+1]=e[u]-a+256&255;return o},l=function(e,t,n){if(e===t&&t===n)return e;var r=Math.abs(t-n),i=Math.abs(e-n),s=Math.abs(e+t-n-n);return r<=i&&r<=s?e:i<=s?t:n},c=function(){return[r,i,s,a,o]},u=function(e){var t=e.map(function(e){return e.reduce(function(e,t){return e+Math.abs(t)},0)});return t.indexOf(Math.min.apply(null,t))};e.processPNG=function(n,r,i,s){var a,o,l,c,u,d,h,f,p,m,g,y,v,w,b,x=this.decode.FLATE_DECODE,S="";if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){if(n=(l=new Gt(n)).imgData,o=l.bits,a=l.colorSpace,u=l.colors,-1!==[4,6].indexOf(l.colorType)){if(8===l.bits){p=(f=32==l.pixelBitlength?new Uint32Array(l.decodePixels().buffer):16==l.pixelBitlength?new Uint16Array(l.decodePixels().buffer):new Uint8Array(l.decodePixels().buffer)).length,g=new Uint8Array(p*l.colors),m=new Uint8Array(p);var A,E=l.pixelBitlength-l.bits;for(w=0,b=0;w<p;w++){for(v=f[w],A=0;A<E;)g[b++]=v>>>A&255,A+=l.bits;m[w]=v>>>A&255}}if(16===l.bits){p=(f=new Uint32Array(l.decodePixels().buffer)).length,g=new Uint8Array(p*(32/l.pixelBitlength)*l.colors),m=new Uint8Array(p*(32/l.pixelBitlength)),y=l.colors>1,w=0,b=0;for(var N=0;w<p;)v=f[w++],g[b++]=v>>>0&255,y&&(g[b++]=v>>>16&255,v=f[w++],g[b++]=v>>>0&255),m[N++]=v>>>16&255;o=8}s!==e.image_compression.NONE?(n=t(g,l.width*l.colors,l.colors,s),h=t(m,l.width,1,s)):(n=g,h=m,x=void 0)}if(3===l.colorType&&(a=this.color_spaces.INDEXED,d=l.palette,l.transparency.indexed)){var C=l.transparency.indexed,_=0;for(w=0,p=C.length;w<p;++w)_+=C[w];if((_/=255)===p-1&&-1!==C.indexOf(0))c=[C.indexOf(0)];else if(_!==p){for(f=l.decodePixels(),m=new Uint8Array(f.length),w=0,p=f.length;w<p;w++)m[w]=C[f[w]];h=t(m,l.width,1)}}var T=function(t){var n;switch(t){case e.image_compression.FAST:n=11;break;case e.image_compression.MEDIUM:n=13;break;case e.image_compression.SLOW:n=14;break;default:n=12}return n}(s);return x===this.decode.FLATE_DECODE&&(S="/Predictor "+T+" "),S+="/Colors "+u+" /BitsPerComponent "+o+" /Columns "+l.width,(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(h&&this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),{alias:i,data:n,index:r,filter:x,decodeParameters:S,transparency:c,palette:d,sMask:h,predictor:T,width:l.width,height:l.height,bitsPerComponent:o,colorSpace:a}}}}(De.API),function(e){e.processGIF89A=function(t,n,r,i){var s=new Kt(t),a=s.width,o=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:a,height:o},u=new Xt(100).encode(c,100);return e.processJPEG.call(this,u,n,r,i)},e.processGIF87A=e.processGIF89A}(De.API),Qt.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Qt.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(e){ne.log("bit decode error:"+e)}},Qt.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,i=0;i<t;i++)for(var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+8*i*4,o=0;o<8&&8*i+o<this.width;o++){var l=this.palette[s>>7-o&1];this.data[a+4*o]=l.blue,this.data[a+4*o+1]=l.green,this.data[a+4*o+2]=l.red,this.data[a+4*o+3]=255}0!==n&&(this.pos+=4-n)}},Qt.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++){var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+2*i*4,o=s>>4,l=15&s,c=this.palette[o];if(this.data[a]=c.blue,this.data[a+1]=c.green,this.data[a+2]=c.red,this.data[a+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[a+4]=c.blue,this.data[a+4+1]=c.green,this.data[a+4+2]=c.red,this.data[a+4+3]=255}0!==t&&(this.pos+=4-t)}},Qt.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var a=this.palette[i];this.data[s]=a.red,this.data[s+1]=a.green,this.data[s+2]=a.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}0!==e&&(this.pos+=4-e)}},Qt.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&t)/t*255|0,o=(s>>5&t)/t*255|0,l=(s>>10&t)/t*255|0,c=s>>15?255:0,u=r*this.width*4+4*i;this.data[u]=l,this.data[u+1]=o,this.data[u+2]=a,this.data[u+3]=c}this.pos+=e}},Qt.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&t)/t*255|0,l=(a>>5&n)/n*255|0,c=(a>>11)/t*255|0,u=i*this.width*4+4*s;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=o,this.data[u+3]=255}this.pos+=e}},Qt.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=255}this.pos+=this.width%4}},Qt.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*n;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=a}},Qt.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,r,i){var s=new Qt(t,!1),a=s.width,o=s.height,l={data:s.getData(),width:a,height:o},c=new Xt(100).encode(l,100);return e.processJPEG.call(this,c,n,r,i)}}(De.API),Jt.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,r,i){var s=new Jt(t,!1),a=s.width,o=s.height,l={data:s.getData(),width:a,height:o},c=new Xt(100).encode(l,100);return e.processJPEG.call(this,c,n,r,i)}}(De.API),De.API.processRGBA=function(e,t,n){for(var r=e.data,i=r.length,s=new Uint8Array(i/4*3),a=new Uint8Array(i/4),o=0,l=0,c=0;c<i;c+=4){var u=r[c],d=r[c+1],h=r[c+2],f=r[c+3];s[o++]=u,s[o++]=d,s[o++]=h,a[l++]=f}var p=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:p,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},De.API.setLanguage=function(e){return void 0===this.internal.languageSettings&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),void 0!=={af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]&&(this.internal.languageSettings.languageCode=e,!1===this.internal.languageSettings.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},zt=De.API,Vt=zt.getCharWidthsArray=function(e,t){var n,i,s=(t=t||{}).font||this.internal.getFont(),a=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:s.metadata.Unicode.widths,c=l.fof?l.fof:1,u=t.kerning?t.kerning:s.metadata.Unicode.kerning,d=u.fof?u.fof:1,h=!1!==t.doKerning,f=0,p=e.length,m=0,g=l[0]||c,y=[];for(n=0;n<p;n++)i=e.charCodeAt(n),"function"==typeof s.metadata.widthOfString?y.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(i))+o*(1e3/a)||0)/1e3):(f=h&&"object"===(0,r.A)(u[i])&&!isNaN(parseInt(u[i][m],10))?u[i][m]/d:0,y.push((l[i]||g)/c+f)),m=i;return y},Ht=zt.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return zt.processArabic&&(e=zt.processArabic(e)),"function"==typeof r.metadata.widthOfString?r.metadata.widthOfString(e,n,i)/n:Vt.apply(this,arguments).reduce(function(e,t){return e+t},0)},Wt=function(e,t,n,r){for(var i=[],s=0,a=e.length,o=0;s!==a&&o+t[s]<n;)o+=t[s],s++;i.push(e.slice(0,s));var l=s;for(o=0;s!==a;)o+t[s]>r&&(i.push(e.slice(l,s)),o=0,l=s),o+=t[s],s++;return l!==s&&i.push(e.slice(l,s)),i},qt=function(e,t,n){n||(n={});var r,i,s,a,o,l,c,u=[],d=[u],h=n.textIndent||0,f=0,p=0,m=e.split(" "),g=Vt.apply(this,[" ",n])[0];if(l=-1===n.lineIndent?m[0].length+2:n.lineIndent||0){var y=Array(l).join(" "),v=[];m.map(function(e){(e=e.split(/\s*\n/)).length>1?v=v.concat(e.map(function(e,t){return(t&&e.length?"\n":"")+e})):v.push(e[0])}),m=v,l=Ht.apply(this,[y,n])}for(s=0,a=m.length;s<a;s++){var w=0;if(r=m[s],l&&"\n"==r[0]&&(r=r.substr(1),w=1),h+f+(p=(i=Vt.apply(this,[r,n])).reduce(function(e,t){return e+t},0))>t||w){if(p>t){for(o=Wt.apply(this,[r,i,t-(h+f),t]),u.push(o.shift()),u=[o.pop()];o.length;)d.push([o.shift()]);p=i.slice(r.length-(u[0]?u[0].length:0)).reduce(function(e,t){return e+t},0)}else u=[r];d.push(u),h=p+l,f=g}else u.push(r),h+=f+p,f=g}return c=l?function(e,t){return(t?y:"")+e.join(" ")}:function(e){return e.join(" ")},d.map(c)},zt.splitTextToSize=function(e,t,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=function(e){if(e.widths&&e.kerning)return{widths:e.widths,kerning:e.kerning};var t=this.internal.getFont(e.fontName,e.fontStyle);return t.metadata.Unicode?{widths:t.metadata.Unicode.widths||{0:1},kerning:t.metadata.Unicode.kerning||{}}:{font:t.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,n);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var a=1*this.internal.scaleFactor*t/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var o,l,c=[];for(o=0,l=r.length;o<l;o++)c=c.concat(qt.apply(this,[r[o],a,s]));return c},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",n={},i={},s=0;s<16;s++)n[t[s]]="0123456789abcdef"[s],i["0123456789abcdef"[s]]=t[s];var a=function(e){return"0x"+parseInt(e,10).toString(16)},o=e.__fontmetrics__.compress=function(e){var t,n,s,l,c=["{"];for(var u in e){if(t=e[u],isNaN(parseInt(u,10))?n="'"+u+"'":(u=parseInt(u,10),n=(n=a(u).slice(2)).slice(0,-1)+i[n.slice(-1)]),"number"==typeof t)t<0?(s=a(t).slice(3),l="-"):(s=a(t).slice(2),l=""),s=l+s.slice(0,-1)+i[s.slice(-1)];else{if("object"!==(0,r.A)(t))throw new Error("Don't know what to do with value type "+(0,r.A)(t)+".");s=o(t)}c.push(n+s)}return c.push("}"),c.join("")},l=e.__fontmetrics__.uncompress=function(e){if("string"!=typeof e)throw new Error("Invalid argument passed to uncompress.");for(var t,r,i,s,a={},o=1,l=a,c=[],u="",d="",h=e.length-1,f=1;f<h;f+=1)"'"==(s=e[f])?t?(i=t.join(""),t=void 0):t=[]:t?t.push(s):"{"==s?(c.push([l,i]),l={},i=void 0):"}"==s?((r=c.pop())[0][r[1]]=l,i=void 0,l=r[0]):"-"==s?o=-1:void 0===i?n.hasOwnProperty(s)?(u+=n[s],i=parseInt(u,16)*o,o=1,u=""):u+=s:n.hasOwnProperty(s)?(d+=n[s],l[i]=parseInt(d,16)*o,o=1,i=void 0,d=""):d+=s;return a},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},d={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(e){var t=e.font,n=d.Unicode[t.postScriptName];n&&(t.metadata.Unicode={},t.metadata.Unicode.widths=n.widths,t.metadata.Unicode.kerning=n.kerning);var r=u.Unicode[t.postScriptName];r&&(t.metadata.Unicode.encoding=r,t.encoding=r.codePages[0])}])}(De.API),function(e){var t=function(e){for(var t=e.length,n=new Uint8Array(t),r=0;r<t;r++)n[r]=e.charCodeAt(r);return n};e.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(void 0===s)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if("string"!=typeof(r=!1===s.existsFileInVFS(i.postScriptName)?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName)))throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");!function(n,r){r=/^\x00\x01\x00\x00/.test(r)?t(r):t(ae(r)),n.metadata=e.API.TTFFont.open(r),n.metadata.Unicode=n.metadata.Unicode||{encoding:{},kerning:{},widths:[]},n.metadata.glyIdsUsed=[0]}(i,r)}}])}(De),function(){function e(){return(ee.canvg?Promise.resolve(ee.canvg):n.e(455).then(n.bind(n,8455))).catch(function(e){return Promise.reject(new Error("Could not load canvg: "+e))}).then(function(e){return e.default?e.default:e})}De.API.addSvgAsImage=function(t,n,r,i,s,a,o,l){if(isNaN(n)||isNaN(r))throw ne.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(s))throw ne.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=i,c.height=s;var u=c.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,c.width,c.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},h=this;return e().then(function(e){return e.fromString(u,t,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(e){return e.render(d)}).then(function(){h.addImage(c.toDataURL("image/jpeg",1),n,r,i,s,o,l)})}}(),De.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(t,n);return this},De.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var i,s,a,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],u=0,d=0,h=0;function f(e,t){var n,r=!1;for(n=0;n<e.length;n+=1)e[n]===t&&(r=!0);return r}if(void 0===this.internal.viewerpreferences&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,"reset"===e||!0===t){var p=l.length;for(h=0;h<p;h+=1)n[l[h]].value=n[l[h]].defaultValue,n[l[h]].explicitSet=!1}if("object"===(0,r.A)(e))for(s in e)if(a=e[s],f(l,s)&&void 0!==a){if("boolean"===n[s].type&&"boolean"==typeof a)n[s].value=a;else if("name"===n[s].type&&f(n[s].valueSet,a))n[s].value=a;else if("integer"===n[s].type&&Number.isInteger(a))n[s].value=a;else if("array"===n[s].type){for(u=0;u<a.length;u+=1)if(i=!0,1===a[u].length&&"number"==typeof a[u][0])c.push(String(a[u]-1));else if(a[u].length>1){for(d=0;d<a[u].length;d+=1)"number"!=typeof a[u][d]&&(i=!1);!0===i&&c.push([a[u][0]-1,a[u][1]-1].join(" "))}n[s].value="["+c.join(" ")+"]"}else n[s].value=n[s].defaultValue;n[s].explicitSet=!0}return!1===this.internal.viewerpreferences.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){var e,t=[];for(e in n)!0===n[e].explicitSet&&("name"===n[e].type?t.push("/"+e+" /"+n[e].value):t.push("/"+e+" "+n[e].value));0!==t.length&&this.internal.write("/ViewerPreferences\n<<\n"+t.join("\n")+"\n>>")}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var e='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',t=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),n=unescape(encodeURIComponent(e)),r=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),i=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),s=unescape(encodeURIComponent("</x:xmpmeta>")),a=n.length+r.length+i.length+t.length+s.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+a+" >>"),this.internal.write("stream"),this.internal.write(t+n+r+i+s),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(e,r){return void 0===this.internal.__metadata__&&(this.internal.__metadata__={metadata:e,namespaceuri:r||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(De.API),function(e){var t=e.API,n=t.pdfEscape16=function(e,t){for(var n,r=t.metadata.Unicode.widths,i=["","0","00","000","0000"],s=[""],a=0,o=e.length;a<o;++a){if(n=t.metadata.characterToGlyph(e.charCodeAt(a)),t.metadata.glyIdsUsed.push(n),t.metadata.toUnicode[n]=e.charCodeAt(a),-1==r.indexOf(n)&&(r.push(n),r.push([parseInt(t.metadata.widthOfGlyph(n),10)])),"0"==n)return s.join("");n=n.toString(16),s.push(i[4-n.length],n)}return s.join("")},r=function(e){var t,n,r,i,s,a,o;for(s="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange",r=[],a=0,o=(n=Object.keys(e).sort(function(e,t){return e-t})).length;a<o;a++)t=n[a],r.length>=100&&(s+="\n"+r.length+" beginbfchar\n"+r.join("\n")+"\nendbfchar",r=[]),void 0!==e[t]&&null!==e[t]&&"function"==typeof e[t].toString&&(i=("0000"+e[t].toString(16)).slice(-4),t=("0000"+(+t).toString(16)).slice(-4),r.push("<"+t+"><"+i+">"));return r.length&&(s+="\n"+r.length+" beginbfchar\n"+r.join("\n")+"\nendbfchar\n"),s+"endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"};t.events.push(["putFont",function(t){!function(t){var n=t.font,i=t.out,s=t.newObject,a=t.putStream;if(n.metadata instanceof e.API.TTFFont&&"Identity-H"===n.encoding){for(var o=n.metadata.Unicode.widths,l=n.metadata.subset.encode(n.metadata.glyIdsUsed,1),c="",u=0;u<l.length;u++)c+=String.fromCharCode(l[u]);var d=s();a({data:c,addLength1:!0,objectId:d}),i("endobj");var h=s();a({data:r(n.metadata.toUnicode),addLength1:!0,objectId:h}),i("endobj");var f=s();i("<<"),i("/Type /FontDescriptor"),i("/FontName /"+_e(n.fontName)),i("/FontFile2 "+d+" 0 R"),i("/FontBBox "+e.API.PDFObject.convert(n.metadata.bbox)),i("/Flags "+n.metadata.flags),i("/StemV "+n.metadata.stemV),i("/ItalicAngle "+n.metadata.italicAngle),i("/Ascent "+n.metadata.ascender),i("/Descent "+n.metadata.decender),i("/CapHeight "+n.metadata.capHeight),i(">>"),i("endobj");var p=s();i("<<"),i("/Type /Font"),i("/BaseFont /"+_e(n.fontName)),i("/FontDescriptor "+f+" 0 R"),i("/W "+e.API.PDFObject.convert(o)),i("/CIDToGIDMap /Identity"),i("/DW 1000"),i("/Subtype /CIDFontType2"),i("/CIDSystemInfo"),i("<<"),i("/Supplement 0"),i("/Registry (Adobe)"),i("/Ordering ("+n.encoding+")"),i(">>"),i(">>"),i("endobj"),n.objectNumber=s(),i("<<"),i("/Type /Font"),i("/Subtype /Type0"),i("/ToUnicode "+h+" 0 R"),i("/BaseFont /"+_e(n.fontName)),i("/Encoding /"+n.encoding),i("/DescendantFonts ["+p+" 0 R]"),i(">>"),i("endobj"),n.isAlreadyPutted=!0}}(t)}]),t.events.push(["putFont",function(t){!function(t){var n=t.font,i=t.out,s=t.newObject,a=t.putStream;if(n.metadata instanceof e.API.TTFFont&&"WinAnsiEncoding"===n.encoding){for(var o=n.metadata.rawData,l="",c=0;c<o.length;c++)l+=String.fromCharCode(o[c]);var u=s();a({data:l,addLength1:!0,objectId:u}),i("endobj");var d=s();a({data:r(n.metadata.toUnicode),addLength1:!0,objectId:d}),i("endobj");var h=s();i("<<"),i("/Descent "+n.metadata.decender),i("/CapHeight "+n.metadata.capHeight),i("/StemV "+n.metadata.stemV),i("/Type /FontDescriptor"),i("/FontFile2 "+u+" 0 R"),i("/Flags 96"),i("/FontBBox "+e.API.PDFObject.convert(n.metadata.bbox)),i("/FontName /"+_e(n.fontName)),i("/ItalicAngle "+n.metadata.italicAngle),i("/Ascent "+n.metadata.ascender),i(">>"),i("endobj"),n.objectNumber=s();for(var f=0;f<n.metadata.hmtx.widths.length;f++)n.metadata.hmtx.widths[f]=parseInt(n.metadata.hmtx.widths[f]*(1e3/n.metadata.head.unitsPerEm));i("<</Subtype/TrueType/Type/Font/ToUnicode "+d+" 0 R/BaseFont/"+_e(n.fontName)+"/FontDescriptor "+h+" 0 R/Encoding/"+n.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(n.metadata.hmtx.widths)+">>"),i("endobj"),n.isAlreadyPutted=!0}}(t)}]);var i=function(e){var t,r=e.text||"",i=e.x,s=e.y,a=e.options||{},o=e.mutex||{},l=o.pdfEscape,c=o.activeFontKey,u=o.fonts,d=c,h="",f=0,p="",m=u[d].encoding;if("Identity-H"!==u[d].encoding)return{text:r,x:i,y:s,options:a,mutex:o};for(p=r,d=c,Array.isArray(r)&&(p=r[0]),f=0;f<p.length;f+=1)u[d].metadata.hasOwnProperty("cmap")&&(t=u[d].metadata.cmap.unicode.codeMap[p[f].charCodeAt(0)]),t||p[f].charCodeAt(0)<256&&u[d].metadata.hasOwnProperty("Unicode")?h+=p[f]:h+="";var g="";return parseInt(d.slice(1))<14||"WinAnsiEncoding"===m?g=l(h,d).split("").map(function(e){return e.charCodeAt(0).toString(16)}).join(""):"Identity-H"===m&&(g=n(h,u[d])),o.isHex=!0,{text:g,x:i,y:s,options:a,mutex:o}};t.events.push(["postProcessText",function(e){var t=e.text||"",n=[],r={text:t,x:e.x,y:e.y,options:e.options,mutex:e.mutex};if(Array.isArray(t)){var s=0;for(s=0;s<t.length;s+=1)Array.isArray(t[s])&&3===t[s].length?n.push([i(Object.assign({},r,{text:t[s][0]})).text,t[s][1],t[s][2]]):n.push(i(Object.assign({},r,{text:t[s]})).text);e.text=n}else e.text=i(Object.assign({},r,{text:t})).text}])}(De),function(e){var t=function(){return void 0===this.internal.vFS&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]},e.addFileToVFS=function(e,n){return t.call(this),this.internal.vFS[e]=n,this},e.getFileFromVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]?this.internal.vFS[e]:null}}(De.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(e){var n,r,i,s,a,o,l,c=t,u=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],d=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],h={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},f={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},p=["(",")","(","<",">","<","[","]","[","{","}","{","\xab","\xbb","\xab","\u2039","\u203a","\u2039","\u2045","\u2046","\u2045","\u207d","\u207e","\u207d","\u208d","\u208e","\u208d","\u2264","\u2265","\u2264","\u2329","\u232a","\u2329","\ufe59","\ufe5a","\ufe59","\ufe5b","\ufe5c","\ufe5b","\ufe5d","\ufe5e","\ufe5d","\ufe64","\ufe65","\ufe64"],m=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),g=!1,y=0;this.__bidiEngine__={};var v=function(e){var t=e.charCodeAt(),n=t>>8,r=f[n];return void 0!==r?c[256*r+(255&t)]:252===n||253===n?"AL":m.test(n)?"L":8===n?"R":"N"},w=function(e){for(var t,n=0;n<e.length;n++){if("L"===(t=v(e.charAt(n))))return!1;if("R"===t)return!0}return!1},b=function(e,t,a,o){var l,c,u,d,h=t[o];switch(h){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":g=!1;break;case"N":case"AN":break;case"EN":g&&(h="AN");break;case"AL":g=!0,h="R";break;case"WS":case"BN":h="N";break;case"CS":o<1||o+1>=t.length||"EN"!==(l=a[o-1])&&"AN"!==l||"EN"!==(c=t[o+1])&&"AN"!==c?h="N":g&&(c="AN"),h=c===l?c:"N";break;case"ES":h="EN"===(l=o>0?a[o-1]:"B")&&o+1<t.length&&"EN"===t[o+1]?"EN":"N";break;case"ET":if(o>0&&"EN"===a[o-1]){h="EN";break}if(g){h="N";break}for(u=o+1,d=t.length;u<d&&"ET"===t[u];)u++;h=u<d&&"EN"===t[u]?"EN":"N";break;case"NSM":if(i&&!s){for(d=t.length,u=o+1;u<d&&"NSM"===t[u];)u++;if(u<d){var f=e[o],p=f>=1425&&f<=2303||64286===f;if(l=t[u],p&&("R"===l||"AL"===l)){h="R";break}}}h=o<1||"B"===(l=t[o-1])?"N":a[o-1];break;case"B":g=!1,n=!0,h=y;break;case"S":r=!0,h="N"}return h},x=function(e,t,n){var r=e.split("");return n&&S(r,n,{hiLevel:y}),r.reverse(),t&&t.reverse(),r.join("")},S=function(e,t,i){var s,a,o,l,c,f=-1,p=e.length,m=0,w=[],x=y?d:u,S=[];for(g=!1,n=!1,r=!1,a=0;a<p;a++)S[a]=v(e[a]);for(o=0;o<p;o++){if(c=m,w[o]=b(e,S,w,o),s=240&(m=x[c][h[w[o]]]),m&=15,t[o]=l=x[m][5],s>0)if(16===s){for(a=f;a<o;a++)t[a]=1;f=-1}else f=-1;if(x[m][6])-1===f&&(f=o);else if(f>-1){for(a=f;a<o;a++)t[a]=l;f=-1}"B"===S[o]&&(t[o]=0),i.hiLevel|=l}r&&function(e,t,n){for(var r=0;r<n;r++)if("S"===e[r]){t[r]=y;for(var i=r-1;i>=0&&"WS"===e[i];i--)t[i]=y}}(S,t,p)},A=function(e,t,r,i,s){if(!(s.hiLevel<e)){if(1===e&&1===y&&!n)return t.reverse(),void(r&&r.reverse());for(var a,o,l,c,u=t.length,d=0;d<u;){if(i[d]>=e){for(l=d+1;l<u&&i[l]>=e;)l++;for(c=d,o=l-1;c<o;c++,o--)a=t[c],t[c]=t[o],t[o]=a,r&&(a=r[c],r[c]=r[o],r[o]=a);d=l}d++}}},E=function(e,t,n){var r=e.split(""),i={hiLevel:y};return n||(n=[]),S(r,n,i),function(e,t,n){if(0!==n.hiLevel&&l)for(var r,i=0;i<e.length;i++)1===t[i]&&(r=p.indexOf(e[i]))>=0&&(e[i]=p[r+1])}(r,n,i),A(2,r,t,n,i),A(1,r,t,n,i),r.join("")};return this.__bidiEngine__.doBidiReorder=function(e,t,n){if(function(e,t){if(t)for(var n=0;n<e.length;n++)t[n]=n;void 0===s&&(s=w(e)),void 0===o&&(o=w(e))}(e,t),i||!a||o)if(i&&a&&s^o)y=s?1:0,e=x(e,t,n);else if(!i&&a&&o)y=s?1:0,e=E(e,t,n),e=x(e,t);else if(!i||s||a||o){if(i&&!a&&s^o)e=x(e,t),s?(y=0,e=E(e,t,n)):(y=1,e=E(e,t,n),e=x(e,t));else if(i&&s&&!a&&o)y=1,e=E(e,t,n),e=x(e,t);else if(!i&&!a&&s^o){var r=l;s?(y=1,e=E(e,t,n),y=0,l=!1,e=E(e,t,n),l=r):(y=0,e=E(e,t,n),e=x(e,t),y=1,l=!1,e=E(e,t,n),l=r,e=x(e,t))}}else y=0,e=E(e,t,n);else y=s?1:0,e=E(e,t,n);return e},this.__bidiEngine__.setOptions=function(e){e&&(i=e.isInputVisual,a=e.isOutputVisual,s=e.isInputRtl,o=e.isOutputRtl,l=e.isSymmetricSwapping)},this.__bidiEngine__.setOptions(e),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(e){var t=e.text,r=(e.x,e.y,e.options||{}),i=(e.mutex,r.lang,[]);if(r.isInputVisual="boolean"!=typeof r.isInputVisual||r.isInputVisual,n.setOptions(r),"[object Array]"===Object.prototype.toString.call(t)){var s=0;for(i=[],s=0;s<t.length;s+=1)"[object Array]"===Object.prototype.toString.call(t[s])?i.push([n.doBidiReorder(t[s][0]),t[s][1],t[s][2]]):i.push([n.doBidiReorder(t[s])]);e.text=i}else e.text=n.doBidiReorder(t);n.setOptions({isInputVisual:!0})}])}(De),De.API.TTFFont=function(){function e(e){var t;if(this.rawData=e,t=this.contents=new $t(e),this.contents.pos=4,"ttcf"===t.readString(4))throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new wn(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new en(this.contents),this.head=new rn(this),this.name=new dn(this),this.cmap=new an(this),this.toUnicode={},this.hhea=new on(this),this.maxp=new hn(this),this.hmtx=new fn(this),this.post=new cn(this),this.os2=new ln(this),this.loca=new vn(this),this.glyf=new mn(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var e,t,n,r,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var t,n,r,i;for(i=[],t=0,n=(r=this.bbox).length;t<n;t++)e=r[t],i.push(Math.round(e*this.scaleFactor));return i}.call(this),this.stemV=0,this.post.exists?(n=255&(r=this.post.italic_angle),0!=(32768&(t=r>>16))&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=1===(i=this.familyClass)||2===i||3===i||4===i||5===i||7===i,this.isScript=10===this.familyClass,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),0!==this.italicAngle&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(e){var t;return(null!=(t=this.cmap.unicode)?t.codeMap[e]:void 0)||0},e.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},e.prototype.widthOfString=function(e,t,n){var r,i,s,a;for(s=0,i=0,a=(e=""+e).length;0<=a?i<a:i>a;i=0<=a?++i:--i)r=e.charCodeAt(i),s+=this.widthOfGlyph(this.characterToGlyph(r))+n*(1e3/t)||0;return s*(t/1e3)},e.prototype.lineHeight=function(e,t){var n;return null==t&&(t=!1),n=t?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},e}();var Zt,$t=function(){function e(e){this.data=null!=e?e:[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(e){return this.data[this.pos++]=e},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},e.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},e.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},e.prototype.readString=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)n[t]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(e){var t,n,r;for(r=[],t=0,n=e.length;0<=n?t<n:t>n;t=0<=n?++t:--t)r.push(this.writeByte(e.charCodeAt(t)));return r},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(e){return this.writeInt16(e)},e.prototype.readLongLong=function(){var e,t,n,r,i,s,a,o;return e=this.readByte(),t=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),a=this.readByte(),o=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^n)+4294967296*(255^r)+16777216*(255^i)+65536*(255^s)+256*(255^a)+(255^o)+1):72057594037927940*e+281474976710656*t+1099511627776*n+4294967296*r+16777216*i+65536*s+256*a+o},e.prototype.writeLongLong=function(e){var t,n;return t=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(e){return this.writeInt32(e)},e.prototype.read=function(e){var t,n;for(t=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)t.push(this.readByte());return t},e.prototype.write=function(e){var t,n,r,i;for(i=[],n=0,r=e.length;n<r;n++)t=e[n],i.push(this.writeByte(t));return i},e}(),en=function(){var e;function t(e){var t,n,r;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},n=0,r=this.tableCount;0<=r?n<r:n>r;n=0<=r?++n:--n)t={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[t.tag]=t}return t.prototype.encode=function(t){var n,r,i,s,a,o,l,c,u,d,h,f,p;for(p in h=Object.keys(t).length,o=Math.log(2),u=16*Math.floor(Math.log(h)/o),s=Math.floor(u/o),c=16*h-u,(r=new $t).writeInt(this.scalarType),r.writeShort(h),r.writeShort(u),r.writeShort(s),r.writeShort(c),i=16*h,l=r.pos+i,a=null,f=[],t)for(d=t[p],r.writeString(p),r.writeInt(e(d)),r.writeInt(l),r.writeInt(d.length),f=f.concat(d),"head"===p&&(a=l),l+=d.length;l%4;)f.push(0),l++;return r.write(f),n=2981146554-e(r.data),r.pos=a+8,r.writeUInt32(n),r.data},e=function(e){var t,n,r,i;for(e=pn.call(e);e.length%4;)e.push(0);for(r=new $t(e),n=0,t=0,i=e.length;t<i;t=t+=4)n+=r.readUInt32();return 4294967295&n},t}(),tn={}.hasOwnProperty,nn=function(e,t){for(var n in t)tn.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};Zt=function(){function e(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var rn=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Zt),e.prototype.tag="head",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},e.prototype.encode=function(e){var t;return(t=new $t).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},e}(),sn=function(){function e(e,t){var n,r,i,s,a,o,l,c,u,d,h,f,p,m,g,y,v;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),u=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=3===this.platformID&&1===this.encodingID&&4===this.format||0===this.platformID&&4===this.format,this.codeMap={},this.format){case 0:for(o=0;o<256;++o)this.codeMap[o]=e.readByte();break;case 4:for(h=e.readUInt16(),d=h/2,e.pos+=6,i=function(){var t,n;for(n=[],o=t=0;0<=d?t<d:t>d;o=0<=d?++t:--t)n.push(e.readUInt16());return n}(),e.pos+=2,p=function(){var t,n;for(n=[],o=t=0;0<=d?t<d:t>d;o=0<=d?++t:--t)n.push(e.readUInt16());return n}(),l=function(){var t,n;for(n=[],o=t=0;0<=d?t<d:t>d;o=0<=d?++t:--t)n.push(e.readUInt16());return n}(),c=function(){var t,n;for(n=[],o=t=0;0<=d?t<d:t>d;o=0<=d?++t:--t)n.push(e.readUInt16());return n}(),r=(this.length-e.pos+this.offset)/2,a=function(){var t,n;for(n=[],o=t=0;0<=r?t<r:t>r;o=0<=r?++t:--t)n.push(e.readUInt16());return n}(),o=g=0,v=i.length;g<v;o=++g)for(m=i[o],n=y=f=p[o];f<=m?y<=m:y>=m;n=f<=m?++y:--y)0===c[o]?s=n+l[o]:0!==(s=a[c[o]/2+(n-f)-(d-o)]||0)&&(s+=l[o]),this.codeMap[n]=65535&s}e.pos=u}return e.encode=function(e,t){var n,r,i,s,a,o,l,c,u,d,h,f,p,m,g,y,v,w,b,x,S,A,E,N,C,_,T,I,k,P,R,D,O,L,M,F,j,B,U,z,V,H,W,q,G,K;switch(I=new $t,s=Object.keys(e).sort(function(e,t){return e-t}),t){case"macroman":for(p=0,m=function(){var e=[];for(f=0;f<256;++f)e.push(0);return e}(),y={0:0},i={},k=0,O=s.length;k<O;k++)null==y[W=e[r=s[k]]]&&(y[W]=++p),i[r]={old:e[r],new:y[e[r]]},m[r]=y[e[r]];return I.writeUInt16(1),I.writeUInt16(0),I.writeUInt32(12),I.writeUInt16(0),I.writeUInt16(262),I.writeUInt16(0),I.write(m),{charMap:i,subtable:I.data,maxGlyphID:p+1};case"unicode":for(_=[],u=[],v=0,y={},n={},g=l=null,P=0,L=s.length;P<L;P++)null==y[b=e[r=s[P]]]&&(y[b]=++v),n[r]={old:b,new:y[b]},a=y[b]-r,null!=g&&a===l||(g&&u.push(g),_.push(r),l=a),g=r;for(g&&u.push(g),u.push(65535),_.push(65535),N=2*(E=_.length),A=2*Math.pow(Math.log(E)/Math.LN2,2),d=Math.log(A/2)/Math.LN2,S=2*E-A,o=[],x=[],h=[],f=R=0,M=_.length;R<M;f=++R){if(C=_[f],c=u[f],65535===C){o.push(0),x.push(0);break}if(C-(T=n[C].new)>=32768)for(o.push(0),x.push(2*(h.length+E-f)),r=D=C;C<=c?D<=c:D>=c;r=C<=c?++D:--D)h.push(n[r].new);else o.push(T-C),x.push(0)}for(I.writeUInt16(3),I.writeUInt16(1),I.writeUInt32(12),I.writeUInt16(4),I.writeUInt16(16+8*E+2*h.length),I.writeUInt16(0),I.writeUInt16(N),I.writeUInt16(A),I.writeUInt16(d),I.writeUInt16(S),V=0,F=u.length;V<F;V++)r=u[V],I.writeUInt16(r);for(I.writeUInt16(0),H=0,j=_.length;H<j;H++)r=_[H],I.writeUInt16(r);for(q=0,B=o.length;q<B;q++)a=o[q],I.writeUInt16(a);for(G=0,U=x.length;G<U;G++)w=x[G],I.writeUInt16(w);for(K=0,z=h.length;K<z;K++)p=h[K],I.writeUInt16(p);return{charMap:n,subtable:I.data,maxGlyphID:v+1}}},e}(),an=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Zt),e.prototype.tag="cmap",e.prototype.parse=function(e){var t,n,r;for(e.pos=this.offset,this.version=e.readUInt16(),r=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=r?n<r:n>r;n=0<=r?++n:--n)t=new sn(e,this.offset),this.tables.push(t),t.isUnicode&&null==this.unicode&&(this.unicode=t);return!0},e.encode=function(e,t){var n,r;return null==t&&(t="macroman"),n=sn.encode(e,t),(r=new $t).writeUInt16(0),r.writeUInt16(1),n.table=r.data.concat(n.subtable),n},e}(),on=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Zt),e.prototype.tag="hhea",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},e}(),ln=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Zt),e.prototype.tag="OS/2",e.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var t,n;for(n=[],t=0;t<10;++t)n.push(e.readByte());return n}(),this.charRange=function(){var t,n;for(n=[],t=0;t<4;++t)n.push(e.readInt());return n}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var t,n;for(n=[],t=0;t<2;t=++t)n.push(e.readInt());return n}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},e}(),cn=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Zt),e.prototype.tag="post",e.prototype.parse=function(e){var t,n,r;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(n=e.readUInt16(),this.glyphNameIndex=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],r=[];e.pos<this.offset+this.length;)t=e.readByte(),r.push(this.names.push(e.readString(t)));return r;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=function(){var t,n,r;for(r=[],i=t=0,n=this.file.maxp.numGlyphs;0<=n?t<n:t>n;i=0<=n?++t:--t)r.push(e.readUInt32());return r}.call(this)}},e}(),un=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},dn=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Zt),e.prototype.tag="name",e.prototype.parse=function(e){var t,n,r,i,s,a,o,l,c,u,d;for(e.pos=this.offset,e.readShort(),t=e.readShort(),a=e.readShort(),n=[],i=0;0<=t?i<t:i>t;i=0<=t?++i:--i)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+a+e.readShort()});for(o={},i=c=0,u=n.length;c<u;i=++c)r=n[i],e.pos=r.offset,l=e.readString(r.length),s=new un(l,r),null==o[d=r.nameID]&&(o[d]=[]),o[r.nameID].push(s);this.strings=o,this.copyright=o[0],this.fontFamily=o[1],this.fontSubfamily=o[2],this.uniqueSubfamily=o[3],this.fontName=o[4],this.version=o[5];try{this.postscriptName=o[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch(e){this.postscriptName=o[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=o[7],this.manufacturer=o[8],this.designer=o[9],this.description=o[10],this.vendorUrl=o[11],this.designerUrl=o[12],this.license=o[13],this.licenseUrl=o[14],this.preferredFamily=o[15],this.preferredSubfamily=o[17],this.compatibleFull=o[18],this.sampleText=o[19]},e}(),hn=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Zt),e.prototype.tag="maxp",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},e}(),fn=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Zt),e.prototype.tag="hmtx",e.prototype.parse=function(e){var t,n,r,i,s,a,o;for(e.pos=this.offset,this.metrics=[],t=0,a=this.file.hhea.numberOfMetrics;0<=a?t<a:t>a;t=0<=a?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(r=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var n,i;for(i=[],t=n=0;0<=r?n<r:n>r;t=0<=r?++n:--n)i.push(e.readInt16());return i}(),this.widths=function(){var e,t,n,r;for(r=[],e=0,t=(n=this.metrics).length;e<t;e++)i=n[e],r.push(i.advance);return r}.call(this),n=this.widths[this.widths.length-1],o=[],t=s=0;0<=r?s<r:s>r;t=0<=r?++s:--s)o.push(this.widths.push(n));return o},e.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},e}(),pn=[].slice,mn=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Zt),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(e){var t,n,r,i,s,a,o,l,c,u;return e in this.cache?this.cache[e]:(i=this.file.loca,t=this.file.contents,n=i.indexOf(e),0===(r=i.lengthOf(e))?this.cache[e]=null:(t.pos=this.offset+n,s=(a=new $t(t.read(r))).readShort(),l=a.readShort(),u=a.readShort(),o=a.readShort(),c=a.readShort(),this.cache[e]=-1===s?new yn(a,l,u,o,c):new gn(a,s,l,u,o,c),this.cache[e]))},e.prototype.encode=function(e,t,n){var r,i,s,a,o;for(s=[],i=[],a=0,o=t.length;a<o;a++)r=e[t[a]],i.push(s.length),r&&(s=s.concat(r.encode(n)));return i.push(s.length),{table:s,offsets:i}},e}(),gn=function(){function e(e,t,n,r,i,s){this.raw=e,this.numberOfContours=t,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),yn=function(){function e(e,t,n,r,i){var s,a;for(this.raw=e,this.xMin=t,this.yMin=n,this.xMax=r,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;a=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&a;)s.pos+=1&a?4:2,128&a?s.pos+=8:64&a?s.pos+=4:8&a&&(s.pos+=2)}return e.prototype.encode=function(){var e,t,n;for(t=new $t(pn.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)t.pos=this.glyphOffsets[e];return t.data},e}(),vn=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Zt),e.prototype.tag="loca",e.prototype.parse=function(e){var t,n;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=0===t?function(){var t,r;for(r=[],n=0,t=this.length;n<t;n+=2)r.push(2*e.readUInt16());return r}.call(this):function(){var t,r;for(r=[],n=0,t=this.length;n<t;n+=4)r.push(e.readUInt32());return r}.call(this)},e.prototype.indexOf=function(e){return this.offsets[e]},e.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},e.prototype.encode=function(e,t){for(var n=new Uint32Array(this.offsets.length),r=0,i=0,s=0;s<n.length;++s)if(n[s]=r,i<t.length&&t[i]==s){++i,n[s]=r;var a=this.offsets[s],o=this.offsets[s+1]-a;o>0&&(r+=o)}for(var l=new Array(4*n.length),c=0;c<n.length;++c)l[4*c+3]=255&n[c],l[4*c+2]=(65280&n[c])>>8,l[4*c+1]=(16711680&n[c])>>16,l[4*c]=(4278190080&n[c])>>24;return l},e}(),wn=function(){function e(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var e,t,n,r,i;for(t in r=this.font.cmap.tables[0].codeMap,e={},i=this.subset)n=i[t],e[t]=r[n];return e},e.prototype.glyphsFor=function(e){var t,n,r,i,s,a,o;for(r={},s=0,a=e.length;s<a;s++)r[i=e[s]]=this.font.glyf.glyphFor(i);for(i in t=[],r)(null!=(n=r[i])?n.compound:void 0)&&t.push.apply(t,n.glyphIDs);if(t.length>0)for(i in o=this.glyphsFor(t))n=o[i],r[i]=n;return r},e.prototype.encode=function(e,t){var n,r,i,s,a,o,l,c,u,d,h,f,p,m,g;for(r in n=an.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(e),h={0:0},g=n.charMap)h[(o=g[r]).old]=o.new;for(f in d=n.maxGlyphID,s)f in h||(h[f]=d++);return c=function(e){var t,n;for(t in n={},e)n[e[t]]=t;return n}(h),u=Object.keys(c).sort(function(e,t){return e-t}),p=function(){var e,t,n;for(n=[],e=0,t=u.length;e<t;e++)a=u[e],n.push(c[a]);return n}(),i=this.font.glyf.encode(s,p,h),l=this.font.loca.encode(i.offsets,p),m={cmap:this.font.cmap.raw(),glyf:i.table,loca:l,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(m["OS/2"]=this.font.os2.raw()),this.font.directory.encode(m)},e}();De.API.PDFObject=function(){var e;function t(){}return e=function(e,t){return(Array(t+1).join("0")+e).slice(-t)},t.convert=function(n){var r,i,s,a;if(Array.isArray(n))return"["+function(){var e,i,s;for(s=[],e=0,i=n.length;e<i;e++)r=n[e],s.push(t.convert(r));return s}().join(" ")+"]";if("string"==typeof n)return"/"+n;if(null!=n?n.isString:void 0)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if("[object Object]"==={}.toString.call(n)){for(i in s=["<<"],n)a=n[i],s.push("/"+i+" "+t.convert(a));return s.push(">>"),s.join("\n")}return""+n},t}();const bn=De},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(6672)},7969:(e,t)=>{let n;const r=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];t.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return 4*e+17},t.getSymbolTotalCodewords=function(e){return r[e]},t.getBCHDigit=function(e){let t=0;for(;0!==e;)t++,e>>>=1;return t},t.setToSJISFunction=function(e){if("function"!==typeof e)throw new Error('"toSJISFunc" is not a valid function.');n=e},t.isKanjiModeEnabled=function(){return"undefined"!==typeof n},t.toSJIS=function(e){return n(e)}},8173:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>o});var r=n(9379);let i=null;const s=()=>{if(!i)try{i=n(6931).A}catch(e){console.log("Firebase sync not available:",e.message)}return i};const a=new class{constructor(){this.keys={salesData:"mpump_sales_data",creditData:"mpump_credit_data",incomeData:"mpump_income_data",expenseData:"mpump_expense_data",fuelSettings:"mpump_fuel_settings",rates:"mpump_rates_by_date",customers:"mpump_customers",payments:"mpump_payments",incomeCategories:"mpump_income_categories",expenseCategories:"mpump_expense_categories",settlements:"mpump_settlements",settlementTypes:"mpump_settlement_types",incomeDescHistory:"mpump_income_desc_history",expenseDescHistory:"mpump_expense_desc_history"},this.initializeDefaultData()}initializeDefaultData(){const e={Diesel:{price:90.46,nozzleCount:2},Petrol:{price:102.5,nozzleCount:3},CNG:{price:75.2,nozzleCount:2},Premium:{price:108.9,nozzleCount:1}};this.getFuelSettings()||this.setFuelSettings(e),this.getSalesData()||this.setSalesData([]),this.getCreditData()||this.setCreditData([]),this.getIncomeData()||this.setIncomeData([]),this.getExpenseData()||this.setExpenseData([]),this.getCustomers()||this.setCustomers([]),this.getPayments()||this.setPayments([]),this.getSettlements()||this.setSettlements([]),this.getIncomeCategories()||this.setIncomeCategories([{id:"1",name:"Other Income"},{id:"2",name:"Commission"},{id:"3",name:"Interest"}]),this.getExpenseCategories()||this.setExpenseCategories([{id:"1",name:"Salary"},{id:"2",name:"Rent"},{id:"3",name:"Electricity"},{id:"4",name:"Maintenance"},{id:"5",name:"Other"}]);const t=this.getItem(this.keys.settlementTypes);t&&0!==t.length||this.setSettlementTypes([{id:"1",name:"Card"},{id:"2",name:"DTP"},{id:"3",name:"Paytm"},{id:"4",name:"PhonePe"}])}setItem(e,t){try{return localStorage.setItem(e,JSON.stringify(t)),!0}catch(n){return console.error("Failed to save to localStorage:",n),!1}}getItem(e){try{const t=localStorage.getItem(e);return t?JSON.parse(t):null}catch(t){return console.error("Failed to read from localStorage:",t),null}}getSalesData(){return this.getItem(this.keys.salesData)||[]}setSalesData(e){return this.setItem(this.keys.salesData,e)}addSaleRecord(e){const t=this.getSalesData(),n={id:Date.now().toString(),date:e.date,nozzle:e.nozzle,fuelType:e.fuelType,startReading:parseFloat(e.startReading),endReading:parseFloat(e.endReading),liters:parseFloat(e.liters),rate:parseFloat(e.rate),amount:parseFloat(e.amount),type:"cash",mpp:e.mpp||!1,timestamp:(new Date).toISOString()};return t.push(n),this.setSalesData(t),n}getCreditData(){return this.getItem(this.keys.creditData)||[]}setCreditData(e){return this.setItem(this.keys.creditData,e)}addCreditRecord(e){const t=this.getCreditData(),n={id:Date.now().toString(),date:e.date,customerId:e.customerId,customerName:e.customerName,fuelEntries:e.fuelEntries||[],incomeEntries:e.incomeEntries||[],expenseEntries:e.expenseEntries||[],amount:parseFloat(e.amount),totalAmount:parseFloat(e.amount),vehicleNumber:e.vehicleNumber||"N/A",fuelType:e.fuelType||(e.fuelEntries&&e.fuelEntries[0]?e.fuelEntries[0].fuelType:"N/A"),liters:e.liters||(e.fuelEntries&&e.fuelEntries[0]?e.fuelEntries[0].liters:0),rate:e.rate||(e.fuelEntries&&e.fuelEntries[0]?e.fuelEntries[0].rate:0),dueDate:e.dueDate||e.date,status:e.status||"pending",mpp:e.mpp||!1,timestamp:(new Date).toISOString()};return t.push(n),this.setCreditData(t),n}getIncomeData(){return this.getItem(this.keys.incomeData)||[]}setIncomeData(e){return this.setItem(this.keys.incomeData,e)}addIncomeRecord(e){const t=this.getIncomeData(),n={id:Date.now().toString(),date:e.date,amount:parseFloat(e.amount),description:e.description||e.category||"Income",type:"income",mpp:e.mpp||!1,timestamp:(new Date).toISOString()};return t.push(n),this.setIncomeData(t),n}getExpenseData(){return this.getItem(this.keys.expenseData)||[]}setExpenseData(e){return this.setItem(this.keys.expenseData,e)}addExpenseRecord(e){const t=this.getExpenseData(),n={id:Date.now().toString(),date:e.date,amount:parseFloat(e.amount),description:e.description||e.category||"Expense",type:"expense",mpp:e.mpp||!1,timestamp:(new Date).toISOString()};return t.push(n),this.setExpenseData(t),n}getFuelSettings(){return this.getItem(this.keys.fuelSettings)}setFuelSettings(e){return this.setItem(this.keys.fuelSettings,e)}updateFuelRate(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(n)return this.setRateForDate(e,t,n);const r=this.getFuelSettings()||{};return!!r[e]&&(r[e].price=parseFloat(t),this.setFuelSettings(r),!0)}getAllRates(){return this.getItem(this.keys.rates)||{}}setAllRates(e){return this.setItem(this.keys.rates,e)}setRateForDate(e,t,n){const r=this.getAllRates();return r[n]||(r[n]={}),r[n][e]=parseFloat(t),this.setAllRates(r)}getRatesForDate(e){const t=this.getAllRates();if(t[e])return t[e];const n=Object.keys(t).sort().reverse().find(t=>t<e);return n?t[n]:{}}getLastChangedRate(e,t){const n=this.getAllRates(),r=Object.keys(n).filter(e=>e<t).sort().reverse();for(const i of r)if(void 0!==n[i][e])return n[i][e];return null}getDataByDate(e,t){let n=[];switch(e){case"sales":n=this.getSalesData();break;case"credit":n=this.getCreditData();break;case"income":n=this.getIncomeData();break;case"expense":n=this.getExpenseData()}return t?n.filter(e=>e.date===t):n}deleteSaleRecord(e){const t=this.getSalesData().filter(t=>t.id!==e);return this.setSalesData(t),!0}deleteCreditRecord(e){const t=this.getCreditData().filter(t=>t.id!==e);return this.setCreditData(t),!0}deleteIncomeRecord(e){const t=this.getIncomeData().filter(t=>t.id!==e);return this.setIncomeData(t),!0}deleteExpenseRecord(e){const t=this.getExpenseData().filter(t=>t.id!==e);return this.setExpenseData(t),!0}updateSaleRecord(e,t){const n=this.getSalesData(),i=n.findIndex(t=>t.id===e);return-1!==i?(n[i]=(0,r.A)((0,r.A)({},n[i]),t),this.setSalesData(n),n[i]):null}updateCreditRecord(e,t){const n=this.getCreditData(),i=n.findIndex(t=>t.id===e);return-1!==i?(n[i]=(0,r.A)((0,r.A)({},n[i]),t),this.setCreditData(n),n[i]):null}updateIncomeRecord(e,t){const n=this.getIncomeData(),i=n.findIndex(t=>t.id===e);return-1!==i?(n[i]=(0,r.A)((0,r.A)({},n[i]),t),this.setIncomeData(n),n[i]):null}updateExpenseRecord(e,t){const n=this.getExpenseData(),i=n.findIndex(t=>t.id===e);return-1!==i?(n[i]=(0,r.A)((0,r.A)({},n[i]),t),this.setExpenseData(n),n[i]):null}exportDataByDate(e){const t=this.getSalesData().filter(t=>t.date===e).map(e=>({i:e.id,d:e.date,n:e.nozzle,f:e.fuelType,sr:e.startReading,er:e.endReading,l:e.liters,r:e.rate,a:e.amount,m:e.mpp})),n=this.getCreditData().filter(t=>t.date===e).map(e=>({i:e.id,d:e.date,ci:e.customerId,cn:e.customerName,a:e.amount,m:e.mpp})),r=this.getIncomeData().filter(t=>t.date===e).map(e=>({i:e.id,d:e.date,ds:e.description,a:e.amount,m:e.mpp})),i=this.getExpenseData().filter(t=>t.date===e).map(e=>({i:e.id,d:e.date,ds:e.description,a:e.amount,m:e.mpp})),s=this.getPayments().filter(t=>t.date===e).map(e=>({i:e.id,d:e.date,ci:e.customerId,a:e.amount,m:e.mode})),a=this.getSettlements().filter(t=>t.date===e).map(e=>({i:e.id,d:e.date,a:e.amount,ds:e.description,m:e.mpp})),o=this.getCustomers().map(e=>({i:e.id,n:e.name,sb:e.startingBalance,mpp:e.isMPP})),l={},c=this.getFuelSettings();return Object.keys(c).forEach(e=>{l[e]={p:c[e].price,n:c[e].nozzleCount}}),{s:t,c:n,i:r,e:i,p:s,st:a,f:l,cu:o,dt:e,v:"2.1"}}exportAllData(){const e={};Object.keys(localStorage).filter(e=>e.endsWith("StockData")).forEach(t=>{e[t]=JSON.parse(localStorage.getItem(t)||"{}")});const t=localStorage.getItem("mpump_contact_info"),n=localStorage.getItem("mpp_notes"),r=localStorage.getItem("mpump_online_url"),i=localStorage.getItem("mpump_auto_backup_settings"),s=localStorage.getItem("mpump_auto_backup_weekly_settings"),a=localStorage.getItem("appTextSize"),o=localStorage.getItem("appTheme");return{salesData:this.getSalesData(),creditData:this.getCreditData(),incomeData:this.getIncomeData(),expenseData:this.getExpenseData(),fuelSettings:this.getFuelSettings(),customers:this.getCustomers(),payments:this.getPayments(),settlements:this.getSettlements(),stockData:e,contactInfo:t?JSON.parse(t):null,notes:n||"",onlineUrl:r||"",autoBackupSettings:i?JSON.parse(i):null,weeklyBackupSettings:s?JSON.parse(s):null,appPreferences:{textSize:a||"100",theme:o||"light"},exportDate:(new Date).toISOString(),version:"2.0"}}importAllData(e){try{return e.salesData&&this.setSalesData(e.salesData),e.creditData&&this.setCreditData(e.creditData),e.incomeData&&this.setIncomeData(e.incomeData),e.expenseData&&this.setExpenseData(e.expenseData),e.fuelSettings&&this.setFuelSettings(e.fuelSettings),e.customers&&this.setCustomers(e.customers),e.payments&&this.setPayments(e.payments),e.stockData&&Object.keys(e.stockData).forEach(t=>{localStorage.setItem(t,JSON.stringify(e.stockData[t]))}),e.contactInfo&&localStorage.setItem("mpump_contact_info",JSON.stringify(e.contactInfo)),void 0!==e.notes&&localStorage.setItem("mpp_notes",e.notes),void 0!==e.onlineUrl&&localStorage.setItem("mpump_online_url",e.onlineUrl),e.autoBackupSettings&&localStorage.setItem("mpump_auto_backup_settings",JSON.stringify(e.autoBackupSettings)),e.weeklyBackupSettings&&localStorage.setItem("mpump_auto_backup_weekly_settings",JSON.stringify(e.weeklyBackupSettings)),e.appPreferences&&(e.appPreferences.textSize&&localStorage.setItem("appTextSize",e.appPreferences.textSize),e.appPreferences.theme&&localStorage.setItem("appTheme",e.appPreferences.theme)),!0}catch(t){return console.error("Failed to import data:",t),!1}}mergeAllData(e){try{const t=(e,t)=>{Array.isArray(e)||(e=[]),Array.isArray(t)||(t=[]);const n=new Set(e.map(e=>e.id)),r=t.filter(e=>!n.has(e.id));return[...e,...r]};if(e.salesData){const n=t(this.getSalesData(),e.salesData);this.setSalesData(n)}if(e.creditData){const n=t(this.getCreditData(),e.creditData);this.setCreditData(n)}if(e.incomeData){const n=t(this.getIncomeData(),e.incomeData);this.setIncomeData(n)}if(e.expenseData){const n=t(this.getExpenseData(),e.expenseData);this.setExpenseData(n)}if(e.customers){const n=t(this.getCustomers(),e.customers);this.setCustomers(n)}if(e.payments){const n=t(this.getPayments(),e.payments);this.setPayments(n)}return e.fuelSettings&&!this.getFuelSettings()&&this.setFuelSettings(e.fuelSettings),e.stockData&&Object.keys(e.stockData).forEach(t=>{localStorage.getItem(t)||localStorage.setItem(t,JSON.stringify(e.stockData[t]))}),e.contactInfo&&!localStorage.getItem("mpump_contact_info")&&localStorage.setItem("mpump_contact_info",JSON.stringify(e.contactInfo)),void 0===e.notes||localStorage.getItem("mpp_notes")||localStorage.setItem("mpp_notes",e.notes),void 0===e.onlineUrl||localStorage.getItem("mpump_online_url")||localStorage.setItem("mpump_online_url",e.onlineUrl),e.autoBackupSettings&&!localStorage.getItem("mpump_auto_backup_settings")&&localStorage.setItem("mpump_auto_backup_settings",JSON.stringify(e.autoBackupSettings)),e.weeklyBackupSettings&&!localStorage.getItem("mpump_auto_backup_weekly_settings")&&localStorage.setItem("mpump_auto_backup_weekly_settings",JSON.stringify(e.weeklyBackupSettings)),e.appPreferences&&(e.appPreferences.textSize&&!localStorage.getItem("appTextSize")&&localStorage.setItem("appTextSize",e.appPreferences.textSize),e.appPreferences.theme&&!localStorage.getItem("appTheme")&&localStorage.setItem("appTheme",e.appPreferences.theme)),!0}catch(t){return console.error("Failed to merge data:",t),!1}}clearAllData(){Object.values(this.keys).forEach(e=>{localStorage.removeItem(e)}),this.initializeDefaultData()}getStorageInfo(){const e=new Blob(Object.values(localStorage)).size;return{totalSize:e,itemCount:Object.keys(localStorage).filter(e=>e.startsWith("mpump_")).length,maxSize:5242880,usagePercent:e/5242880*100}}getCustomers(){return this.getItem(this.keys.customers)||[]}setCustomers(e){return this.setItem(this.keys.customers,e)}addCustomer(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=this.getCustomers();if(n){if(r.find(e=>!0===e.isMPP))throw new Error("A Manager Petrol Pump customer already exists. Only one MPP customer is allowed.")}const i={id:Date.now().toString(),name:e,startingBalance:parseFloat(t)||0,isMPP:n||!1,created_at:(new Date).toISOString()};r.push(i),r.sort((e,t)=>e.name.localeCompare(t.name)),this.setCustomers(r);const a=s();return a&&a.syncCustomer(i,"add"),i}deleteCustomer(e){const t=this.getCustomers(),n=t.find(t=>t.id===e),r=t.filter(t=>t.id!==e);if(this.setCustomers(r),n){const e=s();e&&e.syncCustomer(n,"delete")}return!0}updateCustomer(e,t,n){const i=this.getCustomers();if(!0===n){if(i.find(t=>!0===t.isMPP&&t.id!==e))throw new Error("A Manager Petrol Pump customer already exists. Only one MPP customer is allowed.")}const a=i.map(i=>{if(i.id===e){const e=(0,r.A)((0,r.A)({},i),{},{startingBalance:parseFloat(t)||0});return void 0!==n&&(e.isMPP=n),e}return i});this.setCustomers(a);const o=a.find(t=>t.id===e);if(o){const e=s();e&&e.syncCustomer(o,"update")}return o}isMPPVisible(){return this.getCustomers().some(e=>!0===e.isMPP)}getPayments(){return this.getItem(this.keys.payments)||[]}setPayments(e){return this.setItem(this.keys.payments,e)}addPayment(e){const t=this.getPayments(),n={id:Date.now().toString(),customerId:e.customerId,customerName:e.customerName,amount:parseFloat(e.amount),date:e.date,mode:e.mode||"cash",timestamp:(new Date).toISOString(),linkedMPPCreditId:e.linkedMPPCreditId||null,linkedMPPSettlementId:e.linkedMPPSettlementId||null,isAutoMPPTracking:e.isAutoMPPTracking||!1,description:e.description||null};return t.push(n),this.setPayments(t),n}updatePayment(e,t){const n=this.getPayments(),i=n.findIndex(t=>t.id===e);return-1!==i?(n[i]=(0,r.A)((0,r.A)({},n[i]),{},{customerId:t.customerId,customerName:t.customerName,amount:parseFloat(t.amount),date:t.date,mode:t.mode||n[i].mode||"cash",timestamp:(new Date).toISOString()}),this.setPayments(n),n[i]):null}deletePayment(e){const t=this.getPayments().filter(t=>t.id!==e);return this.setPayments(t),!0}getIncomeCategories(){return this.getItem(this.keys.incomeCategories)||[]}setIncomeCategories(e){return this.setItem(this.keys.incomeCategories,e)}addIncomeCategory(e){const t=this.getIncomeCategories(),n={id:Date.now().toString(),name:e};return t.push(n),t.sort((e,t)=>e.name.localeCompare(t.name)),this.setIncomeCategories(t),n}deleteIncomeCategory(e){const t=this.getIncomeCategories().filter(t=>t.id!==e);return this.setIncomeCategories(t),!0}updateIncomeCategory(e,t){const n=this.getIncomeCategories().map(n=>n.id===e?(0,r.A)((0,r.A)({},n),{},{name:t}):n);return n.sort((e,t)=>e.name.localeCompare(t.name)),this.setIncomeCategories(n),n.find(t=>t.id===e)}getExpenseCategories(){return this.getItem(this.keys.expenseCategories)||[]}setExpenseCategories(e){return this.setItem(this.keys.expenseCategories,e)}addExpenseCategory(e){const t=this.getExpenseCategories(),n={id:Date.now().toString(),name:e};return t.push(n),t.sort((e,t)=>e.name.localeCompare(t.name)),this.setExpenseCategories(t),n}deleteExpenseCategory(e){const t=this.getExpenseCategories().filter(t=>t.id!==e);return this.setExpenseCategories(t),!0}updateExpenseCategory(e,t){const n=this.getExpenseCategories().map(n=>n.id===e?(0,r.A)((0,r.A)({},n),{},{name:t}):n);return n.sort((e,t)=>e.name.localeCompare(t.name)),this.setExpenseCategories(n),n.find(t=>t.id===e)}getSettlements(){return this.getItem(this.keys.settlements)||[]}setSettlements(e){return this.setItem(this.keys.settlements,e)}addSettlement(e){const t=this.getSettlements(),n={id:Date.now().toString(),date:e.date,amount:parseFloat(e.amount),description:e.description||"",mpp:e.mpp||!1,timestamp:(new Date).toISOString()};return t.push(n),this.setSettlements(t),n}updateSettlement(e,t){const n=this.getSettlements(),i=n.findIndex(t=>t.id===e);return-1!==i?(n[i]=(0,r.A)((0,r.A)({},n[i]),{},{date:t.date,amount:parseFloat(t.amount),description:t.description||"",mpp:void 0!==t.mpp?t.mpp:n[i].mpp,timestamp:(new Date).toISOString()}),this.setSettlements(n),n[i]):null}deleteSettlement(e){const t=this.getSettlements().filter(t=>t.id!==e);return this.setSettlements(t),!0}getSettlementTypes(){return this.getItem(this.keys.settlementTypes)||[]}setSettlementTypes(e){return this.setItem(this.keys.settlementTypes,e)}addSettlementType(e){const t=this.getSettlementTypes(),n={id:Date.now().toString(),name:e};return t.push(n),t.sort((e,t)=>e.name.localeCompare(t.name)),this.setSettlementTypes(t),n}deleteSettlementType(e){const t=this.getSettlementTypes().filter(t=>t.id!==e);return this.setSettlementTypes(t),!0}updateSettlementType(e,t){const n=this.getSettlementTypes().map(n=>n.id===e?(0,r.A)((0,r.A)({},n),{},{name:t}):n);return n.sort((e,t)=>e.name.localeCompare(t.name)),this.setSettlementTypes(n),n.find(t=>t.id===e)}getIncomeDescHistory(){return JSON.parse(localStorage.getItem(this.keys.incomeDescHistory)||"[]")}addIncomeDescHistory(e){if(!e||!e.trim())return;const t=this.getIncomeDescHistory(),n=e.trim();t.includes(n)||(t.unshift(n),t.length>20&&t.splice(20),localStorage.setItem(this.keys.incomeDescHistory,JSON.stringify(t)))}deleteIncomeDescHistory(e){const t=this.getIncomeDescHistory().filter(t=>t!==e);localStorage.setItem(this.keys.incomeDescHistory,JSON.stringify(t))}getExpenseDescHistory(){return JSON.parse(localStorage.getItem(this.keys.expenseDescHistory)||"[]")}addExpenseDescHistory(e){if(!e||!e.trim())return;const t=this.getExpenseDescHistory(),n=e.trim();t.includes(n)||(t.unshift(n),t.length>20&&t.splice(20),localStorage.setItem(this.keys.expenseDescHistory,JSON.stringify(t)))}deleteExpenseDescHistory(e){const t=this.getExpenseDescHistory().filter(t=>t!==e);localStorage.setItem(this.keys.expenseDescHistory,JSON.stringify(t))}isProModeEnabled(){return"true"===localStorage.getItem("mpump_pro_mode")}},o=a},8177:(e,t,n)=>{const r=n(1312);function i(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}i.prototype.initialize=function(e){this.degree=e,this.genPoly=r.generateECPolynomial(this.degree)},i.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(e.length+this.degree);t.set(e);const n=r.mod(t,this.genPoly),i=this.degree-n.length;if(i>0){const e=new Uint8Array(this.degree);return e.set(n,i),e}return n},e.exports=i},8293:(e,t)=>{function n(e){if("number"===typeof e&&(e=e.toString()),"string"!==typeof e)throw new Error("Color should be defined as hex string");let t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw new Error("Invalid hex color: "+e);3!==t.length&&4!==t.length||(t=Array.prototype.concat.apply([],t.map(function(e){return[e,e]}))),6===t.length&&t.push("F","F");const n=parseInt(t.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:255&n,hex:"#"+t.slice(0,6).join("")}}t.getOptions=function(e){e||(e={}),e.color||(e.color={});const t="undefined"===typeof e.margin||null===e.margin||e.margin<0?4:e.margin,r=e.width&&e.width>=21?e.width:void 0,i=e.scale||4;return{width:r,scale:r?4:i,margin:t,color:{dark:n(e.color.dark||"#000000ff"),light:n(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},t.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},t.getImageWidth=function(e,n){const r=t.getScale(e,n);return Math.floor((e+2*n.margin)*r)},t.qrToImageData=function(e,n,r){const i=n.modules.size,s=n.modules.data,a=t.getScale(i,r),o=Math.floor((i+2*r.margin)*a),l=r.margin*a,c=[r.color.light,r.color.dark];for(let t=0;t<o;t++)for(let n=0;n<o;n++){let u=4*(t*o+n),d=r.color.light;if(t>=l&&n>=l&&t<o-l&&n<o-l){d=c[s[Math.floor((t-l)/a)*i+Math.floor((n-l)/a)]?1:0]}e[u++]=d.r,e[u++]=d.g,e[u++]=d.b,e[u]=d.a}}},8511:(e,t)=>{const n="[0-9]+";let r="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";r=r.replace(/u/g,"\\u");const i="(?:(?![A-Z0-9 $%*+\\-./:]|"+r+")(?:.|[\r\n]))+";t.KANJI=new RegExp(r,"g"),t.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),t.BYTE=new RegExp(i,"g"),t.NUMERIC=new RegExp(n,"g"),t.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const s=new RegExp("^"+r+"$"),a=new RegExp("^"+n+"$"),o=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");t.testKanji=function(e){return s.test(e)},t.testNumeric=function(e){return a.test(e)},t.testAlphanumeric=function(e){return o.test(e)}},8679:(e,t,n)=>{"use strict";var r=n(2897).default;Object.defineProperty(t,"__esModule",{value:!0});var i=n(7198);const s={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},a=function(e,t){if(!e)throw o(t)},o=function(e){return new Error("Firebase Database ("+s.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},l=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},c={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,a=s?e[i+1]:0,o=i+2<e.length,l=o?e[i+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,s||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(l(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const o=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==a||null==o)throw new u;const l=t<<2|s>>4;if(r.push(l),64!==a){const e=s<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class u extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const d=function(e){const t=l(e);return c.encodeByteArray(t,!0)},h=function(e){return d(e).replace(/\./g,"")},f=function(e){try{return c.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function p(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&m(n)&&(e[n]=p(e[n],t[n]));return e}function m(e){return"__proto__"!==e}function g(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const y=()=>{try{return i.getDefaultsFromPostinstall()||g().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:"443",FAST_REFRESH:!0,REACT_APP_BACKEND_URL:"https://mobilegas.preview.emergentagent.com",REACT_APP_ENABLE_VISUAL_EDITS:"false"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&f(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},v=e=>{var t;return null===(t=y())||void 0===t||null===(t=t.emulatorHosts)||void 0===t?void 0:t[e]};class w{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function b(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}const x={};let S=!1;function A(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function E(){var e;const t=null===(e=y())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function N(){return"undefined"!==typeof WorkerGlobalScope&&"undefined"!==typeof self&&self instanceof WorkerGlobalScope}class C extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,C.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_.prototype.create)}}class _{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(T,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new C(n,s,t)}}const T=/\{\$([^}]+)}/g;function I(e){return JSON.parse(e)}const k=function(e){let t={},n={},r={},i="";try{const s=e.split(".");t=I(f(s[0])||""),n=I(f(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(s){}return{header:t,claims:n,data:r,signature:i}};function P(e){return null!==e&&"object"===typeof e}class R{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=D),void 0===r.error&&(r.error=D),void 0===r.complete&&(r.complete=D);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function D(){}function O(e,t){return"".concat(e," failed: ").concat(t," argument ")}const L=144e5;t.CONSTANTS=s,t.DecodeBase64StringError=u,t.Deferred=w,t.ErrorFactory=_,t.FirebaseError=C,t.MAX_VALUE_MILLIS=L,t.RANDOM_FACTOR=.5,t.Sha1=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let u=0;u<16;u++)n[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)n[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=4294967295&(e<<1|e>>>31)}let r,i,s=this.chain_[0],a=this.chain_[1],o=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(r=l^a&(o^l),i=1518500249):(r=a^o^l,i=1859775393):u<60?(r=a&o|l&(a|o),i=2400959708):(r=a^o^l,i=3395469782);const e=(s<<5|s>>>27)+r+c+i+n[u]&4294967295;c=l,l=o,o=4294967295&(a<<30|a>>>2),a=s,s=e}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let s=this.inbuf_;for(;r<t;){if(0===s)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[s]=e.charCodeAt(r),++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<t;)if(i[s]=e[r],++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}},t.areCookiesEnabled=function(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)},t.assert=a,t.assertionError=o,t.async=function(e,t){return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];Promise.resolve(!0).then(()=>{e(...r)}).catch(e=>{t&&t(e)})}},t.base64=c,t.base64Decode=f,t.base64Encode=d,t.base64urlEncodeWithoutPadding=h,t.calculateBackoffMillis=function(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3)*Math.pow(t,e),r=Math.round(.5*n*(Math.random()-.5)*2);return Math.min(L,n+r)},t.contains=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.createMockUserToken=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=r({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[h(JSON.stringify({alg:"none",type:"JWT"})),h(JSON.stringify(a)),""].join(".")},t.createSubscribe=function(e,t){const n=new R(e,t);return n.subscribe.bind(n)},t.decode=k,t.deepCopy=function(e){return p(void 0,e)},t.deepEqual=function e(t,n){if(t===n)return!0;const r=Object.keys(t),i=Object.keys(n);for(const s of r){if(!i.includes(s))return!1;const r=t[s],a=n[s];if(P(r)&&P(a)){if(!e(r,a))return!1}else if(r!==a)return!1}for(const s of i)if(!r.includes(s))return!1;return!0},t.deepExtend=p,t.errorPrefix=O,t.extractQuerystring=function(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)},t.getDefaultAppConfig=()=>{var e;return null===(e=y())||void 0===e?void 0:e.config},t.getDefaultEmulatorHost=v,t.getDefaultEmulatorHostnameAndPort=e=>{const t=v(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},t.getDefaults=y,t.getExperimentalSetting=e=>{var t;return null===(t=y())||void 0===t?void 0:t["_".concat(e)]},t.getGlobal=g,t.getModularInstance=function(e){return e&&e._delegate?e._delegate:e},t.getUA=A,t.isAdmin=function(e){const t=k(e).claims;return"object"===typeof t&&!0===t.admin},t.isBrowser=function(){return"undefined"!==typeof window||N()},t.isBrowserExtension=function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id},t.isCloudWorkstation=b,t.isCloudflareWorker=function(){return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent},t.isElectron=function(){return A().indexOf("Electron/")>=0},t.isEmpty=function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},t.isIE=function(){const e=A();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0},t.isIndexedDBAvailable=function(){try{return"object"===typeof indexedDB}catch(e){return!1}},t.isMobileCordova=function(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(A())},t.isNode=E,t.isNodeSdk=function(){return!0===s.NODE_CLIENT||!0===s.NODE_ADMIN},t.isReactNative=function(){return"object"===typeof navigator&&"ReactNative"===navigator.product},t.isSafari=function(){return!E()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")},t.isSafariOrWebkit=function(){return!E()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")},t.isUWP=function(){return A().indexOf("MSAppHost/")>=0},t.isValidFormat=function(e){const t=k(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")},t.isValidTimestamp=function(e){const t=k(e).claims,n=Math.floor((new Date).getTime()/1e3);let r=0,i=0;return"object"===typeof t&&(t.hasOwnProperty("nbf")?r=t.nbf:t.hasOwnProperty("iat")&&(r=t.iat),i=t.hasOwnProperty("exp")?t.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},t.isWebWorker=N,t.issuedAtTime=function(e){const t=k(e).claims;return"object"===typeof t&&t.hasOwnProperty("iat")?t.iat:null},t.jsonEval=I,t.map=function(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r},t.ordinal=function(e){return Number.isFinite(e)?e+function(e){e=Math.abs(e);const t=e%100;if(t>=10&&t<=20)return"th";const n=e%10;if(1===n)return"st";if(2===n)return"nd";if(3===n)return"rd";return"th"}(e):"".concat(e)},t.pingServer=async function(e){return(await fetch(e,{credentials:"include"})).ok},t.promiseWithTimeout=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;const n=new w;return setTimeout(()=>n.reject("timeout!"),t),e.then(n.resolve,n.reject),n.promise},t.querystring=function(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""},t.querystringDecode=function(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t},t.safeGet=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0},t.stringLength=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},t.stringToByteArray=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const t=i-55296;r++,a(r<e.length,"Surrogate pair missing trail surrogate.");i=65536+(t<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},t.stringify=function(e){return JSON.stringify(e)},t.updateEmulatorBanner=function(e,t){if("undefined"===typeof window||"undefined"===typeof document||!b(window.location.host)||x[e]===t||x[e]||S)return;function n(e){return"__firebase__banner__".concat(e)}x[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(x))x[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{S=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function a(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),a=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),l=document.getElementById(o)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,o);const n=s();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,a,l,n),document.body.appendChild(t)}i?(a.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',a.innerText="Preview backend running in this workspace."),a.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a()},t.validateArgCount=function(e,t,n,r){let i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i){throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}},t.validateCallback=function(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(O(e,t)+"must be a valid function.")},t.validateContextObject=function(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(O(e,t)+"must be a valid context object.")},t.validateIndexedDBOpenable=function(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})},t.validateNamespace=function(e,t,n){if((!n||t)&&"string"!==typeof t)throw new Error(O(e,"namespace")+"must be a valid firebase namespace.")}},8697:(e,t,n)=>{const r=n(7421);function i(e){this.mode=r.BYTE,this.data="string"===typeof e?(new TextEncoder).encode(e):new Uint8Array(e)}i.getBitsLength=function(e){return 8*e},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(e){for(let t=0,n=this.data.length;t<n;t++)e.put(this.data[t],8)},e.exports=i},8853:(e,t,n)=>{"use strict";e.exports=n(5896)},8970:(e,t,n)=>{const r=n(6116),i=n(4772),s=n(2182),a=n(5487);function o(e,t,n,s,a){const o=[].slice.call(arguments,1),l=o.length,c="function"===typeof o[l-1];if(!c&&!r())throw new Error("Callback required as last argument");if(!c){if(l<1)throw new Error("Too few arguments provided");return 1===l?(n=t,t=s=void 0):2!==l||t.getContext||(s=n,n=t,t=void 0),new Promise(function(r,a){try{const a=i.create(n,s);r(e(a,t,s))}catch(o){a(o)}})}if(l<2)throw new Error("Too few arguments provided");2===l?(a=n,n=t,t=s=void 0):3===l&&(t.getContext&&"undefined"===typeof a?(a=s,s=void 0):(a=s,s=n,n=t,t=void 0));try{const r=i.create(n,s);a(null,e(r,t,s))}catch(u){a(u)}}t.create=i.create,t.toCanvas=o.bind(null,s.render),t.toDataURL=o.bind(null,s.renderToDataURL),t.toString=o.bind(null,function(e,t,n){return a.render(e,n)})},9021:(e,t,n)=>{const r=n(7969).getSymbolSize;t.getPositions=function(e){const t=r(e);return[[0,0],[t-7,0],[0,t-7]]}},9045:(e,t,n)=>{var r=n(3738).default;e.exports=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},9379:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(4467);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}},9382:(e,t,n)=>{const r=n(7969).getSymbolSize;t.getRowColCoords=function(e){if(1===e)return[];const t=Math.floor(e/7)+2,n=r(e),i=145===n?26:2*Math.ceil((n-13)/(2*t-2)),s=[n-7];for(let r=1;r<t-1;r++)s[r]=s[r-1]-i;return s.push(6),s.reverse()},t.getPositions=function(e){const n=[],r=t.getRowColCoords(e),i=r.length;for(let t=0;t<i;t++)for(let e=0;e<i;e++)0===t&&0===e||0===t&&e===i-1||t===i-1&&0===e||n.push([r[t],r[e]]);return n}},9606:(e,t,n)=>{"use strict";n.d(t,{h1:()=>o,uA:()=>i});var r=n(1776);class i{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const s="[DEFAULT]";class a{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new r.cY;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:s})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===s?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(a){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return this.component?this.component.multipleInstances?e:s:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class o{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new a(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},9642:(e,t,n)=>{const r=n(7421),i=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function s(e){this.mode=r.ALPHANUMERIC,this.data=e}s.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let n=45*i.indexOf(this.data[t]);n+=i.indexOf(this.data[t+1]),e.put(n,11)}this.data.length%2&&e.put(i.indexOf(this.data[t]),6)},e.exports=s},9887:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=[];var r;t.LogLevel=void 0,(r=t.LogLevel||(t.LogLevel={}))[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT";const i={debug:t.LogLevel.DEBUG,verbose:t.LogLevel.VERBOSE,info:t.LogLevel.INFO,warn:t.LogLevel.WARN,error:t.LogLevel.ERROR,silent:t.LogLevel.SILENT},s=t.LogLevel.INFO,a={[t.LogLevel.DEBUG]:"log",[t.LogLevel.VERBOSE]:"log",[t.LogLevel.INFO]:"info",[t.LogLevel.WARN]:"warn",[t.LogLevel.ERROR]:"error"},o=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=a[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};t.Logger=class{constructor(e){this.name=e,this._logLevel=s,this._logHandler=o,this._userLogHandler=null,n.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in t.LogLevel))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?i[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];this._userLogHandler&&this._userLogHandler(this,t.LogLevel.DEBUG,...n),this._logHandler(this,t.LogLevel.DEBUG,...n)}log(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];this._userLogHandler&&this._userLogHandler(this,t.LogLevel.VERBOSE,...n),this._logHandler(this,t.LogLevel.VERBOSE,...n)}info(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];this._userLogHandler&&this._userLogHandler(this,t.LogLevel.INFO,...n),this._logHandler(this,t.LogLevel.INFO,...n)}warn(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];this._userLogHandler&&this._userLogHandler(this,t.LogLevel.WARN,...n),this._logHandler(this,t.LogLevel.WARN,...n)}error(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];this._userLogHandler&&this._userLogHandler(this,t.LogLevel.ERROR,...n),this._logHandler(this,t.LogLevel.ERROR,...n)}},t.setLogLevel=function(e){n.forEach(t=>{t.setLogLevel(e)})},t.setUserLogHandler=function(e,r){for(const s of n){let n=null;r&&r.level&&(n=i[r.level]),s.userLogHandler=null===e?null:function(r,i){for(var s=arguments.length,a=new Array(s>2?s-2:0),o=2;o<s;o++)a[o-2]=arguments[o];const l=a.map(e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}}).filter(e=>e).join(" ");i>=(null!==n&&void 0!==n?n:r.logLevel)&&e({level:t.LogLevel[i].toLowerCase(),message:l,args:a,type:r.name})}}}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}n.m=e,(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&i&&r;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>a[e]=()=>r[e]);return a.default=()=>r,n.d(s,a),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+"."+{213:"69a5e8d8",239:"ad40150f",455:"dee68d02"}[e]+".chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="frontend:";n.l=(r,i,s,a)=>{if(e[r])e[r].push(i);else{var o,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+s){o=d;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+s),o.src=r),e[r]=[i];var h=(t,n)=>{o.onerror=o.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),i&&i.forEach(e=>e(n)),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="./",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var s=new Promise((n,r)=>i=e[t]=[n,r]);r.push(i[2]=s);var a=n.p+n.u(t),o=new Error;n.l(a,r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+a+")",o.name="ChunkLoadError",o.type=s,o.request=a,i[1](o)}},"chunk-"+t,t)}};var t=(t,r)=>{var i,s,[a,o,l]=r,c=0;if(a.some(t=>0!==e[t])){for(i in o)n.o(o,i)&&(n.m[i]=o[i]);if(l)l(n)}for(t&&t(r);c<a.length;c++)s=a[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunkfrontend=self.webpackChunkfrontend||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),n.nc=void 0,(()=>{"use strict";var e=n(5043),t=n.t(e,2),r=n(4391),i=n(3986),s=n(9379);const a=["sri"],o=["page"],l=["page","matches"],c=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],u=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],d=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var h="popstate";function f(){return b(function(e,t){let{pathname:n="/",search:r="",hash:i=""}=w(e.location.hash.substring(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),y("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){let n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");r=-1===n?t:t.slice(0,n)}return r+"#"+("string"===typeof t?t:v(t))},function(e,t){m("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push(".concat(JSON.stringify(t),")"))},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function p(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function m(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function g(e,t){return{usr:e.state,key:e.key,idx:t}}function y(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return(0,s.A)((0,s.A)({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?w(t):t),{},{state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)})}function v(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function w(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function b(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,l="POP",c=null,u=d();function d(){return(o.state||{idx:null}).idx}function f(){l="POP";let e=d(),t=null==e?null:e-u;u=e,c&&c({action:l,location:m.location,delta:t})}function p(e){return x(e)}null==u&&(u=0,o.replaceState((0,s.A)((0,s.A)({},o.state),{},{idx:u}),""));let m={get action(){return l},get location(){return e(i,o)},listen(e){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(h,f),c=e,()=>{i.removeEventListener(h,f),c=null}},createHref:e=>t(i,e),createURL:p,encodeLocation(e){let t=p(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l="PUSH";let r=y(m.location,e,t);n&&n(r,e),u=d()+1;let s=g(r,u),h=m.createHref(r);try{o.pushState(s,"",h)}catch(f){if(f instanceof DOMException&&"DataCloneError"===f.name)throw f;i.location.assign(h)}a&&c&&c({action:l,location:m.location,delta:1})},replace:function(e,t){l="REPLACE";let r=y(m.location,e,t);n&&n(r,e),u=d();let i=g(r,u),s=m.createHref(r);o.replaceState(i,"",s),a&&c&&c({action:l,location:m.location,delta:0})},go:e=>o.go(e)};return m}function x(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),p(n,"No window.location.(origin|href) available to create URL");let r="string"===typeof e?e:v(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}new WeakMap;function S(e,t){return A(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function A(e,t,n,r){let i=j(("string"===typeof t?w(t):t).pathname||"/",n);if(null==i)return null;let s=E(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let a=null;for(let o=0;null==a&&o<s.length;++o){let e=F(i);a=O(s[o],e,r)}return a}function E(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=function(e,s){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i,o=arguments.length>3?arguments[3]:void 0,l={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(r)&&a)return;p(l.relativePath.startsWith(r),'Absolute route path "'.concat(l.relativePath,'" nested under path "').concat(r,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),l.relativePath=l.relativePath.slice(r.length)}let c=H([r,l.relativePath]),u=n.concat(l);e.children&&e.children.length>0&&(p(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(c,'".')),E(e.children,t,u,c,a)),(null!=e.path||e.index)&&t.push({path:c,score:D(c,e.index),routesMeta:u})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!==(n=e.path)&&void 0!==n&&n.includes("?"))for(let r of N(e.path))s(e,t,!0,r);else s(e,t)}),t}function N(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let a=N(r.join("/")),o=[];return o.push(...a.map(e=>""===e?s:[s,e].join("/"))),i&&o.push(...a),o.map(t=>e.startsWith("/")&&""===t?"/":t)}var C=/^:[\w-]+$/,_=3,T=2,I=1,k=10,P=-2,R=e=>"*"===e;function D(e,t){let n=e.split("/"),r=n.length;return n.some(R)&&(r+=P),t&&(r+=T),n.filter(e=>!R(e)).reduce((e,t)=>e+(C.test(t)?_:""===t?I:k),r)}function O(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:r}=e,i={},s="/",a=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===s?t:t.slice(s.length)||"/",u=L({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=L({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),a.push({params:i,pathname:H([s,u.pathname]),pathnameBase:W(H([s,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(s=H([s,u.pathnameBase]))}return a}function L(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=M(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1),l=r.reduce((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=o[n]||"";a=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{});return{params:l,pathname:s,pathnameBase:a,pattern:e}}function M(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];m("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function F(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return m(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function j(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function B(e,t,n,r){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(r),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function U(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function z(e){let t=U(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function V(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?r=w(e):(r=(0,s.A)({},e),p(!r.pathname||!r.pathname.includes("?"),B("?","pathname","search",r)),p(!r.pathname||!r.pathname.includes("#"),B("#","pathname","hash",r)),p(!r.search||!r.search.includes("#"),B("#","search","hash",r)));let a,o=""===e||""===r.pathname,l=o?"/":r.pathname;if(null==l)a=n;else{let e=t.length-1;if(!i&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}a=e>=0?t[e]:"/"}let c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:n,search:r="",hash:i=""}="string"===typeof e?w(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:q(r),hash:G(i)}}(r,a),u=l&&"/"!==l&&l.endsWith("/"),d=(o||"."===l)&&n.endsWith("/");return c.pathname.endsWith("/")||!u&&!d||(c.pathname+="/"),c}var H=e=>e.join("/").replace(/\/\/+/g,"/"),W=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),q=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",G=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function K(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}Symbol("Uninstrumented");Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Y=["POST","PUT","PATCH","DELETE"],X=(new Set(Y),["GET",...Y]);new Set(X),Symbol("ResetLoaderData");var Q=e.createContext(null);Q.displayName="DataRouter";var J=e.createContext(null);J.displayName="DataRouterState";var Z=e.createContext(!1);var ee=e.createContext({isTransitioning:!1});ee.displayName="ViewTransition";var te=e.createContext(new Map);te.displayName="Fetchers";var ne=e.createContext(null);ne.displayName="Await";var re=e.createContext(null);re.displayName="Navigation";var ie=e.createContext(null);ie.displayName="Location";var se=e.createContext({outlet:null,matches:[],isDataRoute:!1});se.displayName="Route";var ae=e.createContext(null);ae.displayName="RouteError";function oe(){return null!=e.useContext(ie)}function le(){return p(oe(),"useLocation() may be used only in the context of a <Router> component."),e.useContext(ie).location}var ce="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ue(t){e.useContext(re).static||e.useLayoutEffect(t)}function de(){let{isDataRoute:t}=e.useContext(se);return t?function(){let{router:t}=be("useNavigate"),n=Se("useNavigate"),r=e.useRef(!1);ue(()=>{r.current=!0});let i=e.useCallback(async function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};m(r.current,ce),r.current&&("number"===typeof e?t.navigate(e):await t.navigate(e,(0,s.A)({fromRouteId:n},i)))},[t,n]);return i}():function(){p(oe(),"useNavigate() may be used only in the context of a <Router> component.");let t=e.useContext(Q),{basename:n,navigator:r}=e.useContext(re),{matches:i}=e.useContext(se),{pathname:s}=le(),a=JSON.stringify(z(i)),o=e.useRef(!1);ue(()=>{o.current=!0});let l=e.useCallback(function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(m(o.current,ce),!o.current)return;if("number"===typeof e)return void r.go(e);let l=V(e,JSON.parse(a),s,"path"===i.relative);null==t&&"/"!==n&&(l.pathname="/"===l.pathname?n:H([n,l.pathname])),(i.replace?r.replace:r.push)(l,i.state,i)},[n,r,a,s,t]);return l}()}e.createContext(null);function he(t){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:r}=e.useContext(se),{pathname:i}=le(),s=JSON.stringify(z(r));return e.useMemo(()=>V(t,JSON.parse(s),i,"path"===n),[t,s,i,n])}function fe(t,n,r,i,a){p(oe(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=e.useContext(re),{matches:l}=e.useContext(se),c=l[l.length-1],u=c?c.params:{},d=c?c.pathname:"/",h=c?c.pathnameBase:"/",f=c&&c.route;{let e=f&&f.path||"";Ne(d,!f||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(d,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let g,y=le();if(n){var v;let e="string"===typeof n?w(n):n;p("/"===h||(null===(v=e.pathname)||void 0===v?void 0:v.startsWith(h)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(h,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),g=e}else g=y;let b=g.pathname||"/",x=b;if("/"!==h){let e=h.replace(/^\//,"").split("/");x="/"+b.replace(/^\//,"").split("/").slice(e.length).join("/")}let A=S(t,{pathname:x});m(f||null!=A,'No routes matched location "'.concat(g.pathname).concat(g.search).concat(g.hash,'" ')),m(null==A||void 0!==A[A.length-1].route.element||void 0!==A[A.length-1].route.Component||void 0!==A[A.length-1].route.lazy,'Matched leaf route at location "'.concat(g.pathname).concat(g.search).concat(g.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let E=ve(A&&A.map(e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:H([h,o.encodeLocation?o.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:H([h,o.encodeLocation?o.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])})),l,r,i,a);return n&&E?e.createElement(ie.Provider,{value:{location:(0,s.A)({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:"POP"}},E):E}function pe(){let t=Ae(),n=K(t)?"".concat(t.status," ").concat(t.statusText):t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=e.createElement(e.Fragment,null,e.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),e.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",e.createElement("code",{style:a},"ErrorBoundary")," or"," ",e.createElement("code",{style:a},"errorElement")," prop on your route.")),e.createElement(e.Fragment,null,e.createElement("h2",null,"Unexpected Application Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},n),r?e.createElement("pre",{style:s},r):null,o)}var me=e.createElement(pe,null),ge=class extends e.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return void 0!==this.state.error?e.createElement(se.Provider,{value:this.props.routeContext},e.createElement(ae.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ye(t){let{routeContext:n,match:r,children:i}=t,s=e.useContext(Q);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),e.createElement(se.Provider,{value:n},i)}function ve(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==t){if(!r)return null;if(r.errors)t=r.matches;else{if(0!==n.length||r.initialized||!(r.matches.length>0))return null;t=r.matches}}let s=t,a=null===r||void 0===r?void 0:r.errors;if(null!=a){let e=s.findIndex(e=>e.route.id&&void 0!==(null===a||void 0===a?void 0:a[e.route.id]));p(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(a).join(","))),s=s.slice(0,Math.min(s.length,e+1))}let o=!1,l=-1;if(r)for(let e=0;e<s.length;e++){let t=s[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(l=e),t.route.id){let{loaderData:e,errors:n}=r,i=t.route.loader&&!e.hasOwnProperty(t.route.id)&&(!n||void 0===n[t.route.id]);if(t.route.lazy||i){o=!0,s=l>=0?s.slice(0,l+1):[s[0]];break}}}return s.reduceRight((t,c,u)=>{let d,h=!1,f=null,p=null;r&&(d=a&&c.route.id?a[c.route.id]:void 0,f=c.route.errorElement||me,o&&(l<0&&0===u?(Ne("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,p=null):l===u&&(h=!0,p=c.route.hydrateFallbackElement||null)));let m=n.concat(s.slice(0,u+1)),g=()=>{let n;return n=d?f:h?p:c.route.Component?e.createElement(c.route.Component,null):c.route.element?c.route.element:t,e.createElement(ye,{match:c,routeContext:{outlet:t,matches:m,isDataRoute:null!=r},children:n})};return r&&(c.route.ErrorBoundary||c.route.errorElement||0===u)?e.createElement(ge,{location:r.location,revalidation:r.revalidation,component:f,error:d,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0},unstable_onError:i}):g()},null)}function we(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function be(t){let n=e.useContext(Q);return p(n,we(t)),n}function xe(t){let n=e.useContext(J);return p(n,we(t)),n}function Se(t){let n=function(t){let n=e.useContext(se);return p(n,we(t)),n}(t),r=n.matches[n.matches.length-1];return p(r.route.id,"".concat(t,' can only be used on routes that contain a unique "id"')),r.route.id}function Ae(){var t;let n=e.useContext(ae),r=xe("useRouteError"),i=Se("useRouteError");return void 0!==n?n:null===(t=r.errors)||void 0===t?void 0:t[i]}var Ee={};function Ne(e,t,n){t||Ee[e]||(Ee[e]=!0,m(!1,n))}var Ce={};function _e(e,t){e||Ce[t]||(Ce[t]=!0,console.warn(t))}e.memo(function(e){let{routes:t,future:n,state:r,unstable_onError:i}=e;return fe(t,void 0,r,i,n)});function Te(e){p(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Ie(t){let{basename:n="/",children:r=null,location:i,navigationType:s="POP",navigator:a,static:o=!1}=t;p(!oe(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),c=e.useMemo(()=>({basename:l,navigator:a,static:o,future:{}}),[l,a,o]);"string"===typeof i&&(i=w(i));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:g="default"}=i,y=e.useMemo(()=>{let e=j(u,l);return null==e?null:{location:{pathname:e,search:d,hash:h,state:f,key:g},navigationType:s}},[l,u,d,h,f,g,s]);return m(null!=y,'<Router basename="'.concat(l,'"> is not able to match the URL "').concat(u).concat(d).concat(h,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==y?null:e.createElement(re.Provider,{value:c},e.createElement(ie.Provider,{children:r,value:y}))}function ke(e){let{children:t,location:n}=e;return fe(Pe(t),n)}e.Component;function Pe(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[];return e.Children.forEach(t,(t,i)=>{if(!e.isValidElement(t))return;let s=[...n,i];if(t.type===e.Fragment)return void r.push.apply(r,Pe(t.props.children,s));p(t.type===Te,"[".concat("string"===typeof t.type?t.type:t.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),p(!t.props.index||!t.props.children,"An index route cannot have child routes.");let a={id:t.props.id||s.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,middleware:t.props.middleware,loader:t.props.loader,action:t.props.action,hydrateFallbackElement:t.props.hydrateFallbackElement,HydrateFallback:t.props.HydrateFallback,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:!0===t.props.hasErrorBoundary||null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(a.children=Pe(t.props.children,s)),r.push(a)}),r}var Re="get",De="application/x-www-form-urlencoded";function Oe(e){return null!=e&&"string"===typeof e.tagName}var Le=null;var Me=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Fe(e){return null==e||Me.has(e)?e:(m(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(De,'"')),null)}function je(e,t){let n,r,i,s,a;if(Oe(o=e)&&"form"===o.tagName.toLowerCase()){let a=e.getAttribute("action");r=a?j(a,t):null,n=e.getAttribute("method")||Re,i=Fe(e.getAttribute("enctype"))||De,s=new FormData(e)}else if(function(e){return Oe(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Oe(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let a=e.form;if(null==a)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||a.getAttribute("action");if(r=o?j(o,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||Re,i=Fe(e.getAttribute("formenctype"))||Fe(a.getAttribute("enctype"))||De,s=new FormData(a,e),!function(){if(null===Le)try{new FormData(document.createElement("form"),0),Le=!1}catch(e){Le=!0}return Le}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?"".concat(t,"."):"";s.append("".concat(e,"x"),"0"),s.append("".concat(e,"y"),"0")}else t&&s.append(t,r)}}else{if(Oe(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Re,r=null,i=De,a=e}var o;return s&&"text/plain"===i&&(a=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function Be(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function Ue(e,t,n){let r="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===r.pathname?r.pathname="_root.".concat(n):t&&"/"===j(r.pathname,t)?r.pathname="".concat(t.replace(/\/$/,""),"/_root.").concat(n):r.pathname="".concat(r.pathname.replace(/\/$/,""),".").concat(n),r}async function ze(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Ve(e){return null!=e&&"string"===typeof e.page}function He(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function We(e,t,n,r,i,s){let a=(e,t)=>!n[t]||e.route.id!==n[t].route.id,o=(e,t)=>{var r;return n[t].pathname!==e.pathname||(null===(r=n[t].route.path)||void 0===r?void 0:r.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===s?t.filter((e,t)=>a(e,t)||o(e,t)):"data"===s?t.filter((t,s)=>{let l=r.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(a(t,s)||o(t,s))return!0;if(t.route.shouldRevalidate){var c;let r=t.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:(null===(c=n[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof r)return r}return!0}):[]}function qe(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1),[...new Set(r)];var r}function Ge(e,t){let n=new Set,r=new Set(t);return e.reduce((e,i)=>{if(t&&!Ve(i)&&"script"===i.as&&i.href&&r.has(i.href))return e;let s=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(i));return n.has(s)||(n.add(s),e.push({key:s,link:i})),e},[])}function Ke(e,t){return"lazy"===e.mode&&!0===t}function Ye(){let t=e.useContext(Q);return Be(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Xe(){let t=e.useContext(J);return Be(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Qe=e.createContext(void 0);function Je(){let t=e.useContext(Qe);return Be(t,"You must render this element inside a <HydratedRouter> element"),t}function Ze(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function $e(e,t,n){if(n&&!rt)return[e[0]];if(t){let n=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,n+1)}return e}Qe.displayName="FrameworkContext";function et(t){let{page:n}=t,r=(0,i.A)(t,o),{router:a}=Ye(),l=e.useMemo(()=>S(a.routes,n,a.basename),[a.routes,n,a.basename]);return l?e.createElement(nt,(0,s.A)({page:n,matches:l},r)):null}function tt(t){let{manifest:n,routeModules:r}=Je(),[i,a]=e.useState([]);return e.useEffect(()=>{let e=!1;return async function(e,t,n){return Ge((await Promise.all(e.map(async e=>{let r=t.routes[e.route.id];if(r){let e=await ze(r,n);return e.links?e.links():[]}return[]}))).flat(1).filter(He).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?(0,s.A)((0,s.A)({},e),{},{rel:"prefetch",as:"style"}):(0,s.A)((0,s.A)({},e),{},{rel:"prefetch"})))}(t,n,r).then(t=>{e||a(t)}),()=>{e=!0}},[t,n,r]),i}function nt(t){let{page:n,matches:r}=t,a=(0,i.A)(t,l),o=le(),{manifest:c,routeModules:u}=Je(),{basename:d}=Ye(),{loaderData:h,matches:f}=Xe(),p=e.useMemo(()=>We(n,r,f,c,o,"data"),[n,r,f,c,o]),m=e.useMemo(()=>We(n,r,f,c,o,"assets"),[n,r,f,c,o]),g=e.useMemo(()=>{if(n===o.pathname+o.search+o.hash)return[];let e=new Set,t=!1;if(r.forEach(n=>{var r;let i=c.routes[n.route.id];i&&i.hasLoader&&(!p.some(e=>e.route.id===n.route.id)&&n.route.id in h&&null!==(r=u[n.route.id])&&void 0!==r&&r.shouldRevalidate||i.hasClientLoader?t=!0:e.add(n.route.id))}),0===e.size)return[];let i=Ue(n,d,"data");return t&&e.size>0&&i.searchParams.set("_routes",r.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[i.pathname+i.search]},[d,h,o,c,p,r,n,u]),y=e.useMemo(()=>qe(m,c),[m,c]),v=tt(m);return e.createElement(e.Fragment,null,g.map(t=>e.createElement("link",(0,s.A)({key:t,rel:"prefetch",as:"fetch",href:t},a))),y.map(t=>e.createElement("link",(0,s.A)({key:t,rel:"modulepreload",href:t},a))),v.map(t=>{let{key:n,link:r}=t;return e.createElement("link",(0,s.A)({key:n,nonce:a.nonce},r))}))}var rt=!1;function it(t){let{manifest:n,serverHandoffString:r,isSpaMode:o,renderMeta:l,routeDiscovery:c,ssr:u}=Je(),{router:d,static:h,staticContext:f}=Ye(),{matches:p}=Xe(),m=e.useContext(Z),g=Ke(c,u);l&&(l.didRenderScripts=!0);let y=$e(p,null,o);e.useEffect(()=>{0},[]);let v=e.useMemo(()=>{var o;if(m)return null;let l=f?"window.__reactRouterContext = ".concat(r,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",c=h?"".concat(null!==n.hmr&&void 0!==o&&o.runtime?"import ".concat(JSON.stringify(n.hmr.runtime),";"):"").concat(g?"":"import ".concat(JSON.stringify(n.url)),";\n").concat(y.map((e,t)=>{let r="route".concat(t),i=n.routes[e.route.id];Be(i,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:s,clientLoaderModule:a,clientMiddlewareModule:o,hydrateFallbackModule:l,module:c}=i,u=[...s?[{module:s,varName:"".concat(r,"_clientAction")}]:[],...a?[{module:a,varName:"".concat(r,"_clientLoader")}]:[],...o?[{module:o,varName:"".concat(r,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(r,"_HydrateFallback")}]:[],{module:c,varName:"".concat(r,"_main")}];return 1===u.length?"import * as ".concat(r," from ").concat(JSON.stringify(c),";"):[u.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(r," = {").concat(u.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(g?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:n}=e,r=(0,i.A)(e,a),o=new Set(t.state.matches.map(e=>e.route.id)),l=t.state.location.pathname.split("/").filter(Boolean),c=["/"];for(l.pop();l.length>0;)c.push("/".concat(l.join("/"))),l.pop();c.forEach(e=>{let n=S(t.routes,e,t.basename);n&&n.forEach(e=>o.add(e.route.id))});let u=[...o].reduce((e,t)=>Object.assign(e,{[t]:r.routes[t]}),{});return(0,s.A)((0,s.A)({},r),{},{routes:u,sri:!!n||void 0})}(n,d),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(y.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(n.entry.module),");"):" ";return e.createElement(e.Fragment,null,e.createElement("script",(0,s.A)((0,s.A)({},t),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:l},type:void 0})),e.createElement("script",(0,s.A)((0,s.A)({},t),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:c},type:"module",async:!0})))},[]),w=rt||m?[]:(n.entry.imports.concat(qe(y,n,{includeHydrateFallback:!0})),[...new Set(b)]);var b;let x="object"===typeof n.sri?n.sri:{};return _e(!m,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),rt||m?null:e.createElement(e.Fragment,null,"object"===typeof n.sri?e.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:x})}}):null,g?null:e.createElement("link",{rel:"modulepreload",href:n.url,crossOrigin:t.crossOrigin,integrity:x[n.url],suppressHydrationWarning:!0}),e.createElement("link",{rel:"modulepreload",href:n.entry.module,crossOrigin:t.crossOrigin,integrity:x[n.entry.module],suppressHydrationWarning:!0}),w.map(n=>e.createElement("link",{key:n,rel:"modulepreload",href:n,crossOrigin:t.crossOrigin,integrity:x[n],suppressHydrationWarning:!0})),v)}function st(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}e.Component;function at(t){let{error:n,isOutsideRemixApp:r}=t;console.error(n);let i,s=e.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(K(n))return e.createElement(ot,{title:"Unhandled Thrown Response!"},e.createElement("h1",{style:{fontSize:"24px"}},n.status," ",n.statusText),s);if(n instanceof Error)0;else{let e=null==n?"Unknown Error":"object"===typeof n&&"toString"in n?n.toString():JSON.stringify(n);new Error(e)}return e.createElement(ot,{title:"Application Error!",isOutsideRemixApp:r},e.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),e.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},i.stack),s)}function ot(t){var n;let{title:r,renderScripts:i,isOutsideRemixApp:s,children:a}=t,{routeModules:o}=Je();return null!==o.root&&void 0!==n&&n.Layout&&!s?a:e.createElement("html",{lang:"en"},e.createElement("head",null,e.createElement("meta",{charSet:"utf-8"}),e.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),e.createElement("title",null,r)),e.createElement("body",null,e.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},a,i?e.createElement(it,null):null)))}var lt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{lt&&(window.__reactRouterVersion="7.9.5")}catch(b_){}function ct(t){let{basename:n,children:r,window:i}=t,s=e.useRef();null==s.current&&(s.current=f({window:i,v5Compat:!0}));let a=s.current,[o,l]=e.useState({action:a.action,location:a.location}),c=e.useCallback(t=>{e.startTransition(()=>l(t))},[l]);return e.useLayoutEffect(()=>a.listen(c),[a,c]),e.createElement(Ie,{basename:n,children:r,location:o.location,navigationType:o.action,navigator:a})}var ut=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,dt=e.forwardRef(function(t,n){let r,{onClick:a,discover:o="render",prefetch:l="none",relative:u,reloadDocument:d,replace:h,state:f,target:g,to:y,preventScrollReset:w,viewTransition:b}=t,x=(0,i.A)(t,c),{basename:S}=e.useContext(re),A="string"===typeof y&&ut.test(y),E=!1;if("string"===typeof y&&A&&(r=y,lt))try{let e=new URL(window.location.href),t=y.startsWith("//")?new URL(e.protocol+y):new URL(y),n=j(t.pathname,S);t.origin===e.origin&&null!=n?y=n+t.search+t.hash:E=!0}catch(b_){m(!1,'<Link to="'.concat(y,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let N=function(t){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};p(oe(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:i}=e.useContext(re),{hash:s,pathname:a,search:o}=he(t,{relative:n}),l=a;return"/"!==r&&(l="/"===a?r:H([r,a])),i.createHref({pathname:l,search:o,hash:s})}(y,{relative:u}),[C,_,T]=function(t,n){let r=e.useContext(Qe),[i,s]=e.useState(!1),[a,o]=e.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=n,f=e.useRef(null);e.useEffect(()=>{if("render"===t&&o(!0),"viewport"===t){let e=new IntersectionObserver(e=>{e.forEach(e=>{o(e.isIntersecting)})},{threshold:.5});return f.current&&e.observe(f.current),()=>{e.disconnect()}}},[t]),e.useEffect(()=>{if(i){let e=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(e)}}},[i]);let p=()=>{s(!0)},m=()=>{s(!1),o(!1)};return r?"intent"!==t?[a,f,{}]:[a,f,{onFocus:Ze(l,p),onBlur:Ze(c,m),onMouseEnter:Ze(u,p),onMouseLeave:Ze(d,m),onTouchStart:Ze(h,p)}]:[!1,f,{}]}(l,x),I=function(t){let{target:n,replace:r,state:i,preventScrollReset:s,relative:a,viewTransition:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=de(),c=le(),u=he(t,{relative:a});return e.useCallback(e=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(e,n)){e.preventDefault();let n=void 0!==r?r:v(c)===v(u);l(t,{replace:n,state:i,preventScrollReset:s,relative:a,viewTransition:o})}},[c,l,u,r,i,n,t,s,a,o])}(y,{replace:h,state:f,target:g,preventScrollReset:w,relative:u,viewTransition:b});let k=e.createElement("a",(0,s.A)((0,s.A)((0,s.A)({},x),T),{},{href:r||N,onClick:E||d?a:function(e){a&&a(e),e.defaultPrevented||I(e)},ref:st(n,_),target:g,"data-discover":A||"render"!==o?void 0:"true"}));return C&&!A?e.createElement(e.Fragment,null,k,e.createElement(et,{page:N})):k});dt.displayName="Link",e.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:a=!1,className:o="",end:l=!1,style:c,to:d,viewTransition:h,children:f}=t,m=(0,i.A)(t,u),g=he(d,{relative:m.relative}),y=le(),v=e.useContext(J),{navigator:w,basename:b}=e.useContext(re),x=null!=v&&function(t){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.useContext(ee);p(null!=r,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=pt("useViewTransitionState"),s=he(t,{relative:n});if(!r.isTransitioning)return!1;let a=j(r.currentLocation.pathname,i)||r.currentLocation.pathname,o=j(r.nextLocation.pathname,i)||r.nextLocation.pathname;return null!=L(s.pathname,o)||null!=L(s.pathname,a)}(g)&&!0===h,S=w.encodeLocation?w.encodeLocation(g).pathname:g.pathname,A=y.pathname,E=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;a||(A=A.toLowerCase(),E=E?E.toLowerCase():null,S=S.toLowerCase()),E&&b&&(E=j(E,b)||E);const N="/"!==S&&S.endsWith("/")?S.length-1:S.length;let C,_=A===S||!l&&A.startsWith(S)&&"/"===A.charAt(N),T=null!=E&&(E===S||!l&&E.startsWith(S)&&"/"===E.charAt(S.length)),I={isActive:_,isPending:T,isTransitioning:x},k=_?r:void 0;C="function"===typeof o?o(I):[o,_?"active":null,T?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let P="function"===typeof c?c(I):c;return e.createElement(dt,(0,s.A)((0,s.A)({},m),{},{"aria-current":k,className:C,ref:n,style:P,to:d,viewTransition:h}),"function"===typeof f?f(I):f)}).displayName="NavLink";var ht=e.forwardRef((t,n)=>{let{discover:r="render",fetcherKey:a,navigate:o,reloadDocument:l,replace:c,state:u,method:h=Re,action:f,onSubmit:m,relative:g,preventScrollReset:y,viewTransition:w}=t,b=(0,i.A)(t,d),x=yt(),S=function(t){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:r}=e.useContext(re),i=e.useContext(se);p(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),o=(0,s.A)({},he(t||".",{relative:n})),l=le();if(null==t){o.search=l.search;let e=new URLSearchParams(o.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();o.search=n?"?".concat(n):""}}t&&"."!==t||!a.route.index||(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index");"/"!==r&&(o.pathname="/"===o.pathname?r:H([r,o.pathname]));return v(o)}(f,{relative:g}),A="get"===h.toLowerCase()?"get":"post",E="string"===typeof f&&ut.test(f);return e.createElement("form",(0,s.A)((0,s.A)({ref:n,method:A,action:S,onSubmit:l?m:e=>{if(m&&m(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||h;x(t||e.currentTarget,{fetcherKey:a,method:n,navigate:o,replace:c,state:u,relative:g,preventScrollReset:y,viewTransition:w})}},b),{},{"data-discover":E||"render"!==r?void 0:"true"}))});function ft(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function pt(t){let n=e.useContext(Q);return p(n,ft(t)),n}ht.displayName="Form";var mt=0,gt=()=>"__".concat(String(++mt),"__");function yt(){let{router:t}=pt("useSubmit"),{basename:n}=e.useContext(re),r=Se("useRouteId");return e.useCallback(async function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:s,method:a,encType:o,formData:l,body:c}=je(e,n);if(!1===i.navigate){let e=i.fetcherKey||gt();await t.fetch(e,r,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||a,formEncType:i.encType||o,flushSync:i.flushSync})}else await t.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||a,formEncType:i.encType||o,replace:i.replace,state:i.state,fromRouteId:r,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,n,r])}function vt(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=vt(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function wt(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=vt(e))&&(r&&(r+=" "),r+=t);return r}const bt=(e,t)=>{var n;if(0===e.length)return t.classGroupId;const r=e[0],i=t.nextPart.get(r),s=i?bt(e.slice(1),i):void 0;if(s)return s;if(0===t.validators.length)return;const a=e.join("-");return null===(n=t.validators.find(e=>{let{validator:t}=e;return t(a)}))||void 0===n?void 0:n.classGroupId},xt=/^\[(.+)\]$/,St=e=>{if(xt.test(e)){const t=xt.exec(e)[1],n=null===t||void 0===t?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},At=e=>{const{theme:t,classGroups:n}=e,r={nextPart:new Map,validators:[]};for(const i in n)Et(n[i],r,i,t);return r},Et=(e,t,n,r)=>{e.forEach(e=>{if("string"===typeof e){return void((""===e?t:Nt(t,e)).classGroupId=n)}if("function"===typeof e)return Ct(e)?void Et(e(r),t,n,r):void t.validators.push({validator:e,classGroupId:n});Object.entries(e).forEach(e=>{let[i,s]=e;Et(s,Nt(t,i),n,r)})})},Nt=(e,t)=>{let n=e;return t.split("-").forEach(e=>{n.nextPart.has(e)||n.nextPart.set(e,{nextPart:new Map,validators:[]}),n=n.nextPart.get(e)}),n},Ct=e=>e.isThemeGetter,_t=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const i=(i,s)=>{n.set(i,s),t++,t>e&&(t=0,r=n,n=new Map)};return{get(e){let t=n.get(e);return void 0!==t?t:void 0!==(t=r.get(e))?(i(e,t),t):void 0},set(e,t){n.has(e)?n.set(e,t):i(e,t)}}},Tt=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=e=>{const t=[];let n,r=0,i=0,s=0;for(let l=0;l<e.length;l++){let a=e[l];if(0===r&&0===i){if(":"===a){t.push(e.slice(s,l)),s=l+1;continue}if("/"===a){n=l;continue}}"["===a?r++:"]"===a?r--:"("===a?i++:")"===a&&i--}const a=0===t.length?e:e.substring(s),o=It(a);return{modifiers:t,hasImportantModifier:o!==a,baseClassName:o,maybePostfixModifierPosition:n&&n>s?n-s:void 0}};if(t){const e=t+":",n=r;r=t=>t.startsWith(e)?n(t.substring(e.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:t,maybePostfixModifierPosition:void 0}}if(n){const e=r;r=t=>n({className:t,parseClassName:e})}return r},It=e=>e.endsWith("!")?e.substring(0,e.length-1):e.startsWith("!")?e.substring(1):e,kt=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(e=>[e,!0]));return e=>{if(e.length<=1)return e;const n=[];let r=[];return e.forEach(e=>{"["===e[0]||t[e]?(n.push(...r.sort(),e),r=[]):r.push(e)}),n.push(...r.sort()),n}},Pt=e=>(0,s.A)({cache:_t(e.cacheSize),parseClassName:Tt(e),sortModifiers:kt(e)},(e=>{const t=At(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:e=>{const n=e.split("-");return""===n[0]&&1!==n.length&&n.shift(),bt(n,t)||St(e)},getConflictingClassGroupIds:(e,t)=>{const i=n[e]||[];return t&&r[e]?[...i,...r[e]]:i}}})(e)),Rt=/\s+/;function Dt(){let e,t,n=0,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=Ot(e))&&(r&&(r+=" "),r+=t);return r}const Ot=e=>{if("string"===typeof e)return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=Ot(e[r]))&&(n&&(n+=" "),n+=t);return n};function Lt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let i,s,a,o=function(t){const r=n.reduce((e,t)=>t(e),e());return i=Pt(r),s=i.cache.get,a=i.cache.set,o=l,l(t)};function l(e){const t=s(e);if(t)return t;const n=((e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:s}=t,a=[],o=e.trim().split(Rt);let l="";for(let c=o.length-1;c>=0;c-=1){const e=o[c],{isExternal:t,modifiers:u,hasImportantModifier:d,baseClassName:h,maybePostfixModifierPosition:f}=n(e);if(t){l=e+(l.length>0?" "+l:l);continue}let p=!!f,m=r(p?h.substring(0,f):h);if(!m){if(!p){l=e+(l.length>0?" "+l:l);continue}if(m=r(h),!m){l=e+(l.length>0?" "+l:l);continue}p=!1}const g=s(u).join(":"),y=d?g+"!":g,v=y+m;if(a.includes(v))continue;a.push(v);const w=i(m,p);for(let n=0;n<w.length;++n){const e=w[n];a.push(y+e)}l=e+(l.length>0?" "+l:l)}return l})(e,i);return a(e,n),n}return function(){return o(Dt.apply(null,arguments))}}const Mt=e=>{const t=t=>t[e]||[];return t.isThemeGetter=!0,t},Ft=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,jt=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Bt=/^\d+\/\d+$/,Ut=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,zt=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Vt=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Ht=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Wt=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,qt=e=>Bt.test(e),Gt=e=>!!e&&!Number.isNaN(Number(e)),Kt=e=>!!e&&Number.isInteger(Number(e)),Yt=e=>e.endsWith("%")&&Gt(e.slice(0,-1)),Xt=e=>Ut.test(e),Qt=()=>!0,Jt=e=>zt.test(e)&&!Vt.test(e),Zt=()=>!1,$t=e=>Ht.test(e),en=e=>Wt.test(e),tn=e=>!rn(e)&&!un(e),nn=e=>yn(e,xn,Zt),rn=e=>Ft.test(e),sn=e=>yn(e,Sn,Jt),an=e=>yn(e,An,Gt),on=e=>yn(e,wn,Zt),ln=e=>yn(e,bn,en),cn=e=>yn(e,Nn,$t),un=e=>jt.test(e),dn=e=>vn(e,Sn),hn=e=>vn(e,En),fn=e=>vn(e,wn),pn=e=>vn(e,xn),mn=e=>vn(e,bn),gn=e=>vn(e,Nn,!0),yn=(e,t,n)=>{const r=Ft.exec(e);return!!r&&(r[1]?t(r[1]):n(r[2]))},vn=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=jt.exec(e);return!!r&&(r[1]?t(r[1]):n)},wn=e=>"position"===e||"percentage"===e,bn=e=>"image"===e||"url"===e,xn=e=>"length"===e||"size"===e||"bg-size"===e,Sn=e=>"length"===e,An=e=>"number"===e,En=e=>"family-name"===e,Nn=e=>"shadow"===e,Cn=(Symbol.toStringTag,()=>{const e=Mt("color"),t=Mt("font"),n=Mt("text"),r=Mt("font-weight"),i=Mt("tracking"),s=Mt("leading"),a=Mt("breakpoint"),o=Mt("container"),l=Mt("spacing"),c=Mt("radius"),u=Mt("shadow"),d=Mt("inset-shadow"),h=Mt("text-shadow"),f=Mt("drop-shadow"),p=Mt("blur"),m=Mt("perspective"),g=Mt("aspect"),y=Mt("ease"),v=Mt("animate"),w=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",un,rn],b=()=>[un,rn,l],x=()=>[qt,"full","auto",...b()],S=()=>[Kt,"none","subgrid",un,rn],A=()=>["auto",{span:["full",Kt,un,rn]},Kt,un,rn],E=()=>[Kt,"auto",un,rn],N=()=>["auto","min","max","fr",un,rn],C=()=>["auto",...b()],_=()=>[qt,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...b()],T=()=>[e,un,rn],I=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",fn,on,{position:[un,rn]}],k=()=>["auto","cover","contain",pn,nn,{size:[un,rn]}],P=()=>[Yt,dn,sn],R=()=>["","none","full",c,un,rn],D=()=>["",Gt,dn,sn],O=()=>[Gt,Yt,fn,on],L=()=>["","none",p,un,rn],M=()=>["none",Gt,un,rn],F=()=>["none",Gt,un,rn],j=()=>[Gt,un,rn],B=()=>[qt,"full",...b()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Xt],breakpoint:[Xt],color:[Qt],container:[Xt],"drop-shadow":[Xt],ease:["in","out","in-out"],font:[tn],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Xt],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Xt],shadow:[Xt],spacing:["px",Gt],text:[Xt],"text-shadow":[Xt],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",qt,rn,un,g]}],container:["container"],columns:[{columns:[Gt,rn,un,o]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:w()}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:x()}],"inset-x":[{"inset-x":x()}],"inset-y":[{"inset-y":x()}],start:[{start:x()}],end:[{end:x()}],top:[{top:x()}],right:[{right:x()}],bottom:[{bottom:x()}],left:[{left:x()}],visibility:["visible","invisible","collapse"],z:[{z:[Kt,"auto",un,rn]}],basis:[{basis:[qt,"full","auto",o,...b()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Gt,qt,"auto","initial","none",rn]}],grow:[{grow:["",Gt,un,rn]}],shrink:[{shrink:["",Gt,un,rn]}],order:[{order:[Kt,"first","last","none",un,rn]}],"grid-cols":[{"grid-cols":S()}],"col-start-end":[{col:A()}],"col-start":[{"col-start":E()}],"col-end":[{"col-end":E()}],"grid-rows":[{"grid-rows":S()}],"row-start-end":[{row:A()}],"row-start":[{"row-start":E()}],"row-end":[{"row-end":E()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":N()}],"auto-rows":[{"auto-rows":N()}],gap:[{gap:b()}],"gap-x":[{"gap-x":b()}],"gap-y":[{"gap-y":b()}],"justify-content":[{justify:["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe","normal"]}],"justify-items":[{"justify-items":["start","end","center","stretch","center-safe","end-safe","normal"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"align-items":[{items:["start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"align-self":[{self:["auto","start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"place-items":[{"place-items":["start","end","center","stretch","center-safe","end-safe","baseline"]}],"place-self":[{"place-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],p:[{p:b()}],px:[{px:b()}],py:[{py:b()}],ps:[{ps:b()}],pe:[{pe:b()}],pt:[{pt:b()}],pr:[{pr:b()}],pb:[{pb:b()}],pl:[{pl:b()}],m:[{m:C()}],mx:[{mx:C()}],my:[{my:C()}],ms:[{ms:C()}],me:[{me:C()}],mt:[{mt:C()}],mr:[{mr:C()}],mb:[{mb:C()}],ml:[{ml:C()}],"space-x":[{"space-x":b()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":b()}],"space-y-reverse":["space-y-reverse"],size:[{size:_()}],w:[{w:[o,"screen",..._()]}],"min-w":[{"min-w":[o,"screen","none",..._()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[a]},..._()]}],h:[{h:["screen","lh",..._()]}],"min-h":[{"min-h":["screen","lh","none",..._()]}],"max-h":[{"max-h":["screen","lh",..._()]}],"font-size":[{text:["base",n,dn,sn]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,un,an]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Yt,rn]}],"font-family":[{font:[hn,rn,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,un,rn]}],"line-clamp":[{"line-clamp":[Gt,"none",un,an]}],leading:[{leading:[s,...b()]}],"list-image":[{"list-image":["none",un,rn]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",un,rn]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:T()}],"text-color":[{text:T()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","wavy"]}],"text-decoration-thickness":[{decoration:[Gt,"from-font","auto",un,sn]}],"text-decoration-color":[{decoration:T()}],"underline-offset":[{"underline-offset":[Gt,"auto",un,rn]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:b()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",un,rn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",un,rn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:I()}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:k()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Kt,un,rn],radial:["",un,rn],conic:[Kt,un,rn]},mn,ln]}],"bg-color":[{bg:T()}],"gradient-from-pos":[{from:P()}],"gradient-via-pos":[{via:P()}],"gradient-to-pos":[{to:P()}],"gradient-from":[{from:T()}],"gradient-via":[{via:T()}],"gradient-to":[{to:T()}],rounded:[{rounded:R()}],"rounded-s":[{"rounded-s":R()}],"rounded-e":[{"rounded-e":R()}],"rounded-t":[{"rounded-t":R()}],"rounded-r":[{"rounded-r":R()}],"rounded-b":[{"rounded-b":R()}],"rounded-l":[{"rounded-l":R()}],"rounded-ss":[{"rounded-ss":R()}],"rounded-se":[{"rounded-se":R()}],"rounded-ee":[{"rounded-ee":R()}],"rounded-es":[{"rounded-es":R()}],"rounded-tl":[{"rounded-tl":R()}],"rounded-tr":[{"rounded-tr":R()}],"rounded-br":[{"rounded-br":R()}],"rounded-bl":[{"rounded-bl":R()}],"border-w":[{border:D()}],"border-w-x":[{"border-x":D()}],"border-w-y":[{"border-y":D()}],"border-w-s":[{"border-s":D()}],"border-w-e":[{"border-e":D()}],"border-w-t":[{"border-t":D()}],"border-w-r":[{"border-r":D()}],"border-w-b":[{"border-b":D()}],"border-w-l":[{"border-l":D()}],"divide-x":[{"divide-x":D()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":D()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:["solid","dashed","dotted","double","hidden","none"]}],"divide-style":[{divide:["solid","dashed","dotted","double","hidden","none"]}],"border-color":[{border:T()}],"border-color-x":[{"border-x":T()}],"border-color-y":[{"border-y":T()}],"border-color-s":[{"border-s":T()}],"border-color-e":[{"border-e":T()}],"border-color-t":[{"border-t":T()}],"border-color-r":[{"border-r":T()}],"border-color-b":[{"border-b":T()}],"border-color-l":[{"border-l":T()}],"divide-color":[{divide:T()}],"outline-style":[{outline:["solid","dashed","dotted","double","none","hidden"]}],"outline-offset":[{"outline-offset":[Gt,un,rn]}],"outline-w":[{outline:["",Gt,dn,sn]}],"outline-color":[{outline:T()}],shadow:[{shadow:["","none",u,gn,cn]}],"shadow-color":[{shadow:T()}],"inset-shadow":[{"inset-shadow":["none",d,gn,cn]}],"inset-shadow-color":[{"inset-shadow":T()}],"ring-w":[{ring:D()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:T()}],"ring-offset-w":[{"ring-offset":[Gt,sn]}],"ring-offset-color":[{"ring-offset":T()}],"inset-ring-w":[{"inset-ring":D()}],"inset-ring-color":[{"inset-ring":T()}],"text-shadow":[{"text-shadow":["none",h,gn,cn]}],"text-shadow-color":[{"text-shadow":T()}],opacity:[{opacity:[Gt,un,rn]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Gt]}],"mask-image-linear-from-pos":[{"mask-linear-from":O()}],"mask-image-linear-to-pos":[{"mask-linear-to":O()}],"mask-image-linear-from-color":[{"mask-linear-from":T()}],"mask-image-linear-to-color":[{"mask-linear-to":T()}],"mask-image-t-from-pos":[{"mask-t-from":O()}],"mask-image-t-to-pos":[{"mask-t-to":O()}],"mask-image-t-from-color":[{"mask-t-from":T()}],"mask-image-t-to-color":[{"mask-t-to":T()}],"mask-image-r-from-pos":[{"mask-r-from":O()}],"mask-image-r-to-pos":[{"mask-r-to":O()}],"mask-image-r-from-color":[{"mask-r-from":T()}],"mask-image-r-to-color":[{"mask-r-to":T()}],"mask-image-b-from-pos":[{"mask-b-from":O()}],"mask-image-b-to-pos":[{"mask-b-to":O()}],"mask-image-b-from-color":[{"mask-b-from":T()}],"mask-image-b-to-color":[{"mask-b-to":T()}],"mask-image-l-from-pos":[{"mask-l-from":O()}],"mask-image-l-to-pos":[{"mask-l-to":O()}],"mask-image-l-from-color":[{"mask-l-from":T()}],"mask-image-l-to-color":[{"mask-l-to":T()}],"mask-image-x-from-pos":[{"mask-x-from":O()}],"mask-image-x-to-pos":[{"mask-x-to":O()}],"mask-image-x-from-color":[{"mask-x-from":T()}],"mask-image-x-to-color":[{"mask-x-to":T()}],"mask-image-y-from-pos":[{"mask-y-from":O()}],"mask-image-y-to-pos":[{"mask-y-to":O()}],"mask-image-y-from-color":[{"mask-y-from":T()}],"mask-image-y-to-color":[{"mask-y-to":T()}],"mask-image-radial":[{"mask-radial":[un,rn]}],"mask-image-radial-from-pos":[{"mask-radial-from":O()}],"mask-image-radial-to-pos":[{"mask-radial-to":O()}],"mask-image-radial-from-color":[{"mask-radial-from":T()}],"mask-image-radial-to-color":[{"mask-radial-to":T()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"]}],"mask-image-conic-pos":[{"mask-conic":[Gt]}],"mask-image-conic-from-pos":[{"mask-conic-from":O()}],"mask-image-conic-to-pos":[{"mask-conic-to":O()}],"mask-image-conic-from-color":[{"mask-conic-from":T()}],"mask-image-conic-to-color":[{"mask-conic-to":T()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:I()}],"mask-repeat":[{mask:["no-repeat",{repeat:["","x","y","space","round"]}]}],"mask-size":[{mask:k()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",un,rn]}],filter:[{filter:["","none",un,rn]}],blur:[{blur:L()}],brightness:[{brightness:[Gt,un,rn]}],contrast:[{contrast:[Gt,un,rn]}],"drop-shadow":[{"drop-shadow":["","none",f,gn,cn]}],"drop-shadow-color":[{"drop-shadow":T()}],grayscale:[{grayscale:["",Gt,un,rn]}],"hue-rotate":[{"hue-rotate":[Gt,un,rn]}],invert:[{invert:["",Gt,un,rn]}],saturate:[{saturate:[Gt,un,rn]}],sepia:[{sepia:["",Gt,un,rn]}],"backdrop-filter":[{"backdrop-filter":["","none",un,rn]}],"backdrop-blur":[{"backdrop-blur":L()}],"backdrop-brightness":[{"backdrop-brightness":[Gt,un,rn]}],"backdrop-contrast":[{"backdrop-contrast":[Gt,un,rn]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Gt,un,rn]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Gt,un,rn]}],"backdrop-invert":[{"backdrop-invert":["",Gt,un,rn]}],"backdrop-opacity":[{"backdrop-opacity":[Gt,un,rn]}],"backdrop-saturate":[{"backdrop-saturate":[Gt,un,rn]}],"backdrop-sepia":[{"backdrop-sepia":["",Gt,un,rn]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":b()}],"border-spacing-x":[{"border-spacing-x":b()}],"border-spacing-y":[{"border-spacing-y":b()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",un,rn]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Gt,"initial",un,rn]}],ease:[{ease:["linear","initial",y,un,rn]}],delay:[{delay:[Gt,un,rn]}],animate:[{animate:["none",v,un,rn]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[m,un,rn]}],"perspective-origin":[{"perspective-origin":w()}],rotate:[{rotate:M()}],"rotate-x":[{"rotate-x":M()}],"rotate-y":[{"rotate-y":M()}],"rotate-z":[{"rotate-z":M()}],scale:[{scale:F()}],"scale-x":[{"scale-x":F()}],"scale-y":[{"scale-y":F()}],"scale-z":[{"scale-z":F()}],"scale-3d":["scale-3d"],skew:[{skew:j()}],"skew-x":[{"skew-x":j()}],"skew-y":[{"skew-y":j()}],transform:[{transform:[un,rn,"","none","gpu","cpu"]}],"transform-origin":[{origin:w()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:B()}],"translate-x":[{"translate-x":B()}],"translate-y":[{"translate-y":B()}],"translate-z":[{"translate-z":B()}],"translate-none":["translate-none"],accent:[{accent:T()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:T()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",un,rn]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":b()}],"scroll-mx":[{"scroll-mx":b()}],"scroll-my":[{"scroll-my":b()}],"scroll-ms":[{"scroll-ms":b()}],"scroll-me":[{"scroll-me":b()}],"scroll-mt":[{"scroll-mt":b()}],"scroll-mr":[{"scroll-mr":b()}],"scroll-mb":[{"scroll-mb":b()}],"scroll-ml":[{"scroll-ml":b()}],"scroll-p":[{"scroll-p":b()}],"scroll-px":[{"scroll-px":b()}],"scroll-py":[{"scroll-py":b()}],"scroll-ps":[{"scroll-ps":b()}],"scroll-pe":[{"scroll-pe":b()}],"scroll-pt":[{"scroll-pt":b()}],"scroll-pr":[{"scroll-pr":b()}],"scroll-pb":[{"scroll-pb":b()}],"scroll-pl":[{"scroll-pl":b()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",un,rn]}],fill:[{fill:["none",...T()]}],"stroke-w":[{stroke:[Gt,dn,sn,an]}],stroke:[{stroke:["none",...T()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}}),_n=Lt(Cn);function Tn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return _n(wt(t))}var In=n(579);const kn=["className"],Pn=["className"],Rn=["className"],Dn=["className"],On=["className"],Ln=["className"],Mn=e.forwardRef((e,t)=>{let{className:n}=e,r=(0,i.A)(e,kn);return(0,In.jsx)("div",(0,s.A)({ref:t,className:Tn("rounded-xl border bg-card text-card-foreground shadow",n)},r))});Mn.displayName="Card";const Fn=e.forwardRef((e,t)=>{let{className:n}=e,r=(0,i.A)(e,Pn);return(0,In.jsx)("div",(0,s.A)({ref:t,className:Tn("flex flex-col space-y-1.5 p-6",n)},r))});Fn.displayName="CardHeader";const jn=e.forwardRef((e,t)=>{let{className:n}=e,r=(0,i.A)(e,Rn);return(0,In.jsx)("div",(0,s.A)({ref:t,className:Tn("font-semibold leading-none tracking-tight",n)},r))});jn.displayName="CardTitle";const Bn=e.forwardRef((e,t)=>{let{className:n}=e,r=(0,i.A)(e,Dn);return(0,In.jsx)("div",(0,s.A)({ref:t,className:Tn("text-sm text-muted-foreground",n)},r))});Bn.displayName="CardDescription";const Un=e.forwardRef((e,t)=>{let{className:n}=e,r=(0,i.A)(e,On);return(0,In.jsx)("div",(0,s.A)({ref:t,className:Tn("p-6 pt-0",n)},r))});Un.displayName="CardContent";function zn(e,t){if("function"===typeof e)return e(t);null!==e&&void 0!==e&&(e.current=t)}function Vn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{let n=!1;const r=t.map(t=>{const r=zn(t,e);return n||"function"!=typeof r||(n=!0),r});if(n)return()=>{for(let e=0;e<r.length;e++){const n=r[e];"function"==typeof n?n():zn(t[e],null)}}}}function Hn(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.useCallback(Vn(...n),n)}e.forwardRef((e,t)=>{let{className:n}=e,r=(0,i.A)(e,Ln);return(0,In.jsx)("div",(0,s.A)({ref:t,className:Tn("flex items-center p-6 pt-0",n)},r))}).displayName="CardFooter";const Wn=["children"],qn=["children"];function Gn(t){const n=Yn(t),r=e.forwardRef((t,r)=>{const{children:a}=t,o=(0,i.A)(t,Wn),l=e.Children.toArray(a),c=l.find(Qn);if(c){const t=c.props.children,i=l.map(n=>n===c?e.Children.count(t)>1?e.Children.only(null):e.isValidElement(t)?t.props.children:null:n);return(0,In.jsx)(n,(0,s.A)((0,s.A)({},o),{},{ref:r,children:e.isValidElement(t)?e.cloneElement(t,void 0,i):null}))}return(0,In.jsx)(n,(0,s.A)((0,s.A)({},o),{},{ref:r,children:a}))});return r.displayName="".concat(t,".Slot"),r}var Kn=Gn("Slot");function Yn(t){const n=e.forwardRef((t,n)=>{const{children:r}=t,a=(0,i.A)(t,qn);if(e.isValidElement(r)){const t=function(e){var t,n;let r=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,i=r&&"isReactWarning"in r&&r.isReactWarning;if(i)return e.ref;if(r=null===(n=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===n?void 0:n.get,i=r&&"isReactWarning"in r&&r.isReactWarning,i)return e.props.ref;return e.props.ref||e.ref}(r),i=function(e,t){const n=(0,s.A)({},t);for(const r in t){const i=e[r],a=t[r];/^on[A-Z]/.test(r)?i&&a?n[r]=function(){const e=a(...arguments);return i(...arguments),e}:i&&(n[r]=i):"style"===r?n[r]=(0,s.A)((0,s.A)({},i),a):"className"===r&&(n[r]=[i,a].filter(Boolean).join(" "))}return(0,s.A)((0,s.A)({},e),n)}(a,r.props);return r.type!==e.Fragment&&(i.ref=n?Vn(n,t):t),e.cloneElement(r,i)}return e.Children.count(r)>1?e.Children.only(null):null});return n.displayName="".concat(t,".SlotClone"),n}var Xn=Symbol("radix.slottable");function Qn(t){return e.isValidElement(t)&&"function"===typeof t.type&&"__radixId"in t.type&&t.type.__radixId===Xn}const Jn=["class","className"],Zn=e=>"boolean"===typeof e?"".concat(e):0===e?"0":e,$n=wt,er=(e,t)=>n=>{var r;if(null==(null===t||void 0===t?void 0:t.variants))return $n(e,null===n||void 0===n?void 0:n.class,null===n||void 0===n?void 0:n.className);const{variants:a,defaultVariants:o}=t,l=Object.keys(a).map(e=>{const t=null===n||void 0===n?void 0:n[e],r=null===o||void 0===o?void 0:o[e];if(null===t)return null;const i=Zn(t)||Zn(r);return a[e][i]}),c=n&&Object.entries(n).reduce((e,t)=>{let[n,r]=t;return void 0===r||(e[n]=r),e},{}),u=null===t||void 0===t||null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let{class:n,className:r}=t,a=(0,i.A)(t,Jn);return Object.entries(a).every(e=>{let[t,n]=e;return Array.isArray(n)?n.includes((0,s.A)((0,s.A)({},o),c)[t]):(0,s.A)((0,s.A)({},o),c)[t]===n})?[...e,n,r]:e},[]);return $n(e,l,u,null===n||void 0===n?void 0:n.class,null===n||void 0===n?void 0:n.className)},tr=["className","variant","size","asChild"],nr=er("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),rr=e.forwardRef((e,t)=>{let{className:n,variant:r,size:a,asChild:o=!1}=e,l=(0,i.A)(e,tr);const c=o?Kn:"button";return(0,In.jsx)(c,(0,s.A)({className:Tn(nr({variant:r,size:a,className:n})),ref:t},l))});rr.displayName="Button";const ir=["className","type"],sr=e.forwardRef((e,t)=>{let{className:n,type:r}=e,a=(0,i.A)(e,ir);return(0,In.jsx)("input",(0,s.A)({type:r,className:Tn("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:t},a))});sr.displayName="Input";var ar=n(7950);const or=["asChild"];var lr=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((t,n)=>{const r=Gn("Primitive.".concat(n)),a=e.forwardRef((e,t)=>{const{asChild:a}=e,o=(0,i.A)(e,or),l=a?r:n;return"undefined"!==typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,In.jsx)(l,(0,s.A)((0,s.A)({},o),{},{ref:t}))});return a.displayName="Primitive.".concat(n),(0,s.A)((0,s.A)({},t),{},{[n]:a})},{});function cr(e,t){e&&ar.flushSync(()=>e.dispatchEvent(t))}var ur=e.forwardRef((e,t)=>(0,In.jsx)(lr.label,(0,s.A)((0,s.A)({},e),{},{ref:t,onMouseDown:t=>{var n;t.target.closest("button, input, select, textarea")||(null===(n=e.onMouseDown)||void 0===n||n.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}})));ur.displayName="Label";var dr=ur;const hr=["className"],fr=er("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),pr=e.forwardRef((e,t)=>{let{className:n}=e,r=(0,i.A)(e,hr);return(0,In.jsx)(dr,(0,s.A)({ref:t,className:Tn(fr(),n)},r))});pr.displayName=dr.displayName;const mr=["className"],gr=e.forwardRef((e,t)=>{let{className:n}=e,r=(0,i.A)(e,mr);return(0,In.jsx)("textarea",(0,s.A)({className:Tn("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:t},r))});gr.displayName="Textarea";"undefined"===typeof window||!window.document||window.document.createElement;function yr(e,t){let{checkForDefaultPrevented:n=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r){if(null===e||void 0===e||e(r),!1===n||!r.defaultPrevented)return null===t||void 0===t?void 0:t(r)}}const vr=["children"],wr=["scope","children"];function br(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[];const a=()=>{const n=r.map(t=>e.createContext(t));return function(r){const i=(null===r||void 0===r?void 0:r[t])||n;return e.useMemo(()=>({["__scope".concat(t)]:(0,s.A)((0,s.A)({},r),{},{[t]:i})}),[r,i])}};return a.scopeName=t,[function(n,s){const a=e.createContext(s),o=r.length;r=[...r,s];const l=n=>{var r;const{scope:s,children:l}=n,c=(0,i.A)(n,wr),u=(null===s||void 0===s||null===(r=s[t])||void 0===r?void 0:r[o])||a,d=e.useMemo(()=>c,Object.values(c));return(0,In.jsx)(u.Provider,{value:d,children:l})};return l.displayName=n+"Provider",[l,function(r,i){var l;const c=(null===i||void 0===i||null===(l=i[t])||void 0===l?void 0:l[o])||a,u=e.useContext(c);if(u)return u;if(void 0!==s)return s;throw new Error("`".concat(r,"` must be used within `").concat(n,"`"))}]},xr(a,...n)]}function xr(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];const i=n[0];if(1===n.length)return i;const a=()=>{const t=n.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(n){const r=t.reduce((e,t)=>{let{useScope:r,scopeName:i}=t;const a=r(n)["__scope".concat(i)];return(0,s.A)((0,s.A)({},e),a)},{});return e.useMemo(()=>({["__scope".concat(i.scopeName)]:r}),[r])}};return a.scopeName=i.scopeName,a}function Sr(e,t,n){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,n)}function Ar(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function Er(e,t){return e.get(Ar(e,t))}function Nr(e,t,n){return e.set(Ar(e,t),n),n}var Cr;const _r=["scope","children"];function Tr(t){const n=t+"CollectionProvider",[r,a]=br(n),[o,l]=r(n,{collectionRef:{current:null},itemMap:new Map}),c=t=>{const{scope:n,children:r}=t,i=e.useRef(null),s=e.useRef(new Map).current;return(0,In.jsx)(o,{scope:n,itemMap:s,collectionRef:i,children:r})};c.displayName=n;const u=t+"CollectionSlot",d=Gn(u),h=e.forwardRef((e,t)=>{const{scope:n,children:r}=e,i=Hn(t,l(u,n).collectionRef);return(0,In.jsx)(d,{ref:i,children:r})});h.displayName=u;const f=t+"CollectionItemSlot",p="data-radix-collection-item",m=Gn(f),g=e.forwardRef((t,n)=>{const{scope:r,children:a}=t,o=(0,i.A)(t,_r),c=e.useRef(null),u=Hn(n,c),d=l(f,r);return e.useEffect(()=>(d.itemMap.set(c,(0,s.A)({ref:c},o)),()=>{d.itemMap.delete(c)})),(0,In.jsx)(m,(0,s.A)((0,s.A)({},{[p]:""}),{},{ref:u,children:a}))});return g.displayName=f,[{Provider:c,Slot:h,ItemSlot:g},function(n){const r=l(t+"CollectionConsumer",n);return e.useCallback(()=>{const e=r.collectionRef.current;if(!e)return[];const t=Array.from(e.querySelectorAll("[".concat(p,"]")));return Array.from(r.itemMap.values()).sort((e,n)=>t.indexOf(e.ref.current)-t.indexOf(n.ref.current))},[r.collectionRef,r.itemMap])},a]}var Ir=new WeakMap;Cr=new WeakMap,Map;function kr(e,t){if("at"in Array.prototype)return Array.prototype.at.call(e,t);const n=function(e,t){const n=e.length,r=Pr(t),i=r>=0?r:n+r;return i<0||i>=n?-1:i}(e,t);return-1===n?void 0:e[n]}function Pr(e){return e!==e||0===e?0:Math.trunc(e)}var Rr=null!==globalThis&&void 0!==globalThis&&globalThis.document?e.useLayoutEffect:()=>{},Dr=t[" useId ".trim().toString()]||(()=>{}),Or=0;function Lr(t){const[n,r]=e.useState(Dr());return Rr(()=>{t||r(e=>null!==e&&void 0!==e?e:String(Or++))},[t]),t||(n?"radix-".concat(n):"")}function Mr(t){const n=e.useRef(t);return e.useEffect(()=>{n.current=t}),e.useMemo(()=>function(){for(var e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return null===(e=n.current)||void 0===e?void 0:e.call(n,...r)},[])}var Fr=t[" useInsertionEffect ".trim().toString()]||Rr;function jr(t){let{prop:n,defaultProp:r,onChange:i=()=>{},caller:s}=t;const[a,o,l]=function(t){let{defaultProp:n,onChange:r}=t;const[i,s]=e.useState(n),a=e.useRef(i),o=e.useRef(r);return Fr(()=>{o.current=r},[r]),e.useEffect(()=>{var e;a.current!==i&&(null===(e=o.current)||void 0===e||e.call(o,i),a.current=i)},[i,a]),[i,s,o]}({defaultProp:r,onChange:i}),c=void 0!==n,u=c?n:a;{const t=e.useRef(void 0!==n);e.useEffect(()=>{const e=t.current;if(e!==c){const t=e?"controlled":"uncontrolled",n=c?"controlled":"uncontrolled";console.warn("".concat(s," is changing from ").concat(t," to ").concat(n,". Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component."))}t.current=c},[c,s])}const d=e.useCallback(e=>{if(c){const r=function(e){return"function"===typeof e}(e)?e(n):e;var t;if(r!==n)null===(t=l.current)||void 0===t||t.call(l,r)}else o(e)},[c,n,o,l]);return[u,d]}Symbol("RADIX:SYNC_STATE");var Br=e.createContext(void 0);function Ur(t){const n=e.useContext(Br);return t||n||"ltr"}const zr=["__scopeRovingFocusGroup","orientation","loop","dir","currentTabStopId","defaultCurrentTabStopId","onCurrentTabStopIdChange","onEntryFocus","preventScrollOnEntryFocus"],Vr=["__scopeRovingFocusGroup","focusable","active","tabStopId","children"];var Hr="rovingFocusGroup.onEntryFocus",Wr={bubbles:!1,cancelable:!0},qr="RovingFocusGroup",[Gr,Kr,Yr]=Tr(qr),[Xr,Qr]=br(qr,[Yr]),[Jr,Zr]=Xr(qr),$r=e.forwardRef((e,t)=>(0,In.jsx)(Gr.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,In.jsx)(Gr.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,In.jsx)(ei,(0,s.A)((0,s.A)({},e),{},{ref:t}))})}));$r.displayName=qr;var ei=e.forwardRef((t,n)=>{const{__scopeRovingFocusGroup:r,orientation:a,loop:o=!1,dir:l,currentTabStopId:c,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:d,onEntryFocus:h,preventScrollOnEntryFocus:f=!1}=t,p=(0,i.A)(t,zr),m=e.useRef(null),g=Hn(n,m),y=Ur(l),[v,w]=jr({prop:c,defaultProp:null!==u&&void 0!==u?u:null,onChange:d,caller:qr}),[b,x]=e.useState(!1),S=Mr(h),A=Kr(r),E=e.useRef(!1),[N,C]=e.useState(0);return e.useEffect(()=>{const e=m.current;if(e)return e.addEventListener(Hr,S),()=>e.removeEventListener(Hr,S)},[S]),(0,In.jsx)(Jr,{scope:r,orientation:a,dir:y,loop:o,currentTabStopId:v,onItemFocus:e.useCallback(e=>w(e),[w]),onItemShiftTab:e.useCallback(()=>x(!0),[]),onFocusableItemAdd:e.useCallback(()=>C(e=>e+1),[]),onFocusableItemRemove:e.useCallback(()=>C(e=>e-1),[]),children:(0,In.jsx)(lr.div,(0,s.A)((0,s.A)({tabIndex:b||0===N?-1:0,"data-orientation":a},p),{},{ref:g,style:(0,s.A)({outline:"none"},t.style),onMouseDown:yr(t.onMouseDown,()=>{E.current=!0}),onFocus:yr(t.onFocus,e=>{const t=!E.current;if(e.target===e.currentTarget&&t&&!b){const t=new CustomEvent(Hr,Wr);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){const e=A().filter(e=>e.focusable);ii([e.find(e=>e.active),e.find(e=>e.id===v),...e].filter(Boolean).map(e=>e.ref.current),f)}}E.current=!1}),onBlur:yr(t.onBlur,()=>x(!1))}))})}),ti="RovingFocusGroupItem",ni=e.forwardRef((t,n)=>{const{__scopeRovingFocusGroup:r,focusable:a=!0,active:o=!1,tabStopId:l,children:c}=t,u=(0,i.A)(t,Vr),d=Lr(),h=l||d,f=Zr(ti,r),p=f.currentTabStopId===h,m=Kr(r),{onFocusableItemAdd:g,onFocusableItemRemove:y,currentTabStopId:v}=f;return e.useEffect(()=>{if(a)return g(),()=>y()},[a,g,y]),(0,In.jsx)(Gr.ItemSlot,{scope:r,id:h,focusable:a,active:o,children:(0,In.jsx)(lr.span,(0,s.A)((0,s.A)({tabIndex:p?0:-1,"data-orientation":f.orientation},u),{},{ref:n,onMouseDown:yr(t.onMouseDown,e=>{a?f.onItemFocus(h):e.preventDefault()}),onFocus:yr(t.onFocus,()=>f.onItemFocus(h)),onKeyDown:yr(t.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void f.onItemShiftTab();if(e.target!==e.currentTarget)return;const t=function(e,t,n){const r=function(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,n);return"vertical"===t&&["ArrowLeft","ArrowRight"].includes(r)||"horizontal"===t&&["ArrowUp","ArrowDown"].includes(r)?void 0:ri[r]}(e,f.orientation,f.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let i=m().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)i.reverse();else if("prev"===t||"next"===t){"prev"===t&&i.reverse();const s=i.indexOf(e.currentTarget);i=f.loop?(r=s+1,(n=i).map((e,t)=>n[(r+t)%n.length])):i.slice(s+1)}setTimeout(()=>ii(i))}var n,r}),children:"function"===typeof c?c({isCurrentTabStop:p,hasTabStop:null!=v}):c}))})});ni.displayName=ti;var ri={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function ii(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=document.activeElement;for(const r of e){if(r===n)return;if(r.focus({preventScroll:t}),document.activeElement!==n)return}}var si=$r,ai=ni;var oi=t=>{const{present:n,children:r}=t,i=function(t){const[n,r]=e.useState(),i=e.useRef(null),s=e.useRef(t),a=e.useRef("none"),o=t?"mounted":"unmounted",[l,c]=function(t,n){return e.useReducer((e,t)=>{const r=n[e][t];return null!==r&&void 0!==r?r:e},t)}(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return e.useEffect(()=>{const e=li(i.current);a.current="mounted"===l?e:"none"},[l]),Rr(()=>{const e=i.current,n=s.current;if(n!==t){const r=a.current,i=li(e);if(t)c("MOUNT");else if("none"===i||"none"===(null===e||void 0===e?void 0:e.display))c("UNMOUNT");else{c(n&&r!==i?"ANIMATION_OUT":"UNMOUNT")}s.current=t}},[t,c]),Rr(()=>{if(n){var e;let t;const r=null!==(e=n.ownerDocument.defaultView)&&void 0!==e?e:window,o=e=>{const a=li(i.current).includes(CSS.escape(e.animationName));if(e.target===n&&a&&(c("ANIMATION_END"),!s.current)){const e=n.style.animationFillMode;n.style.animationFillMode="forwards",t=r.setTimeout(()=>{"forwards"===n.style.animationFillMode&&(n.style.animationFillMode=e)})}},l=e=>{e.target===n&&(a.current=li(i.current))};return n.addEventListener("animationstart",l),n.addEventListener("animationcancel",o),n.addEventListener("animationend",o),()=>{r.clearTimeout(t),n.removeEventListener("animationstart",l),n.removeEventListener("animationcancel",o),n.removeEventListener("animationend",o)}}c("ANIMATION_END")},[n,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:e.useCallback(e=>{i.current=e?getComputedStyle(e):null,r(e)},[])}}(n),s="function"===typeof r?r({present:i.isPresent}):e.Children.only(r),a=Hn(i.ref,function(e){var t,n;let r=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,i=r&&"isReactWarning"in r&&r.isReactWarning;if(i)return e.ref;if(r=null===(n=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===n?void 0:n.get,i=r&&"isReactWarning"in r&&r.isReactWarning,i)return e.props.ref;return e.props.ref||e.ref}(s));return"function"===typeof r||i.isPresent?e.cloneElement(s,{ref:a}):null};function li(e){return(null===e||void 0===e?void 0:e.animationName)||"none"}oi.displayName="Presence";const ci=["__scopeTabs","value","onValueChange","defaultValue","orientation","dir","activationMode"],ui=["__scopeTabs","loop"],di=["__scopeTabs","value","disabled"],hi=["__scopeTabs","value","forceMount","children"];var fi="Tabs",[pi,mi]=br(fi,[Qr]),gi=Qr(),[yi,vi]=pi(fi),wi=e.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:a,defaultValue:o,orientation:l="horizontal",dir:c,activationMode:u="automatic"}=e,d=(0,i.A)(e,ci),h=Ur(c),[f,p]=jr({prop:r,onChange:a,defaultProp:null!==o&&void 0!==o?o:"",caller:fi});return(0,In.jsx)(yi,{scope:n,baseId:Lr(),value:f,onValueChange:p,orientation:l,dir:h,activationMode:u,children:(0,In.jsx)(lr.div,(0,s.A)((0,s.A)({dir:h,"data-orientation":l},d),{},{ref:t}))})});wi.displayName=fi;var bi="TabsList",xi=e.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0}=e,a=(0,i.A)(e,ui),o=vi(bi,n),l=gi(n);return(0,In.jsx)(si,(0,s.A)((0,s.A)({asChild:!0},l),{},{orientation:o.orientation,dir:o.dir,loop:r,children:(0,In.jsx)(lr.div,(0,s.A)((0,s.A)({role:"tablist","aria-orientation":o.orientation},a),{},{ref:t}))}))});xi.displayName=bi;var Si="TabsTrigger",Ai=e.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:a=!1}=e,o=(0,i.A)(e,di),l=vi(Si,n),c=gi(n),u=Ci(l.baseId,r),d=_i(l.baseId,r),h=r===l.value;return(0,In.jsx)(ai,(0,s.A)((0,s.A)({asChild:!0},c),{},{focusable:!a,active:h,children:(0,In.jsx)(lr.button,(0,s.A)((0,s.A)({type:"button",role:"tab","aria-selected":h,"aria-controls":d,"data-state":h?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:u},o),{},{ref:t,onMouseDown:yr(e.onMouseDown,e=>{a||0!==e.button||!1!==e.ctrlKey?e.preventDefault():l.onValueChange(r)}),onKeyDown:yr(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&l.onValueChange(r)}),onFocus:yr(e.onFocus,()=>{const e="manual"!==l.activationMode;h||a||!e||l.onValueChange(r)})}))}))});Ai.displayName=Si;var Ei="TabsContent",Ni=e.forwardRef((t,n)=>{const{__scopeTabs:r,value:a,forceMount:o,children:l}=t,c=(0,i.A)(t,hi),u=vi(Ei,r),d=Ci(u.baseId,a),h=_i(u.baseId,a),f=a===u.value,p=e.useRef(f);return e.useEffect(()=>{const e=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,In.jsx)(oi,{present:o||f,children:e=>{let{present:r}=e;return(0,In.jsx)(lr.div,(0,s.A)((0,s.A)({"data-state":f?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":d,hidden:!r,id:h,tabIndex:0},c),{},{ref:n,style:(0,s.A)((0,s.A)({},t.style),{},{animationDuration:p.current?"0s":void 0}),children:r&&l}))}})});function Ci(e,t){return"".concat(e,"-trigger-").concat(t)}function _i(e,t){return"".concat(e,"-content-").concat(t)}Ni.displayName=Ei;var Ti=xi,Ii=Ai,ki=Ni;const Pi=["className"],Ri=["className"],Di=["className"],Oi=wi,Li=e.forwardRef((e,t)=>{let{className:n}=e,r=(0,i.A)(e,Pi);return(0,In.jsx)(Ti,(0,s.A)({ref:t,className:Tn("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",n)},r))});Li.displayName=Ti.displayName;const Mi=e.forwardRef((e,t)=>{let{className:n}=e,r=(0,i.A)(e,Ri);return(0,In.jsx)(Ii,(0,s.A)({ref:t,className:Tn("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",n)},r))});Mi.displayName=Ii.displayName;const Fi=e.forwardRef((e,t)=>{let{className:n}=e,r=(0,i.A)(e,Di);return(0,In.jsx)(ki,(0,s.A)({ref:t,className:Tn("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n)},r))});Fi.displayName=ki.displayName;const ji=["disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss"];var Bi,Ui="dismissableLayer.update",zi="dismissableLayer.pointerDownOutside",Vi="dismissableLayer.focusOutside",Hi=e.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Wi=e.forwardRef((t,n)=>{var r;const{disableOutsidePointerEvents:a=!1,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,onDismiss:d}=t,h=(0,i.A)(t,ji),f=e.useContext(Hi),[p,m]=e.useState(null),g=null!==(r=null===p||void 0===p?void 0:p.ownerDocument)&&void 0!==r?r:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,y]=e.useState({}),v=Hn(n,e=>m(e)),w=Array.from(f.layers),[b]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),x=w.indexOf(b),S=p?w.indexOf(p):-1,A=f.layersWithOutsidePointerEventsDisabled.size>0,E=S>=x,N=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document;const r=Mr(t),i=e.useRef(!1),s=e.useRef(()=>{});return e.useEffect(()=>{const e=e=>{if(e.target&&!i.current){let t=function(){Ki(zi,r,i,{discrete:!0})};const i={originalEvent:e};"touch"===e.pointerType?(n.removeEventListener("click",s.current),s.current=t,n.addEventListener("click",s.current,{once:!0})):t()}else n.removeEventListener("click",s.current);i.current=!1},t=window.setTimeout(()=>{n.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(t),n.removeEventListener("pointerdown",e),n.removeEventListener("click",s.current)}},[n,r]),{onPointerDownCapture:()=>i.current=!0}}(e=>{const t=e.target,n=[...f.branches].some(e=>e.contains(t));E&&!n&&(null===l||void 0===l||l(e),null===u||void 0===u||u(e),e.defaultPrevented||null===d||void 0===d||d())},g),C=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document;const r=Mr(t),i=e.useRef(!1);return e.useEffect(()=>{const e=e=>{if(e.target&&!i.current){Ki(Vi,r,{originalEvent:e},{discrete:!1})}};return n.addEventListener("focusin",e),()=>n.removeEventListener("focusin",e)},[n,r]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}(e=>{const t=e.target;[...f.branches].some(e=>e.contains(t))||(null===c||void 0===c||c(e),null===u||void 0===u||u(e),e.defaultPrevented||null===d||void 0===d||d())},g);return function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document;const r=Mr(t);e.useEffect(()=>{const e=e=>{"Escape"===e.key&&r(e)};return n.addEventListener("keydown",e,{capture:!0}),()=>n.removeEventListener("keydown",e,{capture:!0})},[r,n])}(e=>{S===f.layers.size-1&&(null===o||void 0===o||o(e),!e.defaultPrevented&&d&&(e.preventDefault(),d()))},g),e.useEffect(()=>{if(p)return a&&(0===f.layersWithOutsidePointerEventsDisabled.size&&(Bi=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(p)),f.layers.add(p),Gi(),()=>{a&&1===f.layersWithOutsidePointerEventsDisabled.size&&(g.body.style.pointerEvents=Bi)}},[p,g,a,f]),e.useEffect(()=>()=>{p&&(f.layers.delete(p),f.layersWithOutsidePointerEventsDisabled.delete(p),Gi())},[p,f]),e.useEffect(()=>{const e=()=>y({});return document.addEventListener(Ui,e),()=>document.removeEventListener(Ui,e)},[]),(0,In.jsx)(lr.div,(0,s.A)((0,s.A)({},h),{},{ref:v,style:(0,s.A)({pointerEvents:A?E?"auto":"none":void 0},t.style),onFocusCapture:yr(t.onFocusCapture,C.onFocusCapture),onBlurCapture:yr(t.onBlurCapture,C.onBlurCapture),onPointerDownCapture:yr(t.onPointerDownCapture,N.onPointerDownCapture)}))});Wi.displayName="DismissableLayer";var qi=e.forwardRef((t,n)=>{const r=e.useContext(Hi),i=e.useRef(null),a=Hn(n,i);return e.useEffect(()=>{const e=i.current;if(e)return r.branches.add(e),()=>{r.branches.delete(e)}},[r.branches]),(0,In.jsx)(lr.div,(0,s.A)((0,s.A)({},t),{},{ref:a}))});function Gi(){const e=new CustomEvent(Ui);document.dispatchEvent(e)}function Ki(e,t,n,r){let{discrete:i}=r;const s=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),i?cr(s,a):s.dispatchEvent(a)}qi.displayName="DismissableLayerBranch";var Yi=Wi,Xi=qi;const Qi=["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"];var Ji="focusScope.autoFocusOnMount",Zi="focusScope.autoFocusOnUnmount",$i={bubbles:!1,cancelable:!0},es=e.forwardRef((t,n)=>{const{loop:r=!1,trapped:a=!1,onMountAutoFocus:o,onUnmountAutoFocus:l}=t,c=(0,i.A)(t,Qi),[u,d]=e.useState(null),h=Mr(o),f=Mr(l),p=e.useRef(null),m=Hn(n,e=>d(e)),g=e.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;e.useEffect(()=>{if(a){let e=function(e){if(g.paused||!u)return;const t=e.target;u.contains(t)?p.current=t:is(p.current,{select:!0})},t=function(e){if(g.paused||!u)return;const t=e.relatedTarget;null!==t&&(u.contains(t)||is(p.current,{select:!0}))},n=function(e){if(document.activeElement===document.body)for(const t of e)t.removedNodes.length>0&&is(u)};document.addEventListener("focusin",e),document.addEventListener("focusout",t);const r=new MutationObserver(n);return u&&r.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),r.disconnect()}}},[a,u,g.paused]),e.useEffect(()=>{if(u){ss.add(g);const t=document.activeElement;if(!u.contains(t)){const n=new CustomEvent(Ji,$i);u.addEventListener(Ji,h),u.dispatchEvent(n),n.defaultPrevented||(!function(e){let{select:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=document.activeElement;for(const r of e)if(is(r,{select:t}),document.activeElement!==n)return}((e=ts(u),e.filter(e=>"A"!==e.tagName)),{select:!0}),document.activeElement===t&&is(u))}return()=>{u.removeEventListener(Ji,h),setTimeout(()=>{const e=new CustomEvent(Zi,$i);u.addEventListener(Zi,f),u.dispatchEvent(e),e.defaultPrevented||is(null!==t&&void 0!==t?t:document.body,{select:!0}),u.removeEventListener(Zi,f),ss.remove(g)},0)}}var e},[u,h,f,g]);const y=e.useCallback(e=>{if(!r&&!a)return;if(g.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,n=document.activeElement;if(t&&n){const t=e.currentTarget,[i,s]=function(e){const t=ts(e),n=ns(t,e),r=ns(t.reverse(),e);return[n,r]}(t);i&&s?e.shiftKey||n!==s?e.shiftKey&&n===i&&(e.preventDefault(),r&&is(s,{select:!0})):(e.preventDefault(),r&&is(i,{select:!0})):n===t&&e.preventDefault()}},[r,a,g.paused]);return(0,In.jsx)(lr.div,(0,s.A)((0,s.A)({tabIndex:-1},c),{},{ref:m,onKeyDown:y}))});function ts(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function ns(e,t){for(const n of e)if(!rs(n,{upTo:t}))return n}function rs(e,t){let{upTo:n}=t;if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==n&&e===n)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function is(e){let{select:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}es.displayName="FocusScope";var ss=function(){let e=[];return{add(t){const n=e[0];t!==n&&(null===n||void 0===n||n.pause()),e=as(e,t),e.unshift(t)},remove(t){var n;e=as(e,t),null===(n=e[0])||void 0===n||n.resume()}}}();function as(e,t){const n=[...e],r=n.indexOf(t);return-1!==r&&n.splice(r,1),n}const os=["container"];var ls=e.forwardRef((t,n)=>{var r;const{container:a}=t,o=(0,i.A)(t,os),[l,c]=e.useState(!1);Rr(()=>c(!0),[]);const u=a||l&&(null===globalThis||void 0===globalThis||null===(r=globalThis.document)||void 0===r?void 0:r.body);return u?ar.createPortal((0,In.jsx)(lr.div,(0,s.A)((0,s.A)({},o),{},{ref:n})),u):null});ls.displayName="Portal";var cs=0;function us(){e.useEffect(()=>{var e,t;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",null!==(e=n[0])&&void 0!==e?e:ds()),document.body.insertAdjacentElement("beforeend",null!==(t=n[1])&&void 0!==t?t:ds()),cs++,()=>{1===cs&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),cs--}},[])}function ds(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var hs=function(){return hs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},hs.apply(this,arguments)};function fs(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;function ps(e,t,n){if(n||2===arguments.length)for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;"function"===typeof SuppressedError&&SuppressedError;var ms="right-scroll-bar-position",gs="width-before-scroll-bar";function ys(e,t){return"function"===typeof e?e(t):e&&(e.current=t),e}var vs="undefined"!==typeof window?e.useLayoutEffect:e.useEffect,ws=new WeakMap;function bs(t,n){var r=function(t,n){var r=(0,e.useState)(function(){return{value:t,callback:n,facade:{get current(){return r.value},set current(e){var t=r.value;t!==e&&(r.value=e,r.callback(e,t))}}}})[0];return r.callback=n,r.facade}(n||null,function(e){return t.forEach(function(t){return ys(t,e)})});return vs(function(){var e=ws.get(r);if(e){var n=new Set(e),i=new Set(t),s=r.current;n.forEach(function(e){i.has(e)||ys(e,null)}),i.forEach(function(e){n.has(e)||ys(e,s)})}ws.set(r,t)},[t]),r}function xs(e){return e}function Ss(e,t){void 0===t&&(t=xs);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(e){var i=t(e,r);return n.push(i),function(){n=n.filter(function(e){return e!==i})}},assignSyncMedium:function(e){for(r=!0;n.length;){var t=n;n=[],t.forEach(e)}n={push:function(t){return e(t)},filter:function(){return n}}},assignMedium:function(e){r=!0;var t=[];if(n.length){var i=n;n=[],i.forEach(e),t=n}var s=function(){var n=t;t=[],n.forEach(e)},a=function(){return Promise.resolve().then(s)};a(),n={push:function(e){t.push(e),a()},filter:function(e){return t=t.filter(e),n}}}};return i}var As=function(e){void 0===e&&(e={});var t=Ss(null);return t.options=hs({async:!0,ssr:!1},e),t}(),Es=function(){},Ns=e.forwardRef(function(t,n){var r=e.useRef(null),i=e.useState({onScrollCapture:Es,onWheelCapture:Es,onTouchMoveCapture:Es}),s=i[0],a=i[1],o=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,d=t.enabled,h=t.shards,f=t.sideCar,p=t.noRelative,m=t.noIsolation,g=t.inert,y=t.allowPinchZoom,v=t.as,w=void 0===v?"div":v,b=t.gapMode,x=fs(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=f,A=bs([r,n]),E=hs(hs({},x),s);return e.createElement(e.Fragment,null,d&&e.createElement(S,{sideCar:As,removeScrollBar:u,shards:h,noRelative:p,noIsolation:m,inert:g,setCallbacks:a,allowPinchZoom:!!y,lockRef:r,gapMode:b}),o?e.cloneElement(e.Children.only(l),hs(hs({},E),{ref:A})):e.createElement(w,hs({},E,{className:c,ref:A}),l))});Ns.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},Ns.classNames={fullWidth:gs,zeroRight:ms};var Cs,_s=function(t){var n=t.sideCar,r=fs(t,["sideCar"]);if(!n)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=n.read();if(!i)throw new Error("Sidecar medium not found");return e.createElement(i,hs({},r))};_s.isSideCarExport=!0;function Ts(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Cs||n.nc;return t&&e.setAttribute("nonce",t),e}var Is=function(){var e=0,t=null;return{add:function(n){var r,i;0==e&&(t=Ts())&&(i=n,(r=t).styleSheet?r.styleSheet.cssText=i:r.appendChild(document.createTextNode(i)),function(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}(t)),e++},remove:function(){! --e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},ks=function(){var t=function(){var t=Is();return function(n,r){e.useEffect(function(){return t.add(n),function(){t.remove()}},[n&&r])}}();return function(e){var n=e.styles,r=e.dynamic;return t(n,r),null}},Ps={left:0,top:0,right:0,gap:0},Rs=function(e){return parseInt(e||"",10)||0},Ds=function(e){if(void 0===e&&(e="margin"),"undefined"===typeof window)return Ps;var t=function(e){var t=window.getComputedStyle(document.body),n=t["padding"===e?"paddingLeft":"marginLeft"],r=t["padding"===e?"paddingTop":"marginTop"],i=t["padding"===e?"paddingRight":"marginRight"];return[Rs(n),Rs(r),Rs(i)]}(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Os=ks(),Ls="data-scroll-locked",Ms=function(e,t,n,r){var i=e.left,s=e.top,a=e.right,o=e.gap;return void 0===n&&(n="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(r,";\n   padding-right: ").concat(o,"px ").concat(r,";\n  }\n  body[").concat(Ls,"] {\n    overflow: hidden ").concat(r,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(r,";"),"margin"===n&&"\n    padding-left: ".concat(i,"px;\n    padding-top: ").concat(s,"px;\n    padding-right: ").concat(a,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(o,"px ").concat(r,";\n    "),"padding"===n&&"padding-right: ".concat(o,"px ").concat(r,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(ms," {\n    right: ").concat(o,"px ").concat(r,";\n  }\n  \n  .").concat(gs," {\n    margin-right: ").concat(o,"px ").concat(r,";\n  }\n  \n  .").concat(ms," .").concat(ms," {\n    right: 0 ").concat(r,";\n  }\n  \n  .").concat(gs," .").concat(gs," {\n    margin-right: 0 ").concat(r,";\n  }\n  \n  body[").concat(Ls,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(o,"px;\n  }\n")},Fs=function(){var e=parseInt(document.body.getAttribute(Ls)||"0",10);return isFinite(e)?e:0},js=function(t){var n=t.noRelative,r=t.noImportant,i=t.gapMode,s=void 0===i?"margin":i;e.useEffect(function(){return document.body.setAttribute(Ls,(Fs()+1).toString()),function(){var e=Fs()-1;e<=0?document.body.removeAttribute(Ls):document.body.setAttribute(Ls,e.toString())}},[]);var a=e.useMemo(function(){return Ds(s)},[s]);return e.createElement(Os,{styles:Ms(a,!n,s,r?"":"!important")})},Bs=!1;if("undefined"!==typeof window)try{var Us=Object.defineProperty({},"passive",{get:function(){return Bs=!0,!0}});window.addEventListener("test",Us,Us),window.removeEventListener("test",Us,Us)}catch(x_){Bs=!1}var zs=!!Bs&&{passive:!1},Vs=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return"hidden"!==n[t]&&!(n.overflowY===n.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===n[t])},Hs=function(e,t){var n=t.ownerDocument,r=t;do{if("undefined"!==typeof ShadowRoot&&r instanceof ShadowRoot&&(r=r.host),Ws(e,r)){var i=qs(e,r);if(i[1]>i[2])return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Ws=function(e,t){return"v"===e?function(e){return Vs(e,"overflowY")}(t):function(e){return Vs(e,"overflowX")}(t)},qs=function(e,t){return"v"===e?[(n=t).scrollTop,n.scrollHeight,n.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var n},Gs=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Ks=function(e){return[e.deltaX,e.deltaY]},Ys=function(e){return e&&"current"in e?e.current:e},Xs=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},Qs=0,Js=[];function Zs(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const $s=(ea=function(t){var n=e.useRef([]),r=e.useRef([0,0]),i=e.useRef(),s=e.useState(Qs++)[0],a=e.useState(ks)[0],o=e.useRef(t);e.useEffect(function(){o.current=t},[t]),e.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var e=ps([t.lockRef.current],(t.shards||[]).map(Ys),!0).filter(Boolean);return e.forEach(function(e){return e.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),e.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=e.useCallback(function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!o.current.allowPinchZoom;var n,s=Gs(e),a=r.current,l="deltaX"in e?e.deltaX:a[0]-s[0],c="deltaY"in e?e.deltaY:a[1]-s[1],u=e.target,d=Math.abs(l)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===d&&"range"===u.type)return!1;var h=Hs(d,u);if(!h)return!0;if(h?n=d:(n="v"===d?"h":"v",h=Hs(d,u)),!h)return!1;if(!i.current&&"changedTouches"in e&&(l||c)&&(i.current=n),!n)return!0;var f=i.current||n;return function(e,t,n,r,i){var s=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),a=s*r,o=n.target,l=t.contains(o),c=!1,u=a>0,d=0,h=0;do{if(!o)break;var f=qs(e,o),p=f[0],m=f[1]-f[2]-s*p;(p||m)&&Ws(e,o)&&(d+=m,h+=p);var g=o.parentNode;o=g&&g.nodeType===Node.DOCUMENT_FRAGMENT_NODE?g.host:g}while(!l&&o!==document.body||l&&(t.contains(o)||t===o));return(u&&(i&&Math.abs(d)<1||!i&&a>d)||!u&&(i&&Math.abs(h)<1||!i&&-a>h))&&(c=!0),c}(f,t,e,"h"===f?l:c,!0)},[]),c=e.useCallback(function(e){var t=e;if(Js.length&&Js[Js.length-1]===a){var r="deltaY"in t?Ks(t):Gs(t),i=n.current.filter(function(e){return e.name===t.type&&(e.target===t.target||t.target===e.shadowParent)&&(n=e.delta,i=r,n[0]===i[0]&&n[1]===i[1]);var n,i})[0];if(i&&i.should)t.cancelable&&t.preventDefault();else if(!i){var s=(o.current.shards||[]).map(Ys).filter(Boolean).filter(function(e){return e.contains(t.target)});(s.length>0?l(t,s[0]):!o.current.noIsolation)&&t.cancelable&&t.preventDefault()}}},[]),u=e.useCallback(function(e,t,r,i){var s={name:e,delta:t,target:r,should:i,shadowParent:Zs(r)};n.current.push(s),setTimeout(function(){n.current=n.current.filter(function(e){return e!==s})},1)},[]),d=e.useCallback(function(e){r.current=Gs(e),i.current=void 0},[]),h=e.useCallback(function(e){u(e.type,Ks(e),e.target,l(e,t.lockRef.current))},[]),f=e.useCallback(function(e){u(e.type,Gs(e),e.target,l(e,t.lockRef.current))},[]);e.useEffect(function(){return Js.push(a),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",c,zs),document.addEventListener("touchmove",c,zs),document.addEventListener("touchstart",d,zs),function(){Js=Js.filter(function(e){return e!==a}),document.removeEventListener("wheel",c,zs),document.removeEventListener("touchmove",c,zs),document.removeEventListener("touchstart",d,zs)}},[]);var p=t.removeScrollBar,m=t.inert;return e.createElement(e.Fragment,null,m?e.createElement(a,{styles:Xs(s)}):null,p?e.createElement(js,{noRelative:t.noRelative,gapMode:t.gapMode}):null)},As.useMedium(ea),_s);var ea,ta=e.forwardRef(function(t,n){return e.createElement(Ns,hs({},t,{ref:n,sideCar:$s}))});ta.classNames=Ns.classNames;const na=ta;var ra=function(e){return"undefined"===typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body},ia=new WeakMap,sa=new WeakMap,aa={},oa=0,la=function(e){return e&&(e.host||la(e.parentNode))},ca=function(e,t,n,r){var i=function(e,t){return t.map(function(t){if(e.contains(t))return t;var n=la(t);return n&&e.contains(n)?n:(console.error("aria-hidden",t,"in not contained inside",e,". Doing nothing"),null)}).filter(function(e){return Boolean(e)})}(t,Array.isArray(e)?e:[e]);aa[n]||(aa[n]=new WeakMap);var s=aa[n],a=[],o=new Set,l=new Set(i),c=function(e){e&&!o.has(e)&&(o.add(e),c(e.parentNode))};i.forEach(c);var u=function(e){e&&!l.has(e)&&Array.prototype.forEach.call(e.children,function(e){if(o.has(e))u(e);else try{var t=e.getAttribute(r),i=null!==t&&"false"!==t,l=(ia.get(e)||0)+1,c=(s.get(e)||0)+1;ia.set(e,l),s.set(e,c),a.push(e),1===l&&i&&sa.set(e,!0),1===c&&e.setAttribute(n,"true"),i||e.setAttribute(r,"true")}catch(b_){console.error("aria-hidden: cannot operate on ",e,b_)}})};return u(t),o.clear(),oa++,function(){a.forEach(function(e){var t=ia.get(e)-1,i=s.get(e)-1;ia.set(e,t),s.set(e,i),t||(sa.has(e)||e.removeAttribute(r),sa.delete(e)),i||e.removeAttribute(n)}),--oa||(ia=new WeakMap,ia=new WeakMap,sa=new WeakMap,aa={})}},ua=function(e,t,n){void 0===n&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),i=t||ra(e);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),ca(r,i,n,"aria-hidden")):function(){return null}};const da=["__scopeDialog"],ha=["forceMount"],fa=["__scopeDialog"],pa=["forceMount"],ma=["__scopeDialog","trapFocus","onOpenAutoFocus","onCloseAutoFocus"],ga=["__scopeDialog"],ya=["__scopeDialog"],va=["__scopeDialog"];var wa="Dialog",[ba,xa]=br(wa),[Sa,Aa]=ba(wa),Ea=t=>{const{__scopeDialog:n,children:r,open:i,defaultOpen:s,onOpenChange:a,modal:o=!0}=t,l=e.useRef(null),c=e.useRef(null),[u,d]=jr({prop:i,defaultProp:null!==s&&void 0!==s&&s,onChange:a,caller:wa});return(0,In.jsx)(Sa,{scope:n,triggerRef:l,contentRef:c,contentId:Lr(),titleId:Lr(),descriptionId:Lr(),open:u,onOpenChange:d,onOpenToggle:e.useCallback(()=>d(e=>!e),[d]),modal:o,children:r})};Ea.displayName=wa;var Na="DialogTrigger",Ca=e.forwardRef((e,t)=>{const{__scopeDialog:n}=e,r=(0,i.A)(e,da),a=Aa(Na,n),o=Hn(t,a.triggerRef);return(0,In.jsx)(lr.button,(0,s.A)((0,s.A)({type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Ga(a.open)},r),{},{ref:o,onClick:yr(e.onClick,a.onOpenToggle)}))});Ca.displayName=Na;var _a="DialogPortal",[Ta,Ia]=ba(_a,{forceMount:void 0}),ka=t=>{const{__scopeDialog:n,forceMount:r,children:i,container:s}=t,a=Aa(_a,n);return(0,In.jsx)(Ta,{scope:n,forceMount:r,children:e.Children.map(i,e=>(0,In.jsx)(oi,{present:r||a.open,children:(0,In.jsx)(ls,{asChild:!0,container:s,children:e})}))})};ka.displayName=_a;var Pa="DialogOverlay",Ra=e.forwardRef((e,t)=>{const n=Ia(Pa,e.__scopeDialog),{forceMount:r=n.forceMount}=e,a=(0,i.A)(e,ha),o=Aa(Pa,e.__scopeDialog);return o.modal?(0,In.jsx)(oi,{present:r||o.open,children:(0,In.jsx)(Oa,(0,s.A)((0,s.A)({},a),{},{ref:t}))}):null});Ra.displayName=Pa;var Da=Gn("DialogOverlay.RemoveScroll"),Oa=e.forwardRef((e,t)=>{const{__scopeDialog:n}=e,r=(0,i.A)(e,fa),a=Aa(Pa,n);return(0,In.jsx)(na,{as:Da,allowPinchZoom:!0,shards:[a.contentRef],children:(0,In.jsx)(lr.div,(0,s.A)((0,s.A)({"data-state":Ga(a.open)},r),{},{ref:t,style:(0,s.A)({pointerEvents:"auto"},r.style)}))})}),La="DialogContent",Ma=e.forwardRef((e,t)=>{const n=Ia(La,e.__scopeDialog),{forceMount:r=n.forceMount}=e,a=(0,i.A)(e,pa),o=Aa(La,e.__scopeDialog);return(0,In.jsx)(oi,{present:r||o.open,children:o.modal?(0,In.jsx)(Fa,(0,s.A)((0,s.A)({},a),{},{ref:t})):(0,In.jsx)(ja,(0,s.A)((0,s.A)({},a),{},{ref:t}))})});Ma.displayName=La;var Fa=e.forwardRef((t,n)=>{const r=Aa(La,t.__scopeDialog),i=e.useRef(null),a=Hn(n,r.contentRef,i);return e.useEffect(()=>{const e=i.current;if(e)return ua(e)},[]),(0,In.jsx)(Ba,(0,s.A)((0,s.A)({},t),{},{ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:yr(t.onCloseAutoFocus,e=>{var t;e.preventDefault(),null===(t=r.triggerRef.current)||void 0===t||t.focus()}),onPointerDownOutside:yr(t.onPointerDownOutside,e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey;(2===t.button||n)&&e.preventDefault()}),onFocusOutside:yr(t.onFocusOutside,e=>e.preventDefault())}))}),ja=e.forwardRef((t,n)=>{const r=Aa(La,t.__scopeDialog),i=e.useRef(!1),a=e.useRef(!1);return(0,In.jsx)(Ba,(0,s.A)((0,s.A)({},t),{},{ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:e=>{var n,s;(null===(n=t.onCloseAutoFocus)||void 0===n||n.call(t,e),e.defaultPrevented)||(i.current||null===(s=r.triggerRef.current)||void 0===s||s.focus(),e.preventDefault());i.current=!1,a.current=!1},onInteractOutside:e=>{var n,s;null===(n=t.onInteractOutside)||void 0===n||n.call(t,e),e.defaultPrevented||(i.current=!0,"pointerdown"===e.detail.originalEvent.type&&(a.current=!0));const o=e.target;(null===(s=r.triggerRef.current)||void 0===s?void 0:s.contains(o))&&e.preventDefault(),"focusin"===e.detail.originalEvent.type&&a.current&&e.preventDefault()}}))}),Ba=e.forwardRef((t,n)=>{const{__scopeDialog:r,trapFocus:a,onOpenAutoFocus:o,onCloseAutoFocus:l}=t,c=(0,i.A)(t,ma),u=Aa(La,r),d=e.useRef(null),h=Hn(n,d);return us(),(0,In.jsxs)(In.Fragment,{children:[(0,In.jsx)(es,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:o,onUnmountAutoFocus:l,children:(0,In.jsx)(Wi,(0,s.A)((0,s.A)({role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":Ga(u.open)},c),{},{ref:h,onDismiss:()=>u.onOpenChange(!1)}))}),(0,In.jsxs)(In.Fragment,{children:[(0,In.jsx)(Qa,{titleId:u.titleId}),(0,In.jsx)(Ja,{contentRef:d,descriptionId:u.descriptionId})]})]})}),Ua="DialogTitle",za=e.forwardRef((e,t)=>{const{__scopeDialog:n}=e,r=(0,i.A)(e,ga),a=Aa(Ua,n);return(0,In.jsx)(lr.h2,(0,s.A)((0,s.A)({id:a.titleId},r),{},{ref:t}))});za.displayName=Ua;var Va="DialogDescription",Ha=e.forwardRef((e,t)=>{const{__scopeDialog:n}=e,r=(0,i.A)(e,ya),a=Aa(Va,n);return(0,In.jsx)(lr.p,(0,s.A)((0,s.A)({id:a.descriptionId},r),{},{ref:t}))});Ha.displayName=Va;var Wa="DialogClose",qa=e.forwardRef((e,t)=>{const{__scopeDialog:n}=e,r=(0,i.A)(e,va),a=Aa(Wa,n);return(0,In.jsx)(lr.button,(0,s.A)((0,s.A)({type:"button"},r),{},{ref:t,onClick:yr(e.onClick,()=>a.onOpenChange(!1))}))});function Ga(e){return e?"open":"closed"}qa.displayName=Wa;var Ka="DialogTitleWarning",[Ya,Xa]=function(t,n){const r=e.createContext(n),s=t=>{const{children:n}=t,s=(0,i.A)(t,vr),a=e.useMemo(()=>s,Object.values(s));return(0,In.jsx)(r.Provider,{value:a,children:n})};return s.displayName=t+"Provider",[s,function(i){const s=e.useContext(r);if(s)return s;if(void 0!==n)return n;throw new Error("`".concat(i,"` must be used within `").concat(t,"`"))}]}(Ka,{contentName:La,titleName:Ua,docsSlug:"dialog"}),Qa=t=>{let{titleId:n}=t;const r=Xa(Ka),i="`".concat(r.contentName,"` requires a `").concat(r.titleName,"` for the component to be accessible for screen reader users.\n\nIf you want to hide the `").concat(r.titleName,"`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/").concat(r.docsSlug);return e.useEffect(()=>{if(n){document.getElementById(n)||console.error(i)}},[i,n]),null},Ja=t=>{let{contentRef:n,descriptionId:r}=t;const i=Xa("DialogDescriptionWarning"),s="Warning: Missing `Description` or `aria-describedby={undefined}` for {".concat(i.contentName,"}.");return e.useEffect(()=>{var e;const t=null===(e=n.current)||void 0===e?void 0:e.getAttribute("aria-describedby");if(r&&t){document.getElementById(r)||console.warn(s)}},[s,n,r]),null},Za=Ea,$a=ka,eo=Ra,to=Ma,no=za,ro=Ha,io=qa;const so=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},ao=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim()};var oo={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const lo=["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"],co=(0,e.forwardRef)((t,n)=>{let{color:r="currentColor",size:a=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:c="",children:u,iconNode:d}=t,h=(0,i.A)(t,lo);return(0,e.createElement)("svg",(0,s.A)((0,s.A)((0,s.A)({ref:n},oo),{},{width:a,height:a,stroke:r,strokeWidth:l?24*Number(o)/Number(a):o,className:ao("lucide",c)},!u&&!(e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(h)&&{"aria-hidden":"true"}),h),[...d.map(t=>{let[n,r]=t;return(0,e.createElement)(n,r)}),...Array.isArray(u)?u:[u]])}),uo=["className"],ho=(t,n)=>{const r=(0,e.forwardRef)((r,a)=>{let{className:o}=r,l=(0,i.A)(r,uo);return(0,e.createElement)(co,(0,s.A)({ref:a,iconNode:n,className:ao("lucide-".concat((c=so(t),c.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase())),"lucide-".concat(t),o)},l));var c});return r.displayName=so(t),r},fo=ho("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),po=["className"],mo=["side","className","children"],go=["className"],yo=["className"],vo=["className"],wo=Za,bo=$a,xo=e.forwardRef((e,t)=>{let{className:n}=e,r=(0,i.A)(e,po);return(0,In.jsx)(eo,(0,s.A)((0,s.A)({className:Tn("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n)},r),{},{ref:t}))});xo.displayName=eo.displayName;const So=er("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Ao=e.forwardRef((e,t)=>{let{side:n="right",className:r,children:a}=e,o=(0,i.A)(e,mo);return(0,In.jsxs)(bo,{children:[(0,In.jsx)(xo,{}),(0,In.jsxs)(to,(0,s.A)((0,s.A)({ref:t,className:Tn(So({side:n}),r)},o),{},{children:[(0,In.jsxs)(io,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,In.jsx)(fo,{className:"h-4 w-4"}),(0,In.jsx)("span",{className:"sr-only",children:"Close"})]}),a]}))]})});Ao.displayName=to.displayName;const Eo=e=>{let{className:t}=e,n=(0,i.A)(e,go);return(0,In.jsx)("div",(0,s.A)({className:Tn("flex flex-col space-y-2 text-center sm:text-left",t)},n))};Eo.displayName="SheetHeader";const No=e.forwardRef((e,t)=>{let{className:n}=e,r=(0,i.A)(e,yo);return(0,In.jsx)(no,(0,s.A)({ref:t,className:Tn("text-lg font-semibold text-foreground",n)},r))});No.displayName=no.displayName;e.forwardRef((e,t)=>{let{className:n}=e,r=(0,i.A)(e,vo);return(0,In.jsx)(ro,(0,s.A)({ref:t,className:Tn("text-sm text-muted-foreground",n)},r))}).displayName=ro.displayName;const Co=ho("fuel",[["line",{x1:"3",x2:"15",y1:"22",y2:"22",key:"xegly4"}],["line",{x1:"4",x2:"14",y1:"9",y2:"9",key:"xcnuvu"}],["path",{d:"M14 22V4a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v18",key:"16j0yd"}],["path",{d:"M14 13h2a2 2 0 0 1 2 2v2a2 2 0 0 0 2 2a2 2 0 0 0 2-2V9.83a2 2 0 0 0-.59-1.42L18 5",key:"7cu91f"}]]),_o=ho("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),To=ho("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Io=ho("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),ko=ho("moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),Po=ho("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),Ro=ho("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),Do=ho("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),Oo=ho("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Lo=ho("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Mo=ho("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),Fo=ho("indian-rupee",[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]]),jo=ho("calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),Bo=ho("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),Uo=ho("arrow-right-left",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]),zo=ho("trending-down",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),Vo=ho("receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]),Ho=ho("wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]),Wo=ho("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);let qo=0;const Go=new Map,Ko=e=>{if(Go.has(e))return;const t=setTimeout(()=>{Go.delete(e),Jo({type:"REMOVE_TOAST",toastId:e})},1e6);Go.set(e,t)},Yo=(e,t)=>{switch(t.type){case"ADD_TOAST":return(0,s.A)((0,s.A)({},e),{},{toasts:[t.toast,...e.toasts].slice(0,1)});case"UPDATE_TOAST":return(0,s.A)((0,s.A)({},e),{},{toasts:e.toasts.map(e=>e.id===t.toast.id?(0,s.A)((0,s.A)({},e),t.toast):e)});case"DISMISS_TOAST":{const{toastId:n}=t;return n?Ko(n):e.toasts.forEach(e=>{Ko(e.id)}),(0,s.A)((0,s.A)({},e),{},{toasts:e.toasts.map(e=>e.id===n||void 0===n?(0,s.A)((0,s.A)({},e),{},{open:!1}):e)})}case"REMOVE_TOAST":return void 0===t.toastId?(0,s.A)((0,s.A)({},e),{},{toasts:[]}):(0,s.A)((0,s.A)({},e),{},{toasts:e.toasts.filter(e=>e.id!==t.toastId)})}},Xo=[];let Qo={toasts:[]};function Jo(e){Qo=Yo(Qo,e),Xo.forEach(e=>{e(Qo)})}function Zo(e){let t=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e));const n=(qo=(qo+1)%Number.MAX_SAFE_INTEGER,qo.toString()),r=()=>Jo({type:"DISMISS_TOAST",toastId:n});return Jo({type:"ADD_TOAST",toast:(0,s.A)((0,s.A)({},t),{},{id:n,open:!0,onOpenChange:e=>{e||r()}})}),{id:n,dismiss:r,update:e=>Jo({type:"UPDATE_TOAST",toast:(0,s.A)((0,s.A)({},e),{},{id:n})})}}function $o(){const[t,n]=e.useState(Qo);return e.useEffect(()=>(Xo.push(n),()=>{const e=Xo.indexOf(n);e>-1&&Xo.splice(e,1)}),[t]),(0,s.A)((0,s.A)({},t),{},{toast:Zo,dismiss:e=>Jo({type:"DISMISS_TOAST",toastId:e})})}var el=n(8173);const tl=()=>new Promise((e,t)=>{const n=indexedDB.open("MPumpBackupDB",1);n.onerror=()=>t(n.error),n.onsuccess=()=>{const t=n.result;e({get:(e,n)=>new Promise((r,i)=>{const s=t.transaction(e,"readonly").objectStore(e).get(n);s.onsuccess=()=>r(s.result),s.onerror=()=>i(s.error)})})},n.onupgradeneeded=e=>{const t=e.target.result;t.objectStoreNames.contains("folderHandles")||t.createObjectStore("folderHandles")}}),nl=(t,n,r,i,s)=>{const a=(0,e.useRef)(null),o=(0,e.useRef)(null);(0,e.useEffect)(()=>{const e=localStorage.getItem("mpump_auto_backup_settings");if(!e)return;const l=JSON.parse(e);if(!l.enabled)return;const c=JSON.stringify({salesData:t,creditData:n,incomeData:r,expenseData:i,fuelSettings:s});a.current&&a.current!==c&&(o.current&&clearTimeout(o.current),o.current=setTimeout(async()=>{try{if(!("showDirectoryPicker"in window))return;const e=await tl(),t=await e.get("folderHandles","autoBackupFolder");if(!t)return;if("granted"!==await t.queryPermission({mode:"readwrite"})){if("granted"!==await t.requestPermission({mode:"readwrite"}))return}const n=el.Ay.exportAllData(),r=JSON.stringify(n,null,2),i="mpump-backup-".concat((new Date).toISOString().split("T")[0],".json"),s=await t.getFileHandle(i,{create:!0}),a=await s.createWritable();await a.write(r),await a.close();const o=(new Date).toISOString();l.lastBackupTime=o,localStorage.setItem("mpump_auto_backup_settings",JSON.stringify(l)),console.log("\u2705 Auto-backup completed:",i)}catch(e){console.error("Auto-backup failed:",e)}},5e3)),a.current=c},[t,n,r,i,s]),(0,e.useEffect)(()=>()=>{o.current&&clearTimeout(o.current)},[])},rl=6048e5,il="mpump_auto_backup_weekly_settings",sl=t=>{const n=(0,e.useCallback)(async()=>{try{const e=localStorage.getItem(il);let n=e?JSON.parse(e):null;if(!n){return n={enabled:!0,firstOpenTime:(new Date).toISOString(),lastBackupTime:null,nextScheduledTime:new Date(Date.now()+rl).toISOString()},localStorage.setItem(il,JSON.stringify(n)),void console.log("Auto backup initialized:",n)}if(!n.enabled)return void console.log("Auto backup is disabled");const r=Date.now();if(r>=new Date(n.nextScheduledTime).getTime()){console.log("7 days passed, performing auto backup...");const e=el.Ay.exportAllData(),r=JSON.stringify(e,null,2),i="mpump-auto-backup-".concat((new Date).toISOString().split("T")[0],".json");if("undefined"!==typeof window.MPumpCalcAndroid&&window.MPumpCalcAndroid.saveJsonBackup)window.MPumpCalcAndroid.saveJsonBackup(r,i);else{const e=new Blob([r],{type:"application/json"}),t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download=i,n.style.display="none",document.body.appendChild(n),n.click(),setTimeout(()=>{document.body.removeChild(n),URL.revokeObjectURL(t)},100)}const s=(new Date).toISOString();n.lastBackupTime=s,n.nextScheduledTime=new Date(Date.now()+rl).toISOString(),localStorage.setItem(il,JSON.stringify(n)),t&&t({title:"Auto Backup Successful",description:"Backup file downloaded: ".concat(i)}),console.log("Auto backup completed:",n)}else console.log("Auto backup not due yet. Next backup:",n.nextScheduledTime)}catch(e){console.error("Auto backup error:",e),t&&t({title:"Auto Backup Failed",description:"Could not perform automatic backup",variant:"destructive"})}},[t]);(0,e.useEffect)(()=>{n()},[n]);const r=(0,e.useCallback)(()=>{const e=localStorage.getItem(il);return e?JSON.parse(e):null},[]),i=(0,e.useCallback)(e=>{const t=r();return!!t&&(t.enabled=e,localStorage.setItem(il,JSON.stringify(t)),!0)},[r]),s=(0,e.useCallback)(()=>{const e=r();return e?{enabled:e.enabled,lastBackupTime:e.lastBackupTime,nextScheduledTime:e.nextScheduledTime}:{enabled:!1,lastBackupTime:null,nextScheduledTime:null}},[r]);return{checkAndPerformAutoBackup:n,toggleAutoBackup:i,getBackupStatus:s}};var al=n(7762);n(557);function ol(e,t){let[n,r]=t;return Math.min(r,Math.max(n,e))}const ll=["top","right","bottom","left"],cl=Math.min,ul=Math.max,dl=Math.round,hl=Math.floor,fl=e=>({x:e,y:e}),pl={left:"right",right:"left",bottom:"top",top:"bottom"},ml={start:"end",end:"start"};function gl(e,t,n){return ul(e,cl(t,n))}function yl(e,t){return"function"===typeof e?e(t):e}function vl(e){return e.split("-")[0]}function wl(e){return e.split("-")[1]}function bl(e){return"x"===e?"y":"x"}function xl(e){return"y"===e?"height":"width"}const Sl=new Set(["top","bottom"]);function Al(e){return Sl.has(vl(e))?"y":"x"}function El(e){return bl(Al(e))}function Nl(e){return e.replace(/start|end/g,e=>ml[e])}const Cl=["left","right"],_l=["right","left"],Tl=["top","bottom"],Il=["bottom","top"];function kl(e,t,n,r){const i=wl(e);let s=function(e,t,n){switch(e){case"top":case"bottom":return n?t?_l:Cl:t?Cl:_l;case"left":case"right":return t?Tl:Il;default:return[]}}(vl(e),"start"===n,r);return i&&(s=s.map(e=>e+"-"+i),t&&(s=s.concat(s.map(Nl)))),s}function Pl(e){return e.replace(/left|right|bottom|top/g,e=>pl[e])}function Rl(e){return"number"!==typeof e?function(e){return(0,s.A)({top:0,right:0,bottom:0,left:0},e)}(e):{top:e,right:e,bottom:e,left:e}}function Dl(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}const Ol=["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"],Ll=["strategy"],Ml=["mainAxis","crossAxis","limiter"],Fl=["apply"];function jl(e,t,n){let{reference:r,floating:i}=e;const s=Al(t),a=El(t),o=xl(a),l=vl(t),c="y"===s,u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,h=r[o]/2-i[o]/2;let f;switch(l){case"top":f={x:u,y:r.y-i.height};break;case"bottom":f={x:u,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:d};break;case"left":f={x:r.x-i.width,y:d};break;default:f={x:r.x,y:r.y}}switch(wl(t)){case"start":f[a]-=h*(n&&c?-1:1);break;case"end":f[a]+=h*(n&&c?-1:1)}return f}async function Bl(e,t){var n;void 0===t&&(t={});const{x:r,y:i,platform:s,rects:a,elements:o,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=yl(t,e),p=Rl(f),m=o[h?"floating"===d?"reference":"floating":d],g=Dl(await s.getClippingRect({element:null==(n=await(null==s.isElement?void 0:s.isElement(m)))||n?m:m.contextElement||await(null==s.getDocumentElement?void 0:s.getDocumentElement(o.floating)),boundary:c,rootBoundary:u,strategy:l})),y="floating"===d?{x:r,y:i,width:a.floating.width,height:a.floating.height}:a.reference,v=await(null==s.getOffsetParent?void 0:s.getOffsetParent(o.floating)),w=await(null==s.isElement?void 0:s.isElement(v))&&await(null==s.getScale?void 0:s.getScale(v))||{x:1,y:1},b=Dl(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:y,offsetParent:v,strategy:l}):y);return{top:(g.top-b.top+p.top)/w.y,bottom:(b.bottom-g.bottom+p.bottom)/w.y,left:(g.left-b.left+p.left)/w.x,right:(b.right-g.right+p.right)/w.x}}function Ul(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function zl(e){return ll.some(t=>e[t]>=0)}const Vl=new Set(["left","top"]);function Hl(){return"undefined"!==typeof window}function Wl(e){return Kl(e)?(e.nodeName||"").toLowerCase():"#document"}function ql(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function Gl(e){var t;return null==(t=(Kl(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function Kl(e){return!!Hl()&&(e instanceof Node||e instanceof ql(e).Node)}function Yl(e){return!!Hl()&&(e instanceof Element||e instanceof ql(e).Element)}function Xl(e){return!!Hl()&&(e instanceof HTMLElement||e instanceof ql(e).HTMLElement)}function Ql(e){return!(!Hl()||"undefined"===typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof ql(e).ShadowRoot)}const Jl=new Set(["inline","contents"]);function Zl(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=uc(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!Jl.has(i)}const $l=new Set(["table","td","th"]);function ec(e){return $l.has(Wl(e))}const tc=[":popover-open",":modal"];function nc(e){return tc.some(t=>{try{return e.matches(t)}catch(n){return!1}})}const rc=["transform","translate","scale","rotate","perspective"],ic=["transform","translate","scale","rotate","perspective","filter"],sc=["paint","layout","strict","content"];function ac(e){const t=oc(),n=Yl(e)?uc(e):e;return rc.some(e=>!!n[e]&&"none"!==n[e])||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||ic.some(e=>(n.willChange||"").includes(e))||sc.some(e=>(n.contain||"").includes(e))}function oc(){return!("undefined"===typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}const lc=new Set(["html","body","#document"]);function cc(e){return lc.has(Wl(e))}function uc(e){return ql(e).getComputedStyle(e)}function dc(e){return Yl(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function hc(e){if("html"===Wl(e))return e;const t=e.assignedSlot||e.parentNode||Ql(e)&&e.host||Gl(e);return Ql(t)?t.host:t}function fc(e){const t=hc(e);return cc(t)?e.ownerDocument?e.ownerDocument.body:e.body:Xl(t)&&Zl(t)?t:fc(t)}function pc(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);const i=fc(e),s=i===(null==(r=e.ownerDocument)?void 0:r.body),a=ql(i);if(s){const e=mc(a);return t.concat(a,a.visualViewport||[],Zl(i)?i:[],e&&n?pc(e):[])}return t.concat(i,pc(i,[],n))}function mc(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function gc(e){const t=uc(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Xl(e),s=i?e.offsetWidth:n,a=i?e.offsetHeight:r,o=dl(n)!==s||dl(r)!==a;return o&&(n=s,r=a),{width:n,height:r,$:o}}function yc(e){return Yl(e)?e:e.contextElement}function vc(e){const t=yc(e);if(!Xl(t))return fl(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=gc(t);let a=(s?dl(n.width):n.width)/r,o=(s?dl(n.height):n.height)/i;return a&&Number.isFinite(a)||(a=1),o&&Number.isFinite(o)||(o=1),{x:a,y:o}}const wc=fl(0);function bc(e){const t=ql(e);return oc()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:wc}function xc(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const i=e.getBoundingClientRect(),s=yc(e);let a=fl(1);t&&(r?Yl(r)&&(a=vc(r)):a=vc(e));const o=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==ql(e))&&t}(s,n,r)?bc(s):fl(0);let l=(i.left+o.x)/a.x,c=(i.top+o.y)/a.y,u=i.width/a.x,d=i.height/a.y;if(s){const e=ql(s),t=r&&Yl(r)?ql(r):r;let n=e,i=mc(n);for(;i&&r&&t!==n;){const e=vc(i),t=i.getBoundingClientRect(),r=uc(i),s=t.left+(i.clientLeft+parseFloat(r.paddingLeft))*e.x,a=t.top+(i.clientTop+parseFloat(r.paddingTop))*e.y;l*=e.x,c*=e.y,u*=e.x,d*=e.y,l+=s,c+=a,n=ql(i),i=mc(n)}}return Dl({width:u,height:d,x:l,y:c})}function Sc(e,t){const n=dc(e).scrollLeft;return t?t.left+n:xc(Gl(e)).left+n}function Ac(e,t){const n=e.getBoundingClientRect();return{x:n.left+t.scrollLeft-Sc(e,n),y:n.top+t.scrollTop}}const Ec=new Set(["absolute","fixed"]);function Nc(e,t,n){let r;if("viewport"===t)r=function(e,t){const n=ql(e),r=Gl(e),i=n.visualViewport;let s=r.clientWidth,a=r.clientHeight,o=0,l=0;if(i){s=i.width,a=i.height;const e=oc();(!e||e&&"fixed"===t)&&(o=i.offsetLeft,l=i.offsetTop)}const c=Sc(r);if(c<=0){const e=r.ownerDocument,t=e.body,n=getComputedStyle(t),i="CSS1Compat"===e.compatMode&&parseFloat(n.marginLeft)+parseFloat(n.marginRight)||0,a=Math.abs(r.clientWidth-t.clientWidth-i);a<=25&&(s-=a)}else c<=25&&(s+=c);return{width:s,height:a,x:o,y:l}}(e,n);else if("document"===t)r=function(e){const t=Gl(e),n=dc(e),r=e.ownerDocument.body,i=ul(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=ul(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+Sc(e);const o=-n.scrollTop;return"rtl"===uc(r).direction&&(a+=ul(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:a,y:o}}(Gl(e));else if(Yl(t))r=function(e,t){const n=xc(e,!0,"fixed"===t),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=Xl(e)?vc(e):fl(1);return{width:e.clientWidth*s.x,height:e.clientHeight*s.y,x:i*s.x,y:r*s.y}}(t,n);else{const n=bc(e);r={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return Dl(r)}function Cc(e,t){const n=hc(e);return!(n===t||!Yl(n)||cc(n))&&("fixed"===uc(n).position||Cc(n,t))}function _c(e,t,n){const r=Xl(t),i=Gl(t),s="fixed"===n,a=xc(e,!0,s,t);let o={scrollLeft:0,scrollTop:0};const l=fl(0);function c(){l.x=Sc(i)}if(r||!r&&!s)if(("body"!==Wl(t)||Zl(i))&&(o=dc(t)),r){const e=xc(t,!0,s,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else i&&c();s&&!r&&i&&c();const u=!i||r||s?fl(0):Ac(i,o);return{x:a.left+o.scrollLeft-l.x-u.x,y:a.top+o.scrollTop-l.y-u.y,width:a.width,height:a.height}}function Tc(e){return"static"===uc(e).position}function Ic(e,t){if(!Xl(e)||"fixed"===uc(e).position)return null;if(t)return t(e);let n=e.offsetParent;return Gl(e)===n&&(n=n.ownerDocument.body),n}function kc(e,t){const n=ql(e);if(nc(e))return n;if(!Xl(e)){let t=hc(e);for(;t&&!cc(t);){if(Yl(t)&&!Tc(t))return t;t=hc(t)}return n}let r=Ic(e,t);for(;r&&ec(r)&&Tc(r);)r=Ic(r,t);return r&&cc(r)&&Tc(r)&&!ac(r)?n:r||function(e){let t=hc(e);for(;Xl(t)&&!cc(t);){if(ac(t))return t;if(nc(t))return null;t=hc(t)}return null}(e)||n}const Pc={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s="fixed"===i,a=Gl(r),o=!!t&&nc(t.floating);if(r===a||o&&s)return n;let l={scrollLeft:0,scrollTop:0},c=fl(1);const u=fl(0),d=Xl(r);if((d||!d&&!s)&&(("body"!==Wl(r)||Zl(a))&&(l=dc(r)),Xl(r))){const e=xc(r);c=vc(r),u.x=e.x+r.clientLeft,u.y=e.y+r.clientTop}const h=!a||d||s?fl(0):Ac(a,l);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+h.x,y:n.y*c.y-l.scrollTop*c.y+u.y+h.y}},getDocumentElement:Gl,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const s=[..."clippingAncestors"===n?nc(t)?[]:function(e,t){const n=t.get(e);if(n)return n;let r=pc(e,[],!1).filter(e=>Yl(e)&&"body"!==Wl(e)),i=null;const s="fixed"===uc(e).position;let a=s?hc(e):e;for(;Yl(a)&&!cc(a);){const t=uc(a),n=ac(a);n||"fixed"!==t.position||(i=null),(s?!n&&!i:!n&&"static"===t.position&&i&&Ec.has(i.position)||Zl(a)&&!n&&Cc(e,a))?r=r.filter(e=>e!==a):i=t,a=hc(a)}return t.set(e,r),r}(t,this._c):[].concat(n),r],a=s[0],o=s.reduce((e,n)=>{const r=Nc(t,n,i);return e.top=ul(r.top,e.top),e.right=cl(r.right,e.right),e.bottom=cl(r.bottom,e.bottom),e.left=ul(r.left,e.left),e},Nc(t,a,i));return{width:o.right-o.left,height:o.bottom-o.top,x:o.left,y:o.top}},getOffsetParent:kc,getElementRects:async function(e){const t=this.getOffsetParent||kc,n=this.getDimensions,r=await n(e.floating);return{reference:_c(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=gc(e);return{width:t,height:n}},getScale:vc,isElement:Yl,isRTL:function(e){return"rtl"===uc(e).direction}};function Rc(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Dc(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:o="function"===typeof ResizeObserver,layoutShift:l="function"===typeof IntersectionObserver,animationFrame:c=!1}=r,u=yc(e),d=i||a?[...u?pc(u):[],...pc(t)]:[];d.forEach(e=>{i&&e.addEventListener("scroll",n,{passive:!0}),a&&e.addEventListener("resize",n)});const h=u&&l?function(e,t){let n,r=null;const i=Gl(e);function a(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function o(l,c){void 0===l&&(l=!1),void 0===c&&(c=1),a();const u=e.getBoundingClientRect(),{left:d,top:h,width:f,height:p}=u;if(l||t(),!f||!p)return;const m={rootMargin:-hl(h)+"px "+-hl(i.clientWidth-(d+f))+"px "+-hl(i.clientHeight-(h+p))+"px "+-hl(d)+"px",threshold:ul(0,cl(1,c))||1};let g=!0;function y(t){const r=t[0].intersectionRatio;if(r!==c){if(!g)return o();r?o(!1,r):n=setTimeout(()=>{o(!1,1e-7)},1e3)}1!==r||Rc(u,e.getBoundingClientRect())||o(),g=!1}try{r=new IntersectionObserver(y,(0,s.A)((0,s.A)({},m),{},{root:i.ownerDocument}))}catch(v){r=new IntersectionObserver(y,m)}r.observe(e)}(!0),a}(u,n):null;let f,p=-1,m=null;o&&(m=new ResizeObserver(e=>{let[r]=e;r&&r.target===u&&m&&(m.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var e;null==(e=m)||e.observe(t)})),n()}),u&&!c&&m.observe(u),m.observe(t));let g=c?xc(e):null;return c&&function t(){const r=xc(e);g&&!Rc(g,r)&&n();g=r,f=requestAnimationFrame(t)}(),n(),()=>{var e;d.forEach(e=>{i&&e.removeEventListener("scroll",n),a&&e.removeEventListener("resize",n)}),null==h||h(),null==(e=m)||e.disconnect(),m=null,c&&cancelAnimationFrame(f)}}const Oc=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:a,placement:o,middlewareData:l}=t,c=await async function(e,t){const{placement:n,platform:r,elements:i}=e,s=await(null==r.isRTL?void 0:r.isRTL(i.floating)),a=vl(n),o=wl(n),l="y"===Al(n),c=Vl.has(a)?-1:1,u=s&&l?-1:1,d=yl(t,e);let{mainAxis:h,crossAxis:f,alignmentAxis:p}="number"===typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return o&&"number"===typeof p&&(f="end"===o?-1*p:p),l?{x:f*u,y:h*c}:{x:h*c,y:f*u}}(t,e);return o===(null==(n=l.offset)?void 0:n.placement)&&null!=(r=l.arrow)&&r.alignmentOffset?{}:{x:i+c.x,y:a+c.y,data:(0,s.A)((0,s.A)({},c),{},{placement:o})}}}},Lc=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:a}=t,o=yl(e,t),{mainAxis:l=!0,crossAxis:c=!1,limiter:u={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}}}=o,d=(0,i.A)(o,Ml),h={x:n,y:r},f=await Bl(t,d),p=Al(vl(a)),m=bl(p);let g=h[m],y=h[p];if(l){const e="y"===m?"bottom":"right";g=gl(g+f["y"===m?"top":"left"],g,g-f[e])}if(c){const e="y"===p?"bottom":"right";y=gl(y+f["y"===p?"top":"left"],y,y-f[e])}const v=u.fn((0,s.A)((0,s.A)({},t),{},{[m]:g,[p]:y}));return(0,s.A)((0,s.A)({},v),{},{data:{x:v.x-n,y:v.y-r,enabled:{[m]:l,[p]:c}}})}}},Mc=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:a,rects:o,initialPlacement:l,platform:c,elements:u}=t,d=yl(e,t),{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:y=!0}=d,v=(0,i.A)(d,Ol);if(null!=(n=a.arrow)&&n.alignmentOffset)return{};const w=vl(s),b=Al(l),x=vl(l)===l,S=await(null==c.isRTL?void 0:c.isRTL(u.floating)),A=p||(x||!y?[Pl(l)]:function(e){const t=Pl(e);return[Nl(e),t,Nl(t)]}(l)),E="none"!==g;!p&&E&&A.push(...kl(l,y,g,S));const N=[l,...A],C=await Bl(t,v),_=[];let T=(null==(r=a.flip)?void 0:r.overflows)||[];if(h&&_.push(C[w]),f){const e=function(e,t,n){void 0===n&&(n=!1);const r=wl(e),i=El(e),s=xl(i);let a="x"===i?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[s]>t.floating[s]&&(a=Pl(a)),[a,Pl(a)]}(s,o,S);_.push(C[e[0]],C[e[1]])}if(T=[...T,{placement:s,overflows:_}],!_.every(e=>e<=0)){var I,k;const e=((null==(I=a.flip)?void 0:I.index)||0)+1,t=N[e];if(t){if(!("alignment"===f&&b!==Al(t))||T.every(e=>Al(e.placement)!==b||e.overflows[0]>0))return{data:{index:e,overflows:T},reset:{placement:t}}}let n=null==(k=T.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:k.placement;if(!n)switch(m){case"bestFit":{var P;const e=null==(P=T.filter(e=>{if(E){const t=Al(e.placement);return t===b||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:P[0];e&&(n=e);break}case"initialPlacement":n=l}if(s!==n)return{reset:{placement:n}}}return{}}}},Fc=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:a,rects:o,platform:l,elements:c}=t,u=yl(e,t),{apply:d=()=>{}}=u,h=(0,i.A)(u,Fl),f=await Bl(t,h),p=vl(a),m=wl(a),g="y"===Al(a),{width:y,height:v}=o.floating;let w,b;"top"===p||"bottom"===p?(w=p,b=m===(await(null==l.isRTL?void 0:l.isRTL(c.floating))?"start":"end")?"left":"right"):(b=p,w="end"===m?"top":"bottom");const x=v-f.top-f.bottom,S=y-f.left-f.right,A=cl(v-f[w],x),E=cl(y-f[b],S),N=!t.middlewareData.shift;let C=A,_=E;if(null!=(n=t.middlewareData.shift)&&n.enabled.x&&(_=S),null!=(r=t.middlewareData.shift)&&r.enabled.y&&(C=x),N&&!m){const e=ul(f.left,0),t=ul(f.right,0),n=ul(f.top,0),r=ul(f.bottom,0);g?_=y-2*(0!==e||0!==t?e+t:ul(f.left,f.right)):C=v-2*(0!==n||0!==r?n+r:ul(f.top,f.bottom))}await d((0,s.A)((0,s.A)({},t),{},{availableWidth:_,availableHeight:C}));const T=await l.getDimensions(c.floating);return y!==T.width||v!==T.height?{reset:{rects:!0}}:{}}}},jc=function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,r=yl(e,t),{strategy:a="referenceHidden"}=r,o=(0,i.A)(r,Ll);switch(a){case"referenceHidden":{const e=Ul(await Bl(t,(0,s.A)((0,s.A)({},o),{},{elementContext:"reference"})),n.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:zl(e)}}}case"escaped":{const e=Ul(await Bl(t,(0,s.A)((0,s.A)({},o),{},{altBoundary:!0})),n.floating);return{data:{escapedOffsets:e,escaped:zl(e)}}}default:return{}}}}},Bc=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:a,platform:o,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=yl(e,t)||{};if(null==u)return{};const h=Rl(d),f={x:n,y:r},p=El(i),m=xl(p),g=await o.getDimensions(u),y="y"===p,v=y?"top":"left",w=y?"bottom":"right",b=y?"clientHeight":"clientWidth",x=a.reference[m]+a.reference[p]-f[p]-a.floating[m],S=f[p]-a.reference[p],A=await(null==o.getOffsetParent?void 0:o.getOffsetParent(u));let E=A?A[b]:0;E&&await(null==o.isElement?void 0:o.isElement(A))||(E=l.floating[b]||a.floating[m]);const N=x/2-S/2,C=E/2-g[m]/2-1,_=cl(h[v],C),T=cl(h[w],C),I=_,k=E-g[m]-T,P=E/2-g[m]/2+N,R=gl(I,P,k),D=!c.arrow&&null!=wl(i)&&P!==R&&a.reference[m]/2-(P<I?_:T)-g[m]/2<0,O=D?P<I?P-I:P-k:0;return{[p]:f[p]+O,data:(0,s.A)({[p]:R,centerOffset:P-R-O},D&&{alignmentOffset:O}),reset:D}}}),Uc=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:a,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=yl(e,t),d={x:n,y:r},h=Al(i),f=bl(h);let p=d[f],m=d[h];const g=yl(l,t),y="number"===typeof g?{mainAxis:g,crossAxis:0}:(0,s.A)({mainAxis:0,crossAxis:0},g);if(c){const e="y"===f?"height":"width",t=a.reference[f]-a.floating[e]+y.mainAxis,n=a.reference[f]+a.reference[e]-y.mainAxis;p<t?p=t:p>n&&(p=n)}if(u){var v,w;const e="y"===f?"width":"height",t=Vl.has(vl(i)),n=a.reference[h]-a.floating[e]+(t&&(null==(v=o.offset)?void 0:v[h])||0)+(t?0:y.crossAxis),r=a.reference[h]+a.reference[e]+(t?0:(null==(w=o.offset)?void 0:w[h])||0)-(t?y.crossAxis:0);m<n?m=n:m>r&&(m=r)}return{[f]:p,[h]:m}}}},zc=(e,t,n)=>{const r=new Map,i=(0,s.A)({platform:Pc},n),a=(0,s.A)((0,s.A)({},i.platform),{},{_c:r});return(async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:a=[],platform:o}=n,l=a.filter(Boolean),c=await(null==o.isRTL?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:d,y:h}=jl(u,r,c),f=r,p={},m=0;for(let g=0;g<l.length;g++){const{name:n,fn:a}=l[g],{x:y,y:v,data:w,reset:b}=await a({x:d,y:h,initialPlacement:r,placement:f,strategy:i,middlewareData:p,rects:u,platform:o,elements:{reference:e,floating:t}});d=null!=y?y:d,h=null!=v?v:h,p=(0,s.A)((0,s.A)({},p),{},{[n]:(0,s.A)((0,s.A)({},p[n]),w)}),b&&m<=50&&(m++,"object"===typeof b&&(b.placement&&(f=b.placement),b.rects&&(u=!0===b.rects?await o.getElementRects({reference:e,floating:t,strategy:i}):b.rects),({x:d,y:h}=jl(u,f,c))),g=-1)}return{x:d,y:h,placement:f,strategy:i,middlewareData:p}})(e,t,(0,s.A)((0,s.A)({},i),{},{platform:a}))};var Vc="undefined"!==typeof document?e.useLayoutEffect:function(){};function Hc(e,t){if(e===t)return!0;if(typeof e!==typeof t)return!1;if("function"===typeof e&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&"object"===typeof e){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;0!==r--;)if(!Hc(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;0!==r--;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;0!==r--;){const n=i[r];if(("_owner"!==n||!e.$$typeof)&&!Hc(e[n],t[n]))return!1}return!0}return e!==e&&t!==t}function Wc(e){if("undefined"===typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function qc(e,t){const n=Wc(e);return Math.round(t*n)/n}function Gc(t){const n=e.useRef(t);return Vc(()=>{n.current=t}),n}const Kc=(e,t)=>(0,s.A)((0,s.A)({},Oc(e)),{},{options:[e,t]}),Yc=(e,t)=>(0,s.A)((0,s.A)({},Lc(e)),{},{options:[e,t]}),Xc=(e,t)=>(0,s.A)((0,s.A)({},Uc(e)),{},{options:[e,t]}),Qc=(e,t)=>(0,s.A)((0,s.A)({},Mc(e)),{},{options:[e,t]}),Jc=(e,t)=>(0,s.A)((0,s.A)({},Fc(e)),{},{options:[e,t]}),Zc=(e,t)=>(0,s.A)((0,s.A)({},jc(e)),{},{options:[e,t]}),$c=(e,t)=>(0,s.A)((0,s.A)({},(e=>({name:"arrow",options:e,fn(t){const{element:n,padding:r}="function"===typeof e?e(t):e;return n&&(i=n,{}.hasOwnProperty.call(i,"current"))?null!=n.current?Bc({element:n.current,padding:r}).fn(t):{}:n?Bc({element:n,padding:r}).fn(t):{};var i}}))(e)),{},{options:[e,t]}),eu=["children","width","height"];var tu=e.forwardRef((e,t)=>{const{children:n,width:r=10,height:a=5}=e,o=(0,i.A)(e,eu);return(0,In.jsx)(lr.svg,(0,s.A)((0,s.A)({},o),{},{ref:t,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:(0,In.jsx)("polygon",{points:"0,0 30,0 15,10"})}))});tu.displayName="Arrow";var nu=tu;function ru(t){const[n,r]=e.useState(void 0);return Rr(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const e=new ResizeObserver(e=>{if(!Array.isArray(e))return;if(!e.length)return;const n=e[0];let i,s;if("borderBoxSize"in n){const e=n.borderBoxSize,t=Array.isArray(e)?e[0]:e;i=t.inlineSize,s=t.blockSize}else i=t.offsetWidth,s=t.offsetHeight;r({width:i,height:s})});return e.observe(t,{box:"border-box"}),()=>e.unobserve(t)}r(void 0)},[t]),n}const iu=["__scopePopper","virtualRef"],su=["__scopePopper","side","sideOffset","align","alignOffset","arrowPadding","avoidCollisions","collisionBoundary","collisionPadding","sticky","hideWhenDetached","updatePositionStrategy","onPlaced"],au=["__scopePopper"];var ou="Popper",[lu,cu]=br(ou),[uu,du]=lu(ou),hu=t=>{const{__scopePopper:n,children:r}=t,[i,s]=e.useState(null);return(0,In.jsx)(uu,{scope:n,anchor:i,onAnchorChange:s,children:r})};hu.displayName=ou;var fu="PopperAnchor",pu=e.forwardRef((t,n)=>{const{__scopePopper:r,virtualRef:a}=t,o=(0,i.A)(t,iu),l=du(fu,r),c=e.useRef(null),u=Hn(n,c),d=e.useRef(null);return e.useEffect(()=>{const e=d.current;d.current=(null===a||void 0===a?void 0:a.current)||c.current,e!==d.current&&l.onAnchorChange(d.current)}),a?null:(0,In.jsx)(lr.div,(0,s.A)((0,s.A)({},o),{},{ref:u}))});pu.displayName=fu;var mu="PopperContent",[gu,yu]=lu(mu),vu=e.forwardRef((t,n)=>{var r,a,o,l,c,u,d,h;const{__scopePopper:f,side:p="bottom",sideOffset:m=0,align:g="center",alignOffset:y=0,arrowPadding:v=0,avoidCollisions:w=!0,collisionBoundary:b=[],collisionPadding:x=0,sticky:S="partial",hideWhenDetached:A=!1,updatePositionStrategy:E="optimized",onPlaced:N}=t,C=(0,i.A)(t,su),_=du(mu,f),[T,I]=e.useState(null),k=Hn(n,e=>I(e)),[P,R]=e.useState(null),D=ru(P),O=null!==(r=null===D||void 0===D?void 0:D.width)&&void 0!==r?r:0,L=null!==(a=null===D||void 0===D?void 0:D.height)&&void 0!==a?a:0,M=p+("center"!==g?"-"+g:""),F="number"===typeof x?x:(0,s.A)({top:0,right:0,bottom:0,left:0},x),j=Array.isArray(b)?b:[b],B=j.length>0,U={padding:F,boundary:j.filter(Su),altBoundary:B},{refs:z,floatingStyles:V,placement:H,isPositioned:W,middlewareData:q}=function(t){void 0===t&&(t={});const{placement:n="bottom",strategy:r="absolute",middleware:i=[],platform:a,elements:{reference:o,floating:l}={},transform:c=!0,whileElementsMounted:u,open:d}=t,[h,f]=e.useState({x:0,y:0,strategy:r,placement:n,middlewareData:{},isPositioned:!1}),[p,m]=e.useState(i);Hc(p,i)||m(i);const[g,y]=e.useState(null),[v,w]=e.useState(null),b=e.useCallback(e=>{e!==E.current&&(E.current=e,y(e))},[]),x=e.useCallback(e=>{e!==N.current&&(N.current=e,w(e))},[]),S=o||g,A=l||v,E=e.useRef(null),N=e.useRef(null),C=e.useRef(h),_=null!=u,T=Gc(u),I=Gc(a),k=Gc(d),P=e.useCallback(()=>{if(!E.current||!N.current)return;const e={placement:n,strategy:r,middleware:p};I.current&&(e.platform=I.current),zc(E.current,N.current,e).then(e=>{const t=(0,s.A)((0,s.A)({},e),{},{isPositioned:!1!==k.current});R.current&&!Hc(C.current,t)&&(C.current=t,ar.flushSync(()=>{f(t)}))})},[p,n,r,I,k]);Vc(()=>{!1===d&&C.current.isPositioned&&(C.current.isPositioned=!1,f(e=>(0,s.A)((0,s.A)({},e),{},{isPositioned:!1})))},[d]);const R=e.useRef(!1);Vc(()=>(R.current=!0,()=>{R.current=!1}),[]),Vc(()=>{if(S&&(E.current=S),A&&(N.current=A),S&&A){if(T.current)return T.current(S,A,P);P()}},[S,A,P,T,_]);const D=e.useMemo(()=>({reference:E,floating:N,setReference:b,setFloating:x}),[b,x]),O=e.useMemo(()=>({reference:S,floating:A}),[S,A]),L=e.useMemo(()=>{const e={position:r,left:0,top:0};if(!O.floating)return e;const t=qc(O.floating,h.x),n=qc(O.floating,h.y);return c?(0,s.A)((0,s.A)({},e),{},{transform:"translate("+t+"px, "+n+"px)"},Wc(O.floating)>=1.5&&{willChange:"transform"}):{position:r,left:t,top:n}},[r,c,O.floating,h.x,h.y]);return e.useMemo(()=>(0,s.A)((0,s.A)({},h),{},{update:P,refs:D,elements:O,floatingStyles:L}),[h,P,D,O,L])}({strategy:"fixed",placement:M,whileElementsMounted:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Dc(...t,{animationFrame:"always"===E})},elements:{reference:_.anchor},middleware:[Kc({mainAxis:m+L,alignmentAxis:y}),w&&Yc((0,s.A)({mainAxis:!0,crossAxis:!1,limiter:"partial"===S?Xc():void 0},U)),w&&Qc((0,s.A)({},U)),Jc((0,s.A)((0,s.A)({},U),{},{apply:e=>{let{elements:t,rects:n,availableWidth:r,availableHeight:i}=e;const{width:s,height:a}=n.reference,o=t.floating.style;o.setProperty("--radix-popper-available-width","".concat(r,"px")),o.setProperty("--radix-popper-available-height","".concat(i,"px")),o.setProperty("--radix-popper-anchor-width","".concat(s,"px")),o.setProperty("--radix-popper-anchor-height","".concat(a,"px"))}})),P&&$c({element:P,padding:v}),Au({arrowWidth:O,arrowHeight:L}),A&&Zc((0,s.A)({strategy:"referenceHidden"},U))]}),[G,K]=Eu(H),Y=Mr(N);Rr(()=>{W&&(null===Y||void 0===Y||Y())},[W,Y]);const X=null===(o=q.arrow)||void 0===o?void 0:o.x,Q=null===(l=q.arrow)||void 0===l?void 0:l.y,J=0!==(null===(c=q.arrow)||void 0===c?void 0:c.centerOffset),[Z,$]=e.useState();return Rr(()=>{T&&$(window.getComputedStyle(T).zIndex)},[T]),(0,In.jsx)("div",{ref:z.setFloating,"data-radix-popper-content-wrapper":"",style:(0,s.A)((0,s.A)({},V),{},{transform:W?V.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Z,"--radix-popper-transform-origin":[null===(u=q.transformOrigin)||void 0===u?void 0:u.x,null===(d=q.transformOrigin)||void 0===d?void 0:d.y].join(" ")},(null===(h=q.hide)||void 0===h?void 0:h.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}),dir:t.dir,children:(0,In.jsx)(gu,{scope:f,placedSide:G,onArrowChange:R,arrowX:X,arrowY:Q,shouldHideArrow:J,children:(0,In.jsx)(lr.div,(0,s.A)((0,s.A)({"data-side":G,"data-align":K},C),{},{ref:k,style:(0,s.A)((0,s.A)({},C.style),{},{animation:W?void 0:"none"})}))})})});vu.displayName=mu;var wu="PopperArrow",bu={top:"bottom",right:"left",bottom:"top",left:"right"},xu=e.forwardRef(function(e,t){const{__scopePopper:n}=e,r=(0,i.A)(e,au),a=yu(wu,n),o=bu[a.placedSide];return(0,In.jsx)("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:(0,In.jsx)(nu,(0,s.A)((0,s.A)({},r),{},{ref:t,style:(0,s.A)((0,s.A)({},r.style),{},{display:"block"})}))})});function Su(e){return null!==e}xu.displayName=wu;var Au=e=>({name:"transformOrigin",options:e,fn(t){var n,r,i,s,a;const{placement:o,rects:l,middlewareData:c}=t,u=0!==(null===(n=c.arrow)||void 0===n?void 0:n.centerOffset),d=u?0:e.arrowWidth,h=u?0:e.arrowHeight,[f,p]=Eu(o),m={start:"0%",center:"50%",end:"100%"}[p],g=(null!==(r=null===(i=c.arrow)||void 0===i?void 0:i.x)&&void 0!==r?r:0)+d/2,y=(null!==(s=null===(a=c.arrow)||void 0===a?void 0:a.y)&&void 0!==s?s:0)+h/2;let v="",w="";return"bottom"===f?(v=u?m:"".concat(g,"px"),w="".concat(-h,"px")):"top"===f?(v=u?m:"".concat(g,"px"),w="".concat(l.floating.height+h,"px")):"right"===f?(v="".concat(-h,"px"),w=u?m:"".concat(y,"px")):"left"===f&&(v="".concat(l.floating.width+h,"px"),w=u?m:"".concat(y,"px")),{data:{x:v,y:w}}}});function Eu(e){const[t,n="center"]=e.split("-");return[t,n]}var Nu=hu,Cu=pu,_u=vu,Tu=xu;function Iu(t){const n=e.useRef({value:t,previous:t});return e.useMemo(()=>(n.current.value!==t&&(n.current.previous=n.current.value,n.current.value=t),n.current.previous),[t])}var ku=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Pu=e.forwardRef((e,t)=>(0,In.jsx)(lr.span,(0,s.A)((0,s.A)({},e),{},{ref:t,style:(0,s.A)((0,s.A)({},ku),e.style)})));Pu.displayName="VisuallyHidden";const Ru=["__scopeSelect","disabled"],Du=["__scopeSelect","className","style","children","placeholder"],Ou=["__scopeSelect","children"],Lu=["__scopeSelect","position","onCloseAutoFocus","onEscapeKeyDown","onPointerDownOutside","side","sideOffset","align","alignOffset","arrowPadding","collisionBoundary","collisionPadding","sticky","hideWhenDetached","avoidCollisions"],Mu=["__scopeSelect","onPlaced"],Fu=["__scopeSelect","align","collisionPadding"],ju=["__scopeSelect","nonce"],Bu=["__scopeSelect"],Uu=["__scopeSelect"],zu=["__scopeSelect","value","disabled","textValue"],Vu=["__scopeSelect","className","style"],Hu=["__scopeSelect"],Wu=["__scopeSelect","onAutoScroll"],qu=["__scopeSelect"],Gu=["__scopeSelect"],Ku=["__scopeSelect","value"];var Yu=[" ","Enter","ArrowUp","ArrowDown"],Xu=[" ","Enter"],Qu="Select",[Ju,Zu,$u]=Tr(Qu),[ed,td]=br(Qu,[$u,cu]),nd=cu(),[rd,id]=ed(Qu),[sd,ad]=ed(Qu),od=t=>{const{__scopeSelect:n,children:r,open:i,defaultOpen:a,onOpenChange:o,value:l,defaultValue:c,onValueChange:u,dir:d,name:h,autoComplete:f,disabled:p,required:m,form:g}=t,y=nd(n),[v,w]=e.useState(null),[b,x]=e.useState(null),[S,A]=e.useState(!1),E=Ur(d),[N,C]=jr({prop:i,defaultProp:null!==a&&void 0!==a&&a,onChange:o,caller:Qu}),[_,T]=jr({prop:l,defaultProp:c,onChange:u,caller:Qu}),I=e.useRef(null),k=!v||(g||!!v.closest("form")),[P,R]=e.useState(new Set),D=Array.from(P).map(e=>e.props.value).join(";");return(0,In.jsx)(Nu,(0,s.A)((0,s.A)({},y),{},{children:(0,In.jsxs)(rd,{required:m,scope:n,trigger:v,onTriggerChange:w,valueNode:b,onValueNodeChange:x,valueNodeHasChildren:S,onValueNodeHasChildrenChange:A,contentId:Lr(),value:_,onValueChange:T,open:N,onOpenChange:C,dir:E,triggerPointerDownPosRef:I,disabled:p,children:[(0,In.jsx)(Ju.Provider,{scope:n,children:(0,In.jsx)(sd,{scope:t.__scopeSelect,onNativeOptionAdd:e.useCallback(e=>{R(t=>new Set(t).add(e))},[]),onNativeOptionRemove:e.useCallback(e=>{R(t=>{const n=new Set(t);return n.delete(e),n})},[]),children:r})}),k?(0,In.jsxs)(Xd,{"aria-hidden":!0,required:m,tabIndex:-1,name:h,autoComplete:f,value:_,onChange:e=>T(e.target.value),disabled:p,form:g,children:[void 0===_?(0,In.jsx)("option",{value:""}):null,Array.from(P)]},D):null]})}))};od.displayName=Qu;var ld="SelectTrigger",cd=e.forwardRef((t,n)=>{const{__scopeSelect:r,disabled:a=!1}=t,o=(0,i.A)(t,Ru),l=nd(r),c=id(ld,r),u=c.disabled||a,d=Hn(n,c.onTriggerChange),h=Zu(r),f=e.useRef("touch"),[p,m,g]=Jd(e=>{const t=h().filter(e=>!e.disabled),n=t.find(e=>e.value===c.value),r=Zd(t,e,n);void 0!==r&&c.onValueChange(r.value)}),y=e=>{u||(c.onOpenChange(!0),g()),e&&(c.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return(0,In.jsx)(Cu,(0,s.A)((0,s.A)({asChild:!0},l),{},{children:(0,In.jsx)(lr.button,(0,s.A)((0,s.A)({type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":Qd(c.value)?"":void 0},o),{},{ref:d,onClick:yr(o.onClick,e=>{e.currentTarget.focus(),"mouse"!==f.current&&y(e)}),onPointerDown:yr(o.onPointerDown,e=>{f.current=e.pointerType;const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(y(e),e.preventDefault())}),onKeyDown:yr(o.onKeyDown,e=>{const t=""!==p.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||m(e.key),t&&" "===e.key||Yu.includes(e.key)&&(y(),e.preventDefault())})}))}))});cd.displayName=ld;var ud="SelectValue",dd=e.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,children:o,placeholder:l=""}=e,c=(0,i.A)(e,Du),u=id(ud,n),{onValueNodeHasChildrenChange:d}=u,h=void 0!==o,f=Hn(t,u.onValueNodeChange);return Rr(()=>{d(h)},[d,h]),(0,In.jsx)(lr.span,(0,s.A)((0,s.A)({},c),{},{ref:f,style:{pointerEvents:"none"},children:Qd(u.value)?(0,In.jsx)(In.Fragment,{children:l}):o}))});dd.displayName=ud;var hd=e.forwardRef((e,t)=>{const{__scopeSelect:n,children:r}=e,a=(0,i.A)(e,Ou);return(0,In.jsx)(lr.span,(0,s.A)((0,s.A)({"aria-hidden":!0},a),{},{ref:t,children:r||"\u25bc"}))});hd.displayName="SelectIcon";var fd=e=>(0,In.jsx)(ls,(0,s.A)({asChild:!0},e));fd.displayName="SelectPortal";var pd="SelectContent",md=e.forwardRef((t,n)=>{const r=id(pd,t.__scopeSelect),[i,a]=e.useState();if(Rr(()=>{a(new DocumentFragment)},[]),!r.open){const e=i;return e?ar.createPortal((0,In.jsx)(yd,{scope:t.__scopeSelect,children:(0,In.jsx)(Ju.Slot,{scope:t.__scopeSelect,children:(0,In.jsx)("div",{children:t.children})})}),e):null}return(0,In.jsx)(bd,(0,s.A)((0,s.A)({},t),{},{ref:n}))});md.displayName=pd;var gd=10,[yd,vd]=ed(pd),wd=Gn("SelectContent.RemoveScroll"),bd=e.forwardRef((t,n)=>{const{__scopeSelect:r,position:a="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:l,onPointerDownOutside:c,side:u,sideOffset:d,align:h,alignOffset:f,arrowPadding:p,collisionBoundary:m,collisionPadding:g,sticky:y,hideWhenDetached:v,avoidCollisions:w}=t,b=(0,i.A)(t,Lu),x=id(pd,r),[S,A]=e.useState(null),[E,N]=e.useState(null),C=Hn(n,e=>A(e)),[_,T]=e.useState(null),[I,k]=e.useState(null),P=Zu(r),[R,D]=e.useState(!1),O=e.useRef(!1);e.useEffect(()=>{if(S)return ua(S)},[S]),us();const L=e.useCallback(e=>{const[t,...n]=P().map(e=>e.ref.current),[r]=n.slice(-1),i=document.activeElement;for(const s of e){if(s===i)return;if(null===s||void 0===s||s.scrollIntoView({block:"nearest"}),s===t&&E&&(E.scrollTop=0),s===r&&E&&(E.scrollTop=E.scrollHeight),null===s||void 0===s||s.focus(),document.activeElement!==i)return}},[P,E]),M=e.useCallback(()=>L([_,S]),[L,_,S]);e.useEffect(()=>{R&&M()},[R,M]);const{onOpenChange:F,triggerPointerDownPosRef:j}=x;e.useEffect(()=>{if(S){let e={x:0,y:0};const t=t=>{var n,r,i,s;e={x:Math.abs(Math.round(t.pageX)-(null!==(n=null===(r=j.current)||void 0===r?void 0:r.x)&&void 0!==n?n:0)),y:Math.abs(Math.round(t.pageY)-(null!==(i=null===(s=j.current)||void 0===s?void 0:s.y)&&void 0!==i?i:0))}},n=n=>{e.x<=10&&e.y<=10?n.preventDefault():S.contains(n.target)||F(!1),document.removeEventListener("pointermove",t),j.current=null};return null!==j.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",n,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",n,{capture:!0})}}},[S,F,j]),e.useEffect(()=>{const e=()=>F(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}},[F]);const[B,U]=Jd(e=>{const t=P().filter(e=>!e.disabled),n=t.find(e=>e.ref.current===document.activeElement),r=Zd(t,e,n);r&&setTimeout(()=>r.ref.current.focus())}),z=e.useCallback((e,t,n)=>{const r=!O.current&&!n;(void 0!==x.value&&x.value===t||r)&&(T(e),r&&(O.current=!0))},[x.value]),V=e.useCallback(()=>null===S||void 0===S?void 0:S.focus(),[S]),H=e.useCallback((e,t,n)=>{const r=!O.current&&!n;(void 0!==x.value&&x.value===t||r)&&k(e)},[x.value]),W="popper"===a?Sd:xd,q=W===Sd?{side:u,sideOffset:d,align:h,alignOffset:f,arrowPadding:p,collisionBoundary:m,collisionPadding:g,sticky:y,hideWhenDetached:v,avoidCollisions:w}:{};return(0,In.jsx)(yd,{scope:r,content:S,viewport:E,onViewportChange:N,itemRefCallback:z,selectedItem:_,onItemLeave:V,itemTextRefCallback:H,focusSelectedItem:M,selectedItemText:I,position:a,isPositioned:R,searchRef:B,children:(0,In.jsx)(na,{as:wd,allowPinchZoom:!0,children:(0,In.jsx)(es,{asChild:!0,trapped:x.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:yr(o,e=>{var t;null===(t=x.trigger)||void 0===t||t.focus({preventScroll:!0}),e.preventDefault()}),children:(0,In.jsx)(Wi,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:(0,In.jsx)(W,(0,s.A)((0,s.A)((0,s.A)({role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:e=>e.preventDefault()},b),q),{},{onPlaced:()=>D(!0),ref:C,style:(0,s.A)({display:"flex",flexDirection:"column",outline:"none"},b.style),onKeyDown:yr(b.onKeyDown,e=>{const t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||U(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=P().filter(e=>!e.disabled).map(e=>e.ref.current);if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){const n=e.target,r=t.indexOf(n);t=t.slice(r+1)}setTimeout(()=>L(t)),e.preventDefault()}})}))})})})})});bd.displayName="SelectContentImpl";var xd=e.forwardRef((t,n)=>{const{__scopeSelect:r,onPlaced:a}=t,o=(0,i.A)(t,Mu),l=id(pd,r),c=vd(pd,r),[u,d]=e.useState(null),[h,f]=e.useState(null),p=Hn(n,e=>f(e)),m=Zu(r),g=e.useRef(!1),y=e.useRef(!0),{viewport:v,selectedItem:w,selectedItemText:b,focusSelectedItem:x}=c,S=e.useCallback(()=>{if(l.trigger&&l.valueNode&&u&&h&&v&&w&&b){const e=l.trigger.getBoundingClientRect(),t=h.getBoundingClientRect(),n=l.valueNode.getBoundingClientRect(),r=b.getBoundingClientRect();if("rtl"!==l.dir){const i=r.left-t.left,s=n.left-i,a=e.left-s,o=e.width+a,l=Math.max(o,t.width),c=window.innerWidth-gd,d=ol(s,[gd,Math.max(gd,c-l)]);u.style.minWidth=o+"px",u.style.left=d+"px"}else{const i=t.right-r.right,s=window.innerWidth-n.right-i,a=window.innerWidth-e.right-s,o=e.width+a,l=Math.max(o,t.width),c=window.innerWidth-gd,d=ol(s,[gd,Math.max(gd,c-l)]);u.style.minWidth=o+"px",u.style.right=d+"px"}const i=m(),s=window.innerHeight-2*gd,o=v.scrollHeight,c=window.getComputedStyle(h),d=parseInt(c.borderTopWidth,10),f=parseInt(c.paddingTop,10),p=parseInt(c.borderBottomWidth,10),y=d+f+o+parseInt(c.paddingBottom,10)+p,x=Math.min(5*w.offsetHeight,y),S=window.getComputedStyle(v),A=parseInt(S.paddingTop,10),E=parseInt(S.paddingBottom,10),N=e.top+e.height/2-gd,C=s-N,_=w.offsetHeight/2,T=d+f+(w.offsetTop+_),I=y-T;if(T<=N){const e=i.length>0&&w===i[i.length-1].ref.current;u.style.bottom="0px";const t=h.clientHeight-v.offsetTop-v.offsetHeight,n=T+Math.max(C,_+(e?E:0)+t+p);u.style.height=n+"px"}else{const e=i.length>0&&w===i[0].ref.current;u.style.top="0px";const t=Math.max(N,d+v.offsetTop+(e?A:0)+_)+I;u.style.height=t+"px",v.scrollTop=T-N+v.offsetTop}u.style.margin="".concat(gd,"px 0"),u.style.minHeight=x+"px",u.style.maxHeight=s+"px",null===a||void 0===a||a(),requestAnimationFrame(()=>g.current=!0)}},[m,l.trigger,l.valueNode,u,h,v,w,b,l.dir,a]);Rr(()=>S(),[S]);const[A,E]=e.useState();Rr(()=>{h&&E(window.getComputedStyle(h).zIndex)},[h]);const N=e.useCallback(e=>{e&&!0===y.current&&(S(),null===x||void 0===x||x(),y.current=!1)},[S,x]);return(0,In.jsx)(Ad,{scope:r,contentWrapper:u,shouldExpandOnScrollRef:g,onScrollButtonChange:N,children:(0,In.jsx)("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:A},children:(0,In.jsx)(lr.div,(0,s.A)((0,s.A)({},o),{},{ref:p,style:(0,s.A)({boxSizing:"border-box",maxHeight:"100%"},o.style)}))})})});xd.displayName="SelectItemAlignedPosition";var Sd=e.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:a=gd}=e,o=(0,i.A)(e,Fu),l=nd(n);return(0,In.jsx)(_u,(0,s.A)((0,s.A)((0,s.A)({},l),o),{},{ref:t,align:r,collisionPadding:a,style:(0,s.A)((0,s.A)({boxSizing:"border-box"},o.style),{"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"})}))});Sd.displayName="SelectPopperPosition";var[Ad,Ed]=ed(pd,{}),Nd="SelectViewport",Cd=e.forwardRef((t,n)=>{const{__scopeSelect:r,nonce:a}=t,o=(0,i.A)(t,ju),l=vd(Nd,r),c=Ed(Nd,r),u=Hn(n,l.onViewportChange),d=e.useRef(0);return(0,In.jsxs)(In.Fragment,{children:[(0,In.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),(0,In.jsx)(Ju.Slot,{scope:r,children:(0,In.jsx)(lr.div,(0,s.A)((0,s.A)({"data-radix-select-viewport":"",role:"presentation"},o),{},{ref:u,style:(0,s.A)({position:"relative",flex:1,overflow:"hidden auto"},o.style),onScroll:yr(o.onScroll,e=>{const t=e.currentTarget,{contentWrapper:n,shouldExpandOnScrollRef:r}=c;if(null!==r&&void 0!==r&&r.current&&n){const e=Math.abs(d.current-t.scrollTop);if(e>0){const r=window.innerHeight-2*gd,i=parseFloat(n.style.minHeight),s=parseFloat(n.style.height),a=Math.max(i,s);if(a<r){const i=a+e,s=Math.min(r,i),o=i-s;n.style.height=s+"px","0px"===n.style.bottom&&(t.scrollTop=o>0?o:0,n.style.justifyContent="flex-end")}}}d.current=t.scrollTop})}))})]})});Cd.displayName=Nd;var _d="SelectGroup",[Td,Id]=ed(_d),kd=e.forwardRef((e,t)=>{const{__scopeSelect:n}=e,r=(0,i.A)(e,Bu),a=Lr();return(0,In.jsx)(Td,{scope:n,id:a,children:(0,In.jsx)(lr.div,(0,s.A)((0,s.A)({role:"group","aria-labelledby":a},r),{},{ref:t}))})});kd.displayName=_d;var Pd="SelectLabel",Rd=e.forwardRef((e,t)=>{const{__scopeSelect:n}=e,r=(0,i.A)(e,Uu),a=Id(Pd,n);return(0,In.jsx)(lr.div,(0,s.A)((0,s.A)({id:a.id},r),{},{ref:t}))});Rd.displayName=Pd;var Dd="SelectItem",[Od,Ld]=ed(Dd),Md=e.forwardRef((t,n)=>{const{__scopeSelect:r,value:a,disabled:o=!1,textValue:l}=t,c=(0,i.A)(t,zu),u=id(Dd,r),d=vd(Dd,r),h=u.value===a,[f,p]=e.useState(null!==l&&void 0!==l?l:""),[m,g]=e.useState(!1),y=Hn(n,e=>{var t;return null===(t=d.itemRefCallback)||void 0===t?void 0:t.call(d,e,a,o)}),v=Lr(),w=e.useRef("touch"),b=()=>{o||(u.onValueChange(a),u.onOpenChange(!1))};if(""===a)throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return(0,In.jsx)(Od,{scope:r,value:a,disabled:o,textId:v,isSelected:h,onItemTextChange:e.useCallback(e=>{p(t=>{var n;return t||(null!==(n=null===e||void 0===e?void 0:e.textContent)&&void 0!==n?n:"").trim()})},[]),children:(0,In.jsx)(Ju.ItemSlot,{scope:r,value:a,disabled:o,textValue:f,children:(0,In.jsx)(lr.div,(0,s.A)((0,s.A)({role:"option","aria-labelledby":v,"data-highlighted":m?"":void 0,"aria-selected":h&&m,"data-state":h?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1},c),{},{ref:y,onFocus:yr(c.onFocus,()=>g(!0)),onBlur:yr(c.onBlur,()=>g(!1)),onClick:yr(c.onClick,()=>{"mouse"!==w.current&&b()}),onPointerUp:yr(c.onPointerUp,()=>{"mouse"===w.current&&b()}),onPointerDown:yr(c.onPointerDown,e=>{w.current=e.pointerType}),onPointerMove:yr(c.onPointerMove,e=>{var t;(w.current=e.pointerType,o)?null===(t=d.onItemLeave)||void 0===t||t.call(d):"mouse"===w.current&&e.currentTarget.focus({preventScroll:!0})}),onPointerLeave:yr(c.onPointerLeave,e=>{var t;e.currentTarget===document.activeElement&&(null===(t=d.onItemLeave)||void 0===t||t.call(d))}),onKeyDown:yr(c.onKeyDown,e=>{var t;""!==(null===(t=d.searchRef)||void 0===t?void 0:t.current)&&" "===e.key||(Xu.includes(e.key)&&b()," "===e.key&&e.preventDefault())})}))})})});Md.displayName=Dd;var Fd="SelectItemText",jd=e.forwardRef((t,n)=>{const{__scopeSelect:r,className:a,style:o}=t,l=(0,i.A)(t,Vu),c=id(Fd,r),u=vd(Fd,r),d=Ld(Fd,r),h=ad(Fd,r),[f,p]=e.useState(null),m=Hn(n,e=>p(e),d.onItemTextChange,e=>{var t;return null===(t=u.itemTextRefCallback)||void 0===t?void 0:t.call(u,e,d.value,d.disabled)}),g=null===f||void 0===f?void 0:f.textContent,y=e.useMemo(()=>(0,In.jsx)("option",{value:d.value,disabled:d.disabled,children:g},d.value),[d.disabled,d.value,g]),{onNativeOptionAdd:v,onNativeOptionRemove:w}=h;return Rr(()=>(v(y),()=>w(y)),[v,w,y]),(0,In.jsxs)(In.Fragment,{children:[(0,In.jsx)(lr.span,(0,s.A)((0,s.A)({id:d.textId},l),{},{ref:m})),d.isSelected&&c.valueNode&&!c.valueNodeHasChildren?ar.createPortal(l.children,c.valueNode):null]})});jd.displayName=Fd;var Bd="SelectItemIndicator",Ud=e.forwardRef((e,t)=>{const{__scopeSelect:n}=e,r=(0,i.A)(e,Hu);return Ld(Bd,n).isSelected?(0,In.jsx)(lr.span,(0,s.A)((0,s.A)({"aria-hidden":!0},r),{},{ref:t})):null});Ud.displayName=Bd;var zd="SelectScrollUpButton",Vd=e.forwardRef((t,n)=>{const r=vd(zd,t.__scopeSelect),i=Ed(zd,t.__scopeSelect),[a,o]=e.useState(!1),l=Hn(n,i.onScrollButtonChange);return Rr(()=>{if(r.viewport&&r.isPositioned){let e=function(){const e=t.scrollTop>0;o(e)};const t=r.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[r.viewport,r.isPositioned]),a?(0,In.jsx)(qd,(0,s.A)((0,s.A)({},t),{},{ref:l,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=r;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}})):null});Vd.displayName=zd;var Hd="SelectScrollDownButton",Wd=e.forwardRef((t,n)=>{const r=vd(Hd,t.__scopeSelect),i=Ed(Hd,t.__scopeSelect),[a,o]=e.useState(!1),l=Hn(n,i.onScrollButtonChange);return Rr(()=>{if(r.viewport&&r.isPositioned){let e=function(){const e=t.scrollHeight-t.clientHeight,n=Math.ceil(t.scrollTop)<e;o(n)};const t=r.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[r.viewport,r.isPositioned]),a?(0,In.jsx)(qd,(0,s.A)((0,s.A)({},t),{},{ref:l,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=r;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}})):null});Wd.displayName=Hd;var qd=e.forwardRef((t,n)=>{const{__scopeSelect:r,onAutoScroll:a}=t,o=(0,i.A)(t,Wu),l=vd("SelectScrollButton",r),c=e.useRef(null),u=Zu(r),d=e.useCallback(()=>{null!==c.current&&(window.clearInterval(c.current),c.current=null)},[]);return e.useEffect(()=>()=>d(),[d]),Rr(()=>{var e;const t=u().find(e=>e.ref.current===document.activeElement);null===t||void 0===t||null===(e=t.ref.current)||void 0===e||e.scrollIntoView({block:"nearest"})},[u]),(0,In.jsx)(lr.div,(0,s.A)((0,s.A)({"aria-hidden":!0},o),{},{ref:n,style:(0,s.A)({flexShrink:0},o.style),onPointerDown:yr(o.onPointerDown,()=>{null===c.current&&(c.current=window.setInterval(a,50))}),onPointerMove:yr(o.onPointerMove,()=>{var e;null===(e=l.onItemLeave)||void 0===e||e.call(l),null===c.current&&(c.current=window.setInterval(a,50))}),onPointerLeave:yr(o.onPointerLeave,()=>{d()})}))}),Gd=e.forwardRef((e,t)=>{const{__scopeSelect:n}=e,r=(0,i.A)(e,qu);return(0,In.jsx)(lr.div,(0,s.A)((0,s.A)({"aria-hidden":!0},r),{},{ref:t}))});Gd.displayName="SelectSeparator";var Kd="SelectArrow",Yd=e.forwardRef((e,t)=>{const{__scopeSelect:n}=e,r=(0,i.A)(e,Gu),a=nd(n),o=id(Kd,n),l=vd(Kd,n);return o.open&&"popper"===l.position?(0,In.jsx)(Tu,(0,s.A)((0,s.A)((0,s.A)({},a),r),{},{ref:t})):null});Yd.displayName=Kd;var Xd=e.forwardRef((t,n)=>{let{__scopeSelect:r,value:a}=t,o=(0,i.A)(t,Ku);const l=e.useRef(null),c=Hn(n,l),u=Iu(a);return e.useEffect(()=>{const e=l.current;if(!e)return;const t=window.HTMLSelectElement.prototype,n=Object.getOwnPropertyDescriptor(t,"value").set;if(u!==a&&n){const t=new Event("change",{bubbles:!0});n.call(e,a),e.dispatchEvent(t)}},[u,a]),(0,In.jsx)(lr.select,(0,s.A)((0,s.A)({},o),{},{style:(0,s.A)((0,s.A)({},ku),o.style),ref:c,defaultValue:a}))});function Qd(e){return""===e||void 0===e}function Jd(t){const n=Mr(t),r=e.useRef(""),i=e.useRef(0),s=e.useCallback(e=>{const t=r.current+e;n(t),function e(t){r.current=t,window.clearTimeout(i.current),""!==t&&(i.current=window.setTimeout(()=>e(""),1e3))}(t)},[n]),a=e.useCallback(()=>{r.current="",window.clearTimeout(i.current)},[]);return e.useEffect(()=>()=>window.clearTimeout(i.current),[]),[r,s,a]}function Zd(e,t,n){const r=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let s=(a=e,o=Math.max(i,0),a.map((e,t)=>a[(o+t)%a.length]));var a,o;1===r.length&&(s=s.filter(e=>e!==n));const l=s.find(e=>e.textValue.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}Xd.displayName="SelectBubbleInput";var $d=od,eh=cd,th=dd,nh=hd,rh=fd,ih=md,sh=Cd,ah=kd,oh=Rd,lh=Md,ch=jd,uh=Ud,dh=Vd,hh=Wd,fh=Gd;const ph=ho("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),mh=ho("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),gh=ho("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),yh=["className","children"],vh=["className"],wh=["className"],bh=["className","children","position"],xh=["className"],Sh=["className","children"],Ah=["className"],Eh=$d,Nh=ah,Ch=th,_h=e.forwardRef((e,t)=>{let{className:n,children:r}=e,a=(0,i.A)(e,yh);return(0,In.jsxs)(eh,(0,s.A)((0,s.A)({ref:t,className:Tn("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n)},a),{},{children:[r,(0,In.jsx)(nh,{asChild:!0,children:(0,In.jsx)(ph,{className:"h-4 w-4 opacity-50"})})]}))});_h.displayName=eh.displayName;const Th=e.forwardRef((e,t)=>{let{className:n}=e,r=(0,i.A)(e,vh);return(0,In.jsx)(dh,(0,s.A)((0,s.A)({ref:t,className:Tn("flex cursor-default items-center justify-center py-1",n)},r),{},{children:(0,In.jsx)(mh,{className:"h-4 w-4"})}))});Th.displayName=dh.displayName;const Ih=e.forwardRef((e,t)=>{let{className:n}=e,r=(0,i.A)(e,wh);return(0,In.jsx)(hh,(0,s.A)((0,s.A)({ref:t,className:Tn("flex cursor-default items-center justify-center py-1",n)},r),{},{children:(0,In.jsx)(ph,{className:"h-4 w-4"})}))});Ih.displayName=hh.displayName;const kh=e.forwardRef((e,t)=>{let{className:n,children:r,position:a="popper"}=e,o=(0,i.A)(e,bh);return(0,In.jsx)(rh,{children:(0,In.jsxs)(ih,(0,s.A)((0,s.A)({ref:t,className:Tn("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:a},o),{},{children:[(0,In.jsx)(Th,{}),(0,In.jsx)(sh,{className:Tn("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,In.jsx)(Ih,{})]}))})});kh.displayName=ih.displayName;e.forwardRef((e,t)=>{let{className:n}=e,r=(0,i.A)(e,xh);return(0,In.jsx)(oh,(0,s.A)({ref:t,className:Tn("px-2 py-1.5 text-sm font-semibold",n)},r))}).displayName=oh.displayName;const Ph=e.forwardRef((e,t)=>{let{className:n,children:r}=e,a=(0,i.A)(e,Sh);return(0,In.jsxs)(lh,(0,s.A)((0,s.A)({ref:t,className:Tn("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n)},a),{},{children:[(0,In.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,In.jsx)(uh,{children:(0,In.jsx)(gh,{className:"h-4 w-4"})})}),(0,In.jsx)(ch,{children:r})]}))});Ph.displayName=lh.displayName;e.forwardRef((e,t)=>{let{className:n}=e,r=(0,i.A)(e,Ah);return(0,In.jsx)(fh,(0,s.A)({ref:t,className:Tn("-mx-1 my-1 h-px bg-muted",n)},r))}).displayName=fh.displayName;const Rh=["decorative","orientation"];var Dh="horizontal",Oh=["horizontal","vertical"],Lh=e.forwardRef((e,t)=>{const{decorative:n,orientation:r=Dh}=e,a=(0,i.A)(e,Rh),o=function(e){return Oh.includes(e)}(r)?r:Dh,l=n?{role:"none"}:{"aria-orientation":"vertical"===o?o:void 0,role:"separator"};return(0,In.jsx)(lr.div,(0,s.A)((0,s.A)((0,s.A)({"data-orientation":o},l),a),{},{ref:t}))});Lh.displayName="Separator";var Mh=Lh;const Fh=["className","orientation","decorative"],jh=e.forwardRef((e,t)=>{let{className:n,orientation:r="horizontal",decorative:a=!0}=e,o=(0,i.A)(e,Fh);return(0,In.jsx)(Mh,(0,s.A)({ref:t,decorative:a,orientation:r,className:Tn("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",n)},o))});jh.displayName=Mh.displayName;const Bh=["__scopeScrollArea","type","dir","scrollHideDelay"],Uh=["__scopeScrollArea","children","nonce"],zh=["forceMount"],Vh=["forceMount"],Hh=["forceMount"],Wh=["forceMount"],qh=["orientation"],Gh=["sizes","onSizesChange"],Kh=["sizes","onSizesChange"],Yh=["__scopeScrollArea","sizes","hasThumb","onThumbChange","onThumbPointerUp","onThumbPointerDown","onThumbPositionChange","onDragScroll","onWheelScroll","onResize"],Xh=["forceMount"],Qh=["__scopeScrollArea","style"],Jh=["__scopeScrollArea"];var Zh="ScrollArea",[$h,ef]=br(Zh),[tf,nf]=$h(Zh),rf=e.forwardRef((t,n)=>{const{__scopeScrollArea:r,type:a="hover",dir:o,scrollHideDelay:l=600}=t,c=(0,i.A)(t,Bh),[u,d]=e.useState(null),[h,f]=e.useState(null),[p,m]=e.useState(null),[g,y]=e.useState(null),[v,w]=e.useState(null),[b,x]=e.useState(0),[S,A]=e.useState(0),[E,N]=e.useState(!1),[C,_]=e.useState(!1),T=Hn(n,e=>d(e)),I=Ur(o);return(0,In.jsx)(tf,{scope:r,type:a,dir:I,scrollHideDelay:l,scrollArea:u,viewport:h,onViewportChange:f,content:p,onContentChange:m,scrollbarX:g,onScrollbarXChange:y,scrollbarXEnabled:E,onScrollbarXEnabledChange:N,scrollbarY:v,onScrollbarYChange:w,scrollbarYEnabled:C,onScrollbarYEnabledChange:_,onCornerWidthChange:x,onCornerHeightChange:A,children:(0,In.jsx)(lr.div,(0,s.A)((0,s.A)({dir:I},c),{},{ref:T,style:(0,s.A)({position:"relative","--radix-scroll-area-corner-width":b+"px","--radix-scroll-area-corner-height":S+"px"},t.style)}))})});rf.displayName=Zh;var sf="ScrollAreaViewport",af=e.forwardRef((t,n)=>{const{__scopeScrollArea:r,children:a,nonce:o}=t,l=(0,i.A)(t,Uh),c=nf(sf,r),u=Hn(n,e.useRef(null),c.onViewportChange);return(0,In.jsxs)(In.Fragment,{children:[(0,In.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),(0,In.jsx)(lr.div,(0,s.A)((0,s.A)({"data-radix-scroll-area-viewport":""},l),{},{ref:u,style:(0,s.A)({overflowX:c.scrollbarXEnabled?"scroll":"hidden",overflowY:c.scrollbarYEnabled?"scroll":"hidden"},t.style),children:(0,In.jsx)("div",{ref:c.onContentChange,style:{minWidth:"100%",display:"table"},children:a})}))]})});af.displayName=sf;var of="ScrollAreaScrollbar",lf=e.forwardRef((t,n)=>{const{forceMount:r}=t,a=(0,i.A)(t,zh),o=nf(of,t.__scopeScrollArea),{onScrollbarXEnabledChange:l,onScrollbarYEnabledChange:c}=o,u="horizontal"===t.orientation;return e.useEffect(()=>(u?l(!0):c(!0),()=>{u?l(!1):c(!1)}),[u,l,c]),"hover"===o.type?(0,In.jsx)(cf,(0,s.A)((0,s.A)({},a),{},{ref:n,forceMount:r})):"scroll"===o.type?(0,In.jsx)(uf,(0,s.A)((0,s.A)({},a),{},{ref:n,forceMount:r})):"auto"===o.type?(0,In.jsx)(df,(0,s.A)((0,s.A)({},a),{},{ref:n,forceMount:r})):"always"===o.type?(0,In.jsx)(hf,(0,s.A)((0,s.A)({},a),{},{ref:n})):null});lf.displayName=of;var cf=e.forwardRef((t,n)=>{const{forceMount:r}=t,a=(0,i.A)(t,Vh),o=nf(of,t.__scopeScrollArea),[l,c]=e.useState(!1);return e.useEffect(()=>{const e=o.scrollArea;let t=0;if(e){const n=()=>{window.clearTimeout(t),c(!0)},r=()=>{t=window.setTimeout(()=>c(!1),o.scrollHideDelay)};return e.addEventListener("pointerenter",n),e.addEventListener("pointerleave",r),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",n),e.removeEventListener("pointerleave",r)}}},[o.scrollArea,o.scrollHideDelay]),(0,In.jsx)(oi,{present:r||l,children:(0,In.jsx)(df,(0,s.A)((0,s.A)({"data-state":l?"visible":"hidden"},a),{},{ref:n}))})}),uf=e.forwardRef((t,n)=>{const{forceMount:r}=t,a=(0,i.A)(t,Hh),o=nf(of,t.__scopeScrollArea),l="horizontal"===t.orientation,c=Pf(()=>d("SCROLL_END"),100),[u,d]=(h="hidden",f={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},e.useReducer((e,t)=>{const n=f[e][t];return null!==n&&void 0!==n?n:e},h));var h,f;return e.useEffect(()=>{if("idle"===u){const e=window.setTimeout(()=>d("HIDE"),o.scrollHideDelay);return()=>window.clearTimeout(e)}},[u,o.scrollHideDelay,d]),e.useEffect(()=>{const e=o.viewport,t=l?"scrollLeft":"scrollTop";if(e){let n=e[t];const r=()=>{const r=e[t];n!==r&&(d("SCROLL"),c()),n=r};return e.addEventListener("scroll",r),()=>e.removeEventListener("scroll",r)}},[o.viewport,l,d,c]),(0,In.jsx)(oi,{present:r||"hidden"!==u,children:(0,In.jsx)(hf,(0,s.A)((0,s.A)({"data-state":"hidden"===u?"hidden":"visible"},a),{},{ref:n,onPointerEnter:yr(t.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:yr(t.onPointerLeave,()=>d("POINTER_LEAVE"))}))})}),df=e.forwardRef((t,n)=>{const r=nf(of,t.__scopeScrollArea),{forceMount:a}=t,o=(0,i.A)(t,Wh),[l,c]=e.useState(!1),u="horizontal"===t.orientation,d=Pf(()=>{if(r.viewport){const e=r.viewport.offsetWidth<r.viewport.scrollWidth,t=r.viewport.offsetHeight<r.viewport.scrollHeight;c(u?e:t)}},10);return Rf(r.viewport,d),Rf(r.content,d),(0,In.jsx)(oi,{present:a||l,children:(0,In.jsx)(hf,(0,s.A)((0,s.A)({"data-state":l?"visible":"hidden"},o),{},{ref:n}))})}),hf=e.forwardRef((t,n)=>{const{orientation:r="vertical"}=t,a=(0,i.A)(t,qh),o=nf(of,t.__scopeScrollArea),l=e.useRef(null),c=e.useRef(0),[u,d]=e.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=Nf(u.viewport,u.content),f=(0,s.A)((0,s.A)({},a),{},{sizes:u,onSizesChange:d,hasThumb:Boolean(h>0&&h<1),onThumbChange:e=>l.current=e,onThumbPointerUp:()=>c.current=0,onThumbPointerDown:e=>c.current=e});function p(e,t){return function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"ltr";const i=Cf(n),s=i/2,a=t||s,o=i-a,l=n.scrollbar.paddingStart+a,c=n.scrollbar.size-n.scrollbar.paddingEnd-o,u=n.content-n.viewport,d="ltr"===r?[0,u]:[-1*u,0];return Tf([l,c],d)(e)}(e,c.current,u,t)}return"horizontal"===r?(0,In.jsx)(ff,(0,s.A)((0,s.A)({},f),{},{ref:n,onThumbPositionChange:()=>{if(o.viewport&&l.current){const e=_f(o.viewport.scrollLeft,u,o.dir);l.current.style.transform="translate3d(".concat(e,"px, 0, 0)")}},onWheelScroll:e=>{o.viewport&&(o.viewport.scrollLeft=e)},onDragScroll:e=>{o.viewport&&(o.viewport.scrollLeft=p(e,o.dir))}})):"vertical"===r?(0,In.jsx)(pf,(0,s.A)((0,s.A)({},f),{},{ref:n,onThumbPositionChange:()=>{if(o.viewport&&l.current){const e=_f(o.viewport.scrollTop,u);l.current.style.transform="translate3d(0, ".concat(e,"px, 0)")}},onWheelScroll:e=>{o.viewport&&(o.viewport.scrollTop=e)},onDragScroll:e=>{o.viewport&&(o.viewport.scrollTop=p(e))}})):null}),ff=e.forwardRef((t,n)=>{const{sizes:r,onSizesChange:a}=t,o=(0,i.A)(t,Gh),l=nf(of,t.__scopeScrollArea),[c,u]=e.useState(),d=e.useRef(null),h=Hn(n,d,l.onScrollbarXChange);return e.useEffect(()=>{d.current&&u(getComputedStyle(d.current))},[d]),(0,In.jsx)(yf,(0,s.A)((0,s.A)({"data-orientation":"horizontal"},o),{},{ref:h,sizes:r,style:(0,s.A)({bottom:0,left:"rtl"===l.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===l.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Cf(r)+"px"},t.style),onThumbPointerDown:e=>t.onThumbPointerDown(e.x),onDragScroll:e=>t.onDragScroll(e.x),onWheelScroll:(e,n)=>{if(l.viewport){const r=l.viewport.scrollLeft+e.deltaX;t.onWheelScroll(r),If(r,n)&&e.preventDefault()}},onResize:()=>{d.current&&l.viewport&&c&&a({content:l.viewport.scrollWidth,viewport:l.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:Ef(c.paddingLeft),paddingEnd:Ef(c.paddingRight)}})}}))}),pf=e.forwardRef((t,n)=>{const{sizes:r,onSizesChange:a}=t,o=(0,i.A)(t,Kh),l=nf(of,t.__scopeScrollArea),[c,u]=e.useState(),d=e.useRef(null),h=Hn(n,d,l.onScrollbarYChange);return e.useEffect(()=>{d.current&&u(getComputedStyle(d.current))},[d]),(0,In.jsx)(yf,(0,s.A)((0,s.A)({"data-orientation":"vertical"},o),{},{ref:h,sizes:r,style:(0,s.A)({top:0,right:"ltr"===l.dir?0:void 0,left:"rtl"===l.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Cf(r)+"px"},t.style),onThumbPointerDown:e=>t.onThumbPointerDown(e.y),onDragScroll:e=>t.onDragScroll(e.y),onWheelScroll:(e,n)=>{if(l.viewport){const r=l.viewport.scrollTop+e.deltaY;t.onWheelScroll(r),If(r,n)&&e.preventDefault()}},onResize:()=>{d.current&&l.viewport&&c&&a({content:l.viewport.scrollHeight,viewport:l.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:Ef(c.paddingTop),paddingEnd:Ef(c.paddingBottom)}})}}))}),[mf,gf]=$h(of),yf=e.forwardRef((t,n)=>{const{__scopeScrollArea:r,sizes:a,hasThumb:o,onThumbChange:l,onThumbPointerUp:c,onThumbPointerDown:u,onThumbPositionChange:d,onDragScroll:h,onWheelScroll:f,onResize:p}=t,m=(0,i.A)(t,Yh),g=nf(of,r),[y,v]=e.useState(null),w=Hn(n,e=>v(e)),b=e.useRef(null),x=e.useRef(""),S=g.viewport,A=a.content-a.viewport,E=Mr(f),N=Mr(d),C=Pf(p,10);function _(e){if(b.current){const t=e.clientX-b.current.left,n=e.clientY-b.current.top;h({x:t,y:n})}}return e.useEffect(()=>{const e=e=>{const t=e.target;(null===y||void 0===y?void 0:y.contains(t))&&E(e,A)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[S,y,A,E]),e.useEffect(N,[a,N]),Rf(y,C),Rf(g.content,C),(0,In.jsx)(mf,{scope:r,scrollbar:y,hasThumb:o,onThumbChange:Mr(l),onThumbPointerUp:Mr(c),onThumbPositionChange:N,onThumbPointerDown:Mr(u),children:(0,In.jsx)(lr.div,(0,s.A)((0,s.A)({},m),{},{ref:w,style:(0,s.A)({position:"absolute"},m.style),onPointerDown:yr(t.onPointerDown,e=>{if(0===e.button){e.target.setPointerCapture(e.pointerId),b.current=y.getBoundingClientRect(),x.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),_(e)}}),onPointerMove:yr(t.onPointerMove,_),onPointerUp:yr(t.onPointerUp,e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=x.current,g.viewport&&(g.viewport.style.scrollBehavior=""),b.current=null})}))})}),vf="ScrollAreaThumb",wf=e.forwardRef((e,t)=>{const{forceMount:n}=e,r=(0,i.A)(e,Xh),a=gf(vf,e.__scopeScrollArea);return(0,In.jsx)(oi,{present:n||a.hasThumb,children:(0,In.jsx)(bf,(0,s.A)({ref:t},r))})}),bf=e.forwardRef((t,n)=>{const{__scopeScrollArea:r,style:a}=t,o=(0,i.A)(t,Qh),l=nf(vf,r),c=gf(vf,r),{onThumbPositionChange:u}=c,d=Hn(n,e=>c.onThumbChange(e)),h=e.useRef(void 0),f=Pf(()=>{h.current&&(h.current(),h.current=void 0)},100);return e.useEffect(()=>{const e=l.viewport;if(e){const t=()=>{if(f(),!h.current){const t=kf(e,u);h.current=t,u()}};return u(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}},[l.viewport,f,u]),(0,In.jsx)(lr.div,(0,s.A)((0,s.A)({"data-state":c.hasThumb?"visible":"hidden"},o),{},{ref:d,style:(0,s.A)({width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)"},a),onPointerDownCapture:yr(t.onPointerDownCapture,e=>{const t=e.target.getBoundingClientRect(),n=e.clientX-t.left,r=e.clientY-t.top;c.onThumbPointerDown({x:n,y:r})}),onPointerUp:yr(t.onPointerUp,c.onThumbPointerUp)}))});wf.displayName=vf;var xf="ScrollAreaCorner",Sf=e.forwardRef((e,t)=>{const n=nf(xf,e.__scopeScrollArea),r=Boolean(n.scrollbarX&&n.scrollbarY);return"scroll"!==n.type&&r?(0,In.jsx)(Af,(0,s.A)((0,s.A)({},e),{},{ref:t})):null});Sf.displayName=xf;var Af=e.forwardRef((t,n)=>{const{__scopeScrollArea:r}=t,a=(0,i.A)(t,Jh),o=nf(xf,r),[l,c]=e.useState(0),[u,d]=e.useState(0),h=Boolean(l&&u);return Rf(o.scrollbarX,()=>{var e;const t=(null===(e=o.scrollbarX)||void 0===e?void 0:e.offsetHeight)||0;o.onCornerHeightChange(t),d(t)}),Rf(o.scrollbarY,()=>{var e;const t=(null===(e=o.scrollbarY)||void 0===e?void 0:e.offsetWidth)||0;o.onCornerWidthChange(t),c(t)}),h?(0,In.jsx)(lr.div,(0,s.A)((0,s.A)({},a),{},{ref:n,style:(0,s.A)({width:l,height:u,position:"absolute",right:"ltr"===o.dir?0:void 0,left:"rtl"===o.dir?0:void 0,bottom:0},t.style)})):null});function Ef(e){return e?parseInt(e,10):0}function Nf(e,t){const n=e/t;return isNaN(n)?0:n}function Cf(e){const t=Nf(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function _f(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ltr";const r=Cf(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,a=t.content-t.viewport,o=s-r,l=ol(e,"ltr"===n?[0,a]:[-1*a,0]);return Tf([0,a],[0,o])(l)}function Tf(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function If(e,t){return e>0&&e<t}var kf=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{},n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},a=n.left!==s.left,o=n.top!==s.top;(a||o)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function Pf(t,n){const r=Mr(t),i=e.useRef(0);return e.useEffect(()=>()=>window.clearTimeout(i.current),[]),e.useCallback(()=>{window.clearTimeout(i.current),i.current=window.setTimeout(r,n)},[r,n])}function Rf(e,t){const n=Mr(t);Rr(()=>{let t=0;if(e){const r=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(n)});return r.observe(e),()=>{window.cancelAnimationFrame(t),r.unobserve(e)}}},[e,n])}var Df=rf,Of=af,Lf=Sf;const Mf=["className","children"],Ff=["className","orientation"],jf=e.forwardRef((e,t)=>{let{className:n,children:r}=e,a=(0,i.A)(e,Mf);return(0,In.jsxs)(Df,(0,s.A)((0,s.A)({ref:t,className:Tn("relative overflow-hidden",n)},a),{},{children:[(0,In.jsx)(Of,{className:"h-full w-full rounded-[inherit]",children:r}),(0,In.jsx)(Bf,{}),(0,In.jsx)(Lf,{})]}))});jf.displayName=Df.displayName;const Bf=e.forwardRef((e,t)=>{let{className:n,orientation:r="vertical"}=e,a=(0,i.A)(e,Ff);return(0,In.jsx)(lf,(0,s.A)((0,s.A)({ref:t,orientation:r,className:Tn("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",n)},a),{},{children:(0,In.jsx)(wf,{className:"relative flex-1 rounded-full bg-border"})}))});Bf.displayName=lf.displayName;const Uf=["className","variant"],zf=er("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Vf(e){let{className:t,variant:n}=e,r=(0,i.A)(e,Uf);return(0,In.jsx)("div",(0,s.A)({className:Tn(zf({variant:n}),t)},r))}const Hf=ho("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),Wf=ho("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),qf=t=>{let{isDarkMode:r,salesData:i,addSaleRecord:a,updateSaleRecord:o,deleteSaleRecord:l,fuelSettings:c,selectedDate:u,creditData:d,incomeData:h,expenseData:f,formResetKey:p,editingRecord:m,onRecordSaved:g,hideRecordsList:y,customers:v}=t;const[w,b]=(0,e.useState)({nozzle:"",fuelType:"",startReading:"",endReading:"",testing:"",rate:"",type:"cash",mpp:!1}),[x,S]=(0,e.useState)(null),{toast:A}=$o(),E=e.useMemo(()=>v&&v.some(e=>!0===e.isMPP),[v]);(0,e.useEffect)(()=>{var e,t,n,r;m?(b({nozzle:m.nozzle||"",fuelType:m.fuelType||"",startReading:(null===(e=m.startReading)||void 0===e?void 0:e.toString())||"",endReading:(null===(t=m.endReading)||void 0===t?void 0:t.toString())||"",testing:(null===(n=m.testing)||void 0===n?void 0:n.toString())||"",rate:(null===(r=m.rate)||void 0===r?void 0:r.toString())||"",type:m.type||"cash",mpp:m.mpp||!1}),S(m.id)):S(null)},[m]),(0,e.useEffect)(()=>{m||x||b({nozzle:"",fuelType:"",startReading:"",endReading:"",testing:"",rate:"",type:"cash",mpp:!1})},[p,m,x]);const N=e.useMemo(()=>{if(!c)return[];const e=n(8173).Ay,t=e.getRatesForDate(u);return Object.entries(c).map(n=>{let[r,i]=n,s=i.price;if(void 0!==t[r])s=t[r];else{const t=e.getLastChangedRate(r,u);null!==t&&(s=t)}return{type:r,rate:s}})},[c,u]),C=e=>{if(!c[e])return[];const t=c[e],n=[];let r;r="power"===e.toLowerCase()?"PO":"premium"===e.toLowerCase()?"PR":e.charAt(0).toUpperCase();for(let i=1;i<=t.nozzleCount;i++){const e="".concat(r).concat(i);n.push({id:e,name:"Nozzle ".concat(e),currentReading:Math.floor(2e3*Math.random())+500})}return n},_=((()=>{const e=[];c&&Object.entries(c).forEach(t=>{let n,[r,i]=t;n="power"===r.toLowerCase()?"PO":"premium"===r.toLowerCase()?"PR":r.charAt(0).toUpperCase();for(let s=1;s<=i.nozzleCount;s++)e.push("".concat(n).concat(s))})})(),e=>{const t=c&&c[e],r=n(8173).Ay,i=r.getRatesForDate(u);let a=t?t.price:"";if(void 0!==i[e])a=i[e];else{const t=r.getLastChangedRate(e,u);null!==t&&(a=t)}b(t=>(0,s.A)((0,s.A)({},t),{},{fuelType:e,nozzle:"",startReading:"",rate:a.toString()}))}),T=e=>{const t=(e=>{const t=new Date(u);t.setDate(t.getDate()-1);const n=t.toISOString().split("T")[0],r=i.filter(t=>t.date===n&&t.nozzle===e);return 0===r.length?0:Math.max(...r.map(e=>e.endReading))})(e);b(n=>(0,s.A)((0,s.A)({},n),{},{nozzle:e,startReading:t.toString()}))},I=()=>{const{startReading:e,endReading:t,testing:n,rate:r}=w;if(!e||!t||!r)return null;const i=parseFloat(n)||0,s=parseFloat(t)-parseFloat(e)-i,a=s*parseFloat(r);return{liters:s.toFixed(2),amount:a.toFixed(2)}},k=()=>{if(!w.nozzle||!w.fuelType||!w.startReading||!w.endReading||!w.rate)return A({title:"Error",description:"Please fill all fields",variant:"destructive"}),null;const e=I();return e?(0,s.A)((0,s.A)({id:x||Date.now(),date:u},w),{},{startReading:parseFloat(w.startReading),endReading:parseFloat(w.endReading),testing:parseFloat(w.testing)||0,rate:parseFloat(w.rate),liters:parseFloat(e.liters),amount:parseFloat(e.amount)}):null},P=()=>{const e=k();if(e)if(x)o&&(o(x,e),S(null),D(),g&&g());else{a({nozzle:w.nozzle,fuelType:w.fuelType,startReading:parseFloat(w.startReading),endReading:parseFloat(w.endReading),testing:parseFloat(w.testing)||0,rate:parseFloat(w.rate),liters:parseFloat(e.liters),amount:parseFloat(e.amount),mpp:w.mpp||!1})&&(D(),g&&g())}},R=()=>{const e=k();if(!e)return;a({nozzle:w.nozzle,fuelType:w.fuelType,startReading:parseFloat(w.startReading),endReading:parseFloat(w.endReading),testing:parseFloat(w.testing)||0,rate:parseFloat(w.rate),liters:parseFloat(e.liters),amount:parseFloat(e.amount),mpp:w.mpp||!1})&&(D(),A({title:"Success",description:"Sale added. Add more sales.",variant:"default"}))},D=()=>{b({nozzle:"",fuelType:"",startReading:"",endReading:"",testing:"",rate:"",type:"cash",mpp:!1}),S(null)},O=I(),L=i.filter(e=>e.date===u),M=()=>(0,In.jsxs)("div",{className:"p-0.5 gap-0.5 space-y-2",children:[(0,In.jsxs)("div",{className:"grid ".concat(E?"grid-cols-[1fr,1fr,auto]":"grid-cols-2"," gap-2"),children:[(0,In.jsxs)("div",{className:"space-y-1",children:[(0,In.jsx)(pr,{className:"text-xs font-semibold",children:"Fuel Type"}),(0,In.jsxs)(Eh,{value:w.fuelType,onValueChange:_,children:[(0,In.jsx)(_h,{children:(0,In.jsx)(Ch,{placeholder:"Select fuel type"})}),(0,In.jsx)(kh,{children:N.length>0?N.map(e=>{let{type:t,rate:n}=e;return(0,In.jsxs)(Ph,{value:t,children:[t," - \u20b9",n]},t)}):(0,In.jsx)(Ph,{value:"",disabled:!0,children:"Select fuel type"})})]},"fuel-".concat(x||"new"))]}),(0,In.jsxs)("div",{className:"space-y-1",children:[(0,In.jsx)(pr,{className:"text-xs font-semibold",children:"Nozzle"}),(0,In.jsxs)(Eh,{value:w.nozzle,onValueChange:T,disabled:!w.fuelType,children:[(0,In.jsx)(_h,{children:(0,In.jsx)(Ch,{placeholder:w.fuelType?"Select nozzle":"Select fuel type first"})}),(0,In.jsx)(kh,{children:w.fuelType&&C(w.fuelType).map(e=>(0,In.jsx)(Ph,{value:e.id,children:e.id},e.id))})]},"nozzle-".concat(x||"new"))]}),E&&(0,In.jsxs)("div",{className:"space-y-1",children:[(0,In.jsx)(pr,{className:"text-xs font-semibold whitespace-nowrap",children:"MPP"}),(0,In.jsx)("div",{className:"flex items-center justify-center h-10 -mt-1",children:(0,In.jsx)("input",{type:"checkbox",checked:w.mpp,onChange:e=>b(t=>(0,s.A)((0,s.A)({},t),{},{mpp:e.target.checked})),className:"w-5 h-5 cursor-pointer accent-blue-500"})})]})]}),(0,In.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,In.jsxs)("div",{className:"space-y-1",children:[(0,In.jsx)(pr,{className:"text-xs font-semibold",children:"Start Reading"}),(0,In.jsx)(sr,{type:"number",step:"0.01",value:w.startReading,onChange:e=>b(t=>(0,s.A)((0,s.A)({},t),{},{startReading:e.target.value})),placeholder:"0.00"})]}),(0,In.jsxs)("div",{className:"space-y-1",children:[(0,In.jsx)(pr,{className:"text-xs font-semibold",children:"End Reading"}),(0,In.jsx)(sr,{type:"number",step:"0.01",value:w.endReading,onChange:e=>b(t=>(0,s.A)((0,s.A)({},t),{},{endReading:e.target.value})),placeholder:"0.00"})]})]}),(0,In.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,In.jsxs)("div",{className:"space-y-1",children:[(0,In.jsx)(pr,{className:"text-xs font-semibold",children:"Testing (Liters)"}),(0,In.jsx)(sr,{type:"number",step:"0.01",value:w.testing,onChange:e=>b(t=>(0,s.A)((0,s.A)({},t),{},{testing:e.target.value})),placeholder:"0.00"})]}),(0,In.jsxs)("div",{className:"space-y-1",children:[(0,In.jsx)(pr,{className:"text-xs font-semibold",children:"Rate per Liter (\u20b9)"}),(0,In.jsx)(sr,{type:"number",step:"0.01",value:w.rate,onChange:e=>b(t=>(0,s.A)((0,s.A)({},t),{},{rate:e.target.value})),placeholder:"0.00"})]})]}),O&&(0,In.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 ".concat(r?"bg-green-900/20 border-green-700":""),children:(0,In.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-center",children:[(0,In.jsxs)("div",{children:[(0,In.jsx)("p",{className:"text-sm text-green-600",children:"Net Liters"}),(0,In.jsx)("p",{className:"text-xl font-bold text-green-700",children:O.liters}),(0,In.jsx)("p",{className:"text-xs text-green-600 mt-1",children:"End - Start - Testing"})]}),(0,In.jsxs)("div",{children:[(0,In.jsx)("p",{className:"text-sm text-green-600",children:"Amount"}),(0,In.jsxs)("p",{className:"text-xl font-bold text-green-700",children:["\u20b9",O.amount]}),(0,In.jsx)("p",{className:"text-xs text-green-600 mt-1",children:"Net Liters \xd7 Rate"})]})]})}),(0,In.jsxs)("div",{className:"flex flex-col gap-2 pt-4",children:[!x&&(0,In.jsxs)(rr,{onClick:R,className:"w-full bg-blue-600 hover:bg-blue-700",children:[(0,In.jsx)(To,{className:"w-4 h-4 mr-2"}),"Add Sale & Add more"]}),(0,In.jsxs)("div",{className:"flex gap-3",children:[(0,In.jsxs)(rr,{onClick:P,className:"flex-1 bg-green-600 hover:bg-green-700",children:[(0,In.jsx)(To,{className:"w-4 h-4 mr-2"}),x?"Update Sale":"Add Sale & Close"]}),x&&(0,In.jsx)(rr,{variant:"outline",onClick:D,children:"Cancel"})]})]})]});return(0,In.jsx)("div",{className:"space-y-6",children:(0,In.jsxs)("div",{className:y?"":"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[y?M():(0,In.jsxs)(Mn,{className:"".concat(r?"bg-gray-800 border-gray-700":"bg-white border-slate-200"," shadow-lg"),children:[(0,In.jsx)(Fn,{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-t-lg py-2",children:(0,In.jsxs)(jn,{className:"flex items-center gap-2 text-base",children:[(0,In.jsx)(jo,{className:"w-5 h-5"}),x?"Edit Sale Record":"Add Sale Record"]})}),(0,In.jsx)(Un,{className:"p-2",children:M()})]}),y?null:(0,In.jsxs)(Mn,{className:"".concat(r?"bg-gray-800 border-gray-700":"bg-white border-slate-200"," shadow-lg"),children:[(0,In.jsx)(Fn,{className:"bg-gradient-to-r from-green-600 to-green-700 text-white rounded-t-lg",children:(0,In.jsxs)(jn,{className:"flex items-center gap-2",children:[(0,In.jsx)(Co,{className:"w-5 h-5"}),"Sales Records (",L.length,")"]})}),(0,In.jsx)(Un,{className:"p-0",children:(0,In.jsx)(jf,{className:"h-[600px]",children:(0,In.jsx)("div",{className:"p-4 space-y-3",children:0===L.length?(0,In.jsxs)("div",{className:"text-center py-8 text-slate-500",children:[(0,In.jsx)(jo,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),(0,In.jsxs)("p",{children:["No sales records for ",u===(new Date).toISOString().split("T")[0]?"today":"selected date"]})]}):L.map(e=>(0,In.jsxs)("div",{className:"border rounded-lg p-3 sm:p-4 hover:shadow-md transition-shadow ".concat(r?"border-gray-600 bg-gray-700":"border-slate-200 bg-white"),children:[(0,In.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-2 mb-3",children:[(0,In.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,In.jsx)(Vf,{className:"bg-blue-100 text-blue-800 border-0 text-xs",children:e.nozzle}),(0,In.jsx)(Vf,{className:"bg-purple-100 text-purple-800 border-0 text-xs",children:e.fuelType})]}),(0,In.jsxs)("div",{className:"flex items-center gap-1",children:[(0,In.jsx)(rr,{variant:"ghost",size:"sm",onClick:()=>(e=>{var t;b({nozzle:e.nozzle,fuelType:e.fuelType,startReading:e.startReading.toString(),endReading:e.endReading.toString(),testing:(null===(t=e.testing)||void 0===t?void 0:t.toString())||"",rate:e.rate.toString(),type:e.type,mpp:e.mpp||!1}),S(e.id)})(e),children:(0,In.jsx)(Hf,{className:"w-3 h-3"})}),(0,In.jsx)(rr,{variant:"ghost",size:"sm",onClick:()=>{return t=e.id,void(l&&l(t));var t},children:(0,In.jsx)(Wf,{className:"w-3 h-3"})})]})]}),(0,In.jsx)("div",{className:"space-y-1.5 text-xs sm:text-sm",children:(0,In.jsxs)("div",{className:"grid grid-cols-2 gap-x-2 gap-y-1",children:[(0,In.jsxs)("div",{className:"flex flex-col sm:flex-row sm:gap-1",children:[(0,In.jsx)("span",{className:"font-medium ".concat(r?"text-gray-400":"text-slate-600"),children:"Start:"}),(0,In.jsx)("span",{className:"font-medium",children:e.startReading})]}),(0,In.jsxs)("div",{className:"flex flex-col sm:flex-row sm:gap-1",children:[(0,In.jsx)("span",{className:"font-medium ".concat(r?"text-gray-400":"text-slate-600"),children:"End:"}),(0,In.jsx)("span",{className:"font-medium",children:e.endReading})]}),(0,In.jsxs)("div",{className:"flex flex-col sm:flex-row sm:gap-1",children:[(0,In.jsx)("span",{className:"font-medium ".concat(r?"text-gray-400":"text-slate-600"),children:"Litres:"}),(0,In.jsx)("span",{className:"font-medium",children:e.liters})]}),(0,In.jsxs)("div",{className:"flex flex-col sm:flex-row sm:gap-1",children:[(0,In.jsx)("span",{className:"font-medium ".concat(r?"text-gray-400":"text-slate-600"),children:"Rate:"}),(0,In.jsxs)("span",{className:"font-medium",children:["\u20b9",e.rate]})]})]})}),(0,In.jsx)(jh,{className:"my-3"}),(0,In.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-1",children:[(0,In.jsx)("span",{className:"font-semibold text-sm ".concat(r?"text-gray-300":"text-slate-700"),children:"Total Amount:"}),(0,In.jsxs)("div",{className:"flex items-center gap-1",children:[(0,In.jsx)(Fo,{className:"w-4 h-4 text-green-600"}),(0,In.jsx)("span",{className:"text-lg sm:text-xl font-bold text-green-600",children:e.amount.toFixed(2)})]})]})]},e.id))})})})]})]})})},Gf=ho("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Kf=t=>{var r,i;let{isDarkMode:a,creditData:o,addCreditRecord:l,updateCreditRecord:c,deleteCreditRecord:u,fuelSettings:d,selectedDate:h,salesData:f,incomeData:p,expenseData:m,formResetKey:g,editingRecord:y,onRecordSaved:v,hideRecordsList:w,customers:b=[]}=t;const[x,S]=(0,e.useState)({customerName:"",creditDate:h,fuelEntries:[{fuelType:"",liters:"",rate:""}],incomeEntries:[],expenseEntries:[],mpp:!1}),[A,E]=(0,e.useState)(null),[N,C]=(0,e.useState)(""),[_,T]=(0,e.useState)(!1),I=(0,e.useRef)(null),k=(0,e.useRef)(null),[P,R]=(0,e.useState)(!1),[D,O]=(0,e.useState)(!1),[L,M]=(0,e.useState)(!1),[F,j]=(0,e.useState)({description:"",amount:""}),[B,U]=(0,e.useState)({description:"",amount:""}),[z,V]=(0,e.useState)({show:!1,credit:null}),{toast:H}=$o(),W=e.useMemo(()=>b&&b.some(e=>!0===e.isMPP),[b]),q=e.useMemo(()=>{if(!d)return[];const e=n(8173).Ay,t=e.getRatesForDate(h);return Object.entries(d).map(n=>{let[r,i]=n,s=i.price;if(void 0!==t[r])s=t[r];else{const t=e.getLastChangedRate(r,h);null!==t&&(s=t)}return{type:r,rate:s}})},[d,h]);(0,e.useEffect)(()=>{const e=e=>{I.current&&!I.current.contains(e.target)&&T(!1),k.current&&!k.current.contains(e.target)&&R(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const G=b.filter(e=>e.name.toLowerCase().includes(N.toLowerCase()));(0,e.useEffect)(()=>{var e,t;y?(S({customerName:y.customerName||"",creditDate:y.date||h,fuelEntries:y.fuelEntries||[{fuelType:y.fuelType||"",liters:(null===(e=y.liters)||void 0===e?void 0:e.toString())||"",rate:(null===(t=y.rate)||void 0===t?void 0:t.toString())||""}],incomeEntries:y.incomeEntries||[],expenseEntries:y.expenseEntries||[],mpp:y.mpp||!1}),C(y.customerName||""),E(y.id)):E(null)},[y,h]),(0,e.useEffect)(()=>{y||A||S({customerName:"",fuelEntries:[{fuelType:"",liters:"",rate:""}],incomeEntries:[],expenseEntries:[],mpp:!1})},[g,y,A]);const K=(e,t,n)=>{const r=[...x.fuelEntries];r[e]=(0,s.A)((0,s.A)({},r[e]),{},{[t]:n}),S(e=>(0,s.A)((0,s.A)({},e),{},{fuelEntries:r}))},Y=()=>(x.fuelEntries.reduce((e,t)=>t.liters&&t.rate?e+parseFloat(t.liters)*parseFloat(t.rate):e,0)+x.incomeEntries.reduce((e,t)=>t.amount?e+parseFloat(t.amount):e,0)-x.expenseEntries.reduce((e,t)=>t.amount?e+parseFloat(t.amount):e,0)).toFixed(2),X=()=>{F.description&&F.amount&&(S(e=>(0,s.A)((0,s.A)({},e),{},{incomeEntries:[...e.incomeEntries,(0,s.A)({},F)]})),j({description:"",amount:""}),O(!1))},Q=()=>{B.description&&B.amount&&(S(e=>(0,s.A)((0,s.A)({},e),{},{expenseEntries:[...e.expenseEntries,(0,s.A)({},B)]})),U({description:"",amount:""}),M(!1))},J=()=>{if(!x.customerName)return H({title:"Error",description:"Please select a customer",variant:"destructive"}),null;const e=x.fuelEntries.filter(e=>e.fuelType&&e.liters&&e.rate),t=x.incomeEntries.filter(e=>e.description&&e.amount),n=x.expenseEntries.filter(e=>e.description&&e.amount);return 0===e.length&&0===t.length?(H({title:"Error",description:"Please add at least one fuel or income entry",variant:"destructive"}),null):{id:A||Date.now(),date:x.creditDate||h,customerName:x.customerName,fuelEntries:e.map(e=>({fuelType:e.fuelType,liters:parseFloat(e.liters),rate:parseFloat(e.rate),amount:parseFloat(e.liters)*parseFloat(e.rate)})),incomeEntries:t.map(e=>({description:e.description,amount:parseFloat(e.amount)})),expenseEntries:n.map(e=>({description:e.description,amount:parseFloat(e.amount)})),amount:parseFloat(Y()),status:"pending",mpp:x.mpp||!1}},Z=()=>{const e=J();if(e)if(A)c&&(c(A,e),E(null),ee(),v&&v());else{l(e)&&(ee(),v&&v())}},$=()=>{const e=J();if(e)if(A)c&&(c(A,e),E(null),ee());else{if(l(e)){const e=x.creditDate;ee(),S(t=>(0,s.A)((0,s.A)({},t),{},{creditDate:e}))}}},ee=()=>{S({customerName:"",creditDate:h,fuelEntries:[{fuelType:"",liters:"",rate:""}],incomeEntries:[],expenseEntries:[],mpp:!1}),C(""),E(null)},te=o.filter(e=>e.date===h),ne=()=>(0,In.jsxs)("div",{className:"space-y-4",children:[(0,In.jsxs)("div",{className:"space-y-2",children:[(0,In.jsx)(pr,{className:"text-sm font-medium",children:"Customer Name *"}),b.length>0?(0,In.jsxs)("div",{className:"relative",ref:I,children:[(0,In.jsxs)("div",{className:"relative",children:[(0,In.jsx)(sr,{type:"text",placeholder:"Search customer...",value:N,onChange:e=>{C(e.target.value),T(!0)},onFocus:()=>T(!0),className:"w-full pr-10 ".concat(a?"bg-gray-700 border-gray-600 text-white":"")}),(0,In.jsx)(ph,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 cursor-pointer ".concat(a?"text-gray-400":"text-gray-500"),onClick:()=>T(!_)})]}),_&&(0,In.jsx)("div",{className:"absolute z-50 w-full mt-1 max-h-60 overflow-auto rounded-md border shadow-lg ".concat(a?"bg-gray-700 border-gray-600":"bg-white border-gray-300"),children:G.length>0?G.map(e=>(0,In.jsx)("div",{className:"px-3 py-2 cursor-pointer hover:".concat(a?"bg-gray-600":"bg-gray-100"," ").concat(x.customerName===e.name?a?"bg-blue-600":"bg-blue-100":""),onClick:()=>{S(t=>(0,s.A)((0,s.A)({},t),{},{customerName:e.name})),C(e.name),T(!1)},children:(0,In.jsx)("div",{className:a?"text-white":"text-gray-900",children:e.name})},e.id)):(0,In.jsx)("div",{className:"px-3 py-2 ".concat(a?"text-gray-400":"text-gray-500"),children:"No customers found"})})]}):(0,In.jsx)("div",{className:"px-3 py-2 rounded-md border text-center ".concat(a?"bg-gray-700 border-gray-600 text-gray-400":"bg-gray-50 border-slate-300 text-slate-500"),children:"No customers available. Please add customers first."})]}),(0,In.jsxs)("div",{className:"space-y-2",children:[(0,In.jsxs)("div",{className:"grid ".concat(W?"grid-cols-[1fr,1fr,auto]":"grid-cols-2"," gap-2"),children:[(0,In.jsxs)("div",{className:"space-y-1",children:[(0,In.jsx)(pr,{className:"text-sm font-medium",children:"Date *"}),(0,In.jsx)(sr,{type:"date",value:x.creditDate,onChange:e=>S(t=>(0,s.A)((0,s.A)({},t),{},{creditDate:e.target.value})),className:"text-sm font-medium ".concat(a?"bg-gray-600 border-gray-500 text-white":"")})]}),(0,In.jsxs)("div",{className:"space-y-1",children:[(0,In.jsx)(pr,{className:"text-sm font-medium",children:"Fuel Type *"}),(0,In.jsxs)("select",{value:x.fuelEntries[0].fuelType,onChange:e=>((e,t)=>{const r=d[t],i=n(8173).Ay,a=i.getRatesForDate(h);let o=r?r.price:"";if(void 0!==a[t])o=a[t];else{const e=i.getLastChangedRate(t,h);null!==e&&(o=e)}const l=[...x.fuelEntries];l[e]=(0,s.A)((0,s.A)({},l[e]),{},{fuelType:t,rate:o.toString()}),S(e=>(0,s.A)((0,s.A)({},e),{},{fuelEntries:l}))})(0,e.target.value),className:"w-full rounded-md border px-3 py-2 text-sm ".concat(a?"bg-gray-600 border-gray-500 text-white":"bg-white border-slate-300"),children:[(0,In.jsx)("option",{value:"",children:"Select Fuel Type"}),q.map(e=>{let{type:t,rate:n}=e;return(0,In.jsx)("option",{value:t,children:t},t)})]})]}),W&&(0,In.jsxs)("div",{className:"space-y-1",children:[(0,In.jsx)(pr,{className:"text-sm font-medium whitespace-nowrap",children:"MPP"}),(0,In.jsx)("div",{className:"flex items-center justify-center h-10 -mt-1",children:(0,In.jsx)("input",{type:"checkbox",checked:x.mpp,onChange:e=>S(t=>(0,s.A)((0,s.A)({},t),{},{mpp:e.target.checked})),className:"w-5 h-5 cursor-pointer accent-blue-500"})})]})]}),(0,In.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,In.jsxs)("div",{className:"space-y-1",children:[(0,In.jsx)(pr,{className:"text-sm font-medium",children:"Liters *"}),(0,In.jsx)(sr,{type:"number",step:"0.01",value:x.fuelEntries[0].liters,onChange:e=>K(0,"liters",e.target.value),placeholder:"0.00",className:"text-sm font-medium ".concat(a?"bg-gray-600 border-gray-500 text-white":"")})]}),(0,In.jsxs)("div",{className:"space-y-1",children:[(0,In.jsx)(pr,{className:"text-sm font-medium",children:"Rate *"}),(0,In.jsx)(sr,{type:"number",step:"0.01",value:x.fuelEntries[0].rate,onChange:e=>K(0,"rate",e.target.value),placeholder:"0.00",className:"text-sm font-medium ".concat(a?"bg-gray-600 border-gray-500 text-white":"")})]})]}),(0,In.jsxs)("div",{className:"grid grid-cols-2 gap-2 items-center",children:[(0,In.jsxs)("div",{className:"relative",ref:k,children:[(0,In.jsxs)(rr,{type:"button",variant:"outline",onClick:()=>R(!P),className:"w-full ".concat(a?"border-gray-500 hover:bg-gray-600":"border-slate-300 hover:bg-slate-100"),children:[(0,In.jsx)(To,{className:"w-4 h-4 mr-2"}),"Add Income/Expense"]}),P&&(0,In.jsxs)("div",{className:"absolute z-50 mt-1 w-full rounded-md border shadow-lg ".concat(a?"bg-gray-700 border-gray-600":"bg-white border-slate-300"),children:[(0,In.jsx)("button",{onClick:()=>{R(!1),O(!0)},className:"w-full px-4 py-2 text-left text-sm hover:".concat(a?"bg-gray-600":"bg-gray-100"),children:"+ Add Income"}),(0,In.jsx)("button",{onClick:()=>{R(!1),M(!0)},className:"w-full px-4 py-2 text-left text-sm hover:".concat(a?"bg-gray-600":"bg-gray-100"),children:"- Add Expense"})]})]}),(0,In.jsxs)("div",{className:"space-y-1",children:[(0,In.jsx)(pr,{className:"text-sm font-medium text-right block",children:"Amount"}),(0,In.jsxs)("div",{className:"px-3 py-2 rounded-md text-lg font-bold text-right ".concat(a?"bg-green-900 text-green-400":"bg-green-50 text-green-600"),children:["\u20b9",x.fuelEntries[0].liters&&x.fuelEntries[0].rate?(parseFloat(x.fuelEntries[0].liters)*parseFloat(x.fuelEntries[0].rate)).toFixed(2):"0.00"]})]})]}),(0,In.jsx)("div",{className:"pt-2",children:(0,In.jsxs)("div",{className:"px-4 py-3 rounded-md text-xl font-bold text-center ".concat(a?"bg-orange-900 text-orange-400":"bg-orange-50 text-orange-600"),children:["Final: \u20b9",Y()]})}),x.incomeEntries.length>0&&(0,In.jsx)("div",{className:"mt-3 space-y-2",children:x.incomeEntries.map((e,t)=>(0,In.jsxs)("div",{className:"flex items-center justify-between px-3 py-2 rounded text-sm ".concat(a?"bg-green-900 bg-opacity-30 text-green-400":"bg-green-50 text-green-700"),children:[(0,In.jsxs)("span",{children:["+ ",e.description]}),(0,In.jsxs)("div",{className:"flex items-center gap-2",children:[(0,In.jsxs)("span",{className:"font-medium",children:["\u20b9",parseFloat(e.amount).toFixed(2)]}),(0,In.jsx)("button",{onClick:()=>(e=>{S(t=>(0,s.A)((0,s.A)({},t),{},{incomeEntries:t.incomeEntries.filter((t,n)=>n!==e)}))})(t),className:"text-red-500 hover:text-red-700",children:(0,In.jsx)(Wf,{className:"w-4 h-4"})})]})]},t))}),x.expenseEntries.length>0&&(0,In.jsx)("div",{className:"mt-3 space-y-2",children:x.expenseEntries.map((e,t)=>(0,In.jsxs)("div",{className:"flex items-center justify-between px-3 py-2 rounded text-sm ".concat(a?"bg-red-900 bg-opacity-30 text-red-400":"bg-red-50 text-red-700"),children:[(0,In.jsxs)("span",{children:["- ",e.description]}),(0,In.jsxs)("div",{className:"flex items-center gap-2",children:[(0,In.jsxs)("span",{className:"font-medium",children:["\u20b9",parseFloat(e.amount).toFixed(2)]}),(0,In.jsx)("button",{onClick:()=>(e=>{S(t=>(0,s.A)((0,s.A)({},t),{},{expenseEntries:t.expenseEntries.filter((t,n)=>n!==e)}))})(t),className:"text-red-500 hover:text-red-700",children:(0,In.jsx)(Wf,{className:"w-4 h-4"})})]})]},t))})]}),D&&(0,In.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,In.jsx)(Mn,{className:"w-full max-w-md ".concat(a?"bg-gray-800 border-gray-700":"bg-white border-slate-200"),children:(0,In.jsxs)(Un,{className:"p-6",children:[(0,In.jsx)("h3",{className:"text-lg font-semibold mb-4 ".concat(a?"text-white":"text-slate-800"),children:"Add Income"}),(0,In.jsxs)("div",{className:"space-y-4",children:[(0,In.jsxs)("div",{children:[(0,In.jsx)(pr,{children:"Description *"}),(0,In.jsx)(sr,{type:"text",value:F.description,onChange:e=>j(t=>(0,s.A)((0,s.A)({},t),{},{description:e.target.value})),placeholder:"e.g., Transport, Loading",className:"mt-1 ".concat(a?"bg-gray-700 border-gray-600 text-white":""),autoFocus:!0})]}),(0,In.jsxs)("div",{children:[(0,In.jsx)(pr,{children:"Amount (\u20b9) *"}),(0,In.jsx)(sr,{type:"number",step:"0.01",value:F.amount,onChange:e=>j(t=>(0,s.A)((0,s.A)({},t),{},{amount:e.target.value})),placeholder:"0.00",className:"mt-1 ".concat(a?"bg-gray-700 border-gray-600 text-white":"")})]})]}),(0,In.jsxs)("div",{className:"flex gap-3 justify-end mt-6",children:[(0,In.jsx)(rr,{variant:"outline",onClick:()=>{O(!1),j({description:"",amount:""})},children:"Cancel"}),(0,In.jsx)(rr,{onClick:X,disabled:!F.description||!F.amount,className:"bg-green-600 hover:bg-green-700",children:"Add Income"})]})]})})}),L&&(0,In.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,In.jsx)(Mn,{className:"w-full max-w-md ".concat(a?"bg-gray-800 border-gray-700":"bg-white border-slate-200"),children:(0,In.jsxs)(Un,{className:"p-6",children:[(0,In.jsx)("h3",{className:"text-lg font-semibold mb-4 ".concat(a?"text-white":"text-slate-800"),children:"Add Expense/Discount"}),(0,In.jsxs)("div",{className:"space-y-4",children:[(0,In.jsxs)("div",{children:[(0,In.jsx)(pr,{children:"Description *"}),(0,In.jsx)(sr,{type:"text",value:B.description,onChange:e=>U(t=>(0,s.A)((0,s.A)({},t),{},{description:e.target.value})),placeholder:"e.g., Discount, Commission",className:"mt-1 ".concat(a?"bg-gray-700 border-gray-600 text-white":""),autoFocus:!0})]}),(0,In.jsxs)("div",{children:[(0,In.jsx)(pr,{children:"Amount (\u20b9) *"}),(0,In.jsx)(sr,{type:"number",step:"0.01",value:B.amount,onChange:e=>U(t=>(0,s.A)((0,s.A)({},t),{},{amount:e.target.value})),placeholder:"0.00",className:"mt-1 ".concat(a?"bg-gray-700 border-gray-600 text-white":"")})]})]}),(0,In.jsxs)("div",{className:"flex gap-3 justify-end mt-6",children:[(0,In.jsx)(rr,{variant:"outline",onClick:()=>{M(!1),U({description:"",amount:""})},children:"Cancel"}),(0,In.jsx)(rr,{onClick:Q,disabled:!B.description||!B.amount,className:"bg-red-600 hover:bg-red-700",children:"Add Expense"})]})]})})}),(0,In.jsxs)("div",{className:"flex flex-col gap-2 pt-4",children:[!A&&(0,In.jsxs)(rr,{onClick:$,className:"w-full bg-green-600 hover:bg-green-700",children:[(0,In.jsx)(To,{className:"w-4 h-4 mr-2"}),"Add Credit & Add more"]}),(0,In.jsxs)("div",{className:"flex gap-3",children:[(0,In.jsxs)(rr,{onClick:Z,className:"flex-1 bg-orange-600 hover:bg-orange-700",children:[(0,In.jsx)(To,{className:"w-4 h-4 mr-2"}),A?"Update Credit":"Add Credit & Close"]}),A&&(0,In.jsx)(rr,{variant:"outline",onClick:ee,children:"Cancel"})]})]})]});return(0,In.jsxs)("div",{className:"space-y-6",children:[(0,In.jsxs)("div",{className:w?"":"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[w?ne():(0,In.jsxs)(Mn,{className:"".concat(a?"bg-gray-800 border-gray-700":"bg-white border-slate-200"," shadow-lg"),children:[(0,In.jsx)(Fn,{className:"bg-gradient-to-r from-orange-600 to-orange-700 text-white rounded-t-lg",children:(0,In.jsxs)(jn,{className:"flex items-center gap-2",children:[(0,In.jsx)(Bo,{className:"w-5 h-5"}),A?"Edit Credit Sale":"Add Credit Sale"]})}),(0,In.jsx)(Un,{className:"p-6",children:ne()})]}),w?null:(0,In.jsxs)(Mn,{className:"".concat(a?"bg-gray-800 border-gray-700":"bg-white border-slate-200"," shadow-lg"),children:[(0,In.jsx)(Fn,{className:"bg-gradient-to-r from-red-600 to-red-700 text-white rounded-t-lg",children:(0,In.jsxs)(jn,{className:"flex items-center gap-2",children:[(0,In.jsx)(Wo,{className:"w-5 h-5"}),"Credit Sales Records (",te.length,")"]})}),(0,In.jsx)(Un,{className:"p-0",children:(0,In.jsx)(jf,{className:"h-[600px]",children:(0,In.jsx)("div",{className:"p-4 space-y-3",children:0===te.length?(0,In.jsxs)("div",{className:"text-center py-8 text-slate-500",children:[(0,In.jsx)(Bo,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),(0,In.jsxs)("p",{children:["No credit sales for ",h===(new Date).toISOString().split("T")[0]?"today":"selected date"]})]}):te.map(e=>(0,In.jsxs)("div",{className:"border rounded-lg p-3 sm:p-4 hover:shadow-md transition-shadow ".concat(a?"border-gray-600 bg-gray-700":"border-slate-200 bg-white"),children:[(0,In.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-2 mb-3",children:[(0,In.jsx)("div",{className:"flex items-center gap-2 flex-wrap",children:(0,In.jsx)("h4",{className:"font-semibold text-sm sm:text-base break-words ".concat(a?"text-white":"text-slate-800"),children:e.customerName})}),(0,In.jsxs)("div",{className:"flex items-center gap-1",children:[(0,In.jsx)(rr,{variant:"ghost",size:"sm",onClick:()=>(e=>{var t,n;S({customerName:e.customerName,fuelEntries:e.fuelEntries||[{fuelType:e.fuelType||"",liters:(null===(t=e.liters)||void 0===t?void 0:t.toString())||"",rate:(null===(n=e.rate)||void 0===n?void 0:n.toString())||""}],incomeEntries:e.incomeEntries||[],expenseEntries:e.expenseEntries||[]}),E(e.id)})(e),children:(0,In.jsx)(Hf,{className:"w-3 h-3"})}),(0,In.jsx)(rr,{variant:"ghost",size:"sm",onClick:()=>(e=>{el.Ay.isProModeEnabled()?u&&u(e.id):V({show:!0,credit:e})})(e),children:(0,In.jsx)(Wf,{className:"w-3 h-3"})})]})]}),e.fuelEntries&&e.fuelEntries.length>0?(0,In.jsx)("div",{className:"space-y-2 mb-3",children:e.fuelEntries.map((e,t)=>(0,In.jsxs)("div",{className:"p-2 rounded border ".concat(a?"bg-gray-600 border-gray-500":"bg-slate-50 border-slate-200"),children:[(0,In.jsxs)("div",{className:"flex items-center justify-between",children:[(0,In.jsx)(Vf,{className:"bg-purple-100 text-purple-800 border-0 text-xs",children:e.fuelType}),(0,In.jsxs)("span",{className:"text-xs font-medium text-orange-600",children:["\u20b9",e.amount.toFixed(2)]})]}),(0,In.jsxs)("div",{className:"grid grid-cols-2 gap-2 mt-2 text-xs",children:[(0,In.jsxs)("div",{children:[(0,In.jsx)("span",{className:a?"text-gray-400":"text-slate-600",children:"Litres: "}),(0,In.jsx)("span",{className:"font-medium",children:e.liters})]}),(0,In.jsxs)("div",{children:[(0,In.jsx)("span",{className:a?"text-gray-400":"text-slate-600",children:"Rate: "}),(0,In.jsxs)("span",{className:"font-medium",children:["\u20b9",e.rate]})]})]})]},t))}):(0,In.jsxs)("div",{className:"space-y-1.5 mb-3",children:[(0,In.jsx)(Vf,{className:"bg-purple-100 text-purple-800 border-0 text-xs",children:e.fuelType}),(0,In.jsx)("div",{className:"space-y-1.5 text-xs sm:text-sm mt-2",children:(0,In.jsxs)("div",{className:"grid grid-cols-2 gap-x-2 gap-y-1",children:[(0,In.jsxs)("div",{className:"flex flex-col sm:flex-row sm:gap-1",children:[(0,In.jsx)("span",{className:"font-medium ".concat(a?"text-gray-400":"text-slate-600"),children:"Litres:"}),(0,In.jsx)("span",{className:"font-medium",children:e.liters})]}),(0,In.jsxs)("div",{className:"flex flex-col sm:flex-row sm:gap-1",children:[(0,In.jsx)("span",{className:"font-medium ".concat(a?"text-gray-400":"text-slate-600"),children:"Rate:"}),(0,In.jsxs)("span",{className:"font-medium",children:["\u20b9",e.rate]})]})]})})]}),e.incomeEntries&&e.incomeEntries.length>0&&(0,In.jsx)("div",{className:"space-y-2 mb-3",children:e.incomeEntries.map((e,t)=>(0,In.jsxs)("div",{className:"p-2 rounded border ".concat(a?"bg-gray-600 border-gray-500":"bg-green-50 border-green-200"),children:[(0,In.jsxs)("div",{className:"flex items-center justify-between",children:[(0,In.jsx)(Vf,{className:"bg-green-100 text-green-800 border-0 text-xs",children:"Income"}),(0,In.jsxs)("span",{className:"text-xs font-medium text-green-600",children:["+\u20b9",e.amount.toFixed(2)]})]}),(0,In.jsx)("div",{className:"mt-2 text-xs",children:(0,In.jsx)("span",{className:a?"text-gray-300":"text-slate-700",children:e.description})})]},t))}),e.expenseEntries&&e.expenseEntries.length>0&&(0,In.jsx)("div",{className:"space-y-2 mb-3",children:e.expenseEntries.map((e,t)=>(0,In.jsxs)("div",{className:"p-2 rounded border ".concat(a?"bg-gray-600 border-gray-500":"bg-red-50 border-red-200"),children:[(0,In.jsxs)("div",{className:"flex items-center justify-between",children:[(0,In.jsx)(Vf,{className:"bg-red-100 text-red-800 border-0 text-xs",children:"Expense"}),(0,In.jsxs)("span",{className:"text-xs font-medium text-red-600",children:["-\u20b9",e.amount.toFixed(2)]})]}),(0,In.jsx)("div",{className:"mt-2 text-xs",children:(0,In.jsx)("span",{className:a?"text-gray-300":"text-slate-700",children:e.description})})]},t))}),(0,In.jsx)(jh,{className:"my-3"}),(0,In.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-1",children:[(0,In.jsx)("span",{className:"font-semibold text-sm ".concat(a?"text-gray-300":"text-slate-700"),children:"Total Amount:"}),(0,In.jsxs)("div",{className:"flex items-center gap-1",children:[(0,In.jsx)(Fo,{className:"w-4 h-4 text-orange-600"}),(0,In.jsx)("span",{className:"text-lg sm:text-xl font-bold text-orange-600",children:e.amount.toFixed(2)})]})]})]},e.id))})})})]})]}),z.show&&(0,In.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,In.jsx)(Mn,{className:"w-full max-w-md ".concat(a?"bg-gray-800 border-gray-700":"bg-white border-slate-200"),children:(0,In.jsxs)(Un,{className:"p-6",children:[(0,In.jsxs)("div",{className:"flex items-start gap-4 mb-4",children:[(0,In.jsx)("div",{className:"p-2 rounded-full ".concat(a?"bg-red-900 text-red-400":"bg-red-100 text-red-600"),children:(0,In.jsx)(Gf,{className:"w-6 h-6"})}),(0,In.jsxs)("div",{className:"flex-1",children:[(0,In.jsx)("h3",{className:"text-lg font-semibold mb-2 ".concat(a?"text-white":"text-slate-800"),children:"Delete Credit Sale?"}),(0,In.jsxs)("p",{className:"text-sm mb-1 ".concat(a?"text-gray-300":"text-slate-600"),children:["Are you sure you want to delete credit sale of ",(0,In.jsxs)("span",{className:"font-semibold",children:["\u20b9",null===(r=z.credit)||void 0===r?void 0:r.totalAmount.toFixed(2)]})," for ",(0,In.jsxs)("span",{className:"font-semibold",children:['"',null===(i=z.credit)||void 0===i?void 0:i.customerName,'"']}),"?"]}),(0,In.jsx)("p",{className:"text-sm ".concat(a?"text-gray-400":"text-slate-500"),children:"This action cannot be undone."})]})]}),(0,In.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,In.jsx)(rr,{variant:"outline",onClick:()=>{V({show:!1,credit:null})},className:"".concat(a?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-slate-300 text-slate-700 hover:bg-slate-100"),children:"No, Cancel"}),(0,In.jsx)(rr,{onClick:()=>{z.credit&&u&&u(z.credit.id),V({show:!1,credit:null})},className:"bg-red-600 hover:bg-red-700 text-white",children:"Yes, Delete"})]})]})})})]})},Yf=["__scopeCheckbox","onKeyDown","onClick"],Xf=["__scopeCheckbox","name","checked","defaultChecked","required","disabled","value","onCheckedChange","form"],Qf=["__scopeCheckbox","forceMount"],Jf=["__scopeCheckbox"];var Zf="Checkbox",[$f,ep]=br(Zf),[tp,np]=$f(Zf);function rp(t){const{__scopeCheckbox:n,checked:r,children:i,defaultChecked:a,disabled:o,form:l,name:c,onCheckedChange:u,required:d,value:h="on",internal_do_not_use_render:f}=t,[p,m]=jr({prop:r,defaultProp:null!==a&&void 0!==a&&a,onChange:u,caller:Zf}),[g,y]=e.useState(null),[v,w]=e.useState(null),b=e.useRef(!1),x=!g||(!!l||!!g.closest("form")),S={checked:p,disabled:o,setChecked:m,control:g,setControl:y,name:c,form:l,value:h,hasConsumerStoppedPropagationRef:b,required:d,defaultChecked:!hp(a)&&a,isFormControl:x,bubbleInput:v,setBubbleInput:w};return(0,In.jsx)(tp,(0,s.A)((0,s.A)({scope:n},S),{},{children:dp(f)?f(S):i}))}var ip="CheckboxTrigger",sp=e.forwardRef((t,n)=>{let{__scopeCheckbox:r,onKeyDown:a,onClick:o}=t,l=(0,i.A)(t,Yf);const{control:c,value:u,disabled:d,checked:h,required:f,setControl:p,setChecked:m,hasConsumerStoppedPropagationRef:g,isFormControl:y,bubbleInput:v}=np(ip,r),w=Hn(n,p),b=e.useRef(h);return e.useEffect(()=>{const e=null===c||void 0===c?void 0:c.form;if(e){const t=()=>m(b.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[c,m]),(0,In.jsx)(lr.button,(0,s.A)((0,s.A)({type:"button",role:"checkbox","aria-checked":hp(h)?"mixed":h,"aria-required":f,"data-state":fp(h),"data-disabled":d?"":void 0,disabled:d,value:u},l),{},{ref:w,onKeyDown:yr(a,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:yr(o,e=>{m(e=>!!hp(e)||!e),v&&y&&(g.current=e.isPropagationStopped(),g.current||e.stopPropagation())})}))});sp.displayName=ip;var ap=e.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:a,defaultChecked:o,required:l,disabled:c,value:u,onCheckedChange:d,form:h}=e,f=(0,i.A)(e,Xf);return(0,In.jsx)(rp,{__scopeCheckbox:n,checked:a,defaultChecked:o,disabled:c,required:l,onCheckedChange:d,name:r,form:h,value:u,internal_do_not_use_render:e=>{let{isFormControl:r}=e;return(0,In.jsxs)(In.Fragment,{children:[(0,In.jsx)(sp,(0,s.A)((0,s.A)({},f),{},{ref:t,__scopeCheckbox:n})),r&&(0,In.jsx)(up,{__scopeCheckbox:n})]})}})});ap.displayName=Zf;var op="CheckboxIndicator",lp=e.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r}=e,a=(0,i.A)(e,Qf),o=np(op,n);return(0,In.jsx)(oi,{present:r||hp(o.checked)||!0===o.checked,children:(0,In.jsx)(lr.span,(0,s.A)((0,s.A)({"data-state":fp(o.checked),"data-disabled":o.disabled?"":void 0},a),{},{ref:t,style:(0,s.A)({pointerEvents:"none"},e.style)}))})});lp.displayName=op;var cp="CheckboxBubbleInput",up=e.forwardRef((t,n)=>{let{__scopeCheckbox:r}=t,a=(0,i.A)(t,Jf);const{control:o,hasConsumerStoppedPropagationRef:l,checked:c,defaultChecked:u,required:d,disabled:h,name:f,value:p,form:m,bubbleInput:g,setBubbleInput:y}=np(cp,r),v=Hn(n,y),w=Iu(c),b=ru(o);e.useEffect(()=>{const e=g;if(!e)return;const t=window.HTMLInputElement.prototype,n=Object.getOwnPropertyDescriptor(t,"checked").set,r=!l.current;if(w!==c&&n){const t=new Event("click",{bubbles:r});e.indeterminate=hp(c),n.call(e,!hp(c)&&c),e.dispatchEvent(t)}},[g,w,c,l]);const x=e.useRef(!hp(c)&&c);return(0,In.jsx)(lr.input,(0,s.A)((0,s.A)({type:"checkbox","aria-hidden":!0,defaultChecked:null!==u&&void 0!==u?u:x.current,required:d,disabled:h,name:f,value:p,form:m},a),{},{tabIndex:-1,ref:v,style:(0,s.A)((0,s.A)((0,s.A)({},a.style),b),{},{position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"})}))});function dp(e){return"function"===typeof e}function hp(e){return"indeterminate"===e}function fp(e){return hp(e)?"indeterminate":e?"checked":"unchecked"}up.displayName=cp;const pp=["className"],mp=e.forwardRef((e,t)=>{let{className:n}=e,r=(0,i.A)(e,pp);return(0,In.jsx)(ap,(0,s.A)((0,s.A)({ref:t,className:Tn("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",n)},r),{},{children:(0,In.jsx)(lp,{className:Tn("flex items-center justify-center text-current"),children:(0,In.jsx)(gh,{className:"h-4 w-4"})})}))});mp.displayName=ap.displayName;const gp=["__scopePopover"],yp=["__scopePopover"],vp=["forceMount"],wp=["__scopePopover","trapFocus","onOpenAutoFocus","onCloseAutoFocus","disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside"],bp=["__scopePopover"],xp=["__scopePopover"];var Sp="Popover",[Ap,Ep]=br(Sp,[cu]),Np=cu(),[Cp,_p]=Ap(Sp),Tp=t=>{const{__scopePopover:n,children:r,open:i,defaultOpen:a,onOpenChange:o,modal:l=!1}=t,c=Np(n),u=e.useRef(null),[d,h]=e.useState(!1),[f,p]=jr({prop:i,defaultProp:null!==a&&void 0!==a&&a,onChange:o,caller:Sp});return(0,In.jsx)(Nu,(0,s.A)((0,s.A)({},c),{},{children:(0,In.jsx)(Cp,{scope:n,contentId:Lr(),triggerRef:u,open:f,onOpenChange:p,onOpenToggle:e.useCallback(()=>p(e=>!e),[p]),hasCustomAnchor:d,onCustomAnchorAdd:e.useCallback(()=>h(!0),[]),onCustomAnchorRemove:e.useCallback(()=>h(!1),[]),modal:l,children:r})}))};Tp.displayName=Sp;var Ip="PopoverAnchor",kp=e.forwardRef((t,n)=>{const{__scopePopover:r}=t,a=(0,i.A)(t,gp),o=_p(Ip,r),l=Np(r),{onCustomAnchorAdd:c,onCustomAnchorRemove:u}=o;return e.useEffect(()=>(c(),()=>u()),[c,u]),(0,In.jsx)(Cu,(0,s.A)((0,s.A)((0,s.A)({},l),a),{},{ref:n}))});kp.displayName=Ip;var Pp="PopoverTrigger",Rp=e.forwardRef((e,t)=>{const{__scopePopover:n}=e,r=(0,i.A)(e,yp),a=_p(Pp,n),o=Np(n),l=Hn(t,a.triggerRef),c=(0,In.jsx)(lr.button,(0,s.A)((0,s.A)({type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Gp(a.open)},r),{},{ref:l,onClick:yr(e.onClick,a.onOpenToggle)}));return a.hasCustomAnchor?c:(0,In.jsx)(Cu,(0,s.A)((0,s.A)({asChild:!0},o),{},{children:c}))});Rp.displayName=Pp;var Dp="PopoverPortal",[Op,Lp]=Ap(Dp,{forceMount:void 0}),Mp=e=>{const{__scopePopover:t,forceMount:n,children:r,container:i}=e,s=_p(Dp,t);return(0,In.jsx)(Op,{scope:t,forceMount:n,children:(0,In.jsx)(oi,{present:n||s.open,children:(0,In.jsx)(ls,{asChild:!0,container:i,children:r})})})};Mp.displayName=Dp;var Fp="PopoverContent",jp=e.forwardRef((e,t)=>{const n=Lp(Fp,e.__scopePopover),{forceMount:r=n.forceMount}=e,a=(0,i.A)(e,vp),o=_p(Fp,e.__scopePopover);return(0,In.jsx)(oi,{present:r||o.open,children:o.modal?(0,In.jsx)(Up,(0,s.A)((0,s.A)({},a),{},{ref:t})):(0,In.jsx)(zp,(0,s.A)((0,s.A)({},a),{},{ref:t}))})});jp.displayName=Fp;var Bp=Gn("PopoverContent.RemoveScroll"),Up=e.forwardRef((t,n)=>{const r=_p(Fp,t.__scopePopover),i=e.useRef(null),a=Hn(n,i),o=e.useRef(!1);return e.useEffect(()=>{const e=i.current;if(e)return ua(e)},[]),(0,In.jsx)(na,{as:Bp,allowPinchZoom:!0,children:(0,In.jsx)(Vp,(0,s.A)((0,s.A)({},t),{},{ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:yr(t.onCloseAutoFocus,e=>{var t;e.preventDefault(),o.current||null===(t=r.triggerRef.current)||void 0===t||t.focus()}),onPointerDownOutside:yr(t.onPointerDownOutside,e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey,r=2===t.button||n;o.current=r},{checkForDefaultPrevented:!1}),onFocusOutside:yr(t.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})}))})}),zp=e.forwardRef((t,n)=>{const r=_p(Fp,t.__scopePopover),i=e.useRef(!1),a=e.useRef(!1);return(0,In.jsx)(Vp,(0,s.A)((0,s.A)({},t),{},{ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:e=>{var n,s;(null===(n=t.onCloseAutoFocus)||void 0===n||n.call(t,e),e.defaultPrevented)||(i.current||null===(s=r.triggerRef.current)||void 0===s||s.focus(),e.preventDefault());i.current=!1,a.current=!1},onInteractOutside:e=>{var n,s;null===(n=t.onInteractOutside)||void 0===n||n.call(t,e),e.defaultPrevented||(i.current=!0,"pointerdown"===e.detail.originalEvent.type&&(a.current=!0));const o=e.target;(null===(s=r.triggerRef.current)||void 0===s?void 0:s.contains(o))&&e.preventDefault(),"focusin"===e.detail.originalEvent.type&&a.current&&e.preventDefault()}}))}),Vp=e.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h}=e,f=(0,i.A)(e,wp),p=_p(Fp,n),m=Np(n);return us(),(0,In.jsx)(es,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:o,children:(0,In.jsx)(Wi,{asChild:!0,disableOutsidePointerEvents:l,onInteractOutside:h,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onDismiss:()=>p.onOpenChange(!1),children:(0,In.jsx)(_u,(0,s.A)((0,s.A)((0,s.A)({"data-state":Gp(p.open),role:"dialog",id:p.contentId},m),f),{},{ref:t,style:(0,s.A)((0,s.A)({},f.style),{"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"})}))})})}),Hp="PopoverClose",Wp=e.forwardRef((e,t)=>{const{__scopePopover:n}=e,r=(0,i.A)(e,bp),a=_p(Hp,n);return(0,In.jsx)(lr.button,(0,s.A)((0,s.A)({type:"button"},r),{},{ref:t,onClick:yr(e.onClick,()=>a.onOpenChange(!1))}))});Wp.displayName=Hp;var qp=e.forwardRef((e,t)=>{const{__scopePopover:n}=e,r=(0,i.A)(e,xp),a=Np(n);return(0,In.jsx)(Tu,(0,s.A)((0,s.A)((0,s.A)({},a),r),{},{ref:t}))});function Gp(e){return e?"open":"closed"}qp.displayName="PopoverArrow";var Kp=Mp,Yp=jp;const Xp=["className","align","sideOffset"];e.forwardRef((e,t)=>{let{className:n,align:r="center",sideOffset:a=4}=e,o=(0,i.A)(e,Xp);return(0,In.jsx)(Kp,{children:(0,In.jsx)(Yp,(0,s.A)({ref:t,align:r,sideOffset:a,className:Tn("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",n)},o))})}).displayName=Yp.displayName;const Qp=ho("trending-up",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Jp=t=>{let{isDarkMode:n,incomeData:r,addIncomeRecord:i,updateIncomeRecord:a,deleteIncomeRecord:o,expenseData:l,addExpenseRecord:c,updateExpenseRecord:u,deleteExpenseRecord:d,selectedDate:h,salesData:f,creditData:p,formResetKey:m,editingRecord:g,onRecordSaved:y,hideRecordsList:v,customers:w}=t;const[b,x]=(0,e.useState)("income"),[S,A]=(0,e.useState)({date:h,amount:"",description:"",type:"income",mpp:!1}),[E,N]=(0,e.useState)(null),[C,_]=(0,e.useState)([]),[T,I]=(0,e.useState)([]),[k,P]=(0,e.useState)([]),[R,D]=(0,e.useState)([]),[O,L]=(0,e.useState)(!1),{toast:M}=$o(),F=e.useMemo(()=>w&&w.some(e=>!0===e.isMPP),[w]);(0,e.useEffect)(()=>{_(el.Ay.getIncomeCategories()),I(el.Ay.getExpenseCategories()),P(el.Ay.getIncomeDescHistory()),D(el.Ay.getExpenseDescHistory())},[]),(0,e.useEffect)(()=>{P(el.Ay.getIncomeDescHistory()),D(el.Ay.getExpenseDescHistory())},[b]),(0,e.useEffect)(()=>{const e=e=>{O&&!e.target.closest(".relative")&&L(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[O]),(0,e.useEffect)(()=>{if(g){var e;const t=g.type||"income";x(t),A({date:g.date||h,amount:(null===(e=g.amount)||void 0===e?void 0:e.toString())||"",description:g.description||"",type:t,mpp:g.mpp||!1}),N(g.id)}else N(null)},[g,h]),(0,e.useEffect)(()=>{g||E||(A({date:h,amount:"",description:"",type:"income",mpp:!1}),x("income"))},[m,g,E,h]),(0,e.useEffect)(()=>{E||g||A(e=>(0,s.A)((0,s.A)({},e),{},{date:h}))},[h,E,g]);const j=()=>S.amount?{id:E||Date.now(),date:h,description:S.description,amount:parseFloat(S.amount)}:(M({title:"Error",description:"Please enter an amount",variant:"destructive"}),null),B=()=>{if(j()){if(E){const e={description:S.description,amount:parseFloat(S.amount),date:S.date,mpp:S.mpp||!1};"income"===b&&a?a(E,e):"expense"===b&&u&&u(E,e),N(null),A({date:h,description:"",amount:"",mpp:!1}),y&&y()}else if("income"===b){i({description:S.description,amount:parseFloat(S.amount),date:S.date,mpp:S.mpp||!1})&&(el.Ay.addIncomeDescHistory(S.description),P(el.Ay.getIncomeDescHistory()),A({date:h,description:"",amount:"",mpp:!1}),y&&y())}else{c({description:S.description,amount:parseFloat(S.amount),date:S.date,mpp:S.mpp||!1})&&(el.Ay.addExpenseDescHistory(S.description),D(el.Ay.getExpenseDescHistory()),A({date:h,description:"",amount:"",mpp:!1}),y&&y())}z()}},U=()=>{if(j())if("income"===b){i({description:S.description,amount:parseFloat(S.amount),date:S.date,mpp:S.mpp||!1})&&(el.Ay.addIncomeDescHistory(S.description),P(el.Ay.getIncomeDescHistory()),A(e=>(0,s.A)((0,s.A)({},e),{},{description:"",amount:""})),M({title:"Success",description:"Income added. Add more ".concat(b,"."),variant:"default"}))}else{c({description:S.description,amount:parseFloat(S.amount),date:S.date,mpp:S.mpp||!1})&&(el.Ay.addExpenseDescHistory(S.description),D(el.Ay.getExpenseDescHistory()),A(e=>(0,s.A)((0,s.A)({},e),{},{description:"",amount:""})),M({title:"Success",description:"Expense added. Add more ".concat(b,"."),variant:"default"}))}},z=()=>{A({date:h,amount:"",description:"",type:b,mpp:!1}),N(null)},V=r.filter(e=>e.date===h),H=l.filter(e=>e.date===h),W="income"===b?V:H;(()=>{if(!f)return 0;f.filter(e=>e.date===h).reduce((e,t)=>e+("cash"===t.type?t.amount:0),0)})(),V.reduce((e,t)=>e+t.amount,0),H.reduce((e,t)=>e+t.amount,0);return(0,In.jsxs)("div",{className:"space-y-6",children:[(0,In.jsxs)("div",{className:"space-y-4",children:[(0,In.jsxs)("div",{className:"space-y-1",children:[(0,In.jsx)(pr,{className:"text-sm font-medium ".concat(n?"text-gray-300":"text-slate-700"),children:"Date"}),(0,In.jsx)(sr,{type:"date",value:S.date,onChange:e=>A(t=>(0,s.A)((0,s.A)({},t),{},{date:e.target.value})),className:"text-sm ".concat(n?"bg-gray-600 border-gray-500 text-white":"")})]}),(0,In.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,In.jsxs)(rr,{variant:"income"===b?"default":"outline",onClick:()=>{x("income"),z()},className:"income"===b?"bg-green-600 hover:bg-green-700":"",children:[(0,In.jsx)(Qp,{className:"w-4 h-4 mr-2"}),"Income"]}),(0,In.jsxs)(rr,{variant:"expense"===b?"default":"outline",onClick:()=>{x("expense"),z()},className:"expense"===b?"bg-red-600 hover:bg-red-700":"",children:[(0,In.jsx)(zo,{className:"w-4 h-4 mr-2"}),"Expense"]})]}),(0,In.jsxs)("div",{className:"space-y-2",children:[(0,In.jsxs)("div",{className:"grid grid-cols-12 gap-1 text-xs font-medium ".concat(n?"text-gray-400":"text-slate-600"),children:[(0,In.jsx)("div",{className:"col-span-7",children:"Description"}),(0,In.jsx)("div",{className:"col-span-5",children:"Amount *"})]}),(0,In.jsx)("div",{className:"p-0.5 rounded-lg border ".concat(n?"bg-gray-700 border-gray-600":"bg-slate-50 border-slate-200"),children:(0,In.jsxs)("div",{className:"grid grid-cols-12 gap-0.5 items-start",children:[(0,In.jsxs)("div",{className:"col-span-7 relative",children:[(0,In.jsx)(sr,{type:"text",value:S.description,onChange:e=>A(t=>(0,s.A)((0,s.A)({},t),{},{description:e.target.value})),onFocus:()=>L(!0),placeholder:"Type ".concat(b," description..."),className:"text-sm ".concat(n?"bg-gray-600 border-gray-500 text-white":""),autoComplete:"off"}),O&&("income"===b?k:R).length>0&&(0,In.jsxs)("div",{className:"absolute top-full left-0 right-0 mt-1 z-50 rounded-md border shadow-lg ".concat(n?"bg-gray-700 border-gray-600":"bg-white border-gray-200"),children:[(0,In.jsx)("div",{className:"text-xs font-medium p-2 border-b ".concat(n?"text-gray-400 border-gray-600":"text-gray-600 border-gray-200"),children:"Recent Suggestions"}),(0,In.jsx)(jf,{className:"max-h-[200px]",children:(0,In.jsx)("div",{className:"p-1",children:("income"===b?k:R).map((e,t)=>(0,In.jsxs)("div",{className:"flex items-center justify-between p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-600 cursor-pointer group ".concat(n?"text-white":""),children:[(0,In.jsx)("span",{onClick:()=>{A(t=>(0,s.A)((0,s.A)({},t),{},{description:e})),L(!1)},className:"flex-1 text-sm",children:e}),(0,In.jsx)(rr,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 opacity-0 group-hover:opacity-100 hover:bg-red-100 dark:hover:bg-red-900",onClick:t=>{var n;t.stopPropagation(),n=e,"income"===b?(el.Ay.deleteIncomeDescHistory(n),P(el.Ay.getIncomeDescHistory())):(el.Ay.deleteExpenseDescHistory(n),D(el.Ay.getExpenseDescHistory())),M({title:"Removed",description:'"'.concat(n,'" removed from suggestions.'),variant:"default"})},children:(0,In.jsx)(fo,{className:"h-3 w-3 text-red-600 dark:text-red-400"})})]},t))})})]})]}),(0,In.jsx)("div",{className:"col-span-5",children:(0,In.jsx)(sr,{type:"number",step:"0.01",value:S.amount,onChange:e=>A(t=>(0,s.A)((0,s.A)({},t),{},{amount:e.target.value})),placeholder:"0.00",className:"text-sm font-medium ".concat(n?"bg-gray-600 border-gray-500 text-white":"")})})]})}),F&&(0,In.jsxs)("div",{className:"flex items-center space-x-2 pt-2",children:[(0,In.jsx)(mp,{id:"mpp-incexp",checked:S.mpp,onCheckedChange:e=>A(t=>(0,s.A)((0,s.A)({},t),{},{mpp:e}))}),(0,In.jsx)(pr,{htmlFor:"mpp-incexp",className:"text-sm font-medium cursor-pointer ".concat(n?"text-white":"text-slate-700"),children:"Manager Petrol Pump (MPP)"})]})]}),(0,In.jsxs)("div",{className:"flex flex-col gap-2 pt-4",children:[!E&&!g&&(0,In.jsxs)(rr,{onClick:U,className:"w-full ".concat("income"===b?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700"),children:[(0,In.jsx)(To,{className:"w-4 h-4 mr-2"}),"income"===b?"Add Income & Add more":"Add Expense & Add more"]}),(0,In.jsxs)("div",{className:"flex gap-3",children:[(0,In.jsxs)(rr,{onClick:B,className:"flex-1 ".concat("income"===b?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700"),children:[(0,In.jsx)(To,{className:"w-4 h-4 mr-2"}),E||g?"Update ".concat(b):"Add ".concat(b," & Close")]}),(E||g)&&(0,In.jsx)(rr,{variant:"outline",onClick:z,children:"Cancel"})]})]})]}),!g&&(0,In.jsxs)(In.Fragment,{children:[(0,In.jsx)(jh,{className:n?"bg-gray-600":"bg-slate-200"}),(0,In.jsxs)("div",{className:"space-y-3",children:[(0,In.jsxs)("div",{className:"flex items-center justify-between",children:[(0,In.jsxs)("h3",{className:"text-sm font-medium ".concat(n?"text-gray-300":"text-slate-700"),children:["income"===b?"Income":"Expense"," Records"]}),(0,In.jsxs)(Vf,{variant:"outline",className:"income"===b?"text-green-600 border-green-600":"text-red-600 border-red-600",children:[W.length," records"]})]}),0===W.length?(0,In.jsxs)("p",{className:"text-sm text-center py-4 ".concat(n?"text-gray-400":"text-slate-500"),children:["No ",b," records for ",new Date(h).toLocaleDateString()]}):(0,In.jsx)(jf,{className:"h-[300px]",children:(0,In.jsx)("div",{className:"space-y-2",children:W.map(e=>(0,In.jsx)("div",{className:"border rounded-lg p-3 ".concat(n?"border-gray-600 bg-gray-700":"border-slate-200 bg-slate-50"),children:(0,In.jsxs)("div",{className:"flex items-start justify-between",children:[(0,In.jsxs)("div",{className:"flex-1",children:[(0,In.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,In.jsx)(Vf,{className:"".concat("income"===b?"bg-green-100 text-green-800":"bg-red-100 text-red-800"," border-0 text-xs"),children:"income"===b?"Income":"Expense"}),e.mpp&&(0,In.jsx)(Vf,{className:"bg-blue-100 text-blue-800 border-0 text-xs",children:"MPP"})]}),e.description&&(0,In.jsx)("p",{className:"text-sm mb-2 ".concat(n?"text-gray-300":"text-slate-700"),children:e.description}),(0,In.jsxs)("div",{className:"flex items-center gap-2 text-lg font-semibold",children:[(0,In.jsx)(Fo,{className:"w-4 h-4 ".concat("income"===b?"text-green-600":"text-red-600")}),(0,In.jsx)("span",{className:"income"===b?"text-green-600":"text-red-600",children:e.amount.toFixed(2)})]}),(0,In.jsx)("p",{className:"text-xs mt-1 ".concat(n?"text-gray-400":"text-slate-500"),children:new Date(e.date).toLocaleDateString()})]}),(0,In.jsxs)("div",{className:"flex gap-1",children:[(0,In.jsx)(rr,{variant:"ghost",size:"sm",onClick:()=>((e,t)=>{E===e.id?(N(null),A({date:h,description:"",amount:"",mpp:!1})):(x(t),N(e.id),A({date:e.date||h,description:e.description,amount:e.amount.toString(),mpp:e.mpp||!1}))})(e,b),className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:(0,In.jsx)(Hf,{className:"w-4 h-4"})}),(0,In.jsx)(rr,{variant:"ghost",size:"sm",onClick:()=>{return t=e.id,void("income"===(n=b)&&o?o(t):"expense"===n&&d&&d(t));var t,n},className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:(0,In.jsx)(Wf,{className:"w-4 h-4"})})]})]})},e.id))})})]})]})]})},Zp=t=>{let{isDarkMode:n,settlementData:r,addSettlementRecord:i,updateSettlementRecord:a,deleteSettlementRecord:o,selectedDate:l,formResetKey:c,editingRecord:u,onRecordSaved:d,hideRecordsList:h,customers:f}=t;const[p,m]=(0,e.useState)({date:l,amount:"",description:"",mpp:!1}),g=e.useMemo(()=>f&&f.some(e=>!0===e.isMPP),[f]),[y,v]=(0,e.useState)(null),[w,b]=(0,e.useState)([]),{toast:x}=$o();(0,e.useEffect)(()=>{b(el.Ay.getSettlementTypes())},[]),(0,e.useEffect)(()=>{console.log("Settlement useEffect - editingRecord:",u),u?(console.log("Settlement - setting form data:",{date:u.date,amount:u.amount,description:u.description,mpp:u.mpp}),m({date:u.date,amount:u.amount.toString(),description:u.description,mpp:u.mpp||!1}),v(u.id)):v(null)},[u]),(0,e.useEffect)(()=>{!c||u||y||S()},[c,u,y]),(0,e.useEffect)(()=>{y||u||m(e=>(0,s.A)((0,s.A)({},e),{},{date:l}))},[l,y,u]);const S=()=>{m({date:l,amount:"",description:"",mpp:!1}),v(null)},A=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!p.amount||parseFloat(p.amount)<=0?x({title:"Invalid Input",description:"Please enter a valid amount",variant:"destructive"}):p.description.trim()?(y?(a(y,p),x({title:"Settlement Updated",description:"Settlement record has been updated successfully"})):(i(p),x({title:"Settlement Added",description:"Settlement record has been added successfully"})),S(),e&&d&&d()):x({title:"Invalid Input",description:"Please enter a description",variant:"destructive"})},E=r.filter(e=>e.date===l),N=E.reduce((e,t)=>e+t.amount,0);return(0,In.jsxs)(Mn,{className:"".concat(n?"bg-gray-800 border-gray-700":"bg-white border-slate-200"),children:[(0,In.jsx)(Fn,{className:"pb-3",children:(0,In.jsxs)(jn,{className:"flex items-center gap-2 text-lg ".concat(n?"text-white":"text-slate-800"),children:[(0,In.jsx)(Uo,{className:"w-5 h-5 text-orange-600"}),"Settlement"]})}),(0,In.jsxs)(Un,{className:"space-y-4",children:[(0,In.jsxs)("div",{className:"space-y-3",children:[(0,In.jsx)("h3",{className:"text-sm font-medium ".concat(n?"text-gray-300":"text-slate-700"),children:y?"Edit Settlement":"Add Settlement"}),(0,In.jsxs)("div",{className:"space-y-1",children:[(0,In.jsx)(pr,{className:"text-sm font-medium",children:"Date"}),(0,In.jsx)(sr,{type:"date",value:p.date,onChange:e=>m(t=>(0,s.A)((0,s.A)({},t),{},{date:e.target.value})),className:"text-sm ".concat(n?"bg-gray-600 border-gray-500 text-white":"")})]}),(0,In.jsx)("div",{className:"p-0.5 rounded-lg border ".concat(n?"bg-gray-700 border-gray-600":"bg-slate-50 border-slate-200"),children:(0,In.jsxs)("div",{className:"grid ".concat(g?"grid-cols-[1fr,1fr,auto]":"grid-cols-2"," gap-2 items-end p-2"),children:[(0,In.jsxs)("div",{className:"space-y-1",children:[(0,In.jsx)(pr,{className:"text-sm font-medium",children:"Settlement Type"}),(0,In.jsxs)(Eh,{value:p.description,onValueChange:e=>m(t=>(0,s.A)((0,s.A)({},t),{},{description:e})),children:[(0,In.jsx)(_h,{className:"text-sm ".concat(n?"bg-gray-600 border-gray-500 text-white":""),children:(0,In.jsx)(Ch,{placeholder:"Select settlement type..."})}),(0,In.jsx)(kh,{className:n?"bg-gray-700 border-gray-600":"",children:(0,In.jsx)(Nh,{children:w.length>0?w.map(e=>(0,In.jsx)(Ph,{value:e.name,className:n?"text-white hover:bg-gray-600":"",children:e.name},e.id)):(0,In.jsx)(Ph,{value:"no-types",disabled:!0,className:n?"text-gray-400":"text-gray-500",children:"No settlement types available. Add from Settings."})})})]})]}),(0,In.jsxs)("div",{className:"space-y-1",children:[(0,In.jsx)(pr,{className:"text-sm font-medium",children:"Amount"}),(0,In.jsx)(sr,{type:"number",step:"0.01",value:p.amount,onChange:e=>m(t=>(0,s.A)((0,s.A)({},t),{},{amount:e.target.value})),placeholder:"0.00",className:"text-sm font-medium ".concat(n?"bg-gray-600 border-gray-500 text-white":"")})]}),g&&(0,In.jsxs)("div",{className:"space-y-1",children:[(0,In.jsx)(pr,{className:"text-sm font-medium whitespace-nowrap",children:"MPP"}),(0,In.jsx)("div",{className:"flex items-center justify-center h-10 -mt-1",children:(0,In.jsx)("input",{type:"checkbox",checked:p.mpp,onChange:e=>m(t=>(0,s.A)((0,s.A)({},t),{},{mpp:e.target.checked})),className:"w-5 h-5 cursor-pointer accent-blue-500"})})]})]})}),y||u?(0,In.jsxs)("div",{className:"flex gap-2",children:[(0,In.jsxs)(rr,{onClick:()=>A(!0),className:"flex-1 bg-orange-600 hover:bg-orange-700 text-white",disabled:!p.amount||!p.description,children:[(0,In.jsx)(To,{className:"w-4 h-4 mr-1"}),"Update Settlement"]}),(0,In.jsx)(rr,{onClick:S,variant:"outline",className:"px-4",children:"Cancel"})]}):(0,In.jsxs)("div",{className:"space-y-2",children:[(0,In.jsxs)(rr,{onClick:()=>A(!1),className:"w-full bg-orange-600 hover:bg-orange-700 text-white",disabled:!p.amount||!p.description,children:[(0,In.jsx)(To,{className:"w-4 h-4 mr-1"}),"Add Settlement & Add More"]}),(0,In.jsxs)(rr,{onClick:()=>A(!0),className:"w-full bg-orange-700 hover:bg-orange-800 text-white",disabled:!p.amount||!p.description,children:[(0,In.jsx)(To,{className:"w-4 h-4 mr-1"}),"Add Settlement & Close"]})]})]}),!u&&(0,In.jsxs)(In.Fragment,{children:[(0,In.jsx)(jh,{}),(0,In.jsxs)("div",{className:"space-y-3",children:[(0,In.jsxs)("div",{className:"flex items-center justify-between",children:[(0,In.jsx)("h3",{className:"text-sm font-medium ".concat(n?"text-gray-300":"text-slate-700"),children:"Today's Settlements"}),(0,In.jsxs)(Vf,{variant:"outline",className:"text-orange-600 border-orange-600",children:["Total: \u20b9",N.toFixed(2)]})]}),0===E.length?(0,In.jsxs)("p",{className:"text-sm text-center py-4 ".concat(n?"text-gray-400":"text-slate-500"),children:["No settlement records for ",new Date(l).toLocaleDateString()]}):(0,In.jsx)(jf,{className:"h-[300px]",children:(0,In.jsx)("div",{className:"space-y-2",children:E.map(e=>(0,In.jsx)("div",{className:"border rounded-lg p-3 ".concat(n?"border-gray-600 bg-gray-700":"border-slate-200 bg-slate-50"),children:(0,In.jsxs)("div",{className:"flex items-start justify-between",children:[(0,In.jsxs)("div",{className:"flex-1",children:[(0,In.jsx)("div",{className:"flex items-center gap-2 mb-1",children:(0,In.jsx)("span",{className:"text-sm font-medium ".concat(n?"text-white":"text-slate-800"),children:e.description})}),(0,In.jsxs)("div",{className:"flex items-center gap-2 text-lg font-semibold text-orange-600",children:[(0,In.jsx)(Fo,{className:"w-4 h-4"}),e.amount.toFixed(2)]})]}),(0,In.jsxs)("div",{className:"flex gap-1",children:[(0,In.jsx)(rr,{variant:"ghost",size:"sm",onClick:()=>(e=>{m({date:e.date,amount:e.amount.toString(),description:e.description,mpp:e.mpp||!1}),v(e.id)})(e),className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:(0,In.jsx)(Hf,{className:"w-4 h-4"})}),(0,In.jsx)(rr,{variant:"ghost",size:"sm",onClick:()=>{return t=e.id,void((el.Ay.isProModeEnabled()||window.confirm("Are you sure you want to delete this settlement record?"))&&(o(t),x({title:"Settlement Deleted",description:"Settlement record has been deleted.",variant:"default"})));var t},className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:(0,In.jsx)(Wf,{className:"w-4 h-4"})})]})]})},e.id))})})]})]})]})]})},$p=ho("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),em=t=>{let{isDarkMode:r,fuelSettings:i,updateFuelRate:a,selectedDate:o,salesData:l,creditData:c,incomeData:u,expenseData:d,onClose:h}=t;const[f,p]=(0,e.useState)({}),{toast:m}=$o();e.useEffect(()=>{const e=n(8173).Ay,t=e.getRatesForDate(o),r={};Object.entries(i).forEach(n=>{let[i,s]=n,a=s.price;if(void 0!==t[i])a=t[i];else{const t=e.getLastChangedRate(i,o);null!==t&&(a=t)}r[i]=a.toString()}),p(r)},[o,i]);return(0,In.jsx)("div",{className:"space-y-6",children:(0,In.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:(0,In.jsxs)(Mn,{className:"".concat(r?"bg-gray-800 border-gray-700":"bg-white border-slate-200"," shadow-lg"),children:[(0,In.jsx)(Fn,{className:"bg-gradient-to-r from-green-600 to-green-700 text-white rounded-t-lg py-2",children:(0,In.jsxs)(jn,{className:"flex items-center gap-2 text-base",children:[(0,In.jsx)(Fo,{className:"w-5 h-5"}),"Rate Configuration for ",o]})}),(0,In.jsx)(Un,{className:"p-2",children:(0,In.jsxs)("div",{className:"space-y-2",children:[(0,In.jsxs)("div",{className:"space-y-2",children:[(0,In.jsx)(pr,{className:"text-xs font-semibold",children:"Fuel Rate (\u20b9 per Liter)"}),Object.entries(i).map(e=>{let[t,n]=e;return(0,In.jsxs)("div",{className:"border rounded-lg p-2 ".concat(r?"border-gray-600 bg-gray-700":"border-slate-200 bg-slate-50"),children:[(0,In.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,In.jsxs)("div",{className:"flex items-center gap-2",children:[(0,In.jsx)(Vf,{className:"bg-blue-100 text-blue-800 border-0 text-xs",children:t}),(0,In.jsxs)("span",{className:"text-xs text-slate-600",children:[n.nozzleCount," nozzle",n.nozzleCount>1?"s":""]})]}),(0,In.jsxs)("div",{className:"text-xs text-slate-500",children:["Current: \u20b9",n.price]})]}),(0,In.jsxs)("div",{className:"flex items-center gap-2",children:[(0,In.jsx)(pr,{className:"text-xs font-semibold min-w-0",children:"New Rate:"}),(0,In.jsxs)("div",{className:"flex items-center gap-1",children:[(0,In.jsx)(Fo,{className:"w-4 h-4 text-slate-500"}),(0,In.jsx)(sr,{type:"number",step:"0.01",min:"0",value:f[t]||"",onChange:e=>((e,t)=>{p(n=>(0,s.A)((0,s.A)({},n),{},{[e]:t}))})(t,e.target.value),placeholder:"0.00",className:"w-24"}),(0,In.jsx)("span",{className:"text-sm text-slate-500"})]})]})]},t)})]}),(0,In.jsx)(jh,{}),(0,In.jsx)("div",{className:"flex gap-3",children:(0,In.jsxs)(rr,{onClick:async()=>{let e=!1,t=!1,r=[];const s=n(8173).Ay.getRatesForDate(o);if(Object.entries(f).forEach(n=>{let[a,o]=n;const l=parseFloat(o);if(isNaN(l)||l<=0)return void(t=!0);(s[a]||i[a]&&i[a].price)!==l&&(e=!0,r.push({fuelType:a,price:l}))}),!t)if(e)try{for(const{fuelType:e,price:t}of r)await a(e,t,o);h&&h()}catch(l){console.error("Failed to save fuel rates:",l)}else h&&h()},className:"w-full bg-green-600 hover:bg-green-700",children:[(0,In.jsx)($p,{className:"w-4 h-4 mr-2"}),"Save Rate"]})})]})})]})})})};var tm=n(816);const nm=["className"],rm=["className","children"],im=["className"],sm=["className"],am=["className"],om=["className"],lm=Za,cm=$a,um=e.forwardRef((e,t)=>{let{className:n}=e,r=(0,i.A)(e,nm);return(0,In.jsx)(eo,(0,s.A)({ref:t,className:Tn("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n)},r))});um.displayName=eo.displayName;const dm=e.forwardRef((e,t)=>{let{className:n,children:r}=e,a=(0,i.A)(e,rm);return(0,In.jsxs)(cm,{children:[(0,In.jsx)(um,{}),(0,In.jsxs)(to,(0,s.A)((0,s.A)({ref:t,className:Tn("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n)},a),{},{children:[r,(0,In.jsxs)(io,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,In.jsx)(fo,{className:"h-4 w-4"}),(0,In.jsx)("span",{className:"sr-only",children:"Close"})]})]}))]})});dm.displayName=to.displayName;const hm=e=>{let{className:t}=e,n=(0,i.A)(e,im);return(0,In.jsx)("div",(0,s.A)({className:Tn("flex flex-col space-y-1.5 text-center sm:text-left",t)},n))};hm.displayName="DialogHeader";const fm=e=>{let{className:t}=e,n=(0,i.A)(e,sm);return(0,In.jsx)("div",(0,s.A)({className:Tn("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t)},n))};fm.displayName="DialogFooter";const pm=e.forwardRef((e,t)=>{let{className:n}=e,r=(0,i.A)(e,am);return(0,In.jsx)(no,(0,s.A)({ref:t,className:Tn("text-lg font-semibold leading-none tracking-tight",n)},r))});pm.displayName=no.displayName;const mm=e.forwardRef((e,t)=>{let{className:n}=e,r=(0,i.A)(e,om);return(0,In.jsx)(ro,(0,s.A)({ref:t,className:Tn("text-sm text-muted-foreground",n)},r))});mm.displayName=ro.displayName;const gm=ho("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),ym=ho("download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),vm=ho("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),wm=ho("phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),bm=ho("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),xm=ho("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),Sm=ho("log-out",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Am=ho("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),Em=ho("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),Nm=ho("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),Cm=t=>{var n,r;let{customers:i,onAddCustomer:a,onDeleteCustomer:o,onUpdateCustomer:l,isDarkMode:c}=t;const[u,d]=(0,e.useState)(""),[h,f]=(0,e.useState)(""),[p,m]=(0,e.useState)({show:!1,customer:null}),[g,y]=(0,e.useState)({show:!1,customer:null,balance:""}),[v,w]=(0,e.useState)(""),b=()=>{if(u.trim()){const e=parseFloat(h)||0;a(u.trim(),e),d(""),f("")}},x=e=>{"Enter"===e.key&&b()},S=i.filter(e=>e.name.toLowerCase().includes(v.toLowerCase()));return(0,In.jsxs)("div",{className:"space-y-4",children:[(0,In.jsx)(Mn,{className:"".concat(c?"bg-gray-800 border-gray-700":"bg-white border-slate-200"),children:(0,In.jsxs)(Un,{className:"p-4",children:[(0,In.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,In.jsx)(Wo,{className:"w-5 h-5 ".concat(c?"text-blue-400":"text-blue-600")}),(0,In.jsx)("h3",{className:"text-lg font-semibold ".concat(c?"text-white":"text-slate-800"),children:"Add New Customer"})]}),(0,In.jsxs)("div",{className:"space-y-3",children:[(0,In.jsxs)("div",{children:[(0,In.jsx)(pr,{htmlFor:"customerName",className:c?"text-gray-300":"text-slate-700",children:"Customer Name"}),(0,In.jsx)(sr,{id:"customerName",type:"text",value:u,onChange:e=>d(e.target.value),onKeyPress:x,placeholder:"Enter customer name",className:"mt-1 ".concat(c?"bg-gray-700 border-gray-600 text-white":"")})]}),(0,In.jsxs)("div",{children:[(0,In.jsx)(pr,{htmlFor:"startingBalance",className:c?"text-gray-300":"text-slate-700",children:"Starting Balance (Optional)"}),(0,In.jsx)(sr,{id:"startingBalance",type:"number",step:"0.01",value:h,onChange:e=>f(e.target.value),onKeyPress:x,placeholder:"0.00",className:"mt-1 ".concat(c?"bg-gray-700 border-gray-600 text-white":"")})]}),(0,In.jsxs)(rr,{onClick:b,className:"w-full bg-blue-600 hover:bg-blue-700 text-white",disabled:!u.trim(),children:[(0,In.jsx)(To,{className:"w-4 h-4 mr-2"}),"Add Customer"]})]})]})}),(0,In.jsx)(Mn,{className:"".concat(c?"bg-gray-800 border-gray-700":"bg-white border-slate-200"),children:(0,In.jsxs)(Un,{className:"p-4",children:[(0,In.jsxs)("h3",{className:"text-lg font-semibold mb-4 ".concat(c?"text-white":"text-slate-800"),children:["Customer List (",S.length,")"]}),i.length>0&&(0,In.jsx)("div",{className:"mb-4",children:(0,In.jsxs)("div",{className:"relative",children:[(0,In.jsx)(Em,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 ".concat(c?"text-gray-400":"text-slate-400")}),(0,In.jsx)(sr,{type:"text",value:v,onChange:e=>w(e.target.value),placeholder:"Search customers by name...",className:"pl-10 ".concat(c?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"")})]})}),0===i.length?(0,In.jsxs)("div",{className:"text-center py-8 ".concat(c?"text-gray-400":"text-slate-500"),children:[(0,In.jsx)(Wo,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),(0,In.jsx)("p",{children:"No customers added yet"}),(0,In.jsx)("p",{className:"text-sm mt-1",children:"Add your first customer above"})]}):0===S.length?(0,In.jsxs)("div",{className:"text-center py-8 ".concat(c?"text-gray-400":"text-slate-500"),children:[(0,In.jsx)(Em,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),(0,In.jsx)("p",{children:"No customers found"}),(0,In.jsx)("p",{className:"text-sm mt-1",children:"Try a different search term"})]}):(0,In.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:S.map(e=>(0,In.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border ".concat(c?"bg-gray-700 border-gray-600":"bg-slate-50 border-slate-200"),children:[(0,In.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,In.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center ".concat(c?"bg-blue-900 text-blue-300":"bg-blue-100 text-blue-600"),children:e.name.charAt(0).toUpperCase()}),(0,In.jsxs)("div",{className:"flex-1",children:[(0,In.jsxs)("div",{className:"flex items-center gap-2",children:[(0,In.jsx)("span",{className:"font-medium block ".concat(c?"text-white":"text-slate-800"),children:e.name}),(e.name.toLowerCase().includes("mobile petrol pump")||e.name.toLowerCase().includes("manager petrol pump")||e.name.toLowerCase().includes("m.petrol pump"))&&(0,In.jsxs)("label",{className:"flex items-center gap-1 cursor-pointer",children:[(0,In.jsx)("input",{type:"checkbox",checked:e.isMPP||!1,onChange:t=>l(e.id,e.startingBalance,t.target.checked),className:"w-4 h-4 cursor-pointer accent-blue-500"}),(0,In.jsx)("span",{className:"text-xs font-semibold ".concat(c?"text-blue-400":"text-blue-600"),children:"MPP"})]})]}),(0,In.jsxs)("span",{className:"text-xs ".concat(c?"text-orange-400":"text-orange-600"),children:["Balance: \u20b9",(e.startingBalance||0).toFixed(2)]})]})]}),(0,In.jsxs)("div",{className:"flex gap-2",children:[(0,In.jsx)(rr,{variant:"ghost",size:"sm",onClick:()=>(e=>{y({show:!0,customer:e,balance:(e.startingBalance||0).toString()})})(e),className:"hover:bg-blue-100 hover:text-blue-600 ".concat(c?"text-gray-400 hover:bg-blue-900 hover:text-blue-400":""),children:(0,In.jsx)(Nm,{className:"w-4 h-4"})}),(0,In.jsx)(rr,{variant:"ghost",size:"sm",onClick:()=>(e=>{el.Ay.isProModeEnabled()?o(e.id):m({show:!0,customer:e})})(e),className:"hover:bg-red-100 hover:text-red-600 ".concat(c?"text-gray-400 hover:bg-red-900 hover:text-red-400":""),children:(0,In.jsx)(Wf,{className:"w-4 h-4"})})]})]},e.id))})]})}),p.show&&(0,In.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,In.jsx)(Mn,{className:"w-full max-w-md ".concat(c?"bg-gray-800 border-gray-700":"bg-white border-slate-200"),children:(0,In.jsxs)(Un,{className:"p-6",children:[(0,In.jsxs)("div",{className:"flex items-start gap-4 mb-4",children:[(0,In.jsx)("div",{className:"p-2 rounded-full ".concat(c?"bg-red-900 text-red-400":"bg-red-100 text-red-600"),children:(0,In.jsx)(Gf,{className:"w-6 h-6"})}),(0,In.jsxs)("div",{className:"flex-1",children:[(0,In.jsx)("h3",{className:"text-lg font-semibold mb-2 ".concat(c?"text-white":"text-slate-800"),children:"Delete Customer?"}),(0,In.jsxs)("p",{className:"text-sm mb-1 ".concat(c?"text-gray-300":"text-slate-600"),children:["Are you sure you want to delete ",(0,In.jsxs)("span",{className:"font-semibold",children:['"',null===(n=p.customer)||void 0===n?void 0:n.name,'"']}),"?"]}),(0,In.jsx)("p",{className:"text-sm ".concat(c?"text-gray-400":"text-slate-500"),children:"This action cannot be undone."})]})]}),(0,In.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,In.jsx)(rr,{variant:"outline",onClick:()=>{m({show:!1,customer:null})},className:"".concat(c?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-slate-300 text-slate-700 hover:bg-slate-100"),children:"No, Cancel"}),(0,In.jsx)(rr,{onClick:()=>{p.customer&&o(p.customer.id),m({show:!1,customer:null})},className:"bg-red-600 hover:bg-red-700 text-white",children:"Yes, Delete"})]})]})})}),g.show&&(0,In.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,In.jsx)(Mn,{className:"w-full max-w-md ".concat(c?"bg-gray-800 border-gray-700":"bg-white border-slate-200"),children:(0,In.jsxs)(Un,{className:"p-6",children:[(0,In.jsxs)("div",{className:"mb-4",children:[(0,In.jsx)("h3",{className:"text-lg font-semibold mb-2 ".concat(c?"text-white":"text-slate-800"),children:"Edit Balance"}),(0,In.jsxs)("p",{className:"text-sm mb-4 ".concat(c?"text-gray-300":"text-slate-600"),children:["Update starting balance for ",(0,In.jsxs)("span",{className:"font-semibold",children:['"',null===(r=g.customer)||void 0===r?void 0:r.name,'"']})]}),(0,In.jsxs)("div",{children:[(0,In.jsx)(pr,{htmlFor:"editBalance",className:c?"text-gray-300":"text-slate-700",children:"Starting Balance"}),(0,In.jsx)(sr,{id:"editBalance",type:"number",step:"0.01",value:g.balance,onChange:e=>y(t=>(0,s.A)((0,s.A)({},t),{},{balance:e.target.value})),placeholder:"0.00",className:"mt-1 ".concat(c?"bg-gray-700 border-gray-600 text-white":""),autoFocus:!0})]})]}),(0,In.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,In.jsx)(rr,{variant:"outline",onClick:()=>{y({show:!1,customer:null,balance:""})},className:"".concat(c?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-slate-300 text-slate-700 hover:bg-slate-100"),children:"Cancel"}),(0,In.jsx)(rr,{onClick:()=>{if(g.customer){const e=parseFloat(g.balance)||0;l(g.customer.id,e)}y({show:!1,customer:null,balance:""})},className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Save Changes"})]})]})})})]})},_m=t=>{let{settlementTypes:n,onAddSettlementType:r,onDeleteSettlementType:i,onUpdateSettlementType:s,isDarkMode:a}=t;const[o,l]=(0,e.useState)(""),[c,u]=(0,e.useState)(null),[d,h]=(0,e.useState)(""),[f,p]=(0,e.useState)({show:!1,id:null,name:""}),{toast:m}=$o(),g=()=>{if(!o.trim())return void m({title:"Invalid Input",description:"Please enter a settlement type name",variant:"destructive"});(n||[]).some(e=>e.name.toLowerCase()===o.toLowerCase())?m({title:"Duplicate Type",description:"This settlement type already exists",variant:"destructive"}):(r(o),l(""),m({title:"Settlement Type Added",description:"".concat(o," has been added successfully")}))},y=()=>{u(null),h("")},v=e=>{d.trim()?(s(e,d),u(null),h("")):m({title:"Invalid Input",description:"Settlement type name cannot be empty",variant:"destructive"})},w=()=>{console.log("User cancelled deletion"),p({show:!1,id:null,name:""})},b=n||[];return(0,In.jsxs)("div",{className:"space-y-4",children:[(0,In.jsxs)("div",{className:"space-y-3",children:[(0,In.jsx)(pr,{className:"text-sm font-medium",children:"Add New Settlement Type"}),(0,In.jsxs)("div",{className:"flex gap-2",children:[(0,In.jsx)(sr,{value:o,onChange:e=>l(e.target.value),placeholder:"Enter settlement type name",className:"flex-1",autoComplete:"off",onKeyPress:e=>{"Enter"===e.key&&g()}}),(0,In.jsx)(rr,{onClick:g,size:"sm",children:(0,In.jsx)(To,{className:"w-4 h-4"})})]})]}),(0,In.jsx)(jh,{className:"my-4"}),(0,In.jsxs)("div",{className:"space-y-3",children:[(0,In.jsx)(pr,{className:"text-sm font-medium",children:"Manage Settlement Types"}),0===b.length?(0,In.jsxs)("div",{className:"text-center py-8 ".concat(a?"text-gray-400":"text-slate-500"),children:[(0,In.jsx)("p",{className:"text-sm",children:"No settlement types added yet"}),(0,In.jsx)("p",{className:"text-xs mt-1",children:"Add your first settlement type above"})]}):(0,In.jsx)("div",{className:"space-y-2",children:b.map(e=>(0,In.jsx)("div",{className:"border rounded-lg p-3 ".concat(a?"border-gray-600 bg-gray-700":"border-slate-200 bg-slate-50"),children:c===e.id?(0,In.jsxs)("div",{className:"flex items-center gap-2",children:[(0,In.jsx)(sr,{value:d,onChange:e=>h(e.target.value),className:"flex-1",autoFocus:!0,onKeyPress:t=>{"Enter"===t.key&&v(e.id),"Escape"===t.key&&y()}}),(0,In.jsx)(rr,{variant:"ghost",size:"sm",onClick:()=>v(e.id),className:"text-green-600 hover:text-green-700 hover:bg-green-50",children:(0,In.jsx)(gh,{className:"w-4 h-4"})}),(0,In.jsx)(rr,{variant:"ghost",size:"sm",onClick:y,className:"text-gray-600 hover:text-gray-700 hover:bg-gray-50",children:(0,In.jsx)(fo,{className:"w-4 h-4"})})]}):(0,In.jsxs)("div",{className:"flex items-center justify-between",children:[(0,In.jsx)(Vf,{className:"bg-orange-100 text-orange-800 border-0",children:e.name}),(0,In.jsxs)("div",{className:"flex gap-1",children:[(0,In.jsx)(rr,{variant:"ghost",size:"sm",onClick:()=>{return t=e.id,n=e.name,u(t),void h(n);var t,n},className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:(0,In.jsx)(Hf,{className:"w-3 h-3"})}),(0,In.jsx)(rr,{variant:"ghost",size:"sm",onClick:()=>{return t=e.id,n=e.name,console.log("Delete clicked for:",t,n),void(el.Ay.isProModeEnabled()?(console.log("Pro Mode enabled, deleting directly"),i(t)):p({show:!0,id:t,name:n}));var t,n},className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:(0,In.jsx)(Wf,{className:"w-3 h-3"})})]})]})},e.id))})]}),(0,In.jsxs)("div",{className:"p-4 rounded-lg border mt-4 ".concat(a?"bg-blue-900/20 border-blue-800":"bg-blue-50 border-blue-200"),children:[(0,In.jsxs)("p",{className:"text-xs ".concat(a?"text-blue-400":"text-blue-700"),children:["\u2139\ufe0f ",(0,In.jsx)("strong",{children:"About Settlements:"})]}),(0,In.jsx)("p",{className:"text-xs mt-1 ".concat(a?"text-blue-300":"text-blue-600"),children:"Settlements are amounts transferred from cash sales to bank. This reduces your cash in hand but doesn't affect total sales."})]}),(0,In.jsx)(lm,{open:f.show,onOpenChange:e=>!e&&w(),children:(0,In.jsxs)(dm,{className:a?"bg-gray-800 text-white":"",children:[(0,In.jsxs)(hm,{children:[(0,In.jsxs)(pm,{className:"flex items-center gap-2",children:[(0,In.jsx)(Gf,{className:"w-5 h-5 text-red-600"}),"Confirm Deletion"]}),(0,In.jsxs)(mm,{className:a?"text-gray-300":"",children:['Are you sure you want to delete "',f.name,'"?',(0,In.jsx)("br",{}),(0,In.jsx)("span",{className:"text-red-600 font-semibold",children:"This action cannot be undone."})]})]}),(0,In.jsxs)(fm,{className:"gap-2 sm:gap-0",children:[(0,In.jsx)(rr,{variant:"outline",onClick:w,className:a?"border-gray-600":"",children:"Cancel"}),(0,In.jsx)(rr,{variant:"destructive",onClick:()=>{console.log("User confirmed deletion"),console.log("Calling onDeleteSettlementType with id:",f.id),i(f.id),p({show:!1,id:null,name:""})},className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})})]})};var Tm=n(8970);const Im=t=>{let{isDarkMode:n,data:r,onClose:i}=t;const[s,a]=(0,e.useState)(""),[o,l]=(0,e.useState)(!1),{toast:c}=((0,e.useRef)(null),$o());(0,e.useEffect)(()=>{u()},[r]);const u=async()=>{try{l(!0);const e=JSON.stringify(r),t=new Blob([e]).size,i=(t/1024).toFixed(2);if(console.log("Data size: ".concat(i," KB")),t>2900&&c({title:"Warning: Large Data",description:"Data size is ".concat(i," KB. For best results, keep data under 2.8 KB. QR code may take longer to scan."),variant:"destructive"}),t>7e3)throw new Error("Data too large (".concat(i," KB). Maximum is 7 KB. Please select a date with fewer transactions."));const s=await Tm.toDataURL(e,{width:800,margin:1,color:{dark:n?"#FFFFFF":"#000000",light:n?"#1F2937":"#FFFFFF"},errorCorrectionLevel:"L"});a(s),c({title:"QR Code Generated",description:"Ready to scan! Data size: ".concat(i," KB")})}catch(e){console.error("QR Code generation error:",e),c({title:"Generation Failed",description:"Failed to generate QR code. Data might be too large.",variant:"destructive"})}finally{l(!1)}};return(0,In.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,In.jsx)("div",{className:"w-full max-w-md rounded-lg shadow-xl ".concat(n?"bg-gray-800 border-gray-700":"bg-white border-slate-200"," border"),children:(0,In.jsxs)("div",{className:"p-6",children:[(0,In.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,In.jsx)("h3",{className:"text-lg font-semibold ".concat(n?"text-white":"text-slate-800"),children:"Send Data via QR Code"}),(0,In.jsx)(rr,{variant:"ghost",size:"sm",onClick:i,className:"h-8 w-8 p-0",children:(0,In.jsx)(fo,{className:"w-4 h-4"})})]}),(0,In.jsx)("div",{className:"space-y-4",children:o?(0,In.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,In.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600"})}):s?(0,In.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,In.jsx)("div",{className:"p-4 rounded-lg ".concat(n?"bg-gray-700":"bg-slate-50"),children:(0,In.jsx)("img",{src:s,alt:"Backup QR Code",className:"w-64 h-64"})}),(0,In.jsxs)("div",{className:"text-center space-y-2 p-4 rounded-lg border ".concat(n?"bg-blue-900/20 border-blue-800":"bg-blue-50 border-blue-200"),children:[(0,In.jsx)("p",{className:"text-sm font-medium ".concat(n?"text-blue-300":"text-blue-700"),children:"\ud83d\udcf1 Instructions"}),(0,In.jsxs)("p",{className:"text-xs ".concat(n?"text-blue-400":"text-blue-600"),children:["1. Receiver opens Settings \u2192 Contact tab",(0,In.jsx)("br",{}),'2. Click "Receive via QR Code"',(0,In.jsx)("br",{}),"3. Point camera at this QR code",(0,In.jsx)("br",{}),"4. Data will be automatically merged"]})]}),(0,In.jsxs)(rr,{onClick:()=>{const e=document.createElement("a");e.download="backup-qr-".concat((new Date).toISOString().split("T")[0],".png"),e.href=s,e.click(),c({title:"QR Code Downloaded",description:"QR code image saved to downloads"})},className:"w-full bg-orange-600 hover:bg-orange-700 text-white",children:[(0,In.jsx)(ym,{className:"w-4 h-4 mr-2"}),"Download QR Code"]})]}):(0,In.jsx)("p",{className:"text-center ".concat(n?"text-gray-400":"text-slate-500"),children:"Failed to generate QR code"})})]})})})};var km;!function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"}(km||(km={}));var Pm,Rm,Dm=new Map([[km.QR_CODE,"QR_CODE"],[km.AZTEC,"AZTEC"],[km.CODABAR,"CODABAR"],[km.CODE_39,"CODE_39"],[km.CODE_93,"CODE_93"],[km.CODE_128,"CODE_128"],[km.DATA_MATRIX,"DATA_MATRIX"],[km.MAXICODE,"MAXICODE"],[km.ITF,"ITF"],[km.EAN_13,"EAN_13"],[km.EAN_8,"EAN_8"],[km.PDF_417,"PDF_417"],[km.RSS_14,"RSS_14"],[km.RSS_EXPANDED,"RSS_EXPANDED"],[km.UPC_A,"UPC_A"],[km.UPC_E,"UPC_E"],[km.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]);function Om(e){return Object.values(km).includes(e)}!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"}(Pm||(Pm={})),function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"}(Rm||(Rm={}));var Lm,Mm=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[Rm.SCAN_TYPE_CAMERA,Rm.SCAN_TYPE_FILE],e}(),Fm=function(){function e(e,t){this.format=e,this.formatName=t}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!Dm.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,Dm.get(t))},e}(),jm=function(){function e(){}return e.createFromText=function(e){return{decodedText:e,result:{text:e}}},e.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},e}();!function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"}(Lm||(Lm={}));var Bm=function(){function e(){}return e.createFrom=function(e){return{errorMessage:e,type:Lm.UNKWOWN_ERROR}},e}(),Um=function(){function e(e){this.verbose=e}return e.prototype.log=function(e){this.verbose&&console.log(e)},e.prototype.warn=function(e){this.verbose&&console.warn(e)},e.prototype.logError=function(e,t){(this.verbose||!0===t)&&console.error(e)},e.prototype.logErrors=function(e){if(0===e.length)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},e}();function zm(e){return"undefined"===typeof e||null===e}var Vm,Hm=function(){function e(){}return e.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},e.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),Wm=function(){function e(){}return e.scanningStatus=function(){return"Scanning"},e.idleStatus=function(){return"Idle"},e.errorStatus=function(){return"Error"},e.permissionStatus=function(){return"Permission"},e.noCameraFoundErrorStatus=function(){return"No Cameras"},e.lastMatch=function(e){return"Last Match: ".concat(e)},e.codeScannerTitle=function(){return"Code Scanner"},e.cameraPermissionTitle=function(){return"Request Camera Permissions"},e.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},e.noCameraFound=function(){return"No camera found"},e.scanButtonStopScanningText=function(){return"Stop Scanning"},e.scanButtonStartScanningText=function(){return"Start Scanning"},e.torchOnButton=function(){return"Switch On Torch"},e.torchOffButton=function(){return"Switch Off Torch"},e.torchOnFailedMessage=function(){return"Failed to turn on torch"},e.torchOffFailedMessage=function(){return"Failed to turn off torch"},e.scanButtonScanningStarting=function(){return"Launching Camera..."},e.textIfCameraScanSelected=function(){return"Scan an Image File"},e.textIfFileScanSelected=function(){return"Scan using camera directly"},e.selectCamera=function(){return"Select Camera"},e.fileSelectionChooseImage=function(){return"Choose Image"},e.fileSelectionChooseAnother=function(){return"Choose Another"},e.fileSelectionNoImageSelected=function(){return"No image choosen"},e.anonymousCameraPrefix=function(){return"Anonymous Camera"},e.dragAndDropMessage=function(){return"Or drop an image to scan"},e.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},e.zoom=function(){return"zoom"},e.loadingImage=function(){return"Loading image..."},e.cameraScanAltText=function(){return"Camera based scan"},e.fileScanAltText=function(){return"Fule based scan"},e}(),qm=function(){function e(){}return e.poweredBy=function(){return"Powered by "},e.reportIssues=function(){return"Report issues"},e}(),Gm=function(){function e(){}return e.isMediaStreamConstraintsValid=function(e,t){if("object"!==typeof e){var n=typeof e;return t.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(n,"."),!0),!1}for(var r=new Set(["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"]),i=0,s=Object.keys(e);i<s.length;i++){var a=s[i];if(r.has(a))return t.logError("".concat(a," is not supported videoConstaints."),!0),!1}return!0},e}(),Km=n(2072),Ym=function(){function e(e,t,n){if(this.formatMap=new Map([[km.QR_CODE,Km.BarcodeFormat.QR_CODE],[km.AZTEC,Km.BarcodeFormat.AZTEC],[km.CODABAR,Km.BarcodeFormat.CODABAR],[km.CODE_39,Km.BarcodeFormat.CODE_39],[km.CODE_93,Km.BarcodeFormat.CODE_93],[km.CODE_128,Km.BarcodeFormat.CODE_128],[km.DATA_MATRIX,Km.BarcodeFormat.DATA_MATRIX],[km.MAXICODE,Km.BarcodeFormat.MAXICODE],[km.ITF,Km.BarcodeFormat.ITF],[km.EAN_13,Km.BarcodeFormat.EAN_13],[km.EAN_8,Km.BarcodeFormat.EAN_8],[km.PDF_417,Km.BarcodeFormat.PDF_417],[km.RSS_14,Km.BarcodeFormat.RSS_14],[km.RSS_EXPANDED,Km.BarcodeFormat.RSS_EXPANDED],[km.UPC_A,Km.BarcodeFormat.UPC_A],[km.UPC_E,Km.BarcodeFormat.UPC_E],[km.UPC_EAN_EXTENSION,Km.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!Km)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=n;var r=this.createZXingFormats(e),i=new Map;i.set(Km.DecodeHintType.POSSIBLE_FORMATS,r),i.set(Km.DecodeHintType.TRY_HARDER,!1),this.hints=i}return e.prototype.decodeAsync=function(e){var t=this;return new Promise(function(n,r){try{n(t.decode(e))}catch(i){r(i)}})},e.prototype.decode=function(e){var t=new Km.MultiFormatReader(this.verbose,this.hints),n=new Km.HTMLCanvasElementLuminanceSource(e),r=new Km.BinaryBitmap(new Km.HybridBinarizer(n)),i=t.decode(r);return{text:i.text,format:Fm.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,n,r){e.set(t,n)}),e},e.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},e.prototype.createZXingFormats=function(e){for(var t=[],n=0,r=e;n<r.length;n++){var i=r[n];this.formatMap.has(i)?t.push(this.formatMap.get(i)):this.logger.logError("".concat(i," is not supported by")+"ZXingHtml5QrcodeShim")}return t},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),Xm=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function a(e){try{l(r.next(e))}catch(b_){s(b_)}}function o(e){try{l(r.throw(e))}catch(b_){s(b_)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((r=r.apply(e,t||[])).next())})},Qm=function(e,t){var n,r,i,s,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,o[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(b_){o=[6,b_],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},Jm=function(){function e(t,n,r){if(this.formatMap=new Map([[km.QR_CODE,"qr_code"],[km.AZTEC,"aztec"],[km.CODABAR,"codabar"],[km.CODE_39,"code_39"],[km.CODE_93,"code_93"],[km.CODE_128,"code_128"],[km.DATA_MATRIX,"data_matrix"],[km.ITF,"itf"],[km.EAN_13,"ean_13"],[km.EAN_8,"ean_8"],[km.PDF_417,"pdf417"],[km.UPC_A,"upc_a"],[km.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var i=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(i),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){return"BarcodeDetector"in window&&"undefined"!==typeof new BarcodeDetector({formats:["qr_code"]})},e.prototype.decodeAsync=function(e){return Xm(this,void 0,void 0,function(){var t,n;return Qm(this,function(r){switch(r.label){case 0:return[4,this.detector.detect(e)];case 1:if(!(t=r.sent())||0===t.length)throw"No barcode or QR code detected.";return[2,{text:(n=this.selectLargestBarcode(t)).rawValue,format:Fm.create(this.toHtml5QrcodeSupportedFormats(n.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(e){for(var t=null,n=0,r=0,i=e;r<i.length;r++){var s=i[r],a=s.boundingBox.width*s.boundingBox.height;a>n&&(n=a,t=s)}if(!t)throw"No largest barcode found";return t},e.prototype.createBarcodeDetectorFormats=function(e){for(var t=[],n=0,r=e;n<r.length;n++){var i=r[n];this.formatMap.has(i)?t.push(this.formatMap.get(i)):this.logger.warn("".concat(i," is not supported by")+"BarcodeDetectorDelegate")}return{formats:t}},e.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},e.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,n,r){e.set(t,n)}),e},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),Zm=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function a(e){try{l(r.next(e))}catch(b_){s(b_)}}function o(e){try{l(r.throw(e))}catch(b_){s(b_)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((r=r.apply(e,t||[])).next())})},$m=function(e,t){var n,r,i,s,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,o[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(b_){o=[6,b_],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},eg=function(){function e(e,t,n,r){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=n,t&&Jm.isSupported()?(this.primaryDecoder=new Jm(e,n,r),this.secondaryDecoder=new Ym(e,n,r)):this.primaryDecoder=new Ym(e,n,r)}return e.prototype.decodeAsync=function(e){return Zm(this,void 0,void 0,function(){var t;return $m(this,function(n){switch(n.label){case 0:t=performance.now(),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,n.sent()];case 3:return this.possiblyLogPerformance(t),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(e){return Zm(this,void 0,void 0,function(){var t,n;return $m(this,function(r){switch(r.label){case 0:t=performance.now(),r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,r.sent()];case 3:if(n=r.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw n;case 4:return this.possiblyLogPerformance(t),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?!1===this.wasPrimaryDecoderUsedInLastDecode?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(e){if(this.verbose){var t=performance.now()-e;this.executionResults.push(t),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,t=0,n=this.executionResults;t<n.length;t++){e+=n[t]}var r=e/this.executionResults.length;console.log("".concat(r," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),tg=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ng=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function a(e){try{l(r.next(e))}catch(b_){s(b_)}}function o(e){try{l(r.throw(e))}catch(b_){s(b_)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((r=r.apply(e,t||[])).next())})},rg=function(e,t){var n,r,i,s,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,o[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(b_){o=[6,b_],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},ig=function(){function e(e,t){this.name=e,this.track=t}return e.prototype.isSupported=function(){return!!this.track.getCapabilities&&this.name in this.track.getCapabilities()},e.prototype.apply=function(e){var t={};t[this.name]=e;var n={advanced:[t]};return this.track.applyConstraints(n)},e.prototype.value=function(){var e=this.track.getSettings();return this.name in e?e[this.name]:null},e}(),sg=function(e){function t(t){return e.call(this,"zoom",t)||this}return tg(t,e),t}(function(e){function t(t,n){return e.call(this,t,n)||this}return tg(t,e),t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(e){var t={};t[this.name]=e;var n={advanced:[t]};return this.track.applyConstraints(n)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var e=this.track.getCapabilities()[this.name];return{min:e.min,max:e.max,step:e.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t}(ig)),ag=function(e){function t(t){return e.call(this,"torch",t)||this}return tg(t,e),t}(ig),og=function(){function e(e){this.track=e}return e.prototype.zoomFeature=function(){return new sg(this.track)},e.prototype.torchFeature=function(){return new ag(this.track)},e}(),lg=function(){function e(e,t,n){this.isClosed=!1,this.parentElement=e,this.mediaStream=t,this.callbacks=n,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return e.prototype.createVideoElement=function(e){var t=document.createElement("video");return t.style.width="".concat(e,"px"),t.style.display="block",t.muted=!0,t.setAttribute("muted","true"),t.playsInline=!0,t},e.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var t=function(){var n=e.surface.clientWidth,r=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(n,r),e.surface.removeEventListener("playing",t)};this.surface.addEventListener("playing",t),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,n,r,i){return ng(this,void 0,void 0,function(){var s,a;return rg(this,function(o){switch(o.label){case 0:return s=new e(t,n,i),r.aspectRatio?(a={aspectRatio:r.aspectRatio},[4,s.getFirstTrackOrFail().applyConstraints(a)]):[3,2];case 1:o.sent(),o.label=2;case 2:return s.setupSurface(),[2,s]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),0===this.mediaStream.getVideoTracks().length)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(e){this.failIfClosed();var t=this,n=function(){setTimeout(e,200),t.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(e){return ng(this,void 0,void 0,function(){return rg(this,function(t){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(t,n){var r=e.mediaStream.getVideoTracks().length,i=0;e.mediaStream.getVideoTracks().forEach(function(n){e.mediaStream.removeTrack(n),n.stop(),++i>=r&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),t())})})},e.prototype.getCapabilities=function(){return new og(this.getFirstTrackOrFail())},e}(),cg=function(){function e(e){this.mediaStream=e}return e.prototype.render=function(e,t,n){return ng(this,void 0,void 0,function(){return rg(this,function(r){return[2,lg.create(e,this.mediaStream,t,n)]})})},e.create=function(t){return ng(this,void 0,void 0,function(){var n;return rg(this,function(r){switch(r.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return[2,new e(r.sent())]}})})},e}(),ug=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function a(e){try{l(r.next(e))}catch(b_){s(b_)}}function o(e){try{l(r.throw(e))}catch(b_){s(b_)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((r=r.apply(e,t||[])).next())})},dg=function(e,t){var n,r,i,s,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,o[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(b_){o=[6,b_],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},hg=function(){function e(){}return e.failIfNotSupported=function(){return ug(this,void 0,void 0,function(){return dg(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(e){return ug(this,void 0,void 0,function(){return dg(this,function(t){return[2,cg.create(e)]})})},e}(),fg=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function a(e){try{l(r.next(e))}catch(b_){s(b_)}}function o(e){try{l(r.throw(e))}catch(b_){s(b_)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((r=r.apply(e,t||[])).next())})},pg=function(e,t){var n,r,i,s,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,o[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(b_){o=[6,b_],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},mg=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=Hm.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=Hm.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if("https:"===location.protocol)return!0;var e=location.host.split(":")[0];return"127.0.0.1"===e||"localhost"===e},e.getCamerasFromMediaDevices=function(){return fg(this,void 0,void 0,function(){var e,t,n,r,i,s,a;return pg(this,function(o){switch(o.label){case 0:return e=function(e){for(var t=0,n=e.getVideoTracks();t<n.length;t++){var r=n[t];r.enabled=!1,r.stop(),e.removeTrack(r)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return t=o.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(n=o.sent(),r=[],i=0,s=n;i<s.length;i++)"videoinput"===(a=s[i]).kind&&r.push({id:a.deviceId,label:a.label});return e(t),[2,r]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,t){MediaStreamTrack.getSources(function(t){for(var n=[],r=0,i=t;r<i.length;r++){var s=i[r];"video"===s.kind&&n.push({id:s.id,label:s.label})}e(n)})})},e}();!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"}(Vm||(Vm={}));var gg,yg=function(){function e(){this.state=Vm.NOT_STARTED,this.onGoingTransactionNewState=Vm.UNKNOWN}return e.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},e.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===Vm.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Vm.UNKNOWN,this.directTransition(e)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===Vm.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Vm.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Vm.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(e){switch(this.state){case Vm.UNKNOWN:throw"Transition from unknown is not allowed";case Vm.NOT_STARTED:this.failIfNewStateIs(e,[Vm.PAUSED]);case Vm.SCANNING:case Vm.PAUSED:}},e.prototype.failIfNewStateIs=function(e,t){for(var n=0,r=t;n<r.length;n++){if(e===r[n])throw"Cannot transition from ".concat(this.state," to ").concat(e)}},e}(),vg=function(){function e(e){this.stateManager=e}return e.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},e.prototype.directTransition=function(e){this.stateManager.directTransition(e)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===Vm.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==Vm.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Vm.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===Vm.PAUSED},e}(),wg=function(){function e(){}return e.create=function(){return new vg(new yg)},e}(),bg=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),xg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return bg(t,e),t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(Mm),Sg=function(){function e(e,t){this.logger=t,this.fps=xg.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=!0===e.disableFlip,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=xg.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Gm.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!zm(this.qrbox)},e.create=function(t,n){return new e(t,n)},e}(),Ag=function(){function e(e,t){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");var n;this.elementId=e,this.verbose=!1,"boolean"==typeof t?this.verbose=!0===t:t&&(n=t,this.verbose=!0===n.verbose,n.experimentalFeatures),this.logger=new Um(this.verbose),this.qrcode=new eg(this.getSupportedFormats(t),this.getUseBarCodeDetectorIfSupported(n),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=wg.create()}return e.prototype.start=function(e,t,n,r){var i,s=this;if(!e)throw"cameraIdOrConfig is required";if(!n||"function"!=typeof n)throw"qrCodeSuccessCallback is required and should be a function.";i=r||(this.verbose?this.logger.log:function(){});var a=Sg.create(t,this.logger);this.clearElement();var o=!1;a.videoConstraints&&(a.isMediaStreamConstraintsValid()?o=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var l=o,c=document.getElementById(this.elementId);c.clientWidth?c.clientWidth:xg.DEFAULT_WIDTH;c.style.position="relative",this.shouldScan=!0,this.element=c;var u=this,d=this.stateManagerProxy.startTransition(Vm.SCANNING);return new Promise(function(t,r){var o=l?a.videoConstraints:u.createVideoConstraints(e);if(!o)return d.cancel(),void r("videoConstraints should be defined");var c={};l&&!a.aspectRatio||(c.aspectRatio=a.aspectRatio);var h={onRenderSurfaceReady:function(e,t){u.setupUi(e,t,a),u.isScanning=!0,u.foreverScan(a,n,i)}};hg.failIfNotSupported().then(function(e){e.create(o).then(function(e){return e.render(s.element,c,h).then(function(e){u.renderedCamera=e,d.execute(),t(null)}).catch(function(e){d.cancel(),r(e)})}).catch(function(e){d.cancel(),r(Hm.errorGettingUserMedia(e))})}).catch(function(e){d.cancel(),r(Hm.cameraStreamingNotSupported())})})},e.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Vm.PAUSED),this.showPausedState(),(zm(e)||!0!==e)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,t=function(){e.stateManagerProxy.directTransition(Vm.SCANNING),e.hidePausedState()};this.renderedCamera.isPaused()?this.renderedCamera.resume(function(){t()}):t()},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var t=this.stateManagerProxy.startTransition(Vm.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var n=this;return this.renderedCamera.close().then(function(){return n.renderedCamera=null,n.element&&(n.element.removeChild(n.canvasElement),n.canvasElement=null),function(){if(e.element){var t=document.getElementById(xg.SHADED_REGION_ELEMENT_ID);t&&e.element.removeChild(t)}}(),n.qrRegion&&(n.qrRegion=null),n.context&&(n.context=null),t.execute(),n.hidePausedState(),n.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(e,t){return this.scanFileV2(e,t).then(function(e){return e.decodedText})},e.prototype.scanFileV2=function(e,t){var n=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(zm(t)&&(t=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(r,i){n.possiblyCloseLastScanImageFile(),n.clearElement(),n.lastScanImageFile=URL.createObjectURL(e);var s=new Image;s.onload=function(){var e=s.width,a=s.height,o=document.getElementById(n.elementId),l=o.clientWidth?o.clientWidth:xg.DEFAULT_WIDTH,c=Math.max(o.clientHeight?o.clientHeight:a,xg.FILE_SCAN_MIN_HEIGHT),u=n.computeCanvasDrawConfig(e,a,l,c);if(t){var d=n.createCanvasElement(l,c,"qr-canvas-visible");d.style.display="inline-block",o.appendChild(d);var h=d.getContext("2d");if(!h)throw"Unable to get 2d context from canvas";h.canvas.width=l,h.canvas.height=c,h.drawImage(s,0,0,e,a,u.x,u.y,u.width,u.height)}var f=xg.FILE_SCAN_HIDDEN_CANVAS_PADDING,p=Math.max(s.width,u.width),m=Math.max(s.height,u.height),g=p+2*f,y=m+2*f,v=n.createCanvasElement(g,y);o.appendChild(v);var w=v.getContext("2d");if(!w)throw"Unable to get 2d context from canvas";w.canvas.width=g,w.canvas.height=y,w.drawImage(s,0,0,e,a,f,f,p,m);try{n.qrcode.decodeRobustlyAsync(v).then(function(e){r(jm.createFromQrcodeResult(e))}).catch(i)}catch(b){i("QR code parse error, error = ".concat(b))}},s.onerror=i,s.onabort=i,s.onstalled=i,s.onsuspend=i,s.src=URL.createObjectURL(e)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return mg.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(e){if(!e)throw"videoConstaints is required argument.";if(!Gm.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},e.prototype.getRenderedCameraOrFail=function(){if(null==this.renderedCamera)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(e){var t=[km.QR_CODE,km.AZTEC,km.CODABAR,km.CODE_39,km.CODE_93,km.CODE_128,km.DATA_MATRIX,km.MAXICODE,km.ITF,km.EAN_13,km.EAN_8,km.PDF_417,km.RSS_14,km.RSS_EXPANDED,km.UPC_A,km.UPC_E,km.UPC_EAN_EXTENSION];if(!e||"boolean"==typeof e)return t;if(!e.formatsToSupport)return t;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(0===e.formatsToSupport.length)throw"Atleast 1 formatsToSupport is needed.";for(var n=[],r=0,i=e.formatsToSupport;r<i.length;r++){var s=i[r];Om(s)?n.push(s):this.logger.warn("Invalid format: ".concat(s," passed in config, ignoring."))}if(0===n.length)throw"None of formatsToSupport match supported values.";return n},e.prototype.getUseBarCodeDetectorIfSupported=function(e){if(zm(e))return!0;if(!zm(e.useBarCodeDetectorIfSupported))return!1!==e.useBarCodeDetectorIfSupported;if(zm(e.experimentalFeatures))return!0;var t=e.experimentalFeatures;return!!zm(t.useBarCodeDetectorIfSupported)||!1!==t.useBarCodeDetectorIfSupported},e.prototype.validateQrboxSize=function(e,t,n){var r=this,i=n.qrbox;this.validateQrboxConfig(i);var s,a=this.toQrdimensions(e,t,i),o=function(e){if(e<xg.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(xg.MIN_QR_BOX_SIZE,"px.")};o(a.width),o(a.height),a.width=((s=a.width)>e&&(r.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),s=e),s)},e.prototype.validateQrboxConfig=function(e){if("number"!==typeof e&&"function"!==typeof e&&(void 0===e.width||void 0===e.height))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(e,t,n){if("number"===typeof n)return{width:n,height:n};if("function"===typeof n)try{return n(e,t)}catch(r){throw new Error("qrbox config was passed as a function but it failed with unknown error"+r)}return n},e.prototype.setupUi=function(e,t,n){n.isShadedBoxEnabled()&&this.validateQrboxSize(e,t,n);var r=zm(n.qrbox)?{width:e,height:t}:n.qrbox;this.validateQrboxConfig(r);var i=this.toQrdimensions(e,t,r);i.height>t&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var s=n.isShadedBoxEnabled()&&i.height<=t,a={x:0,y:0,width:e,height:t},o=s?this.getShadedRegionBounds(e,t,i):a,l=this.createCanvasElement(o.width,o.height),c=l.getContext("2d",{willReadFrequently:!0});c.canvas.width=o.width,c.canvas.height=o.height,this.element.append(l),s&&this.possiblyInsertShadingElement(this.element,e,t,i),this.createScannerPausedUiElement(this.element),this.qrRegion=o,this.context=c,this.canvasElement=l},e.prototype.createScannerPausedUiElement=function(e){var t=document.createElement("div");t.innerText=Hm.scannerPaused(),t.style.display="none",t.style.position="absolute",t.style.top="0px",t.style.zIndex="1",t.style.background="rgba(9, 9, 9, 0.46)",t.style.color="#FFECEC",t.style.textAlign="center",t.style.width="100%",e.appendChild(t),this.scannerPausedUiElement=t},e.prototype.scanContext=function(e,t){var n=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(t){return e(t.text,jm.createFromQrcodeResult(t)),n.possiblyUpdateShaders(!0),!0}).catch(function(e){n.possiblyUpdateShaders(!1);var r=Hm.codeParseError(e);return t(r,Bm.createFrom(r)),!1})},e.prototype.foreverScan=function(e,t,n){var r=this;if(this.shouldScan&&this.renderedCamera){var i=this.renderedCamera.getSurface(),s=i.videoWidth/i.clientWidth,a=i.videoHeight/i.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var o=this.qrRegion.width*s,l=this.qrRegion.height*a,c=this.qrRegion.x*s,u=this.qrRegion.y*a;this.context.drawImage(i,c,u,o,l,0,0,this.qrRegion.width,this.qrRegion.height);var d=function(){r.foreverScanTimeout=setTimeout(function(){r.foreverScan(e,t,n)},r.getTimeoutFps(e.fps))};this.scanContext(t,n).then(function(i){i||!0===e.disableFlip?d():(r.context.translate(r.context.canvas.width,0),r.context.scale(-1,1),r.scanContext(t,n).finally(function(){d()}))}).catch(function(e){r.logger.logError("Error happend while scanning context",e),d()})}},e.prototype.createVideoConstraints=function(e){if("string"==typeof e)return{deviceId:{exact:e}};if("object"==typeof e){var t="facingMode",n="deviceId",r={user:!0,environment:!0},i="exact",s=function(e){if(e in r)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(e,"'")},a=Object.keys(e);if(1!==a.length)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(a.length," keys");var o=Object.keys(e)[0];if(o!==t&&o!==n)throw"Only '".concat(t,"' and '").concat(n,"' ")+" are supported for 'cameraIdOrConfig'";if(o!==t){var l=e.deviceId;if("string"==typeof l)return{deviceId:l};if("object"==typeof l){if(i in l)return{deviceId:{exact:l["".concat(i)]}};throw"'deviceId' should be string or object with"+" ".concat(i," as key.")}throw"Invalid type of 'deviceId' = ".concat(typeof l)}var c=e.facingMode;if("string"==typeof c){if(s(c))return{facingMode:c}}else{if("object"!=typeof c)throw"Invalid type of 'facingMode' = ".concat(typeof c);if(!(i in c))throw"'facingMode' should be string or object with"+" ".concat(i," as key.");if(s(c["".concat(i)]))return{facingMode:{exact:c["".concat(i)]}}}}throw"Invalid type of 'cameraIdOrConfig' = ".concat(typeof e)},e.prototype.computeCanvasDrawConfig=function(e,t,n,r){if(e<=n&&t<=r)return{x:(n-e)/2,y:(r-t)/2,width:e,height:t};var i=e,s=t;return e>n&&(t*=n/e,e=n),t>r&&(e*=r/t,t=r),this.logger.log("Image downsampled from "+"".concat(i,"X").concat(s)+" to ".concat(e,"X").concat(t,".")),this.computeCanvasDrawConfig(e,t,n,r)},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},e.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(t){t.style.backgroundColor=e?xg.BORDER_SHADER_MATCH_COLOR:xg.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(e,t,n){var r=e,i=t,s=document.createElement("canvas");return s.style.width="".concat(r,"px"),s.style.height="".concat(i,"px"),s.style.display="none",s.id=zm(n)?"qr-canvas":n,s},e.prototype.getShadedRegionBounds=function(e,t,n){if(n.width>e||n.height>t)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-n.width)/2,y:(t-n.height)/2,width:n.width,height:n.height}},e.prototype.possiblyInsertShadingElement=function(e,t,n,r){if(!(t-r.width<1||n-r.height<1)){var i=document.createElement("div");i.style.position="absolute";var s=(t-r.width)/2,a=(n-r.height)/2;if(i.style.borderLeft="".concat(s,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderRight="".concat(s,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderTop="".concat(a,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderBottom="".concat(a,"px solid rgba(0, 0, 0, 0.48)"),i.style.boxSizing="border-box",i.style.top="0px",i.style.bottom="0px",i.style.left="0px",i.style.right="0px",i.id="".concat(xg.SHADED_REGION_ELEMENT_ID),t-r.width<11||n-r.height<11)this.hasBorderShaders=!1;else{var o=40;this.insertShaderBorders(i,o,5,-5,null,0,!0),this.insertShaderBorders(i,o,5,-5,null,0,!1),this.insertShaderBorders(i,o,5,null,-5,0,!0),this.insertShaderBorders(i,o,5,null,-5,0,!1),this.insertShaderBorders(i,5,45,-5,null,-5,!0),this.insertShaderBorders(i,5,45,null,-5,-5,!0),this.insertShaderBorders(i,5,45,-5,null,-5,!1),this.insertShaderBorders(i,5,45,null,-5,-5,!1),this.hasBorderShaders=!0}e.append(i)}},e.prototype.insertShaderBorders=function(e,t,n,r,i,s,a){var o=document.createElement("div");o.style.position="absolute",o.style.backgroundColor=xg.BORDER_SHADER_DEFAULT_COLOR,o.style.width="".concat(t,"px"),o.style.height="".concat(n,"px"),null!==r&&(o.style.top="".concat(r,"px")),null!==i&&(o.style.bottom="".concat(i,"px")),a?o.style.left="".concat(s,"px"):o.style.right="".concat(s,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(o),e.appendChild(o)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(e){return 1e3/e},e}(),Eg="data:image/svg+xml;base64,",Ng=Eg+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",Cg=Eg+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",_g=Eg+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",Tg=function(){function e(){}return e.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},e}(),Ig=function(){function e(){this.data=Tg.createDefault();var t=localStorage.getItem(e.LOCAL_STORAGE_KEY);t?this.data=JSON.parse(t):this.reset()}return e.prototype.hasCameraPermissions=function(){return this.data.hasPermission},e.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},e.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},e.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},e.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},e.prototype.reset=function(){this.data=Tg.createDefault(),this.flush()},e.prototype.flush=function(){localStorage.setItem(e.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},e.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",e}(),kg=function(){function e(){this.infoDiv=document.createElement("div")}return e.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=qm.poweredBy();var t=document.createElement("a");t.innerText="ScanApp",t.href="https://scanapp.org",t.target="new",t.style.color="white",this.infoDiv.appendChild(t);var n=document.createElement("br"),r=document.createElement("br");this.infoDiv.appendChild(n),this.infoDiv.appendChild(r);var i=document.createElement("a");i.innerText=qm.reportIssues(),i.href="https://github.com/mebjas/html5-qrcode/issues",i.target="new",i.style.color="white",this.infoDiv.appendChild(i),e.appendChild(this.infoDiv)},e.prototype.show=function(){this.infoDiv.style.display="block"},e.prototype.hide=function(){this.infoDiv.style.display="none"},e}(),Pg=function(){function e(e,t){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=t,this.infoIcon=document.createElement("img")}return e.prototype.renderInto=function(e){var t=this;this.infoIcon.alt="Info icon",this.infoIcon.src=_g,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(e){return t.onHoverIn()},this.infoIcon.onmouseout=function(e){return t.onHoverOut()},this.infoIcon.onclick=function(e){return t.onClick()},e.appendChild(this.infoIcon)},e.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},e.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},e.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=_g,this.infoIcon.style.opacity="0.6")},e}(),Rg=function(){function e(){var e=this;this.infoDiv=new kg,this.infoIcon=new Pg(function(){e.infoDiv.show()},function(){e.infoDiv.hide()})}return e.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},e}(),Dg=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function a(e){try{l(r.next(e))}catch(b_){s(b_)}}function o(e){try{l(r.throw(e))}catch(b_){s(b_)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((r=r.apply(e,t||[])).next())})},Og=function(e,t){var n,r,i,s,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,o[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(b_){o=[6,b_],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},Lg=function(){function e(){}return e.hasPermissions=function(){return Dg(this,void 0,void 0,function(){var e,t,n,r;return Og(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=i.sent(),t=0,n=e;t<n.length;t++)if("videoinput"===(r=n[t]).kind&&r.label)return[2,!0];return[2,!1]}})})},e}(),Mg=function(){function e(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return e.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},e.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},e.prototype.isCameraScanRequired=function(){for(var t=0,n=this.supportedScanTypes;t<n.length;t++){var r=n[t];if(e.isCameraScanType(r))return!0}return!1},e.isCameraScanType=function(e){return e===Rm.SCAN_TYPE_CAMERA},e.isFileScanType=function(e){return e===Rm.SCAN_TYPE_FILE},e.prototype.validateAndReturnScanTypes=function(e){if(!e||0===e.length)return Mm.DEFAULT_SUPPORTED_SCAN_TYPE;var t=Mm.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>t)throw"Max ".concat(t," values expected for ")+"supportedScanTypes";for(var n=0,r=e;n<r.length;n++){var i=r[n];if(!Mm.DEFAULT_SUPPORTED_SCAN_TYPE.includes(i))throw"Unsupported scan type ".concat(i)}return e},e}(),Fg=function(){function e(){}return e.ALL_ELEMENT_CLASS="html5-qrcode-element",e.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",e.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",e.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",e.TORCH_BUTTON_ID="html5-qrcode-button-torch",e.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",e.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",e.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",e.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",e.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",e.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",e}(),jg=function(){function e(){}return e.createElement=function(e,t){var n=document.createElement(e);return n.id=t,n.classList.add(Fg.ALL_ELEMENT_CLASS),"button"===e&&n.setAttribute("type","button"),n},e}(),Bg=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function a(e){try{l(r.next(e))}catch(b_){s(b_)}}function o(e){try{l(r.throw(e))}catch(b_){s(b_)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((r=r.apply(e,t||[])).next())})},Ug=function(e,t){var n,r,i,s,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,o[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(b_){o=[6,b_],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},zg=function(){function e(e,t,n){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=t,this.onTorchActionFailureCallback=n}return e.prototype.isTorchEnabled=function(){return this.isTorchOn},e.prototype.flipState=function(){return Bg(this,void 0,void 0,function(){var e,t;return Ug(this,function(n){switch(n.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return n.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return t=n.sent(),this.propagateFailure(e,t),this.buttonController.enable(),[3,4];case 4:return[2]}})})},e.prototype.updateUiBasedOnLatestSettings=function(e,t){e===t?(this.buttonController.setText(t?Wm.torchOffButton():Wm.torchOnButton()),this.isTorchOn=t):this.propagateFailure(t),this.buttonController.enable()},e.prototype.propagateFailure=function(e,t){var n=e?Wm.torchOnFailedMessage():Wm.torchOffFailedMessage();t&&(n+="; Error = "+t),this.onTorchActionFailureCallback(n)},e.prototype.reset=function(){this.isTorchOn=!1},e}(),Vg=function(){function e(e,t){this.onTorchActionFailureCallback=t,this.torchButton=jg.createElement("button",Fg.TORCH_BUTTON_ID),this.torchController=new zg(e,this,t)}return e.prototype.render=function(e,t){var n=this;this.torchButton.innerText=Wm.torchOnButton(),this.torchButton.style.display=t.display,this.torchButton.style.marginLeft=t.marginLeft;var r=this;this.torchButton.addEventListener("click",function(e){return Bg(n,void 0,void 0,function(){return Ug(this,function(e){switch(e.label){case 0:return[4,r.torchController.flipState()];case 1:return e.sent(),r.torchController.isTorchEnabled()?(r.torchButton.classList.remove(Fg.TORCH_BUTTON_CLASS_TORCH_OFF),r.torchButton.classList.add(Fg.TORCH_BUTTON_CLASS_TORCH_ON)):(r.torchButton.classList.remove(Fg.TORCH_BUTTON_CLASS_TORCH_ON),r.torchButton.classList.add(Fg.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),e.appendChild(this.torchButton)},e.prototype.updateTorchCapability=function(e){this.torchController=new zg(e,this,this.onTorchActionFailureCallback)},e.prototype.getTorchButton=function(){return this.torchButton},e.prototype.hide=function(){this.torchButton.style.display="none"},e.prototype.show=function(){this.torchButton.style.display="inline-block"},e.prototype.disable=function(){this.torchButton.disabled=!0},e.prototype.enable=function(){this.torchButton.disabled=!1},e.prototype.setText=function(e){this.torchButton.innerText=e},e.prototype.reset=function(){this.torchButton.innerText=Wm.torchOnButton(),this.torchController.reset()},e.create=function(t,n,r,i){var s=new e(n,i);return s.render(t,r),s},e}(),Hg=function(){function e(e,t,n){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=t?"block":"none",e.appendChild(this.fileBasedScanRegion);var r=document.createElement("label");r.setAttribute("for",this.getFileScanInputId()),r.style.display="inline-block",this.fileBasedScanRegion.appendChild(r),this.fileSelectionButton=jg.createElement("button",Fg.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(e){r.click()}),r.append(this.fileSelectionButton),this.fileScanInput=jg.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",r.appendChild(this.fileScanInput);var i=this;this.fileScanInput.addEventListener("change",function(e){if(null!=e&&null!=e.target){var t=e.target;if(!t.files||0!==t.files.length){var r=t.files[0],s=r.name;i.setImageNameToButton(s),n(r)}}});var s=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(s),this.fileBasedScanRegion.addEventListener("dragenter",function(e){i.fileBasedScanRegion.style.border=i.fileBasedScanRegionActiveBorder(),e.stopPropagation(),e.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(e){i.fileBasedScanRegion.style.border=i.fileBasedScanRegionDefaultBorder(),e.stopPropagation(),e.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(e){i.fileBasedScanRegion.style.border=i.fileBasedScanRegionActiveBorder(),e.stopPropagation(),e.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(e){e.stopPropagation(),e.preventDefault(),i.fileBasedScanRegion.style.border=i.fileBasedScanRegionDefaultBorder();var t=e.dataTransfer;if(t){var r=t.files;if(!r||0===r.length)return;for(var a=!1,o=0;o<r.length;++o){var l=r.item(o);if(l){if(l.type.match(/image.*/)){a=!0;var c=l.name;i.setImageNameToButton(c),n(l),s.innerText=Wm.dragAndDropMessage();break}}}a||(s.innerText=Wm.dragAndDropMessageOnlyImages())}})}return e.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},e.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},e.prototype.isShowing=function(){return"block"===this.fileBasedScanRegion.style.display},e.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},e.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},e.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},e.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},e.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=Wm.dragAndDropMessage(),e.style.fontWeight="400",e},e.prototype.setImageNameToButton=function(e){if(e.length>20){var t=e.substring(0,8),n=e.length,r=e.substring(n-8,n);e="".concat(t,"....").concat(r)}var i=Wm.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=i},e.prototype.setInitialValueToButton=function(){var e=Wm.fileSelectionChooseImage()+" - "+Wm.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},e.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},e.create=function(t,n,r){return new e(t,n,r)},e}(),Wg=function(){function e(e){this.selectElement=jg.createElement("select",Fg.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return e.prototype.render=function(e){var t=document.createElement("span");t.style.marginRight="10px";var n=this.cameras.length;if(0===n)throw new Error("No cameras found");if(1===n)t.style.display="none";else{var r=Wm.selectCamera();t.innerText="".concat(r," (").concat(this.cameras.length,")  ")}for(var i=1,s=0,a=this.cameras;s<a.length;s++){var o=a[s],l=o.id,c=null==o.label?l:o.label;c&&""!==c||(c=[Wm.anonymousCameraPrefix(),i++].join(" "));var u=document.createElement("option");u.value=l,u.innerText=c,this.options.push(u),this.selectElement.appendChild(u)}t.appendChild(this.selectElement),e.appendChild(t)},e.prototype.disable=function(){this.selectElement.disabled=!0},e.prototype.isDisabled=function(){return!0===this.selectElement.disabled},e.prototype.enable=function(){this.selectElement.disabled=!1},e.prototype.getValue=function(){return this.selectElement.value},e.prototype.hasValue=function(e){for(var t=0,n=this.options;t<n.length;t++){if(n[t].value===e)return!0}return!1},e.prototype.setValue=function(e){if(!this.hasValue(e))throw new Error("".concat(e," is not present in the camera list."));this.selectElement.value=e},e.prototype.hasSingleItem=function(){return 1===this.cameras.length},e.prototype.numCameras=function(){return this.cameras.length},e.create=function(t,n){var r=new e(n);return r.render(t),r},e}(),qg=function(){function e(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=jg.createElement("input",Fg.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return e.prototype.render=function(e,t){this.zoomElementContainer.style.display=t?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var n=Wm.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(n),this.rangeText.style.marginRight="10px";var r=this;this.rangeInput.addEventListener("input",function(){return r.onValueChange()}),this.rangeInput.addEventListener("change",function(){return r.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},e.prototype.onValueChange=function(){var e=Wm.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(e),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},e.prototype.setValues=function(e,t,n,r){this.rangeInput.min=e.toString(),this.rangeInput.max=t.toString(),this.rangeInput.step=r.toString(),this.rangeInput.value=n.toString(),this.onValueChange()},e.prototype.show=function(){this.zoomElementContainer.style.display="block"},e.prototype.hide=function(){this.zoomElementContainer.style.display="none"},e.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},e.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},e.create=function(t,n){var r=new e;return r.render(t,n),r},e}();!function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"}(gg||(gg={}));var Gg=function(){function e(e,t,n){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(t),this.verbose=!0===n,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.scanTypeSelector=new Mg(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new Um(this.verbose),this.persistedDataManager=new Ig,!0!==t.rememberLastUsedCamera&&this.persistedDataManager.reset()}return e.prototype.render=function(e,t){var n=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(t,r){if(e)e(t,r);else{if(n.lastMatchFound===t)return;n.lastMatchFound=t,n.setHeaderMessage(Wm.lastMatch(t),gg.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(e,n){t&&t(e,n)};var r,i,s=document.getElementById(this.elementId);if(!s)throw"HTML Element with id=".concat(this.elementId," not found");s.innerHTML="",this.createBasicLayout(s),this.html5Qrcode=new Ag(this.getScanRegionId(),(r=this.config,i=this.verbose,{formatsToSupport:r.formatsToSupport,useBarCodeDetectorIfSupported:r.useBarCodeDetectorIfSupported,experimentalFeatures:r.experimentalFeatures,verbose:i}))},e.prototype.pause=function(e){(zm(e)||!0!==e)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},e.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},e.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},e.prototype.clear=function(){var e=this,t=function(){var t=document.getElementById(e.elementId);t&&(t.innerHTML="",e.resetBasicLayout(t))};return this.html5Qrcode?new Promise(function(n,r){e.html5Qrcode?e.html5Qrcode.isScanning?e.html5Qrcode.stop().then(function(r){e.html5Qrcode?(e.html5Qrcode.clear(),t(),n()):n()}).catch(function(t){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",t),r(t)}):(e.html5Qrcode.clear(),t(),n()):n()}):Promise.resolve()},e.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},e.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},e.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},e.prototype.createConfig=function(e){return e?(e.fps||(e.fps=Mm.SCAN_DEFAULT_FPS),e.rememberLastUsedCamera!==!Mm.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(e.rememberLastUsedCamera=Mm.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=Mm.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:Mm.SCAN_DEFAULT_FPS,rememberLastUsedCamera:Mm.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:Mm.DEFAULT_SUPPORTED_SCAN_TYPE}},e.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var t=document.createElement("div"),n=this.getScanRegionId();t.id=n,t.style.width="100%",t.style.minHeight="100px",t.style.textAlign="center",e.appendChild(t),Mg.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var r=document.createElement("div"),i=this.getDashboardId();r.id=i,r.style.width="100%",e.appendChild(r),this.setupInitialDashboard(r)},e.prototype.resetBasicLayout=function(e){e.style.border="none"},e.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},e.prototype.createHeader=function(e){var t=document.createElement("div");t.style.textAlign="left",t.style.margin="0px",e.appendChild(t),(new Rg).renderInto(t);var n=document.createElement("div");n.id=this.getHeaderMessageContainerId(),n.style.display="none",n.style.textAlign="center",n.style.fontSize="14px",n.style.padding="2px 10px",n.style.margin="4px",n.style.borderTop="1px solid #f6f6f6",t.appendChild(n)},e.prototype.createSection=function(e){var t=document.createElement("div");t.id=this.getDashboardSectionId(),t.style.width="100%",t.style.padding="10px 0px 10px 0px",t.style.textAlign="left",e.appendChild(t)},e.prototype.createCameraListUi=function(e,t,n){var r=this;r.showHideScanTypeSwapLink(!1),r.setHeaderMessage(Wm.cameraPermissionRequesting());var i=function(){n||r.createPermissionButton(e,t)};Ag.getCameras().then(function(n){r.persistedDataManager.setHasPermission(!0),r.showHideScanTypeSwapLink(!0),r.resetHeaderMessage(),n&&n.length>0?(e.removeChild(t),r.renderCameraSelection(n)):(r.setHeaderMessage(Wm.noCameraFound(),gg.STATUS_WARNING),i())}).catch(function(e){r.persistedDataManager.setHasPermission(!1),n?n.disabled=!1:i(),r.setHeaderMessage(e,gg.STATUS_WARNING),r.showHideScanTypeSwapLink(!0)})},e.prototype.createPermissionButton=function(e,t){var n=this,r=jg.createElement("button",this.getCameraPermissionButtonId());r.innerText=Wm.cameraPermissionTitle(),r.addEventListener("click",function(){r.disabled=!0,n.createCameraListUi(e,t,r)}),t.appendChild(r)},e.prototype.createPermissionsUi=function(e,t){var n=this;Mg.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()?Lg.hasPermissions().then(function(r){r?n.createCameraListUi(e,t):(n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(e,t))}).catch(function(r){n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(e,t)}):this.createPermissionButton(e,t)},e.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),t=document.createElement("div");e.appendChild(t);var n=document.createElement("div");n.id=this.getDashboardSectionCameraScanRegionId(),n.style.display=Mg.isCameraScanType(this.currentScanType)?"block":"none",t.appendChild(n);var r=document.createElement("div");r.style.textAlign="center",n.appendChild(r),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(n,r),this.renderFileScanUi(t)},e.prototype.renderFileScanUi=function(e){var t=Mg.isFileScanType(this.currentScanType),n=this;this.fileSelectionUi=Hg.create(e,t,function(e){if(!n.html5Qrcode)throw"html5Qrcode not defined";Mg.isFileScanType(n.currentScanType)&&(n.setHeaderMessage(Wm.loadingImage()),n.html5Qrcode.scanFileV2(e,!0).then(function(e){n.resetHeaderMessage(),n.qrCodeSuccessCallback(e.decodedText,e)}).catch(function(e){n.setHeaderMessage(e,gg.STATUS_WARNING),n.qrCodeErrorCallback(e,Bm.createFrom(e))}))})},e.prototype.renderCameraSelection=function(e){var t=this,n=this,r=document.getElementById(this.getDashboardSectionCameraScanRegionId());r.style.textAlign="center";var i=qg.create(r,!1),s=Wg.create(r,e),a=document.createElement("span"),o=jg.createElement("button",Fg.CAMERA_START_BUTTON_ID);o.innerText=Wm.scanButtonStartScanningText(),a.appendChild(o);var l,c=jg.createElement("button",Fg.CAMERA_STOP_BUTTON_ID);c.innerText=Wm.scanButtonStopScanningText(),c.style.display="none",c.disabled=!0,a.appendChild(c);r.appendChild(a);var u=function(e){e||(o.style.display="none"),o.innerText=Wm.scanButtonStartScanningText(),o.style.opacity="1",o.disabled=!1,e&&(o.style.display="inline-block")};if(o.addEventListener("click",function(e){o.innerText=Wm.scanButtonScanningStarting(),s.disable(),o.disabled=!0,o.style.opacity="0.5",t.scanTypeSelector.hasMoreThanOneScanType()&&n.showHideScanTypeSwapLink(!1),n.resetHeaderMessage();var r,d=s.getValue();n.persistedDataManager.setLastUsedCameraId(d),n.html5Qrcode.start(d,(r=n.config,{fps:r.fps,qrbox:r.qrbox,aspectRatio:r.aspectRatio,disableFlip:r.disableFlip,videoConstraints:r.videoConstraints}),n.qrCodeSuccessCallback,n.qrCodeErrorCallback).then(function(e){c.disabled=!1,c.style.display="inline-block",u(!1);var r=n.html5Qrcode.getRunningTrackCameraCapabilities();!0===t.config.showTorchButtonIfSupported&&function(e){e.torchFeature().isSupported()?(l?l.updateTorchCapability(e.torchFeature()):l=Vg.create(a,e.torchFeature(),{display:"none",marginLeft:"5px"},function(e){n.setHeaderMessage(e,gg.STATUS_WARNING)}),l.show()):l&&l.hide()}(r),!0===t.config.showZoomSliderIfSupported&&function(e){var n=e.zoomFeature();if(n.isSupported()){i.setOnCameraZoomValueChangeCallback(function(e){n.apply(e)});var r,s,a,o=1;t.config.defaultZoomValueIfSupported&&(o=t.config.defaultZoomValueIfSupported),r=o,s=n.min(),o=r>(a=n.max())?a:r<s?s:r,i.setValues(n.min(),n.max(),o,n.step()),i.show()}}(r)}).catch(function(e){n.showHideScanTypeSwapLink(!0),s.enable(),u(!0),n.setHeaderMessage(e,gg.STATUS_WARNING)})}),s.hasSingleItem()&&o.click(),c.addEventListener("click",function(e){if(!n.html5Qrcode)throw"html5Qrcode not defined";c.disabled=!0,n.html5Qrcode.stop().then(function(e){t.scanTypeSelector.hasMoreThanOneScanType()&&n.showHideScanTypeSwapLink(!0),s.enable(),o.disabled=!1,c.style.display="none",o.style.display="inline-block",l&&(l.reset(),l.hide()),i.removeOnCameraZoomValueChangeCallback(),i.hide(),n.insertCameraScanImageToScanRegion()}).catch(function(e){c.disabled=!1,n.setHeaderMessage(e,gg.STATUS_WARNING)})}),n.persistedDataManager.getLastUsedCameraId()){var d=n.persistedDataManager.getLastUsedCameraId();s.hasValue(d)?(s.setValue(d),o.click()):n.persistedDataManager.resetLastUsedCameraId()}},e.prototype.createSectionSwap=function(){var e=this,t=Wm.textIfCameraScanSelected(),n=Wm.textIfFileScanSelected(),r=document.getElementById(this.getDashboardSectionId()),i=document.createElement("div");i.style.textAlign="center";var s=jg.createElement("span",this.getDashboardSectionSwapLinkId());s.style.textDecoration="underline",s.style.cursor="pointer",s.innerText=Mg.isCameraScanType(this.currentScanType)?t:n,s.addEventListener("click",function(){e.sectionSwapAllowed?(e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,Mg.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),s.innerText=n,e.currentScanType=Rm.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),s.innerText=t,e.currentScanType=Rm.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0):e.verbose&&e.logger.logError("Section swap called when not allowed")}),i.appendChild(s),r.appendChild(i)},e.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,t=this;this.persistedDataManager.hasCameraPermissions()&&Lg.hasPermissions().then(function(n){if(n){var r=document.getElementById(t.getCameraPermissionButtonId());if(!r)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";r.click()}else t.persistedDataManager.setHasPermission(!1)}).catch(function(e){t.persistedDataManager.setHasPermission(!1)})},e.prototype.resetHeaderMessage=function(){document.getElementById(this.getHeaderMessageContainerId()).style.display="none"},e.prototype.setHeaderMessage=function(e,t){t||(t=gg.STATUS_DEFAULT);var n=this.getHeaderMessageDiv();switch(n.innerText=e,n.style.display="block",t){case gg.STATUS_SUCCESS:n.style.background="rgba(106, 175, 80, 0.26)",n.style.color="#477735";break;case gg.STATUS_WARNING:n.style.background="rgba(203, 36, 49, 0.14)",n.style.color="#cb2431";break;case gg.STATUS_DEFAULT:default:n.style.background="rgba(0, 0, 0, 0)",n.style.color="rgb(17, 17, 17)"}},e.prototype.showHideScanTypeSwapLink=function(e){this.scanTypeSelector.hasMoreThanOneScanType()&&(!0!==e&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none")},e.prototype.insertCameraScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.cameraScanImage)return t.innerHTML="<br>",void t.appendChild(this.cameraScanImage);this.cameraScanImage=new Image,this.cameraScanImage.onload=function(n){t.innerHTML="<br>",t.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=Ng,this.cameraScanImage.alt=Wm.cameraScanAltText()},e.prototype.insertFileScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.fileScanImage)return t.innerHTML="<br>",void t.appendChild(this.fileScanImage);this.fileScanImage=new Image,this.fileScanImage.onload=function(n){t.innerHTML="<br>",t.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=Cg,this.fileScanImage.alt=Wm.fileScanAltText()},e.prototype.clearScanRegion=function(){document.getElementById(this.getScanRegionId()).innerHTML=""},e.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},e.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},e.prototype.getDashboardSectionSwapLinkId=function(){return Fg.SCAN_TYPE_CHANGE_ANCHOR_ID},e.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},e.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},e.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},e.prototype.getCameraPermissionButtonId=function(){return Fg.CAMERA_PERMISSION_BUTTON_ID},e.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},e.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},e.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},e}();const Kg=ho("camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),Yg=t=>{let{isDarkMode:n,onClose:r,onDataReceived:i}=t;const[s,a]=(0,e.useState)(!1),[o,l]=(0,e.useState)(null),{toast:c}=$o();(0,e.useEffect)(()=>{const e=new Gg("qr-reader",{fps:10,qrbox:{width:250,height:250},aspectRatio:1,showTorchButtonIfSupported:!0},!1);return l(e),()=>{e&&e.clear().catch(e=>console.error("Scanner cleanup error:",e))}},[]);const u=e=>{try{o&&o.clear(),a(!1);const t=JSON.parse(e);if(!t.salesData&&!t.creditData&&!t.incomeData&&!t.expenseData)return void c({title:"Invalid QR Code",description:"QR code doesn't contain valid backup data",variant:"destructive"});if(window.confirm("Merge the scanned data with your existing data?\n\nIn case of conflicts, your existing data will be preserved.")){el.Ay.mergeAllData(t)?(c({title:"Data Merged Successfully",description:"Backup data has been merged. Refreshing..."}),i&&i(),setTimeout(()=>{window.location.reload()},2e3)):c({title:"Merge Failed",description:"Failed to merge data. Please try again.",variant:"destructive"})}}catch(t){console.error("QR scan processing error:",t),c({title:"Scan Error",description:"Failed to process QR code. Please ensure it's a valid backup QR code.",variant:"destructive"})}},d=()=>{o&&o.clear().then(()=>{a(!1)}).catch(e=>{console.error("Stop scanning error:",e),a(!1)})};return(0,In.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,In.jsx)("div",{className:"w-full max-w-md rounded-lg shadow-xl ".concat(n?"bg-gray-800 border-gray-700":"bg-white border-slate-200"," border"),children:(0,In.jsxs)("div",{className:"p-6",children:[(0,In.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,In.jsx)("h3",{className:"text-lg font-semibold ".concat(n?"text-white":"text-slate-800"),children:"Receive Data via QR Code"}),(0,In.jsx)(rr,{variant:"ghost",size:"sm",onClick:()=>{d(),r()},className:"h-8 w-8 p-0",children:(0,In.jsx)(fo,{className:"w-4 h-4"})})]}),(0,In.jsxs)("div",{className:"space-y-4",children:[s?(0,In.jsxs)("div",{className:"space-y-4",children:[(0,In.jsx)("div",{id:"qr-reader",className:"w-full"}),(0,In.jsx)(rr,{onClick:d,variant:"outline",className:"w-full",children:"Stop Scanning"})]}):(0,In.jsxs)("div",{className:"flex flex-col items-center space-y-4 py-8",children:[(0,In.jsx)(Kg,{className:"w-16 h-16 ".concat(n?"text-gray-600":"text-slate-300")}),(0,In.jsx)("p",{className:"text-sm text-center ".concat(n?"text-gray-400":"text-slate-600"),children:"Click the button below to start camera and scan QR code"}),(0,In.jsxs)(rr,{onClick:()=>{o&&(a(!0),o.render((e,t)=>{console.log("QR Code scanned:",e),u(e)},e=>{}))},className:"w-full bg-orange-600 hover:bg-orange-700 text-white",children:[(0,In.jsx)(Kg,{className:"w-4 h-4 mr-2"}),"Start Camera"]})]}),(0,In.jsxs)("div",{className:"text-center space-y-2 p-4 rounded-lg border ".concat(n?"bg-blue-900/20 border-blue-800":"bg-blue-50 border-blue-200"),children:[(0,In.jsx)("p",{className:"text-sm font-medium ".concat(n?"text-blue-300":"text-blue-700"),children:"\ud83d\udcf1 Instructions"}),(0,In.jsxs)("p",{className:"text-xs ".concat(n?"text-blue-400":"text-blue-600"),children:["1. Allow camera permission when prompted",(0,In.jsx)("br",{}),"2. Point camera at the QR code",(0,In.jsx)("br",{}),"3. Hold steady until scan completes",(0,In.jsx)("br",{}),"4. Data will merge automatically"]})]})]})]})})})},Xg=t=>{let{isDarkMode:r,fuelSettings:a,setFuelSettings:o,customers:l,onAddCustomer:c,onDeleteCustomer:u,onUpdateCustomer:d}=t;const[h,f]=(0,e.useState)(""),[p,m]=(0,e.useState)(!1),[g,y]=(0,e.useState)(!1),[v,w]=(0,e.useState)(!1),[b,x]=(0,e.useState)((new Date).toISOString().split("T")[0]),[S,A]=(0,e.useState)(()=>"true"===localStorage.getItem("mpump_pro_mode")),[E,N]=(0,e.useState)(!1),[C,_]=(0,e.useState)(""),{toast:T}=$o(),{toggleAutoBackup:I,getBackupStatus:k}=sl(T),[P,R]=(0,e.useState)([]),[D,O]=(0,e.useState)([]),[L,M]=(0,e.useState)([]);e.useEffect(()=>{R(el.Ay.getIncomeCategories()),O(el.Ay.getExpenseCategories()),M(el.Ay.getSettlementTypes())},[]);const F=()=>{"rash"===C?(A(!0),localStorage.setItem("mpump_pro_mode","true"),N(!1),_(""),T({title:"Pro Mode Enabled",description:"Confirmation dialogs will be hidden.",variant:"default"})):(T({title:"Incorrect Password",description:"Please try again.",variant:"destructive"}),_(""))},[j,B]=(0,e.useState)({pumpName:"Vishnu Parvati Petroleum",dealerName:"Rohan.R.Khandve",address:"Station Road, Near City Mall, Mumbai - 400001",email:"vishnuparvatipetroleum@gmail.com"});e.useEffect(()=>{const e=localStorage.getItem("mpump_contact_info");e&&B(JSON.parse(e))},[]),e.useEffect(()=>{localStorage.setItem("mpump_contact_info",JSON.stringify(j))},[j]);const[U,z]=(0,e.useState)(""),[V,H]=(0,e.useState)("");e.useEffect(()=>{const e=localStorage.getItem("mpump_online_url");e&&(H(e),z(e))},[]);const[W,q]=(0,e.useState)(!1),[G,K]=(0,e.useState)(null),[Y,X]=(0,e.useState)(null);e.useEffect(()=>{const e=k();q(e.enabled),K(e.lastBackupTime),X(e.nextScheduledTime)},[k]);const[Q,J]=(0,e.useState)(!1),[Z,$]=(0,e.useState)(""),[ee,te]=(0,e.useState)(null);e.useEffect(()=>{const e=localStorage.getItem("mpump_auto_backup_settings");if(e){const t=JSON.parse(e);J(t.enabled||!1),$(t.folderName||""),te(t.lastBackupTime||null)}},[]);const ne=(e,t)=>{const n=(0,s.A)((0,s.A)({},a),{},{[e]:(0,s.A)((0,s.A)({},a[e]),{},{nozzleCount:Math.max(1,Math.min(10,a[e].nozzleCount+t))})});o(n),el.Ay.setFuelSettings(n)},re=(0,e.useCallback)(e=>{f(e.target.value)},[]);return(0,In.jsxs)(In.Fragment,{children:[(0,In.jsxs)(rr,{variant:"outline",className:"flex items-center gap-2",onClick:()=>m(!0),children:[(0,In.jsx)(gm,{className:"w-4 h-4"}),"Settings"]}),(0,In.jsx)(lm,{open:p,onOpenChange:m,children:(0,In.jsx)(dm,{className:"w-screen h-[calc(100vh-60px)] max-w-none p-0 border-0 ".concat(r?"bg-gray-900":"bg-white"," [&>button]:hidden"),style:{top:"60px",transform:"translate(-50%, 0)",margin:0},children:(0,In.jsxs)("div",{className:"flex flex-col h-full",children:[(0,In.jsxs)("div",{className:"flex items-center justify-between px-6 ".concat(r?"bg-gray-800 border-b border-gray-700":"bg-gradient-to-r from-gray-600 to-gray-700 border-b border-gray-300"),style:{height:"48px"},children:[(0,In.jsxs)("div",{className:"flex items-center gap-2",children:[(0,In.jsx)(gm,{className:"w-5 h-5 ".concat("text-white")}),(0,In.jsx)("h2",{className:"text-lg font-semibold ".concat("text-white"),children:"Settings"})]}),(0,In.jsx)(rr,{variant:"ghost",size:"icon",className:"h-8 w-8 ".concat(r?"text-white hover:bg-gray-700":"text-white hover:bg-gray-600"),onClick:()=>m(!1),children:(0,In.jsx)(fo,{className:"w-5 h-5"})})]}),(0,In.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,In.jsxs)(Oi,{defaultValue:"customer",className:"w-full h-full flex flex-col",children:[(0,In.jsxs)(Li,{className:"grid w-full grid-cols-6 ".concat(r?"bg-gray-700":"bg-gray-100"),style:{height:"48px",gap:"4px",padding:"4px"},children:[(0,In.jsxs)(Mi,{value:"customer",className:"flex items-center gap-1 text-xs sm:text-sm px-2",children:[(0,In.jsx)(Wo,{className:"w-3 h-3 sm:w-4 sm:h-4"}),(0,In.jsx)("span",{className:"hidden sm:inline",children:"Customer"}),(0,In.jsx)("span",{className:"sm:hidden",children:"Cust"})]}),(0,In.jsxs)(Mi,{value:"settlement",className:"flex items-center gap-1 text-xs sm:text-sm px-2",children:[(0,In.jsx)(Uo,{className:"w-3 h-3 sm:w-4 sm:h-4"}),(0,In.jsx)("span",{className:"hidden sm:inline",children:"Settlement"}),(0,In.jsx)("span",{className:"sm:hidden",children:"Sett"})]}),(0,In.jsxs)(Mi,{value:"fuel",className:"flex items-center gap-1 text-xs sm:text-sm px-2",children:[(0,In.jsx)(Co,{className:"w-3 h-3 sm:w-4 sm:h-4"}),(0,In.jsx)("span",{className:"hidden sm:inline",children:"Fuel Types"}),(0,In.jsx)("span",{className:"sm:hidden",children:"Fuel"})]}),(0,In.jsxs)(Mi,{value:"backup",className:"flex items-center gap-1 text-xs sm:text-sm px-2",children:[(0,In.jsx)(ym,{className:"w-3 h-3 sm:w-4 sm:h-4"}),(0,In.jsx)("span",{className:"hidden sm:inline",children:"Backup"}),(0,In.jsx)("span",{className:"sm:hidden",children:"Bkup"})]}),(0,In.jsxs)(Mi,{value:"contact",className:"flex items-center gap-1 text-xs sm:text-sm px-2",children:[(0,In.jsx)(vm,{className:"w-3 h-3 sm:w-4 sm:h-4"}),(0,In.jsx)("span",{className:"hidden sm:inline",children:"Contact"}),(0,In.jsx)("span",{className:"sm:hidden",children:"Info"})]})]}),(0,In.jsx)(Fi,{value:"customer",className:"p-4 overflow-y-auto",style:{height:"calc(100vh - 60px - 48px - 48px)"},children:(0,In.jsx)(Cm,{customers:l,onAddCustomer:c,onDeleteCustomer:u,onUpdateCustomer:d,isDarkMode:r})}),(0,In.jsx)(Fi,{value:"settlement",className:"p-4 overflow-y-auto",style:{height:"calc(100vh - 60px - 48px - 48px)"},children:(0,In.jsx)(_m,{settlementTypes:L,onAddSettlementType:e=>{const t=el.Ay.addSettlementType(e);return M(el.Ay.getSettlementTypes()),t},onDeleteSettlementType:e=>{console.log("handleDeleteSettlementType called with id:",e);try{console.log("Calling localStorageService.deleteSettlementType"),el.Ay.deleteSettlementType(e),console.log("Delete successful, updating state");const t=el.Ay.getSettlementTypes();console.log("Updated settlement types:",t),M(t),T({title:"Success",description:"Settlement type deleted successfully.",variant:"default"})}catch(t){console.error("Error deleting settlement type:",t),T({title:"Error",description:t.message||"Failed to delete settlement type.",variant:"destructive"})}},onUpdateSettlementType:(e,t)=>{try{el.Ay.updateSettlementType(e,t),M(el.Ay.getSettlementTypes()),T({title:"Success",description:"Settlement type updated successfully.",variant:"default"})}catch(n){console.error("Error updating settlement type:",n),T({title:"Error",description:n.message||"Failed to update settlement type.",variant:"destructive"})}},isDarkMode:r})}),(0,In.jsx)(Fi,{value:"contact",className:"p-0",children:(0,In.jsx)(jf,{className:"h-[calc(100vh-150px)] px-4 py-4",children:(0,In.jsxs)("div",{className:"space-y-4 pb-6",children:[(0,In.jsxs)("div",{className:"text-center mb-4",children:[(0,In.jsx)("div",{className:"flex items-center justify-center w-16 h-16 mx-auto mb-3 bg-blue-100 rounded-full",children:(0,In.jsx)(wm,{className:"w-8 h-8 text-blue-600"})}),(0,In.jsx)("h3",{className:"text-lg font-semibold ".concat(r?"text-white":"text-slate-800"),children:"Contact Information"})]}),(0,In.jsx)("div",{className:"border rounded-lg p-4 ".concat(r?"border-gray-600 bg-gray-700":"border-slate-200 bg-slate-50"),children:(0,In.jsxs)("div",{className:"space-y-3",children:[(0,In.jsxs)("div",{className:"flex items-start gap-3",children:[(0,In.jsx)(vm,{className:"w-5 h-5 text-blue-600 mt-0.5"}),(0,In.jsxs)("div",{children:[(0,In.jsx)("div",{className:"text-xs font-medium ".concat(r?"text-gray-400":"text-slate-600"),children:"Owner"}),(0,In.jsx)("div",{className:"font-medium ".concat(r?"text-white":"text-slate-800"),children:j.dealerName}),(0,In.jsx)("div",{className:"text-sm ".concat(r?"text-gray-300":"text-slate-600"),children:j.pumpName})]})]}),(0,In.jsx)(jh,{className:r?"bg-gray-600":"bg-slate-200"}),(0,In.jsxs)("div",{className:"flex items-start gap-3",children:[(0,In.jsx)(bm,{className:"w-5 h-5 text-red-600 mt-0.5"}),(0,In.jsxs)("div",{children:[(0,In.jsx)("div",{className:"text-xs font-medium ".concat(r?"text-gray-400":"text-slate-600"),children:"Email"}),(0,In.jsx)("div",{className:"font-medium break-all ".concat(r?"text-white":"text-slate-800"),children:j.email})]})]})]})}),(0,In.jsx)(jh,{className:r?"bg-gray-600":"bg-slate-200"}),(0,In.jsxs)("div",{className:"text-center mb-4",children:[(0,In.jsx)("div",{className:"flex items-center justify-center w-16 h-16 mx-auto mb-3 bg-green-100 rounded-full",children:(0,In.jsx)(xm,{className:"w-8 h-8 text-green-600"})}),(0,In.jsx)("h3",{className:"text-lg font-semibold ".concat(r?"text-white":"text-slate-800"),children:"Online Access"}),(0,In.jsx)("p",{className:"text-sm mt-2 ".concat(r?"text-gray-400":"text-slate-600"),children:"Save your webpage URL to access the app online"})]}),(0,In.jsx)("div",{className:"border rounded-lg p-4 ".concat(r?"border-gray-600 bg-gray-700":"border-slate-200 bg-slate-50"),children:(0,In.jsxs)("div",{className:"space-y-3",children:[(0,In.jsx)(pr,{className:"text-sm font-medium",children:"Webpage URL"}),(0,In.jsx)(sr,{type:"url",value:U,onChange:e=>z(e.target.value),placeholder:"https://example.com/your-app",className:r?"bg-gray-600 border-gray-500":""}),(0,In.jsxs)(rr,{className:"w-full bg-green-600 hover:bg-green-700",onClick:()=>{U.trim()?(localStorage.setItem("mpump_online_url",U),H(U),T({title:"URL Saved",description:"Your online URL has been saved successfully"})):T({title:"Invalid URL",description:"Please enter a valid URL",variant:"destructive"})},children:[(0,In.jsx)($p,{className:"w-4 h-4 mr-2"}),"Save URL"]}),(0,In.jsxs)("div",{className:"mt-3 p-3 rounded-lg border ".concat(r?"bg-blue-900/20 border-blue-800":"bg-blue-50 border-blue-200"),children:[(0,In.jsx)("p",{className:"text-xs font-medium mb-1 ".concat(r?"text-blue-400":"text-blue-700"),children:"Default URL:"}),(0,In.jsx)("p",{className:"text-sm ".concat(r?"text-blue-300":"text-blue-600"),children:"https://mobilepetrolpump.vercel.app/"})]})]})}),V&&(0,In.jsxs)(In.Fragment,{children:[(0,In.jsx)(jh,{className:r?"bg-gray-600":"bg-slate-200"}),(0,In.jsx)("div",{className:"border rounded-lg p-4 ".concat(r?"border-gray-600 bg-gray-700":"border-slate-200 bg-slate-50"),children:(0,In.jsxs)("div",{className:"space-y-3",children:[(0,In.jsx)(pr,{className:"text-sm font-medium",children:"Saved URL"}),(0,In.jsx)("div",{className:"p-3 rounded border cursor-pointer transition-colors ".concat(r?"bg-gray-600 border-gray-500 hover:bg-gray-500":"bg-white border-slate-300 hover:bg-slate-50"),onClick:()=>{navigator.clipboard.writeText(V).then(()=>{T({title:"URL Copied",description:"URL copied to clipboard successfully"})}).catch(()=>{const e=document.createElement("textarea");e.value=V,e.style.position="fixed",e.style.left="-999999px",document.body.appendChild(e),e.select();try{document.execCommand("copy"),T({title:"URL Copied",description:"URL copied to clipboard successfully"})}catch(x_){T({title:"Copy Failed",description:"Could not copy URL. Please enable clipboard permissions.",variant:"destructive"})}document.body.removeChild(e)})},children:(0,In.jsxs)("div",{className:"flex items-center justify-between",children:[(0,In.jsx)("span",{className:"text-sm break-all ".concat(r?"text-blue-300":"text-blue-600"),children:V}),(0,In.jsx)("span",{className:"text-xs ml-2 whitespace-nowrap ".concat(r?"text-gray-400":"text-slate-500"),children:"Click to copy"})]})}),(0,In.jsx)("p",{className:"text-xs ".concat(r?"text-gray-500":"text-slate-500"),children:"\ud83d\udca1 Click on the URL above to copy it to clipboard"}),(0,In.jsxs)(rr,{variant:"outline",className:"w-full mt-3 bg-red-600 hover:bg-red-700 text-white border-red-600",onClick:()=>{(el.Ay.isProModeEnabled()||window.confirm("Are you sure you want to delete the saved URL?"))&&(localStorage.removeItem("mpump_online_url"),H(""),z(""),T({title:"URL Deleted",description:"Saved URL has been removed successfully"}))},children:[(0,In.jsx)(Wf,{className:"w-4 h-4 mr-2"}),"Delete Saved URL"]})]})})]}),(0,In.jsx)(jh,{className:r?"bg-gray-600":"bg-slate-200"}),(0,In.jsx)("div",{className:"border rounded-lg p-4 ".concat(r?"border-gray-600 bg-gray-700":"border-slate-200 bg-slate-50"),children:(0,In.jsxs)("div",{className:"space-y-3",children:[(0,In.jsx)("h4",{className:"font-medium ".concat(r?"text-white":"text-slate-800"),children:"Delete Data"}),(0,In.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,In.jsxs)("div",{className:"space-y-2",children:[(0,In.jsx)(pr,{className:"text-xs font-medium",children:"From Date"}),(0,In.jsx)(sr,{type:"date",id:"delete-from-date",className:"text-sm ".concat(r?"bg-gray-600 border-gray-500":"")})]}),(0,In.jsxs)("div",{className:"space-y-2",children:[(0,In.jsx)(pr,{className:"text-xs font-medium",children:"To Date"}),(0,In.jsx)(sr,{type:"date",id:"delete-to-date",className:"text-sm ".concat(r?"bg-gray-600 border-gray-500":"")})]})]}),(0,In.jsx)(rr,{variant:"outline",className:"w-full bg-red-600 hover:bg-red-700 text-white border-red-600",onClick:()=>{const e=document.getElementById("delete-from-date"),t=document.getElementById("delete-to-date"),n=e.value,r=t.value;if(!n||!r)return void T({title:"Invalid Date Range",description:"Please select both from and to dates",variant:"destructive"});if(n>r)return void T({title:"Invalid Date Range",description:"From date cannot be after To date",variant:"destructive"});if(el.Ay.isProModeEnabled()||window.confirm("\u26a0\ufe0f WARNING: This will PERMANENTLY delete all data from ".concat(n," to ").concat(r,".\n\nThis includes:\n- Stock Data\n- Reading Sales Data\n- Credit Sales Data\n- Income/Expense Data\n- Receipt Data\n\nThis action CANNOT be undone!\n\nAre you absolutely sure you want to continue?")))try{const i=el.Ay.getSalesData(),s=el.Ay.getCreditData(),a=el.Ay.getIncomeData(),o=el.Ay.getExpenseData(),l=el.Ay.getPayments(),c=i.filter(e=>e.date<n||e.date>r),u=s.filter(e=>e.date<n||e.date>r),d=a.filter(e=>e.date<n||e.date>r),h=o.filter(e=>e.date<n||e.date>r),f=l.filter(e=>e.date<n||e.date>r),p=i.length-c.length,m=s.length-u.length,g=a.length-d.length,y=o.length-h.length,v=l.length-f.length;let w=0;Object.keys(localStorage).filter(e=>e.endsWith("StockData")).forEach(e=>{const t=JSON.parse(localStorage.getItem(e)||"{}");Object.keys(t).forEach(e=>{e>=n&&e<=r&&(w++,delete t[e])}),localStorage.setItem(e,JSON.stringify(t))});const b=p+m+g+y+v+w;el.Ay.setSalesData(c),el.Ay.setCreditData(u),el.Ay.setIncomeData(d),el.Ay.setExpenseData(h),el.Ay.setPayments(f),T({title:"Data Deleted Successfully",description:"Deleted ".concat(b," records (Stock: ").concat(w,", Sales: ").concat(p,", Credits: ").concat(m,", Income: ").concat(g,", Expenses: ").concat(y,", Receipts: ").concat(v,"). Refreshing...")}),e.value="",t.value="",setTimeout(()=>{window.location.reload()},3e3)}catch(i){console.error("Delete error:",i),T({title:"Delete Failed",description:"Failed to delete data. Please try again.",variant:"destructive"})}},children:"\ud83d\uddd1\ufe0f Permanent Delete"})]})}),(0,In.jsx)(jh,{className:r?"bg-gray-600":"bg-slate-200"}),(0,In.jsx)("div",{className:"border rounded-lg p-4 ".concat(r?"border-gray-600 bg-gray-700":"border-slate-200 bg-slate-50"),children:(0,In.jsxs)("div",{className:"space-y-3",children:[(0,In.jsx)("h4",{className:"font-medium ".concat(r?"text-white":"text-slate-800"),children:"Pro Mode"}),(0,In.jsx)("p",{className:"text-xs ".concat(r?"text-gray-400":"text-slate-600"),children:'Enable Pro mode to skip "Are you sure?" confirmation dialogs'}),(0,In.jsxs)("div",{className:"flex items-center space-x-3 pt-2",children:[(0,In.jsx)(mp,{id:"pro-mode",checked:S,onCheckedChange:e=>{e?N(!0):(A(!1),localStorage.setItem("mpump_pro_mode","false"),T({title:"Pro Mode Disabled",description:"Confirmation dialogs will be shown.",variant:"default"}))},className:r?"border-gray-500":""}),(0,In.jsx)(pr,{htmlFor:"pro-mode",className:"text-sm font-medium cursor-pointer ".concat(r?"text-white":"text-slate-700"),children:S?"\u2705 Pro Mode Active":"Enable Pro Mode"})]}),S&&(0,In.jsx)("div",{className:"mt-3 p-3 rounded-lg border ".concat(r?"bg-green-900/20 border-green-800":"bg-green-50 border-green-200"),children:(0,In.jsx)("p",{className:"text-xs ".concat(r?"text-green-400":"text-green-700"),children:"\u26a1 Pro Mode is active. Delete confirmations are disabled."})})]})}),(0,In.jsx)(jh,{className:r?"bg-gray-600":"bg-slate-200"}),(0,In.jsx)("div",{className:"border rounded-lg p-4 ".concat(r?"border-gray-600 bg-gray-700":"border-slate-200 bg-slate-50"),children:(0,In.jsxs)("div",{className:"space-y-3",children:[(0,In.jsxs)("div",{className:"flex items-center gap-2",children:[(0,In.jsx)(Sm,{className:"w-5 h-5 ".concat(r?"text-red-400":"text-red-600")}),(0,In.jsx)("h4",{className:"font-medium ".concat(r?"text-white":"text-slate-800"),children:"Account"})]}),(0,In.jsx)("p",{className:"text-xs ".concat(r?"text-gray-400":"text-slate-600"),children:"Logout to switch to a different account or sign in as another user"}),(0,In.jsxs)(rr,{onClick:async()=>{try{const{signOut:e}=n(6897),{auth:t}=n(6860);window.confirm("Are you sure you want to logout?")&&(await e(t),console.log("\u2705 User logged out successfully"),T({title:"Logged Out",description:"You have been logged out successfully."}))}catch(e){console.error("\u274c Logout error:",e),T({title:"Logout Failed",description:"Failed to logout. Please try again.",variant:"destructive"})}},variant:"destructive",className:"w-full ".concat(r?"bg-red-600 hover:bg-red-700":"bg-red-500 hover:bg-red-600"," text-white"),children:[(0,In.jsx)(Sm,{className:"w-4 h-4 mr-2"}),"Logout"]}),(0,In.jsx)("div",{className:"mt-3 p-3 rounded-lg ".concat(r?"bg-gray-800/50":"bg-gray-100"),children:(0,In.jsxs)("p",{className:"text-xs ".concat(r?"text-gray-400":"text-gray-600"),children:["\ud83d\udca1 ",(0,In.jsx)("strong",{children:"Note:"})," Your data is saved locally and in the cloud. Login again to access it from any device."]})})]})})]})})}),(0,In.jsxs)(Fi,{value:"fuel",className:"p-4 overflow-y-auto",style:{height:"calc(100vh - 60px - 48px - 48px)"},children:[(0,In.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,In.jsx)(pr,{className:"text-sm font-medium",children:"Add New Fuel Type"}),(0,In.jsxs)("div",{className:"flex gap-2",children:[(0,In.jsx)(sr,{value:h,onChange:re,placeholder:"Enter fuel type name",className:"flex-1",autoComplete:"off",inputMode:"text"}),(0,In.jsx)(rr,{onClick:()=>{if(!h.trim())return void T({title:"Invalid Input",description:"Please enter a fuel type name",variant:"destructive"});if(a[h])return void T({title:"Duplicate Fuel Type",description:"This fuel type already exists",variant:"destructive"});const e=(0,s.A)((0,s.A)({},a),{},{[h]:{price:100,nozzleCount:2}});o(e),el.Ay.setFuelSettings(e),f(""),T({title:"Fuel Type Added",description:"".concat(h," has been added successfully. Set the rate in the Rate tab.")})},size:"sm",children:(0,In.jsx)(To,{className:"w-4 h-4"})})]})]}),(0,In.jsx)(jh,{className:"my-4"}),(0,In.jsxs)("div",{className:"space-y-3",children:[(0,In.jsx)(pr,{className:"text-sm font-medium",children:"Configure Fuel Types"}),Object.entries(a).map(e=>{let[t,n]=e;return(0,In.jsxs)("div",{className:"border rounded-lg p-3 ".concat(r?"border-gray-600 bg-gray-700":"border-slate-200 bg-slate-50"),children:[(0,In.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,In.jsx)(Vf,{className:"bg-blue-100 text-blue-800 border-0",children:t}),"MPP"!==t.toUpperCase()&&(0,In.jsx)(rr,{variant:"ghost",size:"sm",onClick:()=>(e=>{const{[e]:t}=a,n=(0,i.A)(a,[e].map(tm.A));o(n),el.Ay.setFuelSettings(n),T({title:"Fuel Type Removed",description:"".concat(e," has been removed successfully")})})(t),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:(0,In.jsx)(Wf,{className:"w-3 h-3"})})]}),(0,In.jsx)("div",{className:"space-y-2",children:(0,In.jsxs)("div",{className:"flex items-center justify-between",children:[(0,In.jsx)("span",{className:"text-sm text-slate-600",children:"Nozzles:"}),(0,In.jsxs)("div",{className:"flex items-center gap-2",children:[(0,In.jsx)(rr,{variant:"outline",size:"sm",onClick:()=>ne(t,-1),disabled:n.nozzleCount<=1,children:(0,In.jsx)(_o,{className:"w-3 h-3"})}),(0,In.jsx)("span",{className:"font-medium w-8 text-center",children:n.nozzleCount}),(0,In.jsx)(rr,{variant:"outline",size:"sm",onClick:()=>ne(t,1),disabled:n.nozzleCount>=10,children:(0,In.jsx)(To,{className:"w-3 h-3"})})]})]})})]},t)})]}),(0,In.jsx)(jh,{className:"my-4"}),(0,In.jsxs)(rr,{variant:"outline",onClick:()=>{o({Petrol:{price:102.5,nozzleCount:3},Diesel:{price:89.75,nozzleCount:2},CNG:{price:75.2,nozzleCount:2},Premium:{price:108.9,nozzleCount:1}}),T({title:"Settings Reset",description:"Fuel settings have been reset to defaults"})},className:"w-full flex items-center gap-2",children:[(0,In.jsx)(Am,{className:"w-4 h-4"}),"Reset to Defaults"]})]}),(0,In.jsx)(Fi,{value:"backup",className:"p-4 overflow-y-auto",style:{height:"calc(100vh - 60px - 48px - 48px)"},children:(0,In.jsxs)("div",{className:"space-y-4",children:[(0,In.jsx)(jh,{className:r?"bg-gray-600":"bg-slate-200"}),(0,In.jsx)("div",{className:"border rounded-lg p-4 ".concat(r?"border-gray-600 bg-gray-700":"border-slate-200 bg-slate-50"),children:(0,In.jsxs)("div",{className:"space-y-3",children:[(0,In.jsx)("h4",{className:"font-medium ".concat(r?"text-white":"text-slate-800"),children:"Manual Backup"}),(0,In.jsx)("p",{className:"text-sm ".concat(r?"text-gray-400":"text-slate-600"),children:"Export data manually or copy to clipboard"}),(0,In.jsxs)("div",{className:"grid grid-cols-1 gap-2",children:[(0,In.jsx)(rr,{variant:"outline",className:"w-full",onClick:async()=>{try{const e=el.Ay.exportAllData(),t=JSON.stringify(e,null,2),n="mpump-backup-".concat((new Date).toISOString().split("T")[0],".json"),r=new Blob([t],{type:"application/json"}),i=URL.createObjectURL(r),s=document.createElement("a");s.href=i,s.download=n,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(i),T({title:"\u2713 Backup Exported",description:"Check your Downloads folder for ".concat(n)})}catch(e){console.error("Export error:",e),T({title:"Export Failed",description:"Could not download backup file. Try 'Copy Backup Data' button instead.",variant:"destructive"})}},children:"\ud83d\udcbe Export Data Backup"}),(0,In.jsx)(rr,{variant:"outline",className:"w-full",onClick:()=>{try{const e=el.Ay.exportAllData(),t=JSON.stringify(e,null,2);navigator.clipboard.writeText(t).then(()=>{T({title:"Backup Data Copied",description:"Backup data copied to clipboard. Paste it into a text file and save as .json"})}).catch(()=>{const e=document.createElement("textarea");e.value=t,e.style.position="fixed",e.style.left="-999999px",document.body.appendChild(e),e.select();try{document.execCommand("copy"),T({title:"Backup Data Copied",description:"Backup data copied to clipboard. Paste it into a text file and save as .json"})}catch(x_){T({title:"Copy Failed",description:"Could not copy to clipboard. Please enable clipboard permissions.",variant:"destructive"})}document.body.removeChild(e)})}catch(e){console.error("Copy error:",e),T({title:"Copy Failed",description:"Could not copy backup data",variant:"destructive"})}},children:"\ud83d\udccb Copy Backup Data"}),(0,In.jsx)(rr,{variant:"outline",className:"w-full",onClick:()=>{const e=document.createElement("input");e.type="file",e.accept=".json,application/json",e.onchange=e=>{const t=e.target.files[0];if(!t)return;if(!t.name.endsWith(".json"))return void T({title:"Invalid File",description:"Please select a valid JSON backup file",variant:"destructive"});const n=new FileReader;n.onload=e=>{try{const t=JSON.parse(e.target.result);if(!t.salesData&&!t.creditData&&!t.incomeData&&!t.expenseData)return void T({title:"Invalid Backup File",description:"The file doesn't contain valid backup data",variant:"destructive"});if(window.confirm("This will replace all existing data. Are you sure you want to continue?")){el.Ay.importAllData(t)?(T({title:"Data Imported Successfully",description:"Your backup has been restored. Refreshing..."}),setTimeout(()=>{window.location.reload()},2e3)):T({title:"Import Failed",description:"Failed to import data. Please try again.",variant:"destructive"})}}catch(t){T({title:"Import Error",description:"Failed to read backup file. Please ensure it's a valid JSON file.",variant:"destructive"}),console.error("Import error:",t)}},n.readAsText(t)},e.click()},children:"\ud83d\udce5 Import Data Backup"}),(0,In.jsx)(rr,{variant:"outline",className:"w-full",onClick:()=>{const e=el.Ay.getStorageInfo();T({title:"Storage Information",description:"Using ".concat(Math.round(e.usagePercent),"% of browser storage (").concat(e.itemCount," items)")})},children:"\ud83d\udcca Check Storage Usage"}),(0,In.jsx)(jh,{className:r?"bg-gray-600":"bg-slate-200"}),(0,In.jsxs)("div",{className:"space-y-3",children:[(0,In.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,In.jsxs)("div",{className:"flex-1",children:[(0,In.jsx)(pr,{className:"text-xs mb-1 block ".concat(r?"text-gray-300":"text-slate-600"),children:"Select Date"}),(0,In.jsx)(sr,{type:"date",value:b,onChange:e=>x(e.target.value),className:"".concat(r?"bg-gray-600 border-gray-500 text-white":"")})]}),(0,In.jsx)("div",{className:"flex-1 self-end",children:(0,In.jsx)(rr,{variant:"outline",className:"w-full bg-green-600 hover:bg-green-700 text-white border-green-600",onClick:()=>{const e=el.Ay.exportDataByDate(b),t=new Blob([JSON.stringify(e)]).size;console.log("Backup data size:",t,"bytes"),t>3e3&&T({title:"Warning",description:"Data size is ".concat((t/1024).toFixed(2)," KB. QR code may be difficult to scan."),variant:"destructive"}),y(!0)},children:"\ud83d\udce4 Send via QR"})})]}),(0,In.jsx)("div",{children:(0,In.jsx)(rr,{variant:"outline",className:"w-full bg-blue-600 hover:bg-blue-700 text-white border-blue-600",onClick:()=>{w(!0)},children:"\ud83d\udce5 Receive via QR"})})]})]})]})}),(0,In.jsx)(jh,{className:r?"bg-gray-600":"bg-slate-200"}),(0,In.jsx)("div",{className:"border rounded-lg p-4 ".concat(r?"border-gray-600 bg-gray-700":"border-slate-200 bg-slate-50"),children:(0,In.jsxs)("div",{className:"space-y-4",children:[(0,In.jsxs)("div",{className:"flex items-center justify-between",children:[(0,In.jsx)("h4",{className:"font-medium ".concat(r?"text-white":"text-slate-800"),children:"Auto Backup (Every 7 Days)"}),(0,In.jsx)(Vf,{variant:W?"default":"outline",children:W?"Enabled":"Disabled"})]}),(0,In.jsx)("p",{className:"text-sm ".concat(r?"text-gray-400":"text-slate-600"),children:"Automatically download backup file every 7 days"}),(0,In.jsxs)("div",{className:"space-y-3",children:[(0,In.jsxs)("div",{className:"flex items-center gap-2",children:[(0,In.jsx)("input",{type:"checkbox",id:"weekly-backup-toggle",checked:W,onChange:e=>{const t=e.target.checked;q(t),I(t);const n=k();K(n.lastBackupTime),X(n.nextScheduledTime),T({title:t?"Auto Backup Enabled":"Auto Backup Disabled",description:t?"Backup will be automatically downloaded every 7 days":"Auto backup has been turned off"})},className:"w-4 h-4"}),(0,In.jsx)("label",{htmlFor:"weekly-backup-toggle",className:"text-sm cursor-pointer ".concat(r?"text-gray-300":"text-slate-700"),children:"Enable automatic backup every 7 days"})]}),W&&(0,In.jsxs)("div",{className:"space-y-2 p-3 rounded ".concat(r?"bg-gray-600":"bg-blue-50"),children:[(0,In.jsxs)("div",{className:"text-xs ".concat(r?"text-gray-300":"text-slate-700"),children:[(0,In.jsx)("strong",{children:"Last Auto Backup:"})," ",G?new Date(G).toLocaleString():"Not yet performed"]}),(0,In.jsxs)("div",{className:"text-xs ".concat(r?"text-gray-300":"text-slate-700"),children:[(0,In.jsx)("strong",{children:"Next Scheduled:"})," ",Y?new Date(Y).toLocaleString():"Not scheduled"]})]}),(0,In.jsx)("p",{className:"text-xs ".concat(r?"text-gray-500":"text-slate-500"),children:"\ud83d\udca1 Note: Backup file will download automatically when you open the app after 7 days"})]})]})}),(0,In.jsx)(jh,{className:r?"bg-gray-600":"bg-slate-200"}),(0,In.jsx)("div",{className:"border rounded-lg p-4 ".concat(r?"border-gray-600 bg-gray-700":"border-slate-200 bg-slate-50"),children:(0,In.jsxs)("div",{className:"space-y-3",children:[(0,In.jsx)("h4",{className:"font-medium ".concat(r?"text-white":"text-slate-800"),children:"Merge Backup Data"}),(0,In.jsx)(rr,{variant:"outline",className:"w-full bg-orange-600 hover:bg-orange-700 text-white border-orange-600",onClick:()=>{const e=document.createElement("input");e.type="file",e.accept=".json,application/json",e.onchange=e=>{const t=e.target.files[0];if(!t)return;if(!t.name.endsWith(".json"))return void T({title:"Invalid File",description:"Please select a valid JSON backup file",variant:"destructive"});const n=new FileReader;n.onload=e=>{try{const t=JSON.parse(e.target.result);if(!t.salesData&&!t.creditData&&!t.incomeData&&!t.expenseData)return void T({title:"Invalid Backup File",description:"The file doesn't contain valid backup data",variant:"destructive"});if(window.confirm("This will merge the backup data with your existing data. In case of conflicts, your existing data will be kept. Continue?")){el.Ay.mergeAllData(t)?(T({title:"Data Merged Successfully",description:"Backup data has been merged with existing data. Refreshing..."}),setTimeout(()=>{window.location.reload()},2e3)):T({title:"Merge Failed",description:"Failed to merge data. Please try again.",variant:"destructive"})}}catch(t){T({title:"Merge Error",description:"Failed to read backup file. Please ensure it's a valid JSON file.",variant:"destructive"}),console.error("Merge error:",t)}},n.readAsText(t)},e.click()},children:"\ud83d\udd00 Merge Manual Data"})]})})]})})]})})]})})}),g&&(0,In.jsx)(Im,{isDarkMode:r,data:el.Ay.exportDataByDate(b),onClose:()=>y(!1)}),v&&(0,In.jsx)(Yg,{isDarkMode:r,onClose:()=>w(!1),onDataReceived:()=>{w(!1)}}),(0,In.jsx)(lm,{open:E,onOpenChange:N,children:(0,In.jsx)(dm,{className:"sm:max-w-md ".concat(r?"bg-gray-800 text-white":""),children:(0,In.jsxs)("div",{className:"space-y-4",children:[(0,In.jsxs)("div",{className:"text-center",children:[(0,In.jsx)("h3",{className:"text-lg font-semibold mb-2 ".concat(r?"text-white":"text-slate-800"),children:"Enable Pro Mode"}),(0,In.jsx)("p",{className:"text-sm ".concat(r?"text-gray-400":"text-slate-600"),children:"Enter password to enable Pro mode"})]}),(0,In.jsxs)("div",{className:"space-y-2",children:[(0,In.jsx)(pr,{htmlFor:"pro-password",className:"text-sm font-medium",children:"Password"}),(0,In.jsx)(sr,{id:"pro-password",type:"password",value:C,onChange:e=>_(e.target.value),onKeyPress:e=>{"Enter"===e.key&&F()},placeholder:"Enter password",className:r?"bg-gray-700 border-gray-600":"",autoFocus:!0})]}),(0,In.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,In.jsx)(rr,{variant:"outline",onClick:()=>{N(!1),_("")},className:r?"border-gray-600":"",children:"Cancel"}),(0,In.jsx)(rr,{onClick:F,className:"bg-blue-600 hover:bg-blue-700",children:"Enable Pro Mode"})]})]})})})]})},Qg=e=>{let{isDarkMode:t,salesData:n,creditData:r,incomeData:i,expenseData:s,settlementData:a,selectedDate:o,onEditSale:l,deleteSaleRecord:c,onEditCredit:u,deleteCreditRecord:d,onEditIncome:h,deleteIncomeRecord:f,onEditExpense:p,deleteExpenseRecord:m,onEditSettlement:g,deleteSettlementRecord:y}=e;const v=n.filter(e=>e.date===o),w=r.filter(e=>e.date===o),b=i.filter(e=>e.date===o),x=s.filter(e=>e.date===o),S=a.filter(e=>e.date===o),A=v.length+w.length+b.length+x.length+S.length,E=e=>{let{title:n,icon:r,records:i,color:s,renderRecord:a}=e;return 0===i.length?null:(0,In.jsxs)("div",{className:"mb-2",children:[(0,In.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,In.jsx)(r,{className:"w-4 h-4 ".concat(s)}),(0,In.jsxs)("h3",{className:"text-xs font-semibold ".concat(t?"text-white":"text-slate-800"),children:[n," (",i.length,")"]})]}),(0,In.jsx)("div",{className:"space-y-1",children:i.map(a)})]})};return(0,In.jsxs)(Mn,{className:"".concat(t?"bg-gray-800 border-gray-700":"bg-white border-slate-200"," shadow-lg mt-2"),children:[(0,In.jsx)(Fn,{className:"bg-gradient-to-r from-indigo-600 to-indigo-700 text-white rounded-t-lg py-2",children:(0,In.jsxs)(jn,{className:"flex items-center gap-2 text-base",children:[(0,In.jsx)(Vo,{className:"w-5 h-5"}),"All Records for ",o===(new Date).toISOString().split("T")[0]?"Today":o," (",A,")"]})}),(0,In.jsx)(Un,{className:"p-2",children:0===A?(0,In.jsxs)("div",{className:"text-center py-8 text-slate-500",children:[(0,In.jsx)(Vo,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),(0,In.jsxs)("p",{children:["No records for ",o===(new Date).toISOString().split("T")[0]?"today":"selected date"]})]}):(0,In.jsxs)(In.Fragment,{children:[(0,In.jsx)(E,{title:"Fuel Sales",icon:jo,records:v,color:"text-blue-600",renderRecord:e=>(0,In.jsxs)("div",{className:"border rounded-lg p-2 sm:p-3 ".concat(t?"border-gray-600 bg-gray-700":"border-slate-200 bg-slate-50"),children:[(0,In.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-1",children:[(0,In.jsxs)("div",{className:"flex items-center gap-2 flex-wrap flex-1 min-w-0",children:[(0,In.jsx)(Vf,{className:"bg-blue-100 text-blue-800 border-0 text-xs",children:e.nozzle}),(0,In.jsx)(Vf,{className:"bg-purple-100 text-purple-800 border-0 text-xs",children:e.fuelType}),(0,In.jsxs)("div",{className:"flex items-center gap-1 text-green-600 font-bold",children:[(0,In.jsx)(Fo,{className:"w-4 h-4"}),(0,In.jsx)("span",{className:"text-base sm:text-lg",children:e.amount.toFixed(2)})]})]}),(0,In.jsxs)("div",{className:"flex items-center gap-1 flex-shrink-0",children:[(0,In.jsx)(rr,{variant:"ghost",size:"sm",onClick:()=>l&&l(e),className:"h-7 w-7 p-0",children:(0,In.jsx)(Hf,{className:"w-3.5 h-3.5"})}),(0,In.jsx)(rr,{variant:"ghost",size:"sm",onClick:()=>c&&c(e.id),className:"h-7 w-7 p-0",children:(0,In.jsx)(Wf,{className:"w-3.5 h-3.5"})})]})]}),(0,In.jsx)("div",{className:"space-y-1 text-xs sm:text-sm",children:(0,In.jsxs)("div",{className:"grid grid-cols-2 gap-x-2 gap-y-1",children:[(0,In.jsxs)("div",{className:"flex flex-col sm:flex-row sm:gap-1",children:[(0,In.jsx)("span",{className:"font-medium ".concat(t?"text-gray-400":"text-slate-600"),children:"Start:"}),(0,In.jsx)("span",{children:e.startReading})]}),(0,In.jsxs)("div",{className:"flex flex-col sm:flex-row sm:gap-1",children:[(0,In.jsx)("span",{className:"font-medium ".concat(t?"text-gray-400":"text-slate-600"),children:"End:"}),(0,In.jsx)("span",{children:e.endReading})]}),(0,In.jsxs)("div",{className:"flex flex-col sm:flex-row sm:gap-1",children:[(0,In.jsx)("span",{className:"font-medium ".concat(t?"text-gray-400":"text-slate-600"),children:"Litres:"}),(0,In.jsx)("span",{children:e.liters})]}),(0,In.jsxs)("div",{className:"flex flex-col sm:flex-row sm:gap-1",children:[(0,In.jsx)("span",{className:"font-medium ".concat(t?"text-gray-400":"text-slate-600"),children:"Rate:"}),(0,In.jsxs)("span",{children:["\u20b9",e.rate]})]})]})})]},e.id)}),(0,In.jsx)(E,{title:"Credit Sales",icon:Bo,records:w,color:"text-orange-600",renderRecord:e=>(0,In.jsxs)("div",{className:"border rounded-lg p-2 sm:p-3 ".concat(t?"border-gray-600 bg-gray-700":"border-slate-200 bg-slate-50"),children:[(0,In.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-2",children:[(0,In.jsxs)("div",{className:"flex items-center gap-2 flex-wrap flex-1 min-w-0",children:[(0,In.jsx)(Vf,{className:"bg-orange-100 text-orange-800 border-0 text-xs",children:"Credit"}),(0,In.jsxs)("div",{className:"flex items-center gap-1 text-orange-600 font-bold",children:[(0,In.jsx)(Fo,{className:"w-4 h-4"}),(0,In.jsx)("span",{className:"text-base sm:text-lg",children:e.amount.toFixed(2)})]})]}),(0,In.jsxs)("div",{className:"flex items-center gap-1 flex-shrink-0",children:[(0,In.jsx)(rr,{variant:"ghost",size:"sm",onClick:()=>u&&u(e),className:"h-7 w-7 p-0",children:(0,In.jsx)(Hf,{className:"w-3.5 h-3.5"})}),(0,In.jsx)(rr,{variant:"ghost",size:"sm",onClick:()=>d&&d(e.id),className:"h-7 w-7 p-0",children:(0,In.jsx)(Wf,{className:"w-3.5 h-3.5"})})]})]}),(0,In.jsx)("div",{className:"mb-2",children:(0,In.jsx)("span",{className:"font-semibold text-base break-words",children:e.customerName})}),e.fuelEntries&&e.fuelEntries.length>0?(0,In.jsx)("div",{className:"space-y-2 mb-2",children:e.fuelEntries.map((e,n)=>(0,In.jsxs)("div",{className:"p-2 rounded border ".concat(t?"bg-gray-600 border-gray-500":"bg-purple-50 border-purple-200"),children:[(0,In.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,In.jsx)(Vf,{className:"bg-purple-100 text-purple-800 border-0 text-xs",children:e.fuelType}),(0,In.jsxs)("span",{className:"text-xs font-medium text-purple-600",children:["\u20b9",e.amount.toFixed(2)]})]}),(0,In.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs mt-1",children:[(0,In.jsxs)("div",{children:[(0,In.jsx)("span",{className:t?"text-gray-400":"text-slate-600",children:"Litres: "}),(0,In.jsxs)("span",{className:"font-medium",children:[e.liters,"L"]})]}),(0,In.jsxs)("div",{children:[(0,In.jsx)("span",{className:t?"text-gray-400":"text-slate-600",children:"Rate: "}),(0,In.jsxs)("span",{className:"font-medium",children:["\u20b9",e.rate]})]})]})]},n))}):e.liters&&(0,In.jsxs)("div",{className:"space-y-1 mb-2",children:[(0,In.jsx)("div",{className:"flex items-center gap-2",children:(0,In.jsx)(Vf,{className:"bg-purple-100 text-purple-800 border-0 text-xs",children:e.fuelType})}),(0,In.jsxs)("div",{className:"grid grid-cols-2 gap-x-2 gap-y-1 text-xs sm:text-sm",children:[(0,In.jsxs)("div",{className:"flex flex-col sm:flex-row sm:gap-1",children:[(0,In.jsx)("span",{className:"font-medium ".concat(t?"text-gray-400":"text-slate-600"),children:"Litres:"}),(0,In.jsxs)("span",{children:[e.liters,"L"]})]}),(0,In.jsxs)("div",{className:"flex flex-col sm:flex-row sm:gap-1",children:[(0,In.jsx)("span",{className:"font-medium ".concat(t?"text-gray-400":"text-slate-600"),children:"Rate:"}),(0,In.jsxs)("span",{children:["\u20b9",e.rate]})]})]})]}),e.incomeEntries&&e.incomeEntries.length>0&&(0,In.jsx)("div",{className:"space-y-2 mb-2",children:e.incomeEntries.map((e,n)=>(0,In.jsx)("div",{className:"p-2 rounded border ".concat(t?"bg-gray-600 border-gray-500":"bg-green-50 border-green-200"),children:(0,In.jsxs)("div",{className:"flex items-center justify-between",children:[(0,In.jsx)("span",{className:"text-xs font-medium",children:e.description}),(0,In.jsxs)("span",{className:"text-xs font-medium text-green-600",children:["+\u20b9",e.amount.toFixed(2)]})]})},n))}),e.expenseEntries&&e.expenseEntries.length>0&&(0,In.jsx)("div",{className:"space-y-2",children:e.expenseEntries.map((e,n)=>(0,In.jsx)("div",{className:"p-2 rounded border ".concat(t?"bg-gray-600 border-gray-500":"bg-red-50 border-red-200"),children:(0,In.jsxs)("div",{className:"flex items-center justify-between",children:[(0,In.jsx)("span",{className:"text-xs font-medium",children:e.description}),(0,In.jsxs)("span",{className:"text-xs font-medium text-red-600",children:["-\u20b9",e.amount.toFixed(2)]})]})},n))})]},e.id)}),(0,In.jsx)(E,{title:"Income",icon:Qp,records:b,color:"text-green-600",renderRecord:e=>(0,In.jsx)("div",{className:"border rounded-lg p-2 sm:p-3 ".concat(t?"border-gray-600 bg-gray-700":"border-slate-200 bg-slate-50"),children:(0,In.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,In.jsx)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:e.description&&(0,In.jsx)("p",{className:"text-xs sm:text-sm break-words ".concat(t?"text-gray-400":"text-slate-600"),children:e.description})}),(0,In.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[(0,In.jsxs)("div",{className:"flex items-center gap-1 text-green-600 font-bold",children:[(0,In.jsx)(Fo,{className:"w-4 h-4"}),(0,In.jsx)("span",{className:"text-base sm:text-lg",children:e.amount.toFixed(2)})]}),(0,In.jsx)(rr,{variant:"ghost",size:"sm",onClick:()=>h&&h(e),className:"h-7 w-7 p-0",children:(0,In.jsx)(Hf,{className:"w-3.5 h-3.5"})}),(0,In.jsx)(rr,{variant:"ghost",size:"sm",onClick:()=>f&&f(e.id),className:"h-7 w-7 p-0",children:(0,In.jsx)(Wf,{className:"w-3.5 h-3.5"})})]})]})},e.id)}),(0,In.jsx)(E,{title:"Expenses",icon:zo,records:x,color:"text-red-600",renderRecord:e=>(0,In.jsx)("div",{className:"border rounded-lg p-2 sm:p-3 ".concat(t?"border-gray-600 bg-gray-700":"border-slate-200 bg-slate-50"),children:(0,In.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,In.jsx)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:e.description&&(0,In.jsx)("p",{className:"text-xs sm:text-sm break-words ".concat(t?"text-gray-400":"text-slate-600"),children:e.description})}),(0,In.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[(0,In.jsxs)("div",{className:"flex items-center gap-1 text-red-600 font-bold",children:[(0,In.jsx)(Fo,{className:"w-4 h-4"}),(0,In.jsx)("span",{className:"text-base sm:text-lg",children:e.amount.toFixed(2)})]}),(0,In.jsx)(rr,{variant:"ghost",size:"sm",onClick:()=>p&&p(e),className:"h-7 w-7 p-0",children:(0,In.jsx)(Hf,{className:"w-3.5 h-3.5"})}),(0,In.jsx)(rr,{variant:"ghost",size:"sm",onClick:()=>m&&m(e.id),className:"h-7 w-7 p-0",children:(0,In.jsx)(Wf,{className:"w-3.5 h-3.5"})})]})]})},e.id)}),(0,In.jsx)(E,{title:"Settlement",icon:Ho,records:S,color:"text-yellow-600",renderRecord:e=>(0,In.jsx)("div",{className:"border rounded-lg p-2 sm:p-3 ".concat(t?"border-gray-600 bg-gray-700":"border-slate-200 bg-slate-50"),children:(0,In.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,In.jsx)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:e.description&&(0,In.jsx)("p",{className:"text-xs sm:text-sm break-words ".concat(t?"text-gray-400":"text-slate-600"),children:e.description})}),(0,In.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[(0,In.jsxs)("div",{className:"flex items-center gap-1 text-yellow-600 font-bold",children:[(0,In.jsx)(Fo,{className:"w-4 h-4"}),(0,In.jsx)("span",{className:"text-base sm:text-lg",children:e.amount.toFixed(2)})]}),(0,In.jsx)(rr,{variant:"ghost",size:"sm",onClick:()=>g&&g(e),className:"h-7 w-7 p-0",children:(0,In.jsx)(Hf,{className:"w-3.5 h-3.5"})}),(0,In.jsx)(rr,{variant:"ghost",size:"sm",onClick:()=>y&&y(e.id),className:"h-7 w-7 p-0",children:(0,In.jsx)(Wf,{className:"w-3.5 h-3.5"})})]})]})},e.id)})]})})]})},Jg=ho("printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]),Zg=ho("file-spreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);var $g={version:"0.18.5"},ey=1200,ty=1252,ny=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],ry={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},iy=function(e){-1!=ny.indexOf(e)&&(ty=ry[0]=e)};var sy=function(e){ey=e,iy(e)};function ay(){sy(1200),iy(1252)}function oy(e){for(var t=[],n=0;n<e.length>>1;++n)t[n]=String.fromCharCode(e.charCodeAt(2*n+1)+(e.charCodeAt(2*n)<<8));return t.join("")}var ly,cy=function(e){return String.fromCharCode(e)},uy=function(e){return String.fromCharCode(e)};var dy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function hy(e){for(var t="",n=0,r=0,i=0,s=0,a=0,o=0,l=0,c=0;c<e.length;)s=(n=e.charCodeAt(c++))>>2,a=(3&n)<<4|(r=e.charCodeAt(c++))>>4,o=(15&r)<<2|(i=e.charCodeAt(c++))>>6,l=63&i,isNaN(r)?o=l=64:isNaN(i)&&(l=64),t+=dy.charAt(s)+dy.charAt(a)+dy.charAt(o)+dy.charAt(l);return t}function fy(e){var t="",n=0,r=0,i=0,s=0,a=0,o=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var l=0;l<e.length;)n=dy.indexOf(e.charAt(l++))<<2|(s=dy.indexOf(e.charAt(l++)))>>4,t+=String.fromCharCode(n),r=(15&s)<<4|(a=dy.indexOf(e.charAt(l++)))>>2,64!==a&&(t+=String.fromCharCode(r)),i=(3&a)<<6|(o=dy.indexOf(e.charAt(l++))),64!==o&&(t+=String.fromCharCode(i));return t}var py=function(){return"undefined"!==typeof Buffer&&"undefined"!==typeof process&&"undefined"!==typeof process.versions&&!!process.versions.node}(),my=function(){if("undefined"!==typeof Buffer){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch(b_){e=!0}return e?function(e,t){return t?new Buffer(e,t):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function gy(e){return py?Buffer.alloc?Buffer.alloc(e):new Buffer(e):"undefined"!=typeof Uint8Array?new Uint8Array(e):new Array(e)}function yy(e){return py?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):"undefined"!=typeof Uint8Array?new Uint8Array(e):new Array(e)}var vy=function(e){return py?my(e,"binary"):e.split("").map(function(e){return 255&e.charCodeAt(0)})};function wy(e){if("undefined"===typeof ArrayBuffer)return vy(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r!=e.length;++r)n[r]=255&e.charCodeAt(r);return t}function by(e){if(Array.isArray(e))return e.map(function(e){return String.fromCharCode(e)}).join("");for(var t=[],n=0;n<e.length;++n)t[n]=String.fromCharCode(e[n]);return t.join("")}var xy=py?function(e){return Buffer.concat(e.map(function(e){return Buffer.isBuffer(e)?e:my(e)}))}:function(e){if("undefined"!==typeof Uint8Array){var t=0,n=0;for(t=0;t<e.length;++t)n+=e[t].length;var r=new Uint8Array(n),i=0;for(t=0,n=0;t<e.length;n+=i,++t)if(i=e[t].length,e[t]instanceof Uint8Array)r.set(e[t],n);else{if("string"==typeof e[t])throw"wtf";r.set(new Uint8Array(e[t]),n)}return r}return[].concat.apply([],e.map(function(e){return Array.isArray(e)?e:[].slice.call(e)}))};var Sy=/\u0000/g,Ay=/[\u0001-\u0006]/g;function Ey(e){for(var t="",n=e.length-1;n>=0;)t+=e.charAt(n--);return t}function Ny(e,t){var n=""+e;return n.length>=t?n:Fv("0",t-n.length)+n}function Cy(e,t){var n=""+e;return n.length>=t?n:Fv(" ",t-n.length)+n}function _y(e,t){var n=""+e;return n.length>=t?n:n+Fv(" ",t-n.length)}var Ty=Math.pow(2,32);function Iy(e,t){return e>Ty||e<-Ty?function(e,t){var n=""+Math.round(e);return n.length>=t?n:Fv("0",t-n.length)+n}(e,t):function(e,t){var n=""+e;return n.length>=t?n:Fv("0",t-n.length)+n}(Math.round(e),t)}function ky(e,t){return t=t||0,e.length>=7+t&&103===(32|e.charCodeAt(t))&&101===(32|e.charCodeAt(t+1))&&110===(32|e.charCodeAt(t+2))&&101===(32|e.charCodeAt(t+3))&&114===(32|e.charCodeAt(t+4))&&97===(32|e.charCodeAt(t+5))&&108===(32|e.charCodeAt(t+6))}var Py=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],Ry=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];var Dy={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"\u4e0a\u5348/\u4e0b\u5348 "hh"\u6642"mm"\u5206"ss"\u79d2 "'},Oy={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},Ly={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function My(e,t,n){for(var r=e<0?-1:1,i=e*r,s=0,a=1,o=0,l=1,c=0,u=0,d=Math.floor(i);c<t&&(o=(d=Math.floor(i))*a+s,u=d*c+l,!(i-d<5e-8));)i=1/(i-d),s=a,a=o,l=c,c=u;if(u>t&&(c>t?(u=l,o=s):(u=c,o=a)),!n)return[0,r*o,u];var h=Math.floor(r*o/u);return[h,r*o-h*u,u]}function Fy(e,t,n){if(e>2958465||e<0)return null;var r=0|e,i=Math.floor(86400*(e-r)),s=0,a=[],o={D:r,T:i,u:86400*(e-r)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),t&&t.date1904&&(r+=1462),o.u>.9999&&(o.u=0,86400==++i&&(o.T=i=0,++r,++o.D)),60===r)a=n?[1317,10,29]:[1900,2,29],s=3;else if(0===r)a=n?[1317,8,29]:[1900,1,0],s=6;else{r>60&&--r;var l=new Date(1900,0,1);l.setDate(l.getDate()+r-1),a=[l.getFullYear(),l.getMonth()+1,l.getDate()],s=l.getDay(),r<60&&(s=(s+6)%7),n&&(s=function(e,t){t[0]-=581;var n=e.getDay();e<60&&(n=(n+6)%7);return n}(l,a))}return o.y=a[0],o.m=a[1],o.d=a[2],o.S=i%60,i=Math.floor(i/60),o.M=i%60,i=Math.floor(i/60),o.H=i,o.q=s,o}var jy=new Date(1899,11,31,0,0,0),By=jy.getTime(),Uy=new Date(1900,2,1,0,0,0);function zy(e,t){var n=e.getTime();return t?n-=1262304e5:e>=Uy&&(n+=864e5),(n-(By+6e4*(e.getTimezoneOffset()-jy.getTimezoneOffset())))/864e5}function Vy(e){return-1==e.indexOf(".")?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Hy(e){var t,n=Math.floor(Math.log(Math.abs(e))*Math.LOG10E);return t=n>=-4&&n<=-1?e.toPrecision(10+n):Math.abs(n)<=9?function(e){var t=e<0?12:11,n=Vy(e.toFixed(12));return n.length<=t||(n=e.toPrecision(10)).length<=t?n:e.toExponential(5)}(e):10===n?e.toFixed(10).substr(0,12):function(e){var t=Vy(e.toFixed(11));return t.length>(e<0?12:11)||"0"===t||"-0"===t?e.toPrecision(6):t}(e),Vy(function(e){return-1==e.indexOf("E")?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}(t.toUpperCase()))}function Wy(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(0|e)===e?e.toString(10):Hy(e);case"undefined":return"";case"object":if(null==e)return"";if(e instanceof Date)return dv(14,zy(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function qy(e,t,n,r){var i,s="",a=0,o=0,l=n.y,c=0;switch(e){case 98:l=n.y+543;case 121:switch(t.length){case 1:case 2:i=l%100,c=2;break;default:i=l%1e4,c=4}break;case 109:switch(t.length){case 1:case 2:i=n.m,c=t.length;break;case 3:return Ry[n.m-1][1];case 5:return Ry[n.m-1][0];default:return Ry[n.m-1][2]}break;case 100:switch(t.length){case 1:case 2:i=n.d,c=t.length;break;case 3:return Py[n.q][0];default:return Py[n.q][1]}break;case 104:switch(t.length){case 1:case 2:i=1+(n.H+11)%12,c=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:i=n.H,c=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:i=n.M,c=t.length;break;default:throw"bad minute format: "+t}break;case 115:if("s"!=t&&"ss"!=t&&".0"!=t&&".00"!=t&&".000"!=t)throw"bad second format: "+t;return 0!==n.u||"s"!=t&&"ss"!=t?(o=r>=2?3===r?1e3:100:1===r?10:1,(a=Math.round(o*(n.S+n.u)))>=60*o&&(a=0),"s"===t?0===a?"0":""+a/o:(s=Ny(a,2+r),"ss"===t?s.substr(0,2):"."+s.substr(2,t.length-1))):Ny(n.S,t.length);case 90:switch(t){case"[h]":case"[hh]":i=24*n.D+n.H;break;case"[m]":case"[mm]":i=60*(24*n.D+n.H)+n.M;break;case"[s]":case"[ss]":i=60*(60*(24*n.D+n.H)+n.M)+Math.round(n.S+n.u);break;default:throw"bad abstime format: "+t}c=3===t.length?1:2;break;case 101:i=l,c=1}return c>0?Ny(i,c):""}function Gy(e){if(e.length<=3)return e;for(var t=e.length%3,n=e.substr(0,t);t!=e.length;t+=3)n+=(n.length>0?",":"")+e.substr(t,3);return n}var Ky=/%/g;function Yy(e,t){var n,r=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(0==t)return"0.0E+0";if(t<0)return"-"+Yy(e,-t);var i=e.indexOf(".");-1===i&&(i=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%i;if(s<0&&(s+=i),-1===(n=(t/Math.pow(10,s)).toPrecision(r+1+(i+s)%i)).indexOf("e")){var a=Math.floor(Math.log(t)*Math.LOG10E);for(-1===n.indexOf(".")?n=n.charAt(0)+"."+n.substr(1)+"E+"+(a-n.length+s):n+="E+"+(a-s);"0."===n.substr(0,2);)n=(n=n.charAt(0)+n.substr(2,i)+"."+n.substr(2+i)).replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(e,t,n,r){return t+n+r.substr(0,(i+s)%i)+"."+r.substr(s)+"E"})}else n=t.toExponential(r);return e.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),e.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}var Xy=/# (\?+)( ?)\/( ?)(\d+)/;var Qy=/^#*0*\.([0#]+)/,Jy=/\).*[0#]/,Zy=/\(###\) ###\\?-####/;function $y(e){for(var t,n="",r=0;r!=e.length;++r)switch(t=e.charCodeAt(r)){case 35:break;case 63:n+=" ";break;case 48:n+="0";break;default:n+=String.fromCharCode(t)}return n}function ev(e,t){var n=Math.pow(10,t);return""+Math.round(e*n)/n}function tv(e,t){var n=e-Math.floor(e),r=Math.pow(10,t);return t<(""+Math.round(n*r)).length?0:Math.round(n*r)}function nv(e,t,n){if(40===e.charCodeAt(0)&&!t.match(Jy)){var r=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?nv("n",r,n):"("+nv("n",r,-n)+")"}if(44===t.charCodeAt(t.length-1))return function(e,t,n){for(var r=t.length-1;44===t.charCodeAt(r-1);)--r;return sv(e,t.substr(0,r),n/Math.pow(10,3*(t.length-r)))}(e,t,n);if(-1!==t.indexOf("%"))return function(e,t,n){var r=t.replace(Ky,""),i=t.length-r.length;return sv(e,r,n*Math.pow(10,2*i))+Fv("%",i)}(e,t,n);if(-1!==t.indexOf("E"))return Yy(t,n);if(36===t.charCodeAt(0))return"$"+nv(e,t.substr(" "==t.charAt(1)?2:1),n);var i,s,a,o,l=Math.abs(n),c=n<0?"-":"";if(t.match(/^00+$/))return c+Iy(l,t.length);if(t.match(/^[#?]+$/))return"0"===(i=Iy(n,0))&&(i=""),i.length>t.length?i:$y(t.substr(0,t.length-i.length))+i;if(s=t.match(Xy))return function(e,t,n){var r=parseInt(e[4],10),i=Math.round(t*r),s=Math.floor(i/r),a=i-s*r,o=r;return n+(0===s?"":""+s)+" "+(0===a?Fv(" ",e[1].length+1+e[4].length):Cy(a,e[1].length)+e[2]+"/"+e[3]+Ny(o,e[4].length))}(s,l,c);if(t.match(/^#+0+$/))return c+Iy(l,t.length-t.indexOf("0"));if(s=t.match(Qy))return i=ev(n,s[1].length).replace(/^([^\.]+)$/,"$1."+$y(s[1])).replace(/\.$/,"."+$y(s[1])).replace(/\.(\d*)$/,function(e,t){return"."+t+Fv("0",$y(s[1]).length-t.length)}),-1!==t.indexOf("0.")?i:i.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return c+ev(l,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return c+Gy(Iy(l,0));if(s=t.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+nv(e,t,-n):Gy(""+(Math.floor(n)+function(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}(n,s[1].length)))+"."+Ny(tv(n,s[1].length),s[1].length);if(s=t.match(/^#,#*,#0/))return nv(e,t.replace(/^#,#*,/,""),n);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Ey(nv(e,t.replace(/[\\-]/g,""),n)),a=0,Ey(Ey(t.replace(/\\/g,"")).replace(/[0#]/g,function(e){return a<i.length?i.charAt(a++):"0"===e?"0":""}));if(t.match(Zy))return"("+(i=nv(e,"##########",n)).substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var u="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=My(l,Math.pow(10,a)-1,!1),i=""+c," "==(u=sv("n",s[1],o[1])).charAt(u.length-1)&&(u=u.substr(0,u.length-1)+"0"),i+=u+s[2]+"/"+s[3],(u=_y(o[2],a)).length<s[4].length&&(u=$y(s[4].substr(s[4].length-u.length))+u),i+=u;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),c+((o=My(l,Math.pow(10,a)-1,!0))[0]||(o[1]?"":"0"))+" "+(o[1]?Cy(o[1],a)+s[2]+"/"+s[3]+_y(o[2],a):Fv(" ",2*a+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return i=Iy(n,0),t.length<=i.length?i:$y(t.substr(0,t.length-i.length))+i;if(s=t.match(/^([#0?]+)\.([#0]+)$/)){i=""+n.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var d=t.indexOf(".")-a,h=t.length-i.length-d;return $y(t.substr(0,d)+i+t.substr(t.length-h))}if(s=t.match(/^00,000\.([#0]*0)$/))return a=tv(n,s[1].length),n<0?"-"+nv(e,t,-n):Gy(function(e){return e<2147483647&&e>-2147483648?""+(e>=0?0|e:e-1|0):""+Math.floor(e)}(n)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(e){return"00,"+(e.length<3?Ny(0,3-e.length):"")+e})+"."+Ny(a,s[1].length);switch(t){case"###,##0.00":return nv(e,"#,##0.00",n);case"###,###":case"##,###":case"#,###":var f=Gy(Iy(l,0));return"0"!==f?c+f:"";case"###,###.00":return nv(e,"###,##0.00",n).replace(/^0\./,".");case"#,###.00":return nv(e,"#,##0.00",n).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function rv(e,t){var n,r=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(0==t)return"0.0E+0";if(t<0)return"-"+rv(e,-t);var i=e.indexOf(".");-1===i&&(i=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%i;if(s<0&&(s+=i),!(n=(t/Math.pow(10,s)).toPrecision(r+1+(i+s)%i)).match(/[Ee]/)){var a=Math.floor(Math.log(t)*Math.LOG10E);-1===n.indexOf(".")?n=n.charAt(0)+"."+n.substr(1)+"E+"+(a-n.length+s):n+="E+"+(a-s),n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(e,t,n,r){return t+n+r.substr(0,(i+s)%i)+"."+r.substr(s)+"E"})}else n=t.toExponential(r);return e.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),e.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}function iv(e,t,n){if(40===e.charCodeAt(0)&&!t.match(Jy)){var r=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?iv("n",r,n):"("+iv("n",r,-n)+")"}if(44===t.charCodeAt(t.length-1))return function(e,t,n){for(var r=t.length-1;44===t.charCodeAt(r-1);)--r;return sv(e,t.substr(0,r),n/Math.pow(10,3*(t.length-r)))}(e,t,n);if(-1!==t.indexOf("%"))return function(e,t,n){var r=t.replace(Ky,""),i=t.length-r.length;return sv(e,r,n*Math.pow(10,2*i))+Fv("%",i)}(e,t,n);if(-1!==t.indexOf("E"))return rv(t,n);if(36===t.charCodeAt(0))return"$"+iv(e,t.substr(" "==t.charAt(1)?2:1),n);var i,s,a,o,l=Math.abs(n),c=n<0?"-":"";if(t.match(/^00+$/))return c+Ny(l,t.length);if(t.match(/^[#?]+$/))return i=""+n,0===n&&(i=""),i.length>t.length?i:$y(t.substr(0,t.length-i.length))+i;if(s=t.match(Xy))return function(e,t,n){return n+(0===t?"":""+t)+Fv(" ",e[1].length+2+e[4].length)}(s,l,c);if(t.match(/^#+0+$/))return c+Ny(l,t.length-t.indexOf("0"));if(s=t.match(Qy))return i=(i=(""+n).replace(/^([^\.]+)$/,"$1."+$y(s[1])).replace(/\.$/,"."+$y(s[1]))).replace(/\.(\d*)$/,function(e,t){return"."+t+Fv("0",$y(s[1]).length-t.length)}),-1!==t.indexOf("0.")?i:i.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return c+Gy(""+l);if(s=t.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+iv(e,t,-n):Gy(""+n)+"."+Fv("0",s[1].length);if(s=t.match(/^#,#*,#0/))return iv(e,t.replace(/^#,#*,/,""),n);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Ey(iv(e,t.replace(/[\\-]/g,""),n)),a=0,Ey(Ey(t.replace(/\\/g,"")).replace(/[0#]/g,function(e){return a<i.length?i.charAt(a++):"0"===e?"0":""}));if(t.match(Zy))return"("+(i=iv(e,"##########",n)).substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var u="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=My(l,Math.pow(10,a)-1,!1),i=""+c," "==(u=sv("n",s[1],o[1])).charAt(u.length-1)&&(u=u.substr(0,u.length-1)+"0"),i+=u+s[2]+"/"+s[3],(u=_y(o[2],a)).length<s[4].length&&(u=$y(s[4].substr(s[4].length-u.length))+u),i+=u;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),c+((o=My(l,Math.pow(10,a)-1,!0))[0]||(o[1]?"":"0"))+" "+(o[1]?Cy(o[1],a)+s[2]+"/"+s[3]+_y(o[2],a):Fv(" ",2*a+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return i=""+n,t.length<=i.length?i:$y(t.substr(0,t.length-i.length))+i;if(s=t.match(/^([#0]+)\.([#0]+)$/)){i=""+n.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var d=t.indexOf(".")-a,h=t.length-i.length-d;return $y(t.substr(0,d)+i+t.substr(t.length-h))}if(s=t.match(/^00,000\.([#0]*0)$/))return n<0?"-"+iv(e,t,-n):Gy(""+n).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(e){return"00,"+(e.length<3?Ny(0,3-e.length):"")+e})+"."+Ny(0,s[1].length);switch(t){case"###,###":case"##,###":case"#,###":var f=Gy(""+l);return"0"!==f?c+f:"";default:if(t.match(/\.[0#?]*$/))return iv(e,t.slice(0,t.lastIndexOf(".")),n)+$y(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function sv(e,t,n){return(0|n)===n?iv(e,t,n):nv(e,t,n)}var av=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function ov(e){for(var t=0,n="",r="";t<e.length;)switch(n=e.charAt(t)){case"G":ky(e,t)&&(t+=6),t++;break;case'"':for(;34!==e.charCodeAt(++t)&&t<e.length;);++t;break;case"\\":case"_":t+=2;break;case"@":++t;break;case"B":case"b":if("1"===e.charAt(t+1)||"2"===e.charAt(t+1))return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"\u4e0a":if("A/P"===e.substr(t,3).toUpperCase())return!0;if("AM/PM"===e.substr(t,5).toUpperCase())return!0;if("\u4e0a\u5348/\u4e0b\u5348"===e.substr(t,5).toUpperCase())return!0;++t;break;case"[":for(r=n;"]"!==e.charAt(t++)&&t<e.length;)r+=e.charAt(t);if(r.match(av))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(n=e.charAt(++t))>-1||"\\"==n&&"-"==e.charAt(t+1)&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===n;);break;case"*":++t," "!=e.charAt(t)&&"*"!=e.charAt(t)||++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;default:++t}return!1}var lv=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function cv(e,t){if(null==t)return!1;var n=parseFloat(t[2]);switch(t[1]){case"=":if(e==n)return!0;break;case">":if(e>n)return!0;break;case"<":if(e<n)return!0;break;case"<>":if(e!=n)return!0;break;case">=":if(e>=n)return!0;break;case"<=":if(e<=n)return!0}return!1}function uv(e,t){var n=function(e){for(var t=[],n=!1,r=0,i=0;r<e.length;++r)switch(e.charCodeAt(r)){case 34:n=!n;break;case 95:case 42:case 92:++r;break;case 59:t[t.length]=e.substr(i,r-i),i=r+1}if(t[t.length]=e.substr(i),!0===n)throw new Error("Format |"+e+"| unterminated string ");return t}(e),r=n.length,i=n[r-1].indexOf("@");if(r<4&&i>-1&&--r,n.length>4)throw new Error("cannot find right format for |"+n.join("|")+"|");if("number"!==typeof t)return[4,4===n.length||i>-1?n[n.length-1]:"@"];switch(n.length){case 1:n=i>-1?["General","General","General",n[0]]:[n[0],n[0],n[0],"@"];break;case 2:n=i>-1?[n[0],n[0],n[0],n[1]]:[n[0],n[1],n[0],"@"];break;case 3:n=i>-1?[n[0],n[1],n[0],n[2]]:[n[0],n[1],n[2],"@"]}var s=t>0?n[0]:t<0?n[1]:n[2];if(-1===n[0].indexOf("[")&&-1===n[1].indexOf("["))return[r,s];if(null!=n[0].match(/\[[=<>]/)||null!=n[1].match(/\[[=<>]/)){var a=n[0].match(lv),o=n[1].match(lv);return cv(t,a)?[r,n[0]]:cv(t,o)?[r,n[1]]:[r,n[null!=a&&null!=o?2:1]]}return[r,s]}function dv(e,t,n){null==n&&(n={});var r="";switch(typeof e){case"string":r="m/d/yy"==e&&n.dateNF?n.dateNF:e;break;case"number":null==(r=14==e&&n.dateNF?n.dateNF:(null!=n.table?n.table:Dy)[e])&&(r=n.table&&n.table[Oy[e]]||Dy[Oy[e]]),null==r&&(r=Ly[e]||"General")}if(ky(r,0))return Wy(t,n);t instanceof Date&&(t=zy(t,n.date1904));var i=uv(r,t);if(ky(i[1]))return Wy(t,n);if(!0===t)t="TRUE";else if(!1===t)t="FALSE";else if(""===t||null==t)return"";return function(e,t,n,r){for(var i,s,a,o=[],l="",c=0,u="",d="t",h="H";c<e.length;)switch(u=e.charAt(c)){case"G":if(!ky(e,c))throw new Error("unrecognized character "+u+" in "+e);o[o.length]={t:"G",v:"General"},c+=7;break;case'"':for(l="";34!==(a=e.charCodeAt(++c))&&c<e.length;)l+=String.fromCharCode(a);o[o.length]={t:"t",v:l},++c;break;case"\\":var f=e.charAt(++c),p="("===f||")"===f?f:"t";o[o.length]={t:p,v:f},++c;break;case"_":o[o.length]={t:"t",v:" "},c+=2;break;case"@":o[o.length]={t:"T",v:t},++c;break;case"B":case"b":if("1"===e.charAt(c+1)||"2"===e.charAt(c+1)){if(null==i&&null==(i=Fy(t,n,"2"===e.charAt(c+1))))return"";o[o.length]={t:"X",v:e.substr(c,2)},d=u,c+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":u=u.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0)return"";if(null==i&&null==(i=Fy(t,n)))return"";for(l=u;++c<e.length&&e.charAt(c).toLowerCase()===u;)l+=u;"m"===u&&"h"===d.toLowerCase()&&(u="M"),"h"===u&&(u=h),o[o.length]={t:u,v:l},d=u;break;case"A":case"a":case"\u4e0a":var m={t:u,v:u};if(null==i&&(i=Fy(t,n)),"A/P"===e.substr(c,3).toUpperCase()?(null!=i&&(m.v=i.H>=12?"P":"A"),m.t="T",h="h",c+=3):"AM/PM"===e.substr(c,5).toUpperCase()?(null!=i&&(m.v=i.H>=12?"PM":"AM"),m.t="T",c+=5,h="h"):"\u4e0a\u5348/\u4e0b\u5348"===e.substr(c,5).toUpperCase()?(null!=i&&(m.v=i.H>=12?"\u4e0b\u5348":"\u4e0a\u5348"),m.t="T",c+=5,h="h"):(m.t="t",++c),null==i&&"T"===m.t)return"";o[o.length]=m,d=u;break;case"[":for(l=u;"]"!==e.charAt(c++)&&c<e.length;)l+=e.charAt(c);if("]"!==l.slice(-1))throw'unterminated "[" block: |'+l+"|";if(l.match(av)){if(null==i&&null==(i=Fy(t,n)))return"";o[o.length]={t:"Z",v:l.toLowerCase()},d=l.charAt(1)}else l.indexOf("$")>-1&&(l=(l.match(/\$([^-\[\]]*)/)||[])[1]||"$",ov(e)||(o[o.length]={t:"t",v:l}));break;case".":if(null!=i){for(l=u;++c<e.length&&"0"===(u=e.charAt(c));)l+=u;o[o.length]={t:"s",v:l};break}case"0":case"#":for(l=u;++c<e.length&&"0#?.,E+-%".indexOf(u=e.charAt(c))>-1;)l+=u;o[o.length]={t:"n",v:l};break;case"?":for(l=u;e.charAt(++c)===u;)l+=u;o[o.length]={t:u,v:l},d=u;break;case"*":++c," "!=e.charAt(c)&&"*"!=e.charAt(c)||++c;break;case"(":case")":o[o.length]={t:1===r?"t":u,v:u},++c;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(l=u;c<e.length&&"0123456789".indexOf(e.charAt(++c))>-1;)l+=e.charAt(c);o[o.length]={t:"D",v:l};break;case" ":o[o.length]={t:u,v:u},++c;break;case"$":o[o.length]={t:"t",v:"$"},++c;break;default:if(-1===",$-+/():!^&'~{}<>=\u20acacfijklopqrtuvwxzP".indexOf(u))throw new Error("unrecognized character "+u+" in "+e);o[o.length]={t:"t",v:u},++c}var g,y=0,v=0;for(c=o.length-1,d="t";c>=0;--c)switch(o[c].t){case"h":case"H":o[c].t=h,d="h",y<1&&(y=1);break;case"s":(g=o[c].v.match(/\.0+$/))&&(v=Math.max(v,g[0].length-1)),y<3&&(y=3);case"d":case"y":case"M":case"e":d=o[c].t;break;case"m":"s"===d&&(o[c].t="M",y<2&&(y=2));break;case"X":break;case"Z":y<1&&o[c].v.match(/[Hh]/)&&(y=1),y<2&&o[c].v.match(/[Mm]/)&&(y=2),y<3&&o[c].v.match(/[Ss]/)&&(y=3)}switch(y){case 0:break;case 1:i.u>=.5&&(i.u=0,++i.S),i.S>=60&&(i.S=0,++i.M),i.M>=60&&(i.M=0,++i.H);break;case 2:i.u>=.5&&(i.u=0,++i.S),i.S>=60&&(i.S=0,++i.M)}var w,b="";for(c=0;c<o.length;++c)switch(o[c].t){case"t":case"T":case" ":case"D":break;case"X":o[c].v="",o[c].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":o[c].v=qy(o[c].t.charCodeAt(0),o[c].v,i,v),o[c].t="t";break;case"n":case"?":for(w=c+1;null!=o[w]&&("?"===(u=o[w].t)||"D"===u||(" "===u||"t"===u)&&null!=o[w+1]&&("?"===o[w+1].t||"t"===o[w+1].t&&"/"===o[w+1].v)||"("===o[c].t&&(" "===u||"n"===u||")"===u)||"t"===u&&("/"===o[w].v||" "===o[w].v&&null!=o[w+1]&&"?"==o[w+1].t));)o[c].v+=o[w].v,o[w]={v:"",t:";"},++w;b+=o[c].v,c=w-1;break;case"G":o[c].t="t",o[c].v=Wy(t,n)}var x,S,A="";if(b.length>0){40==b.charCodeAt(0)?(x=t<0&&45===b.charCodeAt(0)?-t:t,S=sv("n",b,x)):(S=sv("n",b,x=t<0&&r>1?-t:t),x<0&&o[0]&&"t"==o[0].t&&(S=S.substr(1),o[0].v="-"+o[0].v)),w=S.length-1;var E=o.length;for(c=0;c<o.length;++c)if(null!=o[c]&&"t"!=o[c].t&&o[c].v.indexOf(".")>-1){E=c;break}var N=o.length;if(E===o.length&&-1===S.indexOf("E")){for(c=o.length-1;c>=0;--c)null!=o[c]&&-1!=="n?".indexOf(o[c].t)&&(w>=o[c].v.length-1?(w-=o[c].v.length,o[c].v=S.substr(w+1,o[c].v.length)):w<0?o[c].v="":(o[c].v=S.substr(0,w+1),w=-1),o[c].t="t",N=c);w>=0&&N<o.length&&(o[N].v=S.substr(0,w+1)+o[N].v)}else if(E!==o.length&&-1===S.indexOf("E")){for(w=S.indexOf(".")-1,c=E;c>=0;--c)if(null!=o[c]&&-1!=="n?".indexOf(o[c].t)){for(s=o[c].v.indexOf(".")>-1&&c===E?o[c].v.indexOf(".")-1:o[c].v.length-1,A=o[c].v.substr(s+1);s>=0;--s)w>=0&&("0"===o[c].v.charAt(s)||"#"===o[c].v.charAt(s))&&(A=S.charAt(w--)+A);o[c].v=A,o[c].t="t",N=c}for(w>=0&&N<o.length&&(o[N].v=S.substr(0,w+1)+o[N].v),w=S.indexOf(".")+1,c=E;c<o.length;++c)if(null!=o[c]&&(-1!=="n?(".indexOf(o[c].t)||c===E)){for(s=o[c].v.indexOf(".")>-1&&c===E?o[c].v.indexOf(".")+1:0,A=o[c].v.substr(0,s);s<o[c].v.length;++s)w<S.length&&(A+=S.charAt(w++));o[c].v=A,o[c].t="t",N=c}}}for(c=0;c<o.length;++c)null!=o[c]&&"n?".indexOf(o[c].t)>-1&&(x=r>1&&t<0&&c>0&&"-"===o[c-1].v?-t:t,o[c].v=sv(o[c].t,o[c].v,x),o[c].t="t");var C="";for(c=0;c!==o.length;++c)null!=o[c]&&(C+=o[c].v);return C}(i[1],t,n,i[0])}function hv(e,t){if("number"!=typeof t){t=+t||-1;for(var n=0;n<392;++n)if(void 0!=Dy[n]){if(Dy[n]==e){t=n;break}}else t<0&&(t=n);t<0&&(t=391)}return Dy[t]=e,t}function fv(e){for(var t=0;392!=t;++t)void 0!==e[t]&&hv(e[t],t)}function pv(){var e;e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"\u4e0a\u5348/\u4e0b\u5348 "hh"\u6642"mm"\u5206"ss"\u79d2 "',Dy=e}var mv=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;var gv=function(){var e={};e.version="1.2.0";var t=function(){for(var e=0,t=new Array(256),n=0;256!=n;++n)e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=n)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1,t[n]=e;return"undefined"!==typeof Int32Array?new Int32Array(t):t}();var n=function(e){var t=0,n=0,r=0,i="undefined"!==typeof Int32Array?new Int32Array(4096):new Array(4096);for(r=0;256!=r;++r)i[r]=e[r];for(r=0;256!=r;++r)for(n=e[r],t=256+r;t<4096;t+=256)n=i[t]=n>>>8^e[255&n];var s=[];for(r=1;16!=r;++r)s[r-1]="undefined"!==typeof Int32Array?i.subarray(256*r,256*r+256):i.slice(256*r,256*r+256);return s}(t),r=n[0],i=n[1],s=n[2],a=n[3],o=n[4],l=n[5],c=n[6],u=n[7],d=n[8],h=n[9],f=n[10],p=n[11],m=n[12],g=n[13],y=n[14];return e.table=t,e.bstr=function(e,n){for(var r=-1^n,i=0,s=e.length;i<s;)r=r>>>8^t[255&(r^e.charCodeAt(i++))];return~r},e.buf=function(e,n){for(var v=-1^n,w=e.length-15,b=0;b<w;)v=y[e[b++]^255&v]^g[e[b++]^v>>8&255]^m[e[b++]^v>>16&255]^p[e[b++]^v>>>24]^f[e[b++]]^h[e[b++]]^d[e[b++]]^u[e[b++]]^c[e[b++]]^l[e[b++]]^o[e[b++]]^a[e[b++]]^s[e[b++]]^i[e[b++]]^r[e[b++]]^t[e[b++]];for(w+=15;b<w;)v=v>>>8^t[255&(v^e[b++])];return~v},e.str=function(e,n){for(var r=-1^n,i=0,s=e.length,a=0,o=0;i<s;)(a=e.charCodeAt(i++))<128?r=r>>>8^t[255&(r^a)]:a<2048?r=(r=r>>>8^t[255&(r^(192|a>>6&31))])>>>8^t[255&(r^(128|63&a))]:a>=55296&&a<57344?(a=64+(1023&a),o=1023&e.charCodeAt(i++),r=(r=(r=(r=r>>>8^t[255&(r^(240|a>>8&7))])>>>8^t[255&(r^(128|a>>2&63))])>>>8^t[255&(r^(128|o>>6&15|(3&a)<<4))])>>>8^t[255&(r^(128|63&o))]):r=(r=(r=r>>>8^t[255&(r^(224|a>>12&15))])>>>8^t[255&(r^(128|a>>6&63))])>>>8^t[255&(r^(128|63&a))];return~r},e}(),yv=function(){var e,t={};function n(e){if("/"==e.charAt(e.length-1))return-1===e.slice(0,-1).indexOf("/")?e:n(e.slice(0,-1));var t=e.lastIndexOf("/");return-1===t?e:e.slice(0,t+1)}function r(e){if("/"==e.charAt(e.length-1))return r(e.slice(0,-1));var t=e.lastIndexOf("/");return-1===t?e:e.slice(t+1)}function i(e,t){"string"===typeof t&&(t=new Date(t));var n=t.getHours();n=(n=n<<6|t.getMinutes())<<5|t.getSeconds()>>>1,e.write_shift(2,n);var r=t.getFullYear()-1980;r=(r=r<<4|t.getMonth()+1)<<5|t.getDate(),e.write_shift(2,r)}function s(e){hb(e,0);for(var t={},n=0;e.l<=e.length-4;){var r=e.read_shift(2),i=e.read_shift(2),s=e.l+i,a={};if(21589===r)1&(n=e.read_shift(1))&&(a.mtime=e.read_shift(4)),i>5&&(2&n&&(a.atime=e.read_shift(4)),4&n&&(a.ctime=e.read_shift(4))),a.mtime&&(a.mt=new Date(1e3*a.mtime));e.l=s,t[r]=a}return t}function a(){return e||(e={})}function o(e,t){if(80==e[0]&&75==e[1])return re(e,t);if(109==(32|e[0])&&105==(32|e[1]))return function(e,t){if("mime-version:"!=S(e.slice(0,13)).toLowerCase())throw new Error("Unsupported MAD header");var n=t&&t.root||"",r=(py&&Buffer.isBuffer(e)?e.toString("binary"):S(e)).split("\r\n"),i=0,s="";for(i=0;i<r.length;++i)if(s=r[i],/^Content-Location:/i.test(s)&&(s=s.slice(s.indexOf("file")),n||(n=s.slice(0,s.lastIndexOf("/")+1)),s.slice(0,n.length)!=n))for(;n.length>0&&(n=(n=n.slice(0,n.length-1)).slice(0,n.lastIndexOf("/")+1),s.slice(0,n.length)!=n););var a=(r[1]||"").match(/boundary="(.*?)"/);if(!a)throw new Error("MAD cannot find boundary");var o="--"+(a[1]||""),l=[],c=[],u={FileIndex:l,FullPaths:c};h(u);var d,f=0;for(i=0;i<r.length;++i){var p=r[i];p!==o&&p!==o+"--"||(f++&&ce(u,r.slice(d,i),n),d=i)}return u}(e,t);if(e.length<512)throw new Error("CFB file size "+e.length+" < 512");var n,r,i,s,a,o,f=512,p=[],m=e.slice(0,512);hb(m,0);var g=function(e){if(80==e[e.l]&&75==e[e.l+1])return[0,0];e.chk(v,"Header Signature: "),e.l+=16;var t=e.read_shift(2,"u");return[e.read_shift(2,"u"),t]}(m);switch(n=g[0]){case 3:f=512;break;case 4:f=4096;break;case 0:if(0==g[1])return re(e,t);default:throw new Error("Major Version: Expected 3 or 4 saw "+n)}512!==f&&hb(m=e.slice(0,f),28);var w=e.slice(0,f);!function(e,t){var n=9;switch(e.l+=2,n=e.read_shift(2)){case 9:if(3!=t)throw new Error("Sector Shift: Expected 9 saw "+n);break;case 12:if(4!=t)throw new Error("Sector Shift: Expected 12 saw "+n);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+n)}e.chk("0600","Mini Sector Shift: "),e.chk("000000000000","Reserved: ")}(m,n);var b=m.read_shift(4,"i");if(3===n&&0!==b)throw new Error("# Directory Sectors: Expected 0 saw "+b);m.l+=4,s=m.read_shift(4,"i"),m.l+=4,m.chk("00100000","Mini Stream Cutoff Size: "),a=m.read_shift(4,"i"),r=m.read_shift(4,"i"),o=m.read_shift(4,"i"),i=m.read_shift(4,"i");for(var x=-1,A=0;A<109&&!((x=m.read_shift(4,"i"))<0);++A)p[A]=x;var E=function(e,t){for(var n=Math.ceil(e.length/t)-1,r=[],i=1;i<n;++i)r[i-1]=e.slice(i*t,(i+1)*t);return r[n-1]=e.slice(n*t),r}(e,f);c(o,i,E,f,p);var N=function(e,t,n,r){var i=e.length,s=[],a=[],o=[],l=[],c=r-1,u=0,d=0,h=0,f=0;for(u=0;u<i;++u)if(o=[],(h=u+t)>=i&&(h-=i),!a[h]){l=[];var p=[];for(d=h;d>=0;){p[d]=!0,a[d]=!0,o[o.length]=d,l.push(e[d]);var m=n[Math.floor(4*d/r)];if(r<4+(f=4*d&c))throw new Error("FAT boundary crossed: "+d+" 4 "+r);if(!e[m])break;if(p[d=ib(e[m],f)])break}s[h]={nodes:o,data:Dw([l])}}return s}(E,s,p,f);N[s].name="!Directory",r>0&&a!==y&&(N[a].name="!MiniFAT"),N[p[0]].name="!FAT",N.fat_addrs=p,N.ssz=f;var C=[],_=[],T=[];!function(e,t,n,r,i,s,a,o){for(var c,h=0,f=r.length?2:0,p=t[e].data,m=0,g=0;m<p.length;m+=128){var v=p.slice(m,m+128);hb(v,64),g=v.read_shift(2),c=Lw(v,0,g-f),r.push(c);var w={name:c,type:v.read_shift(1),color:v.read_shift(1),L:v.read_shift(4,"i"),R:v.read_shift(4,"i"),C:v.read_shift(4,"i"),clsid:v.read_shift(16),state:v.read_shift(4,"i"),start:0,size:0};0!==v.read_shift(2)+v.read_shift(2)+v.read_shift(2)+v.read_shift(2)&&(w.ct=d(v,v.l-8)),0!==v.read_shift(2)+v.read_shift(2)+v.read_shift(2)+v.read_shift(2)&&(w.mt=d(v,v.l-8)),w.start=v.read_shift(4,"i"),w.size=v.read_shift(4,"i"),w.size<0&&w.start<0&&(w.size=w.type=0,w.start=y,w.name=""),5===w.type?(h=w.start,i>0&&h!==y&&(t[h].name="!StreamData")):w.size>=4096?(w.storage="fat",void 0===t[w.start]&&(t[w.start]=u(n,w.start,t.fat_addrs,t.ssz)),t[w.start].name=w.name,w.content=t[w.start].data.slice(0,w.size)):(w.storage="minifat",w.size<0?w.size=0:h!==y&&w.start!==y&&t[h]&&(w.content=l(w,t[h].data,(t[o]||{}).data))),w.content&&hb(w.content,0),s[c]=w,a.push(w)}}(s,N,E,C,r,{},_,a),function(e,t,n){for(var r=0,i=0,s=0,a=0,o=0,l=n.length,c=[],u=[];r<l;++r)c[r]=u[r]=r,t[r]=n[r];for(;o<u.length;++o)i=e[r=u[o]].L,s=e[r].R,a=e[r].C,c[r]===r&&(-1!==i&&c[i]!==i&&(c[r]=c[i]),-1!==s&&c[s]!==s&&(c[r]=c[s])),-1!==a&&(c[a]=r),-1!==i&&r!=c[r]&&(c[i]=c[r],u.lastIndexOf(i)<o&&u.push(i)),-1!==s&&r!=c[r]&&(c[s]=c[r],u.lastIndexOf(s)<o&&u.push(s));for(r=1;r<l;++r)c[r]===r&&(-1!==s&&c[s]!==s?c[r]=c[s]:-1!==i&&c[i]!==i&&(c[r]=c[i]));for(r=1;r<l;++r)if(0!==e[r].type){if((o=r)!=c[o])do{o=c[o],t[r]=t[o]+"/"+t[r]}while(0!==o&&-1!==c[o]&&o!=c[o]);c[r]=-1}for(t[0]+="/",r=1;r<l;++r)2!==e[r].type&&(t[r]+="/")}(_,T,C),C.shift();var I={FileIndex:_,FullPaths:T};return t&&t.raw&&(I.raw={header:w,sectors:E}),I}function l(e,t,n){for(var r=e.start,i=e.size,s=[],a=r;n&&i>0&&a>=0;)s.push(t.slice(a*g,a*g+g)),i-=g,a=ib(n,4*a);return 0===s.length?pb(0):xy(s).slice(0,e.size)}function c(e,t,n,r,i){var s=y;if(e===y){if(0!==t)throw new Error("DIFAT chain shorter than expected")}else if(-1!==e){var a=n[e],o=(r>>>2)-1;if(!a)return;for(var l=0;l<o&&(s=ib(a,4*l))!==y;++l)i.push(s);c(ib(a,r-4),t-1,n,r,i)}}function u(e,t,n,r,i){var s=[],a=[];i||(i=[]);var o=r-1,l=0,c=0;for(l=t;l>=0;){i[l]=!0,s[s.length]=l,a.push(e[l]);var u=n[Math.floor(4*l/r)];if(r<4+(c=4*l&o))throw new Error("FAT boundary crossed: "+l+" 4 "+r);if(!e[u])break;l=ib(e[u],c)}return{nodes:s,data:Dw([a])}}function d(e,t){return new Date(1e3*(rb(e,t+4)/1e7*Math.pow(2,32)+rb(e,t)/1e7-11644473600))}function h(e,t){var n=t||{},r=n.root||"Root Entry";if(e.FullPaths||(e.FullPaths=[]),e.FileIndex||(e.FileIndex=[]),e.FullPaths.length!==e.FileIndex.length)throw new Error("inconsistent CFB structure");0===e.FullPaths.length&&(e.FullPaths[0]=r+"/",e.FileIndex[0]={name:r,type:5}),n.CLSID&&(e.FileIndex[0].clsid=n.CLSID),function(e){var t="\x01Sh33tJ5";if(yv.find(e,"/"+t))return;var n=pb(4);n[0]=55,n[1]=n[3]=50,n[2]=54,e.FileIndex.push({name:t,type:2,content:n,size:4,L:69,R:69,C:69}),e.FullPaths.push(e.FullPaths[0]+t),f(e)}(e)}function f(e,t){h(e);for(var i=!1,s=!1,a=e.FullPaths.length-1;a>=0;--a){var o=e.FileIndex[a];switch(o.type){case 0:s?i=!0:(e.FileIndex.pop(),e.FullPaths.pop());break;case 1:case 2:case 5:s=!0,isNaN(o.R*o.L*o.C)&&(i=!0),o.R>-1&&o.L>-1&&o.R==o.L&&(i=!0);break;default:i=!0}}if(i||t){var l=new Date(1987,1,19),c=0,u=Object.create?Object.create(null):{},d=[];for(a=0;a<e.FullPaths.length;++a)u[e.FullPaths[a]]=!0,0!==e.FileIndex[a].type&&d.push([e.FullPaths[a],e.FileIndex[a]]);for(a=0;a<d.length;++a){var f=n(d[a][0]);(s=u[f])||(d.push([f,{name:r(f).replace("/",""),type:1,clsid:b,ct:l,mt:l,content:null}]),u[f]=!0)}for(d.sort(function(e,t){return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0,s=0,a=Math.min(n.length,r.length);i<a;++i){if(s=n[i].length-r[i].length)return s;if(n[i]!=r[i])return n[i]<r[i]?-1:1}return n.length-r.length}(e[0],t[0])}),e.FullPaths=[],e.FileIndex=[],a=0;a<d.length;++a)e.FullPaths[a]=d[a][0],e.FileIndex[a]=d[a][1];for(a=0;a<d.length;++a){var p=e.FileIndex[a],m=e.FullPaths[a];if(p.name=r(m).replace("/",""),p.L=p.R=p.C=-(p.color=1),p.size=p.content?p.content.length:0,p.start=0,p.clsid=p.clsid||b,0===a)p.C=d.length>1?1:-1,p.size=0,p.type=5;else if("/"==m.slice(-1)){for(c=a+1;c<d.length&&n(e.FullPaths[c])!=m;++c);for(p.C=c>=d.length?-1:c,c=a+1;c<d.length&&n(e.FullPaths[c])!=n(m);++c);p.R=c>=d.length?-1:c,p.type=1}else n(e.FullPaths[a+1]||"")==n(m)&&(p.R=a+1),p.type=2}}}function p(e,t){var n=t||{};if("mad"==n.fileType)return function(e,t){for(var n=t||{},r=n.boundary||"SheetJS",i=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+(r="------="+r).slice(2)+'"',"","",""],s=e.FullPaths[0],a=s,o=e.FileIndex[0],l=1;l<e.FullPaths.length;++l)if(a=e.FullPaths[l].slice(s.length),(o=e.FileIndex[l]).size&&o.content&&"\x01Sh33tJ5"!=a){a=a.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(e){return"_x"+e.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(e){return"_u"+e.charCodeAt(0).toString(16)+"_"});for(var c=o.content,u=py&&Buffer.isBuffer(c)?c.toString("binary"):S(c),d=0,h=Math.min(1024,u.length),f=0,p=0;p<=h;++p)(f=u.charCodeAt(p))>=32&&f<128&&++d;var m=d>=4*h/5;i.push(r),i.push("Content-Location: "+(n.root||"file:///C:/SheetJS/")+a),i.push("Content-Transfer-Encoding: "+(m?"quoted-printable":"base64")),i.push("Content-Type: "+ae(o,a)),i.push(""),i.push(m?le(u):oe(u))}return i.push(r+"--\r\n"),i.join("\r\n")}(e,n);if(f(e),"zip"===n.fileType)return function(e,t){var n=t||{},r=[],s=[],a=pb(1),o=n.compression?8:0,l=0;0;var c=0,u=0,d=0,h=0,f=e.FullPaths[0],p=f,m=e.FileIndex[0],g=[],y=0;for(c=1;c<e.FullPaths.length;++c)if(p=e.FullPaths[c].slice(f.length),(m=e.FileIndex[c]).size&&m.content&&"\x01Sh33tJ5"!=p){var v=d,w=pb(p.length);for(u=0;u<p.length;++u)w.write_shift(1,127&p.charCodeAt(u));w=w.slice(0,w.l),g[h]=gv.buf(m.content,0);var b=m.content;8==o&&(b=A(b)),(a=pb(30)).write_shift(4,67324752),a.write_shift(2,20),a.write_shift(2,l),a.write_shift(2,o),m.mt?i(a,m.mt):a.write_shift(4,0),a.write_shift(-4,8&l?0:g[h]),a.write_shift(4,8&l?0:b.length),a.write_shift(4,8&l?0:m.content.length),a.write_shift(2,w.length),a.write_shift(2,0),d+=a.length,r.push(a),d+=w.length,r.push(w),d+=b.length,r.push(b),8&l&&((a=pb(12)).write_shift(-4,g[h]),a.write_shift(4,b.length),a.write_shift(4,m.content.length),d+=a.l,r.push(a)),(a=pb(46)).write_shift(4,33639248),a.write_shift(2,0),a.write_shift(2,20),a.write_shift(2,l),a.write_shift(2,o),a.write_shift(4,0),a.write_shift(-4,g[h]),a.write_shift(4,b.length),a.write_shift(4,m.content.length),a.write_shift(2,w.length),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(4,0),a.write_shift(4,v),y+=a.l,s.push(a),y+=w.length,s.push(w),++h}return a=pb(22),a.write_shift(4,101010256),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(2,h),a.write_shift(2,h),a.write_shift(4,y),a.write_shift(4,d),a.write_shift(2,0),xy([xy(r),xy(s),a])}(e,n);var r=function(e){for(var t=0,n=0,r=0;r<e.FileIndex.length;++r){var i=e.FileIndex[r];if(i.content){var s=i.content.length;s>0&&(s<4096?t+=s+63>>6:n+=s+511>>9)}}for(var a=e.FullPaths.length+3>>2,o=t+127>>7,l=(t+7>>3)+n+a+o,c=l+127>>7,u=c<=109?0:Math.ceil((c-109)/127);l+c+u+127>>7>c;)u=++c<=109?0:Math.ceil((c-109)/127);var d=[1,u,c,o,a,n,t,0];return e.FileIndex[0].size=t<<6,d[7]=(e.FileIndex[0].start=d[0]+d[1]+d[2]+d[3]+d[4]+d[5])+(d[6]+7>>3),d}(e),s=pb(r[7]<<9),a=0,o=0;for(a=0;a<8;++a)s.write_shift(1,w[a]);for(a=0;a<8;++a)s.write_shift(2,0);for(s.write_shift(2,62),s.write_shift(2,3),s.write_shift(2,65534),s.write_shift(2,9),s.write_shift(2,6),a=0;a<3;++a)s.write_shift(2,0);for(s.write_shift(4,0),s.write_shift(4,r[2]),s.write_shift(4,r[0]+r[1]+r[2]+r[3]-1),s.write_shift(4,0),s.write_shift(4,4096),s.write_shift(4,r[3]?r[0]+r[1]+r[2]-1:y),s.write_shift(4,r[3]),s.write_shift(-4,r[1]?r[0]-1:y),s.write_shift(4,r[1]),a=0;a<109;++a)s.write_shift(-4,a<r[2]?r[1]+a:-1);if(r[1])for(o=0;o<r[1];++o){for(;a<236+127*o;++a)s.write_shift(-4,a<r[2]?r[1]+a:-1);s.write_shift(-4,o===r[1]-1?y:o+1)}var l=function(e){for(o+=e;a<o-1;++a)s.write_shift(-4,a+1);e&&(++a,s.write_shift(-4,y))};for(o=a=0,o+=r[1];a<o;++a)s.write_shift(-4,x.DIFSECT);for(o+=r[2];a<o;++a)s.write_shift(-4,x.FATSECT);l(r[3]),l(r[4]);for(var c=0,u=0,d=e.FileIndex[0];c<e.FileIndex.length;++c)(d=e.FileIndex[c]).content&&((u=d.content.length)<4096||(d.start=o,l(u+511>>9)));for(l(r[6]+7>>3);511&s.l;)s.write_shift(-4,x.ENDOFCHAIN);for(o=a=0,c=0;c<e.FileIndex.length;++c)(d=e.FileIndex[c]).content&&(!(u=d.content.length)||u>=4096||(d.start=o,l(u+63>>6)));for(;511&s.l;)s.write_shift(-4,x.ENDOFCHAIN);for(a=0;a<r[4]<<2;++a){var h=e.FullPaths[a];if(h&&0!==h.length){d=e.FileIndex[a],0===a&&(d.start=d.size?d.start-1:y);var p=0===a&&n.root||d.name;if(u=2*(p.length+1),s.write_shift(64,p,"utf16le"),s.write_shift(2,u),s.write_shift(1,d.type),s.write_shift(1,d.color),s.write_shift(-4,d.L),s.write_shift(-4,d.R),s.write_shift(-4,d.C),d.clsid)s.write_shift(16,d.clsid,"hex");else for(c=0;c<4;++c)s.write_shift(4,0);s.write_shift(4,d.state||0),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(4,d.start),s.write_shift(4,d.size),s.write_shift(4,0)}else{for(c=0;c<17;++c)s.write_shift(4,0);for(c=0;c<3;++c)s.write_shift(4,-1);for(c=0;c<12;++c)s.write_shift(4,0)}}for(a=1;a<e.FileIndex.length;++a)if((d=e.FileIndex[a]).size>=4096)if(s.l=d.start+1<<9,py&&Buffer.isBuffer(d.content))d.content.copy(s,s.l,0,d.size),s.l+=d.size+511&-512;else{for(c=0;c<d.size;++c)s.write_shift(1,d.content[c]);for(;511&c;++c)s.write_shift(1,0)}for(a=1;a<e.FileIndex.length;++a)if((d=e.FileIndex[a]).size>0&&d.size<4096)if(py&&Buffer.isBuffer(d.content))d.content.copy(s,s.l,0,d.size),s.l+=d.size+63&-64;else{for(c=0;c<d.size;++c)s.write_shift(1,d.content[c]);for(;63&c;++c)s.write_shift(1,0)}if(py)s.l=s.length;else for(;s.l<s.length;)s.write_shift(1,0);return s}t.version="1.2.1";var m,g=64,y=-2,v="d0cf11e0a1b11ae1",w=[208,207,17,224,161,177,26,225],b="00000000000000000000000000000000",x={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:y,FREESECT:-1,HEADER_SIGNATURE:v,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:b,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function S(e){for(var t=new Array(e.length),n=0;n<e.length;++n)t[n]=String.fromCharCode(e[n]);return t.join("")}function A(e){return m?m.deflateRawSync(e):Y(e)}var E=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],N=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],C=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function _(e){var t=139536&(e<<1|e<<11)|558144&(e<<5|e<<15);return 255&(t>>16|t>>8|t)}for(var T="undefined"!==typeof Uint8Array,I=T?new Uint8Array(256):[],k=0;k<256;++k)I[k]=_(k);function P(e,t){var n=I[255&e];return t<=8?n>>>8-t:(n=n<<8|I[e>>8&255],t<=16?n>>>16-t:(n=n<<8|I[e>>16&255])>>>24-t)}function R(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=6?0:e[r+1]<<8))>>>n&3}function D(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=5?0:e[r+1]<<8))>>>n&7}function O(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=3?0:e[r+1]<<8))>>>n&31}function L(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=1?0:e[r+1]<<8))>>>n&127}function M(e,t,n){var r=7&t,i=t>>>3,s=(1<<n)-1,a=e[i]>>>r;return n<8-r?a&s:(a|=e[i+1]<<8-r,n<16-r?a&s:(a|=e[i+2]<<16-r,n<24-r?a&s:(a|=e[i+3]<<24-r)&s))}function F(e,t,n){var r=7&t,i=t>>>3;return r<=5?e[i]|=(7&n)<<r:(e[i]|=n<<r&255,e[i+1]=(7&n)>>8-r),t+3}function j(e,t,n){return n=(1&n)<<(7&t),e[t>>>3]|=n,t+1}function B(e,t,n){var r=t>>>3;return n<<=7&t,e[r]|=255&n,n>>>=8,e[r+1]=n,t+8}function U(e,t,n){var r=t>>>3;return n<<=7&t,e[r]|=255&n,n>>>=8,e[r+1]=255&n,e[r+2]=n>>>8,t+16}function z(e,t){var n=e.length,r=2*n>t?2*n:t+5,i=0;if(n>=t)return e;if(py){var s=yy(r);if(e.copy)e.copy(s);else for(;i<e.length;++i)s[i]=e[i];return s}if(T){var a=new Uint8Array(r);if(a.set)a.set(e);else for(;i<n;++i)a[i]=e[i];return a}return e.length=r,e}function V(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=0;return t}function H(e,t,n){var r=1,i=0,s=0,a=0,o=0,l=e.length,c=T?new Uint16Array(32):V(32);for(s=0;s<32;++s)c[s]=0;for(s=l;s<n;++s)e[s]=0;l=e.length;var u=T?new Uint16Array(l):V(l);for(s=0;s<l;++s)c[i=e[s]]++,r<i&&(r=i),u[s]=0;for(c[0]=0,s=1;s<=r;++s)c[s+16]=o=o+c[s-1]<<1;for(s=0;s<l;++s)0!=(o=e[s])&&(u[s]=c[o+16]++);var d=0;for(s=0;s<l;++s)if(0!=(d=e[s]))for(o=P(u[s],r)>>r-d,a=(1<<r+4-d)-1;a>=0;--a)t[o|a<<d]=15&d|s<<4;return r}var W=T?new Uint16Array(512):V(512),q=T?new Uint16Array(32):V(32);if(!T){for(var G=0;G<512;++G)W[G]=0;for(G=0;G<32;++G)q[G]=0}!function(){for(var e=[],t=0;t<32;t++)e.push(5);H(e,q,32);var n=[];for(t=0;t<=143;t++)n.push(8);for(;t<=255;t++)n.push(9);for(;t<=279;t++)n.push(7);for(;t<=287;t++)n.push(8);H(n,W,288)}();var K=function(){for(var e=T?new Uint8Array(32768):[],t=0,n=0;t<C.length-1;++t)for(;n<C[t+1];++n)e[n]=t;for(;n<32768;++n)e[n]=29;var r=T?new Uint8Array(259):[];for(t=0,n=0;t<N.length-1;++t)for(;n<N[t+1];++n)r[n]=t;return function(t,n){return t.length<8?function(e,t){for(var n=0;n<e.length;){var r=Math.min(65535,e.length-n),i=n+r==e.length;for(t.write_shift(1,+i),t.write_shift(2,r),t.write_shift(2,65535&~r);r-- >0;)t[t.l++]=e[n++]}return t.l}(t,n):function(t,n){for(var i=0,s=0,a=T?new Uint16Array(32768):[];s<t.length;){var o=Math.min(65535,t.length-s);if(o<10){for(7&(i=F(n,i,+!(s+o!=t.length)))&&(i+=8-(7&i)),n.l=i/8|0,n.write_shift(2,o),n.write_shift(2,65535&~o);o-- >0;)n[n.l++]=t[s++];i=8*n.l}else{i=F(n,i,+!(s+o!=t.length)+2);for(var l=0;o-- >0;){var c=t[s],u=-1,d=0;if((u=a[l=32767&(l<<5^c)])&&((u|=-32768&s)>s&&(u-=32768),u<s))for(;t[u+d]==t[s+d]&&d<250;)++d;if(d>2){(c=r[d])<=22?i=B(n,i,I[c+1]>>1)-1:(B(n,i,3),B(n,i+=5,I[c-23]>>5),i+=3);var h=c<8?0:c-4>>2;h>0&&(U(n,i,d-N[c]),i+=h),c=e[s-u],i=B(n,i,I[c]>>3),i-=3;var f=c<4?0:c-2>>1;f>0&&(U(n,i,s-u-C[c]),i+=f);for(var p=0;p<d;++p)a[l]=32767&s,l=32767&(l<<5^t[s]),++s;o-=d-1}else c<=143?c+=48:i=j(n,i,1),i=B(n,i,I[c]),a[l]=32767&s,++s}i=B(n,i,0)-1}}return n.l=(i+7)/8|0,n.l}(t,n)}}();function Y(e){var t=pb(50+Math.floor(1.1*e.length)),n=K(e,t);return t.slice(0,n)}var X=T?new Uint16Array(32768):V(32768),Q=T?new Uint16Array(32768):V(32768),J=T?new Uint16Array(128):V(128),Z=1,$=1;function ee(e,t){var n=O(e,t)+257,r=O(e,t+=5)+1,i=function(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=4?0:e[r+1]<<8))>>>n&15}(e,t+=5)+4;t+=4;for(var s=0,a=T?new Uint8Array(19):V(19),o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l=1,c=T?new Uint8Array(8):V(8),u=T?new Uint8Array(8):V(8),d=a.length,h=0;h<i;++h)a[E[h]]=s=D(e,t),l<s&&(l=s),c[s]++,t+=3;var f=0;for(c[0]=0,h=1;h<=l;++h)u[h]=f=f+c[h-1]<<1;for(h=0;h<d;++h)0!=(f=a[h])&&(o[h]=u[f]++);var p=0;for(h=0;h<d;++h)if(0!=(p=a[h])){f=I[o[h]]>>8-p;for(var m=(1<<7-p)-1;m>=0;--m)J[f|m<<p]=7&p|h<<3}var g=[];for(l=1;g.length<n+r;)switch(t+=7&(f=J[L(e,t)]),f>>>=3){case 16:for(s=3+R(e,t),t+=2,f=g[g.length-1];s-- >0;)g.push(f);break;case 17:for(s=3+D(e,t),t+=3;s-- >0;)g.push(0);break;case 18:for(s=11+L(e,t),t+=7;s-- >0;)g.push(0);break;default:g.push(f),l<f&&(l=f)}var y=g.slice(0,n),v=g.slice(n);for(h=n;h<286;++h)y[h]=0;for(h=r;h<30;++h)v[h]=0;return Z=H(y,X,286),$=H(v,Q,30),t}function te(e,t){var n=function(e,t){if(3==e[0]&&!(3&e[1]))return[gy(t),2];for(var n=0,r=0,i=yy(t||1<<18),s=0,a=i.length>>>0,o=0,l=0;0==(1&r);)if(r=D(e,n),n+=3,r>>>1!=0)for(r>>1==1?(o=9,l=5):(n=ee(e,n),o=Z,l=$);;){!t&&a<s+32767&&(a=(i=z(i,s+32767)).length);var c=M(e,n,o),u=r>>>1==1?W[c]:X[c];if(n+=15&u,0===((u>>>=4)>>>8&255))i[s++]=u;else{if(256==u)break;var d=(u-=257)<8?0:u-4>>2;d>5&&(d=0);var h=s+N[u];d>0&&(h+=M(e,n,d),n+=d),c=M(e,n,l),n+=15&(u=r>>>1==1?q[c]:Q[c]);var f=(u>>>=4)<4?0:u-2>>1,p=C[u];for(f>0&&(p+=M(e,n,f),n+=f),!t&&a<h&&(a=(i=z(i,h+100)).length);s<h;)i[s]=i[s-p],++s}}else{7&n&&(n+=8-(7&n));var m=e[n>>>3]|e[(n>>>3)+1]<<8;if(n+=32,m>0)for(!t&&a<s+m&&(a=(i=z(i,s+m)).length);m-- >0;)i[s++]=e[n>>>3],n+=8}return t?[i,n+7>>>3]:[i.slice(0,s),n+7>>>3]}(e.slice(e.l||0),t);return e.l+=n[1],n[0]}function ne(e,t){if(!e)throw new Error(t);"undefined"!==typeof console&&console.error(t)}function re(e,t){var n=e;hb(n,0);var r={FileIndex:[],FullPaths:[]};h(r,{root:t.root});for(var i=n.length-4;(80!=n[i]||75!=n[i+1]||5!=n[i+2]||6!=n[i+3])&&i>=0;)--i;n.l=i+4,n.l+=4;var a=n.read_shift(2);n.l+=6;var o=n.read_shift(4);for(n.l=o,i=0;i<a;++i){n.l+=20;var l=n.read_shift(4),c=n.read_shift(4),u=n.read_shift(2),d=n.read_shift(2),f=n.read_shift(2);n.l+=8;var p=n.read_shift(4),m=s(n.slice(n.l+u,n.l+u+d));n.l+=u+d+f;var g=n.l;n.l=p+4,ie(n,l,c,r,m),n.l=g}return r}function ie(e,t,n,r,i){e.l+=2;var a=e.read_shift(2),o=e.read_shift(2),l=function(e){var t=65535&e.read_shift(2),n=65535&e.read_shift(2),r=new Date,i=31&n,s=15&(n>>>=5);n>>>=4,r.setMilliseconds(0),r.setFullYear(n+1980),r.setMonth(s-1),r.setDate(i);var a=31&t,o=63&(t>>>=5);return t>>>=6,r.setHours(t),r.setMinutes(o),r.setSeconds(a<<1),r}(e);if(8257&a)throw new Error("Unsupported ZIP encryption");e.read_shift(4);for(var c=e.read_shift(4),u=e.read_shift(4),d=e.read_shift(2),h=e.read_shift(2),f="",p=0;p<d;++p)f+=String.fromCharCode(e[e.l++]);if(h){var g=s(e.slice(e.l,e.l+h));(g[21589]||{}).mt&&(l=g[21589].mt),((i||{})[21589]||{}).mt&&(l=i[21589].mt)}e.l+=h;var y=e.slice(e.l,e.l+c);switch(o){case 8:y=function(e,t){if(!m)return te(e,t);var n=new(0,m.InflateRaw),r=n._processChunk(e.slice(e.l),n._finishFlushFlag);return e.l+=n.bytesRead,r}(e,u);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+o)}var v=!1;8&a&&(134695760==e.read_shift(4)&&(e.read_shift(4),v=!0),c=e.read_shift(4),u=e.read_shift(4)),c!=t&&ne(v,"Bad compressed size: "+t+" != "+c),u!=n&&ne(v,"Bad uncompressed size: "+n+" != "+u),ue(r,f,y,{unsafe:!0,mt:l})}var se={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function ae(e,t){if(e.ctype)return e.ctype;var n=e.name||"",r=n.match(/\.([^\.]+)$/);return r&&se[r[1]]||t&&(r=(n=t).match(/[\.\\]([^\.\\])+$/))&&se[r[1]]?se[r[1]]:"application/octet-stream"}function oe(e){for(var t=hy(e),n=[],r=0;r<t.length;r+=76)n.push(t.slice(r,r+76));return n.join("\r\n")+"\r\n"}function le(e){var t=e.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(e){var t=e.charCodeAt(0).toString(16).toUpperCase();return"="+(1==t.length?"0"+t:t)});"\n"==(t=t.replace(/ $/gm,"=20").replace(/\t$/gm,"=09")).charAt(0)&&(t="=0D"+t.slice(1));for(var n=[],r=(t=t.replace(/\r(?!\n)/gm,"=0D").replace(/\n\n/gm,"\n=0A").replace(/([^\r\n])\n/gm,"$1=0A")).split("\r\n"),i=0;i<r.length;++i){var s=r[i];if(0!=s.length)for(var a=0;a<s.length;){var o=76,l=s.slice(a,a+o);"="==l.charAt(o-1)?o--:"="==l.charAt(o-2)?o-=2:"="==l.charAt(o-3)&&(o-=3),l=s.slice(a,a+o),(a+=o)<s.length&&(l+="="),n.push(l)}else n.push("")}return n.join("\r\n")}function ce(e,t,n){for(var r,i="",s="",a="",o=0;o<10;++o){var l=t[o];if(!l||l.match(/^\s*$/))break;var c=l.match(/^(.*?):\s*([^\s].*)$/);if(c)switch(c[1].toLowerCase()){case"content-location":i=c[2].trim();break;case"content-type":a=c[2].trim();break;case"content-transfer-encoding":s=c[2].trim()}}switch(++o,s.toLowerCase()){case"base64":r=vy(fy(t.slice(o).join("")));break;case"quoted-printable":r=function(e){for(var t=[],n=0;n<e.length;++n){for(var r=e[n];n<=e.length&&"="==r.charAt(r.length-1);)r=r.slice(0,r.length-1)+e[++n];t.push(r)}for(var i=0;i<t.length;++i)t[i]=t[i].replace(/[=][0-9A-Fa-f]{2}/g,function(e){return String.fromCharCode(parseInt(e.slice(1),16))});return vy(t.join("\r\n"))}(t.slice(o));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+s)}var u=ue(e,i.slice(n.length),r,{unsafe:!0});a&&(u.ctype=a)}function ue(e,t,n,i){var s=i&&i.unsafe;s||h(e);var a=!s&&yv.find(e,t);if(!a){var o=e.FullPaths[0];t.slice(0,o.length)==o?o=t:("/"!=o.slice(-1)&&(o+="/"),o=(o+t).replace("//","/")),a={name:r(t),type:2},e.FileIndex.push(a),e.FullPaths.push(o),s||yv.utils.cfb_gc(e)}return a.content=n,a.size=n?n.length:0,i&&(i.CLSID&&(a.clsid=i.CLSID),i.mt&&(a.mt=i.mt),i.ct&&(a.ct=i.ct)),a}return t.find=function(e,t){var n=e.FullPaths.map(function(e){return e.toUpperCase()}),r=n.map(function(e){var t=e.split("/");return t[t.length-("/"==e.slice(-1)?2:1)]}),i=!1;47===t.charCodeAt(0)?(i=!0,t=n[0].slice(0,-1)+t):i=-1!==t.indexOf("/");var s=t.toUpperCase(),a=!0===i?n.indexOf(s):r.indexOf(s);if(-1!==a)return e.FileIndex[a];var o=!s.match(Ay);for(s=s.replace(Sy,""),o&&(s=s.replace(Ay,"!")),a=0;a<n.length;++a){if((o?n[a].replace(Ay,"!"):n[a]).replace(Sy,"")==s)return e.FileIndex[a];if((o?r[a].replace(Ay,"!"):r[a]).replace(Sy,"")==s)return e.FileIndex[a]}return null},t.read=function(t,n){var r=n&&n.type;switch(r||py&&Buffer.isBuffer(t)&&(r="buffer"),r||"base64"){case"file":return function(t,n){return a(),o(e.readFileSync(t),n)}(t,n);case"base64":return o(vy(fy(t)),n);case"binary":return o(vy(t),n)}return o(t,n)},t.parse=o,t.write=function(t,n){var r=p(t,n);switch(n&&n.type||"buffer"){case"file":return a(),e.writeFileSync(n.filename,r),r;case"binary":return"string"==typeof r?r:S(r);case"base64":return hy("string"==typeof r?r:S(r));case"buffer":if(py)return Buffer.isBuffer(r)?r:my(r);case"array":return"string"==typeof r?vy(r):r}return r},t.writeFile=function(t,n,r){a();var i=p(t,r);e.writeFileSync(n,i)},t.utils={cfb_new:function(e){var t={};return h(t,e),t},cfb_add:ue,cfb_del:function(e,t){h(e);var n=yv.find(e,t);if(n)for(var r=0;r<e.FileIndex.length;++r)if(e.FileIndex[r]==n)return e.FileIndex.splice(r,1),e.FullPaths.splice(r,1),!0;return!1},cfb_mov:function(e,t,n){h(e);var i=yv.find(e,t);if(i)for(var s=0;s<e.FileIndex.length;++s)if(e.FileIndex[s]==i)return e.FileIndex[s].name=r(n),e.FullPaths[s]=n,!0;return!1},cfb_gc:function(e){f(e,!0)},ReadShift:ab,CheckField:db,prep_blob:hb,bconcat:xy,use_zlib:function(e){try{var t=new(0,e.InflateRaw);if(t._processChunk(new Uint8Array([3,0]),t._finishFlushFlag),!t.bytesRead)throw new Error("zlib does not expose bytesRead");m=e}catch(b_){console.error("cannot use native zlib: "+(b_.message||b_))}},_deflateRaw:Y,_inflateRaw:te,consts:x},t}();let vv;function wv(e){return"string"===typeof e?wy(e):Array.isArray(e)?function(e){if("undefined"===typeof Uint8Array)throw new Error("Unsupported");return new Uint8Array(e)}(e):e}function bv(e,t,n){if("undefined"!==typeof vv&&vv.writeFileSync)return n?vv.writeFileSync(e,t,n):vv.writeFileSync(e,t);if("undefined"!==typeof Deno){if(n&&"string"==typeof t)switch(n){case"utf8":t=new TextEncoder(n).encode(t);break;case"binary":t=wy(t);break;default:throw new Error("Unsupported encoding "+n)}return Deno.writeFileSync(e,t)}var r="utf8"==n?iw(t):t;if("undefined"!==typeof IE_SaveFile)return IE_SaveFile(r,e);if("undefined"!==typeof Blob){var i=new Blob([wv(r)],{type:"application/octet-stream"});if("undefined"!==typeof navigator&&navigator.msSaveBlob)return navigator.msSaveBlob(i,e);if("undefined"!==typeof saveAs)return saveAs(i,e);if("undefined"!==typeof URL&&"undefined"!==typeof document&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(i);if("object"===typeof chrome&&"function"==typeof(chrome.downloads||{}).download)return URL.revokeObjectURL&&"undefined"!==typeof setTimeout&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:e,saveAs:!0});var a=document.createElement("a");if(null!=a.download)return a.download=e,a.href=s,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL&&"undefined"!==typeof setTimeout&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if("undefined"!==typeof $&&"undefined"!==typeof File&&"undefined"!==typeof Folder)try{var o=File(e);return o.open("w"),o.encoding="binary",Array.isArray(t)&&(t=by(t)),o.write(t),o.close(),t}catch(b_){if(!b_.message||!b_.message.match(/onstruct/))throw b_}throw new Error("cannot save file "+e)}function xv(e){for(var t=Object.keys(e),n=[],r=0;r<t.length;++r)Object.prototype.hasOwnProperty.call(e,t[r])&&n.push(t[r]);return n}function Sv(e,t){for(var n=[],r=xv(e),i=0;i!==r.length;++i)null==n[e[r[i]][t]]&&(n[e[r[i]][t]]=r[i]);return n}function Av(e){for(var t=[],n=xv(e),r=0;r!==n.length;++r)t[e[n[r]]]=n[r];return t}function Ev(e){for(var t=[],n=xv(e),r=0;r!==n.length;++r)t[e[n[r]]]=parseInt(n[r],10);return t}var Nv=new Date(1899,11,30,0,0,0);function Cv(e,t){var n=e.getTime();return t&&(n-=1263168e5),(n-(Nv.getTime()+6e4*(e.getTimezoneOffset()-Nv.getTimezoneOffset())))/864e5}var _v=new Date,Tv=Nv.getTime()+6e4*(_v.getTimezoneOffset()-Nv.getTimezoneOffset()),Iv=_v.getTimezoneOffset();function kv(e){var t=new Date;return t.setTime(24*e*60*60*1e3+Tv),t.getTimezoneOffset()!==Iv&&t.setTime(t.getTime()+6e4*(t.getTimezoneOffset()-Iv)),t}var Pv=new Date("2017-02-19T19:06:09.000Z"),Rv=isNaN(Pv.getFullYear())?new Date("2/19/17"):Pv,Dv=2017==Rv.getFullYear();function Ov(e,t){var n=new Date(e);if(Dv)return t>0?n.setTime(n.getTime()+60*n.getTimezoneOffset()*1e3):t<0&&n.setTime(n.getTime()-60*n.getTimezoneOffset()*1e3),n;if(e instanceof Date)return e;if(1917==Rv.getFullYear()&&!isNaN(n.getFullYear())){var r=n.getFullYear();return e.indexOf(""+r)>-1||n.setFullYear(n.getFullYear()+100),n}var i=e.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return e.indexOf("Z")>-1&&(s=new Date(s.getTime()-60*s.getTimezoneOffset()*1e3)),s}function Lv(e,t){if(py&&Buffer.isBuffer(e)){if(t){if(255==e[0]&&254==e[1])return iw(e.slice(2).toString("utf16le"));if(254==e[1]&&255==e[2])return iw(oy(e.slice(2).toString("binary")))}return e.toString("binary")}if("undefined"!==typeof TextDecoder)try{if(t){if(255==e[0]&&254==e[1])return iw(new TextDecoder("utf-16le").decode(e.slice(2)));if(254==e[0]&&255==e[1])return iw(new TextDecoder("utf-16be").decode(e.slice(2)))}var n={"\u20ac":"\x80","\u201a":"\x82","\u0192":"\x83","\u201e":"\x84","\u2026":"\x85","\u2020":"\x86","\u2021":"\x87","\u02c6":"\x88","\u2030":"\x89","\u0160":"\x8a","\u2039":"\x8b","\u0152":"\x8c","\u017d":"\x8e","\u2018":"\x91","\u2019":"\x92","\u201c":"\x93","\u201d":"\x94","\u2022":"\x95","\u2013":"\x96","\u2014":"\x97","\u02dc":"\x98","\u2122":"\x99","\u0161":"\x9a","\u203a":"\x9b","\u0153":"\x9c","\u017e":"\x9e","\u0178":"\x9f"};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[\u20ac\u201a\u0192\u201e\u2026\u2020\u2021\u02c6\u2030\u0160\u2039\u0152\u017d\u2018\u2019\u201c\u201d\u2022\u2013\u2014\u02dc\u2122\u0161\u203a\u0153\u017e\u0178]/g,function(e){return n[e]||e})}catch(b_){}for(var r=[],i=0;i!=e.length;++i)r.push(String.fromCharCode(e[i]));return r.join("")}function Mv(e){if("undefined"!=typeof JSON&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if("object"!=typeof e||null==e)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=Mv(e[n]));return t}function Fv(e,t){for(var n="";n.length<t;)n+=e;return n}function jv(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var n=1,r=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return n*=100,""});return isNaN(t=Number(r))?(r=r.replace(/[(](.*)[)]/,function(e,t){return n=-n,t}),isNaN(t=Number(r))?t:t/n):t/n}var Bv=["january","february","march","april","may","june","july","august","september","october","november","december"];function Uv(e){var t=new Date(e),n=new Date(NaN),r=t.getYear(),i=t.getMonth(),s=t.getDate();if(isNaN(s))return n;var a=e.toLowerCase();if(a.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if((a=a.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,"")).length>3&&-1==Bv.indexOf(a))return n}else if(a.match(/[a-z]/))return n;return r<0||r>8099?n:(i>0||s>1)&&101!=r?t:e.match(/[^-0-9:,\/\\]/)?n:t}function zv(e,t,n){if(e.FullPaths){var r;if("string"==typeof n)return r=py?my(n):function(e){for(var t=[],n=0,r=e.length+250,i=gy(e.length+255),s=0;s<e.length;++s){var a=e.charCodeAt(s);if(a<128)i[n++]=a;else if(a<2048)i[n++]=192|a>>6&31,i[n++]=128|63&a;else if(a>=55296&&a<57344){a=64+(1023&a);var o=1023&e.charCodeAt(++s);i[n++]=240|a>>8&7,i[n++]=128|a>>2&63,i[n++]=128|o>>6&15|(3&a)<<4,i[n++]=128|63&o}else i[n++]=224|a>>12&15,i[n++]=128|a>>6&63,i[n++]=128|63&a;n>r&&(t.push(i.slice(0,n)),n=0,i=gy(65535),r=65530)}return t.push(i.slice(0,n)),xy(t)}(n),yv.utils.cfb_add(e,t,r);yv.utils.cfb_add(e,t,n)}else e.file(t,n)}function Vv(){return yv.utils.cfb_new()}var Hv='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n';var Wv={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},qv=Av(Wv),Gv=/[&<>'"]/g,Kv=/[\u0000-\u0008\u000b-\u001f]/g;function Yv(e){return(e+"").replace(Gv,function(e){return qv[e]}).replace(Kv,function(e){return"_x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+"_"})}function Xv(e){return Yv(e).replace(/ /g,"_x0020_")}var Qv=/[\u0000-\u001f]/g;function Jv(e){return(e+"").replace(Gv,function(e){return qv[e]}).replace(/\n/g,"<br/>").replace(Qv,function(e){return"&#x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+";"})}function Zv(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function $v(e){for(var t="",n=0,r=0,i=0,s=0,a=0,o=0;n<e.length;)(r=e.charCodeAt(n++))<128?t+=String.fromCharCode(r):(i=e.charCodeAt(n++),r>191&&r<224?(a=(31&r)<<6,a|=63&i,t+=String.fromCharCode(a)):(s=e.charCodeAt(n++),r<240?t+=String.fromCharCode((15&r)<<12|(63&i)<<6|63&s):(o=((7&r)<<18|(63&i)<<12|(63&s)<<6|63&(a=e.charCodeAt(n++)))-65536,t+=String.fromCharCode(55296+(o>>>10&1023)),t+=String.fromCharCode(56320+(1023&o)))));return t}function ew(e){var t,n,r,i=gy(2*e.length),s=1,a=0,o=0;for(n=0;n<e.length;n+=s)s=1,(r=e.charCodeAt(n))<128?t=r:r<224?(t=64*(31&r)+(63&e.charCodeAt(n+1)),s=2):r<240?(t=4096*(15&r)+64*(63&e.charCodeAt(n+1))+(63&e.charCodeAt(n+2)),s=3):(s=4,t=262144*(7&r)+4096*(63&e.charCodeAt(n+1))+64*(63&e.charCodeAt(n+2))+(63&e.charCodeAt(n+3)),o=55296+((t-=65536)>>>10&1023),t=56320+(1023&t)),0!==o&&(i[a++]=255&o,i[a++]=o>>>8,o=0),i[a++]=t%256,i[a++]=t>>>8;return i.slice(0,a).toString("ucs2")}function tw(e){return my(e,"binary").toString("utf8")}var nw="foo bar baz\xe2\x98\x83\xf0\x9f\x8d\xa3",rw=py&&(tw(nw)==$v(nw)&&tw||ew(nw)==$v(nw)&&ew)||$v,iw=py?function(e){return my(e,"utf8").toString("binary")}:function(e){for(var t=[],n=0,r=0,i=0;n<e.length;)switch(r=e.charCodeAt(n++),!0){case r<128:t.push(String.fromCharCode(r));break;case r<2048:t.push(String.fromCharCode(192+(r>>6))),t.push(String.fromCharCode(128+(63&r)));break;case r>=55296&&r<57344:r-=55296,i=e.charCodeAt(n++)-56320+(r<<10),t.push(String.fromCharCode(240+(i>>18&7))),t.push(String.fromCharCode(144+(i>>12&63))),t.push(String.fromCharCode(128+(i>>6&63))),t.push(String.fromCharCode(128+(63&i)));break;default:t.push(String.fromCharCode(224+(r>>12))),t.push(String.fromCharCode(128+(r>>6&63))),t.push(String.fromCharCode(128+(63&r)))}return t.join("")},sw=function(){var e=[["nbsp"," "],["middot","\xb7"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(t){for(var n=t.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,"\n").replace(/<[^>]*>/g,""),r=0;r<e.length;++r)n=n.replace(e[r][0],e[r][1]);return n}}();var aw=/(^\s|\s$|\n)/;function ow(e,t){return"<"+e+(t.match(aw)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function lw(e){return xv(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function cw(e,t,n){return"<"+e+(null!=n?lw(n):"")+(null!=t?(t.match(aw)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function uw(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(b_){if(t)throw b_}return""}var dw="http://schemas.openxmlformats.org/package/2006/metadata/core-properties",hw="http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",fw="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",pw="http://schemas.openxmlformats.org/package/2006/content-types",mw="http://schemas.openxmlformats.org/package/2006/relationships",gw="http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",yw="http://purl.org/dc/elements/1.1/",vw="http://purl.org/dc/terms/",ww="http://purl.org/dc/dcmitype/",bw="http://schemas.openxmlformats.org/officeDocument/2006/relationships",xw="http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",Sw="http://www.w3.org/2001/XMLSchema-instance",Aw="http://www.w3.org/2001/XMLSchema",Ew=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Nw="urn:schemas-microsoft-com:office:office",Cw="urn:schemas-microsoft-com:office:excel",_w="urn:schemas-microsoft-com:office:spreadsheet",Tw="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",Iw="http://macVmlSchemaUri",kw="urn:schemas-microsoft-com:vml",Pw="http://www.w3.org/TR/REC-html40";var Rw=function(e){for(var t=[],n=0;n<e[0].length;++n)if(e[0][n])for(var r=0,i=e[0][n].length;r<i;r+=10240)t.push.apply(t,e[0][n].slice(r,r+10240));return t},Dw=py?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(e){return Buffer.isBuffer(e)?e:my(e)})):Rw(e)}:Rw,Ow=function(e,t,n){for(var r=[],i=t;i<n;i+=2)r.push(String.fromCharCode(tb(e,i)));return r.join("").replace(Sy,"")},Lw=py?function(e,t,n){return Buffer.isBuffer(e)?e.toString("utf16le",t,n).replace(Sy,""):Ow(e,t,n)}:Ow,Mw=function(e,t,n){for(var r=[],i=t;i<t+n;++i)r.push(("0"+e[i].toString(16)).slice(-2));return r.join("")},Fw=py?function(e,t,n){return Buffer.isBuffer(e)?e.toString("hex",t,t+n):Mw(e,t,n)}:Mw,jw=function(e,t,n){for(var r=[],i=t;i<n;i++)r.push(String.fromCharCode(eb(e,i)));return r.join("")},Bw=py?function(e,t,n){return Buffer.isBuffer(e)?e.toString("utf8",t,n):jw(e,t,n)}:jw,Uw=function(e,t){var n=rb(e,t);return n>0?Bw(e,t+4,t+4+n-1):""},zw=Uw,Vw=function(e,t){var n=rb(e,t);return n>0?Bw(e,t+4,t+4+n-1):""},Hw=Vw,Ww=function(e,t){var n=2*rb(e,t);return n>0?Bw(e,t+4,t+4+n-1):""},qw=Ww,Gw=function(e,t){var n=rb(e,t);return n>0?Lw(e,t+4,t+4+n):""},Kw=Gw,Yw=function(e,t){var n=rb(e,t);return n>0?Bw(e,t+4,t+4+n):""},Xw=Yw,Qw=function(e,t){return function(e,t){for(var n=1-2*(e[t+7]>>>7),r=((127&e[t+7])<<4)+(e[t+6]>>>4&15),i=15&e[t+6],s=5;s>=0;--s)i=256*i+e[t+s];return 2047==r?0==i?n*(1/0):NaN:(0==r?r=-1022:(r-=1023,i+=Math.pow(2,52)),n*Math.pow(2,r-52)*i)}(e,t)},Jw=Qw,Zw=function(e){return Array.isArray(e)||"undefined"!==typeof Uint8Array&&e instanceof Uint8Array};function $w(){Lw=function(e,t,n){return ly.utils.decode(1200,e.slice(t,n)).replace(Sy,"")},Bw=function(e,t,n){return ly.utils.decode(65001,e.slice(t,n))},zw=function(e,t){var n=rb(e,t);return n>0?ly.utils.decode(ty,e.slice(t+4,t+4+n-1)):""},Hw=function(e,t){var n=rb(e,t);return n>0?ly.utils.decode(ey,e.slice(t+4,t+4+n-1)):""},qw=function(e,t){var n=2*rb(e,t);return n>0?ly.utils.decode(1200,e.slice(t+4,t+4+n-1)):""},Kw=function(e,t){var n=rb(e,t);return n>0?ly.utils.decode(1200,e.slice(t+4,t+4+n)):""},Xw=function(e,t){var n=rb(e,t);return n>0?ly.utils.decode(65001,e.slice(t+4,t+4+n)):""}}py&&(zw=function(e,t){if(!Buffer.isBuffer(e))return Uw(e,t);var n=e.readUInt32LE(t);return n>0?e.toString("utf8",t+4,t+4+n-1):""},Hw=function(e,t){if(!Buffer.isBuffer(e))return Vw(e,t);var n=e.readUInt32LE(t);return n>0?e.toString("utf8",t+4,t+4+n-1):""},qw=function(e,t){if(!Buffer.isBuffer(e))return Ww(e,t);var n=2*e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+n-1)},Kw=function(e,t){if(!Buffer.isBuffer(e))return Gw(e,t);var n=e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+n)},Xw=function(e,t){if(!Buffer.isBuffer(e))return Yw(e,t);var n=e.readUInt32LE(t);return e.toString("utf8",t+4,t+4+n)},Jw=function(e,t){return Buffer.isBuffer(e)?e.readDoubleLE(t):Qw(e,t)},Zw=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||"undefined"!==typeof Uint8Array&&e instanceof Uint8Array}),"undefined"!==typeof ly&&$w();var eb=function(e,t){return e[t]},tb=function(e,t){return 256*e[t+1]+e[t]},nb=function(e,t){var n=256*e[t+1]+e[t];return n<32768?n:-1*(65535-n+1)},rb=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},ib=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},sb=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function ab(e,t){var n,r,i,s,a,o,l="",c=[];switch(t){case"dbcs":if(o=this.l,py&&Buffer.isBuffer(this))l=this.slice(this.l,this.l+2*e).toString("utf16le");else for(a=0;a<e;++a)l+=String.fromCharCode(tb(this,o)),o+=2;e*=2;break;case"utf8":l=Bw(this,this.l,this.l+e);break;case"utf16le":e*=2,l=Lw(this,this.l,this.l+e);break;case"wstr":if("undefined"===typeof ly)return ab.call(this,e,"dbcs");l=ly.utils.decode(ey,this.slice(this.l,this.l+2*e)),e*=2;break;case"lpstr-ansi":l=zw(this,this.l),e=4+rb(this,this.l);break;case"lpstr-cp":l=Hw(this,this.l),e=4+rb(this,this.l);break;case"lpwstr":l=qw(this,this.l),e=4+2*rb(this,this.l);break;case"lpp4":e=4+rb(this,this.l),l=Kw(this,this.l),2&e&&(e+=2);break;case"8lpp4":e=4+rb(this,this.l),l=Xw(this,this.l),3&e&&(e+=4-(3&e));break;case"cstr":for(e=0,l="";0!==(i=eb(this,this.l+e++));)c.push(cy(i));l=c.join("");break;case"_wstr":for(e=0,l="";0!==(i=tb(this,this.l+e));)c.push(cy(i)),e+=2;e+=2,l=c.join("");break;case"dbcs-cont":for(l="",o=this.l,a=0;a<e;++a){if(this.lens&&-1!==this.lens.indexOf(o))return i=eb(this,o),this.l=o+1,s=ab.call(this,e-a,i?"dbcs-cont":"sbcs-cont"),c.join("")+s;c.push(cy(tb(this,o))),o+=2}l=c.join(""),e*=2;break;case"cpstr":if("undefined"!==typeof ly){l=ly.utils.decode(ey,this.slice(this.l,this.l+e));break}case"sbcs-cont":for(l="",o=this.l,a=0;a!=e;++a){if(this.lens&&-1!==this.lens.indexOf(o))return i=eb(this,o),this.l=o+1,s=ab.call(this,e-a,i?"dbcs-cont":"sbcs-cont"),c.join("")+s;c.push(cy(eb(this,o))),o+=1}l=c.join("");break;default:switch(e){case 1:return n=eb(this,this.l),this.l++,n;case 2:return n=("i"===t?nb:tb)(this,this.l),this.l+=2,n;case 4:case-4:return"i"===t||0===(128&this[this.l+3])?(n=(e>0?ib:sb)(this,this.l),this.l+=4,n):(r=rb(this,this.l),this.l+=4,r);case 8:case-8:if("f"===t)return r=8==e?Jw(this,this.l):Jw([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,r;e=8;case 16:l=Fw(this,this.l,e)}}return this.l+=e,l}var ob=function(e,t,n){e[n]=255&t,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24&255},lb=function(e,t,n){e[n]=255&t,e[n+1]=t>>8&255,e[n+2]=t>>16&255,e[n+3]=t>>24&255},cb=function(e,t,n){e[n]=255&t,e[n+1]=t>>>8&255};function ub(e,t,n){var r=0,i=0;if("dbcs"===n){for(i=0;i!=t.length;++i)cb(this,t.charCodeAt(i),this.l+2*i);r=2*t.length}else if("sbcs"===n){if("undefined"!==typeof ly&&874==ty)for(i=0;i!=t.length;++i){var s=ly.utils.encode(ty,t.charAt(i));this[this.l+i]=s[0]}else for(t=t.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=t.length;++i)this[this.l+i]=255&t.charCodeAt(i);r=t.length}else{if("hex"===n){for(;i<e;++i)this[this.l++]=parseInt(t.slice(2*i,2*i+2),16)||0;return this}if("utf16le"===n){var a=Math.min(this.l+e,this.length);for(i=0;i<Math.min(t.length,e);++i){var o=t.charCodeAt(i);this[this.l++]=255&o,this[this.l++]=o>>8}for(;this.l<a;)this[this.l++]=0;return this}switch(e){case 1:r=1,this[this.l]=255&t;break;case 2:r=2,this[this.l]=255&t,t>>>=8,this[this.l+1]=255&t;break;case 3:r=3,this[this.l]=255&t,t>>>=8,this[this.l+1]=255&t,t>>>=8,this[this.l+2]=255&t;break;case 4:r=4,ob(this,t,this.l);break;case 8:if(r=8,"f"===n){!function(e,t,n){var r=(t<0||1/t==-1/0?1:0)<<7,i=0,s=0,a=r?-t:t;isFinite(a)?0==a?i=s=0:(i=Math.floor(Math.log(a)/Math.LN2),s=a*Math.pow(2,52-i),i<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?i=-1022:(s-=Math.pow(2,52),i+=1023)):(i=2047,s=isNaN(t)?26985:0);for(var o=0;o<=5;++o,s/=256)e[n+o]=255&s;e[n+6]=(15&i)<<4|15&s,e[n+7]=i>>4|r}(this,t,this.l);break}case 16:break;case-4:r=4,lb(this,t,this.l)}}return this.l+=r,this}function db(e,t){var n=Fw(this,this.l,e.length>>1);if(n!==e)throw new Error(t+"Expected "+e+" saw "+n);this.l+=e.length>>1}function hb(e,t){e.l=t,e.read_shift=ab,e.chk=db,e.write_shift=ub}function fb(e,t){e.l+=t}function pb(e){var t=gy(e);return hb(t,0),t}function mb(){var e=[],t=py?256:2048,n=function(e){var t=pb(e);return hb(t,0),t},r=n(t),i=function(){r&&(r.length>r.l&&((r=r.slice(0,r.l)).l=r.length),r.length>0&&e.push(r),r=null)},s=function(e){return r&&e<r.length-r.l?r:(i(),r=n(Math.max(e+1,t)))};return{next:s,push:function(e){i(),null==(r=e).l&&(r.l=r.length),s(t)},end:function(){return i(),xy(e)},_bufs:e}}function gb(e,t,n,r){var i,s=+t;if(!isNaN(s)){r||(r=PE[s].p||(n||[]).length||0),i=1+(s>=128?1:0)+1,r>=128&&++i,r>=16384&&++i,r>=2097152&&++i;var a=e.next(i);s<=127?a.write_shift(1,s):(a.write_shift(1,128+(127&s)),a.write_shift(1,s>>7));for(var o=0;4!=o;++o){if(!(r>=128)){a.write_shift(1,r);break}a.write_shift(1,128+(127&r)),r>>=7}r>0&&Zw(n)&&e.push(n)}}function yb(e,t,n){var r=Mv(e);if(t.s?(r.cRel&&(r.c+=t.s.c),r.rRel&&(r.r+=t.s.r)):(r.cRel&&(r.c+=t.c),r.rRel&&(r.r+=t.r)),!n||n.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function vb(e,t,n){var r=Mv(e);return r.s=yb(r.s,t.s,n),r.e=yb(r.e,t.s,n),r}function wb(e,t){if(e.cRel&&e.c<0)for(e=Mv(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Mv(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var n=Cb(e);return e.cRel||null==e.cRel||(n=n.replace(/^([A-Z])/,"$$$1")),e.rRel||null==e.rRel||(n=function(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}(n)),n}function bb(e,t){return 0!=e.s.r||e.s.rRel||e.e.r!=(t.biff>=12?1048575:t.biff>=8?65536:16384)||e.e.rRel?0!=e.s.c||e.s.cRel||e.e.c!=(t.biff>=12?16383:255)||e.e.cRel?wb(e.s,t.biff)+":"+wb(e.e,t.biff):(e.s.rRel?"":"$")+Sb(e.s.r)+":"+(e.e.rRel?"":"$")+Sb(e.e.r):(e.s.cRel?"":"$")+Eb(e.s.c)+":"+(e.e.cRel?"":"$")+Eb(e.e.c)}function xb(e){return parseInt(e.replace(/\$(\d+)$/,"$1"),10)-1}function Sb(e){return""+(e+1)}function Ab(e){for(var t=e.replace(/^\$([A-Z])/,"$1"),n=0,r=0;r!==t.length;++r)n=26*n+t.charCodeAt(r)-64;return n-1}function Eb(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function Nb(e){for(var t=0,n=0,r=0;r<e.length;++r){var i=e.charCodeAt(r);i>=48&&i<=57?t=10*t+(i-48):i>=65&&i<=90&&(n=26*n+(i-64))}return{c:n-1,r:t-1}}function Cb(e){for(var t=e.c+1,n="";t;t=(t-1)/26|0)n=String.fromCharCode((t-1)%26+65)+n;return n+(e.r+1)}function _b(e){var t=e.indexOf(":");return-1==t?{s:Nb(e),e:Nb(e)}:{s:Nb(e.slice(0,t)),e:Nb(e.slice(t+1))}}function Tb(e,t){return"undefined"===typeof t||"number"===typeof t?Tb(e.s,e.e):("string"!==typeof e&&(e=Cb(e)),"string"!==typeof t&&(t=Cb(t)),e==t?e:e+":"+t)}function Ib(e){var t={s:{c:0,r:0},e:{c:0,r:0}},n=0,r=0,i=0,s=e.length;for(n=0;r<s&&!((i=e.charCodeAt(r)-64)<1||i>26);++r)n=26*n+i;for(t.s.c=--n,n=0;r<s&&!((i=e.charCodeAt(r)-48)<0||i>9);++r)n=10*n+i;if(t.s.r=--n,r===s||10!=i)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++r,n=0;r!=s&&!((i=e.charCodeAt(r)-64)<1||i>26);++r)n=26*n+i;for(t.e.c=--n,n=0;r!=s&&!((i=e.charCodeAt(r)-48)<0||i>9);++r)n=10*n+i;return t.e.r=--n,t}function kb(e,t){var n="d"==e.t&&t instanceof Date;if(null!=e.z)try{return e.w=dv(e.z,n?Cv(t):t)}catch(b_){}try{return e.w=dv((e.XF||{}).numFmtId||(n?14:0),n?Cv(t):t)}catch(b_){return""+t}}function Pb(e,t,n){return null==e||null==e.t||"z"==e.t?"":void 0!==e.w?e.w:("d"==e.t&&!e.z&&n&&n.dateNF&&(e.z=n.dateNF),"e"==e.t?hx[e.v]||e.v:kb(e,void 0==t?e.v:t))}function Rb(e,t){var n=t&&t.sheet?t.sheet:"Sheet1",r={};return r[n]=e,{SheetNames:[n],Sheets:r}}function Db(e,t,n){var r=n||{},i=e?Array.isArray(e):r.dense;var s=e||(i?[]:{}),a=0,o=0;if(s&&null!=r.origin){if("number"==typeof r.origin)a=r.origin;else{var l="string"==typeof r.origin?Nb(r.origin):r.origin;a=l.r,o=l.c}s["!ref"]||(s["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var u=Ib(s["!ref"]);c.s.c=u.s.c,c.s.r=u.s.r,c.e.c=Math.max(c.e.c,u.e.c),c.e.r=Math.max(c.e.r,u.e.r),-1==a&&(c.e.r=a=u.e.r+1)}for(var d=0;d!=t.length;++d)if(t[d]){if(!Array.isArray(t[d]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=t[d].length;++h)if("undefined"!==typeof t[d][h]){var f={v:t[d][h]},p=a+d,m=o+h;if(c.s.r>p&&(c.s.r=p),c.s.c>m&&(c.s.c=m),c.e.r<p&&(c.e.r=p),c.e.c<m&&(c.e.c=m),!t[d][h]||"object"!==typeof t[d][h]||Array.isArray(t[d][h])||t[d][h]instanceof Date)if(Array.isArray(f.v)&&(f.f=t[d][h][1],f.v=f.v[0]),null===f.v)if(f.f)f.t="n";else if(r.nullError)f.t="e",f.v=0;else{if(!r.sheetStubs)continue;f.t="z"}else"number"===typeof f.v?f.t="n":"boolean"===typeof f.v?f.t="b":f.v instanceof Date?(f.z=r.dateNF||Dy[14],r.cellDates?(f.t="d",f.w=dv(f.z,Cv(f.v))):(f.t="n",f.v=Cv(f.v),f.w=dv(f.z,f.v))):f.t="s";else f=t[d][h];if(i)s[p]||(s[p]=[]),s[p][m]&&s[p][m].z&&(f.z=s[p][m].z),s[p][m]=f;else{var g=Cb({c:m,r:p});s[g]&&s[g].z&&(f.z=s[g].z),s[g]=f}}}return c.s.c<1e7&&(s["!ref"]=Tb(c)),s}function Ob(e,t){return Db(null,e,t)}function Lb(e,t){return t||(t=pb(4)),t.write_shift(4,e),t}function Mb(e){var t=e.read_shift(4);return 0===t?"":e.read_shift(t,"dbcs")}function Fb(e,t){var n=!1;return null==t&&(n=!0,t=pb(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),n?t.slice(0,t.l):t}function jb(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function Bb(e,t){var n=e.l,r=e.read_shift(1),i=Mb(e),s=[],a={t:i,h:i};if(0!==(1&r)){for(var o=e.read_shift(4),l=0;l!=o;++l)s.push(jb(e));a.r=s}else a.r=[{ich:0,ifnt:0}];return e.l=n+t,a}var Ub=Bb;function zb(e,t){var n=!1;return null==t&&(n=!0,t=pb(23+4*e.t.length)),t.write_shift(1,1),Fb(e.t,t),t.write_shift(4,1),function(e,t){t||(t=pb(4)),t.write_shift(2,e.ich||0),t.write_shift(2,e.ifnt||0)}({ich:0,ifnt:0},t),n?t.slice(0,t.l):t}function Vb(e){var t=e.read_shift(4),n=e.read_shift(2);return n+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:n}}function Hb(e,t){return null==t&&(t=pb(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function Wb(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function qb(e,t){return null==t&&(t=pb(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var Gb=Mb,Kb=Fb;function Yb(e){var t=e.read_shift(4);return 0===t||4294967295===t?"":e.read_shift(t,"dbcs")}function Xb(e,t){var n=!1;return null==t&&(n=!0,t=pb(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),n?t.slice(0,t.l):t}var Qb=Mb,Jb=Yb,Zb=Xb;function $b(e){var t=e.slice(e.l,e.l+4),n=1&t[0],r=2&t[0];e.l+=4;var i=0===r?Jw([0,0,0,0,252&t[0],t[1],t[2],t[3]],0):ib(t,0)>>2;return n?i/100:i}function ex(e,t){null==t&&(t=pb(4));var n=0,r=0,i=100*e;if(e==(0|e)&&e>=-(1<<29)&&e<1<<29?r=1:i==(0|i)&&i>=-(1<<29)&&i<1<<29&&(r=1,n=1),!r)throw new Error("unsupported RkNumber "+e);t.write_shift(-4,((n?i:e)<<2)+(n+2))}function tx(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}var nx=tx,rx=function(e,t){return t||(t=pb(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t};function ix(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function sx(e,t){return(t||pb(8)).write_shift(8,e,"f")}function ax(e,t){if(t||(t=pb(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;null!=e.index?(t.write_shift(1,2),t.write_shift(1,e.index)):null!=e.theme?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var n=e.tint||0;if(n>0?n*=32767:n<0&&(n*=32768),t.write_shift(2,n),e.rgb&&null==e.theme){var r=e.rgb||"FFFFFF";"number"==typeof r&&(r=("000000"+r.toString(16)).slice(-6)),t.write_shift(1,parseInt(r.slice(0,2),16)),t.write_shift(1,parseInt(r.slice(2,4),16)),t.write_shift(1,parseInt(r.slice(4,6),16)),t.write_shift(1,255)}else t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);return t}var ox=80,lx={1:{n:"CodePage",t:2},2:{n:"Category",t:ox},3:{n:"PresentationFormat",t:ox},4:{n:"ByteCount",t:3},5:{n:"LineCount",t:3},6:{n:"ParagraphCount",t:3},7:{n:"SlideCount",t:3},8:{n:"NoteCount",t:3},9:{n:"HiddenCount",t:3},10:{n:"MultimediaClipCount",t:3},11:{n:"ScaleCrop",t:11},12:{n:"HeadingPairs",t:4108},13:{n:"TitlesOfParts",t:4126},14:{n:"Manager",t:ox},15:{n:"Company",t:ox},16:{n:"LinksUpToDate",t:11},17:{n:"CharacterCount",t:3},19:{n:"SharedDoc",t:11},22:{n:"HyperlinksChanged",t:11},23:{n:"AppVersion",t:3,p:"version"},24:{n:"DigSig",t:65},26:{n:"ContentType",t:ox},27:{n:"ContentStatus",t:ox},28:{n:"Language",t:ox},29:{n:"Version",t:ox},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}},cx={1:{n:"CodePage",t:2},2:{n:"Title",t:ox},3:{n:"Subject",t:ox},4:{n:"Author",t:ox},5:{n:"Keywords",t:ox},6:{n:"Comments",t:ox},7:{n:"Template",t:ox},8:{n:"LastAuthor",t:ox},9:{n:"RevNumber",t:ox},10:{n:"EditTime",t:64},11:{n:"LastPrinted",t:64},12:{n:"CreatedDate",t:64},13:{n:"ModifiedDate",t:64},14:{n:"PageCount",t:3},15:{n:"WordCount",t:3},16:{n:"CharCount",t:3},17:{n:"Thumbnail",t:71},18:{n:"Application",t:ox},19:{n:"DocSecurity",t:3},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}};function ux(e){return e.map(function(e){return[e>>16&255,e>>8&255,255&e]})}var dx=Mv(ux([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),hx={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},fx={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},px={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function mx(e,t){var n,r=function(e){for(var t=[],n=xv(e),r=0;r!==n.length;++r)null==t[e[n[r]]]&&(t[e[n[r]]]=[]),t[e[n[r]]].push(n[r]);return t}(fx),i=[];i[i.length]=Hv,i[i.length]=cw("Types",null,{xmlns:pw,"xmlns:xsd":Aw,"xmlns:xsi":Sw}),i=i.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(e){return cw("Default",null,{Extension:e[0],ContentType:e[1]})}));var s=function(r){e[r]&&e[r].length>0&&(n=e[r][0],i[i.length]=cw("Override",null,{PartName:("/"==n[0]?"":"/")+n,ContentType:px[r][t.bookType]||px[r].xlsx}))},a=function(n){(e[n]||[]).forEach(function(e){i[i.length]=cw("Override",null,{PartName:("/"==e[0]?"":"/")+e,ContentType:px[n][t.bookType]||px[n].xlsx})})},o=function(t){(e[t]||[]).forEach(function(e){i[i.length]=cw("Override",null,{PartName:("/"==e[0]?"":"/")+e,ContentType:r[t][0]})})};return s("workbooks"),a("sheets"),a("charts"),o("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),a("metadata"),o("people"),i.length>2&&(i[i.length]="</Types>",i[1]=i[1].replace("/>",">")),i.join("")}var gx={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function yx(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function vx(e){var t=[Hv,cw("Relationships",null,{xmlns:mw})];return xv(e["!id"]).forEach(function(n){t[t.length]=cw("Relationship",null,e["!id"][n])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function wx(e,t,n,r,i,s){if(i||(i={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,i.Id="rId"+t,i.Type=r,i.Target=n,s?i.TargetMode=s:[gx.HLINK,gx.XPATH,gx.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),e["!id"][i.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][i.Id]=i,e[("/"+i.Target).replace("//","/")]=i,t}function bx(e,t,n){return['  <rdf:Description rdf:about="'+e+'">\n','    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(n||"odf")+"#"+t+'"/>\n',"  </rdf:Description>\n"].join("")}function xx(e,t){return['  <rdf:Description rdf:about="'+e+'">\n','    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+'"/>\n',"  </rdf:Description>\n"].join("")}function Sx(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+$g.version+"</meta:generator></office:meta></office:document-meta>"}var Ax=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function Ex(e,t,n,r,i){null==i[e]&&null!=t&&""!==t&&(i[e]=t,t=Yv(t),r[r.length]=n?cw(e,t,n):ow(e,t))}function Nx(e,t){var n=t||{},r=[Hv,cw("cp:coreProperties",null,{"xmlns:cp":dw,"xmlns:dc":yw,"xmlns:dcterms":vw,"xmlns:dcmitype":ww,"xmlns:xsi":Sw})],i={};if(!e&&!n.Props)return r.join("");e&&(null!=e.CreatedDate&&Ex("dcterms:created","string"===typeof e.CreatedDate?e.CreatedDate:uw(e.CreatedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i),null!=e.ModifiedDate&&Ex("dcterms:modified","string"===typeof e.ModifiedDate?e.ModifiedDate:uw(e.ModifiedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i));for(var s=0;s!=Ax.length;++s){var a=Ax[s],o=n.Props&&null!=n.Props[a[1]]?n.Props[a[1]]:e?e[a[1]]:null;!0===o?o="1":!1===o?o="0":"number"==typeof o&&(o=String(o)),null!=o&&Ex(a[0],o,null,r,i)}return r.length>2&&(r[r.length]="</cp:coreProperties>",r[1]=r[1].replace("/>",">")),r.join("")}var Cx=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],_x=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function Tx(e){var t=[],n=cw;return e||(e={}),e.Application="SheetJS",t[t.length]=Hv,t[t.length]=cw("Properties",null,{xmlns:fw,"xmlns:vt":xw}),Cx.forEach(function(r){if(void 0!==e[r[1]]){var i;switch(r[2]){case"string":i=Yv(String(e[r[1]]));break;case"bool":i=e[r[1]]?"true":"false"}void 0!==i&&(t[t.length]=n(r[0],i))}}),t[t.length]=n("HeadingPairs",n("vt:vector",n("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+n("vt:variant",n("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=n("TitlesOfParts",n("vt:vector",e.SheetNames.map(function(e){return"<vt:lpstr>"+Yv(e)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}function Ix(e){var t=[Hv,cw("Properties",null,{xmlns:hw,"xmlns:vt":xw})];if(!e)return t.join("");var n=1;return xv(e).forEach(function(r){++n,t[t.length]=cw("property",function(e,t){switch(typeof e){case"string":var n=cw("vt:lpwstr",Yv(e));return t&&(n=n.replace(/&quot;/g,"_x0022_")),n;case"number":return cw((0|e)==e?"vt:i4":"vt:r8",Yv(String(e)));case"boolean":return cw("vt:bool",e?"true":"false")}if(e instanceof Date)return cw("vt:filetime",uw(e));throw new Error("Unable to serialize "+e)}(e[r],!0),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:n,name:Yv(r)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var kx={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function Px(e,t){var n=pb(4),r=pb(4);switch(n.write_shift(4,80==e?31:e),e){case 3:r.write_shift(-4,t);break;case 5:(r=pb(8)).write_shift(8,t,"f");break;case 11:r.write_shift(4,t?1:0);break;case 64:r=function(e){var t=("string"==typeof e?new Date(Date.parse(e)):e).getTime()/1e3+11644473600,n=t%Math.pow(2,32),r=(t-n)/Math.pow(2,32);r*=1e7;var i=(n*=1e7)/Math.pow(2,32)|0;i>0&&(n%=Math.pow(2,32),r+=i);var s=pb(8);return s.write_shift(4,n),s.write_shift(4,r),s}(t);break;case 31:case 80:for((r=pb(4+2*(t.length+1)+(t.length%2?0:2))).write_shift(4,t.length+1),r.write_shift(0,t,"dbcs");r.l!=r.length;)r.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return xy([n,r])}var Rx=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function Dx(e){switch(typeof e){case"boolean":return 11;case"number":return(0|e)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64}return-1}function Ox(e,t,n){var r=pb(8),i=[],s=[],a=8,o=0,l=pb(8),c=pb(8);if(l.write_shift(4,2),l.write_shift(4,1200),c.write_shift(4,1),s.push(l),i.push(c),a+=8+l.length,!t){(c=pb(8)).write_shift(4,0),i.unshift(c);var u=[pb(4)];for(u[0].write_shift(4,e.length),o=0;o<e.length;++o){var d=e[o][0];for((l=pb(8+2*(d.length+1)+(d.length%2?0:2))).write_shift(4,o+2),l.write_shift(4,d.length+1),l.write_shift(0,d,"dbcs");l.l!=l.length;)l.write_shift(1,0);u.push(l)}l=xy(u),s.unshift(l),a+=8+l.length}for(o=0;o<e.length;++o)if((!t||t[e[o][0]])&&!(Rx.indexOf(e[o][0])>-1||_x.indexOf(e[o][0])>-1)&&null!=e[o][1]){var h=e[o][1],f=0;if(t){var p=n[f=+t[e[o][0]]];if("version"==p.p&&"string"==typeof h){var m=h.split(".");h=(+m[0]<<16)+(+m[1]||0)}l=Px(p.t,h)}else{var g=Dx(h);-1==g&&(g=31,h=String(h)),l=Px(g,h)}s.push(l),(c=pb(8)).write_shift(4,t?f:2+o),i.push(c),a+=8+l.length}var y=8*(s.length+1);for(o=0;o<s.length;++o)i[o].write_shift(4,y),y+=s[o].length;return r.write_shift(4,a),r.write_shift(4,s.length),xy([r].concat(i).concat(s))}function Lx(e,t,n,r,i,s){var a=pb(i?68:48),o=[a];a.write_shift(2,65534),a.write_shift(2,0),a.write_shift(4,842412599),a.write_shift(16,yv.utils.consts.HEADER_CLSID,"hex"),a.write_shift(4,i?2:1),a.write_shift(16,t,"hex"),a.write_shift(4,i?68:48);var l=Ox(e,n,r);if(o.push(l),i){var c=Ox(i,null,null);a.write_shift(16,s,"hex"),a.write_shift(4,68+l.length),o.push(c)}return xy(o)}function Mx(e,t){return 1===e.read_shift(t)}function Fx(e,t){return t||(t=pb(2)),t.write_shift(2,+!!e),t}function jx(e){return e.read_shift(2,"u")}function Bx(e,t){return t||(t=pb(2)),t.write_shift(2,e),t}function Ux(e,t,n){return n||(n=pb(2)),n.write_shift(1,"e"==t?+e:+!!e),n.write_shift(1,"e"==t?1:0),n}function zx(e,t,n){var r=e.read_shift(n&&n.biff>=12?2:1),i="sbcs-cont",s=ey;(n&&n.biff>=8&&(ey=1200),n&&8!=n.biff)?12==n.biff&&(i="wstr"):e.read_shift(1)&&(i="dbcs-cont");n.biff>=2&&n.biff<=5&&(i="cpstr");var a=r?e.read_shift(r,i):"";return ey=s,a}function Vx(e){var t=e.t||"",n=pb(3);n.write_shift(2,t.length),n.write_shift(1,1);var r=pb(2*t.length);return r.write_shift(2*t.length,t,"utf16le"),xy([n,r])}function Hx(e,t,n){if(n){if(n.biff>=2&&n.biff<=5)return e.read_shift(t,"cpstr");if(n.biff>=12)return e.read_shift(t,"dbcs-cont")}return 0===e.read_shift(1)?e.read_shift(t,"sbcs-cont"):e.read_shift(t,"dbcs-cont")}function Wx(e,t,n){var r=e.read_shift(n&&2==n.biff?1:2);return 0===r?(e.l++,""):Hx(e,r,n)}function qx(e,t,n){if(n.biff>5)return Wx(e,0,n);var r=e.read_shift(1);return 0===r?(e.l++,""):e.read_shift(r,n.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function Gx(e,t,n){return n||(n=pb(3+2*e.length)),n.write_shift(2,e.length),n.write_shift(1,1),n.write_shift(31,e,"utf16le"),n}function Kx(e,t){t||(t=pb(6+2*e.length)),t.write_shift(4,1+e.length);for(var n=0;n<e.length;++n)t.write_shift(2,e.charCodeAt(n));return t.write_shift(2,0),t}function Yx(e){var t=pb(512),n=0,r=e.Target;"file://"==r.slice(0,7)&&(r=r.slice(7));var i=r.indexOf("#"),s=i>-1?31:23;switch(r.charAt(0)){case"#":s=28;break;case".":s&=-3}t.write_shift(4,2),t.write_shift(4,s);var a=[8,6815827,6619237,4849780,83];for(n=0;n<a.length;++n)t.write_shift(4,a[n]);if(28==s)Kx(r=r.slice(1),t);else if(2&s){for(a="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),n=0;n<a.length;++n)t.write_shift(1,parseInt(a[n],16));var o=i>-1?r.slice(0,i):r;for(t.write_shift(4,2*(o.length+1)),n=0;n<o.length;++n)t.write_shift(2,o.charCodeAt(n));t.write_shift(2,0),8&s&&Kx(i>-1?r.slice(i+1):"",t)}else{for(a="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),n=0;n<a.length;++n)t.write_shift(1,parseInt(a[n],16));for(var l=0;"../"==r.slice(3*l,3*l+3)||"..\\"==r.slice(3*l,3*l+3);)++l;for(t.write_shift(2,l),t.write_shift(4,r.length-3*l+1),n=0;n<r.length-3*l;++n)t.write_shift(1,255&r.charCodeAt(n+3*l));for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),n=0;n<6;++n)t.write_shift(4,0)}return t.slice(0,t.l)}function Xx(e,t,n,r){return r||(r=pb(6)),r.write_shift(2,e),r.write_shift(2,t),r.write_shift(2,n||0),r}function Qx(e,t,n){var r=n.biff>8?4:2;return[e.read_shift(r),e.read_shift(r,"i"),e.read_shift(r,"i")]}function Jx(e){var t=e.read_shift(2),n=e.read_shift(2);return{s:{c:e.read_shift(2),r:t},e:{c:e.read_shift(2),r:n}}}function Zx(e,t){return t||(t=pb(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function $x(e,t,n){var r=1536,i=16;switch(n.bookType){case"biff8":case"xla":break;case"biff5":r=1280,i=8;break;case"biff4":r=4,i=6;break;case"biff3":r=3,i=6;break;case"biff2":r=2,i=4;break;default:throw new Error("unsupported BIFF version")}var s=pb(i);return s.write_shift(2,r),s.write_shift(2,t),i>4&&s.write_shift(2,29282),i>6&&s.write_shift(2,1997),i>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function eS(e,t){var n=!t||t.biff>=8?2:1,r=pb(8+n*e.name.length);r.write_shift(4,e.pos),r.write_shift(1,e.hs||0),r.write_shift(1,e.dt),r.write_shift(1,e.name.length),t.biff>=8&&r.write_shift(1,1),r.write_shift(n*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var i=r.slice(0,r.l);return i.l=r.l,i}function tS(e,t,n,r){var i=n&&5==n.biff;r||(r=pb(i?3+t.length:5+2*t.length)),r.write_shift(2,e),r.write_shift(i?1:2,t.length),i||r.write_shift(1,1),r.write_shift((i?1:2)*t.length,t,i?"sbcs":"utf16le");var s=r.length>r.l?r.slice(0,r.l):r;return null==s.l&&(s.l=s.length),s}function nS(e,t,n,r){var i=n&&5==n.biff;r||(r=pb(i?16:20)),r.write_shift(2,0),e.style?(r.write_shift(2,e.numFmtId||0),r.write_shift(2,65524)):(r.write_shift(2,e.numFmtId||0),r.write_shift(2,t<<4));var s=0;return e.numFmtId>0&&i&&(s|=1024),r.write_shift(4,s),r.write_shift(4,0),i||r.write_shift(4,0),r.write_shift(2,0),r}function rS(e,t,n){if(n.biff<8)return function(e,t,n){3==e[e.l+1]&&e[e.l]++;var r=zx(e,0,n);return 3==r.charCodeAt(0)?r.slice(1):r}(e,0,n);for(var r=[],i=e.l+t,s=e.read_shift(n.biff>8?4:2);0!==s--;)r.push(Qx(e,n.biff,n));if(e.l!=i)throw new Error("Bad ExternSheet: "+e.l+" != "+i);return r}function iS(e){var t=pb(24),n=Nb(e[0]);t.write_shift(2,n.r),t.write_shift(2,n.r),t.write_shift(2,n.c),t.write_shift(2,n.c);for(var r="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)t.write_shift(1,parseInt(r[i],16));return xy([t,Yx(e[1])])}function sS(e){var t=e[1].Tooltip,n=pb(10+2*(t.length+1));n.write_shift(2,2048);var r=Nb(e[0]);n.write_shift(2,r.r),n.write_shift(2,r.r),n.write_shift(2,r.c),n.write_shift(2,r.c);for(var i=0;i<t.length;++i)n.write_shift(2,t.charCodeAt(i));return n.write_shift(2,0),n}function aS(e,t,n){if(!n.cellStyles)return fb(e,t);var r=n&&n.biff>=12?4:2,i=e.read_shift(r),s=e.read_shift(r),a=e.read_shift(r),o=e.read_shift(r),l=e.read_shift(2);2==r&&(e.l+=2);var c={s:i,e:s,w:a,ixfe:o,flags:l};return(n.biff>=5||!n.biff)&&(c.level=l>>8&7),c}var oS=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=Av({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function n(t,n){var r=n||{};r.dateNF||(r.dateNF="yyyymmdd");var i=Ob(function(t,n){var r=[],i=gy(1);switch(n.type){case"base64":i=vy(fy(t));break;case"binary":i=vy(t);break;case"buffer":case"array":i=t}hb(i,0);var s=i.read_shift(1),a=!!(136&s),o=!1,l=!1;switch(s){case 2:case 3:case 131:case 139:case 245:break;case 48:case 49:o=!0,a=!0;break;case 140:l=!0;break;default:throw new Error("DBF Unsupported Version: "+s.toString(16))}var c=0,u=521;2==s&&(c=i.read_shift(2)),i.l+=3,2!=s&&(c=i.read_shift(4)),c>1048576&&(c=1e6),2!=s&&(u=i.read_shift(2));var d=i.read_shift(2),h=n.codepage||1252;2!=s&&(i.l+=16,i.read_shift(1),0!==i[i.l]&&(h=e[i[i.l]]),i.l+=1,i.l+=2),l&&(i.l+=36);for(var f=[],p={},m=Math.min(i.length,2==s?521:u-10-(o?264:0)),g=l?32:11;i.l<m&&13!=i[i.l];)switch((p={}).name=ly.utils.decode(h,i.slice(i.l,i.l+g)).replace(/[\u0000\r\n].*$/g,""),i.l+=g,p.type=String.fromCharCode(i.read_shift(1)),2==s||l||(p.offset=i.read_shift(4)),p.len=i.read_shift(1),2==s&&(p.offset=i.read_shift(2)),p.dec=i.read_shift(1),p.name.length&&f.push(p),2!=s&&(i.l+=l?13:14),p.type){case"B":o&&8==p.len||!n.WTF||console.log("Skipping "+p.name+":"+p.type);break;case"G":case"P":n.WTF&&console.log("Skipping "+p.name+":"+p.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+p.type)}if(13!==i[i.l]&&(i.l=u-1),13!==i.read_shift(1))throw new Error("DBF Terminator not found "+i.l+" "+i[i.l]);i.l=u;var y=0,v=0;for(r[0]=[],v=0;v!=f.length;++v)r[0][v]=f[v].name;for(;c-- >0;)if(42!==i[i.l])for(++i.l,r[++y]=[],v=0,v=0;v!=f.length;++v){var w=i.slice(i.l,i.l+f[v].len);i.l+=f[v].len,hb(w,0);var b=ly.utils.decode(h,w);switch(f[v].type){case"C":b.trim().length&&(r[y][v]=b.replace(/\s+$/,""));break;case"D":8===b.length?r[y][v]=new Date(+b.slice(0,4),+b.slice(4,6)-1,+b.slice(6,8)):r[y][v]=b;break;case"F":r[y][v]=parseFloat(b.trim());break;case"+":case"I":r[y][v]=l?2147483648^w.read_shift(-4,"i"):w.read_shift(4,"i");break;case"L":switch(b.trim().toUpperCase()){case"Y":case"T":r[y][v]=!0;break;case"N":case"F":r[y][v]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+b+"|")}break;case"M":if(!a)throw new Error("DBF Unexpected MEMO for type "+s.toString(16));r[y][v]="##MEMO##"+(l?parseInt(b.trim(),10):w.read_shift(4));break;case"N":(b=b.replace(/\u0000/g,"").trim())&&"."!=b&&(r[y][v]=+b||0);break;case"@":r[y][v]=new Date(w.read_shift(-8,"f")-621356832e5);break;case"T":r[y][v]=new Date(864e5*(w.read_shift(4)-2440588)+w.read_shift(4));break;case"Y":r[y][v]=w.read_shift(4,"i")/1e4+w.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":r[y][v]=-w.read_shift(-8,"f");break;case"B":if(o&&8==f[v].len){r[y][v]=w.read_shift(8,"f");break}case"G":case"P":w.l+=f[v].len;break;case"0":if("_NullFlags"===f[v].name)break;default:throw new Error("DBF Unsupported data type "+f[v].type)}}else i.l+=d;if(2!=s&&i.l<i.length&&26!=i[i.l++])throw new Error("DBF EOF Marker missing "+(i.l-1)+" of "+i.length+" "+i[i.l-1].toString(16));return n&&n.sheetRows&&(r=r.slice(0,n.sheetRows)),n.DBF=f,r}(t,r),r);return i["!cols"]=r.DBF.map(function(e){return{wch:e.len,DBF:e}}),delete r.DBF,i}var r={B:8,C:250,L:1,D:8,"?":0,"":0};return{to_workbook:function(e,t){try{return Rb(n(e,t),t)}catch(b_){if(t&&t.WTF)throw b_}return{SheetNames:[],Sheets:{}}},to_sheet:n,from_sheet:function(e,n){var i=n||{};if(+i.codepage>=0&&sy(+i.codepage),"string"==i.type)throw new Error("Cannot write DBF to JS string");var s=mb(),a=IN(e,{header:1,raw:!0,cellDates:!0}),o=a[0],l=a.slice(1),c=e["!cols"]||[],u=0,d=0,h=0,f=1;for(u=0;u<o.length;++u)if(((c[u]||{}).DBF||{}).name)o[u]=c[u].DBF.name,++h;else if(null!=o[u]){if(++h,"number"===typeof o[u]&&(o[u]=o[u].toString(10)),"string"!==typeof o[u])throw new Error("DBF Invalid column name "+o[u]+" |"+typeof o[u]+"|");if(o.indexOf(o[u])!==u)for(d=0;d<1024;++d)if(-1==o.indexOf(o[u]+"_"+d)){o[u]+="_"+d;break}}var p=Ib(e["!ref"]),m=[],g=[],y=[];for(u=0;u<=p.e.c-p.s.c;++u){var v="",w="",b=0,x=[];for(d=0;d<l.length;++d)null!=l[d][u]&&x.push(l[d][u]);if(0!=x.length&&null!=o[u]){for(d=0;d<x.length;++d){switch(typeof x[d]){case"number":w="B";break;case"string":default:w="C";break;case"boolean":w="L";break;case"object":w=x[d]instanceof Date?"D":"C"}b=Math.max(b,String(x[d]).length),v=v&&v!=w?"C":w}b>250&&(b=250),"C"==(w=((c[u]||{}).DBF||{}).type)&&c[u].DBF.len>b&&(b=c[u].DBF.len),"B"==v&&"N"==w&&(v="N",y[u]=c[u].DBF.dec,b=c[u].DBF.len),g[u]="C"==v||"N"==w?b:r[v]||0,f+=g[u],m[u]=v}else m[u]="?"}var S=s.next(32);for(S.write_shift(4,318902576),S.write_shift(4,l.length),S.write_shift(2,296+32*h),S.write_shift(2,f),u=0;u<4;++u)S.write_shift(4,0);for(S.write_shift(4,(+t[ty]||3)<<8),u=0,d=0;u<o.length;++u)if(null!=o[u]){var A=s.next(32),E=(o[u].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);A.write_shift(1,E,"sbcs"),A.write_shift(1,"?"==m[u]?"C":m[u],"sbcs"),A.write_shift(4,d),A.write_shift(1,g[u]||r[m[u]]||0),A.write_shift(1,y[u]||0),A.write_shift(1,2),A.write_shift(4,0),A.write_shift(1,0),A.write_shift(4,0),A.write_shift(4,0),d+=g[u]||r[m[u]]||0}var N=s.next(264);for(N.write_shift(4,13),u=0;u<65;++u)N.write_shift(4,0);for(u=0;u<l.length;++u){var C=s.next(f);for(C.write_shift(1,0),d=0;d<o.length;++d)if(null!=o[d])switch(m[d]){case"L":C.write_shift(1,null==l[u][d]?63:l[u][d]?84:70);break;case"B":C.write_shift(8,l[u][d]||0,"f");break;case"N":var _="0";for("number"==typeof l[u][d]&&(_=l[u][d].toFixed(y[d]||0)),h=0;h<g[d]-_.length;++h)C.write_shift(1,32);C.write_shift(1,_,"sbcs");break;case"D":l[u][d]?(C.write_shift(4,("0000"+l[u][d].getFullYear()).slice(-4),"sbcs"),C.write_shift(2,("00"+(l[u][d].getMonth()+1)).slice(-2),"sbcs"),C.write_shift(2,("00"+l[u][d].getDate()).slice(-2),"sbcs")):C.write_shift(8,"00000000","sbcs");break;case"C":var T=String(null!=l[u][d]?l[u][d]:"").slice(0,g[d]);for(C.write_shift(1,T,"sbcs"),h=0;h<g[d]-T.length;++h)C.write_shift(1,32)}}return s.next(1).write_shift(1,26),s.end()}}}(),lS=function(){var e={AA:"\xc0",BA:"\xc1",CA:"\xc2",DA:195,HA:"\xc4",JA:197,AE:"\xc8",BE:"\xc9",CE:"\xca",HE:"\xcb",AI:"\xcc",BI:"\xcd",CI:"\xce",HI:"\xcf",AO:"\xd2",BO:"\xd3",CO:"\xd4",DO:213,HO:"\xd6",AU:"\xd9",BU:"\xda",CU:"\xdb",HU:"\xdc",Aa:"\xe0",Ba:"\xe1",Ca:"\xe2",Da:227,Ha:"\xe4",Ja:229,Ae:"\xe8",Be:"\xe9",Ce:"\xea",He:"\xeb",Ai:"\xec",Bi:"\xed",Ci:"\xee",Hi:"\xef",Ao:"\xf2",Bo:"\xf3",Co:"\xf4",Do:245,Ho:"\xf6",Au:"\xf9",Bu:"\xfa",Cu:"\xfb",Hu:"\xfc",KC:"\xc7",Kc:"\xe7",q:"\xe6",z:"\u0153",a:"\xc6",j:"\u0152",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1bN("+xv(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),n=function(t,n){var r=e[n];return"number"==typeof r?uy(r):r},r=function(e,t,n){var r=t.charCodeAt(0)-32<<4|n.charCodeAt(0)-48;return 59==r?e:uy(r)};function i(e,i){var s,a=e.split(/[\n\r]+/),o=-1,l=-1,c=0,u=0,d=[],h=[],f=null,p={},m=[],g=[],y=[],v=0;for(+i.codepage>=0&&sy(+i.codepage);c!==a.length;++c){v=0;var w,b=a[c].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(t,n),x=b.replace(/;;/g,"\0").split(";").map(function(e){return e.replace(/\u0000/g,";")}),S=x[0];if(b.length>0)switch(S){case"ID":case"E":case"B":case"O":case"W":break;case"P":"P"==x[1].charAt(0)&&h.push(b.slice(3).replace(/;;/g,";"));break;case"C":var A=!1,E=!1,N=!1,C=!1,_=-1,T=-1;for(u=1;u<x.length;++u)switch(x[u].charAt(0)){case"A":case"G":break;case"X":l=parseInt(x[u].slice(1))-1,E=!0;break;case"Y":for(o=parseInt(x[u].slice(1))-1,E||(l=0),s=d.length;s<=o;++s)d[s]=[];break;case"K":'"'===(w=x[u].slice(1)).charAt(0)?w=w.slice(1,w.length-1):"TRUE"===w?w=!0:"FALSE"===w?w=!1:isNaN(jv(w))?isNaN(Uv(w).getDate())||(w=Ov(w)):(w=jv(w),null!==f&&ov(f)&&(w=kv(w))),"undefined"!==typeof ly&&"string"==typeof w&&"string"!=(i||{}).type&&(i||{}).codepage&&(w=ly.utils.decode(i.codepage,w)),A=!0;break;case"E":C=!0;var I=$S(x[u].slice(1),{r:o,c:l});d[o][l]=[d[o][l],I];break;case"S":N=!0,d[o][l]=[d[o][l],"S5S"];break;case"R":_=parseInt(x[u].slice(1))-1;break;case"C":T=parseInt(x[u].slice(1))-1;break;default:if(i&&i.WTF)throw new Error("SYLK bad record "+b)}if(A&&(d[o][l]&&2==d[o][l].length?d[o][l][0]=w:d[o][l]=w,f=null),N){if(C)throw new Error("SYLK shared formula cannot have own formula");var k=_>-1&&d[_][T];if(!k||!k[1])throw new Error("SYLK shared formula cannot find base");d[o][l][1]=nA(k[1],{r:o-_,c:l-T})}break;case"F":var P=0;for(u=1;u<x.length;++u)switch(x[u].charAt(0)){case"X":l=parseInt(x[u].slice(1))-1,++P;break;case"Y":for(o=parseInt(x[u].slice(1))-1,s=d.length;s<=o;++s)d[s]=[];break;case"M":v=parseInt(x[u].slice(1))/20;break;case"F":case"G":case"S":case"D":case"N":break;case"P":f=h[parseInt(x[u].slice(1))];break;case"W":for(y=x[u].slice(1).split(" "),s=parseInt(y[0],10);s<=parseInt(y[1],10);++s)v=parseInt(y[2],10),g[s-1]=0===v?{hidden:!0}:{wch:v},NS(g[s-1]);break;case"C":g[l=parseInt(x[u].slice(1))-1]||(g[l]={});break;case"R":m[o=parseInt(x[u].slice(1))-1]||(m[o]={}),v>0?(m[o].hpt=v,m[o].hpx=TS(v)):0===v&&(m[o].hidden=!0);break;default:if(i&&i.WTF)throw new Error("SYLK bad record "+b)}P<1&&(f=null);break;default:if(i&&i.WTF)throw new Error("SYLK bad record "+b)}}return m.length>0&&(p["!rows"]=m),g.length>0&&(p["!cols"]=g),i&&i.sheetRows&&(d=d.slice(0,i.sheetRows)),[d,p]}function s(e,t){var n=function(e,t){switch(t.type){case"base64":return i(fy(e),t);case"binary":return i(e,t);case"buffer":return i(py&&Buffer.isBuffer(e)?e.toString("binary"):by(e),t);case"array":return i(Lv(e),t)}throw new Error("Unrecognized type "+t.type)}(e,t),r=n[0],s=n[1],a=Ob(r,t);return xv(s).forEach(function(e){a[e]=s[e]}),a}function a(e,t,n,r){var i="C;Y"+(n+1)+";X"+(r+1)+";K";switch(e.t){case"n":i+=e.v||0,e.f&&!e.F&&(i+=";E"+tA(e.f,{r:n,c:r}));break;case"b":i+=e.v?"TRUE":"FALSE";break;case"e":i+=e.w||e.v;break;case"d":i+='"'+(e.w||e.v)+'"';break;case"s":i+='"'+e.v.replace(/"/g,"").replace(/;/g,";;")+'"'}return i}return e["|"]=254,{to_workbook:function(e,t){return Rb(s(e,t),t)},to_sheet:s,from_sheet:function(e,t){var n,r,i=["ID;PWXL;N;E"],s=[],o=Ib(e["!ref"]),l=Array.isArray(e),c="\r\n";i.push("P;PGeneral"),i.push("F;P0;DG0G8;M255"),e["!cols"]&&(r=i,e["!cols"].forEach(function(e,t){var n="F;W"+(t+1)+" "+(t+1)+" ";e.hidden?n+="0":("number"!=typeof e.width||e.wpx||(e.wpx=SS(e.width)),"number"!=typeof e.wpx||e.wch||(e.wch=AS(e.wpx)),"number"==typeof e.wch&&(n+=Math.round(e.wch)))," "!=n.charAt(n.length-1)&&r.push(n)})),e["!rows"]&&function(e,t){t.forEach(function(t,n){var r="F;";t.hidden?r+="M0;":t.hpt?r+="M"+20*t.hpt+";":t.hpx&&(r+="M"+20*_S(t.hpx)+";"),r.length>2&&e.push(r+"R"+(n+1))})}(i,e["!rows"]),i.push("B;Y"+(o.e.r-o.s.r+1)+";X"+(o.e.c-o.s.c+1)+";D"+[o.s.c,o.s.r,o.e.c,o.e.r].join(" "));for(var u=o.s.r;u<=o.e.r;++u)for(var d=o.s.c;d<=o.e.c;++d){var h=Cb({r:u,c:d});(n=l?(e[u]||[])[d]:e[h])&&(null!=n.v||n.f&&!n.F)&&s.push(a(n,0,u,d))}return i.join(c)+c+s.join(c)+c+"E"+c}}}(),cS=function(){function e(e,t){for(var n=e.split("\n"),r=-1,i=-1,s=0,a=[];s!==n.length;++s)if("BOT"!==n[s].trim()){if(!(r<0)){for(var o=n[s].trim().split(","),l=o[0],c=o[1],u=n[++s]||"";1&(u.match(/["]/g)||[]).length&&s<n.length-1;)u+="\n"+n[++s];switch(u=u.trim(),+l){case-1:if("BOT"===u){a[++r]=[],i=0;continue}if("EOD"!==u)throw new Error("Unrecognized DIF special command "+u);break;case 0:"TRUE"===u?a[r][i]=!0:"FALSE"===u?a[r][i]=!1:isNaN(jv(c))?isNaN(Uv(c).getDate())?a[r][i]=c:a[r][i]=Ov(c):a[r][i]=jv(c),++i;break;case 1:(u=(u=u.slice(1,u.length-1)).replace(/""/g,'"'))&&u.match(/^=".*"$/)&&(u=u.slice(2,-1)),a[r][i++]=""!==u?u:null}if("EOD"===u)break}}else a[++r]=[],i=0;return t&&t.sheetRows&&(a=a.slice(0,t.sheetRows)),a}function t(t,n){return Ob(function(t,n){switch(n.type){case"base64":return e(fy(t),n);case"binary":return e(t,n);case"buffer":return e(py&&Buffer.isBuffer(t)?t.toString("binary"):by(t),n);case"array":return e(Lv(t),n)}throw new Error("Unrecognized type "+n.type)}(t,n),n)}var n=function(){var e=function(e,t,n,r,i){e.push(t),e.push(n+","+r),e.push('"'+i.replace(/"/g,'""')+'"')},t=function(e,t,n,r){e.push(t+","+n),e.push(1==t?'"'+r.replace(/"/g,'""')+'"':r)};return function(n){var r,i=[],s=Ib(n["!ref"]),a=Array.isArray(n);e(i,"TABLE",0,1,"sheetjs"),e(i,"VECTORS",0,s.e.r-s.s.r+1,""),e(i,"TUPLES",0,s.e.c-s.s.c+1,""),e(i,"DATA",0,0,"");for(var o=s.s.r;o<=s.e.r;++o){t(i,-1,0,"BOT");for(var l=s.s.c;l<=s.e.c;++l){var c=Cb({r:o,c:l});if(r=a?(n[o]||[])[l]:n[c])switch(r.t){case"n":var u=r.w;u||null==r.v||(u=r.v),null==u?r.f&&!r.F?t(i,1,0,"="+r.f):t(i,1,0,""):t(i,0,u,"V");break;case"b":t(i,0,r.v?1:0,r.v?"TRUE":"FALSE");break;case"s":t(i,1,0,isNaN(r.v)?r.v:'="'+r.v+'"');break;case"d":r.w||(r.w=dv(r.z||Dy[14],Cv(Ov(r.v)))),t(i,0,r.w,"V");break;default:t(i,1,0,"")}else t(i,1,0,"")}}t(i,-1,0,"EOD");return i.join("\r\n")}}();return{to_workbook:function(e,n){return Rb(t(e,n),n)},to_sheet:t,from_sheet:n}}(),uS=function(){function e(e){return e.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,"\n")}function t(e){return e.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function n(t,n){return Ob(function(t,n){for(var r=t.split("\n"),i=-1,s=-1,a=0,o=[];a!==r.length;++a){var l=r[a].trim().split(":");if("cell"===l[0]){var c=Nb(l[1]);if(o.length<=c.r)for(i=o.length;i<=c.r;++i)o[i]||(o[i]=[]);switch(i=c.r,s=c.c,l[2]){case"t":o[i][s]=e(l[3]);break;case"v":o[i][s]=+l[3];break;case"vtf":var u=l[l.length-1];case"vtc":"nl"===l[3]?o[i][s]=!!+l[4]:o[i][s]=+l[4],"vtf"==l[2]&&(o[i][s]=[o[i][s],u])}}}return n&&n.sheetRows&&(o=o.slice(0,n.sheetRows)),o}(t,n),n)}var r=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join("\n"),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join("\n")+"\n",s=["# SocialCalc Spreadsheet Control Save","part:sheet"].join("\n"),a="--SocialCalcSpreadsheetControlSave--";function o(e){if(!e||!e["!ref"])return"";for(var n,r=[],i=[],s="",a=_b(e["!ref"]),o=Array.isArray(e),l=a.s.r;l<=a.e.r;++l)for(var c=a.s.c;c<=a.e.c;++c)if(s=Cb({r:l,c:c}),(n=o?(e[l]||[])[c]:e[s])&&null!=n.v&&"z"!==n.t){switch(i=["cell",s,"t"],n.t){case"s":case"str":i.push(t(n.v));break;case"n":n.f?(i[2]="vtf",i[3]="n",i[4]=n.v,i[5]=t(n.f)):(i[2]="v",i[3]=n.v);break;case"b":i[2]="vt"+(n.f?"f":"c"),i[3]="nl",i[4]=n.v?"1":"0",i[5]=t(n.f||(n.v?"TRUE":"FALSE"));break;case"d":var u=Cv(Ov(n.v));i[2]="vtc",i[3]="nd",i[4]=""+u,i[5]=n.w||dv(n.z||Dy[14],u);break;case"e":continue}r.push(i.join(":"))}return r.push("sheet:c:"+(a.e.c-a.s.c+1)+":r:"+(a.e.r-a.s.r+1)+":tvf:1"),r.push("valueformat:1:text-wiki"),r.join("\n")}return{to_workbook:function(e,t){return Rb(n(e,t),t)},to_sheet:n,from_sheet:function(e){return[r,i,s,i,o(e),a].join("\n")}}}(),dS=function(){function e(e,t,n,r,i){i.raw?t[n][r]=e:""===e||("TRUE"===e?t[n][r]=!0:"FALSE"===e?t[n][r]=!1:isNaN(jv(e))?isNaN(Uv(e).getDate())?t[n][r]=e:t[n][r]=Ov(e):t[n][r]=jv(e))}var t={44:",",9:"\t",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function r(e){for(var r={},i=!1,s=0,a=0;s<e.length;++s)34==(a=e.charCodeAt(s))?i=!i:!i&&a in t&&(r[a]=(r[a]||0)+1);for(s in a=[],r)Object.prototype.hasOwnProperty.call(r,s)&&a.push([r[s],s]);if(!a.length)for(s in r=n)Object.prototype.hasOwnProperty.call(r,s)&&a.push([r[s],s]);return a.sort(function(e,t){return e[0]-t[0]||n[e[1]]-n[t[1]]}),t[a.pop()[1]]||44}function i(e,t){var n=t||{},i="";var s=n.dense?[]:{},a={s:{c:0,r:0},e:{c:0,r:0}};"sep="==e.slice(0,4)?13==e.charCodeAt(5)&&10==e.charCodeAt(6)?(i=e.charAt(4),e=e.slice(7)):13==e.charCodeAt(5)||10==e.charCodeAt(5)?(i=e.charAt(4),e=e.slice(6)):i=r(e.slice(0,1024)):i=n&&n.FS?n.FS:r(e.slice(0,1024));var o=0,l=0,c=0,u=0,d=0,h=i.charCodeAt(0),f=!1,p=0,m=e.charCodeAt(0);e=e.replace(/\r\n/gm,"\n");var g=null!=n.dateNF?function(e){var t="number"==typeof e?Dy[e]:e;return t=t.replace(mv,"(\\d+)"),new RegExp("^"+t+"$")}(n.dateNF):null;function y(){var t=e.slice(u,d),r={};if('"'==t.charAt(0)&&'"'==t.charAt(t.length-1)&&(t=t.slice(1,-1).replace(/""/g,'"')),0===t.length)r.t="z";else if(n.raw)r.t="s",r.v=t;else if(0===t.trim().length)r.t="s",r.v=t;else if(61==t.charCodeAt(0))34==t.charCodeAt(1)&&34==t.charCodeAt(t.length-1)?(r.t="s",r.v=t.slice(2,-1).replace(/""/g,'"')):1!=t.length?(r.t="n",r.f=t.slice(1)):(r.t="s",r.v=t);else if("TRUE"==t)r.t="b",r.v=!0;else if("FALSE"==t)r.t="b",r.v=!1;else if(isNaN(c=jv(t)))if(!isNaN(Uv(t).getDate())||g&&t.match(g)){r.z=n.dateNF||Dy[14];var i=0;g&&t.match(g)&&(t=function(e,t,n){var r=-1,i=-1,s=-1,a=-1,o=-1,l=-1;(t.match(mv)||[]).forEach(function(e,t){var c=parseInt(n[t+1],10);switch(e.toLowerCase().charAt(0)){case"y":r=c;break;case"d":s=c;break;case"h":a=c;break;case"s":l=c;break;case"m":a>=0?o=c:i=c}}),l>=0&&-1==o&&i>=0&&(o=i,i=-1);var c=(""+(r>=0?r:(new Date).getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);7==c.length&&(c="0"+c),8==c.length&&(c="20"+c);var u=("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return-1==a&&-1==o&&-1==l?c:-1==r&&-1==i&&-1==s?u:c+"T"+u}(0,n.dateNF,t.match(g)||[]),i=1),n.cellDates?(r.t="d",r.v=Ov(t,i)):(r.t="n",r.v=Cv(Ov(t,i))),!1!==n.cellText&&(r.w=dv(r.z,r.v instanceof Date?Cv(r.v):r.v)),n.cellNF||delete r.z}else r.t="s",r.v=t;else r.t="n",!1!==n.cellText&&(r.w=t),r.v=c;if("z"==r.t||(n.dense?(s[o]||(s[o]=[]),s[o][l]=r):s[Cb({c:l,r:o})]=r),u=d+1,m=e.charCodeAt(u),a.e.c<l&&(a.e.c=l),a.e.r<o&&(a.e.r=o),p==h)++l;else if(l=0,++o,n.sheetRows&&n.sheetRows<=o)return!0}e:for(;d<e.length;++d)switch(p=e.charCodeAt(d)){case 34:34===m&&(f=!f);break;case h:case 10:case 13:if(!f&&y())break e}return d-u>0&&y(),s["!ref"]=Tb(a),s}function s(t,n){return n&&n.PRN?n.FS||"sep="==t.slice(0,4)||t.indexOf("\t")>=0||t.indexOf(",")>=0||t.indexOf(";")>=0?i(t,n):Ob(function(t,n){var r=n||{},i=[];if(!t||0===t.length)return i;for(var s=t.split(/[\r\n]/),a=s.length-1;a>=0&&0===s[a].length;)--a;for(var o=10,l=0,c=0;c<=a;++c)-1==(l=s[c].indexOf(" "))?l=s[c].length:l++,o=Math.max(o,l);for(c=0;c<=a;++c){i[c]=[];var u=0;for(e(s[c].slice(0,o).trim(),i,c,u,r),u=1;u<=(s[c].length-o)/10+1;++u)e(s[c].slice(o+10*(u-1),o+10*u).trim(),i,c,u,r)}return r.sheetRows&&(i=i.slice(0,r.sheetRows)),i}(t,n),n):i(t,n)}function a(e,t){var n="",r="string"==t.type?[0,0,0,0]:bN(e,t);switch(t.type){case"base64":n=fy(e);break;case"binary":case"string":n=e;break;case"buffer":n=65001==t.codepage?e.toString("utf8"):t.codepage&&"undefined"!==typeof ly?ly.utils.decode(t.codepage,e):py&&Buffer.isBuffer(e)?e.toString("binary"):by(e);break;case"array":n=Lv(e);break;default:throw new Error("Unrecognized type "+t.type)}return 239==r[0]&&187==r[1]&&191==r[2]?n=rw(n.slice(3)):"string"!=t.type&&"buffer"!=t.type&&65001==t.codepage?n=rw(n):"binary"==t.type&&"undefined"!==typeof ly&&t.codepage&&(n=ly.utils.decode(t.codepage,ly.utils.encode(28591,n))),"socialcalc:version:"==n.slice(0,19)?uS.to_sheet("string"==t.type?n:rw(n),t):s(n,t)}return{to_workbook:function(e,t){return Rb(a(e,t),t)},to_sheet:a,from_sheet:function(e){for(var t,n=[],r=Ib(e["!ref"]),i=Array.isArray(e),s=r.s.r;s<=r.e.r;++s){for(var a=[],o=r.s.c;o<=r.e.c;++o){var l=Cb({r:s,c:o});if((t=i?(e[s]||[])[o]:e[l])&&null!=t.v){for(var c=(t.w||(Pb(t),t.w)||"").slice(0,10);c.length<10;)c+=" ";a.push(c+(0===o?" ":""))}else a.push("          ")}n.push(a.join(""))}return n.join("\n")}}}();var hS=function(){function e(e,t,n){if(e){hb(e,e.l||0);for(var r=n.Enum||y;e.l<e.length;){var i=e.read_shift(2),s=r[i]||r[65535],a=e.read_shift(2),o=e.l+a,l=s.f&&s.f(e,a,n);if(e.l=o,t(l,s,i))return}}}function t(t,n){if(!t)return t;var r=n||{};var i=r.dense?[]:{},s="Sheet1",a="",o=0,l={},c=[],u=[],d={s:{r:0,c:0},e:{r:0,c:0}},h=r.sheetRows||0;if(0==t[2]&&(8==t[3]||9==t[3])&&t.length>=16&&5==t[14]&&108===t[15])throw new Error("Unsupported Works 3 for Mac file");if(2==t[2])r.Enum=y,e(t,function(e,t,n){switch(n){case 0:r.vers=e,e>=4096&&(r.qpro=!0);break;case 6:d=e;break;case 204:e&&(a=e);break;case 222:a=e;break;case 15:case 51:r.qpro||(e[1].v=e[1].v.slice(1));case 13:case 14:case 16:14==n&&112==(112&e[2])&&(15&e[2])>1&&(15&e[2])<15&&(e[1].z=r.dateNF||Dy[14],r.cellDates&&(e[1].t="d",e[1].v=kv(e[1].v))),r.qpro&&e[3]>o&&(i["!ref"]=Tb(d),l[s]=i,c.push(s),i=r.dense?[]:{},d={s:{r:0,c:0},e:{r:0,c:0}},o=e[3],s=a||"Sheet"+(o+1),a="");var u=r.dense?(i[e[0].r]||[])[e[0].c]:i[Cb(e[0])];if(u){u.t=e[1].t,u.v=e[1].v,null!=e[1].z&&(u.z=e[1].z),null!=e[1].f&&(u.f=e[1].f);break}r.dense?(i[e[0].r]||(i[e[0].r]=[]),i[e[0].r][e[0].c]=e[1]):i[Cb(e[0])]=e[1]}},r);else{if(26!=t[2]&&14!=t[2])throw new Error("Unrecognized LOTUS BOF "+t[2]);r.Enum=v,14==t[2]&&(r.qpro=!0,t.l=0),e(t,function(e,t,n){switch(n){case 204:s=e;break;case 22:e[1].v=e[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(e[3]>o&&(i["!ref"]=Tb(d),l[s]=i,c.push(s),i=r.dense?[]:{},d={s:{r:0,c:0},e:{r:0,c:0}},o=e[3],s="Sheet"+(o+1)),h>0&&e[0].r>=h)break;r.dense?(i[e[0].r]||(i[e[0].r]=[]),i[e[0].r][e[0].c]=e[1]):i[Cb(e[0])]=e[1],d.e.c<e[0].c&&(d.e.c=e[0].c),d.e.r<e[0].r&&(d.e.r=e[0].r);break;case 27:e[14e3]&&(u[e[14e3][0]]=e[14e3][1]);break;case 1537:u[e[0]]=e[1],e[0]==o&&(s=e[1])}},r)}if(i["!ref"]=Tb(d),l[a||s]=i,c.push(a||s),!u.length)return{SheetNames:c,Sheets:l};for(var f={},p=[],m=0;m<u.length;++m)l[c[m]]?(p.push(u[m]||c[m]),f[u[m]]=l[u[m]]||l[c[m]]):(p.push(u[m]),f[u[m]]={"!ref":"A1"});return{SheetNames:p,Sheets:f}}function n(e,t,n){var r=[{c:0,r:0},{t:"n",v:0},0,0];return n.qpro&&20768!=n.vers?(r[0].c=e.read_shift(1),r[3]=e.read_shift(1),r[0].r=e.read_shift(2),e.l+=2):(r[2]=e.read_shift(1),r[0].c=e.read_shift(2),r[0].r=e.read_shift(2)),r}function r(e,t,r){var i=e.l+t,s=n(e,0,r);if(s[1].t="s",20768==r.vers){e.l++;var a=e.read_shift(1);return s[1].v=e.read_shift(a,"utf8"),s}return r.qpro&&e.l++,s[1].v=e.read_shift(i-e.l,"cstr"),s}function i(e,t,n){var r=pb(7+n.length);r.write_shift(1,255),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(1,39);for(var i=0;i<r.length;++i){var s=n.charCodeAt(i);r.write_shift(1,s>=128?95:s)}return r.write_shift(1,0),r}function s(e,t,n){var r=pb(7);return r.write_shift(1,255),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(2,n,"i"),r}function a(e,t,n){var r=pb(13);return r.write_shift(1,255),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(8,n,"f"),r}function o(e,t,n){var r=32768&t;return t=(r?e:0)+((t&=-32769)>=8192?t-16384:t),(r?"":"$")+(n?Eb(t):Sb(t))}var l={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},c=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function u(e){var t=[{c:0,r:0},{t:"n",v:0},0];return t[0].r=e.read_shift(2),t[3]=e[e.l++],t[0].c=e[e.l++],t}function d(e,t,n,r){var i=pb(6+r.length);i.write_shift(2,e),i.write_shift(1,n),i.write_shift(1,t),i.write_shift(1,39);for(var s=0;s<r.length;++s){var a=r.charCodeAt(s);i.write_shift(1,a>=128?95:a)}return i.write_shift(1,0),i}function h(e,t){var n=u(e),r=e.read_shift(4),i=e.read_shift(4),s=e.read_shift(2);if(65535==s)return 0===r&&3221225472===i?(n[1].t="e",n[1].v=15):0===r&&3489660928===i?(n[1].t="e",n[1].v=42):n[1].v=0,n;var a=32768&s;return s=(32767&s)-16446,n[1].v=(1-2*a)*(i*Math.pow(2,s+32)+r*Math.pow(2,s)),n}function f(e,t,n,r){var i=pb(14);if(i.write_shift(2,e),i.write_shift(1,n),i.write_shift(1,t),0==r)return i.write_shift(4,0),i.write_shift(4,0),i.write_shift(2,65535),i;var s,a=0,o=0,l=0;return r<0&&(a=1,r=-r),o=0|Math.log2(r),0==(2147483648&(l=(r/=Math.pow(2,o-31))>>>0))&&(++o,l=(r/=2)>>>0),r-=l,l|=2147483648,l>>>=0,s=(r*=Math.pow(2,32))>>>0,i.write_shift(4,s),i.write_shift(4,l),o+=16383+(a?32768:0),i.write_shift(2,o),i}function p(e,t){var n=u(e),r=e.read_shift(8,"f");return n[1].v=r,n}function m(e,t){return 0==e[e.l+t-1]?e.read_shift(t,"cstr"):""}function g(e,t){var n=pb(5+e.length);n.write_shift(2,14e3),n.write_shift(2,t);for(var r=0;r<e.length;++r){var i=e.charCodeAt(r);n[n.l++]=i>127?95:i}return n[n.l++]=0,n}var y={0:{n:"BOF",f:jx},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:function(e,t,n){var r={s:{c:0,r:0},e:{c:0,r:0}};return 8==t&&n.qpro?(r.s.c=e.read_shift(1),e.l++,r.s.r=e.read_shift(2),r.e.c=e.read_shift(1),e.l++,r.e.r=e.read_shift(2),r):(r.s.c=e.read_shift(2),r.s.r=e.read_shift(2),12==t&&n.qpro&&(e.l+=2),r.e.c=e.read_shift(2),r.e.r=e.read_shift(2),12==t&&n.qpro&&(e.l+=2),65535==r.s.c&&(r.s.c=r.e.c=r.s.r=r.e.r=0),r)}},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:function(e,t,r){var i=n(e,0,r);return i[1].v=e.read_shift(2,"i"),i}},14:{n:"NUMBER",f:function(e,t,r){var i=n(e,0,r);return i[1].v=e.read_shift(8,"f"),i}},15:{n:"LABEL",f:r},16:{n:"FORMULA",f:function(e,t,r){var i=e.l+t,s=n(e,0,r);if(s[1].v=e.read_shift(8,"f"),r.qpro)e.l=i;else{var a=e.read_shift(2);!function(e,t){hb(e,0);var n=[],r=0,i="",s="",a="",u="";for(;e.l<e.length;){var d=e[e.l++];switch(d){case 0:n.push(e.read_shift(8,"f"));break;case 1:s=o(t[0].c,e.read_shift(2),!0),i=o(t[0].r,e.read_shift(2),!1),n.push(s+i);break;case 2:var h=o(t[0].c,e.read_shift(2),!0),f=o(t[0].r,e.read_shift(2),!1);s=o(t[0].c,e.read_shift(2),!0),i=o(t[0].r,e.read_shift(2),!1),n.push(h+f+":"+s+i);break;case 3:if(e.l<e.length)return void console.error("WK1 premature formula end");break;case 4:n.push("("+n.pop()+")");break;case 5:n.push(e.read_shift(2));break;case 6:for(var p="";d=e[e.l++];)p+=String.fromCharCode(d);n.push('"'+p.replace(/"/g,'""')+'"');break;case 8:n.push("-"+n.pop());break;case 23:n.push("+"+n.pop());break;case 22:n.push("NOT("+n.pop()+")");break;case 20:case 21:u=n.pop(),a=n.pop(),n.push(["AND","OR"][d-20]+"("+a+","+u+")");break;default:if(d<32&&c[d])u=n.pop(),a=n.pop(),n.push(a+c[d]+u);else{if(!l[d])return d<=7?console.error("WK1 invalid opcode "+d.toString(16)):d<=24?console.error("WK1 unsupported op "+d.toString(16)):d<=30?console.error("WK1 invalid opcode "+d.toString(16)):d<=115?console.error("WK1 unsupported function opcode "+d.toString(16)):console.error("WK1 unrecognized opcode "+d.toString(16));if(69==(r=l[d][1])&&(r=e[e.l++]),r>n.length)return void console.error("WK1 bad formula parse 0x"+d.toString(16)+":|"+n.join("|")+"|");var m=n.slice(-r);n.length-=r,n.push(l[d][0]+"("+m.join(",")+")")}}}1==n.length?t[1].f=""+n[0]:console.error("WK1 bad formula parse |"+n.join("|")+"|")}(e.slice(e.l,e.l+a),s),e.l+=a}return s}},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:r},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:m},222:{n:"SHEETNAMELP",f:function(e,t){var n=e[e.l++];n>t-1&&(n=t-1);for(var r="";r.length<n;)r+=String.fromCharCode(e[e.l++]);return r}},65535:{n:""}},v={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:function(e,t){var n=u(e);return n[1].t="s",n[1].v=e.read_shift(t-4,"cstr"),n}},23:{n:"NUMBER17",f:h},24:{n:"NUMBER18",f:function(e,t){var n=u(e);n[1].v=e.read_shift(2);var r=n[1].v>>1;if(1&n[1].v)switch(7&r){case 0:r=5e3*(r>>3);break;case 1:r=500*(r>>3);break;case 2:r=(r>>3)/20;break;case 3:r=(r>>3)/200;break;case 4:r=(r>>3)/2e3;break;case 5:r=(r>>3)/2e4;break;case 6:r=(r>>3)/16;break;case 7:r=(r>>3)/64}return n[1].v=r,n}},25:{n:"FORMULA19",f:function(e,t){var n=h(e);return e.l+=t-14,n}},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:function(e,t){for(var n={},r=e.l+t;e.l<r;){var i=e.read_shift(2);if(14e3==i){for(n[i]=[0,""],n[i][0]=e.read_shift(2);e[e.l];)n[i][1]+=String.fromCharCode(e[e.l]),e.l++;e.l++}}return n}},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:function(e,t){var n=u(e),r=e.read_shift(4);return n[1].v=r>>6,n}},38:{n:"??"},39:{n:"NUMBER27",f:p},40:{n:"FORMULA28",f:function(e,t){var n=p(e);return e.l+=t-10,n}},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:m},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:function(e,t,n){if(n.qpro&&!(t<21)){var r=e.read_shift(1);return e.l+=17,e.l+=1,e.l+=2,[r,e.read_shift(t-21,"cstr")]}}},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:function(e,t){var n=t||{};if(+n.codepage>=0&&sy(+n.codepage),"string"==n.type)throw new Error("Cannot write WK1 to JS string");var r=mb(),o=Ib(e["!ref"]),l=Array.isArray(e),c=[];RE(r,0,function(e){var t=pb(2);return t.write_shift(2,e),t}(1030)),RE(r,6,function(e){var t=pb(8);return t.write_shift(2,e.s.c),t.write_shift(2,e.s.r),t.write_shift(2,e.e.c),t.write_shift(2,e.e.r),t}(o));for(var u=Math.min(o.e.r,8191),d=o.s.r;d<=u;++d)for(var h=Sb(d),f=o.s.c;f<=o.e.c;++f){d===o.s.r&&(c[f]=Eb(f));var p=c[f]+h,m=l?(e[d]||[])[f]:e[p];if(m&&"z"!=m.t)if("n"==m.t)(0|m.v)==m.v&&m.v>=-32768&&m.v<=32767?RE(r,13,s(d,f,m.v)):RE(r,14,a(d,f,m.v));else RE(r,15,i(d,f,Pb(m).slice(0,239)))}return RE(r,1),r.end()},book_to_wk3:function(e,t){var n=t||{};if(+n.codepage>=0&&sy(+n.codepage),"string"==n.type)throw new Error("Cannot write WK3 to JS string");var r=mb();RE(r,0,function(e){var t=pb(26);t.write_shift(2,4096),t.write_shift(2,4),t.write_shift(4,0);for(var n=0,r=0,i=0,s=0;s<e.SheetNames.length;++s){var a=e.SheetNames[s],o=e.Sheets[a];if(o&&o["!ref"]){++i;var l=_b(o["!ref"]);n<l.e.r&&(n=l.e.r),r<l.e.c&&(r=l.e.c)}}n>8191&&(n=8191);return t.write_shift(2,n),t.write_shift(1,i),t.write_shift(1,r),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(1,1),t.write_shift(1,2),t.write_shift(4,0),t.write_shift(4,0),t}(e));for(var i=0,s=0;i<e.SheetNames.length;++i)(e.Sheets[e.SheetNames[i]]||{})["!ref"]&&RE(r,27,g(e.SheetNames[i],s++));var a=0;for(i=0;i<e.SheetNames.length;++i){var o=e.Sheets[e.SheetNames[i]];if(o&&o["!ref"]){for(var l=Ib(o["!ref"]),c=Array.isArray(o),u=[],h=Math.min(l.e.r,8191),p=l.s.r;p<=h;++p)for(var m=Sb(p),y=l.s.c;y<=l.e.c;++y){p===l.s.r&&(u[y]=Eb(y));var v=u[y]+m,w=c?(o[p]||[])[y]:o[v];if(w&&"z"!=w.t)if("n"==w.t)RE(r,23,f(p,y,a,w.v));else RE(r,22,d(p,y,a,Pb(w).slice(0,239)))}++a}}return RE(r,1),r.end()},to_workbook:function(e,n){switch(n.type){case"base64":return t(vy(fy(e)),n);case"binary":return t(vy(e),n);case"buffer":case"array":return t(e,n)}throw"Unsupported type "+n.type}}}();var fS=/^\s|\s$|[\t\n\r]/;function pS(e,t){if(!t.bookSST)return"";var n=[Hv];n[n.length]=cw("sst",null,{xmlns:Ew[0],count:e.Count,uniqueCount:e.Unique});for(var r=0;r!=e.length;++r)if(null!=e[r]){var i=e[r],s="<si>";i.r?s+=i.r:(s+="<t",i.t||(i.t=""),i.t.match(fS)&&(s+=' xml:space="preserve"'),s+=">"+Yv(i.t)+"</t>"),s+="</si>",n[n.length]=s}return n.length>2&&(n[n.length]="</sst>",n[1]=n[1].replace("/>",">")),n.join("")}var mS=function(e,t){var n=!1;return null==t&&(n=!0,t=pb(15+4*e.t.length)),t.write_shift(1,0),Fb(e.t,t),n?t.slice(0,t.l):t};function gS(e){var t=mb();gb(t,159,function(e,t){return t||(t=pb(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}(e));for(var n=0;n<e.length;++n)gb(t,19,mS(e[n]));return gb(t,160),t.end()}function yS(e){if("undefined"!==typeof ly)return ly.utils.encode(ty,e);for(var t=[],n=e.split(""),r=0;r<n.length;++r)t[r]=n[r].charCodeAt(0);return t}function vS(e){var t,n,r=0,i=yS(e),s=i.length+1;for((t=gy(s))[0]=i.length,n=1;n!=s;++n)t[n]=i[n-1];for(n=s-1;n>=0;--n)r=((0===(16384&r)?0:1)|r<<1&32767)^t[n];return 52811^r}var wS=function(){function e(e,n){switch(n.type){case"base64":return t(fy(e),n);case"binary":return t(e,n);case"buffer":return t(py&&Buffer.isBuffer(e)?e.toString("binary"):by(e),n);case"array":return t(Lv(e),n)}throw new Error("Unrecognized type "+n.type)}function t(e,t){var n=(t||{}).dense?[]:{},r=e.match(/\\trowd.*?\\row\b/g);if(!r.length)throw new Error("RTF missing table");var i={s:{c:0,r:0},e:{c:0,r:r.length-1}};return r.forEach(function(e,t){Array.isArray(n)&&(n[t]=[]);for(var r,s=/\\\w+\b/g,a=0,o=-1;r=s.exec(e);){if("\\cell"===r[0]){var l=e.slice(a,s.lastIndex-r[0].length);if(" "==l[0]&&(l=l.slice(1)),++o,l.length){var c={v:l,t:"s"};Array.isArray(n)?n[t][o]=c:n[Cb({r:t,c:o})]=c}}a=s.lastIndex}o>i.e.c&&(i.e.c=o)}),n["!ref"]=Tb(i),n}return{to_workbook:function(t,n){return Rb(e(t,n),n)},to_sheet:e,from_sheet:function(e){for(var t,n=["{\\rtf1\\ansi"],r=Ib(e["!ref"]),i=Array.isArray(e),s=r.s.r;s<=r.e.r;++s){n.push("\\trowd\\trautofit1");for(var a=r.s.c;a<=r.e.c;++a)n.push("\\cellx"+(a+1));for(n.push("\\pard\\intbl"),a=r.s.c;a<=r.e.c;++a){var o=Cb({r:s,c:a});(t=i?(e[s]||[])[a]:e[o])&&(null!=t.v||t.f&&!t.F)&&(n.push(" "+(t.w||(Pb(t),t.w))),n.push("\\cell"))}n.push("\\pard\\intbl\\row")}return n.join("")+"}"}}}();function bS(e){for(var t=0,n=1;3!=t;++t)n=256*n+(e[t]>255?255:e[t]<0?0:e[t]);return n.toString(16).toUpperCase().slice(1)}var xS=6;function SS(e){return Math.floor((e+Math.round(128/xS)/256)*xS)}function AS(e){return Math.floor((e-5)/xS*100+.5)/100}function ES(e){return Math.round((e*xS+5)/xS*256)/256}function NS(e){e.width?(e.wpx=SS(e.width),e.wch=AS(e.wpx),e.MDW=xS):e.wpx?(e.wch=AS(e.wpx),e.width=ES(e.wch),e.MDW=xS):"number"==typeof e.wch&&(e.width=ES(e.wch),e.wpx=SS(e.width),e.MDW=xS),e.customWidth&&delete e.customWidth}var CS=96;function _S(e){return 96*e/CS}function TS(e){return e*CS/96}function IS(e,t){var n,r=[Hv,cw("styleSheet",null,{xmlns:Ew[0],"xmlns:vt":xw})];return e.SSF&&null!=(n=function(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var r=n[0];r<=n[1];++r)null!=e[r]&&(t[t.length]=cw("numFmt",null,{numFmtId:r,formatCode:Yv(e[r])}))}),1===t.length?"":(t[t.length]="</numFmts>",t[0]=cw("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}(e.SSF))&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=function(e){var t=[];return t[t.length]=cw("cellXfs",null),e.forEach(function(e){t[t.length]=cw("xf",null,e)}),t[t.length]="</cellXfs>",2===t.length?"":(t[0]=cw("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function kS(e,t,n){n||(n=pb(6+4*t.length)),n.write_shift(2,e),Fb(t,n);var r=n.length>n.l?n.slice(0,n.l):n;return null==n.l&&(n.l=n.length),r}function PS(e,t){t||(t=pb(153)),t.write_shift(2,20*e.sz),function(e,t){t||(t=pb(2));var n=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);t.write_shift(1,n),t.write_shift(1,0)}(e,t),t.write_shift(2,e.bold?700:400);var n=0;"superscript"==e.vertAlign?n=1:"subscript"==e.vertAlign&&(n=2),t.write_shift(2,n),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),ax(e.color,t);var r=0;return"major"==e.scheme&&(r=1),"minor"==e.scheme&&(r=2),t.write_shift(1,r),Fb(e.name,t),t.length>t.l?t.slice(0,t.l):t}var RS,DS=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],OS=fb;function LS(e,t){t||(t=pb(84)),RS||(RS=Av(DS));var n=RS[e.patternType];null==n&&(n=40),t.write_shift(4,n);var r=0;if(40!=n)for(ax({auto:1},t),ax({auto:1},t);r<12;++r)t.write_shift(4,0);else{for(;r<4;++r)t.write_shift(4,0);for(;r<12;++r)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function MS(e,t,n){n||(n=pb(16)),n.write_shift(2,t||0),n.write_shift(2,e.numFmtId||0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(1,0),n.write_shift(1,0);return n.write_shift(1,0),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(1,0),n}function FS(e,t){return t||(t=pb(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var jS=fb;function BS(e){var t;gb(e,613,Lb(1)),gb(e,46,(t||(t=pb(51)),t.write_shift(1,0),FS(0,t),FS(0,t),FS(0,t),FS(0,t),FS(0,t),t.length>t.l?t.slice(0,t.l):t)),gb(e,614)}function US(e){var t,n;gb(e,619,Lb(1)),gb(e,48,(t={xfId:0,builtinId:0,name:"Normal"},n||(n=pb(52)),n.write_shift(4,t.xfId),n.write_shift(2,1),n.write_shift(1,+t.builtinId),n.write_shift(1,0),Xb(t.name||"",n),n.length>n.l?n.slice(0,n.l):n)),gb(e,620)}function zS(e){gb(e,508,function(e,t,n){var r=pb(2052);return r.write_shift(4,e),Xb(t,r),Xb(n,r),r.length>r.l?r.slice(0,r.l):r}(0,"TableStyleMedium9","PivotStyleMedium4")),gb(e,509)}function VS(e,t){var n=mb();return gb(n,278),function(e,t){if(t){var n=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(e){for(var r=e[0];r<=e[1];++r)null!=t[r]&&++n}),0!=n&&(gb(e,615,Lb(n)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var r=n[0];r<=n[1];++r)null!=t[r]&&gb(e,44,kS(r,t[r]))}),gb(e,616))}}(n,e.SSF),function(e){gb(e,611,Lb(1)),gb(e,43,PS({sz:12,color:{theme:1},name:"Calibri",family:2,scheme:"minor"})),gb(e,612)}(n),function(e){gb(e,603,Lb(2)),gb(e,45,LS({patternType:"none"})),gb(e,45,LS({patternType:"gray125"})),gb(e,604)}(n),BS(n),function(e){gb(e,626,Lb(1)),gb(e,47,MS({numFmtId:0,fontId:0,fillId:0,borderId:0},65535)),gb(e,627)}(n),function(e,t){gb(e,617,Lb(t.length)),t.forEach(function(t){gb(e,47,MS(t,0))}),gb(e,618)}(n,t.cellXfs),US(n),function(e){gb(e,505,Lb(0)),gb(e,506)}(n),zS(n),gb(n,279),n.end()}function HS(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&"string"==typeof e.raw)return e.raw;var n=[Hv];return n[n.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',n[n.length]="<a:themeElements>",n[n.length]='<a:clrScheme name="Office">',n[n.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',n[n.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',n[n.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',n[n.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',n[n.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',n[n.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',n[n.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',n[n.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',n[n.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',n[n.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',n[n.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',n[n.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',n[n.length]="</a:clrScheme>",n[n.length]='<a:fontScheme name="Office">',n[n.length]="<a:majorFont>",n[n.length]='<a:latin typeface="Cambria"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/>',n[n.length]='<a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/>',n[n.length]='<a:font script="Hans" typeface="\u5b8b\u4f53"/>',n[n.length]='<a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/>',n[n.length]='<a:font script="Arab" typeface="Times New Roman"/>',n[n.length]='<a:font script="Hebr" typeface="Times New Roman"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="MoolBoran"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Times New Roman"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:majorFont>",n[n.length]="<a:minorFont>",n[n.length]='<a:latin typeface="Calibri"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/>',n[n.length]='<a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/>',n[n.length]='<a:font script="Hans" typeface="\u5b8b\u4f53"/>',n[n.length]='<a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/>',n[n.length]='<a:font script="Arab" typeface="Arial"/>',n[n.length]='<a:font script="Hebr" typeface="Arial"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="DaunPenh"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Arial"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:minorFont>",n[n.length]="</a:fontScheme>",n[n.length]='<a:fmtScheme name="Office">',n[n.length]="<a:fillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="1"/>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="0"/>',n[n.length]="</a:gradFill>",n[n.length]="</a:fillStyleLst>",n[n.length]="<a:lnStyleLst>",n[n.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]="</a:lnStyleLst>",n[n.length]="<a:effectStyleLst>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',n[n.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',n[n.length]="</a:effectStyle>",n[n.length]="</a:effectStyleLst>",n[n.length]="<a:bgFillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]="</a:bgFillStyleLst>",n[n.length]="</a:fmtScheme>",n[n.length]="</a:themeElements>",n[n.length]="<a:objectDefaults>",n[n.length]="<a:spDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',n[n.length]="</a:spDef>",n[n.length]="<a:lnDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',n[n.length]="</a:lnDef>",n[n.length]="</a:objectDefaults>",n[n.length]="<a:extraClrSchemeLst/>",n[n.length]="</a:theme>",n.join("")}function WS(){var e=mb();return gb(e,332),gb(e,334,Lb(1)),gb(e,335,function(e){var t=pb(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),Fb(e.name,t),t.slice(0,t.l)}({name:"XLDAPR",version:12e4,flags:3496657072})),gb(e,336),gb(e,339,function(e,t){var n=pb(8+2*t.length);return n.write_shift(4,e),Fb(t,n),n.slice(0,n.l)}(1,"XLDAPR")),gb(e,52),gb(e,35,Lb(514)),gb(e,4096,Lb(0)),gb(e,4097,Bx(1)),gb(e,36),gb(e,53),gb(e,340),gb(e,337,function(e,t){var n=pb(8);return n.write_shift(4,e),n.write_shift(4,t?1:0),n}(1,!0)),gb(e,51,function(e){var t=pb(4+8*e.length);t.write_shift(4,e.length);for(var n=0;n<e.length;++n)t.write_shift(4,e[n][0]),t.write_shift(4,e[n][1]);return t}([[1,0]])),gb(e,338),gb(e,333),e.end()}function qS(){var e=[Hv];return e.push('<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">\n  <metadataTypes count="1">\n    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>\n  </metadataTypes>\n  <futureMetadata name="XLDAPR" count="1">\n    <bk>\n      <extLst>\n        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">\n          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>\n        </ext>\n      </extLst>\n    </bk>\n  </futureMetadata>\n  <cellMetadata count="1">\n    <bk>\n      <rc t="1" v="0"/>\n    </bk>\n  </cellMetadata>\n</metadata>'),e.join("")}var GS=1024;function KS(e,t){for(var n=[21600,21600],r=["m0,0l0",n[1],n[0],n[1],n[0],"0xe"].join(","),i=[cw("xml",null,{"xmlns:v":kw,"xmlns:o":Nw,"xmlns:x":Cw,"xmlns:mv":Iw}).replace(/\/>/,">"),cw("o:shapelayout",cw("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),cw("v:shapetype",[cw("v:stroke",null,{joinstyle:"miter"}),cw("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:n.join(","),path:r})];GS<1e3*e;)GS+=1e3;return t.forEach(function(e){var t=Nb(e[0]),n={color2:"#BEFF82",type:"gradient"};"gradient"==n.type&&(n.angle="-180");var r="gradient"==n.type?cw("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,s=cw("v:fill",r,n);++GS,i=i.concat(["<v:shape"+lw({id:"_x0000_s"+GS,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(e[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",s,cw("v:shadow",null,{on:"t",obscured:"t"}),cw("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",ow("x:Anchor",[t.c+1,0,t.r+1,0,t.c+3,20,t.r+5,20].join(",")),ow("x:AutoFill","False"),ow("x:Row",String(t.r)),ow("x:Column",String(t.c)),e[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),i.push("</xml>"),i.join("")}function YS(e){var t=[Hv,cw("comments",null,{xmlns:Ew[0]})],n=[];return t.push("<authors>"),e.forEach(function(e){e[1].forEach(function(e){var r=Yv(e.a);-1==n.indexOf(r)&&(n.push(r),t.push("<author>"+r+"</author>")),e.T&&e.ID&&-1==n.indexOf("tc="+e.ID)&&(n.push("tc="+e.ID),t.push("<author>tc="+e.ID+"</author>"))})}),0==n.length&&(n.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(e){var r=0,i=[];if(e[1][0]&&e[1][0].T&&e[1][0].ID?r=n.indexOf("tc="+e[1][0].ID):e[1].forEach(function(e){e.a&&(r=n.indexOf(Yv(e.a))),i.push(e.t||"")}),t.push('<comment ref="'+e[0]+'" authorId="'+r+'"><text>'),i.length<=1)t.push(ow("t",Yv(i[0]||"")));else{for(var s="Comment:\n    "+i[0]+"\n",a=1;a<i.length;++a)s+="Reply:\n    "+i[a]+"\n";t.push(ow("t",Yv(s)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function XS(e,t,n){var r=[Hv,cw("ThreadedComments",null,{xmlns:gw}).replace(/[\/]>/,">")];return e.forEach(function(e){var i="";(e[1]||[]).forEach(function(s,a){if(s.T){s.a&&-1==t.indexOf(s.a)&&t.push(s.a);var o={ref:e[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+n.tcid++).slice(-12)+"}"};0==a?i=o.id:o.parentId=i,s.ID=o.id,s.a&&(o.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(s.a)).slice(-12)+"}"),r.push(cw("threadedComment",ow("text",s.t||""),o))}else delete s.ID})}),r.push("</ThreadedComments>"),r.join("")}var QS=Mb;function JS(e){var t=mb(),n=[];return gb(t,628),gb(t,630),e.forEach(function(e){e[1].forEach(function(e){n.indexOf(e.a)>-1||(n.push(e.a.slice(0,54)),gb(t,632,function(e){return Fb(e.slice(0,54))}(e.a)))})}),gb(t,631),gb(t,633),e.forEach(function(e){e[1].forEach(function(r){r.iauthor=n.indexOf(r.a);var i={s:Nb(e[0]),e:Nb(e[0])};gb(t,635,function(e,t){return null==t&&(t=pb(36)),t.write_shift(4,e[1].iauthor),rx(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}([i,r])),r.t&&r.t.length>0&&gb(t,637,zb(r)),gb(t,636),delete r.iauthor})}),gb(t,634),gb(t,629),t.end()}var ZS=["xlsb","xlsm","xlam","biff8","xla"];var $S=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function n(e,n,r,i){var s=!1,a=!1;0==r.length?a=!0:"["==r.charAt(0)&&(a=!0,r=r.slice(1,-1)),0==i.length?s=!0:"["==i.charAt(0)&&(s=!0,i=i.slice(1,-1));var o=r.length>0?0|parseInt(r,10):0,l=i.length>0?0|parseInt(i,10):0;return s?l+=t.c:--l,a?o+=t.r:--o,n+(s?"":"$")+Eb(l)+(a?"":"$")+Sb(o)}return function(r,i){return t=i,r.replace(e,n)}}(),eA=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,tA=function(){return function(e,t){return e.replace(eA,function(e,n,r,i,s,a){var o=Ab(i)-(r?0:t.c),l=xb(a)-(s?0:t.r);return n+"R"+(0==l?"":s?l+1:"["+l+"]")+"C"+(0==o?"":r?o+1:"["+o+"]")})}}();function nA(e,t){return e.replace(eA,function(e,n,r,i,s,a){return n+("$"==r?r+i:Eb(Ab(i)+t.c))+("$"==s?s+a:Sb(xb(a)+t.r))})}function rA(e){e.l+=1}function iA(e,t){var n=e.read_shift(1==t?1:2);return[16383&n,n>>14&1,n>>15&1]}function sA(e,t,n){var r=2;if(n){if(n.biff>=2&&n.biff<=5)return aA(e);12==n.biff&&(r=4)}var i=e.read_shift(r),s=e.read_shift(r),a=iA(e,2),o=iA(e,2);return{s:{r:i,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function aA(e){var t=iA(e,2),n=iA(e,2),r=e.read_shift(1),i=e.read_shift(1);return{s:{r:t[0],c:r,cRel:t[1],rRel:t[2]},e:{r:n[0],c:i,cRel:n[1],rRel:n[2]}}}function oA(e,t,n){if(n&&n.biff>=2&&n.biff<=5)return function(e){var t=iA(e,2),n=e.read_shift(1);return{r:t[0],c:n,cRel:t[1],rRel:t[2]}}(e);var r=e.read_shift(n&&12==n.biff?4:2),i=iA(e,2);return{r:r,c:i[0],cRel:i[1],rRel:i[2]}}function lA(e){var t=e.read_shift(2),n=e.read_shift(2);return{r:t,c:255&n,fQuoted:!!(16384&n),cRel:n>>15,rRel:n>>15}}function cA(e){var t=1&e[e.l+1];return e.l+=4,[t,1]}function uA(e){return[e.read_shift(1),e.read_shift(1)]}function dA(e,t){var n=[e.read_shift(1)];if(12==t)switch(n[0]){case 2:n[0]=4;break;case 4:n[0]=16;break;case 0:n[0]=1;break;case 1:n[0]=2}switch(n[0]){case 4:n[1]=Mx(e,1)?"TRUE":"FALSE",12!=t&&(e.l+=7);break;case 37:case 16:n[1]=hx[e[e.l]],e.l+=12==t?4:8;break;case 0:e.l+=8;break;case 1:n[1]=ix(e);break;case 2:n[1]=qx(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+n[0])}return n}function hA(e,t,n){for(var r=e.read_shift(12==n.biff?4:2),i=[],s=0;s!=r;++s)i.push((12==n.biff?nx:Jx)(e,8));return i}function fA(e,t,n){var r=0,i=0;12==n.biff?(r=e.read_shift(4),i=e.read_shift(4)):(i=1+e.read_shift(1),r=1+e.read_shift(2)),n.biff>=2&&n.biff<8&&(--r,0==--i&&(i=256));for(var s=0,a=[];s!=r&&(a[s]=[]);++s)for(var o=0;o!=i;++o)a[s][o]=dA(e,n.biff);return a}function pA(e,t,n){return e.l+=2,[lA(e)]}function mA(e){return e.l+=6,[]}function gA(e){return e.l+=2,[jx(e),1&e.read_shift(2)]}var yA=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];var vA={1:{n:"PtgExp",f:function(e,t,n){return e.l++,n&&12==n.biff?[e.read_shift(4,"i"),0]:[e.read_shift(2),e.read_shift(n&&2==n.biff?1:2)]}},2:{n:"PtgTbl",f:fb},3:{n:"PtgAdd",f:rA},4:{n:"PtgSub",f:rA},5:{n:"PtgMul",f:rA},6:{n:"PtgDiv",f:rA},7:{n:"PtgPower",f:rA},8:{n:"PtgConcat",f:rA},9:{n:"PtgLt",f:rA},10:{n:"PtgLe",f:rA},11:{n:"PtgEq",f:rA},12:{n:"PtgGe",f:rA},13:{n:"PtgGt",f:rA},14:{n:"PtgNe",f:rA},15:{n:"PtgIsect",f:rA},16:{n:"PtgUnion",f:rA},17:{n:"PtgRange",f:rA},18:{n:"PtgUplus",f:rA},19:{n:"PtgUminus",f:rA},20:{n:"PtgPercent",f:rA},21:{n:"PtgParen",f:rA},22:{n:"PtgMissArg",f:rA},23:{n:"PtgStr",f:function(e,t,n){return e.l++,zx(e,0,n)}},26:{n:"PtgSheet",f:function(e,t,n){return e.l+=5,e.l+=2,e.l+=2==n.biff?1:4,["PTGSHEET"]}},27:{n:"PtgEndSheet",f:function(e,t,n){return e.l+=2==n.biff?4:5,["PTGENDSHEET"]}},28:{n:"PtgErr",f:function(e){return e.l++,hx[e.read_shift(1)]}},29:{n:"PtgBool",f:function(e){return e.l++,0!==e.read_shift(1)}},30:{n:"PtgInt",f:function(e){return e.l++,e.read_shift(2)}},31:{n:"PtgNum",f:function(e){return e.l++,ix(e)}},32:{n:"PtgArray",f:function(e,t,n){var r=(96&e[e.l++])>>5;return e.l+=2==n.biff?6:12==n.biff?14:7,[r]}},33:{n:"PtgFunc",f:function(e,t,n){var r=(96&e[e.l])>>5;e.l+=1;var i=e.read_shift(n&&n.biff<=3?1:2);return[FA[i],MA[i],r]}},34:{n:"PtgFuncVar",f:function(e,t,n){var r=e[e.l++],i=e.read_shift(1),s=n&&n.biff<=3?[88==r?-1:0,e.read_shift(1)]:function(e){return[e[e.l+1]>>7,32767&e.read_shift(2)]}(e);return[i,(0===s[0]?MA:LA)[s[1]]]}},35:{n:"PtgName",f:function(e,t,n){var r=e.read_shift(1)>>>5&3,i=!n||n.biff>=8?4:2,s=e.read_shift(i);switch(n.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12}return[r,0,s]}},36:{n:"PtgRef",f:function(e,t,n){var r=(96&e[e.l])>>5;return e.l+=1,[r,oA(e,0,n)]}},37:{n:"PtgArea",f:function(e,t,n){return[(96&e[e.l++])>>5,sA(e,n.biff>=2&&n.biff,n)]}},38:{n:"PtgMemArea",f:function(e,t,n){var r=e.read_shift(1)>>>5&3;return e.l+=n&&2==n.biff?3:4,[r,e.read_shift(n&&2==n.biff?1:2)]}},39:{n:"PtgMemErr",f:fb},40:{n:"PtgMemNoMem",f:fb},41:{n:"PtgMemFunc",f:function(e,t,n){return[e.read_shift(1)>>>5&3,e.read_shift(n&&2==n.biff?1:2)]}},42:{n:"PtgRefErr",f:function(e,t,n){var r=e.read_shift(1)>>>5&3;return e.l+=4,n.biff<8&&e.l--,12==n.biff&&(e.l+=2),[r]}},43:{n:"PtgAreaErr",f:function(e,t,n){var r=(96&e[e.l++])>>5;return e.l+=n&&n.biff>8?12:n.biff<8?6:8,[r]}},44:{n:"PtgRefN",f:function(e,t,n){var r=(96&e[e.l])>>5;e.l+=1;var i=function(e,t,n){var r=n&&n.biff?n.biff:8;if(r>=2&&r<=5)return function(e){var t=e.read_shift(2),n=e.read_shift(1),r=(32768&t)>>15,i=(16384&t)>>14;return t&=16383,1==r&&t>=8192&&(t-=16384),1==i&&n>=128&&(n-=256),{r:t,c:n,cRel:i,rRel:r}}(e);var i=e.read_shift(r>=12?4:2),s=e.read_shift(2),a=(16384&s)>>14,o=(32768&s)>>15;if(s&=16383,1==o)for(;i>524287;)i-=1048576;if(1==a)for(;s>8191;)s-=16384;return{r:i,c:s,cRel:a,rRel:o}}(e,0,n);return[r,i]}},45:{n:"PtgAreaN",f:function(e,t,n){var r=(96&e[e.l++])>>5,i=function(e,t,n){if(n.biff<8)return aA(e);var r=e.read_shift(12==n.biff?4:2),i=e.read_shift(12==n.biff?4:2),s=iA(e,2),a=iA(e,2);return{s:{r:r,c:s[0],cRel:s[1],rRel:s[2]},e:{r:i,c:a[0],cRel:a[1],rRel:a[2]}}}(e,0,n);return[r,i]}},46:{n:"PtgMemAreaN",f:function(e){return[e.read_shift(1)>>>5&3,e.read_shift(2)]}},47:{n:"PtgMemNoMemN",f:function(e){return[e.read_shift(1)>>>5&3,e.read_shift(2)]}},57:{n:"PtgNameX",f:function(e,t,n){return 5==n.biff?function(e){var t=e.read_shift(1)>>>5&3,n=e.read_shift(2,"i");e.l+=8;var r=e.read_shift(2);return e.l+=12,[t,n,r]}(e):[e.read_shift(1)>>>5&3,e.read_shift(2),e.read_shift(4)]}},58:{n:"PtgRef3d",f:function(e,t,n){var r=(96&e[e.l])>>5;e.l+=1;var i=e.read_shift(2);return n&&5==n.biff&&(e.l+=12),[r,i,oA(e,0,n)]}},59:{n:"PtgArea3d",f:function(e,t,n){var r=(96&e[e.l++])>>5,i=e.read_shift(2,"i");if(n)switch(n.biff){case 5:e.l+=12;break;case 12:0}return[r,i,sA(e,0,n)]}},60:{n:"PtgRefErr3d",f:function(e,t,n){var r=(96&e[e.l++])>>5,i=e.read_shift(2),s=4;if(n)switch(n.biff){case 5:s=15;break;case 12:s=6}return e.l+=s,[r,i]}},61:{n:"PtgAreaErr3d",f:function(e,t,n){var r=(96&e[e.l++])>>5,i=e.read_shift(2),s=8;if(n)switch(n.biff){case 5:e.l+=12,s=6;break;case 12:s=12}return e.l+=s,[r,i]}},255:{}},wA={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},bA={1:{n:"PtgElfLel",f:gA},2:{n:"PtgElfRw",f:pA},3:{n:"PtgElfCol",f:pA},6:{n:"PtgElfRwV",f:pA},7:{n:"PtgElfColV",f:pA},10:{n:"PtgElfRadical",f:pA},11:{n:"PtgElfRadicalS",f:mA},13:{n:"PtgElfColS",f:mA},15:{n:"PtgElfColSV",f:mA},16:{n:"PtgElfRadicalLel",f:gA},25:{n:"PtgList",f:function(e){e.l+=2;var t=e.read_shift(2),n=e.read_shift(2),r=e.read_shift(4),i=e.read_shift(2),s=e.read_shift(2);return{ixti:t,coltype:3&n,rt:yA[n>>2&31],idx:r,c:i,C:s}}},29:{n:"PtgSxName",f:function(e){return e.l+=2,[e.read_shift(4)]}},255:{}},xA={0:{n:"PtgAttrNoop",f:function(e){return e.l+=4,[0,0]}},1:{n:"PtgAttrSemi",f:function(e,t,n){var r=255&e[e.l+1]?1:0;return e.l+=n&&2==n.biff?3:4,[r]}},2:{n:"PtgAttrIf",f:function(e,t,n){var r=255&e[e.l+1]?1:0;return e.l+=2,[r,e.read_shift(n&&2==n.biff?1:2)]}},4:{n:"PtgAttrChoose",f:function(e,t,n){e.l+=2;for(var r=e.read_shift(n&&2==n.biff?1:2),i=[],s=0;s<=r;++s)i.push(e.read_shift(n&&2==n.biff?1:2));return i}},8:{n:"PtgAttrGoto",f:function(e,t,n){var r=255&e[e.l+1]?1:0;return e.l+=2,[r,e.read_shift(n&&2==n.biff?1:2)]}},16:{n:"PtgAttrSum",f:function(e,t,n){e.l+=n&&2==n.biff?3:4}},32:{n:"PtgAttrBaxcel",f:cA},33:{n:"PtgAttrBaxcel",f:cA},64:{n:"PtgAttrSpace",f:function(e){return e.read_shift(2),uA(e)}},65:{n:"PtgAttrSpaceSemi",f:function(e){return e.read_shift(2),uA(e)}},128:{n:"PtgAttrIfError",f:function(e){var t=255&e[e.l+1]?1:0;return e.l+=2,[t,e.read_shift(2)]}},255:{}};function SA(e,t,n,r){if(r.biff<8)return fb(e,t);for(var i=e.l+t,s=[],a=0;a!==n.length;++a)switch(n[a][0]){case"PtgArray":n[a][1]=fA(e,0,r),s.push(n[a][1]);break;case"PtgMemArea":n[a][2]=hA(e,n[a][1],r),s.push(n[a][2]);break;case"PtgExp":r&&12==r.biff&&(n[a][1][1]=e.read_shift(4),s.push(n[a][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+n[a][0]}return 0!==(t=i-e.l)&&s.push(fb(e,t)),s}function AA(e,t,n){for(var r,i,s=e.l+t,a=[];s!=e.l;)t=s-e.l,i=e[e.l],r=vA[i]||vA[wA[i]],24!==i&&25!==i||(r=(24===i?bA:xA)[e[e.l+1]]),r&&r.f?a.push([r.n,r.f(e,t,n)]):fb(e,t);return a}function EA(e){for(var t=[],n=0;n<e.length;++n){for(var r=e[n],i=[],s=0;s<r.length;++s){var a=r[s];if(a)if(2===a[0])i.push('"'+a[1].replace(/"/g,'""')+'"');else i.push(a[1]);else i.push("")}t.push(i.join(","))}return t.join(";")}var NA={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function CA(e,t,n){if(!e)return"SH33TJSERR0";if(n.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var r=e.XTI[t];if(n.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),0==t?"":e.XTI[t-1];if(!r)return"SH33TJSERR1";var i="";if(n.biff>8)switch(e[r[0]][0]){case 357:return i=-1==r[1]?"#REF":e.SheetNames[r[1]],r[1]==r[2]?i:i+":"+e.SheetNames[r[2]];case 358:return null!=n.SID?e.SheetNames[n.SID]:"SH33TJSSAME"+e[r[0]][0];default:return"SH33TJSSRC"+e[r[0]][0]}switch(e[r[0]][0][0]){case 1025:return i=-1==r[1]?"#REF":e.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?i:i+":"+e.SheetNames[r[2]];case 14849:return e[r[0]].slice(1).map(function(e){return e.Name}).join(";;");default:return e[r[0]][0][3]?(i=-1==r[1]?"#REF":e[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?i:i+":"+e[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function _A(e,t,n){var r=CA(e,t,n);return"#REF"==r?r:function(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}(r,n)}function TA(e,t,n,r,i){var s,a,o,l,c=i&&i.biff||8,u={s:{c:0,r:0},e:{c:0,r:0}},d=[],h=0,f=0,p="";if(!e[0]||!e[0][0])return"";for(var m=-1,g="",y=0,v=e[0].length;y<v;++y){var w=e[0][y];switch(w[0]){case"PtgUminus":d.push("-"+d.pop());break;case"PtgUplus":d.push("+"+d.pop());break;case"PtgPercent":d.push(d.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(s=d.pop(),a=d.pop(),m>=0){switch(e[0][m][1][0]){case 0:g=Fv(" ",e[0][m][1][1]);break;case 1:g=Fv("\r",e[0][m][1][1]);break;default:if(g="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][m][1][0])}a+=g,m=-1}d.push(a+NA[w[0]]+s);break;case"PtgIsect":s=d.pop(),a=d.pop(),d.push(a+" "+s);break;case"PtgUnion":s=d.pop(),a=d.pop(),d.push(a+","+s);break;case"PtgRange":s=d.pop(),a=d.pop(),d.push(a+":"+s);break;case"PtgAttrChoose":case"PtgAttrGoto":case"PtgAttrIf":case"PtgAttrIfError":case"PtgAttrBaxcel":case"PtgAttrSemi":case"PtgMemArea":case"PtgTbl":case"PtgMemErr":case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":case"PtgMemFunc":case"PtgMemNoMem":break;case"PtgRef":o=yb(w[1][1],u,i),d.push(wb(o,c));break;case"PtgRefN":o=n?yb(w[1][1],n,i):w[1][1],d.push(wb(o,c));break;case"PtgRef3d":h=w[1][1],o=yb(w[1][2],u,i);p=_A(r,h,i);d.push(p+"!"+wb(o,c));break;case"PtgFunc":case"PtgFuncVar":var b=w[1][0],x=w[1][1];b||(b=0);var S=0==(b&=127)?[]:d.slice(-b);d.length-=b,"User"===x&&(x=S.shift()),d.push(x+"("+S.join(",")+")");break;case"PtgBool":d.push(w[1]?"TRUE":"FALSE");break;case"PtgInt":case"PtgErr":d.push(w[1]);break;case"PtgNum":d.push(String(w[1]));break;case"PtgStr":d.push('"'+w[1].replace(/"/g,'""')+'"');break;case"PtgAreaN":l=vb(w[1][1],n?{s:n}:u,i),d.push(bb(l,i));break;case"PtgArea":l=vb(w[1][1],u,i),d.push(bb(l,i));break;case"PtgArea3d":h=w[1][1],l=w[1][2],p=_A(r,h,i),d.push(p+"!"+bb(l,i));break;case"PtgAttrSum":d.push("SUM("+d.pop()+")");break;case"PtgName":f=w[1][2];var A=(r.names||[])[f-1]||(r[0]||[])[f],E=A?A.Name:"SH33TJSNAME"+String(f);E&&"_xlfn."==E.slice(0,6)&&!i.xlfn&&(E=E.slice(6)),d.push(E);break;case"PtgNameX":var N,C=w[1][1];if(f=w[1][2],!(i.biff<=5)){var _="";if(14849==((r[C]||[])[0]||[])[0]||(1025==((r[C]||[])[0]||[])[0]?r[C][f]&&r[C][f].itab>0&&(_=r.SheetNames[r[C][f].itab-1]+"!"):_=r.SheetNames[f-1]+"!"),r[C]&&r[C][f])_+=r[C][f].Name;else if(r[0]&&r[0][f])_+=r[0][f].Name;else{var T=(CA(r,C,i)||"").split(";;");T[f-1]?_=T[f-1]:_+="SH33TJSERRX"}d.push(_);break}C<0&&(C=-C),r[C]&&(N=r[C][f]),N||(N={Name:"SH33TJSERRY"}),d.push(N.Name);break;case"PtgParen":var I="(",k=")";if(m>=0){switch(g="",e[0][m][1][0]){case 2:I=Fv(" ",e[0][m][1][1])+I;break;case 3:I=Fv("\r",e[0][m][1][1])+I;break;case 4:k=Fv(" ",e[0][m][1][1])+k;break;case 5:k=Fv("\r",e[0][m][1][1])+k;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][m][1][0])}m=-1}d.push(I+d.pop()+k);break;case"PtgRefErr":case"PtgRefErr3d":case"PtgAreaErr":case"PtgAreaErr3d":d.push("#REF!");break;case"PtgExp":o={c:w[1][1],r:w[1][0]};var P={c:n.c,r:n.r};if(r.sharedf[Cb(o)]){var R=r.sharedf[Cb(o)];d.push(TA(R,u,P,r,i))}else{var D=!1;for(s=0;s!=r.arrayf.length;++s)if(a=r.arrayf[s],!(o.c<a[0].s.c||o.c>a[0].e.c)&&!(o.r<a[0].s.r||o.r>a[0].e.r)){d.push(TA(a[1],u,P,r,i)),D=!0;break}D||d.push(w[1])}break;case"PtgArray":d.push("{"+EA(w[1])+"}");break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":m=y;break;case"PtgMissArg":d.push("");break;case"PtgList":d.push("Table"+w[1].idx+"[#"+w[1].rt+"]");break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");default:throw new Error("Unrecognized Formula Token: "+String(w))}if(3!=i.biff&&m>=0&&-1==["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"].indexOf(e[0][y][0])){var O=!0;switch((w=e[0][m])[1][0]){case 4:O=!1;case 0:g=Fv(" ",w[1][1]);break;case 5:O=!1;case 1:g=Fv("\r",w[1][1]);break;default:if(g="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+w[1][0])}d.push((O?g:"")+d.pop()+(O?"":g)),m=-1}}if(d.length>1&&i.WTF)throw new Error("bad formula stack");return d[0]}function IA(e,t,n,r,i){var s=Xx(t,n,i),a=function(e){if(null==e){var t=pb(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}return sx("number"==typeof e?e:0)}(e.v),o=pb(6);o.write_shift(2,33),o.write_shift(4,0);for(var l=pb(e.bf.length),c=0;c<e.bf.length;++c)l[c]=e.bf[c];return xy([s,a,o,l])}function kA(e,t,n){var r=e.read_shift(4),i=AA(e,r,n),s=e.read_shift(4);return[i,s>0?SA(e,s,i,n):null]}var PA=kA,RA=kA,DA=kA,OA=kA,LA={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},MA={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},FA={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function jA(e){return("of:="+e.replace(eA,"$1[.$2$3$4$5]").replace(/\]:\[/g,":")).replace(/;/g,"|").replace(/,/g,";")}function BA(e){return e.replace(/\./,"!")}var UA="undefined"!==typeof Map;function zA(e,t,n){var r=0,i=e.length;if(n){if(UA?n.has(t):Object.prototype.hasOwnProperty.call(n,t))for(var s=UA?n.get(t):n[t];r<s.length;++r)if(e[s[r]].t===t)return e.Count++,s[r]}else for(;r<i;++r)if(e[r].t===t)return e.Count++,r;return e[i]={t:t},e.Count++,e.Unique++,n&&(UA?(n.has(t)||n.set(t,[]),n.get(t).push(i)):(Object.prototype.hasOwnProperty.call(n,t)||(n[t]=[]),n[t].push(i))),i}function VA(e,t){var n={min:e+1,max:e+1},r=-1;return t.MDW&&(xS=t.MDW),null!=t.width?n.customWidth=1:null!=t.wpx?r=AS(t.wpx):null!=t.wch&&(r=t.wch),r>-1?(n.width=ES(r),n.customWidth=1):null!=t.width&&(n.width=t.width),t.hidden&&(n.hidden=!0),null!=t.level&&(n.outlineLevel=n.level=t.level),n}function HA(e,t){if(e){var n=[.7,.7,.75,.75,.3,.3];"xlml"==t&&(n=[1,1,1,1,.5,.5]),null==e.left&&(e.left=n[0]),null==e.right&&(e.right=n[1]),null==e.top&&(e.top=n[2]),null==e.bottom&&(e.bottom=n[3]),null==e.header&&(e.header=n[4]),null==e.footer&&(e.footer=n[5])}}function WA(e,t,n){var r=n.revssf[null!=t.z?t.z:"General"],i=60,s=e.length;if(null==r&&n.ssf)for(;i<392;++i)if(null==n.ssf[i]){hv(t.z,i),n.ssf[i]=t.z,n.revssf[t.z]=r=i;break}for(i=0;i!=s;++i)if(e[i].numFmtId===r)return i;return e[s]={numFmtId:r,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function qA(e,t,n){if(e&&e["!ref"]){var r=Ib(e["!ref"]);if(r.e.c<r.s.c||r.e.r<r.s.r)throw new Error("Bad range ("+n+"): "+e["!ref"])}}var GA=["objects","scenarios","selectLockedCells","selectUnlockedCells"],KA=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function YA(e,t,n,r){if(e.c&&n["!comments"].push([t,e.c]),void 0===e.v&&"string"!==typeof e.f||"z"===e.t&&!e.f)return"";var i="",s=e.t,a=e.v;if("z"!==e.t)switch(e.t){case"b":i=e.v?"1":"0";break;case"n":i=""+e.v;break;case"e":i=hx[e.v];break;case"d":r&&r.cellDates?i=Ov(e.v,-1).toISOString():((e=Mv(e)).t="n",i=""+(e.v=Cv(Ov(e.v)))),"undefined"===typeof e.z&&(e.z=Dy[14]);break;default:i=e.v}var o=ow("v",Yv(i)),l={r:t},c=WA(r.cellXfs,e,r);switch(0!==c&&(l.s=c),e.t){case"n":case"z":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;default:if(null==e.v){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(r&&r.bookSST){o=ow("v",""+zA(r.Strings,e.v,r.revStrings)),l.t="s";break}l.t="str"}if(e.t!=s&&(e.t=s,e.v=a),"string"==typeof e.f&&e.f){var u=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;o=cw("f",Yv(e.f),u)+(null!=e.v?o:"")}return e.l&&n["!links"].push([t,e.l]),e.D&&(l.cm=1),cw("c",o,l)}function XA(e,t,n,r){var i,s=[Hv,cw("worksheet",null,{xmlns:Ew[0],"xmlns:r":bw})],a=n.SheetNames[e],o="",l=n.Sheets[a];null==l&&(l={});var c=l["!ref"]||"A1",u=Ib(c);if(u.e.c>16383||u.e.r>1048575){if(t.WTF)throw new Error("Range "+c+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575),c=Tb(u)}r||(r={}),l["!comments"]=[];var d=[];!function(e,t,n,r,i){var s=!1,a={},o=null;if("xlsx"!==r.bookType&&t.vbaraw){var l=t.SheetNames[n];try{t.Workbook&&(l=t.Workbook.Sheets[n].CodeName||l)}catch(b_){}s=!0,a.codeName=iw(Yv(l))}if(e&&e["!outline"]){var c={summaryBelow:1,summaryRight:1};e["!outline"].above&&(c.summaryBelow=0),e["!outline"].left&&(c.summaryRight=0),o=(o||"")+cw("outlinePr",null,c)}(s||o)&&(i[i.length]=cw("sheetPr",o,a))}(l,n,e,t,s),s[s.length]=cw("dimension",null,{ref:c}),s[s.length]=function(e,t,n,r){var i={workbookViewId:"0"};return(((r||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=r.Workbook.Views[0].RTL?"1":"0"),cw("sheetViews",cw("sheetView",null,i),{})}(0,0,0,n),t.sheetFormat&&(s[s.length]=cw("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),null!=l["!cols"]&&l["!cols"].length>0&&(s[s.length]=function(e,t){for(var n,r=["<cols>"],i=0;i!=t.length;++i)(n=t[i])&&(r[r.length]=cw("col",null,VA(i,n)));return r[r.length]="</cols>",r.join("")}(0,l["!cols"])),s[i=s.length]="<sheetData/>",l["!links"]=[],null!=l["!ref"]&&(o=function(e,t){var n,r,i=[],s=[],a=Ib(e["!ref"]),o="",l="",c=[],u=0,d=0,h=e["!rows"],f=Array.isArray(e),p={r:l},m=-1;for(d=a.s.c;d<=a.e.c;++d)c[d]=Eb(d);for(u=a.s.r;u<=a.e.r;++u){for(s=[],l=Sb(u),d=a.s.c;d<=a.e.c;++d){n=c[d]+l;var g=f?(e[u]||[])[d]:e[n];void 0!==g&&null!=(o=YA(g,n,e,t))&&s.push(o)}(s.length>0||h&&h[u])&&(p={r:l},h&&h[u]&&((r=h[u]).hidden&&(p.hidden=1),m=-1,r.hpx?m=_S(r.hpx):r.hpt&&(m=r.hpt),m>-1&&(p.ht=m,p.customHeight=1),r.level&&(p.outlineLevel=r.level)),i[i.length]=cw("row",s.join(""),p))}if(h)for(;u<h.length;++u)h&&h[u]&&(p={r:u+1},(r=h[u]).hidden&&(p.hidden=1),m=-1,r.hpx?m=_S(r.hpx):r.hpt&&(m=r.hpt),m>-1&&(p.ht=m,p.customHeight=1),r.level&&(p.outlineLevel=r.level),i[i.length]=cw("row","",p));return i.join("")}(l,t,0,0),o.length>0&&(s[s.length]=o)),s.length>i+1&&(s[s.length]="</sheetData>",s[i]=s[i].replace("/>",">")),l["!protect"]&&(s[s.length]=function(e){var t={sheet:1};return GA.forEach(function(n){null!=e[n]&&e[n]&&(t[n]="1")}),KA.forEach(function(n){null==e[n]||e[n]||(t[n]="0")}),e.password&&(t.password=vS(e.password).toString(16).toUpperCase()),cw("sheetProtection",null,t)}(l["!protect"])),null!=l["!autofilter"]&&(s[s.length]=function(e,t,n,r){var i="string"==typeof e.ref?e.ref:Tb(e.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var s=n.Workbook.Names,a=_b(i);a.s.r==a.e.r&&(a.e.r=_b(t["!ref"]).e.r,i=Tb(a));for(var o=0;o<s.length;++o){var l=s[o];if("_xlnm._FilterDatabase"==l.Name&&l.Sheet==r){l.Ref="'"+n.SheetNames[r]+"'!"+i;break}}return o==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+i}),cw("autoFilter",null,{ref:i})}(l["!autofilter"],l,n,e)),null!=l["!merges"]&&l["!merges"].length>0&&(s[s.length]=function(e){if(0===e.length)return"";for(var t='<mergeCells count="'+e.length+'">',n=0;n!=e.length;++n)t+='<mergeCell ref="'+Tb(e[n])+'"/>';return t+"</mergeCells>"}(l["!merges"]));var h,f,p=-1,m=-1;return l["!links"].length>0&&(s[s.length]="<hyperlinks>",l["!links"].forEach(function(e){e[1].Target&&(h={ref:e[0]},"#"!=e[1].Target.charAt(0)&&(m=wx(r,-1,Yv(e[1].Target).replace(/#.*$/,""),gx.HLINK),h["r:id"]="rId"+m),(p=e[1].Target.indexOf("#"))>-1&&(h.location=Yv(e[1].Target.slice(p+1))),e[1].Tooltip&&(h.tooltip=Yv(e[1].Tooltip)),s[s.length]=cw("hyperlink",null,h))}),s[s.length]="</hyperlinks>"),delete l["!links"],null!=l["!margins"]&&(s[s.length]=(HA(f=l["!margins"]),cw("pageMargins",null,f))),t&&!t.ignoreEC&&void 0!=t.ignoreEC||(s[s.length]=ow("ignoredErrors",cw("ignoredError",null,{numberStoredAsText:1,sqref:c}))),d.length>0&&(m=wx(r,-1,"../drawings/drawing"+(e+1)+".xml",gx.DRAW),s[s.length]=cw("drawing",null,{"r:id":"rId"+m}),l["!drawing"]=d),l["!comments"].length>0&&(m=wx(r,-1,"../drawings/vmlDrawing"+(e+1)+".vml",gx.VML),s[s.length]=cw("legacyDrawing",null,{"r:id":"rId"+m}),l["!legacy"]=m),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function QA(e,t,n,r){var i=function(e,t,n){var r=pb(145),i=(n["!rows"]||[])[e]||{};r.write_shift(4,e),r.write_shift(4,0);var s=320;i.hpx?s=20*_S(i.hpx):i.hpt&&(s=20*i.hpt),r.write_shift(2,s),r.write_shift(1,0);var a=0;i.level&&(a|=i.level),i.hidden&&(a|=16),(i.hpx||i.hpt)&&(a|=32),r.write_shift(1,a),r.write_shift(1,0);var o=0,l=r.l;r.l+=4;for(var c={r:e,c:0},u=0;u<16;++u)if(!(t.s.c>u+1<<10||t.e.c<u<<10)){for(var d=-1,h=-1,f=u<<10;f<u+1<<10;++f)c.c=f,(Array.isArray(n)?(n[c.r]||[])[c.c]:n[Cb(c)])&&(d<0&&(d=f),h=f);d<0||(++o,r.write_shift(4,d),r.write_shift(4,h))}var p=r.l;return r.l=l,r.write_shift(4,o),r.l=p,r.length>r.l?r.slice(0,r.l):r}(r,n,t);(i.length>17||(t["!rows"]||[])[r])&&gb(e,0,i)}var JA=nx,ZA=rx;function $A(e){return[Wb(e),ix(e),"n"]}var eE=nx,tE=rx;var nE=["left","right","top","bottom","header","footer"];function rE(e,t,n,r,i,s,a){if(void 0===t.v)return!1;var o="";switch(t.t){case"b":o=t.v?"1":"0";break;case"d":(t=Mv(t)).z=t.z||Dy[14],t.v=Cv(Ov(t.v)),t.t="n";break;case"n":case"e":o=""+t.v;break;default:o=t.v}var l={r:n,c:r};switch(l.s=WA(i.cellXfs,t,i),t.l&&s["!links"].push([Cb(l),t.l]),t.c&&s["!comments"].push([Cb(l),t.c]),t.t){case"s":case"str":return i.bookSST?(o=zA(i.Strings,t.v,i.revStrings),l.t="s",l.v=o,a?gb(e,18,function(e,t,n){return null==n&&(n=pb(8)),qb(t,n),n.write_shift(4,t.v),n}(0,l)):gb(e,7,function(e,t,n){return null==n&&(n=pb(12)),Hb(t,n),n.write_shift(4,t.v),n}(0,l))):(l.t="str",a?gb(e,17,function(e,t,n){return null==n&&(n=pb(8+4*e.v.length)),qb(t,n),Fb(e.v,n),n.length>n.l?n.slice(0,n.l):n}(t,l)):gb(e,6,function(e,t,n){return null==n&&(n=pb(12+4*e.v.length)),Hb(t,n),Fb(e.v,n),n.length>n.l?n.slice(0,n.l):n}(t,l))),!0;case"n":return t.v==(0|t.v)&&t.v>-1e3&&t.v<1e3?a?gb(e,13,function(e,t,n){return null==n&&(n=pb(8)),qb(t,n),ex(e.v,n),n}(t,l)):gb(e,2,function(e,t,n){return null==n&&(n=pb(12)),Hb(t,n),ex(e.v,n),n}(t,l)):a?gb(e,16,function(e,t,n){return null==n&&(n=pb(12)),qb(t,n),sx(e.v,n),n}(t,l)):gb(e,5,function(e,t,n){return null==n&&(n=pb(16)),Hb(t,n),sx(e.v,n),n}(t,l)),!0;case"b":return l.t="b",a?gb(e,15,function(e,t,n){return null==n&&(n=pb(5)),qb(t,n),n.write_shift(1,e.v?1:0),n}(t,l)):gb(e,4,function(e,t,n){return null==n&&(n=pb(9)),Hb(t,n),n.write_shift(1,e.v?1:0),n}(t,l)),!0;case"e":return l.t="e",a?gb(e,14,function(e,t,n){return null==n&&(n=pb(8)),qb(t,n),n.write_shift(1,e.v),n.write_shift(2,0),n.write_shift(1,0),n}(t,l)):gb(e,3,function(e,t,n){return null==n&&(n=pb(9)),Hb(t,n),n.write_shift(1,e.v),n}(t,l)),!0}return a?gb(e,12,function(e,t,n){return null==n&&(n=pb(4)),qb(t,n)}(0,l)):gb(e,1,function(e,t,n){return null==n&&(n=pb(8)),Hb(t,n)}(0,l)),!0}function iE(e,t){var n,r;t&&t["!merges"]&&(gb(e,177,(n=t["!merges"].length,null==r&&(r=pb(4)),r.write_shift(4,n),r)),t["!merges"].forEach(function(t){gb(e,176,tE(t))}),gb(e,178))}function sE(e,t){t&&t["!cols"]&&(gb(e,390),t["!cols"].forEach(function(t,n){t&&gb(e,60,function(e,t,n){null==n&&(n=pb(18));var r=VA(e,t);n.write_shift(-4,e),n.write_shift(-4,e),n.write_shift(4,256*(r.width||10)),n.write_shift(4,0);var i=0;return t.hidden&&(i|=1),"number"==typeof r.width&&(i|=2),t.level&&(i|=t.level<<8),n.write_shift(2,i),n}(n,t))}),gb(e,391))}function aE(e,t){t&&t["!ref"]&&(gb(e,648),gb(e,649,function(e){var t=pb(24);return t.write_shift(4,4),t.write_shift(4,1),rx(e,t),t}(Ib(t["!ref"]))),gb(e,650))}function oE(e,t,n){t["!links"].forEach(function(t){if(t[1].Target){var r=wx(n,-1,t[1].Target.replace(/#.*$/,""),gx.HLINK);gb(e,494,function(e,t){var n=pb(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));rx({s:Nb(e[0]),e:Nb(e[0])},n),Zb("rId"+t,n);var r=e[1].Target.indexOf("#");return Fb((-1==r?"":e[1].Target.slice(r+1))||"",n),Fb(e[1].Tooltip||"",n),Fb("",n),n.slice(0,n.l)}(t,r))}}),delete t["!links"]}function lE(e,t,n){gb(e,133),gb(e,137,function(e,t,n){null==n&&(n=pb(30));var r=924;return(((t||{}).Views||[])[0]||{}).RTL&&(r|=32),n.write_shift(2,r),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(2,0),n.write_shift(2,100),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(4,0),n}(0,n)),gb(e,138),gb(e,134)}function cE(e,t){var n,r;t["!protect"]&&gb(e,535,(n=t["!protect"],null==r&&(r=pb(66)),r.write_shift(2,n.password?vS(n.password):0),r.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(e){e[1]?r.write_shift(4,null==n[e[0]]||n[e[0]]?0:1):r.write_shift(4,null!=n[e[0]]&&n[e[0]]?0:1)}),r))}function uE(e,t,n,r){var i=mb(),s=n.SheetNames[e],a=n.Sheets[s]||{},o=s;try{n&&n.Workbook&&(o=n.Workbook.Sheets[e].CodeName||o)}catch(b_){}var l,c,u=Ib(a["!ref"]||"A1");if(u.e.c>16383||u.e.r>1048575){if(t.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575)}return a["!links"]=[],a["!comments"]=[],gb(i,129),(n.vbaraw||a["!outline"])&&gb(i,147,function(e,t,n){null==n&&(n=pb(84+4*e.length));var r=192;t&&(t.above&&(r&=-65),t.left&&(r&=-129)),n.write_shift(1,r);for(var i=1;i<3;++i)n.write_shift(1,0);return ax({auto:1},n),n.write_shift(-4,-1),n.write_shift(-4,-1),Kb(e,n),n.slice(0,n.l)}(o,a["!outline"])),gb(i,148,ZA(u)),lE(i,0,n.Workbook),sE(i,a),function(e,t,n,r){var i,s=Ib(t["!ref"]||"A1"),a="",o=[];gb(e,145);var l=Array.isArray(t),c=s.e.r;t["!rows"]&&(c=Math.max(s.e.r,t["!rows"].length-1));for(var u=s.s.r;u<=c;++u){a=Sb(u),QA(e,t,s,u);var d=!1;if(u<=s.e.r)for(var h=s.s.c;h<=s.e.c;++h){u===s.s.r&&(o[h]=Eb(h)),i=o[h]+a;var f=l?(t[u]||[])[h]:t[i];d=!!f&&rE(e,f,u,h,r,t,d)}}gb(e,146)}(i,a,0,t),cE(i,a),function(e,t,n,r){if(t["!autofilter"]){var i=t["!autofilter"],s="string"===typeof i.ref?i.ref:Tb(i.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var a=n.Workbook.Names,o=_b(s);o.s.r==o.e.r&&(o.e.r=_b(t["!ref"]).e.r,s=Tb(o));for(var l=0;l<a.length;++l){var c=a[l];if("_xlnm._FilterDatabase"==c.Name&&c.Sheet==r){c.Ref="'"+n.SheetNames[r]+"'!"+s;break}}l==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+s}),gb(e,161,rx(Ib(s))),gb(e,162)}}(i,a,n,e),iE(i,a),oE(i,a,r),a["!margins"]&&gb(i,476,(l=a["!margins"],null==c&&(c=pb(48)),HA(l),nE.forEach(function(e){sx(l[e],c)}),c)),t&&!t.ignoreEC&&void 0!=t.ignoreEC||aE(i,a),function(e,t,n,r){if(t["!comments"].length>0){var i=wx(r,-1,"../drawings/vmlDrawing"+(n+1)+".vml",gx.VML);gb(e,551,Zb("rId"+i)),t["!legacy"]=i}}(i,a,e,r),gb(i,130),i.end()}var dE=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];var hE="][*?/\\".split("");function fE(e,t){if(e.length>31){if(t)return!1;throw new Error("Sheet names cannot exceed 31 chars")}var n=!0;return hE.forEach(function(r){if(-1!=e.indexOf(r)){if(!t)throw new Error("Sheet name cannot contain : \\ / ? * [ ]");n=!1}}),n}function pE(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t,n,r,i=e.Workbook&&e.Workbook.Sheets||[];t=e.SheetNames,n=i,r=!!e.vbaraw,t.forEach(function(e,i){fE(e);for(var s=0;s<i;++s)if(e==t[s])throw new Error("Duplicate Sheet Name: "+e);if(r){var a=n&&n[i]&&n[i].CodeName||e;if(95==a.charCodeAt(0)&&a.length>22)throw new Error("Bad Code Name: Worksheet"+a)}});for(var s=0;s<e.SheetNames.length;++s)qA(e.Sheets[e.SheetNames[s]],e.SheetNames[s],s)}function mE(e){var t=[Hv];t[t.length]=cw("workbook",null,{xmlns:Ew[0],"xmlns:r":bw});var n=e.Workbook&&(e.Workbook.Names||[]).length>0,r={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(dE.forEach(function(t){null!=e.Workbook.WBProps[t[0]]&&e.Workbook.WBProps[t[0]]!=t[1]&&(r[t[0]]=e.Workbook.WBProps[t[0]])}),e.Workbook.WBProps.CodeName&&(r.codeName=e.Workbook.WBProps.CodeName,delete r.CodeName)),t[t.length]=cw("workbookPr",null,r);var i=e.Workbook&&e.Workbook.Sheets||[],s=0;if(i&&i[0]&&i[0].Hidden){for(t[t.length]="<bookViews>",s=0;s!=e.SheetNames.length&&i[s]&&i[s].Hidden;++s);s==e.SheetNames.length&&(s=0),t[t.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",s=0;s!=e.SheetNames.length;++s){var a={name:Yv(e.SheetNames[s].slice(0,31))};if(a.sheetId=""+(s+1),a["r:id"]="rId"+(s+1),i[s])switch(i[s].Hidden){case 1:a.state="hidden";break;case 2:a.state="veryHidden"}t[t.length]=cw("sheet",null,a)}return t[t.length]="</sheets>",n&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(e){var n={name:e.Name};e.Comment&&(n.comment=e.Comment),null!=e.Sheet&&(n.localSheetId=""+e.Sheet),e.Hidden&&(n.hidden="1"),e.Ref&&(t[t.length]=cw("definedName",Yv(e.Ref),n))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function gE(e,t){return t||(t=pb(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),Zb(e.strRelID,t),Fb(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function yE(e,t){if(t.Workbook&&t.Workbook.Sheets){for(var n,r,i=t.Workbook.Sheets,s=0,a=-1,o=-1;s<i.length;++s)!i[s]||!i[s].Hidden&&-1==a?a=s:1==i[s].Hidden&&-1==o&&(o=s);if(!(o>a))gb(e,135),gb(e,158,(n=a,r||(r=pb(29)),r.write_shift(-4,0),r.write_shift(-4,460),r.write_shift(4,28800),r.write_shift(4,17600),r.write_shift(4,500),r.write_shift(4,n),r.write_shift(4,n),r.write_shift(1,120),r.length>r.l?r.slice(0,r.l):r)),gb(e,136)}}function vE(e,t){var n=mb();return gb(n,131),gb(n,128,function(e,t){t||(t=pb(127));for(var n=0;4!=n;++n)t.write_shift(4,0);return Fb("SheetJS",t),Fb($g.version,t),Fb($g.version,t),Fb("7262",t),t.length>t.l?t.slice(0,t.l):t}()),gb(n,153,function(e,t){t||(t=pb(72));var n=0;return e&&e.filterPrivacy&&(n|=8),t.write_shift(4,n),t.write_shift(4,0),Kb(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}(e.Workbook&&e.Workbook.WBProps||null)),yE(n,e),function(e,t){gb(e,143);for(var n=0;n!=t.SheetNames.length;++n)gb(e,156,gE({Hidden:t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[n]&&t.Workbook.Sheets[n].Hidden||0,iTabID:n+1,strRelID:"rId"+(n+1),name:t.SheetNames[n]}));gb(e,144)}(n,e),gb(n,132),n.end()}function wE(e,t,n,r,i){return(".bin"===t.slice(-4)?uE:XA)(e,n,r,i)}function bE(e,t,n){return(".bin"===t.slice(-4)?JS:YS)(e,n)}function xE(e,t){var n=[];return e.Props&&n.push(function(e,t){var n=[];return xv(kx).map(function(e){for(var t=0;t<Ax.length;++t)if(Ax[t][1]==e)return Ax[t];for(t=0;t<Cx.length;++t)if(Cx[t][1]==e)return Cx[t];throw e}).forEach(function(r){if(null!=e[r[1]]){var i=t&&t.Props&&null!=t.Props[r[1]]?t.Props[r[1]]:e[r[1]];"date"===r[2]&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"Z")),"number"==typeof i?i=String(i):!0===i||!1===i?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),n.push(ow(kx[r[1]]||r[1],i))}}),cw("DocumentProperties",n.join(""),{xmlns:Nw})}(e.Props,t)),e.Custprops&&n.push(function(e,t){var n=["Worksheets","SheetNames"],r="CustomDocumentProperties",i=[];return e&&xv(e).forEach(function(t){if(Object.prototype.hasOwnProperty.call(e,t)){for(var r=0;r<Ax.length;++r)if(t==Ax[r][1])return;for(r=0;r<Cx.length;++r)if(t==Cx[r][1])return;for(r=0;r<n.length;++r)if(t==n[r])return;var s=e[t],a="string";"number"==typeof s?(a="float",s=String(s)):!0===s||!1===s?(a="boolean",s=s?"1":"0"):s=String(s),i.push(cw(Xv(t),s,{"dt:dt":a}))}}),t&&xv(t).forEach(function(n){if(Object.prototype.hasOwnProperty.call(t,n)&&(!e||!Object.prototype.hasOwnProperty.call(e,n))){var r=t[n],s="string";"number"==typeof r?(s="float",r=String(r)):!0===r||!1===r?(s="boolean",r=r?"1":"0"):r instanceof Date?(s="dateTime.tz",r=r.toISOString()):r=String(r),i.push(cw(Xv(n),r,{"dt:dt":s}))}}),"<"+r+' xmlns="'+Nw+'">'+i.join("")+"</"+r+">"}(e.Props,e.Custprops)),n.join("")}function SE(e){return cw("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+tA(e.Ref,{r:0,c:0})})}function AE(e,t,n,r,i,s,a){if(!e||void 0==e.v&&void 0==e.f)return"";var o={};if(e.f&&(o["ss:Formula"]="="+Yv(tA(e.f,a))),e.F&&e.F.slice(0,t.length)==t){var l=Nb(e.F.slice(t.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==a.r?"":"["+(l.r-a.r)+"]")+"C"+(l.c==a.c?"":"["+(l.c-a.c)+"]")}if(e.l&&e.l.Target&&(o["ss:HRef"]=Yv(e.l.Target),e.l.Tooltip&&(o["x:HRefScreenTip"]=Yv(e.l.Tooltip))),n["!merges"])for(var c=n["!merges"],u=0;u!=c.length;++u)c[u].s.c==a.c&&c[u].s.r==a.r&&(c[u].e.c>c[u].s.c&&(o["ss:MergeAcross"]=c[u].e.c-c[u].s.c),c[u].e.r>c[u].s.r&&(o["ss:MergeDown"]=c[u].e.r-c[u].s.r));var d="",h="";switch(e.t){case"z":if(!r.sheetStubs)return"";break;case"n":d="Number",h=String(e.v);break;case"b":d="Boolean",h=e.v?"1":"0";break;case"e":d="Error",h=hx[e.v];break;case"d":d="DateTime",h=new Date(e.v).toISOString(),null==e.z&&(e.z=e.z||Dy[14]);break;case"s":d="String",h=((e.v||"")+"").replace(Gv,function(e){return qv[e]}).replace(Qv,function(e){return"&#x"+e.charCodeAt(0).toString(16).toUpperCase()+";"})}var f=WA(r.cellXfs,e,r);o["ss:StyleID"]="s"+(21+f),o["ss:Index"]=a.c+1;var p=null!=e.v?h:"",m="z"==e.t?"":'<Data ss:Type="'+d+'">'+p+"</Data>";return(e.c||[]).length>0&&(m+=e.c.map(function(e){var t=cw("ss:Data",(e.t||"").replace(/(\r\n|[\r\n])/g,"&#10;"),{xmlns:"http://www.w3.org/TR/REC-html40"});return cw("Comment",t,{"ss:Author":e.a})}).join("")),cw("Cell",m,o)}function EE(e,t){var n='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=TS(t.hpt)),t.hpx&&(n+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(n+=' ss:Hidden="1"')),n+">"}function NE(e,t,n){var r=[],i=n.SheetNames[e],s=n.Sheets[i],a=s?function(e,t,n,r){if(!e)return"";if(!((r||{}).Workbook||{}).Names)return"";for(var i=r.Workbook.Names,s=[],a=0;a<i.length;++a){var o=i[a];o.Sheet==n&&(o.Name.match(/^_xlfn\./)||s.push(SE(o)))}return s.join("")}(s,0,e,n):"";return a.length>0&&r.push("<Names>"+a+"</Names>"),a=s?function(e,t){if(!e["!ref"])return"";var n=Ib(e["!ref"]),r=e["!merges"]||[],i=0,s=[];e["!cols"]&&e["!cols"].forEach(function(e,t){NS(e);var n=!!e.width,r=VA(t,e),i={"ss:Index":t+1};n&&(i["ss:Width"]=SS(r.width)),e.hidden&&(i["ss:Hidden"]="1"),s.push(cw("Column",null,i))});for(var a=Array.isArray(e),o=n.s.r;o<=n.e.r;++o){for(var l=[EE(o,(e["!rows"]||[])[o])],c=n.s.c;c<=n.e.c;++c){var u=!1;for(i=0;i!=r.length;++i)if(!(r[i].s.c>c)&&!(r[i].s.r>o)&&!(r[i].e.c<c)&&!(r[i].e.r<o)){r[i].s.c==c&&r[i].s.r==o||(u=!0);break}if(!u){var d={r:o,c:c},h=Cb(d),f=a?(e[o]||[])[c]:e[h];l.push(AE(f,h,e,t,0,0,d))}}l.push("</Row>"),l.length>2&&s.push(l.join(""))}return s.join("")}(s,t):"",a.length>0&&r.push("<Table>"+a+"</Table>"),r.push(function(e,t,n,r){if(!e)return"";var i=[];if(e["!margins"]&&(i.push("<PageSetup>"),e["!margins"].header&&i.push(cw("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&i.push(cw("Footer",null,{"x:Margin":e["!margins"].footer})),i.push(cw("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),i.push("</PageSetup>")),r&&r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[n])if(r.Workbook.Sheets[n].Hidden)i.push(cw("Visible",1==r.Workbook.Sheets[n].Hidden?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<n&&(!r.Workbook.Sheets[s]||r.Workbook.Sheets[s].Hidden);++s);s==n&&i.push("<Selected/>")}return((((r||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),e["!protect"]&&(i.push(ow("ProtectContents","True")),e["!protect"].objects&&i.push(ow("ProtectObjects","True")),e["!protect"].scenarios&&i.push(ow("ProtectScenarios","True")),null==e["!protect"].selectLockedCells||e["!protect"].selectLockedCells?null==e["!protect"].selectUnlockedCells||e["!protect"].selectUnlockedCells||i.push(ow("EnableSelection","UnlockedCells")):i.push(ow("EnableSelection","NoSelection")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(t){e["!protect"][t[0]]&&i.push("<"+t[1]+"/>")})),0==i.length?"":cw("WorksheetOptions",i.join(""),{xmlns:Cw})}(s,0,e,n)),r.join("")}function CE(e,t){t||(t={}),e.SSF||(e.SSF=Mv(Dy)),e.SSF&&(pv(),fv(e.SSF),t.revssf=Ev(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],WA(t.cellXfs,{},{revssf:{General:0}}));var n=[];n.push(xE(e,t)),n.push(""),n.push(""),n.push("");for(var r=0;r<e.SheetNames.length;++r)n.push(cw("Worksheet",NE(r,t,e),{"ss:Name":Yv(e.SheetNames[r])}));return n[2]=function(e,t){var n=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(e,t){var r=[];r.push(cw("NumberFormat",null,{"ss:Format":Yv(Dy[e.numFmtId])}));var i={"ss:ID":"s"+(21+t)};n.push(cw("Style",r.join(""),i))}),cw("Styles",n.join(""))}(0,t),n[3]=function(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,n=[],r=0;r<t.length;++r){var i=t[r];null==i.Sheet&&(i.Name.match(/^_xlfn\./)||n.push(SE(i)))}return cw("Names",n.join(""))}(e),Hv+cw("Workbook",n.join(""),{xmlns:_w,"xmlns:o":Nw,"xmlns:x":Cw,"xmlns:ss":_w,"xmlns:dt":Tw,"xmlns:html":Pw})}var _E="e0859ff2f94f6810ab9108002b27b3d9",TE="02d5cdd59c2e1b10939708002b2cf9ae",IE="05d5cdd59c2e1b10939708002b2cf9ae";function kE(e,t){var n=t||{},r=yv.utils.cfb_new({root:"R"}),i="/Workbook";switch(n.bookType||"xls"){case"xls":n.bookType="biff8";case"xla":n.bookType||(n.bookType="xla");case"biff8":i="/Workbook",n.biff=8;break;case"biff5":i="/Book",n.biff=5;break;default:throw new Error("invalid type "+n.bookType+" for XLS CFB")}return yv.utils.cfb_add(r,i,zE(e,n)),8==n.biff&&(e.Props||e.Custprops)&&function(e,t){var n,r=[],i=[],s=[],a=0,o=Sv(lx,"n"),l=Sv(cx,"n");if(e.Props)for(n=xv(e.Props),a=0;a<n.length;++a)(Object.prototype.hasOwnProperty.call(o,n[a])?r:Object.prototype.hasOwnProperty.call(l,n[a])?i:s).push([n[a],e.Props[n[a]]]);if(e.Custprops)for(n=xv(e.Custprops),a=0;a<n.length;++a)Object.prototype.hasOwnProperty.call(e.Props||{},n[a])||(Object.prototype.hasOwnProperty.call(o,n[a])?r:Object.prototype.hasOwnProperty.call(l,n[a])?i:s).push([n[a],e.Custprops[n[a]]]);var c=[];for(a=0;a<s.length;++a)Rx.indexOf(s[a][0])>-1||_x.indexOf(s[a][0])>-1||null!=s[a][1]&&c.push(s[a]);i.length&&yv.utils.cfb_add(t,"/\x05SummaryInformation",Lx(i,_E,l,cx)),(r.length||c.length)&&yv.utils.cfb_add(t,"/\x05DocumentSummaryInformation",Lx(r,TE,o,lx,c.length?c:null,IE))}(e,r),8==n.biff&&e.vbaraw&&function(e,t){t.FullPaths.forEach(function(n,r){if(0!=r){var i=n.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");"/"!==i.slice(-1)&&yv.utils.cfb_add(e,i,t.FileIndex[r].content)}})}(r,yv.read(e.vbaraw,{type:"string"==typeof e.vbaraw?"binary":"buffer"})),r}var PE={0:{f:function(e,t){var n={},r=e.l+t;n.r=e.read_shift(4),e.l+=4;var i=e.read_shift(2);e.l+=1;var s=e.read_shift(1);return e.l=r,7&s&&(n.level=7&s),16&s&&(n.hidden=!0),32&s&&(n.hpt=i/20),n}},1:{f:function(e){return[Vb(e)]}},2:{f:function(e){return[Vb(e),$b(e),"n"]}},3:{f:function(e){return[Vb(e),e.read_shift(1),"e"]}},4:{f:function(e){return[Vb(e),e.read_shift(1),"b"]}},5:{f:function(e){return[Vb(e),ix(e),"n"]}},6:{f:function(e){return[Vb(e),Mb(e),"str"]}},7:{f:function(e){return[Vb(e),e.read_shift(4),"s"]}},8:{f:function(e,t,n){var r=e.l+t,i=Vb(e);i.r=n["!row"];var s=[i,Mb(e),"str"];if(n.cellFormula){e.l+=2;var a=RA(e,r-e.l,n);s[3]=TA(a,0,i,n.supbooks,n)}else e.l=r;return s}},9:{f:function(e,t,n){var r=e.l+t,i=Vb(e);i.r=n["!row"];var s=[i,ix(e),"n"];if(n.cellFormula){e.l+=2;var a=RA(e,r-e.l,n);s[3]=TA(a,0,i,n.supbooks,n)}else e.l=r;return s}},10:{f:function(e,t,n){var r=e.l+t,i=Vb(e);i.r=n["!row"];var s=[i,e.read_shift(1),"b"];if(n.cellFormula){e.l+=2;var a=RA(e,r-e.l,n);s[3]=TA(a,0,i,n.supbooks,n)}else e.l=r;return s}},11:{f:function(e,t,n){var r=e.l+t,i=Vb(e);i.r=n["!row"];var s=[i,e.read_shift(1),"e"];if(n.cellFormula){e.l+=2;var a=RA(e,r-e.l,n);s[3]=TA(a,0,i,n.supbooks,n)}else e.l=r;return s}},12:{f:function(e){return[Wb(e)]}},13:{f:function(e){return[Wb(e),$b(e),"n"]}},14:{f:function(e){return[Wb(e),e.read_shift(1),"e"]}},15:{f:function(e){return[Wb(e),e.read_shift(1),"b"]}},16:{f:$A},17:{f:function(e){return[Wb(e),Mb(e),"str"]}},18:{f:function(e){return[Wb(e),e.read_shift(4),"s"]}},19:{f:Bb},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:function(e,t,n){var r=e.l+t;e.l+=4,e.l+=1;var i=e.read_shift(4),s=Qb(e),a=DA(e,0,n),o=Yb(e);e.l=r;var l={Name:s,Ptg:a};return i<268435455&&(l.Sheet=i),o&&(l.Comment=o),l}},40:{},42:{},43:{f:function(e,t,n){var r={};r.sz=e.read_shift(2)/20;var i=function(e){var t=e.read_shift(1);return e.l++,{fBold:1&t,fItalic:2&t,fUnderline:4&t,fStrikeout:8&t,fOutline:16&t,fShadow:32&t,fCondense:64&t,fExtend:128&t}}(e);switch(i.fItalic&&(r.italic=1),i.fCondense&&(r.condense=1),i.fExtend&&(r.extend=1),i.fShadow&&(r.shadow=1),i.fOutline&&(r.outline=1),i.fStrikeout&&(r.strike=1),700===e.read_shift(2)&&(r.bold=1),e.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript"}var s=e.read_shift(1);0!=s&&(r.underline=s);var a=e.read_shift(1);a>0&&(r.family=a);var o=e.read_shift(1);switch(o>0&&(r.charset=o),e.l++,r.color=function(e){var t={},n=e.read_shift(1)>>>1,r=e.read_shift(1),i=e.read_shift(2,"i"),s=e.read_shift(1),a=e.read_shift(1),o=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=r;var l=dx[r];l&&(t.rgb=bS(l));break;case 2:t.rgb=bS([s,a,o]);break;case 3:t.theme=r}return 0!=i&&(t.tint=i>0?i/32767:i/32768),t}(e),e.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor"}return r.name=Mb(e),r}},44:{f:function(e,t){return[e.read_shift(2),Mb(e)]}},45:{f:OS},46:{f:jS},47:{f:function(e,t){var n=e.l+t,r=e.read_shift(2),i=e.read_shift(2);return e.l=n,{ixfe:r,numFmtId:i}}},48:{},49:{f:function(e){return e.read_shift(4,"i")}},50:{},51:{f:function(e){for(var t=[],n=e.read_shift(4);n-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:aS},62:{f:function(e){return[Vb(e),Bb(e),"is"]}},63:{f:function(e){var t={};t.i=e.read_shift(4);var n={};n.r=e.read_shift(4),n.c=e.read_shift(4),t.r=Cb(n);var r=e.read_shift(1);return 2&r&&(t.l="1"),8&r&&(t.a="1"),t}},64:{f:function(){}},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:fb,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:function(e){var t=e.read_shift(2);return e.l+=28,{RTL:32&t}}},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:function(e,t){var n={},r=e[e.l];return++e.l,n.above=!(64&r),n.left=!(128&r),e.l+=18,n.name=Gb(e,t-19),n}},148:{f:JA,p:16},151:{f:function(){}},152:{},153:{f:function(e,t){var n={},r=e.read_shift(4);n.defaultThemeVersion=e.read_shift(4);var i=t>8?Mb(e):"";return i.length>0&&(n.CodeName=i),n.autoCompressPictures=!!(65536&r),n.backupFile=!!(64&r),n.checkCompatibility=!!(4096&r),n.date1904=!!(1&r),n.filterPrivacy=!!(8&r),n.hidePivotFieldList=!!(1024&r),n.promptedSolutions=!!(16&r),n.publishItems=!!(2048&r),n.refreshAllConnections=!!(262144&r),n.saveExternalLinkValues=!!(128&r),n.showBorderUnselectedTables=!!(4&r),n.showInkAnnotation=!!(32&r),n.showObjects=["all","placeholders","none"][r>>13&3],n.showPivotChartFilter=!!(32768&r),n.updateLinks=["userSet","never","always"][r>>8&3],n}},154:{},155:{},156:{f:function(e,t){var n={};return n.Hidden=e.read_shift(4),n.iTabID=e.read_shift(4),n.strRelID=Jb(e,t-8),n.name=Mb(e),n}},157:{},158:{},159:{T:1,f:function(e){return[e.read_shift(4),e.read_shift(4)]}},160:{T:-1},161:{T:1,f:nx},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:eE},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:function(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:Mb(e)}}},336:{T:-1},337:{f:function(e){return e.l+=4,0!=e.read_shift(4)},T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:Jb},357:{},358:{},359:{},360:{T:1},361:{},362:{f:rS},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:function(e,t,n){var r=e.l+t,i=tx(e),s=e.read_shift(1),a=[i];if(a[2]=s,n.cellFormula){var o=PA(e,r-e.l,n);a[1]=o}else e.l=r;return a}},427:{f:function(e,t,n){var r=e.l+t,i=[nx(e,16)];if(n.cellFormula){var s=OA(e,r-e.l,n);i[1]=s,e.l=r}else e.l=r;return i}},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:function(e){var t={};return nE.forEach(function(n){t[n]=ix(e)}),t}},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:function(){}},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:function(e,t){var n=e.l+t,r=nx(e,16),i=Yb(e),s=Mb(e),a=Mb(e),o=Mb(e);e.l=n;var l={rfx:r,relId:i,loc:s,display:o};return a&&(l.Tooltip=a),l}},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:Jb},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:QS},633:{T:1},634:{T:-1},635:{T:1,f:function(e){var t={};t.iauthor=e.read_shift(4);var n=nx(e,16);return t.rfx=n.s,t.ref=Cb(n.s),e.l+=16,t}},636:{T:-1},637:{f:Ub},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:function(e,t){return e.l+=10,{name:Mb(e)}}},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:function(){}},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function RE(e,t,n,r){var i=t;if(!isNaN(i)){var s=r||(n||[]).length||0,a=e.next(4);a.write_shift(2,i),a.write_shift(2,s),s>0&&Zw(n)&&e.push(n)}}function DE(e,t,n){return e||(e=pb(7)),e.write_shift(2,t),e.write_shift(2,n),e.write_shift(2,0),e.write_shift(1,0),e}function OE(e,t,n,r){if(null!=t.v)switch(t.t){case"d":case"n":var i="d"==t.t?Cv(Ov(t.v)):t.v;return void(i==(0|i)&&i>=0&&i<65536?RE(e,2,function(e,t,n){var r=pb(9);return DE(r,e,t),r.write_shift(2,n),r}(n,r,i)):RE(e,3,function(e,t,n){var r=pb(15);return DE(r,e,t),r.write_shift(8,n,"f"),r}(n,r,i)));case"b":case"e":return void RE(e,5,function(e,t,n,r){var i=pb(9);return DE(i,e,t),Ux(n,r||"b",i),i}(n,r,t.v,t.t));case"s":case"str":return void RE(e,4,function(e,t,n){var r=pb(8+2*n.length);return DE(r,e,t),r.write_shift(1,n.length),r.write_shift(n.length,n,"sbcs"),r.l<r.length?r.slice(0,r.l):r}(n,r,(t.v||"").slice(0,255)))}RE(e,1,DE(null,n,r))}function LE(e,t){var n=t||{};for(var r=mb(),i=0,s=0;s<e.SheetNames.length;++s)e.SheetNames[s]==n.sheet&&(i=s);if(0==i&&n.sheet&&e.SheetNames[0]!=n.sheet)throw new Error("Sheet not found: "+n.sheet);return RE(r,4==n.biff?1033:3==n.biff?521:9,$x(0,16,n)),function(e,t,n,r){var i,s=Array.isArray(t),a=Ib(t["!ref"]||"A1"),o="",l=[];if(a.e.c>255||a.e.r>16383){if(r.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");a.e.c=Math.min(a.e.c,255),a.e.r=Math.min(a.e.c,16383),i=Tb(a)}for(var c=a.s.r;c<=a.e.r;++c){o=Sb(c);for(var u=a.s.c;u<=a.e.c;++u){c===a.s.r&&(l[u]=Eb(u)),i=l[u]+o;var d=s?(t[c]||[])[u]:t[i];d&&OE(e,d,c,u)}}}(r,e.Sheets[e.SheetNames[i]],0,n),RE(r,10),r.end()}function ME(e,t,n){RE(e,49,function(e,t){var n=e.name||"Arial",r=t&&5==t.biff,i=pb(r?15+n.length:16+2*n.length);return i.write_shift(2,20*(e.sz||12)),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,n.length),r||i.write_shift(1,1),i.write_shift((r?1:2)*n.length,n,r?"sbcs":"utf16le"),i}({sz:12,color:{theme:1},name:"Arial",family:2,scheme:"minor"},n))}function FE(e,t){if(t){var n=0;t.forEach(function(t,r){++n<=256&&t&&RE(e,125,function(e,t){var n=pb(12);n.write_shift(2,t),n.write_shift(2,t),n.write_shift(2,256*e.width),n.write_shift(2,0);var r=0;return e.hidden&&(r|=1),n.write_shift(1,r),r=e.level||0,n.write_shift(1,r),n.write_shift(2,0),n}(VA(r,t),r))})}}function jE(e,t,n,r,i){var s=16+WA(i.cellXfs,t,i);if(null!=t.v||t.bf)if(t.bf)RE(e,6,IA(t,n,r,0,s));else switch(t.t){case"d":case"n":RE(e,515,function(e,t,n,r){var i=pb(14);return Xx(e,t,r,i),sx(n,i),i}(n,r,"d"==t.t?Cv(Ov(t.v)):t.v,s));break;case"b":case"e":RE(e,517,function(e,t,n,r,i,s){var a=pb(8);return Xx(e,t,r,a),Ux(n,s,a),a}(n,r,t.v,s,0,t.t));break;case"s":case"str":if(i.bookSST)RE(e,253,function(e,t,n,r){var i=pb(10);return Xx(e,t,r,i),i.write_shift(4,n),i}(n,r,zA(i.Strings,t.v,i.revStrings),s));else RE(e,516,function(e,t,n,r,i){var s=!i||8==i.biff,a=pb(+s+8+(1+s)*n.length);return Xx(e,t,r,a),a.write_shift(2,n.length),s&&a.write_shift(1,1),a.write_shift((1+s)*n.length,n,s?"utf16le":"sbcs"),a}(n,r,(t.v||"").slice(0,255),s,i));break;default:RE(e,513,Xx(n,r,s))}else RE(e,513,Xx(n,r,s))}function BE(e,t,n){var r,i=mb(),s=n.SheetNames[e],a=n.Sheets[s]||{},o=(n||{}).Workbook||{},l=(o.Sheets||[])[e]||{},c=Array.isArray(a),u=8==t.biff,d="",h=[],f=Ib(a["!ref"]||"A1"),p=u?65536:16384;if(f.e.c>255||f.e.r>=p){if(t.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:IV16384");f.e.c=Math.min(f.e.c,255),f.e.r=Math.min(f.e.c,p-1)}RE(i,2057,$x(0,16,t)),RE(i,13,Bx(1)),RE(i,12,Bx(100)),RE(i,15,Fx(!0)),RE(i,17,Fx(!1)),RE(i,16,sx(.001)),RE(i,95,Fx(!0)),RE(i,42,Fx(!1)),RE(i,43,Fx(!1)),RE(i,130,Bx(1)),RE(i,128,function(e){var t=pb(8);return t.write_shift(4,0),t.write_shift(2,e[0]?e[0]+1:0),t.write_shift(2,e[1]?e[1]+1:0),t}([0,0])),RE(i,131,Fx(!1)),RE(i,132,Fx(!1)),u&&FE(i,a["!cols"]),RE(i,512,function(e,t){var n=8!=t.biff&&t.biff?2:4,r=pb(2*n+6);return r.write_shift(n,e.s.r),r.write_shift(n,e.e.r+1),r.write_shift(2,e.s.c),r.write_shift(2,e.e.c+1),r.write_shift(2,0),r}(f,t)),u&&(a["!links"]=[]);for(var m=f.s.r;m<=f.e.r;++m){d=Sb(m);for(var g=f.s.c;g<=f.e.c;++g){m===f.s.r&&(h[g]=Eb(g)),r=h[g]+d;var y=c?(a[m]||[])[g]:a[r];y&&(jE(i,y,m,g,t),u&&y.l&&a["!links"].push([r,y.l]))}}var v=l.CodeName||l.name||s;return u&&RE(i,574,function(e){var t=pb(18),n=1718;return e&&e.RTL&&(n|=64),t.write_shift(2,n),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}((o.Views||[])[0])),u&&(a["!merges"]||[]).length&&RE(i,229,function(e){var t=pb(2+8*e.length);t.write_shift(2,e.length);for(var n=0;n<e.length;++n)Zx(e[n],t);return t}(a["!merges"])),u&&function(e,t){for(var n=0;n<t["!links"].length;++n){var r=t["!links"][n];RE(e,440,iS(r)),r[1].Tooltip&&RE(e,2048,sS(r))}delete t["!links"]}(i,a),RE(i,442,Gx(v)),u&&function(e,t){var n=pb(19);n.write_shift(4,2151),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,1),n.write_shift(4,0),RE(e,2151,n),(n=pb(39)).write_shift(4,2152),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,0),n.write_shift(4,0),n.write_shift(2,1),n.write_shift(4,4),n.write_shift(2,0),Zx(Ib(t["!ref"]||"A1"),n),n.write_shift(4,4),RE(e,2152,n)}(i,a),RE(i,10),i.end()}function UE(e,t,n){var r=mb(),i=(e||{}).Workbook||{},s=i.Sheets||[],a=i.WBProps||{},o=8==n.biff,l=5==n.biff;(RE(r,2057,$x(0,5,n)),"xla"==n.bookType&&RE(r,135),RE(r,225,o?Bx(1200):null),RE(r,193,function(e,t){t||(t=pb(e));for(var n=0;n<e;++n)t.write_shift(1,0);return t}(2)),l&&RE(r,191),l&&RE(r,192),RE(r,226),RE(r,92,function(e,t){var n=!t||8==t.biff,r=pb(n?112:54);for(r.write_shift(8==t.biff?2:1,7),n&&r.write_shift(1,0),r.write_shift(4,859007059),r.write_shift(4,5458548|(n?0:536870912));r.l<r.length;)r.write_shift(1,n?0:32);return r}(0,n)),RE(r,66,Bx(o?1200:1252)),o&&RE(r,353,Bx(0)),o&&RE(r,448),RE(r,317,function(e){for(var t=pb(2*e),n=0;n<e;++n)t.write_shift(2,n+1);return t}(e.SheetNames.length)),o&&e.vbaraw&&RE(r,211),o&&e.vbaraw)&&RE(r,442,Gx(a.CodeName||"ThisWorkbook"));RE(r,156,Bx(17)),RE(r,25,Fx(!1)),RE(r,18,Fx(!1)),RE(r,19,Bx(0)),o&&RE(r,431,Fx(!1)),o&&RE(r,444,Bx(0)),RE(r,61,function(){var e=pb(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}()),RE(r,64,Fx(!1)),RE(r,141,Bx(0)),RE(r,34,Fx("true"==function(e){return e.Workbook&&e.Workbook.WBProps&&Zv(e.Workbook.WBProps.date1904)?"true":"false"}(e))),RE(r,14,Fx(!0)),o&&RE(r,439,Fx(!1)),RE(r,218,Bx(0)),ME(r,0,n),function(e,t,n){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)null!=t[i]&&RE(e,1054,tS(i,t[i],n))})}(r,e.SSF,n),function(e,t){for(var n=0;n<16;++n)RE(e,224,nS({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){RE(e,224,nS(n,0,t))})}(r,n),o&&RE(r,352,Fx(!1));var c,u=r.end(),d=mb();o&&RE(d,140,(c||(c=pb(4)),c.write_shift(2,1),c.write_shift(2,1),c)),o&&n.Strings&&function(e,t,n,r){var i=r||(n||[]).length||0;if(i<=8224)return RE(e,t,n,i);var s=t;if(!isNaN(s)){for(var a=n.parts||[],o=0,l=0,c=0;c+(a[o]||8224)<=8224;)c+=a[o]||8224,o++;var u=e.next(4);for(u.write_shift(2,s),u.write_shift(2,c),e.push(n.slice(l,l+c)),l+=c;l<i;){for((u=e.next(4)).write_shift(2,60),c=0;c+(a[o]||8224)<=8224;)c+=a[o]||8224,o++;u.write_shift(2,c),e.push(n.slice(l,l+c)),l+=c}}}(d,252,function(e){var t=pb(8);t.write_shift(4,e.Count),t.write_shift(4,e.Unique);for(var n=[],r=0;r<e.length;++r)n[r]=Vx(e[r]);var i=xy([t].concat(n));return i.parts=[t.length].concat(n.map(function(e){return e.length})),i}(n.Strings)),RE(d,10);var h=d.end(),f=mb(),p=0,m=0;for(m=0;m<e.SheetNames.length;++m)p+=(o?12:11)+(o?2:1)*e.SheetNames[m].length;var g=u.length+p+h.length;for(m=0;m<e.SheetNames.length;++m){RE(f,133,eS({pos:g,hs:(s[m]||{}).Hidden||0,dt:0,name:e.SheetNames[m]},n)),g+=t[m].length}var y=f.end();if(p!=y.length)throw new Error("BS8 "+p+" != "+y.length);var v=[];return u.length&&v.push(u),y.length&&v.push(y),h.length&&v.push(h),xy(v)}function zE(e,t){for(var n=0;n<=e.SheetNames.length;++n){var r=e.Sheets[e.SheetNames[n]];if(r&&r["!ref"])_b(r["!ref"]).e.c>255&&"undefined"!=typeof console&&console.error&&console.error("Worksheet '"+e.SheetNames[n]+"' extends beyond column IV (255).  Data may be lost.")}var i=t||{};switch(i.biff||2){case 8:case 5:return function(e,t){var n=t||{},r=[];e&&!e.SSF&&(e.SSF=Mv(Dy)),e&&e.SSF&&(pv(),fv(e.SSF),n.revssf=Ev(e.SSF),n.revssf[e.SSF[65535]]=0,n.ssf=e.SSF),n.Strings=[],n.Strings.Count=0,n.Strings.Unique=0,yN(n),n.cellXfs=[],WA(n.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var i=0;i<e.SheetNames.length;++i)r[r.length]=BE(i,n,e);return r.unshift(UE(e,r,n)),xy(r)}(e,t);case 4:case 3:case 2:return LE(e,t)}throw new Error("invalid type "+i.bookType+" for BIFF")}function VE(e,t,n,r){for(var i=e["!merges"]||[],s=[],a=t.s.c;a<=t.e.c;++a){for(var o=0,l=0,c=0;c<i.length;++c)if(!(i[c].s.r>n||i[c].s.c>a)&&!(i[c].e.r<n||i[c].e.c<a)){if(i[c].s.r<n||i[c].s.c<a){o=-1;break}o=i[c].e.r-i[c].s.r+1,l=i[c].e.c-i[c].s.c+1;break}if(!(o<0)){var u=Cb({r:n,c:a}),d=r.dense?(e[n]||[])[a]:e[u],h=d&&null!=d.v&&(d.h||Jv(d.w||(Pb(d),d.w)||""))||"",f={};o>1&&(f.rowspan=o),l>1&&(f.colspan=l),r.editable?h='<span contenteditable="true">'+h+"</span>":d&&(f["data-t"]=d&&d.t||"z",null!=d.v&&(f["data-v"]=d.v),null!=d.z&&(f["data-z"]=d.z),d.l&&"#"!=(d.l.Target||"#").charAt(0)&&(h='<a href="'+d.l.Target+'">'+h+"</a>")),f.id=(r.id||"sjs")+"-"+u,s.push(cw("td",h,f))}}return"<tr>"+s.join("")+"</tr>"}var HE='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',WE="</body></html>";function qE(e,t,n){return[].join("")+"<table"+(n&&n.id?' id="'+n.id+'"':"")+">"}function GE(e,t){var n=t||{},r=null!=n.header?n.header:HE,i=null!=n.footer?n.footer:WE,s=[r],a=_b(e["!ref"]);n.dense=Array.isArray(e),s.push(qE(0,0,n));for(var o=a.s.r;o<=a.e.r;++o)s.push(VE(e,a,o,n));return s.push("</table>"+i),s.join("")}function KE(e,t,n){var r=n||{};var i=0,s=0;if(null!=r.origin)if("number"==typeof r.origin)i=r.origin;else{var a="string"==typeof r.origin?Nb(r.origin):r.origin;i=a.r,s=a.c}var o=t.getElementsByTagName("tr"),l=Math.min(r.sheetRows||1e7,o.length),c={s:{r:0,c:0},e:{r:i,c:s}};if(e["!ref"]){var u=_b(e["!ref"]);c.s.r=Math.min(c.s.r,u.s.r),c.s.c=Math.min(c.s.c,u.s.c),c.e.r=Math.max(c.e.r,u.e.r),c.e.c=Math.max(c.e.c,u.e.c),-1==i&&(c.e.r=i=u.e.r+1)}var d=[],h=0,f=e["!rows"]||(e["!rows"]=[]),p=0,m=0,g=0,y=0,v=0,w=0;for(e["!cols"]||(e["!cols"]=[]);p<o.length&&m<l;++p){var b=o[p];if(XE(b)){if(r.display)continue;f[m]={hidden:!0}}var x=b.children;for(g=y=0;g<x.length;++g){var S=x[g];if(!r.display||!XE(S)){var A=S.hasAttribute("data-v")?S.getAttribute("data-v"):S.hasAttribute("v")?S.getAttribute("v"):sw(S.innerHTML),E=S.getAttribute("data-z")||S.getAttribute("z");for(h=0;h<d.length;++h){var N=d[h];N.s.c==y+s&&N.s.r<m+i&&m+i<=N.e.r&&(y=N.e.c+1-s,h=-1)}w=+S.getAttribute("colspan")||1,((v=+S.getAttribute("rowspan")||1)>1||w>1)&&d.push({s:{r:m+i,c:y+s},e:{r:m+i+(v||1)-1,c:y+s+(w||1)-1}});var C={t:"s",v:A},_=S.getAttribute("data-t")||S.getAttribute("t")||"";null!=A&&(0==A.length?C.t=_||"z":r.raw||0==A.trim().length||"s"==_||("TRUE"===A?C={t:"b",v:!0}:"FALSE"===A?C={t:"b",v:!1}:isNaN(jv(A))?isNaN(Uv(A).getDate())||(C={t:"d",v:Ov(A)},r.cellDates||(C={t:"n",v:Cv(C.v)}),C.z=r.dateNF||Dy[14]):C={t:"n",v:jv(A)})),void 0===C.z&&null!=E&&(C.z=E);var T="",I=S.getElementsByTagName("A");if(I&&I.length)for(var k=0;k<I.length&&(!I[k].hasAttribute("href")||"#"==(T=I[k].getAttribute("href")).charAt(0));++k);T&&"#"!=T.charAt(0)&&(C.l={Target:T}),r.dense?(e[m+i]||(e[m+i]=[]),e[m+i][y+s]=C):e[Cb({c:y+s,r:m+i})]=C,c.e.c<y+s&&(c.e.c=y+s),y+=w}}++m}return d.length&&(e["!merges"]=(e["!merges"]||[]).concat(d)),c.e.r=Math.max(c.e.r,m-1+i),e["!ref"]=Tb(c),m>=l&&(e["!fullref"]=Tb((c.e.r=o.length-p+m-1+i,c))),e}function YE(e,t){return KE((t||{}).dense?[]:{},e,t)}function XE(e){var t="",n=function(e){return e.ownerDocument.defaultView&&"function"===typeof e.ownerDocument.defaultView.getComputedStyle?e.ownerDocument.defaultView.getComputedStyle:"function"===typeof getComputedStyle?getComputedStyle:null}(e);return n&&(t=n(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),"none"===t}var QE=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+lw({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return Hv+t}}(),JE=function(){var e=function(e){return Yv(e).replace(/  +/g,function(e){return'<text:s text:c="'+e.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t="          <table:table-cell />\n",n=function(n,r,i){var s=[];s.push('      <table:table table:name="'+Yv(r.SheetNames[i])+'" table:style-name="ta1">\n');var a=0,o=0,l=_b(n["!ref"]||"A1"),c=n["!merges"]||[],u=0,d=Array.isArray(n);if(n["!cols"])for(o=0;o<=l.e.c;++o)s.push("        <table:table-column"+(n["!cols"][o]?' table:style-name="co'+n["!cols"][o].ods+'"':"")+"></table:table-column>\n");var h="",f=n["!rows"]||[];for(a=0;a<l.s.r;++a)h=f[a]?' table:style-name="ro'+f[a].ods+'"':"",s.push("        <table:table-row"+h+"></table:table-row>\n");for(;a<=l.e.r;++a){for(h=f[a]?' table:style-name="ro'+f[a].ods+'"':"",s.push("        <table:table-row"+h+">\n"),o=0;o<l.s.c;++o)s.push(t);for(;o<=l.e.c;++o){var p=!1,m={},g="";for(u=0;u!=c.length;++u)if(!(c[u].s.c>o)&&!(c[u].s.r>a)&&!(c[u].e.c<o)&&!(c[u].e.r<a)){c[u].s.c==o&&c[u].s.r==a||(p=!0),m["table:number-columns-spanned"]=c[u].e.c-c[u].s.c+1,m["table:number-rows-spanned"]=c[u].e.r-c[u].s.r+1;break}if(p)s.push("          <table:covered-table-cell/>\n");else{var y=Cb({r:a,c:o}),v=d?(n[a]||[])[o]:n[y];if(v&&v.f&&(m["table:formula"]=Yv(jA(v.f)),v.F&&v.F.slice(0,y.length)==y)){var w=_b(v.F);m["table:number-matrix-columns-spanned"]=w.e.c-w.s.c+1,m["table:number-matrix-rows-spanned"]=w.e.r-w.s.r+1}if(v){switch(v.t){case"b":g=v.v?"TRUE":"FALSE",m["office:value-type"]="boolean",m["office:boolean-value"]=v.v?"true":"false";break;case"n":g=v.w||String(v.v||0),m["office:value-type"]="float",m["office:value"]=v.v||0;break;case"s":case"str":g=null==v.v?"":v.v,m["office:value-type"]="string";break;case"d":g=v.w||Ov(v.v).toISOString(),m["office:value-type"]="date",m["office:date-value"]=Ov(v.v).toISOString(),m["table:style-name"]="ce1";break;default:s.push(t);continue}var b=e(g);if(v.l&&v.l.Target){var x=v.l.Target;"#"==(x="#"==x.charAt(0)?"#"+BA(x.slice(1)):x).charAt(0)||x.match(/^\w+:/)||(x="../"+x),b=cw("text:a",b,{"xlink:href":x.replace(/&/g,"&amp;")})}s.push("          "+cw("table:table-cell",cw("text:p",b,{}),m)+"\n")}else s.push(t)}}s.push("        </table:table-row>\n")}return s.push("      </table:table>\n"),s.join("")};return function(e,t){var r=[Hv],i=lw({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),s=lw({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});"fods"==t.bookType?(r.push("<office:document"+i+s+">\n"),r.push(Sx().replace(/office:document-meta/g,"office:meta"))):r.push("<office:document-content"+i+">\n"),function(e,t){e.push(" <office:automatic-styles>\n"),e.push('  <number:date-style style:name="N37" number:automatic-order="true">\n'),e.push('   <number:month number:style="long"/>\n'),e.push("   <number:text>/</number:text>\n"),e.push('   <number:day number:style="long"/>\n'),e.push("   <number:text>/</number:text>\n"),e.push("   <number:year/>\n"),e.push("  </number:date-style>\n");var n=0;t.SheetNames.map(function(e){return t.Sheets[e]}).forEach(function(t){if(t&&t["!cols"])for(var r=0;r<t["!cols"].length;++r)if(t["!cols"][r]){var i=t["!cols"][r];if(null==i.width&&null==i.wpx&&null==i.wch)continue;NS(i),i.ods=n;var s=t["!cols"][r].wpx+"px";e.push('  <style:style style:name="co'+n+'" style:family="table-column">\n'),e.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+s+'"/>\n'),e.push("  </style:style>\n"),++n}});var r=0;t.SheetNames.map(function(e){return t.Sheets[e]}).forEach(function(t){if(t&&t["!rows"])for(var n=0;n<t["!rows"].length;++n)if(t["!rows"][n]){t["!rows"][n].ods=r;var i=t["!rows"][n].hpx+"px";e.push('  <style:style style:name="ro'+r+'" style:family="table-row">\n'),e.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+i+'"/>\n'),e.push("  </style:style>\n"),++r}}),e.push('  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">\n'),e.push('   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>\n'),e.push("  </style:style>\n"),e.push('  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>\n'),e.push(" </office:automatic-styles>\n")}(r,e),r.push("  <office:body>\n"),r.push("    <office:spreadsheet>\n");for(var a=0;a!=e.SheetNames.length;++a)r.push(n(e.Sheets[e.SheetNames[a]],e,a));return r.push("    </office:spreadsheet>\n"),r.push("  </office:body>\n"),"fods"==t.bookType?r.push("</office:document>"):r.push("</office:document-content>"),r.join("")}}();function ZE(e,t){if("fods"==t.bookType)return JE(e,t);var n=Vv(),r="",i=[],s=[];return zv(n,r="mimetype","application/vnd.oasis.opendocument.spreadsheet"),zv(n,r="content.xml",JE(e,t)),i.push([r,"text/xml"]),s.push([r,"ContentFile"]),zv(n,r="styles.xml",QE(e,t)),i.push([r,"text/xml"]),s.push([r,"StylesFile"]),zv(n,r="meta.xml",Hv+Sx()),i.push([r,"text/xml"]),s.push([r,"MetadataFile"]),zv(n,r="manifest.rdf",function(e){var t=[Hv];t.push('<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">\n');for(var n=0;n!=e.length;++n)t.push(bx(e[n][0],e[n][1])),t.push(xx("",e[n][0]));return t.push(bx("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}(s)),i.push([r,"application/rdf+xml"]),zv(n,r="META-INF/manifest.xml",function(e){var t=[Hv];t.push('<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">\n'),t.push('  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>\n');for(var n=0;n<e.length;++n)t.push('  <manifest:file-entry manifest:full-path="'+e[n][0]+'" manifest:media-type="'+e[n][1]+'"/>\n');return t.push("</manifest:manifest>"),t.join("")}(i)),n}function $E(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function eN(e){return"undefined"!=typeof TextEncoder?(new TextEncoder).encode(e):vy(iw(e))}function tN(e){var t=e.reduce(function(e,t){return e+t.length},0),n=new Uint8Array(t),r=0;return e.forEach(function(e){n.set(e,r),r+=e.length}),n}function nN(e,t){var n=t?t[0]:0,r=127&e[n];e:if(e[n++]>=128){if(r|=(127&e[n])<<7,e[n++]<128)break e;if(r|=(127&e[n])<<14,e[n++]<128)break e;if(r|=(127&e[n])<<21,e[n++]<128)break e;if(r+=(127&e[n])*Math.pow(2,28),++n,e[n++]<128)break e;if(r+=(127&e[n])*Math.pow(2,35),++n,e[n++]<128)break e;if(r+=(127&e[n])*Math.pow(2,42),++n,e[n++]<128)break e}return t&&(t[0]=n),r}function rN(e){var t=new Uint8Array(7);t[0]=127&e;var n=1;e:if(e>127){if(t[n-1]|=128,t[n]=e>>7&127,++n,e<=16383)break e;if(t[n-1]|=128,t[n]=e>>14&127,++n,e<=2097151)break e;if(t[n-1]|=128,t[n]=e>>21&127,++n,e<=268435455)break e;if(t[n-1]|=128,t[n]=e/256>>>21&127,++n,e<=34359738367)break e;if(t[n-1]|=128,t[n]=e/65536>>>21&127,++n,e<=4398046511103)break e;t[n-1]|=128,t[n]=e/16777216>>>21&127,++n}return t.slice(0,n)}function iN(e){var t=0,n=127&e[t];e:if(e[t++]>=128){if(n|=(127&e[t])<<7,e[t++]<128)break e;if(n|=(127&e[t])<<14,e[t++]<128)break e;if(n|=(127&e[t])<<21,e[t++]<128)break e;n|=(127&e[t])<<28}return n}function sN(e){for(var t=[],n=[0];n[0]<e.length;){var r,i=n[0],s=nN(e,n),a=7&s,o=0;if(0==(s=Math.floor(s/8)))break;switch(a){case 0:for(var l=n[0];e[n[0]++]>=128;);r=e.slice(l,n[0]);break;case 5:o=4,r=e.slice(n[0],n[0]+o),n[0]+=o;break;case 1:o=8,r=e.slice(n[0],n[0]+o),n[0]+=o;break;case 2:o=nN(e,n),r=e.slice(n[0],n[0]+o),n[0]+=o;break;default:throw new Error("PB Type ".concat(a," for Field ").concat(s," at offset ").concat(i))}var c={data:r,type:a};null==t[s]?t[s]=[c]:t[s].push(c)}return t}function aN(e){var t=[];return e.forEach(function(e,n){e.forEach(function(e){e.data&&(t.push(rN(8*n+e.type)),2==e.type&&t.push(rN(e.data.length)),t.push(e.data))})}),tN(t)}function oN(e){for(var t,n=[],r=[0];r[0]<e.length;){var i=nN(e,r),s=sN(e.slice(r[0],r[0]+i));r[0]+=i;var a={id:iN(s[1][0].data),messages:[]};s[2].forEach(function(t){var n=sN(t.data),i=iN(n[3][0].data);a.messages.push({meta:n,data:e.slice(r[0],r[0]+i)}),r[0]+=i}),(null==(t=s[3])?void 0:t[0])&&(a.merge=iN(s[3][0].data)>>>0>0),n.push(a)}return n}function lN(e){var t=[];return e.forEach(function(e){var n=[];n[1]=[{data:rN(e.id),type:0}],n[2]=[],null!=e.merge&&(n[3]=[{data:rN(+!!e.merge),type:0}]);var r=[];e.messages.forEach(function(e){r.push(e.data),e.meta[3]=[{type:0,data:rN(e.data.length)}],n[2].push({data:aN(e.meta),type:2})});var i=aN(n);t.push(rN(i.length)),t.push(i),r.forEach(function(e){return t.push(e)})}),tN(t)}function cN(e,t){if(0!=e)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var n=[0],r=nN(t,n),i=[];n[0]<t.length;){var s=3&t[n[0]];if(0!=s){var a=0,o=0;if(1==s?(o=4+(t[n[0]]>>2&7),a=(224&t[n[0]++])<<3,a|=t[n[0]++]):(o=1+(t[n[0]++]>>2),2==s?(a=t[n[0]]|t[n[0]+1]<<8,n[0]+=2):(a=(t[n[0]]|t[n[0]+1]<<8|t[n[0]+2]<<16|t[n[0]+3]<<24)>>>0,n[0]+=4)),i=[tN(i)],0==a)throw new Error("Invalid offset 0");if(a>i[0].length)throw new Error("Invalid offset beyond length");if(o>=a)for(i.push(i[0].slice(-a)),o-=a;o>=i[i.length-1].length;)i.push(i[i.length-1]),o-=i[i.length-1].length;i.push(i[0].slice(-a,-a+o))}else{var l=t[n[0]++]>>2;if(l<60)++l;else{var c=l-59;l=t[n[0]],c>1&&(l|=t[n[0]+1]<<8),c>2&&(l|=t[n[0]+2]<<16),c>3&&(l|=t[n[0]+3]<<24),l>>>=0,l++,n[0]+=c}i.push(t.slice(n[0],n[0]+l)),n[0]+=l}}var u=tN(i);if(u.length!=r)throw new Error("Unexpected length: ".concat(u.length," != ").concat(r));return u}function uN(e){for(var t=[],n=0;n<e.length;){var r=e[n++],i=e[n]|e[n+1]<<8|e[n+2]<<16;n+=3,t.push(cN(r,e.slice(n,n+i))),n+=i}if(n!==e.length)throw new Error("data is not a valid framed stream!");return tN(t)}function dN(e){for(var t=[],n=0;n<e.length;){var r=Math.min(e.length-n,268435455),i=new Uint8Array(4);t.push(i);var s=rN(r),a=s.length;t.push(s),r<=60?(a++,t.push(new Uint8Array([r-1<<2]))):r<=256?(a+=2,t.push(new Uint8Array([240,r-1&255]))):r<=65536?(a+=3,t.push(new Uint8Array([244,r-1&255,r-1>>8&255]))):r<=16777216?(a+=4,t.push(new Uint8Array([248,r-1&255,r-1>>8&255,r-1>>16&255]))):r<=4294967296&&(a+=5,t.push(new Uint8Array([252,r-1&255,r-1>>8&255,r-1>>16&255,r-1>>>24&255]))),t.push(e.slice(n,n+r)),a+=r,i[0]=0,i[1]=255&a,i[2]=a>>8&255,i[3]=a>>16&255,n+=r}return tN(t)}function hN(e,t){var n=new Uint8Array(32),r=$E(n),i=12,s=0;switch(n[0]=5,e.t){case"n":n[1]=2,function(e,t,n){var r=Math.floor(0==n?0:Math.LOG10E*Math.log(Math.abs(n)))+6176-20,i=n/Math.pow(10,r-6176);e[t+15]|=r>>7,e[t+14]|=(127&r)<<1;for(var s=0;i>=1;++s,i/=256)e[t+s]=255&i;e[t+15]|=n>=0?0:128}(n,i,e.v),s|=1,i+=16;break;case"b":n[1]=6,r.setFloat64(i,e.v?1:0,!0),s|=2,i+=8;break;case"s":if(-1==t.indexOf(e.v))throw new Error("Value ".concat(e.v," missing from SST!"));n[1]=3,r.setUint32(i,t.indexOf(e.v),!0),s|=8,i+=4;break;default:throw"unsupported cell type "+e.t}return r.setUint32(8,s,!0),n.slice(0,i)}function fN(e,t){var n=new Uint8Array(32),r=$E(n),i=12,s=0;switch(n[0]=3,e.t){case"n":n[2]=2,r.setFloat64(i,e.v,!0),s|=32,i+=8;break;case"b":n[2]=6,r.setFloat64(i,e.v?1:0,!0),s|=32,i+=8;break;case"s":if(-1==t.indexOf(e.v))throw new Error("Value ".concat(e.v," missing from SST!"));n[2]=3,r.setUint32(i,t.indexOf(e.v),!0),s|=16,i+=4;break;default:throw"unsupported cell type "+e.t}return r.setUint32(4,s,!0),n.slice(0,i)}function pN(e){return nN(sN(e)[1][0].data)}function mN(e,t,n){var r,i,s,a;if(!(null==(r=e[6])?void 0:r[0])||!(null==(i=e[7])?void 0:i[0]))throw"Mutation only works on post-BNC storages!";if((null==(a=null==(s=e[8])?void 0:s[0])?void 0:a.data)&&iN(e[8][0].data)>0||!1)throw"Math only works with normal offsets";for(var o=0,l=$E(e[7][0].data),c=0,u=[],d=$E(e[4][0].data),h=0,f=[],p=0;p<t.length;++p)if(null!=t[p]){var m,g;switch(l.setUint16(2*p,c,!0),d.setUint16(2*p,h,!0),typeof t[p]){case"string":m=hN({t:"s",v:t[p]},n),g=fN({t:"s",v:t[p]},n);break;case"number":m=hN({t:"n",v:t[p]},n),g=fN({t:"n",v:t[p]},n);break;case"boolean":m=hN({t:"b",v:t[p]},n),g=fN({t:"b",v:t[p]},n);break;default:throw new Error("Unsupported value "+t[p])}u.push(m),c+=m.length,f.push(g),h+=g.length,++o}else l.setUint16(2*p,65535,!0),d.setUint16(2*p,65535);for(e[2][0].data=rN(o);p<e[7][0].data.length/2;++p)l.setUint16(2*p,65535,!0),d.setUint16(2*p,65535,!0);return e[6][0].data=tN(u),e[3][0].data=tN(f),o}function gN(e){return function(t){for(var n=0;n!=e.length;++n){var r=e[n];void 0===t[r[0]]&&(t[r[0]]=r[1]),"n"===r[2]&&(t[r[0]]=Number(t[r[0]]))}}}function yN(e){gN([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function vN(e,t){return"ods"==t.bookType?ZE(e,t):"numbers"==t.bookType?function(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var n=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var r=_b(n["!ref"]);r.s.r=r.s.c=0;var i=!1;r.e.c>9&&(i=!0,r.e.c=9),r.e.r>49&&(i=!0,r.e.r=49),i&&console.error("The Numbers writer is currently limited to ".concat(Tb(r)));var s=IN(n,{range:r,header:1}),a=["~Sh33tJ5~"];s.forEach(function(e){return e.forEach(function(e){"string"==typeof e&&a.push(e)})});var o={},l=[],c=yv.read(t.numbers,{type:"base64"});c.FileIndex.map(function(e,t){return[e,c.FullPaths[t]]}).forEach(function(e){var t=e[0],n=e[1];2==t.type&&t.name.match(/\.iwa/)&&oN(uN(t.content)).forEach(function(e){l.push(e.id),o[e.id]={deps:[],location:n,type:iN(e.messages[0].meta[1][0].data)}})}),l.sort(function(e,t){return e-t});var u=l.filter(function(e){return e>1}).map(function(e){return[e,rN(e)]});c.FileIndex.map(function(e,t){return[e,c.FullPaths[t]]}).forEach(function(e){var t=e[0];e[1],t.name.match(/\.iwa/)&&oN(uN(t.content)).forEach(function(e){e.messages.forEach(function(t){u.forEach(function(t){e.messages.some(function(e){return 11006!=iN(e.meta[1][0].data)&&function(e,t){e:for(var n=0;n<=e.length-t.length;++n){for(var r=0;r<t.length;++r)if(e[n+r]!=t[r])continue e;return!0}return!1}(e.data,t[1])})&&o[t[0]].deps.push(e.id)})})})});for(var d,h=yv.find(c,o[1].location),f=oN(uN(h.content)),p=0;p<f.length;++p){var m=f[p];1==m.id&&(d=m)}var g=pN(sN(d.messages[0].data)[1][0].data);for(f=oN(uN((h=yv.find(c,o[g].location)).content)),p=0;p<f.length;++p)(m=f[p]).id==g&&(d=m);for(g=pN(sN(d.messages[0].data)[2][0].data),f=oN(uN((h=yv.find(c,o[g].location)).content)),p=0;p<f.length;++p)(m=f[p]).id==g&&(d=m);for(g=pN(sN(d.messages[0].data)[2][0].data),f=oN(uN((h=yv.find(c,o[g].location)).content)),p=0;p<f.length;++p)(m=f[p]).id==g&&(d=m);var y=sN(d.messages[0].data);y[6][0].data=rN(r.e.r+1),y[7][0].data=rN(r.e.c+1);for(var v=pN(y[46][0].data),w=yv.find(c,o[v].location),b=oN(uN(w.content)),x=0;x<b.length&&b[x].id!=v;++x);if(b[x].id!=v)throw"Bad ColumnRowUIDMapArchive";var S=sN(b[x].messages[0].data);S[1]=[],S[2]=[],S[3]=[];for(var A=0;A<=r.e.c;++A){var E=[];E[1]=E[2]=[{type:0,data:rN(A+420690)}],S[1].push({type:2,data:aN(E)}),S[2].push({type:0,data:rN(A)}),S[3].push({type:0,data:rN(A)})}S[4]=[],S[5]=[],S[6]=[];for(var N=0;N<=r.e.r;++N)(E=[])[1]=E[2]=[{type:0,data:rN(N+726270)}],S[4].push({type:2,data:aN(E)}),S[5].push({type:0,data:rN(N)}),S[6].push({type:0,data:rN(N)});b[x].messages[0].data=aN(S),w.content=dN(lN(b)),w.size=w.content.length,delete y[46];var C=sN(y[4][0].data);C[7][0].data=rN(r.e.r+1);var _=pN(sN(C[1][0].data)[2][0].data);if((b=oN(uN((w=yv.find(c,o[_].location)).content)))[0].id!=_)throw"Bad HeaderStorageBucket";var T=sN(b[0].messages[0].data);for(N=0;N<s.length;++N){var I=sN(T[2][0].data);I[1][0].data=rN(N),I[4][0].data=rN(s[N].length),T[2][N]={type:T[2][0].type,data:aN(I)}}b[0].messages[0].data=aN(T),w.content=dN(lN(b)),w.size=w.content.length;var k=pN(C[2][0].data);if((b=oN(uN((w=yv.find(c,o[k].location)).content)))[0].id!=k)throw"Bad HeaderStorageBucket";for(T=sN(b[0].messages[0].data),A=0;A<=r.e.c;++A)(I=sN(T[2][0].data))[1][0].data=rN(A),I[4][0].data=rN(r.e.r+1),T[2][A]={type:T[2][0].type,data:aN(I)};b[0].messages[0].data=aN(T),w.content=dN(lN(b)),w.size=w.content.length;var P=pN(C[4][0].data);!function(){for(var e,t=yv.find(c,o[P].location),n=oN(uN(t.content)),r=0;r<n.length;++r){var i=n[r];i.id==P&&(e=i)}var s=sN(e.messages[0].data);s[3]=[];var l=[];a.forEach(function(e,t){l[1]=[{type:0,data:rN(t)}],l[2]=[{type:0,data:rN(1)}],l[3]=[{type:2,data:eN(e)}],s[3].push({type:2,data:aN(l)})}),e.messages[0].data=aN(s);var u=dN(lN(n));t.content=u,t.size=t.content.length}();var R=sN(C[3][0].data),D=R[1][0];delete R[2];var O=sN(D.data),L=pN(O[2][0].data);!function(){for(var e,t=yv.find(c,o[L].location),n=oN(uN(t.content)),i=0;i<n.length;++i){var l=n[i];l.id==L&&(e=l)}var u=sN(e.messages[0].data);delete u[6],delete R[7];var d=new Uint8Array(u[5][0].data);u[5]=[];for(var h=0,f=0;f<=r.e.r;++f){var p=sN(d);h+=mN(p,s[f],a),p[1][0].data=rN(f),u[5].push({data:aN(p),type:2})}u[1]=[{type:0,data:rN(r.e.c+1)}],u[2]=[{type:0,data:rN(r.e.r+1)}],u[3]=[{type:0,data:rN(h)}],u[4]=[{type:0,data:rN(r.e.r+1)}],e.messages[0].data=aN(u);var m=dN(lN(n));t.content=m,t.size=t.content.length}(),D.data=aN(O),C[3][0].data=aN(R),y[4][0].data=aN(C),d.messages[0].data=aN(y);var M=dN(lN(f));return h.content=M,h.size=h.content.length,c}(e,t):"xlsb"==t.bookType?function(e,t){GS=1024,e&&!e.SSF&&(e.SSF=Mv(Dy));e&&e.SSF&&(pv(),fv(e.SSF),t.revssf=Ev(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF);t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,UA?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var n="xlsb"==t.bookType?"bin":"xml",r=ZS.indexOf(t.bookType)>-1,i={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};yN(t=t||{});var s=Vv(),a="",o=0;t.cellXfs=[],WA(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});if(zv(s,a="docProps/core.xml",Nx(e.Props,t)),i.coreprops.push(a),wx(t.rels,2,a,gx.CORE_PROPS),a="docProps/app.xml",e.Props&&e.Props.SheetNames);else if(e.Workbook&&e.Workbook.Sheets){for(var l=[],c=0;c<e.SheetNames.length;++c)2!=(e.Workbook.Sheets[c]||{}).Hidden&&l.push(e.SheetNames[c]);e.Props.SheetNames=l}else e.Props.SheetNames=e.SheetNames;e.Props.Worksheets=e.Props.SheetNames.length,zv(s,a,Tx(e.Props)),i.extprops.push(a),wx(t.rels,3,a,gx.EXT_PROPS),e.Custprops!==e.Props&&xv(e.Custprops||{}).length>0&&(zv(s,a="docProps/custom.xml",Ix(e.Custprops)),i.custprops.push(a),wx(t.rels,4,a,gx.CUST_PROPS));for(o=1;o<=e.SheetNames.length;++o){var u={"!id":{}},d=e.Sheets[e.SheetNames[o-1]];(d||{})["!type"];if(zv(s,a="xl/worksheets/sheet"+o+"."+n,wE(o-1,a,t,e,u)),i.sheets.push(a),wx(t.wbrels,-1,"worksheets/sheet"+o+"."+n,gx.WS[0]),d){var h=d["!comments"],f=!1,p="";h&&h.length>0&&(zv(s,p="xl/comments"+o+"."+n,bE(h,p,t)),i.comments.push(p),wx(u,-1,"../comments"+o+"."+n,gx.CMNT),f=!0),d["!legacy"]&&f&&zv(s,"xl/drawings/vmlDrawing"+o+".vml",KS(o,d["!comments"])),delete d["!comments"],delete d["!legacy"]}u["!id"].rId1&&zv(s,yx(a),vx(u))}null!=t.Strings&&t.Strings.length>0&&(zv(s,a="xl/sharedStrings."+n,function(e,t,n){return(".bin"===t.slice(-4)?gS:pS)(e,n)}(t.Strings,a,t)),i.strs.push(a),wx(t.wbrels,-1,"sharedStrings."+n,gx.SST));zv(s,a="xl/workbook."+n,function(e,t,n){return(".bin"===t.slice(-4)?vE:mE)(e,n)}(e,a,t)),i.workbooks.push(a),wx(t.rels,1,a,gx.WB),zv(s,a="xl/theme/theme1.xml",HS(e.Themes,t)),i.themes.push(a),wx(t.wbrels,-1,"theme/theme1.xml",gx.THEME),zv(s,a="xl/styles."+n,function(e,t,n){return(".bin"===t.slice(-4)?VS:IS)(e,n)}(e,a,t)),i.styles.push(a),wx(t.wbrels,-1,"styles."+n,gx.STY),e.vbaraw&&r&&(zv(s,a="xl/vbaProject.bin",e.vbaraw),i.vba.push(a),wx(t.wbrels,-1,"vbaProject.bin",gx.VBA));return zv(s,a="xl/metadata."+n,function(e){return(".bin"===e.slice(-4)?WS:qS)()}(a)),i.metadata.push(a),wx(t.wbrels,-1,"metadata."+n,gx.XLMETA),zv(s,"[Content_Types].xml",mx(i,t)),zv(s,"_rels/.rels",vx(t.rels)),zv(s,"xl/_rels/workbook."+n+".rels",vx(t.wbrels)),delete t.revssf,delete t.ssf,s}(e,t):wN(e,t)}function wN(e,t){GS=1024,e&&!e.SSF&&(e.SSF=Mv(Dy)),e&&e.SSF&&(pv(),fv(e.SSF),t.revssf=Ev(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,UA?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var n="xml",r=ZS.indexOf(t.bookType)>-1,i={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};yN(t=t||{});var s=Vv(),a="",o=0;if(t.cellXfs=[],WA(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),zv(s,a="docProps/core.xml",Nx(e.Props,t)),i.coreprops.push(a),wx(t.rels,2,a,gx.CORE_PROPS),a="docProps/app.xml",e.Props&&e.Props.SheetNames);else if(e.Workbook&&e.Workbook.Sheets){for(var l=[],c=0;c<e.SheetNames.length;++c)2!=(e.Workbook.Sheets[c]||{}).Hidden&&l.push(e.SheetNames[c]);e.Props.SheetNames=l}else e.Props.SheetNames=e.SheetNames;e.Props.Worksheets=e.Props.SheetNames.length,zv(s,a,Tx(e.Props)),i.extprops.push(a),wx(t.rels,3,a,gx.EXT_PROPS),e.Custprops!==e.Props&&xv(e.Custprops||{}).length>0&&(zv(s,a="docProps/custom.xml",Ix(e.Custprops)),i.custprops.push(a),wx(t.rels,4,a,gx.CUST_PROPS));var u=["SheetJ5"];for(t.tcid=0,o=1;o<=e.SheetNames.length;++o){var d={"!id":{}},h=e.Sheets[e.SheetNames[o-1]];(h||{})["!type"];if(zv(s,a="xl/worksheets/sheet"+o+"."+n,XA(o-1,t,e,d)),i.sheets.push(a),wx(t.wbrels,-1,"worksheets/sheet"+o+"."+n,gx.WS[0]),h){var f=h["!comments"],p=!1,m="";if(f&&f.length>0){var g=!1;f.forEach(function(e){e[1].forEach(function(e){1==e.T&&(g=!0)})}),g&&(zv(s,m="xl/threadedComments/threadedComment"+o+"."+n,XS(f,u,t)),i.threadedcomments.push(m),wx(d,-1,"../threadedComments/threadedComment"+o+"."+n,gx.TCMNT)),zv(s,m="xl/comments"+o+"."+n,YS(f)),i.comments.push(m),wx(d,-1,"../comments"+o+"."+n,gx.CMNT),p=!0}h["!legacy"]&&p&&zv(s,"xl/drawings/vmlDrawing"+o+".vml",KS(o,h["!comments"])),delete h["!comments"],delete h["!legacy"]}d["!id"].rId1&&zv(s,yx(a),vx(d))}return null!=t.Strings&&t.Strings.length>0&&(zv(s,a="xl/sharedStrings."+n,pS(t.Strings,t)),i.strs.push(a),wx(t.wbrels,-1,"sharedStrings."+n,gx.SST)),zv(s,a="xl/workbook."+n,mE(e)),i.workbooks.push(a),wx(t.rels,1,a,gx.WB),zv(s,a="xl/theme/theme1.xml",HS(e.Themes,t)),i.themes.push(a),wx(t.wbrels,-1,"theme/theme1.xml",gx.THEME),zv(s,a="xl/styles."+n,IS(e,t)),i.styles.push(a),wx(t.wbrels,-1,"styles."+n,gx.STY),e.vbaraw&&r&&(zv(s,a="xl/vbaProject.bin",e.vbaraw),i.vba.push(a),wx(t.wbrels,-1,"vbaProject.bin",gx.VBA)),zv(s,a="xl/metadata."+n,qS()),i.metadata.push(a),wx(t.wbrels,-1,"metadata."+n,gx.XLMETA),u.length>1&&(zv(s,a="xl/persons/person.xml",function(e){var t=[Hv,cw("personList",null,{xmlns:gw,"xmlns:x":Ew[0]}).replace(/[\/]>/,">")];return e.forEach(function(e,n){t.push(cw("person",null,{displayName:e,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:e,providerId:"None"}))}),t.push("</personList>"),t.join("")}(u)),i.people.push(a),wx(t.wbrels,-1,"persons/person.xml",gx.PEOPLE)),zv(s,"[Content_Types].xml",mx(i,t)),zv(s,"_rels/.rels",vx(t.rels)),zv(s,"xl/_rels/workbook.xml.rels",vx(t.wbrels)),delete t.revssf,delete t.ssf,s}function bN(e,t){var n="";switch((t||{}).type||"base64"){case"buffer":case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":n=fy(e.slice(0,12));break;case"binary":n=e;break;default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3),n.charCodeAt(4),n.charCodeAt(5),n.charCodeAt(6),n.charCodeAt(7)]}function xN(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return bv(t.file,yv.write(e,{type:py?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return yv.write(e,t)}function SN(e,t){var n={},r=py?"nodebuffer":"undefined"!==typeof Uint8Array?"array":"string";if(t.compression&&(n.compression="DEFLATE"),t.password)n.type=r;else switch(t.type){case"base64":n.type="base64";break;case"binary":n.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":n.type=r;break;default:throw new Error("Unrecognized type "+t.type)}var i=e.FullPaths?yv.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[n.type]||n.type,compression:!!t.compression}):e.generate(n);if("undefined"!==typeof Deno&&"string"==typeof i){if("binary"==t.type||"base64"==t.type)return i;i=new Uint8Array(wy(i))}return t.password&&"undefined"!==typeof encrypt_agile?xN(encrypt_agile(i,t.password),t):"file"===t.type?bv(t.file,i):"string"==t.type?rw(i):i}function AN(e,t,n){n||(n="");var r=n+e;switch(t.type){case"base64":return hy(iw(r));case"binary":return iw(r);case"string":return e;case"file":return bv(t.file,r,"utf8");case"buffer":return py?my(r,"utf8"):"undefined"!==typeof TextEncoder?(new TextEncoder).encode(r):AN(r,{type:"binary"}).split("").map(function(e){return e.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function EN(e,t){switch(t.type){case"string":case"base64":case"binary":for(var n="",r=0;r<e.length;++r)n+=String.fromCharCode(e[r]);return"base64"==t.type?hy(n):"string"==t.type?rw(n):n;case"file":return bv(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function NN(e,t){ay(),pE(e);var n=Mv(t||{});if(n.cellStyles&&(n.cellNF=!0,n.sheetStubs=!0),"array"==n.type){n.type="binary";var r=NN(e,n);return n.type="array",wy(r)}var i=0;if(n.sheet&&(i="number"==typeof n.sheet?n.sheet:e.SheetNames.indexOf(n.sheet),!e.SheetNames[i]))throw new Error("Sheet not found: "+n.sheet+" : "+typeof n.sheet);switch(n.bookType||"xlsb"){case"xml":case"xlml":return AN(CE(e,n),n);case"slk":case"sylk":return AN(lS.from_sheet(e.Sheets[e.SheetNames[i]],n),n);case"htm":case"html":return AN(GE(e.Sheets[e.SheetNames[i]],n),n);case"txt":return function(e,t){switch(t.type){case"base64":return hy(e);case"binary":case"string":return e;case"file":return bv(t.file,e,"binary");case"buffer":return py?my(e,"binary"):e.split("").map(function(e){return e.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}(DN(e.Sheets[e.SheetNames[i]],n),n);case"csv":return AN(RN(e.Sheets[e.SheetNames[i]],n),n,"\ufeff");case"dif":return AN(cS.from_sheet(e.Sheets[e.SheetNames[i]],n),n);case"dbf":return EN(oS.from_sheet(e.Sheets[e.SheetNames[i]],n),n);case"prn":return AN(dS.from_sheet(e.Sheets[e.SheetNames[i]],n),n);case"rtf":return AN(wS.from_sheet(e.Sheets[e.SheetNames[i]],n),n);case"eth":return AN(uS.from_sheet(e.Sheets[e.SheetNames[i]],n),n);case"fods":return AN(ZE(e,n),n);case"wk1":return EN(hS.sheet_to_wk1(e.Sheets[e.SheetNames[i]],n),n);case"wk3":return EN(hS.book_to_wk3(e,n),n);case"biff2":n.biff||(n.biff=2);case"biff3":n.biff||(n.biff=3);case"biff4":return n.biff||(n.biff=4),EN(zE(e,n),n);case"biff5":n.biff||(n.biff=5);case"biff8":case"xla":case"xls":return n.biff||(n.biff=8),function(e,t){var n=t||{};return xN(kE(e,n),n)}(e,n);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return function(e,t){var n=Mv(t||{});return SN(vN(e,n),n)}(e,n);default:throw new Error("Unrecognized bookType |"+n.bookType+"|")}}function CN(e){if(!e.bookType){var t=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();t.match(/^\.[a-z]+$/)&&(e.bookType=t.slice(1)),e.bookType={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"}[e.bookType]||e.bookType}}function _N(e,t,n){var r=n||{};return r.type="file",r.file=t,CN(r),NN(e,r)}function TN(e,t,n,r,i,s,a,o){var l=Sb(n),c=o.defval,u=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),d=!0,h=1===i?[]:{};if(1!==i)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:n,enumerable:!1})}catch(b_){h.__rowNum__=n}else h.__rowNum__=n;if(!a||e[n])for(var f=t.s.c;f<=t.e.c;++f){var p=a?e[n][f]:e[r[f]+l];if(void 0!==p&&void 0!==p.t){var m=p.v;switch(p.t){case"z":if(null==m)break;continue;case"e":m=0==m?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+p.t)}if(null!=s[f]){if(null==m)if("e"==p.t&&null===m)h[s[f]]=null;else if(void 0!==c)h[s[f]]=c;else{if(!u||null!==m)continue;h[s[f]]=null}else h[s[f]]=u&&("n"!==p.t||"n"===p.t&&!1!==o.rawNumbers)?m:Pb(p,m,o);null!=m&&(d=!1)}}else{if(void 0===c)continue;null!=s[f]&&(h[s[f]]=c)}}return{row:h,isempty:d}}function IN(e,t){if(null==e||null==e["!ref"])return[];var n={t:"n",v:0},r=0,i=1,s=[],a=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},c=t||{},u=null!=c.range?c.range:e["!ref"];switch(1===c.header?r=1:"A"===c.header?r=2:Array.isArray(c.header)?r=3:null==c.header&&(r=0),typeof u){case"string":l=Ib(u);break;case"number":(l=Ib(e["!ref"])).s.r=u;break;default:l=u}r>0&&(i=0);var d=Sb(l.s.r),h=[],f=[],p=0,m=0,g=Array.isArray(e),y=l.s.r,v=0,w={};g&&!e[y]&&(e[y]=[]);var b=c.skipHidden&&e["!cols"]||[],x=c.skipHidden&&e["!rows"]||[];for(v=l.s.c;v<=l.e.c;++v)if(!(b[v]||{}).hidden)switch(h[v]=Eb(v),n=g?e[y][v]:e[h[v]+d],r){case 1:s[v]=v-l.s.c;break;case 2:s[v]=h[v];break;case 3:s[v]=c.header[v-l.s.c];break;default:if(null==n&&(n={w:"__EMPTY",t:"s"}),o=a=Pb(n,null,c),m=w[a]||0){do{o=a+"_"+m++}while(w[o]);w[a]=m,w[o]=1}else w[a]=1;s[v]=o}for(y=l.s.r+i;y<=l.e.r;++y)if(!(x[y]||{}).hidden){var S=TN(e,l,y,h,r,s,g,c);(!1===S.isempty||(1===r?!1!==c.blankrows:c.blankrows))&&(f[p++]=S.row)}return f.length=p,f}var kN=/"/g;function PN(e,t,n,r,i,s,a,o){for(var l=!0,c=[],u="",d=Sb(n),h=t.s.c;h<=t.e.c;++h)if(r[h]){var f=o.dense?(e[n]||[])[h]:e[r[h]+d];if(null==f)u="";else if(null!=f.v){l=!1,u=""+(o.rawNumbers&&"n"==f.t?f.v:Pb(f,null,o));for(var p=0,m=0;p!==u.length;++p)if((m=u.charCodeAt(p))===i||m===s||34===m||o.forceQuotes){u='"'+u.replace(kN,'""')+'"';break}"ID"==u&&(u='"ID"')}else null==f.f||f.F?u="":(l=!1,(u="="+f.f).indexOf(",")>=0&&(u='"'+u.replace(kN,'""')+'"'));c.push(u)}return!1===o.blankrows&&l?null:c.join(a)}function RN(e,t){var n=[],r=null==t?{}:t;if(null==e||null==e["!ref"])return"";var i=Ib(e["!ref"]),s=void 0!==r.FS?r.FS:",",a=s.charCodeAt(0),o=void 0!==r.RS?r.RS:"\n",l=o.charCodeAt(0),c=new RegExp(("|"==s?"\\|":s)+"+$"),u="",d=[];r.dense=Array.isArray(e);for(var h=r.skipHidden&&e["!cols"]||[],f=r.skipHidden&&e["!rows"]||[],p=i.s.c;p<=i.e.c;++p)(h[p]||{}).hidden||(d[p]=Eb(p));for(var m=0,g=i.s.r;g<=i.e.r;++g)(f[g]||{}).hidden||null!=(u=PN(e,i,g,d,a,l,s,r))&&(r.strip&&(u=u.replace(c,"")),(u||!1!==r.blankrows)&&n.push((m++?o:"")+u));return delete r.dense,n.join("")}function DN(e,t){t||(t={}),t.FS="\t",t.RS="\n";var n=RN(e,t);if("undefined"==typeof ly||"string"==t.type)return n;var r=ly.utils.encode(1200,n,"str");return String.fromCharCode(255)+String.fromCharCode(254)+r}function ON(e,t,n){var r,i=n||{},s=+!i.skipHeader,a=e||{},o=0,l=0;if(a&&null!=i.origin)if("number"==typeof i.origin)o=i.origin;else{var c="string"==typeof i.origin?Nb(i.origin):i.origin;o=c.r,l=c.c}var u={s:{c:0,r:0},e:{c:l,r:o+t.length-1+s}};if(a["!ref"]){var d=Ib(a["!ref"]);u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),-1==o&&(o=d.e.r+1,u.e.r=o+t.length-1+s)}else-1==o&&(o=0,u.e.r=t.length-1+s);var h=i.header||[],f=0;t.forEach(function(e,t){xv(e).forEach(function(n){-1==(f=h.indexOf(n))&&(h[f=h.length]=n);var c=e[n],u="z",d="",p=Cb({c:l+f,r:o+t+s});r=LN(a,p),!c||"object"!==typeof c||c instanceof Date?("number"==typeof c?u="n":"boolean"==typeof c?u="b":"string"==typeof c?u="s":c instanceof Date?(u="d",i.cellDates||(u="n",c=Cv(c)),d=i.dateNF||Dy[14]):null===c&&i.nullError&&(u="e",c=0),r?(r.t=u,r.v=c,delete r.w,delete r.R,d&&(r.z=d)):a[p]=r={t:u,v:c},d&&(r.z=d)):a[p]=c})}),u.e.c=Math.max(u.e.c,l+h.length-1);var p=Sb(o);if(s)for(f=0;f<h.length;++f)a[Eb(f+l)+p]={t:"s",v:h[f]};return a["!ref"]=Tb(u),a}function LN(e,t,n){if("string"==typeof t){if(Array.isArray(e)){var r=Nb(t);return e[r.r]||(e[r.r]=[]),e[r.r][r.c]||(e[r.r][r.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return LN(e,Cb("number"!=typeof t?t:{r:t,c:n||0}))}function MN(){return{SheetNames:[],Sheets:{}}}function FN(e,t,n,r){var i=1;if(!n)for(;i<=65535&&-1!=e.SheetNames.indexOf(n="Sheet"+i);++i,n=void 0);if(!n||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&e.SheetNames.indexOf(n)>=0){var s=n.match(/(^.*?)(\d+)$/);i=s&&+s[2]||0;var a=s&&s[1]||n;for(++i;i<=65535&&-1!=e.SheetNames.indexOf(n=a+i);++i);}if(fE(n),e.SheetNames.indexOf(n)>=0)throw new Error("Worksheet with name |"+n+"| already exists!");return e.SheetNames.push(n),e.Sheets[n]=t,n}function jN(e,t,n){return t?(e.l={Target:t},n&&(e.l.Tooltip=n)):delete e.l,e}var BN={encode_col:Eb,encode_row:Sb,encode_cell:Cb,encode_range:Tb,decode_col:Ab,decode_row:xb,split_cell:function(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")},decode_cell:Nb,decode_range:_b,format_cell:Pb,sheet_add_aoa:Db,sheet_add_json:ON,sheet_add_dom:KE,aoa_to_sheet:Ob,json_to_sheet:function(e,t){return ON(null,e,t)},table_to_sheet:YE,table_to_book:function(e,t){return Rb(YE(e,t),t)},sheet_to_csv:RN,sheet_to_txt:DN,sheet_to_json:IN,sheet_to_html:GE,sheet_to_formulae:function(e){var t,n="",r="";if(null==e||null==e["!ref"])return[];var i,s=Ib(e["!ref"]),a="",o=[],l=[],c=Array.isArray(e);for(i=s.s.c;i<=s.e.c;++i)o[i]=Eb(i);for(var u=s.s.r;u<=s.e.r;++u)for(a=Sb(u),i=s.s.c;i<=s.e.c;++i)if(n=o[i]+a,r="",void 0!==(t=c?(e[u]||[])[i]:e[n])){if(null!=t.F){if(n=t.F,!t.f)continue;r=t.f,-1==n.indexOf(":")&&(n=n+":"+n)}if(null!=t.f)r=t.f;else{if("z"==t.t)continue;if("n"==t.t&&null!=t.v)r=""+t.v;else if("b"==t.t)r=t.v?"TRUE":"FALSE";else if(void 0!==t.w)r="'"+t.w;else{if(void 0===t.v)continue;r="s"==t.t?"'"+t.v:""+t.v}}l[l.length]=n+"="+r}return l},sheet_to_row_object_array:IN,sheet_get_cell:LN,book_new:MN,book_append_sheet:FN,book_set_sheet_visibility:function(e,t,n){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var r=function(e,t){if("number"==typeof t){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}if("string"==typeof t){var n=e.SheetNames.indexOf(t);if(n>-1)return n;throw new Error("Cannot find sheet name |"+t+"|")}throw new Error("Cannot find sheet |"+t+"|")}(e,t);switch(e.Workbook.Sheets[r]||(e.Workbook.Sheets[r]={}),n){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+n)}e.Workbook.Sheets[r].Hidden=n},cell_set_number_format:function(e,t){return e.z=t,e},cell_set_hyperlink:jN,cell_set_internal_link:function(e,t,n){return jN(e,"#"+t,n)},cell_add_comment:function(e,t,n){e.c||(e.c=[]),e.c.push({t:t,a:n||"SheetJS"})},sheet_set_array_formula:function(e,t,n,r){for(var i="string"!=typeof t?t:Ib(t),s="string"==typeof t?t:Tb(t),a=i.s.r;a<=i.e.r;++a)for(var o=i.s.c;o<=i.e.c;++o){var l=LN(e,a,o);l.t="n",l.F=s,delete l.v,a==i.s.r&&o==i.s.c&&(l.f=n,r&&(l.D=!0))}return e},consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};$g.version;const UN=t=>{var n,r;let{customers:i,payments:s,selectedDate:a,onAddPayment:o,onDeletePayment:l,onUpdatePayment:c,isDarkMode:u}=t;const[d,h]=(0,e.useState)(""),[f,p]=(0,e.useState)(""),[m,g]=(0,e.useState)(a),[y,v]=(0,e.useState)(""),[w,b]=(0,e.useState)(""),[x,S]=(0,e.useState)(!1),[A,E]=(0,e.useState)([]),[N,C]=(0,e.useState)(a),[_,T]=(0,e.useState)(a),[I,k]=(0,e.useState)(!1),[P,R]=(0,e.useState)(""),[D,O]=(0,e.useState)(""),[L,M]=(0,e.useState)(!1),[F,j]=(0,e.useState)(!0),[B,U]=(0,e.useState)({show:!1,payment:null}),[z,V]=(0,e.useState)(!1),[H,W]=(0,e.useState)(null),[q,G]=(0,e.useState)(""),[K,Y]=(0,e.useState)(""),[X,Q]=(0,e.useState)(""),[J,Z]=(0,e.useState)(""),[$,ee]=(0,e.useState)(""),[te,ne]=(0,e.useState)(!1),re=(0,e.useRef)(null),ie=(0,e.useRef)(null),se=(0,e.useRef)(null),[ae,oe]=(0,e.useState)(new Set),[le,ce]=(0,e.useState)(!1);(0,e.useEffect)(()=>{E(el.Ay.getSettlementTypes())},[]),(0,e.useEffect)(()=>{const e=e=>{re.current&&!re.current.contains(e.target)&&S(!1),ie.current&&!ie.current.contains(e.target)&&ne(!1),se.current&&!se.current.contains(e.target)&&M(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,e.useEffect)(()=>{C(a),T(a),g(a)},[a]);const ue=i.filter(e=>e.name.toLowerCase().includes(w.toLowerCase())),de=i.filter(e=>e.name.toLowerCase().includes($.toLowerCase())),he=i.filter(e=>e.name.toLowerCase().includes(D.toLowerCase())),fe=()=>{if(d&&f&&parseFloat(f)>0&&m){const e=i.find(e=>e.id===d);if(e){o({customerId:d,customerName:e.name,amount:parseFloat(f),date:m,mode:y});const t=m,n=y;h(""),b(""),p(""),g(t),v(n)}}},pe=s.filter(e=>{const t=e.date>=N&&e.date<=_;let n=F;if(!F&&P){const t=i.find(e=>e.id===P);t&&(n=e.customerId===P||e.customerName===t.name)}return t&&n}),me=pe.reduce((e,t)=>e+t.amount,0),ge=e=>{const t=new Date(e+"T00:00:00"),n=t.getDate(),r=t.toLocaleDateString("en-US",{month:"short"}),i=t.getFullYear();return"".concat(n," ").concat(r," ").concat(i)};(0,e.useEffect)(()=>{ae.size>0&&ae.size===pe.length?ce(!0):0!==ae.size&&0!==pe.length||ce(!1)},[pe,ae]);const ye=()=>{try{const e=new al.default;let t=20;e.setFontSize(18),e.text("Payment Receipts Report",105,t,{align:"center"}),t+=10,e.setFontSize(12);const n="From: ".concat(new Date(N).toLocaleDateString("en-IN")," To: ").concat(new Date(_).toLocaleDateString("en-IN"));if(e.text(n,105,t,{align:"center"}),t+=15,0===pe.length)e.setFontSize(12),e.text("No receipts in selected date range",105,t,{align:"center"});else{const n=["Date","Customer","Settlement Type","Amount"],r=pe.map(e=>{var t;const n=e.customerName||(null===(t=i.find(t=>t.id===e.customerId))||void 0===t?void 0:t.name)||"Unknown";return[new Date(e.date).toLocaleDateString("en-IN",{day:"2-digit",month:"short"}),n,e.mode||"N/A",e.amount.toFixed(2)]}),s=["Total","","",me.toFixed(2)];r.push(s),e.autoTable({startY:t,head:[n],body:r,theme:"grid",headStyles:{fillColor:[240,240,240],textColor:[0,0,0]},styles:{fontSize:10},footStyles:{fillColor:[240,240,240],fontStyle:"bold"}})}t=e.internal.pageSize.height-15,e.setFontSize(9),e.text("Generated on: ".concat((new Date).toLocaleString("en-IN")),105,t,{align:"center"});const r=e.output("dataurlstring").split(",")[1],s="Payment_Receipts_".concat(N,"_to_").concat(_,".pdf");window.MPumpCalcAndroid&&window.MPumpCalcAndroid.openPdfWithViewer?window.MPumpCalcAndroid.openPdfWithViewer(r,s):(console.error("Android interface not available"),alert("PDF generation is only available in the Android app"))}catch(e){console.error("Error generating PDF for Android:",e),alert("Error generating PDF: "+e.message)}},ve=()=>{try{const e=pe.map(e=>{var t;const n=e.customerName||(null===(t=i.find(t=>t.id===e.customerId))||void 0===t?void 0:t.name)||"Unknown";return"<tr><td>"+new Date(e.date).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})+"</td><td>"+n+"</td><td>"+(e.mode||"N/A")+'</td><td class="r">'+e.amount.toFixed(2)+"</td></tr>"}).join(""),t='<!DOCTYPE html><html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0"><title>Payment Receipts Report</title><style>body{font-family:Arial,sans-serif;margin:20px;padding:0;line-height:1.4}h1{font-size:24px;margin:10px 0;text-align:center;color:#333}p{font-size:14px;margin:5px 0;text-align:center;color:#666}table{width:100%;border-collapse:collapse;margin:15px 0;font-size:13px}th{background:#f0f0f0;border:1px solid #333;padding:8px;text-align:left;font-weight:bold}td{border:1px solid #333;padding:6px}.r{text-align:right}.total-row{font-weight:bold;background:#f8f8f8}.print-btn{background:#007bff;color:white;border:none;padding:10px 20px;font-size:16px;cursor:pointer;border-radius:5px;margin:10px auto;display:block;box-shadow:0 2px 4px rgba(0,0,0,0.2)}.print-btn:hover{background:#0056b3}.no-print{display:block}@media print{body{margin:8mm}.no-print{display:none}}</style></head><body><h1>Payment Receipts Report</h1><p>From: '+new Date(N).toLocaleDateString("en-IN",{day:"2-digit",month:"long",year:"numeric"})+" To: "+new Date(_).toLocaleDateString("en-IN",{day:"2-digit",month:"long",year:"numeric"})+'</p><table><thead><tr><th>Date</th><th>Customer Name</th><th>Settlement Type</th><th class="r">Amount (\u20b9)</th></tr></thead><tbody>'+e+'<tr class="total-row"><td colspan="3" class="r">Total:</td><td class="r">\u20b9'+me.toFixed(2)+'</td></tr></tbody></table><p style="margin-top:20px;font-size:11px">Generated on: '+(new Date).toLocaleString("en-IN")+'</p><div class="no-print" style="text-align:center;margin:20px 0"><button class="print-btn" onclick="window.print()">\ud83d\udda8\ufe0f Print / Save as PDF</button></div><script>setTimeout(function() { window.print(); }, 500);<\/script></body></html>',n=window.open("","_blank","width=800,height=600");if(!n)return void alert("Please allow pop-ups for this site to enable PDF export and printing.");n.document.write(t),n.document.close(),n.focus()}catch(e){console.error("Error generating HTML for web:",e),alert("Error generating report: "+e.message)}};return(0,In.jsxs)("div",{className:"space-y-4",children:[(0,In.jsx)(Mn,{className:"".concat(u?"bg-gray-800 border-gray-700":"bg-white border-slate-200"),children:(0,In.jsxs)(Un,{className:"p-4",children:[(0,In.jsxs)("div",{className:"mb-4 space-y-3",children:[(0,In.jsxs)("div",{children:[(0,In.jsx)(pr,{className:"text-sm ".concat(u?"text-gray-300":"text-slate-700"),children:"Customer"}),(0,In.jsxs)("div",{className:"grid grid-cols-[1fr_auto] gap-3 mt-1",children:[(0,In.jsxs)("div",{className:"relative",ref:se,children:[(0,In.jsx)(sr,{type:"text",placeholder:"Search and select customer...",value:D,onChange:e=>{O(e.target.value),M(!0)},onFocus:()=>M(!0),disabled:F,className:"w-full pr-10 ".concat(u?"bg-gray-700 border-gray-600 text-white":""," ").concat(F?"opacity-50 cursor-not-allowed":"")}),(0,In.jsx)(ph,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 cursor-pointer ".concat(u?"text-gray-400":"text-gray-500"," ").concat(F?"opacity-50":""),onClick:()=>!F&&M(!L)}),L&&!F&&(0,In.jsx)("div",{className:"absolute z-10 w-full mt-1 max-h-60 overflow-auto rounded-md border shadow-lg ".concat(u?"bg-gray-700 border-gray-600":"bg-white border-gray-300"),children:he.length>0?he.map(e=>(0,In.jsx)("div",{className:"px-3 py-2 cursor-pointer ".concat(u?"hover:bg-gray-600":"hover:bg-gray-100"," ").concat(P===e.id?u?"bg-blue-600":"bg-blue-100":""),onClick:()=>{R(e.id),O(e.name),M(!1)},children:(0,In.jsx)("div",{className:u?"text-white":"text-gray-900",children:e.name})},e.id)):(0,In.jsx)("div",{className:"px-3 py-2 ".concat(u?"text-gray-400":"text-gray-500"),children:"No customers found"})})]}),(0,In.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 border rounded-md min-w-[140px]",style:{backgroundColor:u?"#374151":"#f9fafb",borderColor:u?"#4b5563":"#d1d5db"},children:[(0,In.jsx)("input",{type:"checkbox",id:"allCustomersFilter",checked:F,onChange:e=>{j(e.target.checked),e.target.checked&&(R(""),O(""))},className:"w-4 h-4 cursor-pointer"}),(0,In.jsx)("label",{htmlFor:"allCustomersFilter",className:"text-sm font-medium cursor-pointer ".concat(u?"text-gray-200":"text-slate-700"),children:"All Customers"})]})]})]}),(0,In.jsxs)("div",{className:"flex items-center justify-between",children:[(0,In.jsxs)("h3",{className:"text-lg font-semibold ".concat(u?"text-white":"text-slate-800"),children:["Receipt ",ge(N)," to ",ge(_)]}),(0,In.jsxs)("div",{className:"text-lg font-bold ".concat(u?"text-green-400":"text-green-600"),children:["\u20b9",me.toFixed(2)]})]}),(0,In.jsxs)("div",{className:"space-y-3",children:[(0,In.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,In.jsxs)("div",{children:[(0,In.jsx)(pr,{htmlFor:"fromDate",className:"text-sm ".concat(u?"text-gray-300":"text-slate-700"),children:"From Date"}),(0,In.jsx)(sr,{id:"fromDate",type:"date",value:N,onChange:e=>C(e.target.value),className:"mt-1 ".concat(u?"bg-gray-700 border-gray-600 text-white":"")})]}),(0,In.jsxs)("div",{children:[(0,In.jsx)(pr,{htmlFor:"toDate",className:"text-sm ".concat(u?"text-gray-300":"text-slate-700"),children:"To Date"}),(0,In.jsx)(sr,{id:"toDate",type:"date",value:_,onChange:e=>T(e.target.value),className:"mt-1 ".concat(u?"bg-gray-700 border-gray-600 text-white":"")})]})]}),(0,In.jsxs)("div",{className:"flex items-center gap-3",children:[(0,In.jsxs)("div",{className:"flex items-center gap-2",children:[(0,In.jsx)(mp,{id:"select-all-receipts",checked:le,onCheckedChange:e=>{if(ce(e),e){const e=new Set(pe.map(e=>e.id));oe(e)}else oe(new Set)},className:u?"border-gray-500":""}),(0,In.jsx)(pr,{htmlFor:"select-all-receipts",className:"text-sm font-medium cursor-pointer ".concat(u?"text-gray-200":"text-slate-700"),children:"Select All"})]}),(0,In.jsxs)(rr,{variant:"destructive",size:"sm",onClick:()=>{if(0===ae.size)return;const e="Are you sure you want to delete ".concat(ae.size," selected receipt(s)?");(el.Ay.isProModeEnabled()||window.confirm(e))&&(ae.forEach(e=>{l&&l(e)}),oe(new Set),ce(!1))},disabled:0===ae.size,className:"bg-red-600 hover:bg-red-700 text-white",children:[(0,In.jsx)(Wf,{className:"w-4 h-4 mr-2"}),"Delete (",ae.size,")"]})]})]})]}),(0,In.jsxs)("div",{className:"flex items-center justify-between gap-3 mb-4",children:[(0,In.jsxs)("div",{className:"flex items-center gap-2",children:[(0,In.jsxs)(rr,{variant:"outline",size:"sm",onClick:()=>{try{if("undefined"!==typeof window.MPumpCalcAndroid)return void ye();ve()}catch(e){console.error("Print error:",e),alert("Error generating report: "+e.message)}},className:"".concat(u?"bg-gray-700 border-gray-600 text-white hover:bg-gray-600":""),children:[(0,In.jsx)(Jg,{className:"w-4 h-4 mr-2"}),"Print"]}),(0,In.jsxs)(rr,{variant:"outline",size:"sm",onClick:()=>{try{const e=[["Payment Receipts Report"],[],["From: ".concat(new Date(N).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})," To: ").concat(new Date(_).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}))],[],["Sr. No","Date","Customer Name","Settlement Type","Amount (\u20b9)"],...pe.map((e,t)=>{var n;return[t+1,new Date(e.date).toLocaleDateString("en-IN"),e.customerName||(null===(n=i.find(t=>t.id===e.customerId))||void 0===n?void 0:n.name)||"Unknown",e.mode||"N/A",e.amount.toFixed(2)]}),["Total","","","",me.toFixed(2)],[],["Generated on: ".concat((new Date).toLocaleString("en-IN"))]],t=BN.book_new(),n=BN.aoa_to_sheet(e);n["!cols"]=[{wch:8},{wch:12},{wch:20},{wch:15},{wch:15}],BN.book_append_sheet(t,n,"Receipts");_N(t,"Payment_Receipts_".concat(N,"_to_").concat(_,".xlsx")),console.log("Excel file exported successfully")}catch(e){console.error("Excel export error:",e),alert("Error exporting to Excel: "+e.message)}},className:"".concat(u?"bg-gray-700 border-gray-600 text-white hover:bg-gray-600":""),children:[(0,In.jsx)(Zg,{className:"w-4 h-4 mr-2"}),"Excel"]})]}),(0,In.jsxs)(rr,{onClick:()=>k(!0),className:"bg-green-600 hover:bg-green-700 text-white",size:"sm",children:[(0,In.jsx)(To,{className:"w-4 h-4 mr-2"}),"Add Receipt"]})]}),0===pe.length?(0,In.jsxs)("div",{className:"text-center py-8 ".concat(u?"text-gray-400":"text-slate-500"),children:[(0,In.jsx)(Ho,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),(0,In.jsx)("p",{children:"No receipts in selected date range"})]}):(0,In.jsx)("div",{className:"space-y-2",children:pe.map(e=>(0,In.jsxs)("div",{className:"flex items-center gap-2 p-3 rounded-lg border ".concat(u?"bg-gray-700 border-gray-600":"bg-slate-50 border-slate-200"," ").concat(ae.has(e.id)?u?"ring-2 ring-blue-500":"ring-2 ring-blue-400":""),children:[(0,In.jsx)(mp,{checked:ae.has(e.id),onCheckedChange:t=>((e,t)=>{const n=new Set(ae);t?n.add(e):n.delete(e),oe(n),ce(n.size===pe.length&&pe.length>0)})(e.id,t),className:u?"border-gray-500":""}),(0,In.jsxs)("div",{className:"flex items-center justify-between flex-1",children:[(0,In.jsxs)("div",{className:"flex-1",children:[(0,In.jsx)("div",{className:"font-medium ".concat(u?"text-white":"text-slate-800"),children:e.customerName}),(0,In.jsxs)("div",{className:"text-sm ".concat(u?"text-gray-400":"text-slate-500"),children:[new Date(e.date).toLocaleDateString()," \u2022 ",e.mode||"N/A"]})]}),(0,In.jsxs)("div",{className:"flex items-center gap-3",children:[(0,In.jsxs)("span",{className:"font-bold ".concat(u?"text-green-400":"text-green-600"),children:["\u20b9",e.amount.toFixed(2)]}),(0,In.jsx)(rr,{variant:"ghost",size:"sm",onClick:()=>(e=>{W(e),G(e.customerId),ee(e.customerName),Y(e.amount.toString()),Q(e.date),Z(e.mode||""),V(!0)})(e),className:"hover:bg-blue-100 hover:text-blue-600 ".concat(u?"text-gray-400 hover:bg-blue-900 hover:text-blue-400":""),children:(0,In.jsx)(Hf,{className:"w-4 h-4"})}),(0,In.jsx)(rr,{variant:"ghost",size:"sm",onClick:()=>(e=>{el.Ay.isProModeEnabled()?l(e.id):U({show:!0,payment:e})})(e),className:"hover:bg-red-100 hover:text-red-600 ".concat(u?"text-gray-400 hover:bg-red-900 hover:text-red-400":""),children:(0,In.jsx)(Wf,{className:"w-4 h-4"})})]})]})]},e.id))})]})}),(0,In.jsx)(wo,{open:I,onOpenChange:k,children:(0,In.jsxs)(Ao,{side:"bottom",className:"h-[90vh] ".concat(u?"bg-gray-900":"bg-white"),children:[(0,In.jsx)(Eo,{children:(0,In.jsx)(No,{className:u?"text-white":"text-slate-800",children:"Record Receipt"})}),(0,In.jsx)("div",{className:"mt-4 overflow-y-auto h-[calc(90vh-80px)] px-2",children:(0,In.jsxs)("div",{className:"space-y-3",children:[(0,In.jsxs)("div",{className:"relative",ref:re,children:[(0,In.jsx)(pr,{htmlFor:"customer",className:u?"text-gray-300":"text-slate-700",children:"Customer"}),(0,In.jsxs)("div",{className:"relative mt-1",children:[(0,In.jsx)(sr,{type:"text",placeholder:"Search and select customer...",value:w,onChange:e=>{b(e.target.value),S(!0)},onFocus:()=>S(!0),className:"w-full pr-10 ".concat(u?"bg-gray-700 border-gray-600 text-white":"")}),(0,In.jsx)(ph,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 cursor-pointer ".concat(u?"text-gray-400":"text-gray-500"),onClick:()=>S(!x)}),x&&(0,In.jsx)("div",{className:"absolute z-10 w-full mt-1 max-h-60 overflow-auto rounded-md border shadow-lg ".concat(u?"bg-gray-700 border-gray-600":"bg-white border-gray-300"),children:ue.length>0?ue.map(e=>(0,In.jsx)("div",{className:"px-3 py-2 cursor-pointer ".concat(u?"hover:bg-gray-600":"hover:bg-gray-100"," ").concat(d===e.id?u?"bg-blue-600":"bg-blue-100":""),onClick:()=>{h(e.id),b(e.name),S(!1)},children:(0,In.jsx)("div",{className:u?"text-white":"text-gray-900",children:e.name})},e.id)):(0,In.jsx)("div",{className:"px-3 py-2 ".concat(u?"text-gray-400":"text-gray-500"),children:"No customers found"})})]})]}),(0,In.jsxs)("div",{children:[(0,In.jsx)(pr,{htmlFor:"paymentDate",className:u?"text-gray-300":"text-slate-700",children:"Date"}),(0,In.jsx)(sr,{id:"paymentDate",type:"date",value:m,onChange:e=>g(e.target.value),className:"mt-1 ".concat(u?"bg-gray-700 border-gray-600 text-white":"")})]}),(0,In.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,In.jsxs)("div",{children:[(0,In.jsx)(pr,{htmlFor:"amount",className:u?"text-gray-300":"text-slate-700",children:"Amount Received"}),(0,In.jsx)(sr,{id:"amount",type:"number",step:"0.01",value:f,onChange:e=>p(e.target.value),placeholder:"Enter amount",className:"mt-1 ".concat(u?"bg-gray-700 border-gray-600 text-white":"")})]}),(0,In.jsxs)("div",{children:[(0,In.jsx)(pr,{className:u?"text-gray-300":"text-slate-700",children:"Settlement Type"}),(0,In.jsxs)(Eh,{value:y,onValueChange:e=>v(e),children:[(0,In.jsx)(_h,{className:"mt-1 ".concat(u?"bg-gray-700 border-gray-600 text-white":""),children:(0,In.jsx)(Ch,{placeholder:"Select settlement type..."})}),(0,In.jsx)(kh,{className:u?"bg-gray-700 border-gray-600":"",children:(0,In.jsx)(Nh,{children:A.length>0?A.map(e=>(0,In.jsx)(Ph,{value:e.name,className:u?"text-white hover:bg-gray-600":"",children:e.name},e.id)):(0,In.jsx)(Ph,{value:"no-types",disabled:!0,className:u?"text-gray-400":"text-gray-500",children:"No settlement types available. Add from Settings."})})})]})]})]}),(0,In.jsxs)(rr,{onClick:()=>{fe(),h(""),b(""),p("")},className:"w-full bg-blue-600 hover:bg-blue-700 text-white",disabled:!d||!f||!m,children:[(0,In.jsx)(Fo,{className:"w-4 h-4 mr-1"}),"Record Receipt & Add More"]}),(0,In.jsxs)(rr,{onClick:()=>{fe(),k(!1),h(""),b(""),p("")},className:"w-full bg-green-600 hover:bg-green-700 text-white",disabled:!d||!f||!m,children:[(0,In.jsx)(Fo,{className:"w-4 h-4 mr-1"}),"Record Receipt & Close"]})]})})]})}),(0,In.jsx)(wo,{open:z,onOpenChange:V,children:(0,In.jsxs)(Ao,{side:"bottom",className:"h-[90vh] ".concat(u?"bg-gray-900":"bg-white"),children:[(0,In.jsx)(Eo,{children:(0,In.jsx)(No,{className:u?"text-white":"text-slate-800",children:"Edit Receipt"})}),(0,In.jsxs)("div",{className:"mt-6 space-y-4 px-2",children:[(0,In.jsxs)("div",{className:"relative",ref:ie,children:[(0,In.jsx)(pr,{htmlFor:"editCustomer",className:u?"text-gray-300":"text-slate-700",children:"Customer"}),(0,In.jsxs)("div",{className:"relative mt-1",children:[(0,In.jsx)(sr,{type:"text",placeholder:"Search and select customer...",value:$,onChange:e=>{ee(e.target.value),ne(!0)},onFocus:()=>ne(!0),className:"w-full pr-10 ".concat(u?"bg-gray-700 border-gray-600 text-white":"")}),(0,In.jsx)(ph,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 cursor-pointer ".concat(u?"text-gray-400":"text-gray-500"),onClick:()=>ne(!te)}),te&&(0,In.jsx)("div",{className:"absolute z-10 w-full mt-1 max-h-60 overflow-auto rounded-md border shadow-lg ".concat(u?"bg-gray-700 border-gray-600":"bg-white border-gray-300"),children:de.length>0?de.map(e=>(0,In.jsx)("div",{className:"px-3 py-2 cursor-pointer ".concat(u?"hover:bg-gray-600":"hover:bg-gray-100"," ").concat(q===e.id?u?"bg-blue-600":"bg-blue-100":""),onClick:()=>{G(e.id),ee(e.name),ne(!1)},children:(0,In.jsx)("div",{className:u?"text-white":"text-gray-900",children:e.name})},e.id)):(0,In.jsx)("div",{className:"px-3 py-2 ".concat(u?"text-gray-400":"text-gray-500"),children:"No customers found"})})]})]}),(0,In.jsxs)("div",{children:[(0,In.jsx)(pr,{htmlFor:"editDate",className:u?"text-gray-300":"text-slate-700",children:"Payment Date"}),(0,In.jsx)(sr,{id:"editDate",type:"date",value:X,onChange:e=>Q(e.target.value),className:u?"bg-gray-700 border-gray-600 text-white":""})]}),(0,In.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,In.jsxs)("div",{children:[(0,In.jsx)(pr,{htmlFor:"editAmount",className:u?"text-gray-300":"text-slate-700",children:"Amount"}),(0,In.jsx)(sr,{id:"editAmount",type:"number",step:"0.01",value:K,onChange:e=>Y(e.target.value),placeholder:"Enter amount",className:u?"bg-gray-700 border-gray-600 text-white":""})]}),(0,In.jsxs)("div",{children:[(0,In.jsx)(pr,{className:u?"text-gray-300":"text-slate-700",children:"Settlement Type"}),(0,In.jsxs)(Eh,{value:J,onValueChange:e=>Z(e),children:[(0,In.jsx)(_h,{className:u?"bg-gray-700 border-gray-600 text-white":"",children:(0,In.jsx)(Ch,{placeholder:"Select settlement type..."})}),(0,In.jsx)(kh,{className:u?"bg-gray-700 border-gray-600":"",children:(0,In.jsx)(Nh,{children:A.length>0?A.map(e=>(0,In.jsx)(Ph,{value:e.name,className:u?"text-white hover:bg-gray-600":"",children:e.name},e.id)):(0,In.jsx)(Ph,{value:"no-types",disabled:!0,className:u?"text-gray-400":"text-gray-500",children:"No settlement types available. Add from Settings."})})})]})]})]}),(0,In.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,In.jsxs)(rr,{onClick:()=>{if(q&&K&&parseFloat(K)>0&&X&&H){const e=i.find(e=>e.id===q);e&&(c(H.id,{customerId:q,customerName:e.name,amount:parseFloat(K),date:X,mode:J}),V(!1),W(null),G(""),ee(""),Y(""),Q(""),Z(""))}},className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",disabled:!q||!K||!X,children:[(0,In.jsx)(Fo,{className:"w-4 h-4 mr-1"}),"Update Receipt"]}),(0,In.jsx)(rr,{onClick:()=>V(!1),variant:"outline",className:"px-6",children:"Cancel"})]})]})]})}),B.show&&(0,In.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,In.jsx)(Mn,{className:"w-full max-w-md ".concat(u?"bg-gray-800 border-gray-700":"bg-white border-slate-200"),children:(0,In.jsxs)(Un,{className:"p-6",children:[(0,In.jsxs)("div",{className:"flex items-start gap-4 mb-4",children:[(0,In.jsx)("div",{className:"p-2 rounded-full ".concat(u?"bg-red-900 text-red-400":"bg-red-100 text-red-600"),children:(0,In.jsx)(Gf,{className:"w-6 h-6"})}),(0,In.jsxs)("div",{className:"flex-1",children:[(0,In.jsx)("h3",{className:"text-lg font-semibold mb-2 ".concat(u?"text-white":"text-slate-800"),children:"Delete Receipt?"}),(0,In.jsxs)("p",{className:"text-sm mb-1 ".concat(u?"text-gray-300":"text-slate-600"),children:["Are you sure you want to delete this receipt of ",(0,In.jsxs)("span",{className:"font-semibold",children:["\u20b9",null===(n=B.payment)||void 0===n?void 0:n.amount.toFixed(2)]})," from ",(0,In.jsxs)("span",{className:"font-semibold",children:['"',null===(r=B.payment)||void 0===r?void 0:r.customerName,'"']}),"?"]}),(0,In.jsx)("p",{className:"text-sm ".concat(u?"text-gray-400":"text-slate-500"),children:"This action cannot be undone."})]})]}),(0,In.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,In.jsx)(rr,{variant:"outline",onClick:()=>{U({show:!1,payment:null})},className:"".concat(u?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-slate-300 text-slate-700 hover:bg-slate-100"),children:"No, Cancel"}),(0,In.jsx)(rr,{onClick:()=>{B.payment&&l(B.payment.id),U({show:!1,payment:null})},className:"bg-red-600 hover:bg-red-700 text-white",children:"Yes, Delete"})]})]})})})]})},zN=t=>{var n;let{customers:r,creditData:i,selectedDate:s,onEditCredit:a,onDeleteCredit:o,onAddCredit:l,isDarkMode:c}=t;const[u,d]=(0,e.useState)(""),[h,f]=(0,e.useState)(""),[p,m]=(0,e.useState)(!1),[g,y]=(0,e.useState)(!0),[v,w]=(0,e.useState)(s),[b,x]=(0,e.useState)(s),[S,A]=(0,e.useState)({show:!1,credit:null}),[E,N]=(0,e.useState)(new Set),[C,_]=(0,e.useState)(!1),T=(0,e.useRef)(null);(0,e.useEffect)(()=>{w(s),x(s)},[s]),(0,e.useEffect)(()=>{const e=e=>{T.current&&!T.current.contains(e.target)&&m(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const I=r.filter(e=>e.name.toLowerCase().includes(h.toLowerCase())),k=i.filter(e=>{let t=g;if(!g&&u){const n=r.find(e=>e.id===u);n&&(t=e.customerId===u||e.customerName===n.name)}const n=e.date>=v&&e.date<=b;return t&&n}),P=e=>{let t=0;e.fuelEntries&&e.fuelEntries.length>0?t=e.fuelEntries.reduce((e,t)=>e+(parseFloat(t.amount)||parseFloat(t.liters||0)*parseFloat(t.rate||0)),0):e.liters&&e.rate&&(t=parseFloat(e.liters)*parseFloat(e.rate));let n=0;e.incomeEntries&&e.incomeEntries.length>0&&(n=e.incomeEntries.reduce((e,t)=>e+parseFloat(t.amount||0),0));let r=0;e.expenseEntries&&e.expenseEntries.length>0&&(r=e.expenseEntries.reduce((e,t)=>e+parseFloat(t.amount||0),0));return t+n-r||e.totalAmount||e.amount||0},R=k.reduce((e,t)=>e+P(t),0),D=e=>{const t=new Date(e+"T00:00:00"),n=t.getDate(),r=t.toLocaleDateString("en-US",{month:"short"}),i=t.getFullYear();return"".concat(n," ").concat(r," ").concat(i)};(0,e.useEffect)(()=>{E.size>0&&E.size===k.length?_(!0):0!==E.size&&0!==k.length||_(!1)},[k,E]);const O=()=>{try{const e=new al.default;let t=20;e.setFontSize(18),e.text("Credit Sales Report",105,t,{align:"center"}),t+=10,e.setFontSize(12);const n="From: ".concat(new Date(v).toLocaleDateString("en-IN")," To: ").concat(new Date(b).toLocaleDateString("en-IN"));if(e.text(n,105,t,{align:"center"}),t+=15,0===k.length)e.setFontSize(12),e.text("No credit sales in selected date range",105,t,{align:"center"});else{const n=["Date","Customer","Fuel","Liters","Rate","Amount"],r=k.map(e=>{const t=e.fuelEntries&&e.fuelEntries.length>0?e.fuelEntries.map(e=>"".concat(e.fuelType)).join(", "):e.fuelType||"N/A",n=e.fuelEntries&&e.fuelEntries.length>0?e.fuelEntries.reduce((e,t)=>e+parseFloat(t.liters||0),0):e.liters||0;return[new Date(e.date).toLocaleDateString("en-IN",{day:"2-digit",month:"short"}),e.customerName,t,n.toFixed(2),e.rate?e.rate.toFixed(2):"-",P(e).toFixed(2)]}),i=["Total","","","","",R.toFixed(2)];r.push(i),e.autoTable({startY:t,head:[n],body:r,theme:"grid",headStyles:{fillColor:[240,240,240],textColor:[0,0,0]},styles:{fontSize:9},footStyles:{fillColor:[240,240,240],fontStyle:"bold"}})}t=e.internal.pageSize.height-15,e.setFontSize(9),e.text("Generated on: ".concat((new Date).toLocaleString("en-IN")),105,t,{align:"center"});const r=e.output("dataurlstring").split(",")[1],i="Credit_Sales_".concat(v,"_to_").concat(b,".pdf");window.MPumpCalcAndroid&&window.MPumpCalcAndroid.openPdfWithViewer?window.MPumpCalcAndroid.openPdfWithViewer(r,i):(console.error("Android interface not available"),alert("PDF generation is only available in the Android app"))}catch(e){console.error("Error generating PDF for Android:",e),alert("Error generating PDF: "+e.message)}},L=()=>{try{const e=k.map(e=>{const t=e.fuelEntries&&e.fuelEntries.length>0?e.fuelEntries.map(e=>e.fuelType+": "+e.liters+"L @ \u20b9"+e.rate).join("<br>"):e.fuelType||"N/A",n=e.fuelEntries&&e.fuelEntries.length>0?e.fuelEntries.reduce((e,t)=>e+parseFloat(t.liters||0),0):e.liters||0;return"<tr><td>"+new Date(e.date).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})+"</td><td>"+e.customerName+"</td><td>"+t+'</td><td class="r">'+n.toFixed(2)+'</td><td class="r">'+(e.rate?e.rate.toFixed(2):"-")+'</td><td class="r">'+P(e).toFixed(2)+"</td></tr>"}).join(""),t='<!DOCTYPE html><html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0"><title>Credit Sales Report</title><style>body{font-family:Arial,sans-serif;margin:20px;padding:0;line-height:1.4}h1{font-size:24px;margin:10px 0;text-align:center;color:#333}p{font-size:14px;margin:5px 0;text-align:center;color:#666}table{width:100%;border-collapse:collapse;margin:15px 0;font-size:13px}th{background:#f0f0f0;border:1px solid #333;padding:8px;text-align:left;font-weight:bold}td{border:1px solid #333;padding:6px}.r{text-align:right}.total-row{font-weight:bold;background:#f8f8f8}.print-btn{background:#007bff;color:white;border:none;padding:10px 20px;font-size:16px;cursor:pointer;border-radius:5px;margin:10px auto;display:block;box-shadow:0 2px 4px rgba(0,0,0,0.2)}.print-btn:hover{background:#0056b3}.no-print{display:block}@media print{body{margin:8mm}.no-print{display:none}}</style></head><body><h1>Credit Sales Report</h1><p>From: '+new Date(v).toLocaleDateString("en-IN",{day:"2-digit",month:"long",year:"numeric"})+" To: "+new Date(b).toLocaleDateString("en-IN",{day:"2-digit",month:"long",year:"numeric"})+'</p><table><thead><tr><th>Date</th><th>Customer Name</th><th>Fuel Type</th><th class="r">Liters</th><th class="r">Rate (\u20b9)</th><th class="r">Amount (\u20b9)</th></tr></thead><tbody>'+e+'<tr class="total-row"><td colspan="5" class="r">Total:</td><td class="r">\u20b9'+R.toFixed(2)+'</td></tr></tbody></table><p style="margin-top:20px;font-size:11px">Generated on: '+(new Date).toLocaleString("en-IN")+'</p><div class="no-print" style="text-align:center;margin:20px 0"><button class="print-btn" onclick="window.print()">\ud83d\udda8\ufe0f Print / Save as PDF</button></div><script>setTimeout(function() { window.print(); }, 500);<\/script></body></html>',n=window.open("","_blank","width=800,height=600");if(!n)return void alert("Please allow pop-ups for this site to enable PDF export and printing.");n.document.write(t),n.document.close(),n.focus()}catch(e){console.error("Error generating HTML for web:",e),alert("Error generating report: "+e.message)}};return(0,In.jsxs)("div",{className:"space-y-4",children:[(0,In.jsx)(Mn,{className:"".concat(c?"bg-gray-800 border-gray-700":"bg-white border-slate-200"),children:(0,In.jsxs)(Un,{className:"p-4",children:[(0,In.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,In.jsxs)("div",{children:[(0,In.jsx)(pr,{className:"text-sm ".concat(c?"text-gray-300":"text-slate-700"),children:"Customer"}),(0,In.jsxs)("div",{className:"grid grid-cols-[1fr_auto] gap-3 mt-1",children:[(0,In.jsxs)("div",{className:"relative",ref:T,children:[(0,In.jsx)(sr,{type:"text",placeholder:"Search and select customer...",value:h,onChange:e=>{f(e.target.value),m(!0)},onFocus:()=>m(!0),disabled:g,className:"w-full pr-10 ".concat(c?"bg-gray-700 border-gray-600 text-white":""," ").concat(g?"opacity-50 cursor-not-allowed":"")}),(0,In.jsx)(ph,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 cursor-pointer ".concat(c?"text-gray-400":"text-gray-500"," ").concat(g?"opacity-50":""),onClick:()=>!g&&m(!p)}),p&&!g&&(0,In.jsx)("div",{className:"absolute z-10 w-full mt-1 max-h-60 overflow-auto rounded-md border shadow-lg ".concat(c?"bg-gray-700 border-gray-600":"bg-white border-gray-300"),children:I.length>0?I.map(e=>(0,In.jsx)("div",{className:"px-3 py-2 cursor-pointer ".concat(c?"hover:bg-gray-600":"hover:bg-gray-100"," ").concat(u===e.id?c?"bg-blue-600":"bg-blue-100":""),onClick:()=>{d(e.id),f(e.name),m(!1)},children:(0,In.jsx)("div",{className:c?"text-white":"text-gray-900",children:e.name})},e.id)):(0,In.jsx)("div",{className:"px-3 py-2 ".concat(c?"text-gray-400":"text-gray-500"),children:"No customers found"})})]}),(0,In.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 border rounded-md min-w-[140px]",style:{backgroundColor:c?"#374151":"#f9fafb",borderColor:c?"#4b5563":"#d1d5db"},children:[(0,In.jsx)("input",{type:"checkbox",id:"allCustomers",checked:g,onChange:e=>{y(e.target.checked),e.target.checked&&(d(""),f(""))},className:"w-4 h-4 cursor-pointer"}),(0,In.jsx)("label",{htmlFor:"allCustomers",className:"text-sm font-medium cursor-pointer ".concat(c?"text-gray-200":"text-slate-700"),children:"All Customers"})]})]})]}),(0,In.jsxs)("div",{className:"space-y-3",children:[(0,In.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,In.jsxs)("div",{children:[(0,In.jsx)(pr,{className:"text-sm ".concat(c?"text-gray-300":"text-slate-700"),children:"From Date"}),(0,In.jsx)(sr,{type:"date",value:v,onChange:e=>w(e.target.value),className:"mt-1 ".concat(c?"bg-gray-700 border-gray-600 text-white":"")})]}),(0,In.jsxs)("div",{children:[(0,In.jsx)(pr,{className:"text-sm ".concat(c?"text-gray-300":"text-slate-700"),children:"To Date"}),(0,In.jsx)(sr,{type:"date",value:b,onChange:e=>x(e.target.value),className:"mt-1 ".concat(c?"bg-gray-700 border-gray-600 text-white":"")})]})]}),(0,In.jsxs)("div",{className:"flex items-center gap-3",children:[(0,In.jsxs)("div",{className:"flex items-center gap-2",children:[(0,In.jsx)(mp,{id:"select-all",checked:C,onCheckedChange:e=>{if(_(e),e){const e=new Set(k.map(e=>e.id));N(e)}else N(new Set)},className:c?"border-gray-500":""}),(0,In.jsx)(pr,{htmlFor:"select-all",className:"text-sm font-medium cursor-pointer ".concat(c?"text-gray-200":"text-slate-700"),children:"Select All"})]}),(0,In.jsxs)(rr,{variant:"destructive",size:"sm",onClick:()=>{if(0===E.size)return;const e="Are you sure you want to delete ".concat(E.size," selected credit sale(s)?");(el.Ay.isProModeEnabled()||window.confirm(e))&&(E.forEach(e=>{o&&o(e)}),N(new Set),_(!1))},disabled:0===E.size,className:"bg-red-600 hover:bg-red-700 text-white",children:[(0,In.jsx)(Wf,{className:"w-4 h-4 mr-2"}),"Delete (",E.size,")"]})]})]})]}),(0,In.jsxs)("div",{className:"flex items-center justify-between gap-3 mb-4",children:[(0,In.jsxs)("div",{className:"flex items-center gap-2",children:[(0,In.jsxs)(rr,{variant:"outline",size:"sm",onClick:()=>{try{if("undefined"!==typeof window.MPumpCalcAndroid)return void O();L()}catch(e){console.error("Print error:",e),alert("Error generating report: "+e.message)}},className:"".concat(c?"bg-gray-700 border-gray-600 text-white hover:bg-gray-600":""),children:[(0,In.jsx)(Jg,{className:"w-4 h-4 mr-2"}),"Print"]}),(0,In.jsxs)(rr,{variant:"outline",size:"sm",onClick:()=>{try{const e=[["Credit Sales Report"],[],["From: ".concat(new Date(v).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})," To: ").concat(new Date(b).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}))],[],["Sr. No","Date","Customer Name","Fuel Type","Liters","Rate (\u20b9)","Amount (\u20b9)"],...k.map((e,t)=>{const n=e.fuelEntries&&e.fuelEntries.length>0?e.fuelEntries.map(e=>"".concat(e.fuelType,": ").concat(e.liters,"L @ \u20b9").concat(e.rate)).join(", "):"".concat(e.fuelType||"N/A",": ").concat(e.liters||0,"L @ \u20b9").concat(e.rate||0);return[t+1,new Date(e.date).toLocaleDateString("en-IN"),e.customerName,n,e.liters||(e.fuelEntries?e.fuelEntries.reduce((e,t)=>e+parseFloat(t.liters||0),0):0),e.rate||"",P(e).toFixed(2)]}),["Total","","","","","",R.toFixed(2)],[],["Generated on: ".concat((new Date).toLocaleString("en-IN"))]],t=BN.book_new(),n=BN.aoa_to_sheet(e);n["!cols"]=[{wch:8},{wch:12},{wch:20},{wch:25},{wch:10},{wch:12},{wch:15}],BN.book_append_sheet(t,n,"Credit Sales");_N(t,"Credit_Sales_".concat(v,"_to_").concat(b,".xlsx")),console.log("Excel file exported successfully")}catch(e){console.error("Excel export error:",e),alert("Error exporting to Excel: "+e.message)}},className:"".concat(c?"bg-gray-700 border-gray-600 text-white hover:bg-gray-600":""),children:[(0,In.jsx)(Zg,{className:"w-4 h-4 mr-2"}),"Excel"]})]}),(0,In.jsxs)(rr,{onClick:l,className:"bg-green-600 hover:bg-green-700 text-white",size:"sm",children:[(0,In.jsx)(To,{className:"w-4 h-4 mr-2"}),"Add Credit"]})]}),(0,In.jsxs)("div",{className:"flex items-center justify-between mb-4 pb-3 border-b border-gray-300 dark:border-gray-600",children:[(0,In.jsxs)("h3",{className:"text-lg font-semibold ".concat(c?"text-white":"text-slate-800"),children:["Credit Sales ",D(v)," to ",D(b)]}),(0,In.jsxs)("div",{className:"text-lg font-bold ".concat(c?"text-orange-400":"text-orange-600"),children:["\u20b9",R.toFixed(2)]})]}),0===k.length?(0,In.jsxs)("div",{className:"text-center py-8 ".concat(c?"text-gray-400":"text-slate-500"),children:[(0,In.jsx)(Bo,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),(0,In.jsx)("p",{children:"No credit sales in selected date range"})]}):(0,In.jsx)("div",{className:"space-y-2",children:k.map(e=>{var t,n;return(0,In.jsxs)("div",{className:"border rounded-lg p-2 sm:p-3 ".concat(c?"border-gray-600 bg-gray-700":"border-slate-200 bg-slate-50"," ").concat(E.has(e.id)?c?"ring-2 ring-blue-500":"ring-2 ring-blue-400":""),children:[(0,In.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,In.jsx)(mp,{checked:E.has(e.id),onCheckedChange:t=>((e,t)=>{const n=new Set(E);t?n.add(e):n.delete(e),N(n),_(n.size===k.length&&k.length>0)})(e.id,t),className:c?"border-gray-500":""}),(0,In.jsxs)("div",{className:"flex items-center justify-between gap-2 flex-1",children:[(0,In.jsxs)("div",{className:"flex items-center gap-2 flex-wrap flex-1 min-w-0",children:[(0,In.jsx)(Vf,{className:"bg-orange-100 text-orange-800 border-0 text-xs",children:"Credit"}),(0,In.jsxs)("div",{className:"flex items-center gap-1 text-orange-600 font-bold",children:[(0,In.jsx)(Fo,{className:"w-4 h-4"}),(0,In.jsx)("span",{className:"text-base sm:text-lg",children:P(e).toFixed(2)})]})]}),(0,In.jsxs)("div",{className:"flex items-center gap-1 flex-shrink-0",children:[(0,In.jsx)(rr,{variant:"ghost",size:"sm",onClick:()=>a(e),className:"h-7 w-7 p-0",children:(0,In.jsx)(Hf,{className:"w-3.5 h-3.5"})}),(0,In.jsx)(rr,{variant:"ghost",size:"sm",onClick:()=>(e=>{el.Ay.isProModeEnabled()?o&&o(e.id):A({show:!0,credit:e})})(e),className:"h-7 w-7 p-0",children:(0,In.jsx)(Wf,{className:"w-3.5 h-3.5"})})]})]})]}),(0,In.jsx)("div",{className:"mb-2",children:(0,In.jsx)("span",{className:"font-semibold text-base break-words",children:e.customerName})}),e.fuelEntries&&e.fuelEntries.length>0&&(0,In.jsx)("div",{className:"space-y-2 mb-2",children:e.fuelEntries.map((e,t)=>(0,In.jsxs)("div",{className:"p-2 rounded border ".concat(c?"bg-gray-600 border-gray-500":"bg-purple-50 border-purple-200"),children:[(0,In.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,In.jsx)(Vf,{className:"bg-purple-100 text-purple-800 border-0 text-xs",children:e.fuelType}),(0,In.jsxs)("span",{className:"text-xs font-medium text-purple-600",children:["\u20b9",(e.amount||0).toFixed(2)]})]}),(0,In.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs mt-1",children:[(0,In.jsxs)("div",{children:[(0,In.jsx)("span",{className:c?"text-gray-400":"text-slate-600",children:"Litres: "}),(0,In.jsxs)("span",{className:"font-medium",children:[e.liters,"L"]})]}),(0,In.jsxs)("div",{children:[(0,In.jsx)("span",{className:c?"text-gray-400":"text-slate-600",children:"Rate: "}),(0,In.jsxs)("span",{className:"font-medium",children:["\u20b9",e.rate,"/L"]})]})]})]},t))}),(e.incomeEntries&&e.incomeEntries.length>0||e.expenseEntries&&e.expenseEntries.length>0)&&(0,In.jsxs)("div",{className:"space-y-1",children:[null===(t=e.incomeEntries)||void 0===t?void 0:t.map((e,t)=>(0,In.jsxs)("div",{className:"flex items-center justify-between text-xs p-1.5 rounded ".concat(c?"bg-green-900 bg-opacity-30":"bg-green-50"),children:[(0,In.jsxs)("span",{className:c?"text-gray-300":"text-slate-600",children:["+ ",e.description]}),(0,In.jsxs)("span",{className:"font-semibold ".concat(c?"text-green-400":"text-green-600"),children:["+\u20b9",(e.amount||0).toFixed(2)]})]},"income-".concat(t))),null===(n=e.expenseEntries)||void 0===n?void 0:n.map((e,t)=>(0,In.jsxs)("div",{className:"flex items-center justify-between text-xs p-1.5 rounded ".concat(c?"bg-red-900 bg-opacity-30":"bg-red-50"),children:[(0,In.jsxs)("span",{className:c?"text-gray-300":"text-slate-600",children:["- ",e.description]}),(0,In.jsxs)("span",{className:"font-semibold ".concat(c?"text-red-400":"text-red-600"),children:["-\u20b9",(e.amount||0).toFixed(2)]})]},"expense-".concat(t)))]})]},e.id)})})]})}),S.show&&(0,In.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,In.jsx)(Mn,{className:"w-full max-w-md ".concat(c?"bg-gray-800 border-gray-700":"bg-white border-slate-200"),children:(0,In.jsxs)(Un,{className:"p-6",children:[(0,In.jsxs)("div",{className:"flex items-start gap-4 mb-4",children:[(0,In.jsx)("div",{className:"p-2 rounded-full ".concat(c?"bg-red-900 text-red-400":"bg-red-100 text-red-600"),children:(0,In.jsx)(Gf,{className:"w-6 h-6"})}),(0,In.jsxs)("div",{className:"flex-1",children:[(0,In.jsx)("h3",{className:"text-lg font-semibold mb-2 ".concat(c?"text-white":"text-slate-800"),children:"Delete Credit Sale?"}),(0,In.jsxs)("p",{className:"text-sm mb-1 ".concat(c?"text-gray-300":"text-slate-600"),children:["Are you sure you want to delete credit sale of ",(0,In.jsxs)("span",{className:"font-semibold",children:["\u20b9",S.credit?P(S.credit).toFixed(2):"0.00"]})," for ",(0,In.jsxs)("span",{className:"font-semibold",children:['"',null===(n=S.credit)||void 0===n?void 0:n.customerName,'"']}),"?"]}),(0,In.jsx)("p",{className:"text-sm ".concat(c?"text-gray-400":"text-slate-500"),children:"This action cannot be undone."})]})]}),(0,In.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,In.jsx)(rr,{variant:"outline",onClick:()=>{A({show:!1,credit:null})},className:"".concat(c?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-slate-300 text-slate-700 hover:bg-slate-100"),children:"No, Cancel"}),(0,In.jsx)(rr,{onClick:()=>{S.credit&&o&&o(S.credit.id),A({show:!1,credit:null})},className:"bg-red-600 hover:bg-red-700 text-white",children:"Yes, Delete"})]})]})})})]})},VN=t=>{let{customers:n,creditData:r,payments:i,isDarkMode:a,selectedDate:o}=t;const[l,c]=(0,e.useState)(()=>(new Date).toISOString().split("T")[0]),[u,d]=(0,e.useState)({showZeroBalance:!1,showNegativeBalance:!0,sortBy:"amount",includeHeader:!0,includeDate:!0,includeTotal:!0}),h=[...n.map(e=>{const t=r.filter(t=>t.customerName===e.name&&t.date<=l).reduce((e,t)=>e+(t.amount||0),0),n=i.filter(t=>(t.customerId===e.id||t.customerName===e.name)&&t.date<=l).reduce((e,t)=>e+(t.amount||0),0),s=e.startingBalance||0,a=s+t-n;return{name:e.name,startingBalance:s,totalCredit:t,totalReceived:n,outstanding:a}}).filter(e=>!(!u.showZeroBalance&&0===e.outstanding)&&!(!u.showNegativeBalance&&e.outstanding<0))].sort((e,t)=>"amount"===u.sortBy?t.outstanding-e.outstanding:e.name.localeCompare(t.name)),f=h.reduce((e,t)=>({totalCredit:e.totalCredit+t.totalCredit,totalReceived:e.totalReceived+t.totalReceived,outstanding:e.outstanding+t.outstanding}),{totalCredit:0,totalReceived:0,outstanding:0}),p=()=>{try{const e=new al.default;let t=20;e.setFontSize(18),e.text("Outstanding Report",105,t,{align:"center"}),t+=10,e.setFontSize(12);const n=new Date(l).toLocaleDateString("en-IN",{day:"2-digit",month:"long",year:"numeric"});if(e.text("Till Date: ".concat(n),105,t,{align:"center"}),t+=15,0===h.length)e.setFontSize(12),e.text("No data to display based on current filters",105,t,{align:"center"});else{const n=["Customer Name","Credit","Receipt","Outstanding"],r=h.map(e=>[e.name,e.totalCredit.toFixed(2),e.totalReceived.toFixed(2),e.outstanding.toFixed(2)]),i=h.reduce((e,t)=>e+t.totalCredit,0),s=h.reduce((e,t)=>e+t.totalReceived,0),a=h.reduce((e,t)=>e+t.outstanding,0),o=["Total",i.toFixed(2),s.toFixed(2),a.toFixed(2)];r.push(o),r.push(o),e.autoTable({startY:t,head:[n],body:r,theme:"grid",headStyles:{fillColor:[240,240,240],textColor:[0,0,0]},styles:{fontSize:11},footStyles:{fillColor:[240,240,240],fontStyle:"bold"}})}t=e.internal.pageSize.height-15,e.setFontSize(9),e.text("Generated on: ".concat((new Date).toLocaleString("en-IN")),105,t,{align:"center"});const r=e.output("dataurlstring").split(",")[1],i="Outstanding_Report_".concat(o,".pdf");window.MPumpCalcAndroid&&window.MPumpCalcAndroid.openPdfWithViewer?window.MPumpCalcAndroid.openPdfWithViewer(r,i):(console.error("Android interface not available"),alert("PDF generation is only available in the Android app"))}catch(e){console.error("Error generating PDF for Android:",e),alert("Error generating PDF: "+e.message)}},m=()=>{const e='\n<!DOCTYPE html>\n<html>\n<head>\n<meta charset="UTF-8">\n<meta name="viewport" content="width=device-width,initial-scale=1.0">\n<title>Outstanding Report</title>\n<style>\nbody{font-family:Arial,sans-serif;margin:20px;padding:0;line-height:1.4}\nh1{font-size:24px;margin:10px 0;text-align:center;color:#333}\np{font-size:14px;margin:5px 0;text-align:center;color:#666}\ntable{width:100%;border-collapse:collapse;margin:15px 0;font-size:13px}\nth{background:#f0f0f0;border:1px solid #333;padding:8px;text-align:left;font-weight:bold}\ntd{border:1px solid #333;padding:6px}\n.r{text-align:right}\n.credit{color:#2563eb}\n.receipt{color:#16a34a}\n.positive{color:#d97706}\n.negative{color:#16a34a}\n.total-row{font-weight:bold;background:#f8f8f8}\n@media print{body{margin:10mm}}\n</style>\n</head>\n<body>\n<h1>Outstanding Report</h1>\n<p>As of: '.concat(new Date(l).toLocaleDateString("en-IN",{day:"2-digit",month:"long",year:"numeric"}),"</p>\n\n").concat(h.length>0?'\n<table>\n<tr>\n  <th>Customer Name</th>\n  <th class="r">Credit</th>\n  <th class="r">Receipt</th>\n  <th class="r">Outstanding Amount</th>\n</tr>\n'.concat(h.map(e=>"\n<tr>\n  <td>".concat(e.name,'</td>\n  <td class="r credit">\u20b9').concat(e.totalCredit.toFixed(2),'</td>\n  <td class="r receipt">\u20b9').concat(e.totalReceived.toFixed(2),'</td>\n  <td class="r ').concat(e.outstanding>0?"positive":"negative",'">\u20b9').concat(e.outstanding.toFixed(2),"</td>\n</tr>\n")).join(""),'\n<tr class="total-row">\n  <td><b>Total</b></td>\n  <td class="r credit"><b>\u20b9').concat(h.reduce((e,t)=>e+t.totalCredit,0).toFixed(2),'</b></td>\n  <td class="r receipt"><b>\u20b9').concat(h.reduce((e,t)=>e+t.totalReceived,0).toFixed(2),'</b></td>\n  <td class="r"><b>\u20b9').concat(h.reduce((e,t)=>e+t.outstanding,0).toFixed(2),"</b></td>\n</tr>\n</table>\n"):'<p style="text-align:center;margin:30px 0">No data to display</p>','\n\n<div style="margin-top:20px;text-align:center;font-size:11px;border-top:1px solid #ccc;padding-top:8px">\nGenerated on: ').concat((new Date).toLocaleString("en-IN"),"\n</div>\n\n<script>\nwindow.onload = function() {\n  setTimeout(function() {\n    window.print();\n  }, 500);\n};\n<\/script>\n</body>\n</html>"),t=window.open("","_blank","width=800,height=600");t&&(t.document.write(e),t.document.close())};return(0,In.jsxs)("div",{className:"space-y-4",children:[(0,In.jsx)(Mn,{className:"".concat(a?"bg-gray-800 border-gray-700":"bg-white border-slate-200"),children:(0,In.jsx)(Un,{className:"p-4",children:(0,In.jsxs)("div",{className:"space-y-4",children:[(0,In.jsxs)("div",{className:"flex items-center gap-2",children:[(0,In.jsx)(Ro,{className:"w-5 h-5 ".concat(a?"text-blue-400":"text-blue-600")}),(0,In.jsx)("h3",{className:"text-lg font-semibold ".concat(a?"text-white":"text-slate-800"),children:"Outstanding Report Settings"})]}),(0,In.jsxs)("div",{className:"space-y-2",children:[(0,In.jsxs)("div",{className:"flex items-center gap-2",children:[(0,In.jsx)("input",{type:"checkbox",id:"showZeroBalance",checked:u.showZeroBalance,onChange:e=>d((0,s.A)((0,s.A)({},u),{},{showZeroBalance:e.target.checked})),className:"w-4 h-4"}),(0,In.jsx)(pr,{htmlFor:"showZeroBalance",className:a?"text-gray-300":"text-slate-700",children:"Show Zero Balance Customers"})]}),(0,In.jsxs)("div",{className:"flex items-center gap-2",children:[(0,In.jsx)("input",{type:"checkbox",id:"showNegativeBalance",checked:u.showNegativeBalance,onChange:e=>d((0,s.A)((0,s.A)({},u),{},{showNegativeBalance:e.target.checked})),className:"w-4 h-4"}),(0,In.jsx)(pr,{htmlFor:"showNegativeBalance",className:a?"text-gray-300":"text-slate-700",children:"Show Negative Balance (Overpaid)"})]})]}),(0,In.jsxs)("div",{children:[(0,In.jsx)(pr,{className:"text-sm font-medium ".concat(a?"text-gray-300":"text-slate-700"),children:"Till Date"}),(0,In.jsx)("input",{type:"date",value:l,onChange:e=>c(e.target.value),className:"w-full mt-1 rounded-md border px-3 py-2 ".concat(a?"bg-gray-700 border-gray-600 text-white":"bg-white border-slate-300")})]}),(0,In.jsxs)("div",{children:[(0,In.jsx)(pr,{className:"text-sm font-medium ".concat(a?"text-gray-300":"text-slate-700"),children:"Sort By"}),(0,In.jsxs)("select",{value:u.sortBy,onChange:e=>d((0,s.A)((0,s.A)({},u),{},{sortBy:e.target.value})),className:"w-full mt-1 rounded-md border px-3 py-2 ".concat(a?"bg-gray-700 border-gray-600 text-white":"bg-white border-slate-300"),children:[(0,In.jsx)("option",{value:"amount",children:"Outstanding Amount (Highest First)"}),(0,In.jsx)("option",{value:"name",children:"Customer Name (A-Z)"})]})]}),(0,In.jsxs)("div",{className:"grid grid-cols-2 gap-2 pt-2",children:[(0,In.jsxs)(rr,{onClick:()=>{try{if("undefined"!==typeof window.MPumpCalcAndroid)return void p();m()}catch(e){console.error("Print error:",e),alert("Error generating report: "+e.message)}},className:"bg-green-600 hover:bg-green-700 text-white",children:[(0,In.jsx)(Jg,{className:"w-4 h-4 mr-2"}),"Print Outs"]}),(0,In.jsxs)(rr,{onClick:()=>{try{const e=[["Outstanding Report"],[],["As of: ".concat(new Date(o).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}))],[],["Sr. No","Customer Name","Total Credit (\u20b9)","Total Received (\u20b9)","Outstanding (\u20b9)"],...h.map((e,t)=>[t+1,e.name,e.totalCredit.toFixed(2),e.totalReceived.toFixed(2),e.outstanding.toFixed(2)]),["Total","",f.totalCredit.toFixed(2),f.totalReceived.toFixed(2),f.outstanding.toFixed(2)],[],["Generated on: ".concat((new Date).toLocaleString("en-IN"))]],t=BN.book_new(),n=BN.aoa_to_sheet(e);n["!cols"]=[{wch:10},{wch:25},{wch:18},{wch:18},{wch:18}],BN.book_append_sheet(t,n,"Outstanding");_N(t,"Outstanding_Report_".concat(new Date(o).toISOString().split("T")[0],".xlsx")),console.log("Excel file exported successfully")}catch(e){console.error("Excel export error:",e),alert("Error exporting to Excel: "+e.message)}},className:"bg-blue-600 hover:bg-blue-700 text-white",children:[(0,In.jsx)(Zg,{className:"w-4 h-4 mr-2"}),"Excel"]})]})]})})}),(0,In.jsx)(Mn,{className:"".concat(a?"bg-gray-800 border-gray-700":"bg-white border-slate-200"),children:(0,In.jsx)(Un,{className:"p-4",children:(0,In.jsxs)("div",{id:"outstanding-pdf-content",className:"print-content",children:[u.includeHeader&&(0,In.jsx)("h1",{className:"text-2xl font-bold text-center mb-2 ".concat(a?"text-white":"text-slate-800"),children:"Outstanding Report"}),u.includeDate&&(0,In.jsxs)("p",{className:"text-center mb-6 ".concat(a?"text-gray-400":"text-slate-600"),children:["As of: ",new Date(l).toLocaleDateString("en-IN",{day:"numeric",month:"long",year:"numeric"})]}),0===h.length?(0,In.jsxs)("div",{className:"text-center py-8 ".concat(a?"text-gray-400":"text-slate-500"),children:[(0,In.jsx)(Ro,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),(0,In.jsx)("p",{children:"No data to display based on current filters"})]}):(0,In.jsx)("div",{className:"overflow-x-auto",children:(0,In.jsxs)("table",{className:"w-full border-collapse",children:[(0,In.jsx)("thead",{children:(0,In.jsxs)("tr",{className:"border-b-2 ".concat(a?"border-gray-600":"border-slate-300"),children:[(0,In.jsx)("th",{className:"text-left p-3 ".concat(a?"text-gray-300":"text-slate-700"),children:"Customer Name"}),(0,In.jsx)("th",{className:"text-right p-3 ".concat(a?"text-gray-300":"text-slate-700"),children:"Credit"}),(0,In.jsx)("th",{className:"text-right p-3 ".concat(a?"text-gray-300":"text-slate-700"),children:"Receipt"}),(0,In.jsx)("th",{className:"text-right p-3 ".concat(a?"text-gray-300":"text-slate-700"),children:"Outstanding Amount"})]})}),(0,In.jsxs)("tbody",{children:[h.map((e,t)=>(0,In.jsxs)("tr",{className:"border-b ".concat(a?"border-gray-700":"border-slate-200"),children:[(0,In.jsx)("td",{className:"p-3 ".concat(a?"text-white":"text-slate-800"),children:e.name}),(0,In.jsxs)("td",{className:"p-3 text-right ".concat(a?"text-blue-400":"text-blue-600"),children:["\u20b9",e.totalCredit.toFixed(2)]}),(0,In.jsxs)("td",{className:"p-3 text-right ".concat(a?"text-green-400":"text-green-600"),children:["\u20b9",e.totalReceived.toFixed(2)]}),(0,In.jsxs)("td",{className:"p-3 text-right font-bold ".concat(e.outstanding>0?a?"text-orange-400":"text-orange-600":a?"text-green-400":"text-green-600"),children:["\u20b9",e.outstanding.toFixed(2)]})]},t)),u.includeTotal&&(0,In.jsxs)("tr",{className:"font-bold border-t-2 ".concat(a?"bg-gray-700 border-gray-600":"bg-slate-50 border-slate-300"),children:[(0,In.jsxs)("td",{className:"p-3 ".concat(a?"text-white":"text-slate-800"),children:["TOTAL (",h.length," customers)"]}),(0,In.jsxs)("td",{className:"p-3 text-right ".concat(a?"text-blue-400":"text-blue-600"),children:["\u20b9",f.totalCredit.toFixed(2)]}),(0,In.jsxs)("td",{className:"p-3 text-right ".concat(a?"text-green-400":"text-green-600"),children:["\u20b9",f.totalReceived.toFixed(2)]}),(0,In.jsxs)("td",{className:"p-3 text-right ".concat(f.outstanding>0?a?"text-orange-400":"text-orange-600":a?"text-green-400":"text-green-600"),children:["\u20b9",f.outstanding.toFixed(2)]})]})]})]})})]})})})]})},HN=t=>{var n,r;let{customers:i,creditData:a,payments:o,salesData:l,settlementData:c,incomeData:u,expenseData:d,isDarkMode:h,selectedDate:f}=t;const[p,m]=(0,e.useState)(""),[g,y]=(0,e.useState)(""),[v,w]=(0,e.useState)(f),[b,x]=(0,e.useState)([]),[S,A]=(0,e.useState)(!1),[E,N]=(0,e.useState)("generate"),[C,_]=(0,e.useState)(""),[T,I]=(0,e.useState)(!1),k=(0,e.useRef)(null);(0,e.useEffect)(()=>{const e=e=>{k.current&&!k.current.contains(e.target)&&I(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const P=i.filter(e=>e.name.toLowerCase().includes(C.toLowerCase())),R=e=>{const t=[...a.filter(t=>t.customerName===e.name).filter(e=>e.date>=g&&e.date<=v).map(e=>({date:e.date,type:"credit",credit:e.amount,received:0,description:"Credit Sale - ".concat(e.fuelType||"N/A"," ").concat(e.liters||0,"L")})),...o.filter(e=>e.customerId===p).filter(e=>e.date>=g&&e.date<=v).map(e=>({date:e.date,type:"payment",credit:0,received:e.amount,description:"Payment Received"}))].sort((e,t)=>e.date.localeCompare(t.date));let n=e.startingBalance||0;const r=t.map(e=>(n+=e.credit-e.received,(0,s.A)((0,s.A)({},e),{},{outstanding:n})));x(r),A(!0),N("print")},D=e=>{const t=[],n=a.filter(t=>t.customerName===e.name&&!0!==t.mpp&&"true"!==t.mpp).filter(e=>e.date>=g&&e.date<=v).map(e=>({date:e.date,type:"credit",credit:e.amount,received:0,description:"Credit Sale - ".concat(e.fuelType||"N/A"," ").concat(e.liters||0,"L")}));console.log("=== DEBUGGING MPP FILTERS ==="),console.log("All Sales Data:",l.map(e=>({date:e.date,mpp:e.mpp,type:e.type,amount:e.amount}))),console.log("Date Range:",g,"to",v);const r=l.filter(e=>e.date>=g&&e.date<=v);console.log("Sales in date range:",r.map(e=>({date:e.date,mpp:e.mpp,type:e.type,amount:e.amount})));const i=r.filter(e=>!0===e.mpp||"true"===e.mpp);console.log("MPP Tagged Sales (all types):",i.map(e=>({date:e.date,mpp:e.mpp,type:e.type,amount:e.amount})));const h=i.reduce((e,t)=>e+(t.amount||0),0);console.log("Total MPP Fuel Sales:",h);const f=a.filter(e=>e.date>=g&&e.date<=v);console.log("Credits in date range:",f.map(e=>({date:e.date,mpp:e.mpp,customerName:e.customerName,amount:e.amount})));const m=f.filter(e=>!0===e.mpp||"true"===e.mpp);console.log("MPP Tagged Credits:",m.map(e=>({date:e.date,mpp:e.mpp,customerName:e.customerName,amount:e.amount})));const y=m.reduce((e,t)=>e+(t.amount||0),0);console.log("Total MPP Credit Amount (TOTAL including fuel + income + expenses):",y);u.filter(e=>!0===e.mpp||"true"===e.mpp).filter(e=>e.date>=g&&e.date<=v).reduce((e,t)=>e+(t.amount||0),0),a.filter(e=>!0===e.mpp||"true"===e.mpp).filter(e=>e.date>=g&&e.date<=v).reduce((e,t)=>t.incomeEntries&&t.incomeEntries.length>0?e+t.incomeEntries.reduce((e,t)=>e+(t.amount||0),0):e,0),d.filter(e=>!0===e.mpp||"true"===e.mpp).filter(e=>e.date>=g&&e.date<=v).reduce((e,t)=>e+(t.amount||0),0),a.filter(e=>!0===e.mpp||"true"===e.mpp).filter(e=>e.date>=g&&e.date<=v).reduce((e,t)=>t.expenseEntries&&t.expenseEntries.length>0?e+t.expenseEntries.reduce((e,t)=>e+(t.amount||0),0):e,0);const w=c.filter(e=>e.date>=g&&e.date<=v);console.log("Settlements in date range:",w.map(e=>({date:e.date,mpp:e.mpp,amount:e.amount})));const b=w.filter(e=>!0===e.mpp||"true"===e.mpp);console.log("MPP Tagged Settlements:",b.map(e=>({date:e.date,mpp:e.mpp,amount:e.amount})));const S=b.reduce((e,t)=>e+(t.amount||0),0);console.log("Total MPP Settlement Amount:",S);const E=new Set;l.filter(e=>e.date>=g&&e.date<=v).forEach(e=>E.add(e.date)),a.filter(e=>e.date>=g&&e.date<=v).forEach(e=>E.add(e.date)),u.filter(e=>e.date>=g&&e.date<=v).forEach(e=>E.add(e.date)),d.filter(e=>e.date>=g&&e.date<=v).forEach(e=>E.add(e.date)),c.filter(e=>e.date>=g&&e.date<=v).forEach(e=>E.add(e.date));const C=Array.from(E).sort();console.log("=== Customer Ledger MPP Cash Calculation (DAY-WISE) ==="),console.log("Customer:",e.name),console.log("Date Range:",g,"to",v),console.log("Dates with transactions:",C),console.log(""),C.forEach(e=>{const n=l.filter(t=>t.date===e&&(!0===t.mpp||"true"===t.mpp)).reduce((e,t)=>e+(t.amount||0),0),r=a.filter(t=>t.date===e&&(!0===t.mpp||"true"===t.mpp)).reduce((e,t)=>e+(t.amount||0),0),i=u.filter(t=>t.date===e&&(!0===t.mpp||"true"===t.mpp)).reduce((e,t)=>e+(t.amount||0),0)+a.filter(t=>t.date===e&&(!0===t.mpp||"true"===t.mpp)).reduce((e,t)=>t.incomeEntries&&t.incomeEntries.length>0?e+t.incomeEntries.reduce((e,t)=>e+(t.amount||0),0):e,0),s=d.filter(t=>t.date===e&&(!0===t.mpp||"true"===t.mpp)).reduce((e,t)=>e+(t.amount||0),0)+a.filter(t=>t.date===e&&(!0===t.mpp||"true"===t.mpp)).reduce((e,t)=>t.expenseEntries&&t.expenseEntries.length>0?e+t.expenseEntries.reduce((e,t)=>e+(t.amount||0),0):e,0),o=c.filter(t=>t.date===e&&(!0===t.mpp||"true"===t.mpp)).reduce((e,t)=>e+(t.amount||0),0),h=n-r-s+i-o;if(console.log("Date ".concat(e,":")),console.log("  Sales: ".concat(n,", Credits: ").concat(r,", Income: ").concat(i,", Expenses: ").concat(s,", Settlements: ").concat(o)),console.log("  MPP Cash: ".concat(h)),0!==h){const n={date:e,type:"mpp_cash",credit:h<0?Math.abs(h):0,received:h>0?h:0,description:"MPP Cash"};t.push(n)}}),console.log("==========================================");const _=o.filter(e=>e.customerId===p).filter(e=>e.date>=g&&e.date<=v).map(e=>({date:e.date,type:e.isAutoMPPTracking?"auto_mpp_payment":"payment",credit:0,received:e.amount,description:e.description||(e.isAutoMPPTracking?"MPP Transaction":"Payment Received")})),T=[...n,...t,..._].sort((e,t)=>e.date.localeCompare(t.date));let I=e.startingBalance||0;const k=T.map(e=>(I+=e.credit-e.received,(0,s.A)((0,s.A)({},e),{},{outstanding:I})));x(k),A(!0),N("print")},O=e=>{try{const n=new al.default;let r=20;n.setFontSize(18),n.text("Customer Ledger Report",105,r,{align:"center"}),r+=10,n.setFontSize(14),n.text(e.name,105,r,{align:"center"}),r+=8,n.setFontSize(11);const i="Period: ".concat(new Date(g).toLocaleDateString("en-IN")," to ").concat(new Date(v).toLocaleDateString("en-IN"));if(n.text(i,105,r,{align:"center"}),r+=15,0===b.length)n.setFontSize(12),n.text("No transactions found for the selected period",105,r,{align:"center"});else{var t;const e=b.map(e=>[new Date(e.date).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}),e.description,e.credit>0?e.credit.toFixed(2):"-",e.received>0?e.received.toFixed(2):"-",e.outstanding.toFixed(2)]),i=b.reduce((e,t)=>e+t.credit,0),s=b.reduce((e,t)=>e+t.received,0),a=(null===(t=b[b.length-1])||void 0===t?void 0:t.outstanding)||0;e.push(["TOTAL","",i.toFixed(2),s.toFixed(2),a.toFixed(2)]),n.autoTable({startY:r,head:[["Date","Description","Credit","Received","Outstanding"]],body:e,theme:"grid",headStyles:{fillColor:[240,240,240],textColor:[0,0,0]},styles:{fontSize:9},footStyles:{fillColor:[240,240,240],fontStyle:"bold"}})}r=n.internal.pageSize.height-15,n.setFontSize(9),n.text("Generated on: ".concat((new Date).toLocaleString("en-IN")),105,r,{align:"center"});const s=n.output("dataurlstring").split(",")[1],a="Ledger_".concat(e.name,"_").concat(g,"_to_").concat(v,".pdf");window.MPumpCalcAndroid&&window.MPumpCalcAndroid.openPdfWithViewer?window.MPumpCalcAndroid.openPdfWithViewer(s,a):(console.error("Android interface not available"),alert("PDF generation is only available in the Android app"))}catch(n){console.error("Error generating PDF for Android:",n),alert("Error generating PDF: "+n.message)}},L=e=>{var t;const n='\n<!DOCTYPE html>\n<html>\n<head>\n<meta charset="UTF-8">\n<meta name="viewport" content="width=device-width,initial-scale=1.0">\n<title>Customer Ledger Report</title>\n<style>\nbody{font-family:Arial,sans-serif;margin:20px;padding:0;line-height:1.4}\nh1{font-size:24px;margin:10px 0;text-align:center;color:#333}\nh2{font-size:18px;margin:5px 0;text-align:center;color:#555}\np{font-size:13px;margin:5px 0;text-align:center;color:#666}\ntable{width:100%;border-collapse:collapse;margin:15px 0;font-size:12px}\nth{background:#f0f0f0;border:1px solid #333;padding:7px;text-align:left;font-weight:bold}\ntd{border:1px solid #333;padding:5px}\n.r{text-align:right}\n.credit{color:#d97706}\n.received{color:#16a34a}\n.total-row{font-weight:bold;background:#f8f8f8}\n@media print{body{margin:10mm}}\n</style>\n</head>\n<body>\n<h1>Customer Ledger Report</h1>\n<h2>'.concat(e.name,"</h2>\n<p>Period: ").concat(new Date(g).toLocaleDateString("en-IN")," to ").concat(new Date(v).toLocaleDateString("en-IN"),"</p>\n\n").concat(b.length>0?'\n<table>\n<tr>\n  <th>Date</th>\n  <th>Description</th>\n  <th class="r">Credit</th>\n  <th class="r">Received</th>\n  <th class="r">Outstanding</th>\n</tr>\n'.concat(b.map(e=>"\n<tr>\n  <td>".concat(new Date(e.date).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}),"</td>\n  <td>").concat(e.description,'</td>\n  <td class="r credit">').concat(e.credit>0?"\u20b9"+e.credit.toFixed(2):"-",'</td>\n  <td class="r received">').concat(e.received>0?"\u20b9"+e.received.toFixed(2):"-",'</td>\n  <td class="r"><b>\u20b9').concat(e.outstanding.toFixed(2),"</b></td>\n</tr>\n")).join(""),'\n<tr class="total-row">\n  <td colspan="2"><b>TOTAL</b></td>\n  <td class="r credit"><b>\u20b9').concat(b.reduce((e,t)=>e+t.credit,0).toFixed(2),'</b></td>\n  <td class="r received"><b>\u20b9').concat(b.reduce((e,t)=>e+t.received,0).toFixed(2),'</b></td>\n  <td class="r"><b>\u20b9').concat((null===(t=b[b.length-1])||void 0===t?void 0:t.outstanding.toFixed(2))||"0.00","</b></td>\n</tr>\n</table>\n"):'<p style="text-align:center;margin:30px 0">No transactions found</p>','\n\n<div style="margin-top:20px;text-align:center;font-size:11px;border-top:1px solid #ccc;padding-top:8px">\nGenerated on: ').concat((new Date).toLocaleString("en-IN"),"\n</div>\n\n<script>\nwindow.onload = function() {\n  setTimeout(function() {\n    window.print();\n  }, 500);\n};\n<\/script>\n</body>\n</html>"),r=window.open("","_blank","width=800,height=600");r&&(r.document.write(n),r.document.close())},M=i.find(e=>e.id===p);return(0,In.jsxs)(Oi,{value:E,onValueChange:N,className:"w-full",children:[(0,In.jsxs)(Li,{className:"flex w-full mb-4 ".concat(h?"bg-gray-800":"bg-slate-100"),children:[(0,In.jsx)(Mi,{value:"generate",className:"flex-1 text-xs sm:text-sm",children:"Report"}),(0,In.jsx)(Mi,{value:"print",className:"flex-1 text-xs sm:text-sm",disabled:!S,children:"Print"})]}),(0,In.jsx)(Fi,{value:"generate",children:(0,In.jsx)("div",{className:"space-y-4",children:(0,In.jsx)(Mn,{className:"".concat(h?"bg-gray-800 border-gray-700":"bg-white border-slate-200"),children:(0,In.jsxs)(Un,{className:"p-4",children:[(0,In.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,In.jsx)(Ro,{className:"w-5 h-5 ".concat(h?"text-blue-400":"text-blue-600")}),(0,In.jsx)("h3",{className:"text-lg font-semibold ".concat(h?"text-white":"text-slate-800"),children:"Customer Ledger Report"})]}),(0,In.jsxs)("div",{className:"space-y-4",children:[(0,In.jsxs)("div",{className:"relative",ref:k,children:[(0,In.jsx)(pr,{htmlFor:"customer",className:h?"text-gray-300":"text-slate-700",children:"Select Customer"}),(0,In.jsxs)("div",{className:"relative mt-1",children:[(0,In.jsx)(sr,{type:"text",placeholder:"Search and select customer...",value:C,onChange:e=>{_(e.target.value),I(!0)},onFocus:()=>I(!0),className:"w-full pr-10 ".concat(h?"bg-gray-700 border-gray-600 text-white":"")}),(0,In.jsx)(ph,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 cursor-pointer ".concat(h?"text-gray-400":"text-gray-500"),onClick:()=>I(!T)}),T&&(0,In.jsx)("div",{className:"absolute z-10 w-full mt-1 max-h-60 overflow-auto rounded-md border shadow-lg ".concat(h?"bg-gray-700 border-gray-600":"bg-white border-gray-300"),children:P.length>0?P.map(e=>(0,In.jsx)("div",{className:"px-3 py-2 cursor-pointer hover:".concat(h?"bg-gray-600":"bg-gray-100"," ").concat(p===e.id?h?"bg-blue-600":"bg-blue-100":""),onClick:()=>{m(e.id),_(e.name),I(!1)},children:(0,In.jsx)("div",{className:h?"text-white":"text-gray-900",children:e.name})},e.id)):(0,In.jsx)("div",{className:"px-3 py-2 ".concat(h?"text-gray-400":"text-gray-500"),children:"No customers found"})})]})]}),(0,In.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,In.jsxs)("div",{children:[(0,In.jsx)(pr,{htmlFor:"fromDate",className:h?"text-gray-300":"text-slate-700",children:"From Date"}),(0,In.jsx)(sr,{id:"fromDate",type:"date",value:g,onChange:e=>y(e.target.value),className:"mt-1 ".concat(h?"bg-gray-700 border-gray-600 text-white":"")})]}),(0,In.jsxs)("div",{children:[(0,In.jsx)(pr,{htmlFor:"toDate",className:h?"text-gray-300":"text-slate-700",children:"To Date"}),(0,In.jsx)(sr,{id:"toDate",type:"date",value:v,onChange:e=>w(e.target.value),className:"mt-1 ".concat(h?"bg-gray-700 border-gray-600 text-white":"")})]})]}),(0,In.jsxs)(rr,{onClick:()=>{if(!p||!g||!v)return;const e=i.find(e=>e.id===p);if(!e)return;!0===e.isMPP||e.name.toLowerCase().includes("manager petrol pump")?D(e):R(e)},disabled:!p||!g||!v,className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:[(0,In.jsx)(Em,{className:"w-4 h-4 mr-2"}),"Generate Report"]})]})]})})})}),(0,In.jsx)(Fi,{value:"print",children:(0,In.jsxs)("div",{className:"space-y-4",children:[(0,In.jsx)(Mn,{className:"".concat(h?"bg-gray-800 border-gray-700":"bg-white border-slate-200"),children:(0,In.jsx)(Un,{className:"p-4",children:(0,In.jsxs)(rr,{onClick:()=>{const e=i.find(e=>e.id===p);if(e)try{if("undefined"!==typeof window.MPumpCalcAndroid)return void O(e);L(e)}catch(t){console.error("Print error:",t),alert("Error generating report: "+t.message)}else alert("Please select a customer first")},className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:[(0,In.jsx)(Jg,{className:"w-4 h-4 mr-2"}),"Print Report"]})})}),(0,In.jsx)(Mn,{className:"".concat(h?"bg-gray-800 border-gray-700":"bg-white border-slate-200"),children:(0,In.jsx)(Un,{className:"p-4",children:(0,In.jsxs)("div",{id:"ledger-print-content",className:"print-content",children:[(0,In.jsxs)("div",{className:"mb-4",children:[(0,In.jsxs)("h3",{className:"text-xl font-bold ".concat(h?"text-white":"text-slate-800"),children:["Customer Ledger Report: ",null===M||void 0===M?void 0:M.name]}),(0,In.jsxs)("p",{className:"text-sm ".concat(h?"text-gray-400":"text-slate-600"),children:["Period: ",new Date(g).toLocaleDateString("en-IN")," to ",new Date(v).toLocaleDateString("en-IN")]})]}),0===b.length?(0,In.jsxs)("div",{className:"text-center py-8 ".concat(h?"text-gray-400":"text-slate-500"),children:[(0,In.jsx)(Ro,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),(0,In.jsx)("p",{children:"No transactions found for the selected period"})]}):(0,In.jsx)("div",{className:"overflow-x-auto",children:(0,In.jsxs)("table",{className:"w-full border-collapse",children:[(0,In.jsx)("thead",{children:(0,In.jsxs)("tr",{className:"border-b-2 ".concat(h?"border-gray-600":"border-slate-300"),children:[(0,In.jsx)("th",{className:"text-left p-3 ".concat(h?"text-gray-300":"text-slate-700"),children:"Date"}),(0,In.jsx)("th",{className:"text-left p-3 ".concat(h?"text-gray-300":"text-slate-700"),children:"Description"}),(0,In.jsx)("th",{className:"text-right p-3 ".concat(h?"text-gray-300":"text-slate-700"),children:"Credit"}),(0,In.jsx)("th",{className:"text-right p-3 ".concat(h?"text-gray-300":"text-slate-700"),children:"Received"}),(0,In.jsx)("th",{className:"text-right p-3 ".concat(h?"text-gray-300":"text-slate-700"),children:"Outstanding"})]})}),(0,In.jsxs)("tbody",{children:[b.map((e,t)=>(0,In.jsxs)("tr",{className:"border-b ".concat(h?"border-gray-700":"border-slate-200"),children:[(0,In.jsx)("td",{className:"p-3 ".concat(h?"text-white":"text-slate-800"),children:new Date(e.date).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}),(0,In.jsx)("td",{className:"p-3 ".concat(h?"text-gray-300":"text-slate-600"),children:e.description}),(0,In.jsx)("td",{className:"p-3 text-right ".concat(e.credit>0?h?"text-orange-400":"text-orange-600":h?"text-gray-500":"text-slate-400"),children:e.credit>0?"\u20b9".concat(e.credit.toFixed(2)):"-"}),(0,In.jsx)("td",{className:"p-3 text-right ".concat(e.received>0?h?"text-green-400":"text-green-600":h?"text-gray-500":"text-slate-400"),children:e.received>0?"\u20b9".concat(e.received.toFixed(2)):"-"}),(0,In.jsxs)("td",{className:"p-3 text-right font-bold ".concat(e.outstanding>0?h?"text-orange-400":"text-orange-600":h?"text-green-400":"text-green-600"),children:["\u20b9",e.outstanding.toFixed(2)]})]},t)),(0,In.jsxs)("tr",{className:"font-bold border-t-2 ".concat(h?"bg-gray-700 border-gray-600":"bg-slate-50 border-slate-300"),children:[(0,In.jsx)("td",{colSpan:"2",className:"p-3 ".concat(h?"text-white":"text-slate-800"),children:"TOTAL"}),(0,In.jsxs)("td",{className:"p-3 text-right ".concat(h?"text-orange-400":"text-orange-600"),children:["\u20b9",b.reduce((e,t)=>e+t.credit,0).toFixed(2)]}),(0,In.jsxs)("td",{className:"p-3 text-right ".concat(h?"text-green-400":"text-green-600"),children:["\u20b9",b.reduce((e,t)=>e+t.received,0).toFixed(2)]}),(0,In.jsxs)("td",{className:"p-3 text-right ".concat((null===(n=b[b.length-1])||void 0===n?void 0:n.outstanding)>0?h?"text-orange-400":"text-orange-600":h?"text-green-400":"text-green-600"),children:["\u20b9",(null===(r=b[b.length-1])||void 0===r?void 0:r.outstanding.toFixed(2))||"0.00"]})]})]})]})})]})})})]})})]})},WN=t=>{let{isDarkMode:n,settlementData:r,payments:i,creditData:s,salesData:a,incomeData:o,expenseData:l,selectedDate:c}=t;const[u,d]=(0,e.useState)(c),[h,f]=(0,e.useState)(c),p=(0,e.useMemo)(()=>{const e=new Date(u),t=new Date(h),n=[];for(let r=new Date(e);r<=t;r.setDate(r.getDate()+1))n.push(new Date(r).toISOString().split("T")[0]);return n.map((e,t)=>{const n=r.filter(t=>t.date===e),c=i.filter(t=>t.date===e),u=s.filter(t=>t.date===e),d=a.filter(t=>t.date===e),h=o.filter(t=>t.date===e),f=l.filter(t=>t.date===e),p=d.filter(e=>!e.mpp&&!0!==e.mpp&&"true"!==e.mpp),m=d.filter(e=>!0===e.mpp||"true"===e.mpp),g=p.reduce((e,t)=>e+(t.amount||0),0),y=m.reduce((e,t)=>e+(t.amount||0),0),v=u.filter(e=>!e.mpp&&!0!==e.mpp&&"true"!==e.mpp),w=u.filter(e=>!0===e.mpp||"true"===e.mpp),b=v.reduce((e,t)=>e+(t.amount||0),0),x=w.reduce((e,t)=>e+(t.amount||0),0),S=h.filter(e=>!e.mpp).reduce((e,t)=>e+(t.amount||0),0),A=h.filter(e=>!0===e.mpp||"true"===e.mpp).reduce((e,t)=>e+(t.amount||0),0),E=S+v.reduce((e,t)=>t.incomeEntries&&t.incomeEntries.length>0?e+t.incomeEntries.reduce((e,t)=>e+(t.amount||0),0):e,0),N=A+w.reduce((e,t)=>t.incomeEntries&&t.incomeEntries.length>0?e+t.incomeEntries.reduce((e,t)=>e+(t.amount||0),0):e,0),C=f.filter(e=>!e.mpp).reduce((e,t)=>e+(t.amount||0),0),_=f.filter(e=>!0===e.mpp||"true"===e.mpp).reduce((e,t)=>e+(t.amount||0),0),T=C+v.reduce((e,t)=>t.expenseEntries&&t.expenseEntries.length>0?e+t.expenseEntries.reduce((e,t)=>e+(t.amount||0),0):e,0),I=_+w.reduce((e,t)=>t.expenseEntries&&t.expenseEntries.length>0?e+t.expenseEntries.reduce((e,t)=>e+(t.amount||0),0):e,0),k=n.filter(e=>!e.mpp&&!0!==e.mpp&&"true"!==e.mpp),P=n.filter(e=>!0===e.mpp||"true"===e.mpp),R=g-b-T+E-k.reduce((e,t)=>e+(t.amount||0),0)+(y-x-I+N-P.reduce((e,t)=>e+(t.amount||0),0))+n.filter(e=>e.description&&e.description.toLowerCase().includes("home")).reduce((e,t)=>e+(t.amount||0),0)+c.filter(e=>e.mode&&e.mode.toLowerCase().includes("home")).reduce((e,t)=>e+(t.amount||0),0)+c.filter(e=>e.mode&&"cash"===e.mode.toLowerCase()).reduce((e,t)=>e+(t.amount||0),0),D=n.filter(e=>e.description&&e.description.toLowerCase().includes("card")).reduce((e,t)=>e+(t.amount||0),0)+c.filter(e=>e.mode&&"card"===e.mode.toLowerCase()).reduce((e,t)=>e+(t.amount||0),0),O=n.filter(e=>e.description&&e.description.toLowerCase().includes("paytm")).reduce((e,t)=>e+(t.amount||0),0)+c.filter(e=>e.mode&&("wallet"===e.mode.toLowerCase()||e.mode.toLowerCase().includes("paytm"))).reduce((e,t)=>e+(t.amount||0),0),L=n.filter(e=>e.description&&e.description.toLowerCase().includes("phonepe")).reduce((e,t)=>e+(t.amount||0),0)+c.filter(e=>e.mode&&e.mode.toLowerCase().includes("phonepe")).reduce((e,t)=>e+(t.amount||0),0),M=n.filter(e=>e.description&&e.description.toLowerCase().includes("dtp")).reduce((e,t)=>e+(t.amount||0),0),F=c.filter(e=>e.mode&&"dtp"===e.mode.toLowerCase()).reduce((e,t)=>e+(t.amount||0),0);return{srNo:t+1,date:e,cashAmount:R,cardAmount:D,paytmAmount:O,phonepeAmount:L,dtpAmount:M+F}})},[u,h,r,i,s,a,o,l]),m=(0,e.useMemo)(()=>p.reduce((e,t)=>({cashAmount:e.cashAmount+t.cashAmount,cardAmount:e.cardAmount+t.cardAmount,paytmAmount:e.paytmAmount+t.paytmAmount,phonepeAmount:e.phonepeAmount+t.phonepeAmount,dtpAmount:e.dtpAmount+t.dtpAmount}),{cashAmount:0,cardAmount:0,paytmAmount:0,phonepeAmount:0,dtpAmount:0}),[p]);return(0,In.jsx)(Mn,{className:"".concat(n?"bg-gray-800 border-gray-700":"bg-white border-slate-200"," shadow-lg"),children:(0,In.jsxs)(Un,{className:"p-2 sm:p-3 space-y-3",children:[(0,In.jsx)("h2",{className:"text-lg sm:text-2xl font-bold mb-2 ".concat(n?"text-white":"text-slate-800"),children:"Bank Settlement"}),(0,In.jsxs)("div",{className:"space-y-2",children:[(0,In.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,In.jsxs)("div",{className:"space-y-1",children:[(0,In.jsxs)(pr,{className:"text-xs sm:text-sm font-medium flex items-center gap-1 ".concat(n?"text-gray-300":"text-slate-700"),children:[(0,In.jsx)(Po,{className:"w-3 h-3"}),"From Date"]}),(0,In.jsx)(sr,{type:"date",value:u,onChange:e=>d(e.target.value),className:"text-xs sm:text-sm ".concat(n?"bg-gray-700 border-gray-600 text-white":"")})]}),(0,In.jsxs)("div",{className:"space-y-1",children:[(0,In.jsxs)(pr,{className:"text-xs sm:text-sm font-medium flex items-center gap-1 ".concat(n?"text-gray-300":"text-slate-700"),children:[(0,In.jsx)(Po,{className:"w-3 h-3"}),"To Date"]}),(0,In.jsx)(sr,{type:"date",value:h,onChange:e=>f(e.target.value),className:"text-xs sm:text-sm ".concat(n?"bg-gray-700 border-gray-600 text-white":"")})]})]}),(0,In.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,In.jsxs)(rr,{onClick:()=>{const e='\n<!DOCTYPE html>\n<html>\n<head>\n  <meta charset="UTF-8">\n  <title>Bank Settlement Report</title>\n  <style>\n    @media print {\n      body { margin: 10mm; }\n      @page { size: A4 landscape; margin: 10mm; }\n    }\n    body {\n      font-family: Arial, sans-serif;\n      font-size: 12px;\n      color: #333;\n    }\n    .header {\n      text-align: center;\n      margin-bottom: 20px;\n      border-bottom: 2px solid #333;\n      padding-bottom: 10px;\n    }\n    .header h1 {\n      margin: 0;\n      font-size: 20px;\n      color: #1a56db;\n    }\n    .date-range {\n      text-align: center;\n      margin-bottom: 20px;\n      font-size: 13px;\n      color: #666;\n    }\n    .summary {\n      display: flex;\n      justify-content: space-around;\n      margin-bottom: 20px;\n      gap: 10px;\n    }\n    .summary-card {\n      border: 1px solid #ddd;\n      padding: 10px;\n      border-radius: 5px;\n      text-align: center;\n      flex: 1;\n    }\n    .summary-card .label {\n      font-size: 11px;\n      color: #666;\n      font-weight: bold;\n    }\n    .summary-card .value {\n      font-size: 16px;\n      font-weight: bold;\n      margin-top: 5px;\n    }\n    .cash { color: #ea580c; }\n    .card { color: #1d4ed8; }\n    .paytm { color: #7c3aed; }\n    .phonepe { color: #4338ca; }\n    .dtp { color: #16a34a; }\n    table {\n      width: 100%;\n      border-collapse: collapse;\n      margin-bottom: 20px;\n    }\n    th, td {\n      border: 1px solid #ddd;\n      padding: 8px;\n      text-align: left;\n    }\n    th {\n      background-color: #f3f4f6;\n      font-weight: bold;\n      text-align: left;\n    }\n    td.number {\n      text-align: right;\n      font-family: \'Courier New\', monospace;\n    }\n    tfoot td {\n      font-weight: bold;\n      background-color: #f9fafb;\n      border-top: 2px solid #333;\n    }\n    .footer {\n      margin-top: 20px;\n      text-align: center;\n      font-size: 10px;\n      color: #666;\n      border-top: 1px solid #ccc;\n      padding-top: 8px;\n    }\n  </style>\n</head>\n<body>\n  <div class="header">\n    <h1>\ud83c\udfe6 Bank Settlement Report</h1>\n  </div>\n  \n  <div class="date-range">\n    <strong>Date Range:</strong> '.concat(new Date(u).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})," \n    to ").concat(new Date(h).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}),'\n  </div>\n\n  <div class="summary">\n    <div class="summary-card">\n      <div class="label">Cash</div>\n      <div class="value cash">\u20b9').concat(m.cashAmount.toFixed(2),'</div>\n    </div>\n    <div class="summary-card">\n      <div class="label">Card</div>\n      <div class="value card">\u20b9').concat(m.cardAmount.toFixed(2),'</div>\n    </div>\n    <div class="summary-card">\n      <div class="label">Paytm</div>\n      <div class="value paytm">\u20b9').concat(m.paytmAmount.toFixed(2),'</div>\n    </div>\n    <div class="summary-card">\n      <div class="label">PhonePe</div>\n      <div class="value phonepe">\u20b9').concat(m.phonepeAmount.toFixed(2),'</div>\n    </div>\n    <div class="summary-card">\n      <div class="label">DTP</div>\n      <div class="value dtp">\u20b9').concat(m.dtpAmount.toFixed(2),'</div>\n    </div>\n  </div>\n\n  <table>\n    <thead>\n      <tr>\n        <th>Sr. No</th>\n        <th>Date</th>\n        <th style="text-align: right;">Cash (\u20b9)</th>\n        <th style="text-align: right;">Card (\u20b9)</th>\n        <th style="text-align: right;">Paytm (\u20b9)</th>\n        <th style="text-align: right;">PhonePe (\u20b9)</th>\n        <th style="text-align: right;">DTP (\u20b9)</th>\n      </tr>\n    </thead>\n    <tbody>\n      ').concat(p.map(e=>"\n        <tr>\n          <td>".concat(e.srNo,"</td>\n          <td>").concat(new Date(e.date).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}),'</td>\n          <td class="number">').concat(e.cashAmount>0?e.cashAmount.toFixed(2):"-",'</td>\n          <td class="number">').concat(e.cardAmount>0?e.cardAmount.toFixed(2):"-",'</td>\n          <td class="number">').concat(e.paytmAmount>0?e.paytmAmount.toFixed(2):"-",'</td>\n          <td class="number">').concat(e.phonepeAmount>0?e.phonepeAmount.toFixed(2):"-",'</td>\n          <td class="number">').concat(e.dtpAmount>0?e.dtpAmount.toFixed(2):"-","</td>\n        </tr>\n      ")).join(""),'\n    </tbody>\n    <tfoot>\n      <tr>\n        <td colspan="2">Total</td>\n        <td class="number cash">').concat(m.cashAmount.toFixed(2),'</td>\n        <td class="number card">').concat(m.cardAmount.toFixed(2),'</td>\n        <td class="number paytm">').concat(m.paytmAmount.toFixed(2),'</td>\n        <td class="number phonepe">').concat(m.phonepeAmount.toFixed(2),'</td>\n        <td class="number dtp">').concat(m.dtpAmount.toFixed(2),'</td>\n      </tr>\n    </tfoot>\n  </table>\n\n  <div class="footer">\n    Generated on: ').concat((new Date).toLocaleString("en-IN"),"<br>\n    Note: Amounts include settlements and customer receipts for each payment mode.\n  </div>\n\n  <script>\n    window.onload = function() {\n      setTimeout(function() {\n        window.print();\n      }, 500);\n    };\n  <\/script>\n</body>\n</html>"),t=window.open("","_blank","width=1000,height=800");t&&(t.document.write(e),t.document.close())},className:"text-xs sm:text-sm ".concat(n?"bg-green-700 hover:bg-green-600 text-white":"bg-green-600 hover:bg-green-700 text-white"),children:[(0,In.jsx)(Jg,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2"}),"Print"]}),(0,In.jsxs)(rr,{onClick:()=>{try{const e=[["Bank Settlement Report"],[],["Date Range: ".concat(new Date(u).toLocaleDateString("en-IN")," to ").concat(new Date(h).toLocaleDateString("en-IN"))],[],["Summary"],["Payment Mode","Total Amount (\u20b9)"],["Cash",m.cashAmount.toFixed(2)],["Card",m.cardAmount.toFixed(2)],["Paytm",m.paytmAmount.toFixed(2)],["PhonePe",m.phonepeAmount.toFixed(2)],["DTP",m.dtpAmount.toFixed(2)],[],["Sr. No","Date","Cash (\u20b9)","Card (\u20b9)","Paytm (\u20b9)","PhonePe (\u20b9)","DTP (\u20b9)"],...p.map(e=>[e.srNo,new Date(e.date).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}),e.cashAmount>0?e.cashAmount.toFixed(2):"-",e.cardAmount>0?e.cardAmount.toFixed(2):"-",e.paytmAmount>0?e.paytmAmount.toFixed(2):"-",e.phonepeAmount>0?e.phonepeAmount.toFixed(2):"-",e.dtpAmount>0?e.dtpAmount.toFixed(2):"-"]),["Total","",m.cashAmount.toFixed(2),m.cardAmount.toFixed(2),m.paytmAmount.toFixed(2),m.phonepeAmount.toFixed(2),m.dtpAmount.toFixed(2)],[],["Generated on: ".concat((new Date).toLocaleString("en-IN"))],["Note: Amounts include settlements and customer receipts for each payment mode"]],t=BN.book_new(),n=BN.aoa_to_sheet(e);n["!cols"]=[{wch:10},{wch:15},{wch:12},{wch:12},{wch:12},{wch:12},{wch:12}],BN.book_append_sheet(t,n,"Bank Settlement");_N(t,"Bank_Settlement_".concat(new Date(u).toISOString().split("T")[0],"_to_").concat(new Date(h).toISOString().split("T")[0],".xlsx")),console.log("Excel file exported successfully")}catch(e){console.error("Excel export error:",e),alert("Error exporting to Excel: "+e.message)}},className:"text-xs sm:text-sm ".concat(n?"bg-blue-700 hover:bg-blue-600 text-white":"bg-blue-600 hover:bg-blue-700 text-white"),children:[(0,In.jsx)(Zg,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2"}),"Excel"]})]})]}),(0,In.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-5 gap-2",children:[(0,In.jsxs)("div",{className:"py-1.5 px-2 sm:py-2 sm:px-3 rounded-lg ".concat(n?"bg-gray-700":"bg-orange-50"),children:[(0,In.jsx)("div",{className:"text-xs sm:text-base font-medium ".concat(n?"text-gray-300":"text-slate-800"),children:"Cash"}),(0,In.jsxs)("div",{className:"text-xs sm:text-lg font-bold ".concat(n?"text-white":"text-slate-800"),children:["\u20b9",m.cashAmount.toFixed(2)]})]}),(0,In.jsxs)("div",{className:"py-1.5 px-2 sm:py-2 sm:px-3 rounded-lg ".concat(n?"bg-gray-700":"bg-blue-50"),children:[(0,In.jsx)("div",{className:"text-xs sm:text-base font-medium ".concat(n?"text-gray-300":"text-slate-800"),children:"Card"}),(0,In.jsxs)("div",{className:"text-xs sm:text-lg font-bold ".concat(n?"text-white":"text-slate-800"),children:["\u20b9",m.cardAmount.toFixed(2)]})]}),(0,In.jsxs)("div",{className:"py-1.5 px-2 sm:py-2 sm:px-3 rounded-lg ".concat(n?"bg-gray-700":"bg-purple-50"),children:[(0,In.jsx)("div",{className:"text-xs sm:text-base font-medium ".concat(n?"text-gray-300":"text-slate-800"),children:"Paytm"}),(0,In.jsxs)("div",{className:"text-xs sm:text-lg font-bold ".concat(n?"text-white":"text-slate-800"),children:["\u20b9",m.paytmAmount.toFixed(2)]})]}),(0,In.jsxs)("div",{className:"py-1.5 px-2 sm:py-2 sm:px-3 rounded-lg ".concat(n?"bg-gray-700":"bg-indigo-50"),children:[(0,In.jsx)("div",{className:"text-xs sm:text-base font-medium ".concat(n?"text-gray-300":"text-slate-800"),children:"PhonePe"}),(0,In.jsxs)("div",{className:"text-xs sm:text-lg font-bold ".concat(n?"text-white":"text-slate-800"),children:["\u20b9",m.phonepeAmount.toFixed(2)]})]}),(0,In.jsxs)("div",{className:"py-1.5 px-2 sm:py-2 sm:px-3 rounded-lg ".concat(n?"bg-gray-700":"bg-green-50"),children:[(0,In.jsx)("div",{className:"text-xs sm:text-base font-medium ".concat(n?"text-gray-300":"text-slate-800"),children:"DTP"}),(0,In.jsxs)("div",{className:"text-xs sm:text-lg font-bold ".concat(n?"text-white":"text-slate-800"),children:["\u20b9",m.dtpAmount.toFixed(2)]})]})]}),(0,In.jsx)("div",{className:"rounded-lg border overflow-hidden ".concat(n?"border-gray-600":"border-slate-200"),children:(0,In.jsx)("div",{className:"overflow-x-auto",children:(0,In.jsxs)("table",{className:"w-full text-xs sm:text-sm",children:[(0,In.jsx)("thead",{className:"".concat(n?"bg-gray-700 text-gray-300":"bg-slate-100 text-slate-700"),children:(0,In.jsxs)("tr",{children:[(0,In.jsx)("th",{className:"px-2 sm:px-3 py-1.5 sm:py-2 text-left font-semibold",children:"Sr. No"}),(0,In.jsx)("th",{className:"px-2 sm:px-3 py-1.5 sm:py-2 text-left font-semibold",children:"Date"}),(0,In.jsx)("th",{className:"px-2 sm:px-3 py-1.5 sm:py-2 text-right font-semibold",children:"Cash (\u20b9)"}),(0,In.jsx)("th",{className:"px-2 sm:px-3 py-1.5 sm:py-2 text-right font-semibold",children:"Card (\u20b9)"}),(0,In.jsx)("th",{className:"px-2 sm:px-3 py-1.5 sm:py-2 text-right font-semibold",children:"Paytm (\u20b9)"}),(0,In.jsx)("th",{className:"px-2 sm:px-3 py-1.5 sm:py-2 text-right font-semibold",children:"PhonePe (\u20b9)"}),(0,In.jsx)("th",{className:"px-2 sm:px-3 py-1.5 sm:py-2 text-right font-semibold",children:"DTP (\u20b9)"})]})}),(0,In.jsx)("tbody",{className:n?"text-gray-300":"text-slate-700",children:0===p.length?(0,In.jsx)("tr",{children:(0,In.jsx)("td",{colSpan:"7",className:"px-2 sm:px-3 py-6 sm:py-8 text-center text-xs sm:text-sm ".concat(n?"text-gray-400":"text-slate-500"),children:"No data available for selected date range"})}):p.map(e=>(0,In.jsxs)("tr",{className:"border-t ".concat(n?"border-gray-700 hover:bg-gray-700/50":"border-slate-200 hover:bg-slate-50"),children:[(0,In.jsx)("td",{className:"px-2 sm:px-3 py-1.5 sm:py-2",children:e.srNo}),(0,In.jsx)("td",{className:"px-2 sm:px-3 py-1.5 sm:py-2 font-medium",children:new Date(e.date).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}),(0,In.jsx)("td",{className:"px-2 sm:px-3 py-1.5 sm:py-2 text-right font-mono",children:e.cashAmount>0?e.cashAmount.toFixed(2):"-"}),(0,In.jsx)("td",{className:"px-2 sm:px-3 py-1.5 sm:py-2 text-right font-mono",children:e.cardAmount>0?e.cardAmount.toFixed(2):"-"}),(0,In.jsx)("td",{className:"px-2 sm:px-3 py-1.5 sm:py-2 text-right font-mono",children:e.paytmAmount>0?e.paytmAmount.toFixed(2):"-"}),(0,In.jsx)("td",{className:"px-2 sm:px-3 py-1.5 sm:py-2 text-right font-mono",children:e.phonepeAmount>0?e.phonepeAmount.toFixed(2):"-"}),(0,In.jsx)("td",{className:"px-2 sm:px-3 py-1.5 sm:py-2 text-right font-mono",children:e.dtpAmount>0?e.dtpAmount.toFixed(2):"-"})]},e.date))}),p.length>0&&(0,In.jsx)("tfoot",{className:"border-t-2 ".concat(n?"border-gray-600 bg-gray-700":"border-slate-300 bg-slate-50"),children:(0,In.jsxs)("tr",{className:"font-bold",children:[(0,In.jsx)("td",{colSpan:"2",className:"px-2 sm:px-3 py-1.5 sm:py-2 text-xs sm:text-sm",children:"Total"}),(0,In.jsx)("td",{className:"px-2 sm:px-3 py-1.5 sm:py-2 text-right font-mono ".concat(n?"text-orange-400":"text-orange-600"),children:m.cashAmount.toFixed(2)}),(0,In.jsx)("td",{className:"px-2 sm:px-3 py-1.5 sm:py-2 text-right font-mono ".concat(n?"text-blue-400":"text-blue-600"),children:m.cardAmount.toFixed(2)}),(0,In.jsx)("td",{className:"px-2 sm:px-3 py-1.5 sm:py-2 text-right font-mono ".concat(n?"text-purple-400":"text-purple-600"),children:m.paytmAmount.toFixed(2)}),(0,In.jsx)("td",{className:"px-2 sm:px-3 py-1.5 sm:py-2 text-right font-mono ".concat(n?"text-indigo-400":"text-indigo-600"),children:m.phonepeAmount.toFixed(2)}),(0,In.jsx)("td",{className:"px-2 sm:px-3 py-1.5 sm:py-2 text-right font-mono ".concat(n?"text-green-400":"text-green-600"),children:m.dtpAmount.toFixed(2)})]})})]})})}),(0,In.jsxs)("div",{className:"text-xs sm:text-sm p-2 sm:p-3 rounded-lg ".concat(n?"bg-gray-700 text-gray-300":"bg-blue-50 text-slate-700"),children:[(0,In.jsx)("strong",{className:n?"text-white":"text-slate-800",children:"Note:"})," Amounts include settlements and customer receipts for each payment mode. This report helps verify digital payment settlements with bank deposits."]})]})})},qN=ho("wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),GN=ho("wifi-off",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),KN=ho("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),YN=ho("cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]),XN=ho("cloud-off",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]]);var QN=n(4144),JN=n(6860),ZN=n(6931);const $N=t=>{let{isDarkMode:n}=t;const[r,i]=(0,e.useState)(navigator.onLine),[s,a]=(0,e.useState)(!1),[o,l]=(0,e.useState)(!1);(0,e.useEffect)(()=>{const e=()=>i(!0),t=()=>i(!1);window.addEventListener("online",e),window.addEventListener("offline",t);const n=(0,QN.hg)(JN.auth,e=>{a(!!e)});return()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t),n()}},[]),(0,e.useEffect)(()=>{r&&s&&(l(!0),setTimeout(()=>l(!1),2e3))},[r,s]);return(0,In.jsxs)("div",{className:"fixed bottom-4 right-4 z-50 flex items-center gap-2 px-3 py-2 rounded-lg shadow-lg ".concat(n?"bg-gray-800 border-gray-700":"bg-white border-gray-200"," border"),children:[(0,In.jsxs)("div",{className:"flex items-center gap-1",children:[r?(0,In.jsx)(qN,{className:"w-4 h-4 text-green-500"}):(0,In.jsx)(GN,{className:"w-4 h-4 text-red-500"}),(0,In.jsx)("span",{className:"text-xs ".concat(n?"text-gray-300":"text-gray-600"),children:r?"Online":"Offline"})]}),(0,In.jsx)("div",{className:"w-px h-4 ".concat(n?"bg-gray-600":"bg-gray-300")}),(0,In.jsxs)("div",{className:"flex items-center gap-1",children:[o?(0,In.jsx)(KN,{className:"w-4 h-4 text-blue-500 animate-spin"}):r&&s?(0,In.jsx)(YN,{className:"w-4 h-4 text-blue-500"}):(0,In.jsx)(XN,{className:"w-4 h-4 text-gray-400"}),(0,In.jsx)("span",{className:"text-xs ".concat(n?"text-gray-300":"text-gray-600"),children:o?"Syncing...":r&&s?"Synced":"Local"})]}),r&&s&&!o&&(0,In.jsxs)(In.Fragment,{children:[(0,In.jsx)("div",{className:"w-px h-4 ".concat(n?"bg-gray-600":"bg-gray-300")}),(0,In.jsx)("button",{onClick:async()=>{l(!0);try{await ZN.A.syncAllLocalData(),setTimeout(()=>l(!1),1e3)}catch(e){console.error("Manual sync failed:",e),l(!1)}},className:"text-xs px-2 py-1 rounded ".concat(n?"bg-blue-600 hover:bg-blue-700 text-white":"bg-blue-500 hover:bg-blue-600 text-white"),title:"Sync all local data to cloud",children:"Sync Now"})]})]})},eC=ho("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),tC=ho("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),nC=ho("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),rC=ho("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),iC=t=>{let{isDarkMode:n}=t;const[r,i]=(0,e.useState)(""),[s,a]=(0,e.useState)(""),[o,l]=(0,e.useState)(!1),[c,u]=(0,e.useState)(!1),[d,h]=(0,e.useState)(""),[f,p]=(0,e.useState)(!1);return(0,In.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4 ".concat(n?"bg-gray-900":"bg-gradient-to-br from-blue-50 to-indigo-100"),children:(0,In.jsxs)(Mn,{className:"w-full max-w-md ".concat(n?"bg-gray-800 border-gray-700":"bg-white"),children:[(0,In.jsxs)(Fn,{className:"space-y-1 text-center",children:[(0,In.jsx)("div",{className:"flex justify-center mb-4",children:(0,In.jsx)("div",{className:"p-3 rounded-full ".concat(n?"bg-blue-900":"bg-blue-100"),children:(0,In.jsx)(eC,{className:"w-8 h-8 ".concat(n?"text-blue-400":"text-blue-600")})})}),(0,In.jsx)(jn,{className:"text-2xl font-bold ".concat(n?"text-white":"text-gray-900"),children:f?"Create Account":"Welcome Back"}),(0,In.jsx)(Bn,{className:n?"text-gray-400":"text-gray-600",children:f?"Sign up to start managing your petrol pump":"Sign in to access your petrol pump management"})]}),(0,In.jsxs)(Un,{children:[(0,In.jsxs)("form",{onSubmit:f?async e=>{if(e.preventDefault(),u(!0),h(""),s.length<6)return h("Password must be at least 6 characters"),void u(!1);try{await(0,QN.eJ)(JN.auth,r,s)}catch(d){switch(console.error("Sign up error:",d),d.code){case"auth/email-already-in-use":h("An account with this email already exists");break;case"auth/invalid-email":h("Invalid email address format");break;case"auth/weak-password":h("Password is too weak. Use at least 6 characters");break;default:h("Sign up failed. Please try again")}}finally{u(!1)}}:async e=>{e.preventDefault(),u(!0),h("");try{await(0,QN.x9)(JN.auth,r,s)}catch(d){switch(console.error("Login error:",d),d.code){case"auth/invalid-email":h("Invalid email address format");break;case"auth/user-disabled":h("This account has been disabled");break;case"auth/user-not-found":h("No account found with this email");break;case"auth/wrong-password":h("Incorrect password");break;case"auth/invalid-credential":h("Invalid email or password");break;case"auth/too-many-requests":h("Too many failed attempts. Please try again later");break;default:h("Login failed. Please check your credentials")}}finally{u(!1)}},className:"space-y-4",children:[(0,In.jsxs)("div",{className:"space-y-2",children:[(0,In.jsx)(pr,{htmlFor:"email",className:n?"text-gray-300":"text-gray-700",children:"Email Address"}),(0,In.jsxs)("div",{className:"relative",children:[(0,In.jsx)(bm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 ".concat(n?"text-gray-500":"text-gray-400")}),(0,In.jsx)(sr,{id:"email",type:"email",placeholder:"your@email.com",value:r,onChange:e=>i(e.target.value),required:!0,className:"pl-10 ".concat(n?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white"),disabled:c})]})]}),(0,In.jsxs)("div",{className:"space-y-2",children:[(0,In.jsx)(pr,{htmlFor:"password",className:n?"text-gray-300":"text-gray-700",children:"Password"}),(0,In.jsxs)("div",{className:"relative",children:[(0,In.jsx)(eC,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 ".concat(n?"text-gray-500":"text-gray-400")}),(0,In.jsx)(sr,{id:"password",type:o?"text":"password",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",value:s,onChange:e=>a(e.target.value),required:!0,minLength:6,className:"pl-10 pr-10 ".concat(n?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white"),disabled:c}),(0,In.jsx)("button",{type:"button",onClick:()=>l(!o),className:"absolute right-3 top-1/2 transform -translate-y-1/2 ".concat(n?"text-gray-500 hover:text-gray-400":"text-gray-400 hover:text-gray-600"),disabled:c,children:o?(0,In.jsx)(tC,{className:"w-5 h-5"}):(0,In.jsx)(nC,{className:"w-5 h-5"})})]}),f&&(0,In.jsx)("p",{className:"text-xs ".concat(n?"text-gray-400":"text-gray-500"),children:"Password must be at least 6 characters"})]}),d&&(0,In.jsxs)("div",{className:"p-3 rounded-lg flex items-start gap-2 ".concat(n?"bg-red-900/20 border border-red-800":"bg-red-50 border border-red-200"),children:[(0,In.jsx)(rC,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),(0,In.jsx)("p",{className:"text-sm ".concat(n?"text-red-400":"text-red-600"),children:d})]}),(0,In.jsx)(rr,{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white",disabled:c,children:c?(0,In.jsxs)("div",{className:"flex items-center gap-2",children:[(0,In.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),f?"Creating Account...":"Signing In..."]}):f?"Create Account":"Sign In"}),(0,In.jsx)("div",{className:"text-center pt-2",children:(0,In.jsx)("button",{type:"button",onClick:()=>{p(!f),h(""),a("")},className:"text-sm ".concat(n?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-700"," font-medium"),disabled:c,children:f?"Already have an account? Sign In":"Don't have an account? Sign Up"})})]}),(0,In.jsx)("div",{className:"mt-6 p-3 rounded-lg ".concat(n?"bg-gray-700/50":"bg-gray-50"),children:(0,In.jsxs)("p",{className:"text-xs ".concat(n?"text-gray-400":"text-gray-600"),children:[(0,In.jsx)("strong",{children:"Secure Access:"})," Your data is protected with email/password authentication. Only authorized users can access the petrol pump management system."]})})]})]})})},sC=ho("box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),aC=t=>{let{isDarkMode:n,selectedDate:r,salesData:i,fuelSettings:a,onClose:o,onStockSaved:l}=t;const[c,u]=(0,e.useState)(""),[d,h]=(0,e.useState)({startStock:"",purchase:"",sales:0,endStock:0}),{toast:f}=$o(),p=e.useMemo(()=>a?Object.keys(a):["MPP","Power"],[a]);(0,e.useEffect)(()=>{const e=(()=>{if(!i||0===i.length)return 0;return i.filter(e=>e.date===r&&e.fuelType===c).reduce((e,t)=>e+(parseFloat(t.liters)||0),0)})();h(t=>(0,s.A)((0,s.A)({},t),{},{sales:e}))},[i,r,c]),(0,e.useEffect)(()=>{const e=(parseFloat(d.startStock)||0)+(parseFloat(d.purchase)||0)-(parseFloat(d.sales)||0);h(t=>(0,s.A)((0,s.A)({},t),{},{endStock:e}))},[d.startStock,d.purchase,d.sales]),(0,e.useEffect)(()=>{const e=()=>{const e="".concat(c.toLowerCase(),"StockData"),t=localStorage.getItem(e);if(t){const e=JSON.parse(t),n=new Date(r);n.setDate(n.getDate()-1);const i=e[n.toISOString().split("T")[0]];h(i?e=>{var t;return(0,s.A)((0,s.A)({},e),{},{startStock:(null===(t=i.endStock)||void 0===t?void 0:t.toString())||"",purchase:""})}:e=>(0,s.A)((0,s.A)({},e),{},{startStock:"",purchase:""}))}};(()=>{const t="".concat(c.toLowerCase(),"StockData"),n=localStorage.getItem(t);if(n){const t=JSON.parse(n)[r];t?h(e=>(0,s.A)((0,s.A)({},e),{},{startStock:t.startStock||"",purchase:t.purchase||""})):e()}else e()})()},[r,c]);return(0,In.jsx)("div",{className:"space-y-4",children:(0,In.jsxs)(Mn,{className:"".concat(n?"bg-gray-800 border-gray-700":"bg-white border-slate-200"),children:[(0,In.jsx)(Fn,{className:"bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-t-lg py-2",children:(0,In.jsxs)(jn,{className:"flex items-center gap-2 text-base",children:[(0,In.jsx)(Mo,{className:"w-5 h-5"}),"Stock Entry"]})}),(0,In.jsx)(Un,{className:"p-2",children:(0,In.jsxs)("div",{className:"space-y-2",children:[(0,In.jsxs)("div",{className:"space-y-1",children:[(0,In.jsxs)(pr,{className:"text-xs font-semibold flex items-center gap-2",children:[(0,In.jsx)(Co,{className:"w-4 h-4"}),"Select Fuel Type *"]}),(0,In.jsxs)("select",{value:c,onChange:e=>u(e.target.value),className:"w-full rounded-md border px-3 py-2 text-base font-medium ".concat(n?"bg-gray-600 border-gray-500 text-white":"bg-white border-slate-300"),children:[(0,In.jsx)("option",{value:"",disabled:!0,children:"Select fuel type"}),p.map(e=>(0,In.jsx)("option",{value:e,children:e},e))]})]}),(0,In.jsxs)("div",{className:"space-y-1",children:[(0,In.jsxs)(pr,{className:"text-xs font-semibold flex items-center gap-2",children:[(0,In.jsx)(sC,{className:"w-4 h-4"}),"Start Stock (Liters)"]}),(0,In.jsx)(sr,{type:"number",step:"0.01",value:d.startStock,onChange:e=>h(t=>(0,s.A)((0,s.A)({},t),{},{startStock:e.target.value})),placeholder:"0.00",className:"text-base font-medium ".concat(n?"bg-gray-700 border-gray-600 text-white":"")})]}),(0,In.jsxs)("div",{className:"space-y-1",children:[(0,In.jsxs)(pr,{className:"text-xs font-semibold flex items-center gap-2",children:[(0,In.jsx)(Qp,{className:"w-4 h-4 text-green-600"}),"Purchase (Liters)"]}),(0,In.jsx)(sr,{type:"number",step:"0.01",value:d.purchase,onChange:e=>h(t=>(0,s.A)((0,s.A)({},t),{},{purchase:e.target.value})),placeholder:"0.00",className:"text-base font-medium ".concat(n?"bg-gray-700 border-gray-600 text-white":"")})]}),(0,In.jsxs)("div",{className:"space-y-1",children:[(0,In.jsxs)(pr,{className:"text-xs font-semibold flex items-center gap-2",children:[(0,In.jsx)(zo,{className:"w-4 h-4 text-red-600"}),"Sales (Liters)"]}),(0,In.jsxs)("div",{className:"px-4 py-2 rounded-md border text-base sm:text-lg font-bold ".concat(n?"bg-red-900 bg-opacity-30 text-red-400 border-red-800":"bg-red-50 text-red-600 border-red-200"),children:[d.sales.toFixed(2)," L"]})]}),(0,In.jsxs)("div",{className:"space-y-1",children:[(0,In.jsxs)(pr,{className:"text-xs font-semibold flex items-center gap-2",children:[(0,In.jsx)(Mo,{className:"w-4 h-4 text-blue-600"}),"End Stock (Liters)"]}),(0,In.jsxs)("div",{className:"px-4 py-2 rounded-md border text-base sm:text-lg font-bold ".concat(d.endStock<0?n?"bg-red-900 bg-opacity-30 text-red-400 border-red-800":"bg-red-50 text-red-600 border-red-200":n?"bg-blue-900 bg-opacity-30 text-blue-400 border-blue-800":"bg-blue-50 text-blue-600 border-blue-200"),children:[d.endStock.toFixed(2)," L"]})]}),(0,In.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,In.jsxs)(rr,{onClick:()=>{if(!c)return void f({title:"Validation Error",description:"Please select a fuel type",variant:"destructive"});if(!d.startStock&&!d.purchase)return;const e="".concat(c.toLowerCase(),"StockData"),t=localStorage.getItem(e),n=t?JSON.parse(t):{};n[r]={fuelType:c,startStock:parseFloat(d.startStock)||0,purchase:parseFloat(d.purchase)||0,sales:d.sales,endStock:d.endStock,date:r},localStorage.setItem(e,JSON.stringify(n)),l&&l(),u(""),h({startStock:"",purchase:"",sales:0,endStock:0})},className:"w-full bg-purple-600 hover:bg-purple-700",children:[(0,In.jsx)(To,{className:"w-4 h-4 mr-2"}),"Save & Add More"]}),(0,In.jsxs)(rr,{onClick:()=>{if(!c)return void f({title:"Validation Error",description:"Please select a fuel type",variant:"destructive"});if(!d.startStock&&!d.purchase)return;const e="".concat(c.toLowerCase(),"StockData"),t=localStorage.getItem(e),n=t?JSON.parse(t):{};n[r]={fuelType:c,startStock:parseFloat(d.startStock)||0,purchase:parseFloat(d.purchase)||0,sales:d.sales,endStock:d.endStock,date:r},localStorage.setItem(e,JSON.stringify(n)),l&&l(),o&&o()},className:"w-full bg-purple-600 hover:bg-purple-700",children:[(0,In.jsx)(To,{className:"w-4 h-4 mr-2"}),"Save Stock & Exit"]})]})]})})]})})},oC=()=>{const[t,r]=(0,e.useState)(!1),[i,a]=(0,e.useState)(100),[o,l]=(0,e.useState)("today"),[c,u]=(0,e.useState)("received"),[d,h]=(0,e.useState)("all"),[f,p]=(0,e.useState)([]),[m,g]=(0,e.useState)([]),[y,v]=(0,e.useState)([]),[w,b]=(0,e.useState)([]),[x,S]=(0,e.useState)([]),[A,E]=(0,e.useState)({}),[N,C]=(0,e.useState)((new Date).toISOString().split("T")[0]),[_,T]=(0,e.useState)(null),[I,k]=(0,e.useState)([]),[P,R]=(0,e.useState)([]),[D,O]=(0,e.useState)(!1),[L,M]=(0,e.useState)(!1),[F,j]=(0,e.useState)(!1),[B,U]=(0,e.useState)("settlement"),[z,V]=(0,e.useState)(!1),[H,W]=(0,e.useState)(!1),[q,G]=(0,e.useState)(!1),[K,Y]=(0,e.useState)(!1),[X,Q]=(0,e.useState)(null),[J,Z]=(0,e.useState)(null),[$,ee]=(0,e.useState)(null),[te,ne]=(0,e.useState)(null),[re,ie]=(0,e.useState)(0),[se,ae]=(0,e.useState)(!1),[oe,le]=(0,e.useState)(""),[ce,ue]=(0,e.useState)(!1),[de,he]=(0,e.useState)({includeSales:!0,includeCredit:!0,includeIncome:!0,includeExpense:!0,includeSummary:!0,pageSize:"a4",orientation:"portrait",dateRange:"single",startDate:(new Date).toISOString().split("T")[0],endDate:(new Date).toISOString().split("T")[0]}),{toast:fe}=$o();nl(f,m,w,y,A),sl(fe);const pe=()=>{try{const e=el.Ay.getSalesData(),t=el.Ay.getCreditData(),n=el.Ay.getIncomeData(),r=el.Ay.getExpenseData(),i=el.Ay.getSettlements(),s=el.Ay.getFuelSettings(),a=el.Ay.getCustomers(),o=el.Ay.getPayments();p(e),g(t),b(n),v(r),S(i),E(s),k(a),R(o)}catch(x_){console.error("Failed to load data from localStorage:",x_),p([]),g([]),b([]),v([]),k([]),R([]);const t={Petrol:{price:102.5,nozzleCount:3},Diesel:{price:89.75,nozzleCount:2},CNG:{price:75.2,nozzleCount:2},Premium:{price:108.9,nozzleCount:1}};E(t),el.Ay.setFuelSettings(t)}};(0,e.useEffect)(()=>{pe();const e=localStorage.getItem("mpp_notes");e&&le(e)},[]),(0,e.useEffect)(()=>{pe(),me()},[N]);const me=()=>{ye(e=>e+1)},[ge,ye]=(0,e.useState)(0);(0,e.useEffect)(()=>{const e=localStorage.getItem("appTextSize");if(e){const t=parseInt(e);a(t),document.documentElement.style.fontSize="".concat(t,"%")}},[]);const ve=(()=>{const e=f.filter(e=>e.date===N),t=m.filter(e=>e.date===N),n=w.filter(e=>e.date===N),r=y.filter(e=>e.date===N),i={};e.forEach(e=>{i[e.fuelType]||(i[e.fuelType]={liters:0,amount:0}),i[e.fuelType].liters+=e.liters,i[e.fuelType].amount+=e.amount});const s=e.filter(e=>"cash"===e.type&&!e.mpp&&!0!==e.mpp&&"true"!==e.mpp).reduce((e,t)=>e+t.amount,0),a=n.filter(e=>!e.mpp).reduce((e,t)=>e+t.amount,0),o=n.filter(e=>!0===e.mpp||"true"===e.mpp).reduce((e,t)=>e+t.amount,0),l=a+o,c=t.filter(e=>!e.mpp).reduce((e,t)=>t.incomeEntries&&t.incomeEntries.length>0?e+t.incomeEntries.reduce((e,t)=>e+t.amount,0):e,0),u=t.filter(e=>!0===e.mpp||"true"===e.mpp).reduce((e,t)=>t.incomeEntries&&t.incomeEntries.length>0?e+t.incomeEntries.reduce((e,t)=>e+t.amount,0):e,0),d=a+c,h=o+u,p=l+(c+u),g=r.filter(e=>!e.mpp).reduce((e,t)=>e+t.amount,0),v=r.filter(e=>!0===e.mpp||"true"===e.mpp).reduce((e,t)=>e+t.amount,0),b=g+v,S=t.filter(e=>!e.mpp).reduce((e,t)=>t.expenseEntries&&t.expenseEntries.length>0?e+t.expenseEntries.reduce((e,t)=>e+t.amount,0):e,0),A=t.filter(e=>!0===e.mpp||"true"===e.mpp).reduce((e,t)=>t.expenseEntries&&t.expenseEntries.length>0?e+t.expenseEntries.reduce((e,t)=>e+t.amount,0):e,0),E=g+S,C=v+A,_=b+(S+A);console.log("=== INCOME/EXPENSE DEBUG ==="),console.log("Today Income:",n.length,n.map(e=>({id:e.id,mpp:e.mpp,type:typeof e.mpp,amount:e.amount}))),console.log("Today Expenses:",r.length,r.map(e=>({id:e.id,mpp:e.mpp,type:typeof e.mpp,amount:e.amount}))),console.log("Today Credits:",t.length,t.map(e=>{var t,n;return{id:e.id,mpp:e.mpp,incomeEntries:(null===(t=e.incomeEntries)||void 0===t?void 0:t.length)||0,expenseEntries:(null===(n=e.expenseEntries)||void 0===n?void 0:n.length)||0}})),console.log("Income Stats:",{directIncomeNoMPP:a,directIncomeMPP:o,creditIncomeNoMPP:c,creditIncomeMPP:u,otherIncomeNoMPP:d,otherIncomeMPP:h}),console.log("Expense Stats:",{directExpensesNoMPP:g,directExpensesMPP:v,creditExpensesNoMPP:S,creditExpensesMPP:A,totalExpensesNoMPP:E,totalExpensesMPP:C}),console.log("===========================");const T=t.filter(e=>!e.mpp&&!0!==e.mpp&&"true"!==e.mpp),I=t.filter(e=>!0===e.mpp||"true"===e.mpp),k=T.reduce((e,t)=>e+t.amount,0),P=t.reduce((e,t)=>e+t.amount,0),R=T.reduce((e,t)=>t.fuelEntries&&t.fuelEntries.length>0?e+t.fuelEntries.reduce((e,t)=>e+t.liters,0):t.liters?e+t.liters:e,0),D=t.reduce((e,t)=>t.fuelEntries&&t.fuelEntries.length>0?e+t.fuelEntries.reduce((e,t)=>e+t.liters,0):t.liters?e+t.liters:e,0),O=I.reduce((e,t)=>t.fuelEntries&&t.fuelEntries.length>0?e+t.fuelEntries.reduce((e,t)=>e+t.liters,0):t.liters?e+t.liters:e,0),L=I.reduce((e,t)=>e+t.amount,0),M=x.filter(e=>e.date===N),F=M.filter(e=>!e.mpp).reduce((e,t)=>e+(t.amount||0),0);console.log("=== getTodayStats - MPP CALCULATIONS ==="),console.log("Total today sales:",e.length),console.log("All sales with MPP info:",e.map(e=>({id:e.id,mpp:e.mpp,type:typeof e.mpp,amount:e.amount,liters:e.liters})));const j=e.filter(e=>!0===e.mpp||"true"===e.mpp);console.log("Sales WITH MPP (filtered):",j.length,j.map(e=>({id:e.id,amount:e.amount})));const B=j.reduce((e,t)=>e+t.amount,0),U=j.reduce((e,t)=>e+t.liters,0),z=M.filter(e=>!0===e.mpp||"true"===e.mpp).reduce((e,t)=>e+(t.amount||0),0),V=B-L-C+h-z,H=B>0||L>0||z>0||h>0||C>0;console.log("MPP Stats:",{fuelSalesMPP:B,fuelLitersMPP:U,creditAmountMPP:L,settlementMPP:z,mppCash:V,hasMPPData:H});const W=e.filter(e=>"cash"===e.type&&!e.mpp&&!0!==e.mpp&&"true"!==e.mpp);console.log("Sales NO MPP (filtered):",W.length,W.map(e=>({id:e.id,amount:e.amount})));const q=s,G=W.reduce((e,t)=>e+t.liters,0);console.log("Left Column Stats:",{fuelSalesNoMPP:q,fuelLitersNoMPP:G}),console.log("========================================");const K=s-k-E+d-F;return{fuelCashSales:s,cashInHand:K,mppCash:V,totalAvailableCash:K+V,hasMPPData:H,creditAmount:P,creditLiters:D,totalLiters:e.reduce((e,t)=>e+t.liters,0),totalSales:s+P,otherIncome:p,otherIncomeNoMPP:d,otherIncomeMPP:h,totalIncome:s+p,totalExpenses:_,totalExpensesNoMPP:E,totalExpensesMPP:C,netCash:K,fuelSalesByType:i,fuelSalesNoMPP:q,fuelLitersNoMPP:G,creditAmountNoMPP:k,creditLitersNoMPP:R,settlementNoMPP:F,fuelSalesMPP:B,fuelLitersMPP:U,creditAmountMPP:L,creditLitersMPP:O,settlementMPP:z}})(),we=e=>{try{const t=el.Ay.addIncomeRecord((0,s.A)((0,s.A)({},e),{},{date:N}));return b(e=>[...e,t]),t}catch(t){console.error("Failed to add income record:",t)}},be=e=>{try{const t=el.Ay.addExpenseRecord((0,s.A)((0,s.A)({},e),{},{date:N}));return v(e=>[...e,t]),t}catch(t){console.error("Failed to add expense record:",t)}},xe=e=>{try{const t=el.Ay.addSettlement((0,s.A)((0,s.A)({},e),{},{date:N}));if(S(e=>[...e,t]),!0===t.mpp||"true"===t.mpp){const e=I.find(e=>!0===e.isMPP||e.name.toLowerCase().includes("manager petrol pump"));if(e){const n={customerId:e.id,customerName:e.name,amount:t.amount,date:t.date,mode:"auto",linkedMPPSettlementId:t.id,isAutoMPPTracking:!0,description:"MPP Settlement - ".concat(t.description||"Settlement")},r=el.Ay.addPayment(n);R(el.Ay.getPayments()),console.log("Auto-created MPP payment for settlement:",r)}}return t}catch(t){console.error("Failed to add settlement record:",t)}},Se=e=>{try{if(el.Ay.deleteSaleRecord(e))return p(t=>t.filter(t=>t.id!==e)),!0}catch(t){console.error("Failed to delete sale record:",t)}return!1},Ae=e=>{try{const t=P.find(t=>t.linkedMPPCreditId===e&&!0===t.isAutoMPPTracking);t&&(el.Ay.deletePayment(t.id),console.log("Deleted linked MPP payment:",t.id));if(el.Ay.deleteCreditRecord(e))return g(t=>t.filter(t=>t.id!==e)),t&&R(el.Ay.getPayments()),!0}catch(t){console.error("Error deleting credit record:",t)}return!1},Ee=e=>{try{if(el.Ay.deleteIncomeRecord(e))return b(t=>t.filter(t=>t.id!==e)),!0}catch(t){console.error("Failed to delete income record:",t)}return!1},Ne=e=>{try{if(el.Ay.deleteExpenseRecord(e))return v(t=>t.filter(t=>t.id!==e)),!0}catch(t){console.error("Failed to delete expense record:",t)}return!1},Ce=e=>{try{const t=P.find(t=>t.linkedMPPSettlementId===e&&!0===t.isAutoMPPTracking);t&&(el.Ay.deletePayment(t.id),console.log("Deleted linked MPP payment for settlement:",t.id));if(el.Ay.deleteSettlement(e))return S(t=>t.filter(t=>t.id!==e)),t&&R(el.Ay.getPayments()),!0}catch(t){console.error("Error deleting settlement record:",t)}return!1},[_e,Te]=(0,e.useState)(!0),[Ie,ke]=(0,e.useState)(!1),[Pe,Re]=(0,e.useState)(0),[De,Oe]=(0,e.useState)(!1),[Le,Me]=(0,e.useState)(!0);(0,e.useEffect)(()=>{const{onAuthStateChanged:e}=n(6897),{auth:t}=n(6860),r=e(t,async e=>{if(Oe(!!e),Me(!1),e){console.log("\u2705 User authenticated:",e.email||e.uid);try{const e=n(6931).A;await e.initialize(),console.log("\u2705 Firebase sync initialized")}catch(t){console.error("\u274c Failed to initialize Firebase sync:",t)}}else console.log("\ud83d\udd12 User not authenticated")});return()=>r()},[]),(0,e.useEffect)(()=>{const e=()=>{ke(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const Fe=e=>{u(e),Te(!1)},je=()=>{Re(window.pageYOffset||document.documentElement.scrollTop)},Be=e=>{je(),Z(e),M(!0)},Ue=(e,t)=>{je(),ne((0,s.A)((0,s.A)({},e),{},{type:t})),W(!0)},ze=()=>{O(!1),M(!1),j(!1),V(!1),W(!1),Q(null),Z(null),ee(null),ne(null),setTimeout(()=>{window.scrollTo({top:Pe,behavior:"smooth"})},100)},Ve=(e,t)=>{try{const n=el.Ay.updateIncomeRecord(e,t);if(n)return b(t=>t.map(t=>t.id===e?n:t)),n}catch(n){console.error("Failed to update income record:",n)}return null},He=(e,t)=>{try{const n=el.Ay.updateExpenseRecord(e,t);if(n)return v(t=>t.map(t=>t.id===e?n:t)),n}catch(n){console.error("Failed to update expense record:",n)}return null},We=(e,t)=>{try{const n=el.Ay.updateSettlement(e,t);if(n){S(t=>t.map(t=>t.id===e?n:t));const t=P.find(t=>t.linkedMPPSettlementId===e&&!0===t.isAutoMPPTracking);if(t)el.Ay.updatePayment(t.id,(0,s.A)((0,s.A)({},t),{},{amount:n.amount,date:n.date,description:"MPP Settlement - ".concat(n.description||"Settlement")})),R(el.Ay.getPayments()),console.log("Updated linked MPP payment for settlement:",t.id);else if(!0===n.mpp||"true"===n.mpp){const e=I.find(e=>!0===e.isMPP||e.name.toLowerCase().includes("manager petrol pump"));if(e){const t={customerId:e.id,customerName:e.name,amount:n.amount,date:n.date,mode:"auto",linkedMPPSettlementId:n.id,isAutoMPPTracking:!0,description:"MPP Settlement - ".concat(n.description||"Settlement")};el.Ay.addPayment(t),R(el.Ay.getPayments()),console.log("Created new MPP payment for updated settlement:",t)}}return n}}catch(n){console.error("Error updating settlement record:",n)}return null},qe=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{const r=el.Ay.addCustomer(e,t,n);return k(el.Ay.getCustomers()),fe({title:"Success",description:'Customer "'.concat(e,'" added successfully.'),variant:"default"}),r}catch(r){return console.error("Error adding customer:",r),fe({title:"Error",description:r.message||"Failed to add customer.",variant:"destructive"}),null}},Ge=e=>{try{el.Ay.deleteCustomer(e),k(el.Ay.getCustomers())}catch(t){console.error("Error deleting customer:",t)}},Ke=(e,t,n)=>{try{el.Ay.updateCustomer(e,t,n),k(el.Ay.getCustomers()),fe({title:"Success",description:"Customer updated successfully.",variant:"default"})}catch(r){console.error("Error updating customer:",r),fe({title:"Error",description:r.message||"Failed to update customer.",variant:"destructive"})}},Ye=e=>{try{el.Ay.addPayment(e),R(el.Ay.getPayments())}catch(t){console.error("Error adding payment:",t)}},Xe=(e,t)=>{try{el.Ay.updatePayment(e,t),R(el.Ay.getPayments())}catch(n){console.error("Error updating payment:",n)}},Qe=e=>{try{el.Ay.deletePayment(e),R(el.Ay.getPayments())}catch(t){console.error("Error deleting payment:",t)}},Je=()=>{try{const e=f.filter(e=>e.date===N),t=m.filter(e=>e.date===N),n=w.filter(e=>e.date===N),r=y.filter(e=>e.date===N),i=ve,s=new al.default;let a=20;s.setFontSize(18),s.text("M.Pump Calc Daily Report",105,a,{align:"center"}),a+=10,s.setFontSize(12),s.text("Date: ".concat(N),105,a,{align:"center"}),a+=8,s.setFontSize(10),s.setTextColor(124,58,237);const o=A?Object.keys(A).map(e=>{const t="".concat(e.toLowerCase(),"StockData"),n=localStorage.getItem(t);let r=0;if(n){const e=JSON.parse(n)[N];e&&(r=e.startStock||0)}return"".concat(e,"=").concat(r.toFixed(0)," L")}).join(" "):"N/A";s.text("STOCK: ".concat(o),105,a,{align:"center"}),s.setTextColor(0,0,0),a+=15,s.setFontSize(14),s.text("SUMMARY",14,a),a+=5;const l=[];let c=1;if(Object.entries(i.fuelSalesByType).forEach(t=>{let[n,r]=t;const i=e.filter(e=>e.fuelType===n&&(!0===e.mpp||"true"===e.mpp)),s=i.reduce((e,t)=>e+t.liters,0),a=i.reduce((e,t)=>e+t.amount,0);l.push(["".concat(c,". ").concat(n," Sales"),r.liters.toFixed(2),"\u20b9".concat(r.amount.toFixed(2)),s.toFixed(2),"\u20b9".concat(a.toFixed(2))]),c++}),l.push(["".concat(c,". Credit Sales"),i.creditLitersNoMPP.toFixed(2),"\u20b9".concat(i.creditAmountNoMPP.toFixed(2)),i.creditLitersMPP.toFixed(2),"\u20b9".concat(i.creditAmountMPP.toFixed(2))]),c++,l.push(["".concat(c,". Settlement"),"-","\u20b9".concat(i.settlementNoMPP.toFixed(2)),"-","\u20b9".concat(i.settlementMPP.toFixed(2))]),c++,l.push(["".concat(c,". Income"),"-","\u20b9".concat(i.otherIncomeNoMPP.toFixed(2)),"-","\u20b9".concat(i.otherIncomeMPP.toFixed(2))]),c++,l.push(["".concat(c,". Expenses"),"-","\u20b9".concat(i.totalExpensesNoMPP.toFixed(2)),"-","\u20b9".concat(i.totalExpensesMPP.toFixed(2))]),c++,l.push([{content:"Cash in Hand / MPP Cash",styles:{fontStyle:"bold",fillColor:[240,240,240]}},"-",{content:"\u20b9".concat(i.cashInHand.toFixed(2)),styles:{fontStyle:"bold"}},"-",{content:"\u20b9".concat(i.mppCash.toFixed(2)),styles:{fontStyle:"bold"}}]),s.autoTable({startY:a,head:[["Category",{content:"Non-MPP\nLitres",styles:{halign:"center"}},{content:"Non-MPP\nAmount",styles:{halign:"center"}},{content:"MPP\nLitres",styles:{halign:"center"}},{content:"MPP\nAmount",styles:{halign:"center"}}]],body:l,theme:"grid",styles:{fontSize:7,cellPadding:1.5},headStyles:{fillColor:[240,240,240],textColor:[0,0,0],fontStyle:"bold",fontSize:7},columnStyles:{0:{cellWidth:45},1:{halign:"right",cellWidth:22},2:{halign:"right",cellWidth:30},3:{halign:"right",cellWidth:22},4:{halign:"right",cellWidth:30}}}),a=s.lastAutoTable.finalY+10,e.length>0&&a<250){s.setFontSize(14),s.text("SALES RECORDS",14,a),a+=5;const t=e.map((e,t)=>[t+1,"".concat(e.nozzle," - ").concat(e.fuelType),e.startReading,e.endReading,e.rate,e.liters,e.amount.toFixed(2)]);s.autoTable({startY:a,head:[["#","Description","Start","End","Rate","Litres","Amount"]],body:t,theme:"grid",headStyles:{fillColor:[240,240,240],textColor:[0,0,0]},styles:{fontSize:9}}),a=s.lastAutoTable.finalY+10}if(a>250&&(s.addPage(),a=20),t.length>0&&a<250){s.setFontSize(14),s.text("CREDIT RECORDS",14,a),a+=5;const e=t.map((e,t)=>[t+1,e.customerName,e.vehicleNumber||"N/A",e.rate,e.liters,e.amount.toFixed(2)]);s.autoTable({startY:a,head:[["#","Customer","Vehicle","Rate","Litres","Amount"]],body:e,theme:"grid",headStyles:{fillColor:[240,240,240],textColor:[0,0,0]},styles:{fontSize:9}}),a=s.lastAutoTable.finalY+10}a>250&&(s.addPage(),a=20);const u=x.filter(e=>e.date===N);if(u.length>0&&a<250){s.setFontSize(14),s.text("SETTLEMENT RECORDS",14,a),a+=5;const e=u.map((e,t)=>[t+1,e.description||"Settlement",e.amount.toFixed(2),e.mpp?"Yes":"No"]);s.autoTable({startY:a,head:[["#","Description","Amount","MPP"]],body:e,theme:"grid",headStyles:{fillColor:[240,240,240],textColor:[0,0,0]},styles:{fontSize:9}}),a=s.lastAutoTable.finalY+10}if(a>250&&(s.addPage(),a=20),n.length>0&&a<250){s.setFontSize(14),s.text("INCOME RECORDS",14,a),a+=5;const e=n.map((e,t)=>[t+1,e.description,e.amount.toFixed(2)]);s.autoTable({startY:a,head:[["#","Description","Amount"]],body:e,theme:"grid",headStyles:{fillColor:[240,240,240],textColor:[0,0,0]},styles:{fontSize:9}}),a=s.lastAutoTable.finalY+10}if(a>250&&(s.addPage(),a=20),r.length>0&&a<250){s.setFontSize(14),s.text("EXPENSE RECORDS",14,a),a+=5;const e=r.map((e,t)=>[t+1,e.description,e.amount.toFixed(2)]);s.autoTable({startY:a,head:[["#","Description","Amount"]],body:e,theme:"grid",headStyles:{fillColor:[240,240,240],textColor:[0,0,0]},styles:{fontSize:9}}),a=s.lastAutoTable.finalY+10}a>250&&(s.addPage(),a=20),s.setFontSize(14),s.text("BANK SETTLEMENT REPORT",14,a),a+=5;const d=i.cashInHand+i.mppCash,h=u.filter(e=>e.description&&e.description.toLowerCase().includes("home")).reduce((e,t)=>e+(t.amount||0),0),p=b.filter(e=>e.mode&&e.mode.toLowerCase().includes("home")).reduce((e,t)=>e+(t.amount||0),0),g=d+h+p+b.filter(e=>e.mode&&"cash"===e.mode.toLowerCase()).reduce((e,t)=>e+(t.amount||0),0),v=u.filter(e=>e.description&&e.description.toLowerCase().includes("card")).reduce((e,t)=>e+(t.amount||0),0),b=P.filter(e=>e.date===N),S=v+b.filter(e=>e.mode&&"card"===e.mode.toLowerCase()).reduce((e,t)=>e+(t.amount||0),0),E=u.filter(e=>e.description&&e.description.toLowerCase().includes("paytm")).reduce((e,t)=>e+(t.amount||0),0),C=E+b.filter(e=>e.mode&&("wallet"===e.mode.toLowerCase()||e.mode.toLowerCase().includes("paytm"))).reduce((e,t)=>e+(t.amount||0),0),_=u.filter(e=>e.description&&e.description.toLowerCase().includes("phonepe")).reduce((e,t)=>e+(t.amount||0),0),T=_+b.filter(e=>e.mode&&e.mode.toLowerCase().includes("phonepe")).reduce((e,t)=>e+(t.amount||0),0),I=u.filter(e=>e.description&&e.description.toLowerCase().includes("dtp")).reduce((e,t)=>e+(t.amount||0),0),k=I+b.filter(e=>e.mode&&"dtp"===e.mode.toLowerCase()).reduce((e,t)=>e+(t.amount||0),0),R=[["Cash","\u20b9".concat(g.toFixed(2))],["Card","\u20b9".concat(S.toFixed(2))],["Paytm","\u20b9".concat(C.toFixed(2))],["PhonePe","\u20b9".concat(T.toFixed(2))],["DTP","\u20b9".concat(k.toFixed(2))]],D=g+S+C+T+k;R.push([{content:"Total",styles:{fontStyle:"bold",fillColor:[240,240,240]}},{content:"\u20b9".concat(D.toFixed(2)),styles:{fontStyle:"bold",halign:"right"}}]),s.autoTable({startY:a,head:[["Payment Mode","Amount"]],body:R,theme:"grid",headStyles:{fillColor:[240,240,240],textColor:[0,0,0]},styles:{fontSize:10}}),a=s.lastAutoTable.finalY+10;const O=s.output("dataurlstring").split(",")[1],L="Report_".concat(N,".pdf");window.MPumpCalcAndroid&&window.MPumpCalcAndroid.openPdfWithViewer&&window.MPumpCalcAndroid.openPdfWithViewer(O,L)}catch(e){console.error("Error generating PDF for Android:",e),alert("Error generating PDF. Please try again.")}},Ze=()=>{const e=f.filter(e=>e.date===N),t=m.filter(e=>e.date===N),n=w.filter(e=>e.date===N),r=y.filter(e=>e.date===N);let i="Date: ".concat(N,"\n\n");return i+="*Summary*\n",Object.entries(ve.fuelSalesByType).forEach(e=>{let[t,n]=e;i+="".concat(t," Sales: ").concat(n.liters.toFixed(2),"L - ").concat(n.amount.toFixed(2),"\n")}),i+="Credit Sales: ".concat(ve.creditLiters.toFixed(2),"L - ").concat(ve.creditAmount.toFixed(2),"\n"),i+="Income: ".concat(ve.otherIncome.toFixed(2),"\n"),i+="Expenses: ".concat(ve.totalExpenses.toFixed(2),"\n"),i+="Cash in Hand: ".concat(ve.cashInHand.toFixed(2),"\n"),i+="-------\n\n",e.length>0&&(i+="*Readings*\n",e.forEach((e,t)=>{i+="".concat(t+1,". Readings:\n"),i+=" Description: ".concat(e.nozzle,"\n"),i+=" Starting: ".concat(e.startReading,"\n"),i+=" Ending: ".concat(e.endReading,"\n"),i+=" Litres: ".concat(e.liters,"\n"),i+=" Rate: ".concat(e.rate,"\n"),i+=" Amount: ".concat(e.amount.toFixed(2),"\n")}),i+="*Readings Total: ".concat(ve.fuelCashSales.toFixed(2),"*\n"),i+="-------\n"),t.length>0&&(i+="*Credits*\n",t.forEach((e,t)=>{i+="".concat(t+1,". Credit:\n"),i+=" Description: ".concat(e.customerName,"\n"),i+=" Litre: ".concat(e.liters,"\n"),i+=" Rate: ".concat(e.rate,"\n"),i+=" Amount: ".concat(e.amount.toFixed(2),"\n")}),i+="*Credits Total: ".concat(ve.creditAmount.toFixed(2),"*\n"),i+="-------\n"),n.length>0&&(i+="*Income*\n",n.forEach((e,t)=>{i+="".concat(t+1,". Income:\n"),i+=" ".concat(e.description,": ").concat(e.amount.toFixed(2),"\n")}),i+="*Income Total: ".concat(ve.otherIncome.toFixed(2),"*\n"),i+="-------\n"),r.length>0&&(i+="*Expenses*\n",r.forEach((e,t)=>{i+="".concat(t+1,". Expenses:\n"),i+=" ".concat(e.description,": ").concat(e.amount.toFixed(2),"\n")}),i+="*Expenses Total: ".concat(ve.totalExpenses.toFixed(2),"*\n"),i+="-------\n"),i+="\n************************\n",i+="*Total Amount: ".concat(ve.cashInHand.toFixed(2),"*\n"),i};return Le?(0,In.jsx)("div",{className:"min-h-screen flex items-center justify-center ".concat(t?"bg-gray-900":"bg-gray-50"),children:(0,In.jsxs)("div",{className:"text-center",children:[(0,In.jsx)("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,In.jsx)("p",{className:t?"text-gray-300":"text-gray-600",children:"Loading..."})]})}):De?(0,In.jsx)("div",{className:"min-h-screen transition-colors duration-300 ".concat(t?"bg-gray-900 text-white":"bg-gradient-to-br from-slate-50 to-slate-100"),children:(0,In.jsxs)("div",{className:"max-w-7xl mx-auto p-2 sm:p-4",children:[(0,In.jsxs)("div",{className:"flex items-center justify-between mb-1 sm:mb-2 pt-status-bar",children:[(0,In.jsxs)("div",{className:"flex items-center gap-2 sm:gap-4",children:[(0,In.jsx)(Xg,{isDarkMode:t,fuelSettings:A,setFuelSettings:E,customers:I,onAddCustomer:qe,onDeleteCustomer:Ge,onUpdateCustomer:Ke}),(0,In.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3",children:[(0,In.jsx)("div",{className:"p-1.5 sm:p-2 bg-blue-600 rounded-full",children:(0,In.jsx)(Co,{className:"w-4 h-4 sm:w-6 sm:h-6 text-white"})}),(0,In.jsx)("h1",{className:"text-base sm:text-2xl font-bold ".concat(t?"text-white":"text-slate-800"),children:"M.Petrol Pump"})]})]}),(0,In.jsxs)("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[(0,In.jsxs)("div",{className:"flex items-center gap-3 sm:gap-4 border rounded-md p-1",style:{borderColor:t?"#4b5563":"#e2e8f0"},children:[(0,In.jsx)(rr,{variant:"ghost",size:"sm",onClick:()=>{a(e=>{const t=Math.max(e-10,70);return localStorage.setItem("appTextSize",t.toString()),document.documentElement.style.fontSize="".concat(t,"%"),t})},className:"h-7 w-7 p-0 hover:bg-opacity-10",title:"Decrease text size",children:(0,In.jsx)(_o,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),(0,In.jsxs)("span",{className:"text-xs px-2 hidden sm:inline",children:[i,"%"]}),(0,In.jsx)(rr,{variant:"ghost",size:"sm",onClick:()=>{a(e=>{const t=Math.min(e+10,150);return localStorage.setItem("appTextSize",t.toString()),document.documentElement.style.fontSize="".concat(t,"%"),t})},className:"h-7 w-7 p-0 hover:bg-opacity-10",title:"Increase text size",children:(0,In.jsx)(To,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]}),(0,In.jsxs)(rr,{variant:"outline",onClick:()=>{r(!t),document.documentElement.classList.toggle("dark")},className:"flex items-center gap-1.5 sm:gap-2 text-xs sm:text-sm h-8 sm:h-10 px-2 sm:px-4",children:[t?(0,In.jsx)(Io,{className:"w-3 h-3 sm:w-4 sm:h-4"}):(0,In.jsx)(ko,{className:"w-3 h-3 sm:w-4 sm:h-4"}),(0,In.jsx)("span",{className:"hidden sm:inline",children:t?"Light":"Dark"}),(0,In.jsx)("span",{className:"sm:hidden",children:t?"L":"D"})]})]})]}),(0,In.jsx)("div",{className:"border-b mb-2 ".concat(t?"border-gray-700":"border-slate-200"),children:(0,In.jsxs)("div",{className:"grid grid-cols-2 gap-0",children:[(0,In.jsx)("button",{onClick:()=>l("today"),className:"py-3 px-4 text-center font-semibold transition-colors ".concat("today"===o?t?"bg-blue-900 text-white border-b-2 border-blue-500":"bg-blue-50 text-blue-600 border-b-2 border-blue-600":t?"text-gray-400 hover:bg-gray-800":"text-slate-600 hover:bg-slate-50"),children:"Today Summary"}),(0,In.jsx)("button",{onClick:()=>{"outstanding"!==o||_e?(l("outstanding"),Te(!0)):Te(!0)},className:"py-3 px-4 text-center font-semibold transition-colors ".concat("outstanding"===o?t?"bg-blue-900 text-white border-b-2 border-blue-500":"bg-blue-50 text-blue-600 border-b-2 border-blue-600":t?"text-gray-400 hover:bg-gray-800":"text-slate-600 hover:bg-slate-50"),children:"Balance"})]})}),"today"===o&&(0,In.jsx)(Mn,{className:"".concat(t?"bg-gray-800 border-gray-700":"bg-white border-slate-200"," shadow-lg mb-2"),children:(0,In.jsx)(Un,{className:"p-2 sm:p-3",children:(0,In.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,In.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,In.jsxs)("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[(0,In.jsx)(Po,{className:"w-5 h-5 sm:w-6 sm:h-6 ".concat(t?"text-blue-400":"text-blue-600")}),(0,In.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,In.jsx)(pr,{className:"text-xs sm:text-sm font-medium ".concat(t?"text-gray-300":"text-slate-600"),children:"Operating Date"}),(0,In.jsx)("div",{className:"text-sm sm:text-xl font-bold truncate ".concat(t?"text-white":"text-slate-800"),children:($e=N,new Date($e).toLocaleDateString("en-IN",{weekday:"long",year:"numeric",month:"long",day:"numeric"}))})]})]}),(0,In.jsxs)("div",{className:"flex items-center gap-1 flex-shrink-0",children:[(0,In.jsxs)(rr,{variant:"outline",size:"sm",onClick:()=>ae(!0),className:"text-xs h-7 px-2 ".concat(t?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-slate-300 text-slate-700 hover:bg-slate-50"),title:"Notes",children:[(0,In.jsx)(Ro,{className:"w-3 h-3 mr-1"}),"N"]}),(0,In.jsxs)(rr,{variant:"outline",size:"sm",onClick:()=>{try{if("undefined"!==typeof window.MPumpCalcAndroid)return void Je();const e=f.filter(e=>e.date===N),t=m.filter(e=>e.date===N),n=w.filter(e=>e.date===N),r=y.filter(e=>e.date===N),i="\n<!DOCTYPE html>\n<html>\n<head>\n<title>Daily Report - ".concat(N,"</title>\n<style>\nbody{font:Arial;margin:10px;line-height:1.2}\nh1{font-size:28px;margin:0;text-align:center}\np{font-size:18px;margin:2px 0;text-align:center}\n.s{margin:15px 0 5px 0;font-size:18px;font-weight:bold}\ntable{width:100%;border-collapse:collapse;font-size:14px;margin:5px 0}\nth{background:#f0f0f0;border:1px solid #000;padding:4px;text-align:center;font-weight:bold;font-size:15px}\ntd{border:1px solid #000;padding:3px;font-size:14px}\n.r{text-align:right}\n.c{text-align:center}\n.t{font-weight:bold;background:#f8f8f8}\n.print-btn{background:#007bff;color:white;border:none;padding:10px 20px;font-size:16px;cursor:pointer;border-radius:5px;margin:10px auto;display:block;box-shadow:0 2px 4px rgba(0,0,0,0.2)}\n.print-btn:hover{background:#0056b3}\n.no-print{display:block}\n@media print{body{margin:8mm}.no-print{display:none}}\n</style>\n</head>\n<body>\n<h1>Daily Report</h1>\n<p>Date: ").concat(N,'</p>\n\n<p style="font-size:16px;margin:8px 0;font-weight:bold;color:#7c3aed">\nSTOCK: ').concat(A?Object.keys(A).map(e=>{const t=e.toLowerCase()+"StockData",n=localStorage.getItem(t);let r=0;if(n){const e=JSON.parse(n)[N];e&&(r=e.startStock||0)}return e+"="+r.toFixed(0)+" L"}).join(" "):"N/A",'\n</p>\n\n<div class="s">SUMMARY</div>\n<table>\n<tr><th>Category<th>Non-MPP<br>Litres<th>Non-MPP<br>Amount<th>MPP<br>Litres<th>MPP<br>Amount</tr>\n').concat(Object.keys(ve.fuelSalesByType).map((t,n)=>{const r=ve.fuelSalesByType[t]||{liters:0,amount:0},i=e.filter(e=>e.fuelType===t&&(!0===e.mpp||"true"===e.mpp)),s=i.reduce((e,t)=>e+t.liters,0),a=i.reduce((e,t)=>e+t.amount,0);return"<tr><td>".concat(n+1,". ").concat(t,' Sales<td class="r">').concat(r.liters.toFixed(2),'<td class="r">\u20b9').concat(r.amount.toFixed(2),'<td class="r">').concat(s.toFixed(2),'<td class="r">\u20b9').concat(a.toFixed(2),"</tr>")}).join(""),"\n<tr><td>").concat(Object.keys(ve.fuelSalesByType).length+1,'. Credit Sales<td class="r">').concat(ve.creditLitersNoMPP.toFixed(2),'<td class="r">\u20b9').concat(ve.creditAmountNoMPP.toFixed(2),'<td class="r">').concat(ve.creditLitersMPP.toFixed(2),'<td class="r">\u20b9').concat(ve.creditAmountMPP.toFixed(2),"</tr>\n<tr><td>").concat(Object.keys(ve.fuelSalesByType).length+2,'. Settlement<td class="r">-<td class="r">\u20b9').concat(ve.settlementNoMPP.toFixed(2),'<td class="r">-<td class="r">\u20b9').concat(ve.settlementMPP.toFixed(2),"</tr>\n<tr><td>").concat(Object.keys(ve.fuelSalesByType).length+3,'. Income<td class="r">-<td class="r">\u20b9').concat(ve.otherIncomeNoMPP.toFixed(2),'<td class="r">-<td class="r">\u20b9').concat(ve.otherIncomeMPP.toFixed(2),"</tr>\n<tr><td>").concat(Object.keys(ve.fuelSalesByType).length+4,'. Expenses<td class="r">-<td class="r">\u20b9').concat(ve.totalExpensesNoMPP.toFixed(2),'<td class="r">-<td class="r">\u20b9').concat(ve.totalExpensesMPP.toFixed(2),'</tr>\n<tr class="t"><td><b>Cash in Hand / MPP Cash</b><td class="r"><b>-</b><td class="r"><b>\u20b9').concat(ve.cashInHand.toFixed(2),'</b><td class="r"><b>-</b><td class="r"><b>\u20b9').concat(ve.mppCash.toFixed(2),"</b></tr>\n</table>\n\n").concat(e.length>0?'\n<div class="s">SALES RECORDS</div>\n<table>\n<tr><th width="8%">Sr.No<th width="22%">Description<th width="12%">Start<th width="12%">End<th width="12%">Rate<th width="12%">Litres<th width="12%">Amount</tr>\n'.concat(e.map((e,t)=>'<tr><td class="c">'.concat(t+1,"<td>").concat(e.nozzle," - ").concat(e.fuelType,'<td class="r">').concat(e.startReading,'<td class="r">').concat(e.endReading,'<td class="r">').concat(e.rate,'<td class="r">').concat(e.liters,'<td class="r">').concat(e.amount.toFixed(2),"</tr>")).join(""),'\n<tr class="t"><td colspan="5" class="r"><b>Total:</b><td class="r"><b>').concat(e.reduce((e,t)=>e+parseFloat(t.liters),0).toFixed(2),'</b><td class="r"><b>').concat(e.reduce((e,t)=>e+parseFloat(t.amount),0).toFixed(2),"</b></tr>\n</table>"):"","\n\n").concat(t.length>0?'\n<div class="s">CREDIT RECORDS</div>\n<table>\n<tr><th width="8%">Sr.No<th width="40%">Customer<th width="15%">Rate<th width="15%">Litres<th width="22%">Amount</tr>\n'.concat(t.map((e,t)=>'<tr><td class="c">'.concat(t+1,"<td>").concat(e.customerName,'<td class="r">').concat(e.rate,'<td class="r">').concat(e.liters,'<td class="r">').concat(e.amount.toFixed(2),"</tr>")).join(""),'\n<tr class="t"><td colspan="3" class="r"><b>Total:</b><td class="r"><b>').concat(t.reduce((e,t)=>e+parseFloat(t.liters),0).toFixed(2),'</b><td class="r"><b>').concat(t.reduce((e,t)=>e+parseFloat(t.amount),0).toFixed(2),"</b></tr>\n</table>"):"","\n\n").concat(x.filter(e=>e.date===N).length>0?'\n<div class="s">SETTLEMENT RECORDS</div>\n<table>\n<tr><th width="10%">Sr.No<th width="50%">Description<th width="20%">Amount<th width="20%">MPP</tr>\n'.concat(x.filter(e=>e.date===N).map((e,t)=>'<tr><td class="c">'.concat(t+1,"<td>").concat(e.description||"Settlement",'<td class="r">').concat(e.amount.toFixed(2),'<td class="c">').concat(e.mpp?"Yes":"No","</tr>")).join(""),'\n<tr class="t"><td colspan="2" class="r"><b>Total Settlements:</b><td class="r"><b>').concat(x.filter(e=>e.date===N).reduce((e,t)=>e+parseFloat(t.amount),0).toFixed(2),"</b><td></tr>\n</table>"):"","\n\n").concat(n.length>0?'\n<div class="s">INCOME RECORDS</div>\n<table>\n<tr><th width="10%">Sr.No<th width="70%">Description<th width="20%">Amount</tr>\n'.concat(n.map((e,t)=>'<tr><td class="c">'.concat(t+1,"<td>").concat(e.description,'<td class="r">').concat(e.amount.toFixed(2),"</tr>")).join(""),'\n<tr class="t"><td colspan="2" class="r"><b>Total Income:</b><td class="r"><b>').concat(n.reduce((e,t)=>e+parseFloat(t.amount),0).toFixed(2),"</b></tr>\n</table>"):"","\n\n").concat(r.length>0?'\n<div class="s">EXPENSE RECORDS</div>\n<table>\n<tr><th width="10%">Sr.No<th width="70%">Description<th width="20%">Amount</tr>\n'.concat(r.map((e,t)=>'<tr><td class="c">'.concat(t+1,"<td>").concat(e.description,'<td class="r">').concat(e.amount.toFixed(2),"</tr>")).join(""),'\n<tr class="t"><td colspan="2" class="r"><b>Total Expenses:</b><td class="r"><b>').concat(r.reduce((e,t)=>e+parseFloat(t.amount),0).toFixed(2),"</b></tr>\n</table>"):"",'\n\n<div class="s">BANK SETTLEMENT REPORT</div>\n<table>\n<tr><th width="60%">Payment Mode<th width="40%">Amount</tr>\n').concat((()=>{const e=x.filter(e=>e.date===N),t=P.filter(e=>e.date===N),n=ve.cashInHand+ve.mppCash+e.filter(e=>e.description&&e.description.toLowerCase().includes("home")).reduce((e,t)=>e+(t.amount||0),0)+t.filter(e=>e.mode&&e.mode.toLowerCase().includes("home")).reduce((e,t)=>e+(t.amount||0),0)+t.filter(e=>e.mode&&"cash"===e.mode.toLowerCase()).reduce((e,t)=>e+(t.amount||0),0),r=e.filter(e=>e.description&&e.description.toLowerCase().includes("card")).reduce((e,t)=>e+(t.amount||0),0)+t.filter(e=>e.mode&&"card"===e.mode.toLowerCase()).reduce((e,t)=>e+(t.amount||0),0),i=e.filter(e=>e.description&&e.description.toLowerCase().includes("paytm")).reduce((e,t)=>e+(t.amount||0),0)+t.filter(e=>e.mode&&("wallet"===e.mode.toLowerCase()||e.mode.toLowerCase().includes("paytm"))).reduce((e,t)=>e+(t.amount||0),0),s=e.filter(e=>e.description&&e.description.toLowerCase().includes("phonepe")).reduce((e,t)=>e+(t.amount||0),0)+t.filter(e=>e.mode&&e.mode.toLowerCase().includes("phonepe")).reduce((e,t)=>e+(t.amount||0),0),a=e.filter(e=>e.description&&e.description.toLowerCase().includes("dtp")).reduce((e,t)=>e+(t.amount||0),0)+t.filter(e=>e.mode&&"dtp"===e.mode.toLowerCase()).reduce((e,t)=>e+(t.amount||0),0),o=n+r+i+s+a;return'\n    <tr><td>Cash<td class="r">\u20b9'.concat(n.toFixed(2),'</tr>\n    <tr><td>Card<td class="r">\u20b9').concat(r.toFixed(2),'</tr>\n    <tr><td>Paytm<td class="r">\u20b9').concat(i.toFixed(2),'</tr>\n    <tr><td>PhonePe<td class="r">\u20b9').concat(s.toFixed(2),'</tr>\n    <tr><td>DTP<td class="r">\u20b9').concat(a.toFixed(2),'</tr>\n    <tr class="t"><td><b>Total</b><td class="r"><b>\u20b9').concat(o.toFixed(2),"</b></tr>\n  ")})(),'\n</table>\n\n<div style="margin-top:15px;text-align:center;font-size:10px;border-top:1px solid #000;padding-top:5px">\nGenerated on: ').concat((new Date).toLocaleString(),'\n</div>\n\n<div class="no-print" style="text-align:center;margin:20px 0">\n<button class="print-btn" onclick="window.print()">\ud83d\udda8\ufe0f Print / Save as PDF</button>\n</div>\n\n<script>\n// Auto print on load (with delay for content loading)\nwindow.onload = function() {\n  setTimeout(() => {\n    window.print();\n  }, 500);\n};\n<\/script>\n</body>\n</html>'),s=window.open("","_blank","width=800,height=600");if(!s)return void alert("Please allow pop-ups for this site to enable PDF export and printing.");s.document.write(i),s.document.close(),s.focus()}catch(e){console.error("Error generating PDF:",e),alert("Error generating PDF. Please try again.")}},className:"text-xs h-7 px-2 ".concat(t?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-slate-300 text-slate-700 hover:bg-slate-50"),children:[(0,In.jsx)(Ro,{className:"w-3 h-3 mr-1"}),"PDF"]}),(0,In.jsxs)(rr,{variant:"outline",size:"sm",onClick:()=>{const e=Ze();navigator.clipboard.writeText(e).then(()=>{alert("Daily report copied to clipboard!")}).catch(t=>{console.error("Failed to copy: ",t);const n=document.createElement("textarea");n.value=e,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),alert("Daily report copied to clipboard!")})},className:"text-xs h-7 px-2 ".concat(t?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-slate-300 text-slate-700 hover:bg-slate-50"),children:[(0,In.jsx)(Do,{className:"w-3 h-3 mr-1"}),"Copy"]})]})]}),(0,In.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2 w-full",children:[(0,In.jsx)(rr,{variant:"outline",size:"sm",onClick:()=>{const e=new Date(N);e.setDate(e.getDate()-1),C(e.toISOString().split("T")[0])},className:"h-8 w-8 sm:h-10 sm:w-10 p-0 flex-shrink-0 ".concat(t?"border-gray-600 hover:bg-gray-700":""),children:(0,In.jsx)(Oo,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),(0,In.jsx)("div",{className:"border rounded-lg p-1 sm:p-1.5 flex-1 min-w-0 ".concat(t?"border-gray-600 bg-gray-700":"border-slate-300 bg-white"),children:(0,In.jsx)(sr,{id:"date-picker",type:"date",value:N,onChange:e=>C(e.target.value),className:"h-6 sm:h-8 w-full border-0 bg-transparent focus:ring-0 text-xs sm:text-sm ".concat(t?"text-white":"text-slate-800")})}),(0,In.jsx)(rr,{variant:"outline",size:"sm",onClick:()=>{const e=new Date(N);e.setDate(e.getDate()+1),C(e.toISOString().split("T")[0])},className:"h-8 w-8 sm:h-10 sm:w-10 p-0 flex-shrink-0 ".concat(t?"border-gray-600 hover:bg-gray-700":""),children:(0,In.jsx)(Lo,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]})]})})}),"today"===o&&(0,In.jsx)(Mn,{className:"".concat(t?"bg-gray-800 border-gray-700":"bg-white border-slate-200"," shadow-lg mb-2"),children:(0,In.jsx)(Un,{className:"p-2 sm:p-3",children:(0,In.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,In.jsx)(Mo,{className:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0 ".concat(t?"text-purple-400":"text-purple-600")}),(0,In.jsx)("span",{className:"text-xs sm:text-sm font-semibold ".concat(t?"text-gray-300":"text-slate-600"),children:"STOCK:"}),A&&Object.keys(A).map((e,n)=>{const r="".concat(e.toLowerCase(),"StockData"),i=localStorage.getItem(r);let s=0;if(i){const e=JSON.parse(i)[N];e&&(s=e.startStock||0)}return(0,In.jsxs)("span",{className:"text-xs sm:text-sm font-medium ".concat(t?"text-white":"text-slate-800"),children:[e,"=",s.toFixed(0)," L",n<Object.keys(A).length-1?" ":""]},e)})]})})},"stock-summary-".concat(re)),"today"===o&&(0,In.jsxs)("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[(0,In.jsx)(Mn,{className:"bg-white border-slate-200 shadow-lg cursor-pointer hover:shadow-xl transition-shadow",onClick:()=>G(!0),children:(0,In.jsx)(Un,{className:"p-2 sm:p-3",children:(0,In.jsxs)("div",{className:"flex items-center gap-2",children:[(0,In.jsx)(Mo,{className:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0 text-purple-600"}),(0,In.jsx)("span",{className:"text-xs sm:text-sm font-semibold text-slate-800",children:"Add Stock"})]})})}),(0,In.jsx)(Mn,{className:"bg-white border-slate-200 shadow-lg cursor-pointer hover:shadow-xl transition-shadow",onClick:()=>Y(!0),children:(0,In.jsx)(Un,{className:"p-2 sm:p-3",children:(0,In.jsxs)("div",{className:"flex items-center gap-2",children:[(0,In.jsx)(Fo,{className:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0 text-green-600"}),(0,In.jsx)("span",{className:"text-xs sm:text-sm font-semibold text-slate-800",children:"Add Rate"})]})})})]}),"today"===o&&(0,In.jsxs)(In.Fragment,{children:[(0,In.jsx)(Mn,{className:"".concat(t?"bg-gray-800 border-gray-700":"bg-white border-slate-200"," shadow-lg mb-2"),children:(0,In.jsx)(Un,{className:"p-2 sm:p-3",children:(0,In.jsxs)("div",{className:"grid ".concat(ve.hasMPPData?"grid-cols-2":"grid-cols-1"," gap-3"),children:[(0,In.jsxs)("div",{className:"space-y-1.5 sm:space-y-2",children:[(0,In.jsx)("h2",{className:"text-lg sm:text-2xl font-bold mb-2 ".concat(t?"text-white":"text-slate-800"),children:"Summary"}),(0,In.jsxs)("div",{className:"flex items-center justify-between py-1.5 px-2 sm:py-2 sm:px-3 rounded-lg ".concat(t?"bg-gray-700":"bg-blue-50"),children:[(0,In.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[(0,In.jsx)("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-blue-600 rounded-full flex items-center justify-center text-white font-bold text-xs sm:text-sm flex-shrink-0",children:"1"}),(0,In.jsx)("span",{className:"font-medium text-xs sm:text-base truncate ".concat(t?"text-white":"text-slate-800"),children:"Fuel Sales"})]}),(0,In.jsx)("div",{className:"text-right flex-shrink-0",children:(0,In.jsxs)("div",{className:"text-xs sm:text-lg font-bold whitespace-nowrap ".concat(t?"text-white":"text-slate-800"),children:[ve.fuelLitersNoMPP.toFixed(2),"L \u2022 \u20b9",ve.fuelSalesNoMPP.toFixed(2)]})})]}),(0,In.jsxs)("div",{className:"flex justify-between items-center p-2 sm:p-3 rounded-lg border-l-4 border-orange-500 ".concat(t?"bg-gray-700":"bg-orange-50"),children:[(0,In.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[(0,In.jsx)("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-orange-600 rounded-full flex items-center justify-center text-white font-bold text-xs sm:text-sm flex-shrink-0",children:"2"}),(0,In.jsx)("span",{className:"font-medium text-xs sm:text-base truncate ".concat(t?"text-white":"text-slate-800"),children:"Credit Sales"})]}),(0,In.jsx)("div",{className:"text-right flex-shrink-0",children:(0,In.jsxs)("div",{className:"text-xs sm:text-lg font-bold whitespace-nowrap ".concat(t?"text-white":"text-slate-800"),children:[ve.creditLitersNoMPP.toFixed(2),"L \u2022 \u20b9",ve.creditAmountNoMPP.toFixed(2)]})})]}),(0,In.jsxs)("div",{className:"flex items-center justify-between py-1.5 px-2 sm:py-2 sm:px-3 rounded-lg ".concat(t?"bg-gray-700":"bg-green-50"),children:[(0,In.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[(0,In.jsx)("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-green-600 rounded-full flex items-center justify-center text-white font-bold text-xs sm:text-sm flex-shrink-0",children:"3"}),(0,In.jsx)("span",{className:"font-medium text-xs sm:text-base truncate ".concat(t?"text-white":"text-slate-800"),children:"Income"})]}),(0,In.jsx)("div",{className:"text-right flex-shrink-0",children:(0,In.jsxs)("div",{className:"text-xs sm:text-lg font-bold whitespace-nowrap ".concat(t?"text-white":"text-slate-800"),children:["\u20b9",ve.otherIncomeNoMPP.toFixed(2)]})})]}),(0,In.jsxs)("div",{className:"flex items-center justify-between py-1.5 px-2 sm:py-2 sm:px-3 rounded-lg ".concat(t?"bg-gray-700":"bg-red-50"),children:[(0,In.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[(0,In.jsx)("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-red-600 rounded-full flex items-center justify-center text-white font-bold text-xs sm:text-sm flex-shrink-0",children:"4"}),(0,In.jsx)("span",{className:"font-medium text-xs sm:text-base truncate ".concat(t?"text-white":"text-slate-800"),children:"Expenses"})]}),(0,In.jsx)("div",{className:"text-right flex-shrink-0",children:(0,In.jsxs)("div",{className:"text-xs sm:text-lg font-bold whitespace-nowrap ".concat(t?"text-white":"text-slate-800"),children:["\u20b9",ve.totalExpensesNoMPP.toFixed(2)]})})]}),(0,In.jsxs)("div",{className:"flex items-center justify-between py-1.5 px-2 sm:py-2 sm:px-3 rounded-lg ".concat(t?"bg-gray-700":"bg-yellow-50"),children:[(0,In.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[(0,In.jsx)("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-yellow-600 rounded-full flex items-center justify-center text-white font-bold text-xs sm:text-sm flex-shrink-0",children:"5"}),(0,In.jsx)("span",{className:"font-medium text-xs sm:text-base truncate ".concat(t?"text-white":"text-slate-800"),children:"Settlement"})]}),(0,In.jsx)("div",{className:"text-right flex-shrink-0",children:(0,In.jsxs)("div",{className:"text-xs sm:text-lg font-bold whitespace-nowrap ".concat(t?"text-white":"text-slate-800"),children:["\u20b9",ve.settlementNoMPP.toFixed(2)]})})]}),(0,In.jsxs)("div",{className:"flex justify-between items-center p-2 sm:p-3 rounded-lg border-l-4 border-purple-500 ".concat(t?"bg-gray-700":"bg-purple-50"),children:[(0,In.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[(0,In.jsx)("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-purple-600 rounded-full flex items-center justify-center text-white font-bold text-xs sm:text-sm flex-shrink-0",children:"6"}),(0,In.jsx)("span",{className:"font-medium text-xs sm:text-base truncate ".concat(t?"text-white":"text-slate-800"),children:"Cash in Hand"})]}),(0,In.jsx)("div",{className:"text-right flex-shrink-0",children:(0,In.jsxs)("div",{className:"text-xs sm:text-lg font-bold whitespace-nowrap ".concat(t?"text-white":"text-slate-800"),children:["\u20b9",ve.cashInHand.toFixed(2)]})})]})]}),ve.hasMPPData&&(0,In.jsxs)("div",{className:"space-y-1.5 sm:space-y-2",children:[(0,In.jsx)("h3",{className:"text-lg sm:text-2xl font-bold mb-2 ".concat(t?"text-white":"text-slate-800"),children:"MPP"}),(0,In.jsxs)("div",{className:"flex items-center justify-between py-1.5 px-2 sm:py-2 sm:px-3 rounded-lg ".concat(t?"bg-gray-700":"bg-blue-50"),children:[(0,In.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[(0,In.jsx)("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-blue-600 rounded-full flex items-center justify-center text-white font-bold text-xs sm:text-sm flex-shrink-0",children:"1"}),(0,In.jsx)("span",{className:"font-medium text-xs sm:text-base truncate ".concat(t?"text-white":"text-slate-800"),children:"Fuel Sales"})]}),(0,In.jsx)("div",{className:"text-right flex-shrink-0",children:(0,In.jsxs)("div",{className:"text-xs sm:text-lg font-bold whitespace-nowrap ".concat(t?"text-white":"text-slate-800"),children:[ve.fuelLitersMPP.toFixed(2),"L \u2022 \u20b9",ve.fuelSalesMPP.toFixed(2)]})})]}),(0,In.jsxs)("div",{className:"flex justify-between items-center p-2 sm:p-3 rounded-lg border-l-4 border-orange-500 ".concat(t?"bg-gray-700":"bg-orange-50"),children:[(0,In.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[(0,In.jsx)("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-orange-600 rounded-full flex items-center justify-center text-white font-bold text-xs sm:text-sm flex-shrink-0",children:"2"}),(0,In.jsx)("span",{className:"font-medium text-xs sm:text-base truncate ".concat(t?"text-white":"text-slate-800"),children:"Credit Sales"})]}),(0,In.jsx)("div",{className:"text-right flex-shrink-0",children:(0,In.jsxs)("div",{className:"text-xs sm:text-lg font-bold whitespace-nowrap ".concat(t?"text-white":"text-slate-800"),children:[ve.creditLitersMPP.toFixed(2),"L \u2022 \u20b9",ve.creditAmountMPP.toFixed(2)]})})]}),(0,In.jsxs)("div",{className:"flex items-center justify-between py-1.5 px-2 sm:py-2 sm:px-3 rounded-lg ".concat(t?"bg-gray-700":"bg-green-50"),children:[(0,In.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[(0,In.jsx)("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-green-600 rounded-full flex items-center justify-center text-white font-bold text-xs sm:text-sm flex-shrink-0",children:"3"}),(0,In.jsx)("span",{className:"font-medium text-xs sm:text-base truncate ".concat(t?"text-white":"text-slate-800"),children:"Income"})]}),(0,In.jsx)("div",{className:"text-right flex-shrink-0",children:(0,In.jsxs)("div",{className:"text-xs sm:text-lg font-bold whitespace-nowrap ".concat(t?"text-white":"text-slate-800"),children:["\u20b9",ve.otherIncomeMPP.toFixed(2)]})})]}),(0,In.jsxs)("div",{className:"flex items-center justify-between py-1.5 px-2 sm:py-2 sm:px-3 rounded-lg ".concat(t?"bg-gray-700":"bg-red-50"),children:[(0,In.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[(0,In.jsx)("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-red-600 rounded-full flex items-center justify-center text-white font-bold text-xs sm:text-sm flex-shrink-0",children:"4"}),(0,In.jsx)("span",{className:"font-medium text-xs sm:text-base truncate ".concat(t?"text-white":"text-slate-800"),children:"Expenses"})]}),(0,In.jsx)("div",{className:"text-right flex-shrink-0",children:(0,In.jsxs)("div",{className:"text-xs sm:text-lg font-bold whitespace-nowrap ".concat(t?"text-white":"text-slate-800"),children:["\u20b9",ve.totalExpensesMPP.toFixed(2)]})})]}),(0,In.jsxs)("div",{className:"flex items-center justify-between py-1.5 px-2 sm:py-2 sm:px-3 rounded-lg ".concat(t?"bg-gray-700":"bg-yellow-50"),children:[(0,In.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[(0,In.jsx)("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-yellow-600 rounded-full flex items-center justify-center text-white font-bold text-xs sm:text-sm flex-shrink-0",children:"5"}),(0,In.jsx)("span",{className:"font-medium text-xs sm:text-base truncate ".concat(t?"text-white":"text-slate-800"),children:"Settlement"})]}),(0,In.jsx)("div",{className:"text-right flex-shrink-0",children:(0,In.jsxs)("div",{className:"text-xs sm:text-lg font-bold whitespace-nowrap ".concat(t?"text-white":"text-slate-800"),children:["\u20b9",ve.settlementMPP.toFixed(2)]})})]}),(0,In.jsxs)("div",{className:"flex justify-between items-center p-2 sm:p-3 rounded-lg border-l-4 border-purple-500 ".concat(t?"bg-gray-700":"bg-purple-50"),children:[(0,In.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[(0,In.jsx)("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-purple-600 rounded-full flex items-center justify-center text-white font-bold text-xs sm:text-sm flex-shrink-0",children:"6"}),(0,In.jsx)("span",{className:"font-medium text-xs sm:text-base truncate ".concat(t?"text-white":"text-slate-800"),children:"MPP Cash"})]}),(0,In.jsx)("div",{className:"text-right flex-shrink-0",children:(0,In.jsxs)("div",{className:"text-xs sm:text-lg font-bold whitespace-nowrap ".concat(t?"text-white":"text-slate-800"),children:["\u20b9",ve.mppCash.toFixed(2)]})})]})]})]})})}),(0,In.jsxs)("div",{className:"grid grid-cols-3 gap-2 sm:gap-3 mb-2",children:[(0,In.jsx)(Mn,{className:"".concat("bg-blue-600 hover:bg-blue-700"," border-0 shadow-lg cursor-pointer transition-colors"),onClick:()=>{Q(null),O(!0)},children:(0,In.jsx)(Un,{className:"p-2 sm:p-3",children:(0,In.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,In.jsx)(jo,{className:"w-4 h-4 text-white"}),(0,In.jsx)("span",{className:"text-xs sm:text-sm font-semibold text-white",children:"Reading Sales"})]})})}),(0,In.jsx)(wo,{open:D,onOpenChange:O,children:(0,In.jsxs)(Ao,{side:"bottom",className:"h-[90vh] ".concat(t?"bg-gray-900":"bg-white"),children:[(0,In.jsx)(Eo,{children:(0,In.jsx)(No,{className:t?"text-white":"text-slate-800",children:X?"Edit Sale Record":"Add Sale Record"})}),(0,In.jsx)("div",{className:"mt-4 overflow-y-auto h-[calc(90vh-80px)]",children:(0,In.jsx)(qf,{isDarkMode:t,salesData:f,addSaleRecord:e=>{try{console.log("=== ADDING SALE RECORD ==="),console.log("Sale Data:",(0,s.A)((0,s.A)({},e),{},{date:N,mpp:e.mpp,mppType:typeof e.mpp}));const t=el.Ay.addSaleRecord((0,s.A)((0,s.A)({},e),{},{date:N}));return console.log("Sale Added to Storage:",t),console.log("MPP field saved:",t.mpp,"Type:",typeof t.mpp),p(e=>{const n=[...e,t];return console.log("Updated salesData state:",n.map(e=>({id:e.id,mpp:e.mpp,amount:e.amount}))),n}),t}catch(t){console.error("Failed to add sale record:",t)}},updateSaleRecord:(e,t)=>{try{const n=el.Ay.updateSaleRecord(e,t);if(n)return p(t=>t.map(t=>t.id===e?n:t)),n}catch(n){console.error("Failed to update sale record:",n)}return null},deleteSaleRecord:Se,fuelSettings:A,selectedDate:N,creditData:m,incomeData:w,expenseData:y,formResetKey:ge,editingRecord:X,onRecordSaved:ze,hideRecordsList:!0,customers:I})})]})}),(0,In.jsx)(Mn,{className:"".concat("bg-orange-600 hover:bg-orange-700"," border-0 shadow-lg cursor-pointer transition-colors"),onClick:()=>{Z(null),M(!0)},children:(0,In.jsx)(Un,{className:"p-2 sm:p-3",children:(0,In.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,In.jsx)(Bo,{className:"w-4 h-4 text-white"}),(0,In.jsx)("span",{className:"text-xs sm:text-sm font-semibold text-white",children:"Credit Sales"})]})})}),(0,In.jsx)(Mn,{className:"".concat("bg-purple-600 hover:bg-purple-700"," border-0 shadow-lg cursor-pointer transition-colors"),onClick:()=>{ee(null),ne(null),U("settlement"),j(!0)},children:(0,In.jsx)(Un,{className:"p-2 sm:p-3",children:(0,In.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,In.jsx)(Uo,{className:"w-4 h-4 text-white"}),(0,In.jsx)("span",{className:"text-xs sm:text-sm font-semibold text-white",children:"Settle/Inc./Exp"})]})})}),(0,In.jsx)(wo,{open:F,onOpenChange:j,children:(0,In.jsx)(Ao,{side:"bottom",className:"h-[90vh] ".concat(t?"bg-gray-900":"bg-white"),children:(0,In.jsxs)(Oi,{value:B,onValueChange:U,className:"w-full h-full flex flex-col",children:[(0,In.jsxs)(Li,{className:"grid w-full grid-cols-2 mx-2 ".concat(t?"bg-gray-700":"bg-gray-100"),children:[(0,In.jsxs)(Mi,{value:"settlement",className:"flex items-center gap-2",children:[(0,In.jsx)(Uo,{className:"w-4 h-4"}),"Settlement"]}),(0,In.jsxs)(Mi,{value:"incexp",className:"flex items-center gap-2",children:[(0,In.jsx)(zo,{className:"w-4 h-4"}),"Inc./Exp."]})]}),(0,In.jsxs)(Fi,{value:"settlement",className:"flex-1 overflow-hidden",children:[(0,In.jsx)(Eo,{className:"px-2",children:(0,In.jsx)(No,{className:t?"text-white":"text-slate-800",children:$?"Edit Settlement":"Add Settlement"})}),(0,In.jsx)("div",{className:"mt-4 overflow-y-auto h-[calc(90vh-150px)] px-2",children:(0,In.jsx)(Zp,{isDarkMode:t,settlementData:x,addSettlementRecord:xe,updateSettlementRecord:We,deleteSettlementRecord:Ce,selectedDate:N,formResetKey:ge,editingRecord:$,onRecordSaved:ze,hideRecordsList:!0,customers:I},$?$.id:"new")})]}),(0,In.jsxs)(Fi,{value:"incexp",className:"flex-1 overflow-hidden",children:[(0,In.jsx)(Eo,{className:"px-2",children:(0,In.jsx)(No,{className:t?"text-white":"text-slate-800",children:te?"Edit Income/Expense":"Add Income/Expense"})}),(0,In.jsx)("div",{className:"mt-4 overflow-y-auto h-[calc(90vh-150px)] px-2",children:(0,In.jsx)(Jp,{isDarkMode:t,incomeData:w,addIncomeRecord:we,updateIncomeRecord:Ve,deleteIncomeRecord:Ee,expenseData:y,addExpenseRecord:be,updateExpenseRecord:He,deleteExpenseRecord:Ne,selectedDate:N,salesData:f,creditData:m,formResetKey:ge,editingRecord:te,onRecordSaved:ze,hideRecordsList:!0,customers:I},te?te.id:"new")})]})]})})}),(0,In.jsx)(wo,{open:$&&z,onOpenChange:V,children:(0,In.jsxs)(Ao,{side:"bottom",className:"h-[90vh] ".concat(t?"bg-gray-900":"bg-white"),children:[(0,In.jsx)(Eo,{className:"px-2",children:(0,In.jsx)(No,{className:t?"text-white":"text-slate-800",children:"Edit Settlement"})}),(0,In.jsx)("div",{className:"mt-4 overflow-y-auto h-[calc(90vh-80px)] px-2",children:(0,In.jsx)(Zp,{isDarkMode:t,settlementData:x,addSettlementRecord:xe,updateSettlementRecord:We,deleteSettlementRecord:Ce,selectedDate:N,formResetKey:ge,editingRecord:$,onRecordSaved:()=>{V(!1),ee(null)},hideRecordsList:!0,customers:I},$?$.id:"edit")})]})}),(0,In.jsx)(wo,{open:te&&H,onOpenChange:W,children:(0,In.jsxs)(Ao,{side:"bottom",className:"h-[90vh] ".concat(t?"bg-gray-900":"bg-white"),children:[(0,In.jsx)(Eo,{className:"px-2",children:(0,In.jsx)(No,{className:t?"text-white":"text-slate-800",children:"income"===(null===te||void 0===te?void 0:te.type)?"Edit Income":"Edit Expense"})}),(0,In.jsx)("div",{className:"mt-4 overflow-y-auto h-[calc(90vh-80px)] px-2",children:(0,In.jsx)(Jp,{isDarkMode:t,incomeData:w,addIncomeRecord:we,updateIncomeRecord:Ve,deleteIncomeRecord:Ee,expenseData:y,addExpenseRecord:be,updateExpenseRecord:He,deleteExpenseRecord:Ne,selectedDate:N,salesData:f,creditData:m,formResetKey:ge,editingRecord:te,onRecordSaved:()=>{W(!1),ne(null)},hideRecordsList:!0,customers:I},te?te.id:"edit")})]})})]}),(0,In.jsxs)(Oi,{value:d,onValueChange:h,className:"w-full mt-4",children:[(0,In.jsxs)(Li,{className:"flex w-full mb-4 ".concat(t?"bg-gray-800":"bg-slate-100"),children:[(0,In.jsxs)(Mi,{value:"all",className:"flex items-center justify-center gap-1 sm:gap-2 text-xs sm:text-sm w-[50%]",children:[(0,In.jsx)(Ro,{className:"w-3 h-3 sm:w-4 sm:h-4"}),(0,In.jsx)("span",{children:"All Records"})]}),(0,In.jsxs)(Mi,{value:"receipt",className:"flex items-center justify-center gap-1 sm:gap-2 text-xs sm:text-sm w-[50%]",children:[(0,In.jsx)(Vo,{className:"w-3 h-3 sm:w-4 sm:h-4"}),(0,In.jsx)("span",{children:"Receipt"})]})]}),(0,In.jsx)(Fi,{value:"all",children:(0,In.jsx)(Qg,{isDarkMode:t,salesData:f,creditData:m,incomeData:w,expenseData:y,settlementData:x,selectedDate:N,onEditSale:e=>{je(),Q(e),O(!0)},deleteSaleRecord:Se,onEditCredit:Be,deleteCreditRecord:Ae,onEditIncome:e=>Ue(e,"income"),deleteIncomeRecord:Ee,onEditExpense:e=>Ue(e,"expense"),deleteExpenseRecord:Ne,onEditSettlement:e=>{console.log("handleEditSettlement called with:",e),je(),ee(e),V(!0)},deleteSettlementRecord:Ce})}),(0,In.jsx)(Fi,{value:"receipt",children:(0,In.jsx)(UN,{customers:I,payments:P,selectedDate:N,onAddPayment:Ye,onUpdatePayment:Xe,onDeletePayment:Qe,isDarkMode:t})})]}),(0,In.jsx)(wo,{open:q,onOpenChange:G,children:(0,In.jsxs)(Ao,{side:"bottom",className:"h-[90vh] w-screen max-w-none left-0 right-0 ".concat(t?"bg-gray-900":"bg-white"),style:{width:"100vw",maxWidth:"100vw"},children:[(0,In.jsx)(Eo,{className:"px-2",children:(0,In.jsx)(No,{className:t?"text-white":"text-slate-800",children:"Stock Entry"})}),(0,In.jsx)("div",{className:"mt-4 overflow-y-auto h-[calc(90vh-80px)] px-2",children:(0,In.jsx)(aC,{isDarkMode:t,selectedDate:N,salesData:f,fuelSettings:A,onClose:()=>G(!1),onStockSaved:()=>ie(e=>e+1)})})]})}),(0,In.jsx)(wo,{open:K,onOpenChange:Y,children:(0,In.jsxs)(Ao,{side:"bottom",className:"h-[90vh] w-screen max-w-none left-0 right-0 ".concat(t?"bg-gray-900":"bg-white"),style:{width:"100vw",maxWidth:"100vw"},children:[(0,In.jsx)(Eo,{className:"px-2",children:(0,In.jsx)(No,{className:t?"text-white":"text-slate-800",children:"Rate Configuration"})}),(0,In.jsx)("div",{className:"mt-4 overflow-y-auto h-[calc(90vh-80px)] px-2",children:(0,In.jsx)(em,{isDarkMode:t,fuelSettings:A,updateFuelRate:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:N;try{return!!el.Ay.updateFuelRate(e,t,n)&&(E(n=>(0,s.A)((0,s.A)({},n),{},{[e]:(0,s.A)((0,s.A)({},n[e]),{},{price:parseFloat(t)})})),!0)}catch(r){return console.error("Error updating fuel rate:",r),!1}},selectedDate:N,salesData:f,creditData:m,incomeData:w,expenseData:y,onClose:()=>Y(!1)})})]})}),(0,In.jsx)(wo,{open:se,onOpenChange:ae,children:(0,In.jsxs)(Ao,{side:"bottom",className:"h-[80vh] ".concat(t?"bg-gray-900":"bg-white"),children:[(0,In.jsx)(Eo,{className:"px-2",children:(0,In.jsx)(No,{className:t?"text-white":"text-slate-800",children:"Notes"})}),(0,In.jsx)("div",{className:"mt-4 px-2 flex flex-col h-[calc(80vh-80px)]",children:(0,In.jsx)(gr,{value:oe,onChange:e=>{le(e.target.value),localStorage.setItem("mpp_notes",e.target.value)},placeholder:"Write your notes here...",className:"flex-1 resize-none ".concat(t?"bg-gray-800 text-white border-gray-600":"bg-white text-slate-900 border-slate-300")})})]})})]}),(0,In.jsx)(wo,{open:L,onOpenChange:M,children:(0,In.jsxs)(Ao,{side:"bottom",className:"h-[90vh] w-screen max-w-none left-0 right-0 ".concat(t?"bg-gray-900":"bg-white"),style:{width:"100vw",maxWidth:"100vw"},children:[(0,In.jsx)(Eo,{className:"px-2",children:(0,In.jsx)(No,{className:t?"text-white":"text-slate-800",children:J?"Edit Credit Record":"Add Credit Record"})}),(0,In.jsx)("div",{className:"mt-4 overflow-y-auto h-[calc(90vh-80px)] px-2",children:(0,In.jsx)(Kf,{isDarkMode:t,creditData:m,addCreditRecord:e=>{try{var t;const n=el.Ay.addCreditRecord((0,s.A)((0,s.A)({},e),{},{date:e.date||N}));if(g(e=>[...e,n]),(!0===n.mpp||"true"===n.mpp)&&(null===(t=n.customerName)||void 0===t||!t.toLowerCase().includes("manager petrol pump"))){const e=I.find(e=>!0===e.isMPP||e.name.toLowerCase().includes("manager petrol pump"));if(e){let t=0;t=n.fuelEntries&&n.fuelEntries.length>0?n.fuelEntries.reduce((e,t)=>e+parseFloat(t.liters||0)*parseFloat(t.rate||0),0):n.amount;const r={customerId:e.id,customerName:e.name,amount:t,date:n.date,mode:"auto",linkedMPPCreditId:n.id,isAutoMPPTracking:!0,description:"MPP Credit Sale to ".concat(n.customerName)},i=el.Ay.addPayment(r);R(el.Ay.getPayments()),console.log("Auto-created MPP payment for credit sale (fuel only):",i)}}return n}catch(n){console.error("Failed to add credit record:",n)}},updateCreditRecord:(e,t)=>{try{const r=el.Ay.updateCreditRecord(e,t);if(r){var n;g(t=>t.map(t=>t.id===e?r:t));const t=P.find(t=>t.linkedMPPCreditId===e&&!0===t.isAutoMPPTracking);if(t){let e=0;e=r.fuelEntries&&r.fuelEntries.length>0?r.fuelEntries.reduce((e,t)=>e+parseFloat(t.liters||0)*parseFloat(t.rate||0),0):r.amount,el.Ay.updatePayment(t.id,(0,s.A)((0,s.A)({},t),{},{amount:e,date:r.date,description:"MPP Credit Sale to ".concat(r.customerName)})),R(el.Ay.getPayments()),console.log("Updated linked MPP payment (fuel only):",t.id)}else if((!0===r.mpp||"true"===r.mpp)&&(null===(n=r.customerName)||void 0===n||!n.toLowerCase().includes("manager petrol pump"))){const e=I.find(e=>!0===e.isMPP||e.name.toLowerCase().includes("manager petrol pump"));if(e){let t=0;t=r.fuelEntries&&r.fuelEntries.length>0?r.fuelEntries.reduce((e,t)=>e+parseFloat(t.liters||0)*parseFloat(t.rate||0),0):r.amount;const n={customerId:e.id,customerName:e.name,amount:t,date:r.date,mode:"auto",linkedMPPCreditId:r.id,isAutoMPPTracking:!0,description:"MPP Credit Sale to ".concat(r.customerName)};el.Ay.addPayment(n),R(el.Ay.getPayments()),console.log("Created new MPP payment for updated credit (fuel only):",n)}}return r}}catch(r){console.error("Failed to update credit record:",r)}return null},deleteCreditRecord:Ae,fuelSettings:A,selectedDate:N,salesData:f,incomeData:w,expenseData:y,formResetKey:ge,editingRecord:J,onRecordSaved:ze,hideRecordsList:!0,customers:I})})]})}),"outstanding"===o&&(0,In.jsxs)("div",{className:"mt-4",children:[(0,In.jsx)("div",{className:"block",children:_e?(0,In.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[(0,In.jsx)("div",{onClick:()=>Fe("bank-settlement"),className:"p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 transform ".concat(t?"bg-gray-800 border-gray-600 hover:bg-gray-700 hover:border-gray-500 hover:scale-105":"bg-white border-slate-300 hover:bg-slate-50 hover:border-slate-400 hover:scale-105"),style:{willChange:"transform"},children:(0,In.jsxs)("div",{className:"flex flex-col items-center text-center space-y-2",children:[(0,In.jsx)(Ho,{className:"w-8 h-8 ".concat(t?"text-gray-400":"text-slate-600")}),(0,In.jsx)("span",{className:"text-sm font-medium ".concat(t?"text-gray-300":"text-slate-700"),children:"Bank Settlement"})]})}),(0,In.jsx)("div",{onClick:()=>Fe("outstanding-settings"),className:"p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 transform ".concat(t?"bg-gray-800 border-gray-600 hover:bg-gray-700 hover:border-gray-500 hover:scale-105":"bg-white border-slate-300 hover:bg-slate-50 hover:border-slate-400 hover:scale-105"),style:{willChange:"transform"},children:(0,In.jsxs)("div",{className:"flex flex-col items-center text-center space-y-2",children:[(0,In.jsx)(Ro,{className:"w-8 h-8 ".concat(t?"text-gray-400":"text-slate-600")}),(0,In.jsx)("span",{className:"text-sm font-medium ".concat(t?"text-gray-300":"text-slate-700"),children:"Outstanding"})]})}),(0,In.jsx)("div",{onClick:()=>Fe("report"),className:"p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 transform ".concat(t?"bg-gray-800 border-gray-600 hover:bg-gray-700 hover:border-gray-500 hover:scale-105":"bg-white border-slate-300 hover:bg-slate-50 hover:border-slate-400 hover:scale-105"),style:{willChange:"transform"},children:(0,In.jsxs)("div",{className:"flex flex-col items-center text-center space-y-2",children:[(0,In.jsx)(Wo,{className:"w-8 h-8 ".concat(t?"text-gray-400":"text-slate-600")}),(0,In.jsx)("span",{className:"text-sm font-medium ".concat(t?"text-gray-300":"text-slate-700"),children:"Customer Ledger"})]})}),(0,In.jsx)("div",{onClick:()=>Fe("credit-manage"),className:"p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 transform ".concat(t?"bg-gray-800 border-gray-600 hover:bg-gray-700 hover:border-gray-500 hover:scale-105":"bg-white border-slate-300 hover:bg-slate-50 hover:border-slate-400 hover:scale-105"),style:{willChange:"transform"},children:(0,In.jsxs)("div",{className:"flex flex-col items-center text-center space-y-2",children:[(0,In.jsx)(Bo,{className:"w-8 h-8 ".concat(t?"text-gray-400":"text-slate-600")}),(0,In.jsx)("span",{className:"text-sm font-medium ".concat(t?"text-gray-300":"text-slate-700"),children:"Credit Manage"})]})}),(0,In.jsx)("div",{onClick:()=>Fe("receipt-manage"),className:"p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 transform ".concat(t?"bg-gray-800 border-gray-600 hover:bg-gray-700 hover:border-gray-500 hover:scale-105":"bg-white border-slate-300 hover:bg-slate-50 hover:border-slate-400 hover:scale-105"),style:{willChange:"transform"},children:(0,In.jsxs)("div",{className:"flex flex-col items-center text-center space-y-2",children:[(0,In.jsx)(Vo,{className:"w-8 h-8 ".concat(t?"text-gray-400":"text-slate-600")}),(0,In.jsx)("span",{className:"text-sm font-medium ".concat(t?"text-gray-300":"text-slate-700"),children:"Receipt Manage"})]})}),(0,In.jsx)("div",{onClick:()=>Fe("customer-manage"),className:"p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 transform ".concat(t?"bg-gray-800 border-gray-600 hover:bg-gray-700 hover:border-gray-500 hover:scale-105":"bg-white border-slate-300 hover:bg-slate-50 hover:border-slate-400 hover:scale-105"),style:{willChange:"transform"},children:(0,In.jsxs)("div",{className:"flex flex-col items-center text-center space-y-2",children:[(0,In.jsx)(Wo,{className:"w-8 h-8 ".concat(t?"text-gray-400":"text-slate-600")}),(0,In.jsx)("span",{className:"text-sm font-medium ".concat(t?"text-gray-300":"text-slate-700"),children:"Customer Manage"})]})})]},"balance-blocks"):(0,In.jsx)("div",{className:"mb-4"},"balance-content")}),(0,In.jsx)("div",{className:"hidden md:block",children:(0,In.jsx)(Oi,{value:c,onValueChange:u,className:"w-full",children:(0,In.jsxs)(Li,{className:"flex w-full mb-4 ".concat(t?"bg-gray-800":"bg-slate-100"),children:[(0,In.jsxs)(Mi,{value:"bank-settlement",className:"flex items-center justify-center gap-1 text-xs w-[20%]",children:[(0,In.jsx)(Ho,{className:"w-3 h-3"}),(0,In.jsx)("span",{className:"hidden lg:inline",children:"Bank"})]}),(0,In.jsxs)(Mi,{value:"outstanding-settings",className:"flex items-center justify-center gap-1 text-xs w-[20%]",children:[(0,In.jsx)(Ro,{className:"w-3 h-3"}),(0,In.jsx)("span",{className:"hidden lg:inline",children:"Outstanding"})]}),(0,In.jsxs)(Mi,{value:"report",className:"flex items-center justify-center gap-1 text-xs w-[20%]",children:[(0,In.jsx)(Wo,{className:"w-3 h-3"}),(0,In.jsx)("span",{className:"hidden lg:inline",children:"Ledger"})]}),(0,In.jsxs)(Mi,{value:"credit-manage",className:"flex items-center justify-center gap-1 text-xs w-[20%]",children:[(0,In.jsx)(Bo,{className:"w-3 h-3"}),(0,In.jsx)("span",{className:"hidden lg:inline",children:"Credit"})]}),(0,In.jsxs)(Mi,{value:"receipt-manage",className:"flex items-center justify-center gap-1 text-xs w-[20%]",children:[(0,In.jsx)(Vo,{className:"w-3 h-3"}),(0,In.jsx)("span",{className:"hidden lg:inline",children:"Receipt"})]})]})})}),(0,In.jsx)("div",{className:"mt-4",children:!_e&&(0,In.jsxs)(In.Fragment,{children:["bank-settlement"===c&&(0,In.jsx)(WN,{isDarkMode:t,settlementData:x,payments:P,creditData:m,salesData:f,incomeData:w,expenseData:y,selectedDate:N}),"outstanding-settings"===c&&(0,In.jsx)(VN,{customers:I,creditData:m,payments:P,isDarkMode:t,selectedDate:N}),"report"===c&&(0,In.jsx)(HN,{customers:I,creditData:m,payments:P,salesData:f,settlementData:x,incomeData:w,expenseData:y,isDarkMode:t,selectedDate:N}),"credit-manage"===c&&(0,In.jsx)(zN,{isDarkMode:t,creditData:m,fuelSettings:A,selectedDate:N,onEditCredit:Be,onDeleteCredit:Ae,onAddCredit:()=>{je(),Z(null),M(!0)},customers:I}),"receipt-manage"===c&&(0,In.jsx)(UN,{isDarkMode:t,payments:P,customers:I,onAddPayment:Ye,onUpdatePayment:Xe,onDeletePayment:Qe,selectedDate:N}),"customer-manage"===c&&(0,In.jsx)(Cm,{customers:I,onAddCustomer:qe,onDeleteCustomer:Ge,onUpdateCustomer:Ke,isDarkMode:t})]})})]}),(0,In.jsx)(wo,{open:ce,onOpenChange:ue,children:(0,In.jsxs)(Ao,{side:"right",className:"w-full sm:max-w-md ".concat(t?"bg-gray-800 text-white":"bg-white"),children:[(0,In.jsx)(Eo,{children:(0,In.jsx)(No,{className:t?"text-white":"text-slate-800",children:"PDF Export Settings"})}),(0,In.jsxs)("div",{className:"mt-6 space-y-6",children:[(0,In.jsxs)("div",{className:"space-y-3",children:[(0,In.jsx)(pr,{className:"text-sm font-semibold ".concat(t?"text-white":"text-slate-800"),children:"Include in PDF"}),(0,In.jsxs)("div",{className:"space-y-2",children:[(0,In.jsxs)("div",{className:"flex items-center gap-2",children:[(0,In.jsx)("input",{type:"checkbox",id:"includeSummary",checked:de.includeSummary,onChange:e=>he((0,s.A)((0,s.A)({},de),{},{includeSummary:e.target.checked})),className:"w-4 h-4"}),(0,In.jsx)(pr,{htmlFor:"includeSummary",className:t?"text-gray-300":"text-slate-700",children:"Summary"})]}),(0,In.jsxs)("div",{className:"flex items-center gap-2",children:[(0,In.jsx)("input",{type:"checkbox",id:"includeSales",checked:de.includeSales,onChange:e=>he((0,s.A)((0,s.A)({},de),{},{includeSales:e.target.checked})),className:"w-4 h-4"}),(0,In.jsx)(pr,{htmlFor:"includeSales",className:t?"text-gray-300":"text-slate-700",children:"Reading Sales"})]}),(0,In.jsxs)("div",{className:"flex items-center gap-2",children:[(0,In.jsx)("input",{type:"checkbox",id:"includeCredit",checked:de.includeCredit,onChange:e=>he((0,s.A)((0,s.A)({},de),{},{includeCredit:e.target.checked})),className:"w-4 h-4"}),(0,In.jsx)(pr,{htmlFor:"includeCredit",className:t?"text-gray-300":"text-slate-700",children:"Credit Sales"})]}),(0,In.jsxs)("div",{className:"flex items-center gap-2",children:[(0,In.jsx)("input",{type:"checkbox",id:"includeIncome",checked:de.includeIncome,onChange:e=>he((0,s.A)((0,s.A)({},de),{},{includeIncome:e.target.checked})),className:"w-4 h-4"}),(0,In.jsx)(pr,{htmlFor:"includeIncome",className:t?"text-gray-300":"text-slate-700",children:"Income"})]}),(0,In.jsxs)("div",{className:"flex items-center gap-2",children:[(0,In.jsx)("input",{type:"checkbox",id:"includeExpense",checked:de.includeExpense,onChange:e=>he((0,s.A)((0,s.A)({},de),{},{includeExpense:e.target.checked})),className:"w-4 h-4"}),(0,In.jsx)(pr,{htmlFor:"includeExpense",className:t?"text-gray-300":"text-slate-700",children:"Expenses"})]})]})]}),(0,In.jsxs)("div",{className:"space-y-3",children:[(0,In.jsx)(pr,{className:"text-sm font-semibold ".concat(t?"text-white":"text-slate-800"),children:"Date Selection"}),(0,In.jsxs)("div",{className:"space-y-2",children:[(0,In.jsxs)("div",{className:"flex items-center gap-2",children:[(0,In.jsx)("input",{type:"radio",id:"singleDate",name:"dateRange",checked:"single"===de.dateRange,onChange:()=>he((0,s.A)((0,s.A)({},de),{},{dateRange:"single",startDate:N,endDate:N})),className:"w-4 h-4"}),(0,In.jsxs)(pr,{htmlFor:"singleDate",className:t?"text-gray-300":"text-slate-700",children:["Current Date (",N,")"]})]}),(0,In.jsxs)("div",{className:"flex items-center gap-2",children:[(0,In.jsx)("input",{type:"radio",id:"dateRange",name:"dateRange",checked:"range"===de.dateRange,onChange:()=>he((0,s.A)((0,s.A)({},de),{},{dateRange:"range"})),className:"w-4 h-4"}),(0,In.jsx)(pr,{htmlFor:"dateRange",className:t?"text-gray-300":"text-slate-700",children:"Date Range"})]}),"range"===de.dateRange&&(0,In.jsxs)("div",{className:"pl-6 space-y-2",children:[(0,In.jsxs)("div",{children:[(0,In.jsx)(pr,{className:"text-xs ".concat(t?"text-gray-400":"text-slate-600"),children:"Start Date"}),(0,In.jsx)(sr,{type:"date",value:de.startDate,onChange:e=>he((0,s.A)((0,s.A)({},de),{},{startDate:e.target.value})),className:"mt-1"})]}),(0,In.jsxs)("div",{children:[(0,In.jsx)(pr,{className:"text-xs ".concat(t?"text-gray-400":"text-slate-600"),children:"End Date"}),(0,In.jsx)(sr,{type:"date",value:de.endDate,onChange:e=>he((0,s.A)((0,s.A)({},de),{},{endDate:e.target.value})),className:"mt-1"})]})]})]})]}),(0,In.jsxs)("div",{className:"space-y-3",children:[(0,In.jsx)(pr,{className:"text-sm font-semibold ".concat(t?"text-white":"text-slate-800"),children:"PDF Format"}),(0,In.jsxs)("div",{children:[(0,In.jsx)(pr,{className:"text-xs ".concat(t?"text-gray-400":"text-slate-600"),children:"Page Size"}),(0,In.jsxs)("select",{value:de.pageSize,onChange:e=>he((0,s.A)((0,s.A)({},de),{},{pageSize:e.target.value})),className:"w-full mt-1 px-3 py-2 rounded-md border ".concat(t?"bg-gray-700 border-gray-600 text-white":"bg-white border-slate-300 text-slate-900"),children:[(0,In.jsx)("option",{value:"a4",children:"A4 (210 x 297 mm)"}),(0,In.jsx)("option",{value:"letter",children:"Letter (216 x 279 mm)"}),(0,In.jsx)("option",{value:"a5",children:"A5 (148 x 210 mm)"})]})]}),(0,In.jsxs)("div",{children:[(0,In.jsx)(pr,{className:"text-xs ".concat(t?"text-gray-400":"text-slate-600"),children:"Orientation"}),(0,In.jsxs)("select",{value:de.orientation,onChange:e=>he((0,s.A)((0,s.A)({},de),{},{orientation:e.target.value})),className:"w-full mt-1 px-3 py-2 rounded-md border ".concat(t?"bg-gray-700 border-gray-600 text-white":"bg-white border-slate-300 text-slate-900"),children:[(0,In.jsx)("option",{value:"portrait",children:"Portrait"}),(0,In.jsx)("option",{value:"landscape",children:"Landscape"})]})]})]}),(0,In.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,In.jsx)(rr,{variant:"outline",className:"flex-1",onClick:()=>ue(!1),children:"Cancel"}),(0,In.jsx)(rr,{className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",onClick:()=>{ue(!1),(()=>{try{let t,n,r,i;"single"===de.dateRange?(t=f.filter(e=>e.date===de.startDate),n=m.filter(e=>e.date===de.startDate),r=w.filter(e=>e.date===de.startDate),i=y.filter(e=>e.date===de.startDate)):(t=f.filter(e=>e.date>=de.startDate&&e.date<=de.endDate),n=m.filter(e=>e.date>=de.startDate&&e.date<=de.endDate),r=w.filter(e=>e.date>=de.startDate&&e.date<=de.endDate),i=y.filter(e=>e.date>=de.startDate&&e.date<=de.endDate));const s="single"===de.dateRange?x.filter(e=>e.date===de.startDate):x.filter(e=>e.date>=de.startDate&&e.date<=de.endDate),a=((e,t,n,r,i)=>{const s=e.filter(e=>!e.mpp&&!0!==e.mpp&&"true"!==e.mpp),a=e.filter(e=>!0===e.mpp||"true"===e.mpp),o={},l={};s.forEach(e=>{o[e.fuelType]||(o[e.fuelType]={liters:0,amount:0}),o[e.fuelType].liters+=e.liters,o[e.fuelType].amount+=e.amount}),a.forEach(e=>{l[e.fuelType]||(l[e.fuelType]={liters:0,amount:0}),l[e.fuelType].liters+=e.liters,l[e.fuelType].amount+=e.amount});const c=s.reduce((e,t)=>e+t.amount,0),u=s.reduce((e,t)=>e+t.liters,0),d=a.reduce((e,t)=>e+t.amount,0),h=a.reduce((e,t)=>e+t.liters,0),f=t.filter(e=>!e.mpp&&!0!==e.mpp&&"true"!==e.mpp),p=t.filter(e=>!0===e.mpp||"true"===e.mpp),m=f.reduce((e,t)=>e+t.amount,0),g=p.reduce((e,t)=>e+t.amount,0),y=f.reduce((e,t)=>t.fuelEntries&&t.fuelEntries.length>0?e+t.fuelEntries.reduce((e,t)=>e+t.liters,0):t.liters?e+t.liters:e,0),v=p.reduce((e,t)=>t.fuelEntries&&t.fuelEntries.length>0?e+t.fuelEntries.reduce((e,t)=>e+t.liters,0):t.liters?e+t.liters:e,0),w=n.filter(e=>!e.mpp).reduce((e,t)=>e+t.amount,0),b=n.filter(e=>!0===e.mpp||"true"===e.mpp).reduce((e,t)=>e+t.amount,0),x=w+f.reduce((e,t)=>t.incomeEntries&&t.incomeEntries.length>0?e+t.incomeEntries.reduce((e,t)=>e+t.amount,0):e,0),S=b+p.reduce((e,t)=>t.incomeEntries&&t.incomeEntries.length>0?e+t.incomeEntries.reduce((e,t)=>e+t.amount,0):e,0),A=r.filter(e=>!e.mpp).reduce((e,t)=>e+t.amount,0),E=r.filter(e=>!0===e.mpp||"true"===e.mpp).reduce((e,t)=>e+t.amount,0),N=A+f.reduce((e,t)=>t.expenseEntries&&t.expenseEntries.length>0?e+t.expenseEntries.reduce((e,t)=>e+t.amount,0):e,0),C=E+p.reduce((e,t)=>t.expenseEntries&&t.expenseEntries.length>0?e+t.expenseEntries.reduce((e,t)=>e+t.amount,0):e,0),_=i.filter(e=>!e.mpp).reduce((e,t)=>e+(t.amount||0),0),T=i.filter(e=>!0===e.mpp||"true"===e.mpp).reduce((e,t)=>e+(t.amount||0),0);return{fuelSalesNoMPP:c,fuelLitersNoMPP:u,fuelSalesMPP:d,fuelLitersMPP:h,fuelSalesByTypeNoMPP:o,fuelSalesByTypeMPP:l,creditTotalAmountNoMPP:m,creditLitersNoMPP:y,creditAmountMPP:g,creditLitersMPP:v,otherIncomeNoMPP:x,otherIncomeMPP:S,totalExpensesNoMPP:N,totalExpensesMPP:C,settlementNoMPP:_,settlementMPP:T,cashInHand:c-m-N+x-_,mppCash:d-g-C+S-T,hasMPPData:d>0||g>0||T>0||S>0||C>0}})(t,n,r,i,s),o=new al.default({orientation:de.orientation,unit:"mm",format:de.pageSize});o.setFontSize(16),o.setFont("helvetica","bold"),o.text("M.Pump Calc Daily Report",o.internal.pageSize.getWidth()/2,15,{align:"center"}),o.setFontSize(10),o.setFont("helvetica","normal");const l="single"===de.dateRange?de.startDate:"".concat(de.startDate," to ").concat(de.endDate);o.text(l,o.internal.pageSize.getWidth()/2,22,{align:"center"});let c=30;if(de.includeSummary){o.setFontSize(12),o.setFont("helvetica","bold"),o.text("SUMMARY",14,c),c+=5;const e=[];let t=1;new Set([...Object.keys(a.fuelSalesByTypeNoMPP||{}),...Object.keys(a.fuelSalesByTypeMPP||{})]).forEach(n=>{const r=a.fuelSalesByTypeNoMPP[n]||{liters:0,amount:0},i=a.fuelSalesByTypeMPP[n]||{liters:0,amount:0};e.push(["".concat(t,". ").concat(n," Sales"),r.liters.toFixed(2),"\u20b9".concat(r.amount.toFixed(2)),i.liters.toFixed(2),"\u20b9".concat(i.amount.toFixed(2))]),t++}),de.includeCredit&&(e.push(["".concat(t,". Credit Sales"),a.creditLitersNoMPP.toFixed(2),"\u20b9".concat(a.creditAmountNoMPP.toFixed(2)),a.creditLitersMPP.toFixed(2),"\u20b9".concat(a.creditAmountMPP.toFixed(2))]),t++),e.push(["".concat(t,". Settlement"),"-","\u20b9".concat(a.settlementNoMPP.toFixed(2)),"-","\u20b9".concat(a.settlementMPP.toFixed(2))]),t++,de.includeIncome&&(e.push(["".concat(t,". Income"),"-","\u20b9".concat(a.otherIncomeNoMPP.toFixed(2)),"-","\u20b9".concat(a.otherIncomeMPP.toFixed(2))]),t++),de.includeExpense&&(e.push(["".concat(t,". Expenses"),"-","\u20b9".concat(a.totalExpensesNoMPP.toFixed(2)),"-","\u20b9".concat(a.totalExpensesMPP.toFixed(2))]),t++),e.push([{content:"Cash in Hand / MPP Cash",styles:{fontStyle:"bold",fillColor:[240,240,240]}},"-",{content:"\u20b9".concat(a.cashInHand.toFixed(2)),styles:{fontStyle:"bold"}},"-",{content:"\u20b9".concat(a.mppCash.toFixed(2)),styles:{fontStyle:"bold"}}]),o.autoTable({startY:c,head:[["Category",{content:"Non-MPP\nLitres",styles:{halign:"center"}},{content:"Non-MPP\nAmount",styles:{halign:"center"}},{content:"MPP\nLitres",styles:{halign:"center"}},{content:"MPP\nAmount",styles:{halign:"center"}}]],body:e,theme:"grid",styles:{fontSize:7,cellPadding:1.5},headStyles:{fillColor:[240,240,240],textColor:[0,0,0],fontStyle:"bold",fontSize:7},columnStyles:{0:{cellWidth:45},1:{halign:"right",cellWidth:22},2:{halign:"right",cellWidth:30},3:{halign:"right",cellWidth:22},4:{halign:"right",cellWidth:30}}}),c=o.lastAutoTable.finalY+10}if(de.includeSales&&t.length>0){o.setFontSize(12),o.setFont("helvetica","bold"),o.text("READING SALES",14,c),c+=5;const e=t.map(e=>[e.nozzle,e.fuelType,e.startReading,e.endReading,e.liters.toFixed(2),"\u20b9".concat(e.rate.toFixed(2)),"\u20b9".concat(e.amount.toFixed(2))]);e.push([{content:"Total Reading Sales",colSpan:4,styles:{fontStyle:"bold"}},a.totalLiters.toFixed(2),"-","\u20b9".concat(a.fuelCashSales.toFixed(2))]),o.autoTable({startY:c,head:[["Nozzle","Fuel Type","Start","End","Liters","Rate","Amount"]],body:e,theme:"grid",styles:{fontSize:7,cellPadding:1.5},headStyles:{fillColor:[240,240,240],textColor:[0,0,0],fontStyle:"bold"},columnStyles:{0:{halign:"center",cellWidth:15},2:{halign:"right",cellWidth:20},3:{halign:"right",cellWidth:20},4:{halign:"right"},5:{halign:"right"},6:{halign:"right",fontStyle:"bold"}}}),c=o.lastAutoTable.finalY+10}if(de.includeCredit&&n.length>0&&c<250){c>220&&(o.addPage(),c=20),o.setFontSize(12),o.setFont("helvetica","bold"),o.text("CREDIT SALES",14,c),c+=5;const e=n.map(e=>[e.customerName,e.vehicleNumber||"N/A",e.fuelType||"N/A",e.liters?e.liters.toFixed(2):"N/A",e.rate?"\u20b9".concat(e.rate.toFixed(2)):"N/A","\u20b9".concat(e.amount.toFixed(2))]);e.push([{content:"Total Credit Sales",colSpan:5,styles:{fontStyle:"bold"}},"\u20b9".concat(a.creditAmount.toFixed(2))]),o.autoTable({startY:c,head:[["Customer","Vehicle","Fuel Type","Liters","Rate","Amount"]],body:e,theme:"grid",styles:{fontSize:7,cellPadding:1.5},headStyles:{fillColor:[240,240,240],textColor:[0,0,0],fontStyle:"bold"},columnStyles:{1:{halign:"center"},3:{halign:"right"},4:{halign:"right"},5:{halign:"right",fontStyle:"bold"}}}),c=o.lastAutoTable.finalY+10}if(s.length>0&&c<250){c>220&&(o.addPage(),c=20),o.setFontSize(12),o.setFont("helvetica","bold"),o.text("SETTLEMENT RECORDS",14,c),c+=5;const e=s.map((e,t)=>[t+1,e.date,e.description||"Settlement","\u20b9".concat(e.amount.toFixed(2)),e.mpp?"Yes":"No"]),t=s.reduce((e,t)=>e+t.amount,0);e.push([{content:"Total",colSpan:3,styles:{fontStyle:"bold",fillColor:[240,240,240]}},{content:"\u20b9".concat(t.toFixed(2)),styles:{fontStyle:"bold",halign:"right"}},""]),o.autoTable({startY:c,head:[["#","Date","Description","Amount","MPP"]],body:e,theme:"grid",styles:{fontSize:8,cellPadding:2},headStyles:{fillColor:[240,240,240],textColor:[0,0,0],fontStyle:"bold"},columnStyles:{0:{cellWidth:10},1:{cellWidth:25},3:{halign:"right"},4:{halign:"center"}}}),c=o.lastAutoTable.finalY+10}const u=de.includeIncome&&r.length>0,d=de.includeExpense&&i.length>0;if((u||d)&&c<250){c>220&&(o.addPage(),c=20),o.setFontSize(12),o.setFont("helvetica","bold"),o.text("INCOME & EXPENSES",14,c),c+=5;const e=[];u&&r.forEach(t=>{e.push(["Income",t.description,"\u20b9".concat(t.amount.toFixed(2))])}),d&&i.forEach(t=>{e.push(["Expense",t.description,"\u20b9".concat(t.amount.toFixed(2))])}),o.autoTable({startY:c,head:[["Type","Description","Amount"]],body:e,theme:"grid",styles:{fontSize:8,cellPadding:2},headStyles:{fillColor:[240,240,240],textColor:[0,0,0],fontStyle:"bold"},columnStyles:{2:{halign:"right"}}}),c=o.lastAutoTable.finalY+10}const h="single"===de.dateRange?e=>e.date===de.startDate:e=>e.date>=de.startDate&&e.date<=de.endDate,p=x.filter(h),g=P.filter(h),v=a.cashInHand+a.mppCash,b=p.filter(e=>e.description&&e.description.toLowerCase().includes("home")).reduce((e,t)=>e+(t.amount||0),0),S=v+b+g.filter(e=>e.mode&&e.mode.toLowerCase().includes("home")).reduce((e,t)=>e+(t.amount||0),0)+g.filter(e=>e.mode&&"cash"===e.mode.toLowerCase()).reduce((e,t)=>e+(t.amount||0),0),A=p.filter(e=>e.description&&e.description.toLowerCase().includes("card")).reduce((e,t)=>e+(t.amount||0),0)+g.filter(e=>e.mode&&"card"===e.mode.toLowerCase()).reduce((e,t)=>e+(t.amount||0),0),E=p.filter(e=>e.description&&e.description.toLowerCase().includes("paytm")).reduce((e,t)=>e+(t.amount||0),0)+g.filter(e=>e.mode&&("wallet"===e.mode.toLowerCase()||e.mode.toLowerCase().includes("paytm"))).reduce((e,t)=>e+(t.amount||0),0),N=p.filter(e=>e.description&&e.description.toLowerCase().includes("phonepe")).reduce((e,t)=>e+(t.amount||0),0)+g.filter(e=>e.mode&&e.mode.toLowerCase().includes("phonepe")).reduce((e,t)=>e+(t.amount||0),0),C=p.filter(e=>e.description&&e.description.toLowerCase().includes("dtp")).reduce((e,t)=>e+(t.amount||0),0)+g.filter(e=>e.mode&&"dtp"===e.mode.toLowerCase()).reduce((e,t)=>e+(t.amount||0),0);c>220&&(o.addPage(),c=20),o.setFontSize(12),o.setFont("helvetica","bold"),o.text("BANK SETTLEMENT REPORT",14,c),c+=5;const _=[["Cash","\u20b9".concat(S.toFixed(2))],["Card","\u20b9".concat(A.toFixed(2))],["Paytm","\u20b9".concat(E.toFixed(2))],["PhonePe","\u20b9".concat(N.toFixed(2))],["DTP","\u20b9".concat(C.toFixed(2))]],T=S+A+E+N+C;_.push([{content:"Total",styles:{fontStyle:"bold",fillColor:[240,240,240]}},{content:"\u20b9".concat(T.toFixed(2)),styles:{fontStyle:"bold",halign:"right"}}]),o.autoTable({startY:c,head:[["Payment Mode","Amount"]],body:_,theme:"grid",styles:{fontSize:10,cellPadding:3},headStyles:{fillColor:[240,240,240],textColor:[0,0,0],fontStyle:"bold"},columnStyles:{0:{cellWidth:80},1:{halign:"right",cellWidth:80}}}),c=o.lastAutoTable.finalY+10;const I=o.internal.getNumberOfPages();for(let e=1;e<=I;e++)o.setPage(e),o.setFontSize(8),o.setFont("helvetica","normal"),o.text("Generated on: ".concat((new Date).toLocaleString()),105,287,{align:"center"});const k="single"===de.dateRange?"mpump-report-".concat(de.startDate,".pdf"):"mpump-report-".concat(de.startDate,"-to-").concat(de.endDate,".pdf"),R=/Android/i.test(navigator.userAgent),D=/wv/.test(navigator.userAgent)||window.MPumpCalcAndroid;if(R&&D&&window.MPumpCalcAndroid)try{const e=o.output("blob"),t=new FileReader;t.onloadend=function(){const e=t.result.split(",")[1];window.MPumpCalcAndroid.openPdfWithViewer(e,k)},t.readAsDataURL(e),fe({title:"PDF Generated",description:"Saving PDF to Downloads folder..."})}catch(e){console.error("Android PDF error:",e),o.save(k)}else o.save(k),fe({title:"PDF Generated",description:"".concat(k," has been downloaded")})}catch(e){console.error("Error generating PDF:",e),fe({title:"PDF Generation Failed",description:"Could not create PDF. Please try again.",variant:"destructive"})}})()},children:"Generate PDF"})]})]})]})}),(0,In.jsx)($N,{isDarkMode:t})]})}):(0,In.jsx)(iC,{isDarkMode:t});var $e},lC=["__scopeToast","hotkey","label"],cC=["__scopeToast","onFocusFromOutsideViewport"],uC=["forceMount","open","defaultOpen","onOpenChange"],dC=["__scopeToast","type","duration","open","onClose","onEscapeKeyDown","onPause","onResume","onSwipeStart","onSwipeMove","onSwipeCancel","onSwipeEnd"],hC=["__scopeToast","children"],fC=["__scopeToast"],pC=["__scopeToast"],mC=["altText"],gC=["__scopeToast"],yC=["__scopeToast","altText"];var vC="ToastProvider",[wC,bC,xC]=Tr("Toast"),[SC,AC]=br("Toast",[xC]),[EC,NC]=SC(vC),CC=t=>{const{__scopeToast:n,label:r="Notification",duration:i=5e3,swipeDirection:s="right",swipeThreshold:a=50,children:o}=t,[l,c]=e.useState(null),[u,d]=e.useState(0),h=e.useRef(!1),f=e.useRef(!1);return r.trim()||console.error("Invalid prop `label` supplied to `".concat(vC,"`. Expected non-empty `string`.")),(0,In.jsx)(wC.Provider,{scope:n,children:(0,In.jsx)(EC,{scope:n,label:r,duration:i,swipeDirection:s,swipeThreshold:a,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:e.useCallback(()=>d(e=>e+1),[]),onToastRemove:e.useCallback(()=>d(e=>e-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};CC.displayName=vC;var _C="ToastViewport",TC=["F8"],IC="toast.viewportPause",kC="toast.viewportResume",PC=e.forwardRef((t,n)=>{const{__scopeToast:r,hotkey:a=TC,label:o="Notifications ({hotkey})"}=t,l=(0,i.A)(t,lC),c=NC(_C,r),u=bC(r),d=e.useRef(null),h=e.useRef(null),f=e.useRef(null),p=e.useRef(null),m=Hn(n,p,c.onViewportChange),g=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=c.toastCount>0;e.useEffect(()=>{const e=e=>{var t;0!==a.length&&a.every(t=>e[t]||e.code===t)&&(null===(t=p.current)||void 0===t||t.focus())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[a]),e.useEffect(()=>{const e=d.current,t=p.current;if(y&&e&&t){const n=()=>{if(!c.isClosePausedRef.current){const e=new CustomEvent(IC);t.dispatchEvent(e),c.isClosePausedRef.current=!0}},r=()=>{if(c.isClosePausedRef.current){const e=new CustomEvent(kC);t.dispatchEvent(e),c.isClosePausedRef.current=!1}},i=t=>{!e.contains(t.relatedTarget)&&r()},s=()=>{e.contains(document.activeElement)||r()};return e.addEventListener("focusin",n),e.addEventListener("focusout",i),e.addEventListener("pointermove",n),e.addEventListener("pointerleave",s),window.addEventListener("blur",n),window.addEventListener("focus",r),()=>{e.removeEventListener("focusin",n),e.removeEventListener("focusout",i),e.removeEventListener("pointermove",n),e.removeEventListener("pointerleave",s),window.removeEventListener("blur",n),window.removeEventListener("focus",r)}}},[y,c.isClosePausedRef]);const v=e.useCallback(e=>{let{tabbingDirection:t}=e;const n=u().map(e=>{const n=e.ref.current,r=[n,...QC(n)];return"forwards"===t?r:r.reverse()});return("forwards"===t?n.reverse():n).flat()},[u]);return e.useEffect(()=>{const e=p.current;if(e){const t=t=>{const n=t.altKey||t.ctrlKey||t.metaKey;if("Tab"===t.key&&!n){const n=document.activeElement,a=t.shiftKey;var r;if(t.target===e&&a)return void(null===(r=h.current)||void 0===r||r.focus());const o=v({tabbingDirection:a?"backwards":"forwards"}),l=o.findIndex(e=>e===n);var i,s;if(JC(o.slice(l+1)))t.preventDefault();else a?null===(i=h.current)||void 0===i||i.focus():null===(s=f.current)||void 0===s||s.focus()}};return e.addEventListener("keydown",t),()=>e.removeEventListener("keydown",t)}},[u,v]),(0,In.jsxs)(Xi,{ref:d,role:"region","aria-label":o.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&(0,In.jsx)(DC,{ref:h,onFocusFromOutsideViewport:()=>{JC(v({tabbingDirection:"forwards"}))}}),(0,In.jsx)(wC.Slot,{scope:r,children:(0,In.jsx)(lr.ol,(0,s.A)((0,s.A)({tabIndex:-1},l),{},{ref:m}))}),y&&(0,In.jsx)(DC,{ref:f,onFocusFromOutsideViewport:()=>{JC(v({tabbingDirection:"backwards"}))}})]})});PC.displayName=_C;var RC="ToastFocusProxy",DC=e.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r}=e,a=(0,i.A)(e,cC),o=NC(RC,n);return(0,In.jsx)(Pu,(0,s.A)((0,s.A)({tabIndex:0},a),{},{ref:t,style:{position:"fixed"},onFocus:e=>{var t;const n=e.relatedTarget;!(null!==(t=o.viewport)&&void 0!==t&&t.contains(n))&&r()}}))});DC.displayName=RC;var OC="Toast",LC=e.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:a,onOpenChange:o}=e,l=(0,i.A)(e,uC),[c,u]=jr({prop:r,defaultProp:null===a||void 0===a||a,onChange:o,caller:OC});return(0,In.jsx)(oi,{present:n||c,children:(0,In.jsx)(jC,(0,s.A)((0,s.A)({open:c},l),{},{ref:t,onClose:()=>u(!1),onPause:Mr(e.onPause),onResume:Mr(e.onResume),onSwipeStart:yr(e.onSwipeStart,e=>{e.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:yr(e.onSwipeMove,e=>{const{x:t,y:n}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","move"),e.currentTarget.style.setProperty("--radix-toast-swipe-move-x","".concat(t,"px")),e.currentTarget.style.setProperty("--radix-toast-swipe-move-y","".concat(n,"px"))}),onSwipeCancel:yr(e.onSwipeCancel,e=>{e.currentTarget.setAttribute("data-swipe","cancel"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:yr(e.onSwipeEnd,e=>{const{x:t,y:n}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","end"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.setProperty("--radix-toast-swipe-end-x","".concat(t,"px")),e.currentTarget.style.setProperty("--radix-toast-swipe-end-y","".concat(n,"px")),u(!1)})}))})});LC.displayName=OC;var[MC,FC]=SC(OC,{onClose(){}}),jC=e.forwardRef((t,n)=>{const{__scopeToast:r,type:a="foreground",duration:o,open:l,onClose:c,onEscapeKeyDown:u,onPause:d,onResume:h,onSwipeStart:f,onSwipeMove:p,onSwipeCancel:m,onSwipeEnd:g}=t,y=(0,i.A)(t,dC),v=NC(OC,r),[w,b]=e.useState(null),x=Hn(n,e=>b(e)),S=e.useRef(null),A=e.useRef(null),E=o||v.duration,N=e.useRef(0),C=e.useRef(E),_=e.useRef(0),{onToastAdd:T,onToastRemove:I}=v,k=Mr(()=>{var e;(null===w||void 0===w?void 0:w.contains(document.activeElement))&&(null===(e=v.viewport)||void 0===e||e.focus()),c()}),P=e.useCallback(e=>{e&&e!==1/0&&(window.clearTimeout(_.current),N.current=(new Date).getTime(),_.current=window.setTimeout(k,e))},[k]);e.useEffect(()=>{const e=v.viewport;if(e){const t=()=>{P(C.current),null===h||void 0===h||h()},n=()=>{const e=(new Date).getTime()-N.current;C.current=C.current-e,window.clearTimeout(_.current),null===d||void 0===d||d()};return e.addEventListener(IC,n),e.addEventListener(kC,t),()=>{e.removeEventListener(IC,n),e.removeEventListener(kC,t)}}},[v.viewport,E,d,h,P]),e.useEffect(()=>{l&&!v.isClosePausedRef.current&&P(E)},[l,E,v.isClosePausedRef,P]),e.useEffect(()=>(T(),()=>I()),[T,I]);const R=e.useMemo(()=>w?KC(w):null,[w]);return v.viewport?(0,In.jsxs)(In.Fragment,{children:[R&&(0,In.jsx)(BC,{__scopeToast:r,role:"status","aria-live":"foreground"===a?"assertive":"polite",children:R}),(0,In.jsx)(MC,{scope:r,onClose:k,children:ar.createPortal((0,In.jsx)(wC.ItemSlot,{scope:r,children:(0,In.jsx)(Yi,{asChild:!0,onEscapeKeyDown:yr(u,()=>{v.isFocusedToastEscapeKeyDownRef.current||k(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:(0,In.jsx)(lr.li,(0,s.A)((0,s.A)({tabIndex:0,"data-state":l?"open":"closed","data-swipe-direction":v.swipeDirection},y),{},{ref:x,style:(0,s.A)({userSelect:"none",touchAction:"none"},t.style),onKeyDown:yr(t.onKeyDown,e=>{"Escape"===e.key&&(null===u||void 0===u||u(e.nativeEvent),e.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,k()))}),onPointerDown:yr(t.onPointerDown,e=>{0===e.button&&(S.current={x:e.clientX,y:e.clientY})}),onPointerMove:yr(t.onPointerMove,e=>{if(!S.current)return;const t=e.clientX-S.current.x,n=e.clientY-S.current.y,r=Boolean(A.current),i=["left","right"].includes(v.swipeDirection),s=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,a=i?s(0,t):0,o=i?0:s(0,n),l="touch"===e.pointerType?10:2,c={x:a,y:o},u={originalEvent:e,delta:c};r?(A.current=c,YC("toast.swipeMove",p,u,{discrete:!1})):XC(c,v.swipeDirection,l)?(A.current=c,YC("toast.swipeStart",f,u,{discrete:!1}),e.target.setPointerCapture(e.pointerId)):(Math.abs(t)>l||Math.abs(n)>l)&&(S.current=null)}),onPointerUp:yr(t.onPointerUp,e=>{const t=A.current,n=e.target;if(n.hasPointerCapture(e.pointerId)&&n.releasePointerCapture(e.pointerId),A.current=null,S.current=null,t){const n=e.currentTarget,r={originalEvent:e,delta:t};XC(t,v.swipeDirection,v.swipeThreshold)?YC("toast.swipeEnd",g,r,{discrete:!0}):YC("toast.swipeCancel",m,r,{discrete:!0}),n.addEventListener("click",e=>e.preventDefault(),{once:!0})}})}))})}),v.viewport)})]}):null}),BC=t=>{const{__scopeToast:n,children:r}=t,a=(0,i.A)(t,hC),o=NC(OC,n),[l,c]=e.useState(!1),[u,d]=e.useState(!1);return function(){const e=Mr(arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{});Rr(()=>{let t=0,n=0;return t=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(n)}},[e])}(()=>c(!0)),e.useEffect(()=>{const e=window.setTimeout(()=>d(!0),1e3);return()=>window.clearTimeout(e)},[]),u?null:(0,In.jsx)(ls,{asChild:!0,children:(0,In.jsx)(Pu,(0,s.A)((0,s.A)({},a),{},{children:l&&(0,In.jsxs)(In.Fragment,{children:[o.label," ",r]})}))})},UC=e.forwardRef((e,t)=>{const{__scopeToast:n}=e,r=(0,i.A)(e,fC);return(0,In.jsx)(lr.div,(0,s.A)((0,s.A)({},r),{},{ref:t}))});UC.displayName="ToastTitle";var zC=e.forwardRef((e,t)=>{const{__scopeToast:n}=e,r=(0,i.A)(e,pC);return(0,In.jsx)(lr.div,(0,s.A)((0,s.A)({},r),{},{ref:t}))});zC.displayName="ToastDescription";var VC="ToastAction",HC=e.forwardRef((e,t)=>{const{altText:n}=e,r=(0,i.A)(e,mC);return n.trim()?(0,In.jsx)(GC,{altText:n,asChild:!0,children:(0,In.jsx)(qC,(0,s.A)((0,s.A)({},r),{},{ref:t}))}):(console.error("Invalid prop `altText` supplied to `".concat(VC,"`. Expected non-empty `string`.")),null)});HC.displayName=VC;var WC="ToastClose",qC=e.forwardRef((e,t)=>{const{__scopeToast:n}=e,r=(0,i.A)(e,gC),a=FC(WC,n);return(0,In.jsx)(GC,{asChild:!0,children:(0,In.jsx)(lr.button,(0,s.A)((0,s.A)({type:"button"},r),{},{ref:t,onClick:yr(e.onClick,a.onClose)}))})});qC.displayName=WC;var GC=e.forwardRef((e,t)=>{const{__scopeToast:n,altText:r}=e,a=(0,i.A)(e,yC);return(0,In.jsx)(lr.div,(0,s.A)((0,s.A)({"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0},a),{},{ref:t}))});function KC(e){const t=[];return Array.from(e.childNodes).forEach(e=>{if(e.nodeType===e.TEXT_NODE&&e.textContent&&t.push(e.textContent),function(e){return e.nodeType===e.ELEMENT_NODE}(e)){const n=e.ariaHidden||e.hidden||"none"===e.style.display,r=""===e.dataset.radixToastAnnounceExclude;if(!n)if(r){const n=e.dataset.radixToastAnnounceAlt;n&&t.push(n)}else t.push(...KC(e))}}),t}function YC(e,t,n,r){let{discrete:i}=r;const s=n.originalEvent.currentTarget,a=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),i?cr(s,a):s.dispatchEvent(a)}var XC=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=Math.abs(e.x),i=Math.abs(e.y),s=r>i;return"left"===t||"right"===t?s&&r>n:!s&&i>n};function QC(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function JC(e){const t=document.activeElement;return e.some(e=>e===t||(e.focus(),document.activeElement!==t))}var ZC=PC,$C=LC,e_=UC,t_=zC,n_=HC,r_=qC;const i_=["className"],s_=["className","variant"],a_=["className"],o_=["className"],l_=["className"],c_=["className"],u_=CC,d_=e.forwardRef((e,t)=>{let{className:n}=e,r=(0,i.A)(e,i_);return(0,In.jsx)(ZC,(0,s.A)({ref:t,className:Tn("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n)},r))});d_.displayName=ZC.displayName;const h_=er("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),f_=e.forwardRef((e,t)=>{let{className:n,variant:r}=e,a=(0,i.A)(e,s_);return(0,In.jsx)($C,(0,s.A)({ref:t,className:Tn(h_({variant:r}),n)},a))});f_.displayName=$C.displayName;e.forwardRef((e,t)=>{let{className:n}=e,r=(0,i.A)(e,a_);return(0,In.jsx)(n_,(0,s.A)({ref:t,className:Tn("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n)},r))}).displayName=n_.displayName;const p_=e.forwardRef((e,t)=>{let{className:n}=e,r=(0,i.A)(e,o_);return(0,In.jsx)(r_,(0,s.A)((0,s.A)({ref:t,className:Tn("absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":""},r),{},{children:(0,In.jsx)(fo,{className:"h-4 w-4"})}))});p_.displayName=r_.displayName;const m_=e.forwardRef((e,t)=>{let{className:n}=e,r=(0,i.A)(e,l_);return(0,In.jsx)(e_,(0,s.A)({ref:t,className:Tn("text-sm font-semibold [&+div]:text-xs",n)},r))});m_.displayName=e_.displayName;const g_=e.forwardRef((e,t)=>{let{className:n}=e,r=(0,i.A)(e,c_);return(0,In.jsx)(t_,(0,s.A)({ref:t,className:Tn("text-sm opacity-90",n)},r))});g_.displayName=t_.displayName;const y_=["id","title","description","action"];function v_(){const{toasts:e}=$o();return(0,In.jsxs)(u_,{children:[e.map(function(e){let{id:t,title:n,description:r,action:a}=e,o=(0,i.A)(e,y_);return(0,In.jsxs)(f_,(0,s.A)((0,s.A)({},o),{},{children:[(0,In.jsxs)("div",{className:"grid gap-1",children:[n&&(0,In.jsx)(m_,{children:n}),r&&(0,In.jsx)(g_,{children:r})]}),a,(0,In.jsx)(p_,{})]}),t)}),(0,In.jsx)(d_,{})]})}const w_=function(){return(0,In.jsx)("div",{className:"App",children:(0,In.jsxs)(ct,{children:[(0,In.jsx)(ke,{children:(0,In.jsx)(Te,{path:"/",element:(0,In.jsx)(oC,{})})}),(0,In.jsx)(v_,{})]})})};r.createRoot(document.getElementById("root")).render((0,In.jsx)(e.StrictMode,{children:(0,In.jsx)(w_,{})}))})()})();
//# sourceMappingURL=main.f8525bab.js.map